try {
(void 0===window.QSI.PopUp||window.QTest)&&(QSI.PopUp=QSI.util.Creative({initialize:function(a){this.globalInitialize(a),window.QSI_INTERNAL=!1,this.shouldShow()&&this.setupPopup()},setupPopup:function(){var a=this,b=function(){a.popup()};if(this.options.creativeOptions.showOnClick){var c=document.body;this.f=function(){try{a.popupOnClick()}catch(b){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(b)}},QSI.util.observe(c,"click",this.f)}else if(this.options.creativeOptions.showOnLoad)this.popup();else if(this.options.creativeOptions.showOnExit)QSI.util.observe(window,"unload",b);else if(this.options.creativeOptions.showOnSiteExit){var d=this.getInternalSubmitButtons().concat(this.getInternalLinks());this.addListenerToElements(d,"click",function(){try{window.QSI_INTERNAL=!0}catch(a){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(a)}}),QSI.util.observe(document,"keydown",function(a){try{(82===a.keyCode||116===a.keyCode)&&(window.QSI_INTERNAL=!0)}catch(b){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(b)}}),QSI.util.observe(window,"beforeunload",function(){try{window.QSI_INTERNAL||b()}catch(a){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(a)}})}},popupOnClick:function(){var a=document.body;QSI.util.stopObserving(a,"click",this.f),this.popup()},refreshKeyPressed:function(a){return 82===a.keyCode&&(a.ctrlKey||a.metaKey)||116===a.keyCode},popup:function(){this.impress();var a=this.getTarget(),b=parseInt(this.options.creativeOptions.width,10),c=parseInt(this.options.creativeOptions.height,10);this.win=QSI.util.openWin(a,this.id,{width:b,height:c,scrollbars:"yes"}),this.displayed.resolve()},addListenerToElements:function(a,b,c){QSI.util.each(a,function(a){QSI.util.observe(a,b,c)})},getInternalSubmitButtons:function(){var a=this;return QSI.util.filter(this.getElementsByTag("input",{type:"submit"}),function(b){var c=b.form;return a.isInternalLink(c.getAttribute("action"))})},getInternalLinks:function(){var a=this,b=this.getElementsByTag("a");return QSI.util.filter(b,function(b){return a.isInternalLink(b.getAttribute("href"))})},getElementsByTag:function(a,b,c){c=c||document;var d=c.getElementsByTagName(a);return QSI.util.filter(d,function(a){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&(!a.getAttribute(c)||a.getAttribute(c)!==b[c]))return!1;return!0})},getCurrentDomain:function(){return this.currentDomain||(this.currentDomain=this.getDomain(window.location.href)),this.currentDomain},getDomain:function(a){var b,c,d,e=/(https?:\/\/)?([a-z0-9\-]+\.)*([a-z]+)/;if(this.isRelative(a))return this.getCurrentDomain();if(b=e.exec(a)){var f=b.length;return d=b[f-1],c="",b[f-2]&&(c=b[f-2]),c+d}return this.getCurrentDomain()},isRelative:function(a){return!/https?\:\/\//.test(a)},isInternalLink:function(a){return this.getDomain(a)===this.getCurrentDomain()}}));
} catch(e) {
  if (typeof QSI !== 'undefined' && QSI.dbg && QSI.dbg.e) {
    QSI.dbg.e(e);
  }
}