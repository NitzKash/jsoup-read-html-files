function WindowService(){this._isOpened=!1}function ConfigurationAuthService(e){this._configuration=e}function Parameter(e,t,n,r,o){this.verifyParameter(e,"directiveName"),this.verifyParameter(t,"label"),this.verifyParameter(n,"name"),this.setValue(r),this._label=t,this._name=n,this.directiveName=e,this.isVisible=!0,this.suppressLabel=o}function FloatParameter(e,t,n,r){Parameter.call(this,r||"numeric-up-down",e,t,n),this.decimals=2,this.increment=1,this.min=1,this.max=999999999999}function IntegerParameter(e,t,n,r){Parameter.call(this,r||"numeric-up-down",e,t,n),this.decimals=0,this.increment=1,this.min=1,this.max=999}function StringParameter(e,t,n){Parameter.call(this,"fmr-text-box",e,t,n),this.rows=1}function Parameters(){Array.call(this),this._rules=[]}function EventArgs(){this.cancelled=!1}function EventHandlerInfo(e,t,n){this.callback=e,this.context=t,this._priority=n||0}function EventHandlerChain(e,t){this._associateObject=e,this._eventName=t,this._handlers=[]}function MarketInfo(){this.name="NYSE",this.description="The New York Stock Exchange",this.marketOpenNative=new Date(1900,0,1,9,30),this.marketCloseNative=new Date(1900,0,1,16,0),this.extendedMarketOpenNative=new Date(1900,0,1,4,0),this.extendedMarketCloseNative=new Date(1900,0,1,20,0),this.timezoneName="America/New_York",this.timezone=moment.tz(this.timezoneName)}function Exception(e,t,n){Error.call(this,e),this._message=e,"number"==typeof n&&(this._code=n),this._innerException=t}function ArgumentException(e,t,n,r){this._message=void 0===t||null===t?"Value does not fall within the expected range.":t,Exception.call(this,this._message,n,r),this._paramName=e,this._innerException=n,this._errorCode=r}function UndefinedOrNullException(e,t,n,r){this._message=void 0===t||null===t?"Parameters should have right value.":t,ArgumentException.call(this,e,this._message,n,r),this._paramName=e,this._innerException=n,this._errorCode=r}function ArgumentOutOfRangeException(e,t,n,r){this._message=void 0===t||null===t?"The instance throw ArgumentOutOfRangeException.":t,ArgumentException.call(this,e,this._message,n,r),this._paramName=e,this._innerException=n,this._errorCode=r}function InvalidOperationException(e,t,n){this._message=void 0===e||null===e?"Operation is not valid due to the current state of the object.":e,Exception.call(this,this._message,t,n),this._innerException=t,this._errorCode=n}function NotSupportedException(e,t,n){this._innerException=t,this._errorCode=n,this._message=e||"Specified method is not supported.",Exception.call(this,this._message,this._innerException,this._errorCode)}function NetworkException(e,t,n){this._message=void 0===e||null===e?"Current Service have network problems.":e,Exception.call(this,this._message,t,n),this._innerException=t,this._errorCode=n}function ApplicationException(e,t,n){this._message=void 0===e||null===e?"Error in the application.":e,Exception.call(this,this._message,t,n),this._innerException=t,this._errorCode=n}function ObjectFactory(){}function ConsoleLogger(){}function LogFactory(){this._consoleLogger}function Dummy(){}function DataSeriesItem(e,t){if(void 0===e||null===e)throw new UndefinedOrNullException("date");if(void 0===t||null===t)throw new UndefinedOrNullException("value");this.date=e,this.value=t}function DataSeries(e){Array.call(this),this._name=e}function Bar(e,t,n,r,o,i){this.open=e,this.high=t,this.low=n,this.close=r,this.volume=o,this.timestamp=i}function Bars(e){Array.call(this),this._name=e}function Range(e,t){this.min=e,this.max=t}function DataSource(e,t){this._id=e,this._name=t,this._state=Fmr_Pwi_Commons_DataSourceState.Normal}function DataSeriesDataSource(e,t){DataSource.call(this,e,t),this._dataseries=null}function ProxyDataSeriesDataSource(e,t,n,r){DataSeriesDataSource.call(this,n,r),this._dataSource=e,this._getter=t,this.getDataSeries()}function SingleValueDataSource(e,t){t=t||GUID.generate(),DataSource.call(this,t),this._value=e}function DataSourceCenter(){this._dataSources=[]}function CorporateAction(e,t,n,r,o,i){function a(e,t){if(void 0===e||null===e)throw new UndefinedOrNullException(t)}a(e,"actionType"),a(t,"rate"),a(n,"exDate"),a(r,"recordDate"),a(o,"payDate"),a(i,"appDate"),this.actionType=e,this.rate=t,this.exDate=n,this.recordDate=r,this.payDate=o,this.appDate=i}function DigitalVolatilityAction(e,t,n){function r(e,t){if(void 0===e||null===e)throw new UndefinedOrNullException(t)}r(e,"title"),r(t,"date"),r(n,"icon"),this.title=e,this.date=t,this.icon=n}function Split(e,t,n,r,o,i,a){CorporateAction.call(this,e,t,n,r,o,i),this.directiveName=a||"split"}function Dividend(e,t,n,r,o,i,a){CorporateAction.call(this,e,t,n,r,o,i),this.directiveName=a||"dividend"}function Earning(e,t,n,r,o,i,a){CorporateAction.call(this,e,t,n,r,o,i),this.directiveName=a||"earning"}function SecurityData(e,t,n,r){if(!e)throw new UndefinedOrNullException("symbol");if(!n)throw new UndefinedOrNullException("scale");this.bars=ObjectFactory.createInstance(Bars),this._sentiments=ObjectFactory.createInstance(Bars),this._corporateActions=[],this._description=t,this._scale=n,this._symbol=e,this._asOfDate=void 0,this._marketInfo=ObjectFactory.createInstance(MarketInfo),this._type=r||Fmr_Pwi_Commons_SecurityType.ETF}function SecurityDataWithError(e,t){this.symbol=e,this.exception=t}function Request(){this.method=Fmr_Pwi_Commons_HttpMethod.Get,this.template,this.host}function BarScale(e,t){if(void 0===e||null===e)throw new UndefinedOrNullException("scale");if(e===Fmr_Pwi_Commons_BarScaleType.Minute&&(void 0===t||null===t))throw new UndefinedOrNullException("interval");this._scale=e,this._interval=t}function TimeScaleDataSource(){DataSource.call(this,"TimeScale")}function HistoricalDataRequest(){Request.call(this),this.startDate,this.endDate,this.extendedHours,this.delayedData,this.productId,this.scale,this.symbols=[],this.corporateActions=!0,this.uuid,this.additionalParameters=[]}function HistoricalDataResponse(){this._securityDataList=[],this._securityDataWithErrorList=[]}function HistoricalDataService(){}function TimeframeService(){}function ErrorMessageService(){}function AddOrSubtractDataSource(e,t,n,r){var o=r?"Subtract":"Add";DataSeriesDataSource.call(this,e,o),this._datasource1=t,this._datasource2=n,this._isSubtract=r,this._eventRegistered=!1,this.initialize()}function RegistrationService(){this._items=[]}function Validator(){this._errors=[]}function SynchronizedDataSeriesDataSource(e,t,n,r){DataSeriesDataSource.call(this,e,t),this._dataSeriesDataSource=n,this._baseDataSeriesDataSource=r,this.dataSeriesUpdated(),EventBus.on(n,"DataSource:datachanged",this.dataSeriesUpdated,this),EventBus.on(r,"DataSource:datachanged",this.dataSeriesUpdated,this)}function LineThicknessParameter(e,t,n){Parameter.call(this,"line-thickness-selector",e,t,n)}function ColorParameter(e,t,n){Parameter.call(this,"color-picker",e,t,n)}function LineStyleParameter(e,t,n,r){Parameter.call(this,"line-style-selector",e,t,n),this.values=[Fmr_Pwi_Charting_LineStyle.Solid,Fmr_Pwi_Charting_LineStyle.Dashed,Fmr_Pwi_Charting_LineStyle.Dotted],!r&&this.values.push(Fmr_Pwi_Charting_LineStyle.Histogram)}function SettableDataSeriesDataSource(e,t){DataSeriesDataSource.call(this,e,t)}function BooleanParameter(e,t,n,r){Parameter.call(this,r||"fmrcheckbox",e,t,n),this.suppressLabel=!0}function BackgroundColorParameter(e,t,n){Parameter.call(this,"background-color-picker",e,t,n)}function FontColorParameter(e,t,n){Parameter.call(this,"font-color-picker",e,t,n)}function FontSizeParameter(e,t,n){Parameter.call(this,"font-size-picker",e,t,n)}function FontStyleParameter(e,t,n){Parameter.call(this,"font-style-picker",e,t,n)}function getTimeframeName(e){var t={TODAY:Fmr_Pwi_Commons_TimePeriod.OneDay,"2D":Fmr_Pwi_Commons_TimePeriod.TwoDays,"5D":Fmr_Pwi_Commons_TimePeriod.FiveDays,"10D":Fmr_Pwi_Commons_TimePeriod.TenDays,"1M":Fmr_Pwi_Commons_TimePeriod.OneMonth,"3M":Fmr_Pwi_Commons_TimePeriod.ThreeMonths,"6M":Fmr_Pwi_Commons_TimePeriod.SixMonths,YTD:Fmr_Pwi_Commons_TimePeriod.YearToDate,"1Y":Fmr_Pwi_Commons_TimePeriod.OneYear,"2Y":Fmr_Pwi_Commons_TimePeriod.TwoYears,"3Y":Fmr_Pwi_Commons_TimePeriod.ThreeYears,"5Y":Fmr_Pwi_Commons_TimePeriod.FiveYears,"10Y":Fmr_Pwi_Commons_TimePeriod.TenYears,MAX:Fmr_Pwi_Commons_TimePeriod.Max,Select:Fmr_Pwi_Commons_TimePeriod.Custom};for(var n in t)if(t[n]===e)return n}var commonsModule=angular.module("fmr.pwi.commons",[]);commonsModule.copy=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(Array.isArray(e[n])?t[n]=e[n].slice(0):t[n]=e[n])},function(e){var t=$.noConflict(!1);commonsModule.$=t,$?jQuery.noConflict(!0):e.$=t,!e.Promise&&e.Q&&(e.Promise=e.Q.Promise),Math.abs.name||Object.defineProperty(Function.prototype,"name",{configurable:!0,get:function(){var e,t=this.toString().match(/^\s*function\s*(\S+?)\s*\(/);return t&&(e=t[1]),Object.defineProperty(this,"name",{value:e}),e}}),commonsModule.constant("isMobileDevice","ontouchstart"in e.document.documentElement)}(this);var ArrayExtensions=function(e){function t(e,t,n,r,o,i,a,c){var s,u,l=r+((t-i)/(o-i)*(n-r)>>>0);return l===r&&r<a?(l++,u=c(e[l]),u>t&&(s=r)):u=c(e[l]),{target:l,targetValue:u,found:s}}function n(e,t,n,r,o,i,a,c){var s,u,l=r+((t-i)/(o-i)*(n-r)>>>0);return l===r&&r<a?(l++,u=c(e[l]),u>=t&&(s=l)):l===n&&n>0?(l--,u=c(e[l]),u<t&&(s=n)):u=c(e[l]),{target:l,targetValue:u,found:s}}var r=e||{};return r.quickSearch=function(e,t,n){var r,o,i,a,c=e.length,s=c-1,u=0;if(c<=0)return-1;if(o=n(e[u]),i=n(e[s]),o>t||i<t)return-1;for(;s>=u;){if(o=n(e[u]),i=n(e[s]),o===t)return u;if(i===t)return s;if(r=u+(t-o)/(i-o)*(s-u)>>>0,a=n(e[r]),a===t)return r;t>a?(u=r+1,s--):(s=r-1,u++)}return-1},r.quickSearchSmaller=function(e,n,r){var o,i,a,c=e.length,s=c-1,u=s,l=0;if(c<=0)return-1;if(i=r(e[l]),a=r(e[u]),i>n)return-1;for(;u>=l;){if(a<=n)return u;if(o=t(e,n,u,l,a,i,s,r),void 0!==o.found)return o.found;if(o.targetValue>n)u=o.target,a=o.targetValue;else{if(!(o.targetValue<n))return o.target;l=o.target,i=o.targetValue}}},r.quickSearchGreater=function(e,t,r){var o,i,a,c=e.length,s=c-1,u=s,l=0;if(c<=0)return-1;if(i=r(e[l]),a=r(e[u]),a<t)return-1;for(;u>=l;){if(i>=t)return l;if(o=n(e,t,u,l,a,i,s,r),void 0!==o.found)return o.found;if(o.targetValue>t)u=o.target,a=o.targetValue;else{if(!(o.targetValue<t))return o.target;l=o.target,i=o.targetValue}}},r}(ArrayExtensions);WindowService.prototype=function(){function e(e){this._isOpened||(this._isOpened=!0,EventBus.trigger(this,"Window:opened",e))}function t(){this._isOpened&&(this._isOpened=!1,EventBus.trigger(this,"Window:closed"))}function n(){return this._isOpened}return{open:e,close:t,isOpened:n}}(),WindowService.prototype.constructor=WindowService,ConfigurationAuthService.prototype=function(){function e(){return this._configuration&&this._configuration.HistoricalDataService&&this._configuration.HistoricalDataService.Uuid&&this._configuration.HistoricalDataService.Uuid.trim().length>0}return{isLoggedIn:e}}(),ConfigurationAuthService.prototype.constructor=ConfigurationAuthService,Parameter.prototype=function(){function e(e,t){if(void 0===e||null===e)throw new UndefinedOrNullException(t)}function t(){return this._label}function n(){return this._name}function r(){return this._value}function o(t){e(t,"value"),this._value=t}function i(){var e=ObjectFactory.createInstance(Parameter,this.directiveName,this._label,this._name,this._value);return e.isVisible=this.isVisible,e.suppressLabel=this.suppressLabel,e.sectionHeader=this.sectionHeader,e}function a(){return{n:this._name,v:this._value}}function c(e){e&&e.n===this._name&&"v"in e&&(this._value=e.v)}return{verifyParameter:e,getLabel:t,getName:n,getValue:r,setValue:o,clone:i,toJSON:a,fromJSON:c}}(),Parameter.prototype.constructor=Parameter,FloatParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(FloatParameter,this._label,this._name,this._value,this.directiveName);return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),FloatParameter.prototype.constructor=FloatParameter,IntegerParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(IntegerParameter,this._label,this._name,this._value,this.directiveName);return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),IntegerParameter.prototype.constructor=IntegerParameter,StringParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(StringParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),StringParameter.prototype.constructor=StringParameter,Parameters.prototype=function(){function e(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.getName()===e)return n}}function t(e){if(e){var t=this._rules.indexOf(e);t<0&&this._rules.push(e)}}function n(e){var t=this._rules.indexOf(e);t>=0&&this._rules.splice(t,1)}function r(){this._rules.length>0&&this._rules.splice(0,this._rules.length)}function o(){return this._rules.slice(0)}var i=Object.create(Array.prototype);return i.getParameter=e,i.addRule=t,i.removeRule=n,i.clearRules=r,i.getRules=o,i}(),Parameters.prototype.constructor=Parameters,EventArgs.prototype=function(){return{}}(),EventArgs.prototype.constructor=EventArgs;var EventBus=function(){function e(e,t){if(!e)throw new UndefinedOrNullException(t)}function t(t,n){e(t,"source"),e(n,"name")}function n(n,r,o){t(n,r),e(o,"callback")}function r(e,t){return{callback:e,originalCallback:e,context:t}}function o(e,t){e.splice(e.indexOf(t),1)}function i(e,t){return{source:e,name:t,subscriptions:[]}}function a(e,t){return f.filter(function(n){return n.source===e&&n.name===t})[0]}function c(e,t){var n=a(e,t);return n||(n=i(e,t),f.push(n)),n}function s(e,t,n,o){c(e,t).subscriptions.push(r(n,o))}function u(e,t,n,o){var i=r(n,o);i.callback=function(){l(e,t,n,o),n.apply(o,arguments)},c(e,t).subscriptions.push(i)}function l(e,t,n,r){var i=a(e,t);if(i){var c=i.subscriptions.filter(function(e){return e.originalCallback===n&&e.context===r});c.forEach(function(e){o(i.subscriptions,e)}),i.subscriptions.length<=0&&o(f,i)}}function m(e,t,n){var r=a(e,t);r&&(n.unshift(e),r.subscriptions.slice().forEach(function(e){e.callback.apply(e.context,n)}))}var f=[],p={on:function(e,t,r,o){n(e,t,r),s(e,t,r,o)},once:function(e,t,r,o){n(e,t,r),u(e,t,r,o)},off:function(e,t,r,o){n(e,t,r),l(e,t,r,o)},trigger:function(e,n){t(e,n),m(e,n,[].slice.call(arguments,2))}};return p}();EventHandlerInfo.prototype=function(){function e(){return this._priority}function t(e,t){this.callback.call(this.context,e,t)}return{getPriority:e,trigger:t}}(),EventHandlerInfo.prototype.constructor=EventHandlerInfo,EventHandlerChain.prototype=function(){function e(e){for(var t=this._handlers.length,n=e.getPriority(),r=t-1;r>=0;r--)if(n<=this._handlers[r].getPriority())return r+1;return Math.max(0,r)}function t(){return this._associateObject}function n(){return this._eventName}function r(e){for(var t=this._handlers.slice(0),n=0;n<t.length;n++){var r=t[n];if(r.trigger(this._associateObject,e),e.cancelled)return}EventBus.trigger(this._associateObject,this._eventName,e)}function o(t,n,r){var o=ObjectFactory.createInstance(EventHandlerInfo,t,n,r);this._handlers.splice(e.call(this,o),0,o)}function i(e,t){var n=this,r=this._handlers.filter(function(n){return n.callback===e&&n.context===t});r.forEach(function(e){n._handlers.splice(n._handlers.indexOf(e),1)})}return{getAssociateObject:t,getEventName:n,trigger:r,on:o,off:i}}(),EventHandlerChain.prototype.constructor=EventHandlerChain;var NumberExtensions={};NumberExtensions.round=function(e,t){return isNaN(e)||null===e||0===e?e:isNaN(t)||null===t||0===t?Math.round(e):Math.round(e*Math.pow(10,t))/Math.pow(10,t)},NumberExtensions.toUSLocaleString=function(e,t,n){if(isNaN(e)||null===e)return"0.00";t=t>=0?t:2,n=n>0?Math.max(t,n):t,e=NumberExtensions.round(e,n);var r=e.toString(),o=r.split("."),i=o[1];return(!i||i.length<t)&&(r=e.toFixed(t),o=r.split(".")),o[0]=o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r=o.join(".")},NumberExtensions.calcDecimalPlaces=function(e){var t=e.toString(),n=t.split(".")[1];return n?n.length:0},NumberExtensions.calcMaxDecimalPlaces=function(e){if(!(e instanceof Array&&e.length))return 0;var t=[];return e.forEach(function(e){t.push(NumberExtensions.calcDecimalPlaces(e))}),Math.max.apply(null,t)};var StringExtensions=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n+0]);for(var r=e,o=0;o<t.length;o++)if(null!==t[o]&&void 0!==t[o]){var i=new RegExp("\\{"+o+"\\}","gm");r=r.replace(i,t[o])}return r},e}(),DateExtensions=function(){function e(){}function t(e){for(var t=e.getFullYear(),n=new Date(t,2,8);6!==n.getDay();)n.setDate(n.getDate()+1);return n}function n(e){for(var t=e.getFullYear(),n=new Date(t,9,31);0!==n.getDay();)n.setDate(n.getDate()+1);return n}function r(e){return p(new Date(e,0,1))}function o(t){var n=new Date(t,0,14);return e.nextDayOfWeek(n,1)}function i(t){var n=new Date(t,1,14);return e.nextDayOfWeek(n,1)}function a(e){var t=c(e);return t.setDate(t.getDate()-2),t}function c(e){var t,n,r,o,i;t=e%19,n=Math.floor(e/4),r=Math.floor(n/25)+1,o=Math.floor(3*r/4),i=(19*t-Math.floor((8*r+5)/25)+o+15)%30,i+=Math.floor((29578-t-32*i)/Math.pow(2,10)),i-=(e%7+n-o+i+2)%7,o=Math.floor(i/Math.pow(2,5));var a=i-31*o,c=o+2;return new Date(e,c,a)}function s(t){var n=new Date(t,5,1);return e.lastDayOfWeek(n,1)}function u(t){var n=new Date(t,7,31);return e.nextDayOfWeek(n,1)}function l(e){return p(new Date(e,6,4))}function m(t){var n=new Date(t,9,31);return n=e.nextDayOfWeek(n,4),n=e.nextDayOfWeek(n,4),n=e.nextDayOfWeek(n,4),n=e.nextDayOfWeek(n,4)}function f(e){return p(new Date(e,11,25))}function p(e){return 6===e.getDay()?e.setDate(e.getDate()-1):0===e.getDay()&&e.setDate(e.getDate()+1),e}function d(e){return this._minValue.getTime()>e.getTime()||e.getTime()>this._maxValue.getTime()}return this._minValue=new Date(1900,0,1,0,0,0),this._maxValue=new Date(9999,11,31,23,59,59),e.toESTTime=function(e){var r=new Date(e.getTime());return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r>=t(r)&&r<=n(r)?r.setHours(r.getHours()-4):r.setHours(r.getHours()-5),r},e.addWorkdays=function(t,n){if(!t||!n)return t;var r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+n);if(d(r))throw new ArgumentOutOfRangeException("date","DateTime can not be less than 1900/1/1 or greater than 9999/12/31");for(var o=n>0?1:-1,i=new Date(t.getTime()),a=n*o;a>0;)i.setDate(i.getDate()+o),e.isWeekendOrHoliday(i)||a--;return i},e.addMonths=function(e,t){if(e&&t){var n=new Date(e.getFullYear(),e.getMonth()+t);if(d(n))throw new ArgumentOutOfRangeException("date","DateTime can not be less than 1900/1/1 or greater than 9999/12/31");var r=new Date(e.getTime()),o=n.getMonth();for(r.setMonth(e.getMonth()+t);r.getMonth()>o;)r.setDate(r.getDate()-1);return r}return e},e.lastMarketDay=function(t){var n=new Date(t.getTime());return(6===n.getDay()||0===n.getDay()||e.isHoliday(n)||n.getHours()<9||9===n.getHours()&&n.getMinutes()<30)&&(n=e.addWorkdays(n,-1)),new Date(n.getFullYear(),n.getMonth(),n.getDate())},e.nextMarketDay=function(t){var n=new Date(t.getTime());return(6===n.getDay()||0===n.getDay()||e.isHoliday(n)||n.getHours()>16)&&(n=e.addWorkdays(n,1)),new Date(n.getFullYear(),n.getMonth(),n.getDate())},e.isWeekendOrHoliday=function(t){return e.isWeekend(t)||e.isHoliday(t)},e.isWeekend=function(e){return 6===e.getDay()||0===e.getDay()},e.isHoliday=function(t){var n=t.getFullYear();return e.areSameDay(t,r(n))||e.areSameDay(t,r(n+1))||e.areSameDay(t,o(n))||e.areSameDay(t,i(n))||e.areSameDay(t,a(n))||e.areSameDay(t,s(n))||e.areSameDay(t,u(n))||e.areSameDay(t,l(n))||e.areSameDay(t,m(n))||e.areSameDay(t,f(n))},e.nextDayOfWeek=function(e,t,n){if(t>6||t<0)throw new ArgumentOutOfRangeException("day","Expected day of week is 0 to 6");var r=new Date(e.getTime());if(n)for(;r.getDay()!==t;)r.setDate(r.getDate()+1);else do r.setDate(r.getDate()+1);while(r.getDay()!==t);return r},e.lastDayOfWeek=function(e,t,n){if(t>6||t<0)throw new ArgumentOutOfRangeException("day","Expected day of week is 0 to 6");var r=new Date(e.getTime());if(n)for(;r.getDay()!==t;)r.setDate(r.getDate()-1);else do r.setDate(r.getDate()-1);while(r.getDay()!==t);return r},e.firstWorkdayOfMonth=function(t){var n=new Date(t.getTime());n.setDate(1);var r=e.addWorkdays(n,-1);return e.addWorkdays(r,1)},e.firstWorkdayOfYear=function(t){var n=new Date(t.getTime());return n.setDate(1),n.setMonth(0),e.firstWorkdayOfMonth(n)},e.laterThanDay=function(e,t){if(!e||!t)return!1;var n=new Date(e.getTime()).setHours(0,0,0,0),r=new Date(t.getTime()).setHours(0,0,0,0);return n>r},e.areSameDay=function(e,t){return!(!e||!t)&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())},e}(),DateService=function(){function e(){}return e.today=function(){var e=new Date(Date.now());return new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.todayEST=function(){var e=new Date(Date.now()),t=moment(e).tz("America/New_York");return new Date(t.year(),t.month(),t.date(),0,0,0)},e.now=function(){return new Date(Date.now())},e.nowEST=function(){var e=new Date(Date.now()),t=moment(e).tz("America/New_York");return new Date(t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond())},e.toESTTime=function(e){var t=moment(e).tz("America/New_York");return new Date(t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond())},e}(),MarketInfo_MarketInfoMap=[{name:"AU",timezone:"Australia/Melbourne",description:"Australia",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,16,0)},{name:"AT",timezone:"Europe/Vienna",description:"Austria",openTime:new Date(1900,0,1,8,55),closeTime:new Date(1900,0,1,17,30)},{name:"BE",timezone:"Europe/Brussels",description:"Belgium",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,30)},{name:"CA",timezone:"America/Toronto",description:"Canada",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,16,0)},{name:"FR",timezone:"Europe/Paris",description:"France",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,30)},{name:"DE",timezone:"Europe/Berlin",description:"Germany",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,30)},{name:"DK",timezone:"Europe/Copenhagen",description:"Denmark",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,55)},{name:"FI",timezone:"Europe/Helsinki",description:"Finland",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,18,25)},{name:"GR",timezone:"Europe/Athens",description:"Greece",openTime:new Date(1900,0,1,10,30),closeTime:new Date(1900,0,1,17,0)},{name:"HK",timezone:"Asia/Hong_Kong",description:"Hong Kong",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,0)},{name:"IE",timezone:"Eire",description:"Ireland",openTime:new Date(1900,0,1,8,0),closeTime:new Date(1900,0,1,16,28)},{name:"IT",timezone:"Europe/Rome",description:"Italy",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,25)},{name:"JP",timezone:"Asia/Tokyo",description:"Japan",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,15,0)},{name:"MX",timezone:"America/Mexico_City",description:"Mexico",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,16,0)},{name:"NL",timezone:"Europe/Amsterdam",description:"Netherlands",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,30)},{name:"NZ",timezone:"Pacific/Auckland",description:"New Zealand",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,16,45)},{name:"NO",timezone:"Europe/Oslo",description:"Norway",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,20)},{name:"PL",timezone:"Europe/Warsaw",description:"Poland",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,50)},{name:"PT",timezone:"Europe/Lisbon",description:"Portugal",openTime:new Date(1900,0,1,8,0),closeTime:new Date(1900,0,1,16,30)},{name:"SG",timezone:"Asia/Singapore",description:"Singapore",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,0)},{name:"ZA",timezone:"Africa/Johannesburg",description:"South Africa",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,50)},{name:"ES",timezone:"Europe/Madrid",description:"Spain",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,30)},{name:"SE",timezone:"Europe/Stockholm",description:"Sweden",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,25)},{name:"CH",timezone:"Europe/Zurich",description:"Switzerland",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,20)},{name:"GB",timezone:"Europe/London",description:"United Kingdom",openTime:new Date(1900,0,1,8,0),closeTime:new Date(1900,0,1,16,30)},{name:"AR",timezone:"America/Argentina/Buenos_Aires",description:"Argentina",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,16,0)},{name:"BR",timezone:"America/Sao_Paulo",description:"Brazil",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,17,30)},{name:"BS",timezone:"Asia/Kolkata",description:"Bombay",openTime:new Date(1900,0,1,9,15),closeTime:new Date(1900,0,1,15,30)},{name:"CL",timezone:"America/Santiago",description:"Chile",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,17,0)},{name:"CN",timezone:"Asia/Shanghai",description:"China",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,15,0)},{name:"CZ",timezone:"Europe/Prague",description:"Czech Republic",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,16,20)},{name:"EG",timezone:"Africa/Cairo",description:"Egypt",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,14,30)},{name:"HU",timezone:"Europe/Budapest",description:"Hungary",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,17,0)},{name:"ID",timezone:"Asia/Jakarta",description:"Indonesia",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,16,0)},{name:"IL",timezone:"Asia/Jerusalem",description:"Israel",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,17,15)},{name:"KR",timezone:"Asia/Seoul",description:"Korea",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,15,0)},{name:"MA",timezone:"Africa/Casablanca",description:"Morocco",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,15,30)},{name:"MY",timezone:"Asia/Kuala_Lumpur",description:"Malaysia",openTime:new Date(1900,0,1,8,45),closeTime:new Date(1900,0,1,17,15)},{name:"PE",timezone:"America/Lima",description:"Peru",openTime:new Date(1900,0,1,8,30),closeTime:new Date(1900,0,1,16,0)},{name:"PH",timezone:"Asia/Manila",description:"Philippines",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,15,30)},{name:"RU",timezone:"Europe/Moscow",description:"Russia",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,19,0)},{name:"TH",timezone:"Asia/Bangkok",description:"Thailand",openTime:new Date(1900,0,1,10,0),closeTime:new Date(1900,0,1,17,0)},{name:"TR",timezone:"Europe/Istanbul",description:"Turkey",openTime:new Date(1900,0,1,9,30),closeTime:new Date(1900,0,1,17,30)},{name:"TW",timezone:"Asia/Taipei",description:"Taiwan",openTime:new Date(1900,0,1,9,0),closeTime:new Date(1900,0,1,13,30)}];MarketInfo.getMarketInfo=function(e){if(!e||""===e)throw new UndefinedOrNullException("name");for(var t=ObjectFactory.createInstance(MarketInfo),n=0;n<MarketInfo_MarketInfoMap.length;n++){var r=MarketInfo_MarketInfoMap[n];if(e===r.name)return t.name=e,t.timezoneName=r.timezone,t.timezone=moment.tz(r.timezone),t.description=r.description,t.marketOpenNative=r.openTime,t.marketCloseNative=r.closeTime,t}return t},MarketInfo.prototype=function(){function e(e,t){t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())}function t(t,n){var r=new Date(t.getTime());return n?e(this.extendedMarketOpenNative,r):e(this.marketOpenNative,r),r}function n(t,n){var r=new Date(t.getTime());return n?e(this.extendedMarketCloseNative,r):e(this.marketCloseNative,r),r}function r(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0))}function o(e,t,n){return e._d=r(n),moment.updateOffset(e,!0),t._offset=e._offset,t._d=e._d,moment.updateOffset(t),n=t._d,new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),0)}function i(e,t){return o(e,l,t)}function a(e,n){return e=o(l,this.timezone,e),i(this.timezone,t.call(this,e,n))}function c(e,t){return e=o(l,this.timezone,e),i(this.timezone,n.call(this,e,t))}function s(e){return e=o(l,this.timezone,e),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),i(this.timezone,e)}var u="America/New_York",l=moment.tz(u);return{marketOpen:a,marketClose:c,dayStart:s}}(),MarketInfo.prototype.constructor=MarketInfo;var SymbolExtensions={};SymbolExtensions.isMutualFund=function(e){return!(!e||5!==e.length||e.length-1!==e.toLowerCase().lastIndexOf("x")||-1!==e.indexOf("."))},SymbolExtensions.isValidSymbol=function(e){var t=/^[A-z0-9\.\-\/_=:]*$/;return!(!e||!t.test(e)||e.indexOf("[")!==-1||e.indexOf("]")!==-1||e.indexOf("`")!==-1||e.indexOf("\\")!==-1||e.indexOf("^")!==-1)},SymbolExtensions.isCurrency=function(e){var t=/^[A-z]+=$/;return e&&t.test(e)},SymbolExtensions.isDomestics=function(e){var t=/^[\-.\/0-9A-z]+?$/;return e&&t.test(e)},SymbolExtensions.isGeneral=function(e){var t=/^[\-.:\/0-9A-z]+?$/;return e&&t.test(e)},SymbolExtensions.isInternational=function(e){var t=/^[\-.]?[0-9A-z_]+:[0-9A-z]+$/;return e&&t.test(e)},SymbolExtensions.isOption=function(e){var t=/^\-.+$/;return e&&t.test(e)},SymbolExtensions.isMoneyMarket=function(e){return!(!e||5!==e.length||e.length-2!==e.toLowerCase().lastIndexOf("xx")||-1!==e.indexOf("."))};var GUID={};GUID.generate=function(){var e="",t="0000"+Date.now().toString(16),n=t.length;t=t.substr(n-12,12);for(var r=1;r<=20;r++){var o=Math.floor(16*Math.random()).toString(16);e+=o,8!==r&&12!==r&&16!==r||(e+="-")}return e+"-"+t},window.loggerType="Consolelogger",Exception.prototype=function(){function e(){return this._message}function t(){return this._code}function n(){return this._innerException}var r=Object.create(Error.prototype);return r.getMessage=e,r.getErrorCode=t,r.getInnerException=n,r}(),Exception.prototype.constructor=Exception,ArgumentException.prototype=new Exception,ArgumentException.prototype.constructor=ArgumentException,ArgumentException.prototype.getParamName=function(){return this._paramName},UndefinedOrNullException.prototype=new ArgumentException,UndefinedOrNullException.prototype.constructor=UndefinedOrNullException,ArgumentOutOfRangeException.prototype=new ArgumentException,ArgumentOutOfRangeException.prototype.constructor=ArgumentOutOfRangeException,InvalidOperationException.prototype=new Exception,InvalidOperationException.prototype.constructor=InvalidOperationException,NotSupportedException.prototype=new Exception,NotSupportedException.prototype.constructor=NotSupportedException,NetworkException.prototype=new Exception,NetworkException.prototype.constructor=NetworkException,ApplicationException.prototype=new Exception,ApplicationException.prototype.constructor=ApplicationException,ObjectFactory.createInstance=function(e){if(void 0===e||null===e)return Object.create(Object.prototype);if("function"!=typeof e)throw new ArgumentException("type","type should be a function.");var t=Object.create(e.prototype);return arguments.length>1?e.apply(t,Array.prototype.slice.apply(arguments,[1])):e.apply(t),t};var Fmr_Pwi_Commons_LogLevel={Trace:1,Debug:2,Info:4,Warning:8,Error:16,Fatal:32};ConsoleLogger.prototype.debug=function(e){this.log(e)},ConsoleLogger.prototype.error=function(e){this.log(e)},ConsoleLogger.prototype.fatal=function(e){this.log(e)},ConsoleLogger.prototype.info=function(e){this.log(e)},ConsoleLogger.prototype.trace=function(e){this.log(e)},ConsoleLogger.prototype.warning=function(e){this.log(e)},ConsoleLogger.prototype.log=function(e){console.log(e)},Dummy.prototype.debug=function(){},Dummy.prototype.error=function(){},Dummy.prototype.fatal=function(){},Dummy.prototype.info=function(){},Dummy.prototype.trace=function(){},
Dummy.prototype.warning=function(){},LogFactory.prototype.getLogger=function(){switch(loggerType){case"Consolelogger":return this._consoleLogger||(this._consoleLogger=new ConsoleLogger),this._consoleLogger;default:return new Dummy}};var Logger=function(){function e(){}var t,n=function(){t=new LogFactory;var e=t.getLogger();return n=function(){return e},t.getLogger()};return e.debug=function(e){n().debug(e)},e.error=function(e){n().error(e)},e.fatal=function(e){n().fatal(e)},e.info=function(e){n().info(e)},e.trace=function(e){n().trace(e)},e.warning=function(e){n().warning(e)},e}();DataSeriesItem.prototype.getXValue=function(){return this.date},DataSeriesItem.prototype.getYValue=function(){return this.value},DataSeries.prototype=function(){function e(e,t){for(var n=0;n<e.length;n++)if(e[n].getXValue().getTime()===t.getTime())return n}function t(){return this._name}function n(e){this._name=e}function r(t){var n=ObjectFactory.createInstance(DataSeries),r=this.length,o=t.length;if(r<=0||o<=0)return n;var i=this[0].getXValue(),a=t[0].getXValue(),c=this[r-1].getXValue(),s=t[o-1].getXValue();if(i>s||a>c)return n;var u=0,l=0;i>a?l=e(t,i):i<a&&(u=e(this,a));var m=r-1;c>s&&(m=e(this,s));for(var f=u,p=l;f<=m;f++,p++){var d=this[f].getYValue()+t[p].getYValue();n.push(ObjectFactory.createInstance(DataSeriesItem,this[f].getXValue(),NumberExtensions.round(d,10)))}return n}function o(t){var n=ObjectFactory.createInstance(DataSeries),r=this.length,o=t.length;if(r<=0||o<=0)return n;var i=this[0].getXValue(),a=t[0].getXValue(),c=this[r-1].getXValue(),s=t[o-1].getXValue();if(i>s||a>c)return n;var u=0,l=0;i>a?l=e(t,i):i<a&&(u=e(this,a));var m=r-1;c>s&&(m=e(this,s));for(var f=u,p=l;f<=m;f++,p++){var d=this[f].getYValue()-t[p].getYValue();n.push(ObjectFactory.createInstance(DataSeriesItem,this[f].getXValue(),NumberExtensions.round(d,10)))}return n}function i(e){var t,n,r=ObjectFactory.createInstance(DataSeries);for(t=0;t<this.length;t++)n=this[t].getYValue()*e,r.push(ObjectFactory.createInstance(DataSeriesItem,this[t].getXValue(),NumberExtensions.round(n,10)));return r}function a(e){var t,n,r=ObjectFactory.createInstance(DataSeries);for(t=0;t<this.length;t++)n=this[t].getYValue()/e,r.push(ObjectFactory.createInstance(DataSeriesItem,this[t].getXValue(),NumberExtensions.round(n,10)));return r}function c(t){var n=ObjectFactory.createInstance(DataSeries),r=this.length,o=t.length;if(r<=0||o<=0)return n;var i=this[0].getXValue(),a=t[0].getXValue(),c=this[r-1].getXValue(),s=t[o-1].getXValue();if(i>s||a>c)return n;var u=0,l=0;i>a?l=e(t,i):i<a&&(u=e(this,a));var m=r-1;c>s&&(m=e(this,s));for(var f=u,p=l;f<=m;f++,p++){var d=this[f].getYValue(),h=t[p].getYValue(),_=0===h?0:d/h;n.push(ObjectFactory.createInstance(DataSeriesItem,this[f].getXValue(),NumberExtensions.round(_,10)))}return n}function s(t){var n=ObjectFactory.createInstance(DataSeries),r=this.length,o=t.length;if(r<=0||o<=0)return n;var i=this[0].getXValue(),a=t[0].getXValue(),c=this[r-1].getXValue(),s=t[o-1].getXValue();if(i>s||a>c)return n;var u=0,l=0;i>a?l=e(t,i):i<a&&(u=e(this,a));var m=r-1;c>s&&(m=e(this,s));for(var f=u,p=l;f<=m;f++,p++){var d=this[f].getYValue(),h=t[p].getYValue(),_=d*h;n.push(ObjectFactory.createInstance(DataSeriesItem,this[f].getXValue(),NumberExtensions.round(_,10)))}return n}function u(e,t){var n=this.length;if(!(n<=0||e<0||e>=n||t<1||e<t-1)){for(var r,o=this[e],i=1;i<t;i++)r=this[e-i],r.getYValue()<o.getYValue()&&(o=r);return o}}function l(e,t){var n=this.length;if(!(n<=0||e<0||e>=n||t<1||e<t-1)){for(var r,o=this[e],i=1;i<t;i++)r=this[e-i],r.getYValue()>o.getYValue()&&(o=r);return o}}function m(e){var t=ObjectFactory.createInstance(DataSeries);if(!this.length||!e.length)return t;for(var n=e[0].getXValue(),r=e[e.length-1].getXValue(),o=0,i=0;o<e.length&&i<this.length;){var a=this[i],c=e[o].getXValue(),s=a.getXValue();if(c<s){var u=this[i-1];u&&u.getXValue()>=n&&s<=r&&t.push(ObjectFactory.createInstance(DataSeriesItem,c,u.getYValue())),o++}else c>s?i++:(t.push(a),o++,i++)}return t}function f(e,t){var n,r=ObjectFactory.createInstance(DataSeries,this.getName());if(t&&this.length>0){var o=this[0].getXValue();for(n=0;n<e;n++){o=t(o);var i=e-n-1;i<this.length&&r.unshift(ObjectFactory.createInstance(DataSeriesItem,o,this[i].getYValue()))}}for(n=0;n<this.length-e;n++)r.push(ObjectFactory.createInstance(DataSeriesItem,this[n].getXValue(),this[n+e].getYValue()));return r}function p(e,t){var n,r=ObjectFactory.createInstance(DataSeries,this.getName()),o=0;for(n=e;n<this.length;n++)r.push(ObjectFactory.createInstance(DataSeriesItem,this[n].getXValue(),this[n-e].getYValue())),o++;if(t&&this.length>o){var i=this[this.length-1].getXValue();for(n=this.length;n<e;n++)i=t(i);for(n=o;n<this.length;n++)i=t(i),r.push(ObjectFactory.createInstance(DataSeriesItem,i,this[n].getYValue()))}return r}var d=Object.create(Array.prototype);return d.getName=t,d.setName=n,d.add=r,d.subtract=o,d.multiply=i,d.divide=a,d.divideSeries=c,d.multiplySeries=s,d.getLowestItem=u,d.getHighestItem=l,d.synchronize=m,d.shiftLeft=f,d.shiftRight=p,d}(),DataSeries.prototype.constructor=DataSeries,Bars.prototype=function(){function e(e,t){for(var n=ObjectFactory.createInstance(DataSeries,t),r=e.length,o=0;o<r;o++){var i=e[o];n.push(ObjectFactory.createInstance(DataSeriesItem,i.timestamp,i[t]))}return n}function t(e){var t=[];return e.forEach(function(e){t.push(e.timestamp)}),t}function n(){return this._name}function r(){return e(this,"open")}function o(){return e(this,"close")}function i(){return e(this,"high")}function a(){return e(this,"low")}function c(){return e(this,"volume")}function s(){return t(this,"volume")}var u=Object.create(Array.prototype);return u.getName=n,u.getOpenSeries=r,u.getCloseSeries=o,u.getHighSeries=i,u.getLowSeries=a,u.getVolumeSeries=c,u.getTimestamps=s,u}(),Bars.prototype.constructor=Bars,Range.equals=function(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(!(e.min>t.min||e.min<t.min)&&!(e.max>t.max||e.max<t.max))},Range.merge=function(e,t){if(e||t){if(!e)return new Range(t.min,t.max);if(!t)return new Range(e.min,e.max);var n=e.min<t.min?e.min:t.min,r=e.max>t.max?e.max:t.max;return new Range(n,r)}};var Fmr_Pwi_Commons_DataSourceState={Normal:0,Updating:1,OutOfDate:2};DataSource.prototype=function(){function e(){return this._id}function t(){}function n(e){this._name=e}function r(){return this._name}function o(){return this._state}function i(e){this._state=e}return{getId:e,getName:r,setName:n,getState:o,setState:i,destroy:t}}(),DataSource.prototype.constructor=DataSource,DataSeriesDataSource.prototype=function(){function e(){return this._dataseries}function t(){DataSource.prototype.destroy.call(this)}var n=Object.create(DataSource.prototype);return n.getDataSeries=e,n.destroy=t,n}(),DataSeriesDataSource.prototype.constructor=DataSeriesDataSource,ProxyDataSeriesDataSource.prototype=function(){function e(){EventBus.trigger(this,"DataSource:datachanged")}function t(){return this._eventRegistered||(this._eventRegistered=!0,EventBus.on(this._dataSource,"DataSource:datachanged",e,this)),this._getter.call(this._dataSource)}function n(){EventBus.off(this._dataSource,"DataSource:datachanged",e,this),DataSeriesDataSource.prototype.destroy.call(this)}var r=Object.create(DataSeriesDataSource.prototype);return r.getDataSeries=t,r.destroy=n,r}(),ProxyDataSeriesDataSource.prototype.constructor=ProxyDataSeriesDataSource,SingleValueDataSource.prototype=function(){function e(){return this._value}function t(e){this._value!==e&&(this._value=e,EventBus.trigger(this,"DataSource:datachanged"))}var n=Object.create(DataSource.prototype);return n.getValue=e,n.setValue=t,n}(),SingleValueDataSource.prototype.constructor=SingleValueDataSource,DataSourceCenter.prototype=function(){function e(){return this._dataSources}function t(e){if(e){var t=this._dataSources.indexOf(e);t<=-1&&this._dataSources.push(e)}}function n(e){if(e){var t=this._dataSources.indexOf(e);t>=0&&this._dataSources.splice(t,1)}}function r(e){for(var t=0;t<this._dataSources.length;t++)if(this._dataSources[t].getId()===e)return this._dataSources[t]}return{getDataSources:e,registerDataSource:t,unregisterDataSource:n,getDataSource:r}}(),DataSourceCenter.prototype.constructor=DataSourceCenter;var Fmr_Pwi_Commons_CorporateActionType={Split:0,Dividend:1,Earning:2,All:3,validate:function(e){if(e<Fmr_Pwi_Commons_CorporateActionType.Split||e>Fmr_Pwi_Commons_CorporateActionType.All)throw new ArgumentOutOfRangeException("actionType")}},DigitalVolatilityUtil=function(){function e(e,t){var n=t.textContent;n=Number(n.replace(",","")),n=NumberExtensions.round(n,2),n=NumberExtensions.toUSLocaleString(n,2,2),t.textContent=n}function t(e,t){return e.isSame(t)?t.add(-7,"days").toDate():t.toDate()}function n(e){var t=new moment(new Date);return t.date(1),e.date()<4&&t.month(e.month()-1),t.toDate()}return{roundElemValue:e,getDateofthisWeekMondayOrLastWeekMonday:t,getFirstOfMonthForMonthWithData:n}}();Split.prototype=function(){var e=Object.create(CorporateAction.prototype);return e}(),Split.prototype.constructor=Split,Dividend.prototype=function(){var e=Object.create(CorporateAction.prototype);return e}(),Dividend.prototype.constructor=Dividend,Earning.prototype=function(){var e=Object.create(CorporateAction.prototype);return e}(),Earning.prototype.constructor=Earning;var Fmr_Pwi_Commons_SecurityType={ETF:0,Index:1,MutualFund:2,Options:3,MoneyMarket:4,International:5,Stock:6},Fmr_Pwi_Commons_SecurityDataErrorCode={NoData:1,NoError:0,InvalidData:-1,InvalidSymbol:-1e3,GenericError:-9999,EntitledInternational:-121,UnsupportedTimeframe:-1001};SecurityData.prototype=function(){function e(){return this._symbol}function t(){return this._type}function n(){return this._description}function r(){return this._scale}function o(e){if(!e)throw new UndefinedOrNullException("marketInfo");this._marketInfo=e}function i(){return this._marketInfo}function a(){return this._corporateActions}function c(){return this._sentiments}function s(){return this._asOfDate?this._asOfDate:this.bars.length>0?this.bars[this.bars.length-1].timestamp:void 0}function u(e){this._asOfDate=e}return{getSymbol:e,getDescription:n,getScale:r,getType:t,getMarketInfo:i,setMarketInfo:o,getCorporateActions:a,getSentiments:c,getAsOfDate:s,setAsOfDate:u}}(),SecurityData.prototype.constructor=SecurityData;var SecurityDataExtensions=function(){function e(){}return e.convert=function(e,t){var n=new SecurityData(e.getSymbol(),e.getDescription(),t,e.getType());n.setMarketInfo(e.getMarketInfo());for(var r,o=e.bars.length,i=new Date(1900,1,1),a=0;a<o;a++){var c=e.bars[a],s=BarScaleExtensions.adjustToScale(t,c.timestamp,e.getMarketInfo());r&&s.getTime()===i.getTime()?(r.high=Math.max(c.high,r.high),r.low=Math.min(c.low,r.low),r.volume+=c.volume,r.close=c.close):(i=s,r=new Bar(c.open,c.high,c.low,c.close,c.volume,c.timestamp),n.bars.push(r))}return n},e.getPreviousDailyBar=function(e){for(var t,n,r,o,i,a,c,s,u,l=e.bars.length,m=0,f=l-1;f>=0;f--)if(t=e.bars[f],n=e.getMarketInfo().dayStart(t.timestamp).getTime(),u){if(!c&&n<u&&(c=n,s=e.getMarketInfo().dayStart(t.timestamp)),c&&c===n)o||(i=t.high,a=t.low,o=t.close),i<t.high&&(i=t.high),a>t.low&&(a=t.low),m+=t.volume,r=t.open;else if(c&&c<n)break}else u=n;return r?new Bar(r,i,a,o,m,s):null},e}();Request.prototype=function(){function e(){return this.host+this.template}return{generateUrl:e}}(),Request.prototype.constructor=Request;var Fmr_Pwi_Commons_HttpMethod={Get:"get",Post:"post"},Fmr_Pwi_Commons_BarScaleType={Undefined:0,Minute:1,Daily:2,Weekly:3,Monthly:4,Quarterly:5,Yearly:6};BarScale.prototype=function(){function e(){return this._scale===Fmr_Pwi_Commons_BarScaleType.Minute}function t(){return this._scale}function n(){return this._interval}function r(e){return!(!e||this._scale!==e.getScale())&&(!this.isIntraday()||this._interval===e.getInterval())}return{isIntraday:e,getScale:t,getInterval:n,equals:r}}(),BarScale.prototype.constructor=BarScale;var BarScaleExtensionsStart=function(){function e(){}function t(e){return 1!==e&&5!==e&&10!==e&&15!==e&&30!==e&&60!==e}function n(e,n,o){var i=t(e)?o:r(o,e),a=n.getTime(),c=60*e*1e3,s=a-i.getTime(),u=s/c;return new Date(i.getTime()+parseInt(u)*c)}function r(e,t){var n=new Date(e),r=e.getMinutes();return r=parseInt(r/t)*t,n.setMinutes(r),n}function o(e,t,r){var o=r.dayStart(e),i=r.marketOpen(e),a=r.marketClose(e),c=new Date(o);c.setDate(c.getDate()+1),c.setMilliseconds(c.getMilliseconds()-1);for(var s=[o,i,a,c],u=1;u<s.length;u++)if(e<s[u])return n(t,e,s[u-1])}function i(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function a(e){var t=DateExtensions.nextMarketDay(DateExtensions.lastDayOfWeek(e,1,!0));return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function c(e){var t=new Date(e.getFullYear(),e.getMonth(),1);return DateExtensions.nextMarketDay(t)}function s(e){var t=moment(e).quarter(),n=new Date(e.getFullYear(),3*(t-1),1);return DateExtensions.nextMarketDay(n)}function u(e){var t=new Date(e.getFullYear(),0,1);return DateExtensions.nextMarketDay(t)}function l(e,t,n){var r,i;if(DateExtensions.isWeekendOrHoliday(e))i=DateExtensions.addWorkdays(e,1),r=n.marketOpen(i),60===t&&(r=o(r,t,n));else{var a=n.marketClose(e,!1);e<a?(r=o(e,t,n),r.setMinutes(r.getMinutes()+t,0),r>a&&(r=a)):e>=a&&(i=DateExtensions.addWorkdays(e,1),r=n.marketOpen(i),60===t&&(r=o(r,t,n)))}return r}function m(e){var t=DateExtensions.addWorkdays(e,1);return t.setHours(0,0,0),t}function f(e){var t=DateExtensions.nextDayOfWeek(e,1,!1);return DateExtensions.nextMarketDay(t)}function p(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1);return DateExtensions.nextMarketDay(t)}function d(e){var t=moment(e).quarter(),n=new Date(e.getFullYear(),3*t,1);return DateExtensions.nextMarketDay(n)}function h(e){var t=new Date(e.getFullYear()+1,0,1);return DateExtensions.nextMarketDay(t)}function _(e,t,n){var r,i;if(DateExtensions.isWeekendOrHoliday(e))i=DateExtensions.addWorkdays(e,-1),r=n.marketClose(i);else{var a=n.marketOpen(e,!1);e<=a?(i=DateExtensions.addWorkdays(e,-1),r=n.marketClose(i)):(r=o(e,t,n),r.setMinutes(r.getMinutes()-t,0),60!==t&&r<a&&(r=a))}return r}function y(e){var t=DateExtensions.addWorkdays(e,-1);return t.setHours(0,0,0,0),t}function g(e){var t=DateExtensions.lastDayOfWeek(e,0,!1);return t=DateExtensions.lastDayOfWeek(t,0,!1),DateExtensions.nextMarketDay(t)}function v(e){var t=new Date(e.getFullYear(),e.getMonth()-1,1),n=DateExtensions.nextMarketDay(t);return n}function w(e){var t=moment(e).quarter(),n=new Date(e.getFullYear(),3*(t-2),1),r=DateExtensions.nextMarketDay(n);return r}function S(e){var t=new Date(e.getFullYear()-1,0,1),n=DateExtensions.nextMarketDay(t);return n}function D(e,t,n,r){var i=0,a=DateExtensions.isWeekendOrHoliday(e)?r.marketOpen(DateExtensions.addWorkdays(e,1)):e,c=r.marketOpen(a),s=r.marketClose(a);a=o(a,n,r);var u=Math.ceil((s.getTime()-c.getTime())/1e3/60/n)+1;c=r.marketOpen(a);for(var l=r.marketClose(t);a<=t;){var m=r.marketClose(a);i+=DateExtensions.areSameDay(l,m)?parseInt((t.getTime()-a.getTime())/1e3/60/n)+1:a>m?1:a>c||a<c?Math.ceil((m.getTime()-a.getTime())/1e3/60/n)+1:u,a=r.marketOpen(DateExtensions.addWorkdays(a,1)),60===n&&(a=o(a,n,r)),c=a}return i}function F(e,t){var n=0,r=i(e);r=DateExtensions.isWeekendOrHoliday(r)?DateExtensions.addWorkdays(r,1):r;for(var o=i(t);r<=o;)n+=1,r=m(r);return n}function C(e,t){for(var n=0,r=a(e),o=a(t);r<=o;)n+=1,r=f(r);return n}function T(e,t){for(var n=0,r=c(e),o=c(t);r<=o;)n+=1,r=p(r);return n}function P(e,t){for(var n=0,r=s(e),o=s(t);r<=o;)n+=1,r=d(r);return n}function M(e,t){for(var n=0,r=u(e),o=u(t);r<=o;)n+=1,r=h(r);return n}function E(e,t,n){if(!e)throw new UndefinedOrNullException("scale");if(!t)throw new UndefinedOrNullException("date1");if(!n)throw new UndefinedOrNullException("date2");if(t>n)throw new ApplicationException("date1 can't bigger than date2")}function x(e,t,n,r){if(!e)throw new UndefinedOrNullException("scale");if(!t)throw new UndefinedOrNullException("baseTimestamp");for(var o=e.getScale(),i=e.getInterval(),a=0;a<b.length;a++)if(b[a].scaleType===o){var c="reverse"===r?b[a].previousTimestamp:b[a].nextTimestamp;return c(t,i,n)}return t}var k=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,callback:o},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,callback:i},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,callback:a},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,callback:c},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,callback:s},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,callback:u}],b=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,nextTimestamp:l,previousTimestamp:_},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,nextTimestamp:m,previousTimestamp:y},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,nextTimestamp:f,previousTimestamp:g},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,nextTimestamp:p,previousTimestamp:v},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,nextTimestamp:d,previousTimestamp:w},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,nextTimestamp:h,previousTimestamp:S}],O=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,callback:D},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,callback:F},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,callback:C},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,callback:T},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,callback:P},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,callback:M}];return e.adjustToScale=function(e,t,n){n=n||new MarketInfo;for(var r=e.getScale(),o=0;o<k.length;o++)if(k[o].scaleType===r)return k[o].callback(t,e.getInterval(),n);return t},e.adjustToScaleStart=function(e,t,n){return this.adjustToScale(e,t,n)},e.adjustToScaleEnd=function(e,t,n){var r=e.getScale();if(r<Fmr_Pwi_Commons_BarScaleType.Minute||r>Fmr_Pwi_Commons_BarScaleType.Yearly)return t;var o;o=e.getScale()===Fmr_Pwi_Commons_BarScaleType.Minute?new Date(t.getTime()+60*e.getInterval()*1e3):this.nextTimestamp(e,t,n);var i=this.adjustToScale(e,o,n);return new Date(i.getTime()-1)},e.nextTimestamp=function(e,t,n){return n=n||new MarketInfo,x(e,t,n)},e.previousTimestamp=function(e,t,n){return n=n||new MarketInfo,x(e,t,n,"reverse")},e.calculateCount=function(e,t,n,r){E(e,t,n),r=r||new MarketInfo;for(var o=e.getScale(),i=0;i<O.length;i++)if(O[i].scaleType===o)return O[i].callback(t,n,e.getInterval(),r);return 0},e}(),BarScaleExtensionsEnd=function(){function e(){}function t(e,t,n,r){var o,i,a=0,c=r.marketOpen(e),s=r.marketClose(t);for(o=e.getTime()<=c.getTime()?c:e,i=t.getTime()<=s.getTime()?t:s,o=DateExtensions.isWeekendOrHoliday(o)?DateExtensions.addWorkdays(o,1):o;o<i;){var u=r.marketClose(o);a+=u<=i?parseInt((u.getTime()-o.getTime())/1e3/60/n):parseInt((i.getTime()-o.getTime())/1e3/60/n),o=r.marketOpen(DateExtensions.addWorkdays(o,1))}return a}function n(e,t){var n=0,r=l(e);r=DateExtensions.isWeekendOrHoliday(r)?DateExtensions.addWorkdays(r,1):r;for(var o=l(t);r<=o;)n+=1,r=y(r);return n}function r(e,t){for(var n=0,r=m(e),o=m(t);r<=o;)n+=1,r=g(r);return n}function o(e,t){for(var n=0,r=f(e),o=f(t);r<=o;)n+=1,r=v(r);return n}function i(e,t){for(var n=0,r=p(e),o=p(t);r<=o;)n+=1,r=w(r);return n}function a(e,t){for(var n=0,r=d(e),o=d(t);r<=o;)n+=1,r=S(r);return n}function c(e,t,n,r){var o,i=t.getTime(),a=60*e*1e3,c=i-n.getTime(),s=c/a;return o=parseInt(s)===s?t:new Date(n.getTime()+parseInt(s+1)*a),o>r?r:o}function s(e,t,n){if(e<t||e>n)throw new ArgumentOutOfRangeException("the date should at between 4:00 AM and 8:00 PM")}function u(e,t,n){var r=n.marketOpen(e,!0),o=n.marketOpen(e),i=n.marketClose(e),a=n.marketClose(e,!0);return s(e,r,a),e<o?c(t,e,r,o):e<=i?c(t,e,o,i):c(t,e,i,a)}function l(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function m(e){var t=DateExtensions.lastMarketDay(DateExtensions.nextDayOfWeek(e,0,!0));return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function f(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1);return t=DateExtensions.lastMarketDay(t),new Date(t.getFullYear(),t.getMonth(),t.getDate())}function p(e){var t=moment(e).quarter(),n=new Date(e.getFullYear(),3*t,1);return n=DateExtensions.lastMarketDay(n),new Date(n.getFullYear(),n.getMonth(),n.getDate())}function d(e){var t=new Date(e.getFullYear()+1,0,1);return t=DateExtensions.lastMarketDay(t),new Date(t.getFullYear(),t.getMonth(),t.getDate())}function h(e,t,n){if(!e)throw new ArgumentException("scale","The parameter scale should have value");if(!t)throw new ArgumentException("date1","The parameter date1 should have value");if(!n)throw new ArgumentException("date2","The parameter date2 should have value");if(t>n)throw new ApplicationException("date1 can't bigger than date2")}function _(e,t,n){var r,o,i;if(DateExtensions.isWeekendOrHoliday(e))i=DateExtensions.addWorkdays(e,1),o=n.marketOpen(i),o.setMinutes(o.getMinutes()+t,0),r=o;else{var a=n.marketOpen(e,!1),c=n.marketClose(e,!1);if(e>a&&e<c){var s=e.getHours(),u=e.getMinutes(),l=60*s+u-(60*a.getHours()+a.getMinutes()),m=l%t;r=new Date(e.getTime()),0===m?r.setMinutes(r.getMinutes()+t,0):r.setMinutes(r.getMinutes()-m+2*t,0),r>c&&(r=DateExtensions.addWorkdays(r,1),o=n.marketOpen(r),o.setMinutes(o.getMinutes()+t,0),r=o)}else e<=a?(r=a,r.setMinutes(a.getMinutes()+t,0)):e>=c&&(i=DateExtensions.addWorkdays(e,1),o=n.marketOpen(i),o.setMinutes(o.getMinutes()+t,0),r=o)}return r}function y(e){var t=DateExtensions.addWorkdays(e,1);return t.setHours(0,0,0),t}function g(e){var t;if(DateExtensions.isWeekend(e))t=DateExtensions.nextDayOfWeek(e,6,!1);else{var n=DateExtensions.nextDayOfWeek(e,6,!0);t=DateExtensions.nextDayOfWeek(n,6,!1)}var r=DateExtensions.addWorkdays(t,-1);return r.setHours(0,0,0),r}function v(e){var t=new Date(e.getFullYear(),e.getMonth()+2,1),n=DateExtensions.addWorkdays(t,-1);return n.setHours(0,0,0),n}function w(e){var t=moment(e).quarter(),n=4===t?e.getFullYear()+1:e.getFullYear(),r=4===t?1:t+1,o=new Date(n,3*r,1),i=DateExtensions.addWorkdays(o,-1);return i.setHours(0,0,0),i}function S(e){var t=new Date(e.getFullYear()+2,0,1),n=DateExtensions.addWorkdays(t,-1);return n.setHours(0,0,0),n}var D=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,callback:u},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,callback:l},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,callback:m},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,callback:f},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,callback:p},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,callback:d}],F=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,callback:t},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,callback:n},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,callback:r},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,callback:o},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,callback:i},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,callback:a}],C=[{scaleType:Fmr_Pwi_Commons_BarScaleType.Minute,callback:_},{scaleType:Fmr_Pwi_Commons_BarScaleType.Daily,callback:y},{scaleType:Fmr_Pwi_Commons_BarScaleType.Weekly,callback:g},{scaleType:Fmr_Pwi_Commons_BarScaleType.Monthly,callback:v},{scaleType:Fmr_Pwi_Commons_BarScaleType.Quarterly,callback:w},{scaleType:Fmr_Pwi_Commons_BarScaleType.Yearly,callback:S}];return e.calculateCount=function(e,t,n,r){h(e,t,n),r=r||new MarketInfo;for(var o=e.getScale(),i=0;i<F.length;i++)if(F[i].scaleType===o)return F[i].callback(t,n,e.getInterval(),r);return 0},e.adjustToScale=function(e,t,n){n=n||new MarketInfo;for(var r=e.getScale(),o=0;o<D.length;o++)if(D[o].scaleType===r)return D[o].callback(t,e.getInterval(),n);return t},e.nextTimestamp=function(e,t,n){if(!e)throw new UndefinedOrNullException("scale");if(!t)throw new UndefinedOrNullException("baseTimestamp");n=n||new MarketInfo;for(var r=e.getScale(),o=0;o<C.length;o++)if(C[o].scaleType===r)return C[o].callback(t,e.getInterval(),n);return t},e}(),BarScaleExtensions=BarScaleExtensionsStart,Fmr_Pwi_Commons_FrequencyScale={OneMinute:0,FiveMinutes:1,TenMinutes:2,FifteenMinutes:3,ThirtyMinutes:4,Hourly:5,Daily:6,Weekly:7,Monthly:8,Quarterly:9,Yearly:10,isIntraday:function(e){return!(e>=Fmr_Pwi_Commons_FrequencyScale.Daily&&e<=Fmr_Pwi_Commons_FrequencyScale.Yearly)}},Fmr_Pwi_Commons_TimePeriod={OneDay:0,TwoDays:1,FiveDays:2,TenDays:3,OneMonth:4,ThreeMonths:5,SixMonths:6,YearToDate:7,OneYear:8,TwoYears:9,ThreeYears:10,FiveYears:11,TenYears:12,Max:13,Custom:14};Fmr_Pwi_Commons_TimePeriod.verifyTimeframe=function(e){if(void 0===e||null===e)throw new UndefinedOrNullException("timeframe");if(e>Fmr_Pwi_Commons_TimePeriod.Custom||e<Fmr_Pwi_Commons_TimePeriod.OneDay)throw new ArgumentOutOfRangeException("timeframe")},Fmr_Pwi_Commons_TimePeriod.isTimeframeValid=function(e){return!(void 0===e||null===e||e>Fmr_Pwi_Commons_TimePeriod.Custom||e<Fmr_Pwi_Commons_TimePeriod.OneDay)},TimeScaleDataSource.prototype=function(){function e(){return this._timeframe}function t(){return this._frequency}function n(e,t){e===this._timeframe&&t===this._frequency||(this._timeframe=e,this._frequency=t,EventBus.trigger(this,"DataSource:datachanged"))}var r=Object.create(DataSource.prototype);return r.getTimeframe=e,r.getFrequency=t,r.setScale=n,r}(),TimeScaleDataSource.prototype.constructor=TimeScaleDataSource,HistoricalDataRequest.prototype=function(){function e(e){return e.isIntraday()?e.getInterval():commonsModule.$.grep(a,function(t){return t.scale===e.getScale()})[0].value}function t(e){return e.isIntraday()?new Date(2004,0,1):new Date(1970,0,1)}function n(e,n){var r=t(e);return r.getTime()>n.getTime()?r:n}function r(e){for(var t="",n=0;n<this.additionalParameters.length;n++){var r=this.additionalParameters[n];t+=StringExtensions.format("&{0}={1}",r.name,r.value)}return e+t}function o(){var t=this.scale.isIntraday()?"YYYY/MM/DD-HH:mm:ss":"YYYY/MM/DD",o=this.symbols,i=StringExtensions.format(this.template,this.host,this.productId,o.join(","),moment(n(this.scale,this.startDate)).format(t),moment(this.endDate).format(t),e(this.scale),this.extendedHours?"Y":"N",this.delayedData?"D":"R",this.corporateActions?"Y":"N",this.uuid);return r.call(this,i)}var i=Object.create(Request.prototype),a=[{scale:Fmr_Pwi_Commons_BarScaleType.Daily,value:"Daily"},{scale:Fmr_Pwi_Commons_BarScaleType.Weekly,value:"Weekly"},{scale:Fmr_Pwi_Commons_BarScaleType.Monthly,value:"Monthly"},{scale:Fmr_Pwi_Commons_BarScaleType.Quarterly,value:"Quarterly"},{scale:Fmr_Pwi_Commons_BarScaleType.Yearly,value:"Yearly"}];return i.generateUrl=o,i}(),HistoricalDataRequest.prototype.constructor=HistoricalDataRequest,HistoricalDataResponse.prototype=function(){function e(){return this._securityDataList}function t(){return this._securityDataWithErrorList}return{getSecurityDataList:e,getSecurityDataWithErrorList:t}}(),HistoricalDataResponse.prototype.constructor=HistoricalDataResponse,HistoricalDataService.prototype=function(){function e(e,t){e&&e(t)}function t(e,t){for(var n=new HistoricalDataResponse,r=0;r<e.Symbol.length;r++){var o=e.Symbol[r],i=y(o,t);i instanceof SecurityData?n.getSecurityDataList().push(i):i instanceof SecurityDataWithError&&n.getSecurityDataWithErrorList().push(i)}return n}function n(e,t){var n=t.scale,r=e.replace(/\-/g," "),o=new Date(r);return n.isIntraday()||o.setHours(0,0,0,0),o}function r(e,t,r){for(var o=e.BarList.BarRecord,i=0;i<o.length;i++){var a=o[i],c=parseFloat(void 0===a.op?a.cl:a.op),s=parseFloat(void 0===a.hi?a.cl:a.hi),u=parseFloat(void 0===a.lo?a.cl:a.lo),l=parseFloat(a.cl),m=parseFloat(void 0===a.v?0:a.v),f=n(a.lt,r),p=new Bar(c,s,u,l,m,f);t.push(p)}}function o(e,t,r){for(var o=e.BarList.BarRecord,i=0;i<o.length;i++){var a=o[i],c=parseFloat(a.op),s=parseFloat(a.hi),u=parseFloat(a.lo),l=parseFloat(a.cl),m=parseFloat(a.v),f=n(a.lt,r),p=new Bar(c,s,u,l,m,f);t.push(p)}}function i(e){return e&&"E"===e.ScCode&&["ETF","ETN","ETV"].indexOf(e.ExchangeTradedType)>=0}function a(e){return i(e)?Fmr_Pwi_Commons_SecurityType.ETF:e&&e.ScCode?v[e.ScCode.toUpperCase()]:void 0}function c(e){var t=e.getType();if(t===Fmr_Pwi_Commons_SecurityType.International){var n=e.getSymbol().split(":")[1];e.setMarketInfo(MarketInfo.getMarketInfo(n.toUpperCase()))}else if(t===Fmr_Pwi_Commons_SecurityType.Index)for(var r=0;r<w.length;r++){var o=w[r];if(e.getSymbol().toUpperCase()===o.name)return void e.setMarketInfo(MarketInfo.getMarketInfo(o.code))}}function s(e,t,n){var i=t.bars;e&&e.BarList&&e.BarList.BarRecord&&("M"===e.ScCode?r(e,i,n):o(e,i,n))}function u(e){var t=[];return e&&e.CorporateActions&&e.CorporateActions.CorporateActionsList&&(t=e.CorporateActions.CorporateActionsList),t}function l(e){var t=e||";;";return-1<S.indexOf(t)?Fmr_Pwi_Commons_CorporateActionType.Split:-1<D.indexOf(t)?Fmr_Pwi_Commons_CorporateActionType.Dividend:-1<F.indexOf(t)?Fmr_Pwi_Commons_CorporateActionType.Earning:void 0}function m(e,t){var n=l(e.actionType);if(void 0===n)return null;var r=e.rate.valueOf(),o=DateService.toESTTime(1e3*e.exDate.valueOf()),i=DateService.toESTTime(1e3*e.recDate.valueOf()),a=DateService.toESTTime(1e3*e.payDate.valueOf()),c=DateService.toESTTime(1e3*e.appDate.valueOf()),s=null;switch(n){case Fmr_Pwi_Commons_CorporateActionType.Split:s=ObjectFactory.createInstance(Split,n,r,o,i,a,c);break;case Fmr_Pwi_Commons_CorporateActionType.Dividend:s=ObjectFactory.createInstance(Dividend,n,r,o,i,a,c),s.securityData=t;break;case Fmr_Pwi_Commons_CorporateActionType.Earning:s=ObjectFactory.createInstance(Earning,n,r,o,i,a,c)}return s}function f(e,t){var n=[];return e.forEach(function(e){var r=m(e,t);r&&n.unshift(r)}),n}function p(e){var t,n,r,o,i,a,c,s=e.filter(function(e){return e instanceof Earning}),u={};s.forEach(function(e){e.isDown=!1,t=moment(e.exDate),n=Number(e.rate),r=t.year(),o=r-1,i=t.month(),a=t.quarter(),c=o+"-"+a,u.hasOwnProperty(c)&&u[c]>n&&(e.isDown=!0),c=r+"-"+a,u[c]=n})}function d(e,t){var n=u(e);n=f(n,t),p(n);var r=t.getCorporateActions();n.forEach(function(e){r.push(e)})}function h(e,t){if(e.Sentiments){var n=SocialSentimentDataParser.parse(e.Sentiments,t.getScale().isIntraday());if(n)for(var r=t.getSentiments(),o=0;o<n.length;o++)r.push(n[o])}}function _(e,t){if(/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.test(e.TradeDate)&&/^([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,3})$/.test(e.TradeTime)){var n=e.TradeDate.split("/"),r=e.TradeTime.split(":"),o=parseInt(n[0],10),i=parseInt(n[1],10),a=parseInt(n[2],10),c=parseInt(r[0],10),s=parseInt(r[1],10),u=parseInt(r[2],10),l=parseInt(r[3],10);t.setAsOfDate(new Date(a,o-1,i,c,s,u,l))}}function y(e,t){var n,r=a(e);return"undefined"!=typeof e.Status?new SecurityDataWithError(e.Identifier,new ApplicationException(e.Status.ErrorText,e.Status,parseInt(e.Status.ErrorCode))):(n=ObjectFactory.createInstance(SecurityData,e.Identifier,e.Description,t.scale,r),_(e,n),s(e,n,t),d(e,n),c(n),h(e,n),n)}function g(n,r,o){return n.startDate.getTime()>n.endDate.getTime()?void e(o,new ApplicationException("start date should be less than end date")):!n.symbols||n.symbols.length<=0?void e(o,new ApplicationException("request should have symbols information")):void commonsModule.$.ajax({url:n.generateUrl(),type:n.method,dataType:"jsonp",timeout:6e4,success:function(i){if(!i||!i.Symbol||i.Symbol.length<=0)e(o,new ApplicationException("Fail to retrieve data"));else if(r){var a=t(i,n);r(a)}},error:function(t,n){e(o,new NetworkException(n))}})}var v={E:Fmr_Pwi_Commons_SecurityType.Stock,I:Fmr_Pwi_Commons_SecurityType.Index,M:Fmr_Pwi_Commons_SecurityType.MutualFund,O:Fmr_Pwi_Commons_SecurityType.Options,R:Fmr_Pwi_Commons_SecurityType.MoneyMarket,H:Fmr_Pwi_Commons_SecurityType.International},w=[{name:".AORD",code:"AU"},{name:".ATDOW",code:"AT"},{name:".BEDOW",code:"BE"},{name:".BRDOW",code:"BR"},{name:".BSESN",code:"BS"},{name:".BVSP",code:"BR"},{name:".CADOW",code:"CA"},{name:".CHDOW",code:"CH"},{name:".CLDOW",code:"CL"},{name:".DAX",code:"DE"},{name:".DEDOW",code:"DE"},{name:".DJAU",code:"AU"},{name:".DJSH",code:"CN"},{name:".DKDOW",code:"DK"},{name:".DWAR",code:"AR"},{name:".DWCZ",code:"CZ"},{name:".DWEG",code:"EG"},{name:".DWHU",code:"HU"},{name:".DWIL",code:"IL"},{name:".DWIS",code:"IE"},{name:".DWMA",code:"MA"},{name:".DWPE",code:"PE"},{name:".DWPL",code:"PL"},{name:".DWRU",code:"RU"},{name:".DWTR",code:"TR"},{name:".ESDOW",code:"ES"},{name:".FCHI",
code:"FR"},{name:".FIDOW",code:"FI"},{name:".FRDOW",code:"FR"},{name:".FTMIB",code:"IT"},{name:".FTSE",code:"GB"},{name:".GRDOW",code:"GR"},{name:".HKDOW",code:"HK"},{name:".HSI",code:"HK"},{name:".IDDOW",code:"ID"},{name:".IEDOW",code:"IE"},{name:".ITDOW",code:"IT"},{name:".KRDOW",code:"KR"},{name:".KS11",code:"KR"},{name:".MXDOW",code:"MX"},{name:".MYDOW",code:"MY"},{name:".N225",code:"JP"},{name:".NLDOW",code:"NL"},{name:".NODOW",code:"NO"},{name:".NZDOW",code:"NZ"},{name:".PHDOW",code:"PH"},{name:".PTDOW",code:"PT"},{name:".SEDOW",code:"SE"},{name:".SGDOW",code:"SG"},{name:".SSEC",code:"CN"},{name:".THDOW",code:"TH"},{name:".TWDOW",code:"TW"},{name:".ZADOW",code:"ZA"}],S="SP;SP.RP",D="CD.AR;CD.CG;CD.CN;CD.CN15;CD.FC;CD.NU;CD.OP;CD.PS;CD.R;CD.US15;CD.X;CD.LC;CD.LF;CD.CN10;CD.PS.CN15;CD.PS.CN10;CD.PR;CD.SL.PR;CD.SL.IT",F="ER;";return{requestData:g}}(),HistoricalDataService.prototype.constructor=HistoricalDataService;var Fmr_Pwi_Commons_PlacementMode={Bottom:0,Mouse:1},Fmr_Pwi_Commons_HorizontalAlignment={Left:0,Right:1};commonsModule.directive("onParentResized",["$parse","$window",function(e,t){return{restrict:"A",link:function(n,r,o){var i,a=e(o.onParentResized),c=commonsModule.$(r).parent(),s=function(){n.$apply(function(){a(n,{width:c.width(),height:c.height()})})};t.ResizeSensor&&(i=ObjectFactory.createInstance(t.ResizeSensor,c[0]||[],s)),n.$on("$destroy",function(){i&&i.detach()})}}}]),commonsModule.directive("fmrModalWindow",["$document","$window","getTemplatesBasePath",function(e,t,n){function r(t){var n=t.parents(".fmr-pwi-common-overlay-anchor-modalwindow:first");return 1===n.length?n:commonsModule.$(e[0].body)}return{restrict:"E",transclude:!0,scope:{name:"@",display:"=show",close:"&onClose"},templateUrl:function(e){return n(e)+"modalwindow.html"},controller:["$scope",function(t){t.$watch("display",function(n){n?(t.oldMarginTop=t.anchor.css("margin-top"),t.oldScrollTop=t.anchor.is("body")?commonsModule.$(e).scrollTop():t.anchor.scrollTop(),t.anchor.css("margin-top",-t.oldScrollTop),t.anchor.addClass("fmr-pwi-common-modalwindow-no-scroll")):(t.anchor.removeClass("fmr-pwi-common-modalwindow-no-scroll"),t.anchor.css("margin-top",t.oldMarginTop),t.anchor.is("body")?commonsModule.$(e).scrollTop(t.oldScrollTop):t.anchor.scrollTop(t.oldScrollTop))})}],link:function(e,t){var n=commonsModule.$(t),o=n.find(".fmr-pwi-common-overlay-modalwindow"),i=n.find(".fmr-pwi-common-modalwindow"),a=r(n);a.append(o),a.append(i),e.anchor=a,a.is("body")&&o.css("position","fixed"),e.$watch(function(){return i.css("max-height")},function(t){if(t&&t.length>0&&"px"===t.substring(t.length-2)){var n=parseFloat(t.substring(0,t.length-2));n-=i.outerHeight()-i.height(),e.maxContentHeight=n+"px"}else e.maxContentHeight=void 0})}}}]);var Fmr_Pwi_Commons_MessageBoxIcon={None:0,Confirmation:1,Error:2,Warning:3};commonsModule.directive("fmrMessageBox",["$document","getTemplatesBasePath",function(e,t){function n(t){var n=t.parents(".fmr-pwi-common-overlay-anchor-messagebox:first");return 1===n.length?n:commonsModule.$(e[0].body)}function r(e){var t=e.callback,n=e.context;t&&t.call(n)}function o(e,t){e&&t&&t.append(e)}return{restrict:"E",scope:{onInitialized:"&"},templateUrl:function(e){return t(e)+"messagebox.html"},controller:["$scope",function(t){t.isOpened=!1,t.$watch("isOpened",function(n){n?(t.oldMarginTop=t.anchor.css("margin-top"),t.oldScrollTop=t.anchor.is("body")?commonsModule.$(e).scrollTop():t.anchor.scrollTop(),t.anchor.css("margin-top",-t.oldScrollTop),t.anchor.addClass("fmr-pwi-common-messagebox-no-scroll")):(t.anchor.removeClass("fmr-pwi-common-messagebox-no-scroll"),t.anchor.css("margin-top",t.oldMarginTop),t.anchor.is("body")?commonsModule.$(e).scrollTop(t.oldScrollTop):t.anchor.scrollTop(t.oldScrollTop))}),t.show=function(e,n,r,i,a){t.title=e,t.message=n,t.buttons=r,t._closeButton=void 0,t.icon=void 0===a?Fmr_Pwi_Commons_MessageBoxIcon.None:a,t.showClose=!1,i&&(t._closeButton=i,t.showClose=!0),o(t.overlay,t.anchor),t.isOpened=!0},t.click=function(e){t.isOpened=!1,e&&r(e),o(t.overlay,t.originalParent)},t.close=function(){t.isOpened=!1,r(t._closeButton),o(t.overlay,t.originalParent)}}],link:function(e,t){var r=commonsModule.$(t);e.overlay=r.find(".fmr-pwi-common-overlay-messagebox"),e.originalParent=e.overlay.parent(),e.anchor=n(r),e.anchor.is("body")&&e.overlay.css("position","fixed"),e.onInitialized({messageBox:e})}}}]),commonsModule.directive("windowResize",["$window","$parse","$document",function(e,t,n){return{restrict:"A",compile:function(r,o){var i=t(o.windowResize);return function(t){angular.element(e).bind("resize",function(){var e=n[0].documentElement,r={h:e.clientHeight,w:e.clientWidth};t.$apply(function(){i(t,{size:r})})})}}}}]),commonsModule.directive("combobox",["$compile","$document","getTemplatesBasePath",function(e,t,n){function r(t,n,r){var o=n.find("combobox-selected-item-template")[0];if(o){var i=t.find(".selected-item")[0];if(i){var a=angular.element(i);a.empty().append(commonsModule.$(o).html()),e(a.contents())(r)}}}return{restrict:"E",transclude:!0,controller:["$scope",function(e){t.on("click",function(){e.isDropdownOpen&&!e.clickWithinComboBox&&(e.isDropdownOpen=!1,e.$digest()),e.clickWithinComboBox=!1}),e.$watch("selectedItem",function(t,n){t!==n&&e.onSelect&&e.onSelect({selectedItem:e.selectedItem})}),e.onClick=function(){e.clickWithinComboBox=!0,e.disabled||(e.isDropdownOpen=!e.isDropdownOpen)},e.onClickItem=function(t,n){t.isDisabled?n&&n.stopPropagation():e.selectedItem=t.context},this.addItem=function(t){t.onClick=e.onClickItem}}],scope:{name:"@",selectedItem:"=",onSelect:"&",disabled:"=?"},templateUrl:function(e){return n(e)+"combobox.html"},link:function(e,t){var n=commonsModule.$(t),o=n.find(".template-container:first");if(o.length>0){r(n,o,e);var i=n.find(".dropdown:first"),a=o.find("combobox-items:first");i.length>0&&a.length>0&&i.append(a)}}}}]),commonsModule.directive("comboboxItem",["getTemplatesBasePath",function(e){return{restrict:"E",transclude:!0,require:"^combobox",scope:{context:"=",isDisabled:"="},templateUrl:function(t){return e(t)+"comboboxitem.html"},link:function(e,t,n,r){r.addItem(e)}}}]),commonsModule.directive("toDirective",["$compile",function(e){function t(e,t){var n={},r=commonsModule.$("<"+t+" />",n);return commonsModule.$.each(e[0].attributes,function(e,t){r.attr(t.nodeName,t.value)}),r.append(commonsModule.$(e).contents()),commonsModule.$(e).replaceWith(r),r}return{restrict:"A",link:function(n,r,o){var i=n.$eval(o.toDirective),a=o.directiveStyle,c=!1;"E"===a?(r=t(r,i),c=!0):"A"===a&&(r.attr(i,""),c=!0),r.removeAttr("to-directive"),r.removeAttr("directive-style"),c&&e(r)(n)}}}]),commonsModule.directive("tooltipService",["$window","$document","getTemplatesBasePath",function(e,t,n){function r(e){return void 0===e.placement||null===e.placement?Fmr_Pwi_Commons_PlacementMode.Bottom:e.placement}function o(e){return void 0===e.horizontalAlignment||null===e.horizontalAlignment?Fmr_Pwi_Commons_HorizontalAlignment.Left:e.horizontalAlignment}function i(e,n){var r=commonsModule.$(t),i=o(e),a=e.horizontalOffset?e.horizontalOffset:0,c=n.width(),s=e.mousePosition.pageX+a>r.width()-c,u=e.mousePosition.pageX-a-c<0;return i===Fmr_Pwi_Commons_HorizontalAlignment.Left&&s&&!u?i=Fmr_Pwi_Commons_HorizontalAlignment.Right:i===Fmr_Pwi_Commons_HorizontalAlignment.Right&&u&&!s&&(i=Fmr_Pwi_Commons_HorizontalAlignment.Left),i}function a(e,t){var n=i(e,t),r=e.horizontalOffset?e.horizontalOffset:0,o=t.width();n===Fmr_Pwi_Commons_HorizontalAlignment.Left?e.left=e.mousePosition.pageX+r:n===Fmr_Pwi_Commons_HorizontalAlignment.Right&&(e.left=e.mousePosition.pageX-r-o)}function c(e,n){var o=r(e);o===Fmr_Pwi_Commons_PlacementMode.Mouse&&n.css("position","fixed"),a(e,n);var i=commonsModule.$(t),c=i.height()-n.height();e.top=e.mousePosition.pageY+(e.verticalOffset?e.verticalOffset:0),e.top=Math.min(c,e.top),e.top=Math.max(0,e.top)}return{restrict:"E",transclude:!0,controller:["$scope",function(t){t.window=e,t.mousePosition={pageX:0,pageY:0},t.top=-1e3,t.left=-1e3}],scope:{isOpen:"=",isDisabled:"=?",placement:"=?",verticalOffset:"=?",horizontalOffset:"=?",horizontalAlignment:"=?"},templateUrl:function(e){return n(e)+"tooltipservice.html"},link:function(e,n){var o=commonsModule.$(n).find(".fmr-pwi-common-tooltipservice");e.$watch("isOpen",function(t){t&&c(e,o)}),e.$watch(function(){return{h:o.height(),w:o.width()}},function(){e.isOpen&&c(e,o)},!0),commonsModule.$(t).on("mousemove",function(t){e.mousePosition.pageX=t.pageX,e.mousePosition.pageY=t.pageY,e.isOpen&&r(e)===Fmr_Pwi_Commons_PlacementMode.Mouse&&function(){c(e,o),e.$apply()}()})}}}]);var Fmr_Pwi_Commons_DropdownMenuHorizontalAlign={Left:0,Right:1};commonsModule.directive("dropdownMenu",["$document","getTemplatesBasePath",function(e,t){function n(e){return void 0===e.closeOnOutsideClick||e.closeOnOutsideClick}return{restrict:"E",templateUrl:function(e){return t(e)+"dropdownmenu.html"},transclude:!0,scope:{closeOnOutsideClick:"=?",onClick:"&",placementTarget:"=?",show:"=?",horizontalAlign:"=?"},controller:["$scope",function(t){t.getHorizontalAlign=function(){return void 0===t.horizontalAlign?Fmr_Pwi_Commons_DropdownMenuHorizontalAlign.Left:t.horizontalAlign},e.on("click",function(){!t.clickedInsideMenuElement&&n(t)&&(t.show=!1,t.$apply()),t.clickedInsideMenuElement=!1,t.cancelClickTitle=!1}),t.$watch("show",function(e,n){e!==n&&t.placementTargetElement&&t.itemContainerElement&&(e?t.placementTargetElement.appendChild(t.itemContainerElement):t.placementTargetElement.removeChild(t.itemContainerElement))}),t.clickTitle=function(){t.cancelClickTitle||(t.clickedInsideMenuElement=!0,t.show=!t.show,t.placementTarget&&(t.placementTargetElement||(t.placementTargetElement=commonsModule.$(t.placementTarget)[0],t.itemContainerElement=t.element.find(".fmr-pwi-common-dropdownmenu-item-container").first()[0])))},t.clickItem=function(e){t.clickedInsideMenuElement=!0,t.cancelClickTitle=!0,e.isDisabled||(e.keepOpenOnClick||(t.show=!1),t.onClick&&t.onClick({context:e.context}))},this.addItem=function(e){e.onClick=t.clickItem}}],link:function(e,t){t=commonsModule.$(t),e.element=t,t.find(".fmr-pwi-common-dropdownmenu-title").first().children().appendTo(t.find(".fmr-pwi-common-dropdownmenu-title-container").first())}}}]),commonsModule.directive("dropdownMenuItem",["getTemplatesBasePath",function(e){return{restrict:"E",templateUrl:function(t){return e(t)+"dropdownmenuitem.html"},transclude:!0,require:"^dropdownMenu",scope:{context:"=?",isDisabled:"=?",keepOpenOnClick:"=?"},link:function(e,t,n,r){r.addItem(e)}}}]),commonsModule.directive("ribbonMenu",["$document","getTemplatesBasePath",function(e,t){return{restrict:"E",templateUrl:function(e){return t(e)+"ribbonmenu.html"},transclude:!0,scope:{closeOnClick:"=?",closeOnOutsideClick:"=?",onClick:"&",placementTarget:"=?",show:"=?"},controller:["$scope",function(t){t.document=e,e.on("click",function(){!t.clickedInsideMenuElement&&t.closeOnOutsideClick&&(t.show=!1,t.$apply()),t.clickedInsideMenuElement=!1,t.cancelClickTitle=!1}),e.on("scroll",function(){t.show&&t.$digest()}),t.clickTitle=function(){if(!t.cancelClickTitle&&(t.clickedInsideMenuElement=!0,t.show=!t.show,!t.movedItemsContainer)){t.movedItemsContainer=!0;var e=commonsModule.$(t.placementTarget),n=t.element.find(".fmr-pwi-common-ribbonmenu-item-container").first();n.appendTo(e)}},t.clickItem=function(e){t.clickedInsideMenuElement=!0,t.cancelClickTitle=!0,e.isDisabled||(t.closeOnClick&&(t.show=!1),t.onClick&&t.onClick({context:e.context}))},this.addItem=function(e){e.onClick=t.clickItem}}],link:function(e,t){if(t=commonsModule.$(t),e.element=t,t.find(".fmr-pwi-common-ribbonmenu-title").first().children().appendTo(t.find(".fmr-pwi-common-ribbonmenu-title-container").first()),!e.placementTarget){var n=t.closest(".fmr-pwi-common-ribbonmenu-item-container");n.length?e.placementTarget=n:e.placementTarget=t.find(".fmr-pwi-common-ribbonmenu-title-container").first()}}}}]),commonsModule.directive("ribbonMenuItem",["getTemplatesBasePath",function(e){return{restrict:"E",templateUrl:function(t){return e(t)+"ribbonmenuitem.html"},transclude:!0,require:"^ribbonMenu",scope:{context:"=?",isDisabled:"=?"},link:function(e,t,n,r){r.addItem(e)}}}]),commonsModule.directive("numericFilter",function(){return{restrict:"A",link:function(e,t,n){t.keydown(function(e){function t(e){return e.which>=35&&e.which<=37||39===e.which}function r(e,t){return!(""!==e.numericFilterAllowMinus&&"true"!==e.numericFilterAllowMinus||189!==t.which&&109!==t.which||t.shiftKey)}function o(e,t){return!(""!==e.numericFilterAllowDecimal&&"true"!==e.numericFilterAllowDecimal||190!==t.which&&110!==t.which||t.shiftKey)}commonsModule.$.inArray(e.which,[8,46,9,27,13,108])!==-1||65===e.which&&e.ctrlKey===!0||t(e)||r(n,e)||o(n,e)||(e.shiftKey||e.which<48||e.which>57)&&(e.which<96||e.which>105)&&e.preventDefault()})}}}),commonsModule.directive("numericUpDown",["getTemplatesBasePath",function(e){function t(e){var t=0,n=0;if(document.selection){e.focus();var r=document.selection.createRange(),o=r.text.length;return r.moveStart("character",-e.value.length),t=r.text.length,n=t-o,{start:n,end:t}}if(e.selectionStart||0===e.selectionStart)return n=e.selectionStart,t=e.selectionEnd,{start:n,end:t}}function n(e,t){var n=parseFloat(e);return!(void 0!==t&&null!==t&&n<t)}function r(e,t){var n=parseFloat(e);return!(void 0!==t&&null!==t&&n>t)}function o(e,t,o){return n(e,t)&&r(e,o)}function i(e,t){var n,r;return t.decimals<=0?(r=parseInt(e,10),n=!isNaN(r)&&r.toString()===e.toString()):(r=parseFloat(e),n=!isNaN(r)&&c(e)&&s(e,t.decimals)),n&&t.allowMinus&&(n=u(e)),n}function a(e,t){return""===e||void 0===e?0:(t.prefixSymbol&&e.substring(0,t.prefixSymbol.length)===t.prefixSymbol&&(e=e.substring(t.prefixSymbol.length)),t.suffixSymbol&&e.substring(e.length-t.suffixSymbol.length)===t.suffixSymbol&&(e=e.substring(0,e.length-t.suffixSymbol.length)),parseFloat(e))}function c(e){return/^-?[0-9]+(\.[0-9]*)?$/.test(e)}function s(e,t){var n=e.match(/\.[0-9]+/);return!n||n[0].length<=t+1}function u(e){return/^-?[0-9]+(\.[0-9]*)?$/.test(e)}function l(e,t){var o=!0;if(i(e,t)){var a=parseFloat(e);o=a>0?r(e,t.max):a<0?n(e,t.min):!(t.max<=-1||t.min>=1)}else o=!1;return o}function m(e){var t=e.which,n=String.fromCharCode(t);return n}function f(e,t){var n=e;n&&n.length>0&&(t.prefixSymbol&&n.substring(0,t.prefixSymbol.length)===t.prefixSymbol&&(n=n.substring(t.prefixSymbol.length)),t.suffixSymbol&&n.substring(n.length-t.suffixSymbol.length)===t.suffixSymbol&&(n=n.substring(0,n.length-t.suffixSymbol.length)));var r=parseFloat(n);if(t.decimals>0&&!isNaN(r)&&(n=r.toFixed(t.decimals),t.minDisplayDecimals>0))for(var o=t.decimals;o>t.minDisplayDecimals;){var i=n.length;if("0"!==n.charAt(i-1))break;n=n.substring(0,i-1),o--}return t.prefixSymbol&&!t.hasFocus&&""!==n&&(n=t.prefixSymbol+n),t.suffixSymbol&&!t.hasFocus&&""!==n&&(n+=t.suffixSymbol),n}return{restrict:"E",scope:{value:"=",min:"=",max:"=",onChange:"&",onConfirmed:"&",isInputValid:"=?",validator:"=?",decimals:"=?",allowMinus:"=?",hidearrows:"=?",prefixSymbol:"=?",suffixSymbol:"=?",minDisplayDecimals:"=?",defaultValue:"=?",disabled:"=?",increment:"=?"},templateUrl:function(t){return e(t)+"numericupdown.html"},controller:["$scope",function(e){e.text="",void 0===e.decimals&&(e.decimals=0),void 0===e.allowMinus&&(e.allowMinus=!1),void 0===e.hidearrows&&(e.hidearrows=!1),void 0===e.disabled&&(e.disabled=!1),e.increase=function(t){var o;e.disabled||(o=isNaN(e.text)||""===e.text?void 0===e.min?1:e.min:parseFloat(e.text)+t,n(o,e.min)?r(o,e.max)?e.value=o:e.value=e.max:e.value=e.min)},e.focus=function(){(e.prefixSymbol||e.suffixSymbol)&&(e.hasFocus=!0,""!==e.inputElement.val()&&(e.text=f(e.text,e),window.setTimeout(function(){e.inputElement[0].setSelectionRange(0,0)})))},e.blur=function(){e.hasFocus=!1,0===a(e.text,e)&&void 0!==e.defaultValue?(e.value=e.defaultValue,e.text=f(e.defaultValue.toString(),e)):e.text=f(e.text,e),e.onConfirmed()},e.shouldHideArrows=function(){return e.hidearrows},e.getIncrement=function(){return e.increment?e.increment:1};var t="Invalid input.";e.$watch("text",function(n){var r=i(n,e)&&o(n,e.min,e.max);if(e.isInputValid!==r){var a=e.validator;r?a&&a.removeError(e,t):a&&a.addError(e,t)}if(e.isInputValid=r,r){var c=parseFloat(n);c!==e.value&&(e.value=c)}}),e.$watch("value",function(t,n){var r=t.toString();parseFloat(r)!==parseFloat(e.text)&&(e.text=f(t.toString(),e)),t!==n&&e.onChange&&e.onChange({value:e.value})})}],link:function(e,n){e.inputElement=n.find(":text"),e.disabled&&e.inputElement.prop("readOnly",!0),e.inputElement.keypress(function(n){if(13===n.which)return e.text=f(e.text,e),e.$apply(),void e.onConfirmed();var r=m(n),o=e.inputElement.val().split(""),i=t(this);if(i&&/[0-9\.-]/.test(r)){o.splice(i.start,i.end-i.start,r);var a=o.join("");"-"===a||l(a,e)||n.preventDefault()}}),e.inputElement.on("paste",function(e){e.preventDefault()})}}}]),commonsModule.directive("fmrTextBox",["getTemplatesBasePath",function(e){function t(e){return e.trim().length>0}return{restrict:"E",scope:{value:"=",context:"=",isInputValid:"=?",validator:"=?",onChange:"&"},templateUrl:function(t){return e(t)+"fmrtextbox.html"},controller:["$scope",function(e){e.$watch("value",function(n,r){var o="Invalid input.",i=t(n);e.isInputValid!==i&&(e.isInputValid=i);var a=e.validator;i?a&&a.removeError(e,o):a&&a.addError(e,o),n!==r&&e.onChange&&e.onChange({value:e.value})})}],link:function(e){e.onInputClicked=function(e){var t=commonsModule.$(e.currentTarget);t.focus()}}}}]),commonsModule.directive("dragEvents",["$document",function(e){function t(e,t){var n=t.offset(),r=e.pageX-n.left,o=e.pageY-n.top;return{x:r,y:o}}function n(e){return e.originalEvent.touches[0]}function r(t){e.on("touchmove",null,t,m),e.on("touchend",null,t,f),e.on("touchcancel",null,t,p)}function o(){e.off("touchmove",null,m),e.off("touchend",null,f),e.off("touchcancel",null,p)}function i(t){e.on("mousemove",null,t,m),e.on("mouseup",null,t,f)}function a(){e.off("mousemove",null,m),e.off("mouseup",null,f)}function c(e){return!(!e.data.touch&&1!==e.which)&&!!(!e.data.touch||e.originalEvent&&e.originalEvent.touches&&1===e.originalEvent.touches.length)}function s(e){commonsModule.isTouchDevice||l(e)}function u(e){commonsModule.isTouchDevice=!0,l(e)}function l(e){var n=e.data,r=n.element;if(n.abort&&n.abort(r),n.abort=void 0,c(e)){var o=n.scope,i=t(n.filterEvent(e),r);o._isDragging&&(o._isDragging=!1,n.unregisterEvents(),o.dragEnd&&o.dragEnd({x:i.x,y:i.y})),o._isDragging=!0,n.registerEvents(n),e.data.lastPosition=i,o.dragStart&&o.$apply(o.dragStart({x:i.x,y:i.y,rawEvent:e}))}}function m(e){var n=e.data,r=n.element,o=n.scope;if(c(e)){var i=t(n.filterEvent(e),r);e.data.lastPosition=i,o.dragMove&&o.$apply(o.dragMove({x:i.x,y:i.y,rawEvent:e}))}}function f(e){var t=e.data;if(t.touch||1===e.which){var n=t.scope,r=e.data.lastPosition;n._isDragging=!1,t.unregisterEvents(),n.dragEnd&&n.$apply(n.dragEnd({x:r.x,y:r.y,rawEvent:e}))}}function p(e){var t=e.data,n=t.scope,r=e.data.lastPosition;n._isDragging=!1,t.unregisterEvents(),n.$apply(n.dragEnd&&n.dragEnd({x:r.x,y:r.y,rawEvent:e}))}function d(e){e.off("touchstart",null,u)}function h(e){e.off("mousedown",null,s)}function _(e,t){return{scope:e,element:t,abort:h,registerEvents:r,unregisterEvents:o,filterEvent:n,touch:!0}}function y(e,t){return{scope:e,element:t,abort:d,registerEvents:i,unregisterEvents:a,filterEvent:function(e){return e},touch:!1}}return{restrict:"A",scope:{dragStart:"&",dragMove:"&",dragEnd:"&"},link:function(e,t){var n=commonsModule.$(t);n.on("mousedown",null,y(e,n),s),n.on("touchstart",null,_(e,n),u)}}}]),commonsModule.directive("ngClickEx",["$parse",function(e){return{restrict:"A",link:function(t,n,r){function o(e){commonsModule.isTouchDevice=!0,l.off("mousedown",null,c),e.originalEvent&&e.originalEvent.touches&&1===e.originalEvent.touches.length&&(l.on("touchend",null,null,i),l.on("touchcancel",null,null,a),t._tapping=!0)}function i(e){l.off("touchend",null,i),l.off("touchcancel",null,a),t._tapping&&s(e),t._tapping=!1}function a(){l.off("touchend",null,i),l.off("touchcancel",null,a),t._tapping=!1}function c(){commonsModule.isTouchDevice||(l.off("touchstart",null,o),l.off("mousedown",null,c),l.on("click",null,null,s))}function s(e){var n=function(){u(t,{$event:e})};t.$apply(n)}var u=e(r.ngClickEx,null,!0),l=commonsModule.$(n);l.on("mousedown",null,null,c),l.on("touchstart",null,null,o)}}}]),function(){function e(e){"use strict";return e.charAt(0).toUpperCase()+e.slice(1)}var t={};["touchstart","touchmove","touchend"].forEach(function(n){var r="ng"+e(n);t[r]=["$parse",function(e){return{restrict:"A",compile:function(t,o){var i=e(o[r],null,!0);return function(e,t){t.on(n,function(t){var n=function(){i(e,{$event:t})};e.$apply(n)})}}}}]}),commonsModule.directive(t)}(),commonsModule.directive("split",["getTemplatesBasePath",function(e){return{restrict:"E",scope:{context:"="},templateUrl:function(t){return e(t)+"split.html"}}}]),commonsModule.directive("dividend",["getTemplatesBasePath",function(e){return{restrict:"E",scope:{context:"=",showTitle:"=?"},templateUrl:function(t){return e(t)+"dividend.html"}}}]),commonsModule.directive("earning",["getTemplatesBasePath",function(e){return{restrict:"E",scope:{context:"="},templateUrl:function(t){return e(t)+"earning.html"}}}]),commonsModule.directive("minHeightSetter",function(){function e(e){var t=parseInt(e.css("min-height"));return t||(t=e.height()),t}function t(e){return e.outerHeight(!0)-e.height()}function n(e){return e.children("["+o+"]")}function r(r,o){r.$watch(function(){var r=0;return n(o).each(function(n,o){var i=commonsModule.$(o);r+=e(i)+t(i)}),r},function(e){e?o.css("min-height",e):o.css("min-height","")})}var o="min-height-factor";return{restrict:"A",link:function(e,t){var n=commonsModule.$(t);r(e,n)}}}),function(){function e(e,n){var r="templates/";n&&n.length>0&&(r=n);var o=commonsModule.$(e).closest("["+t+"]").attr(t);o&&o.length>0&&(r=o);var i=r.substr(r.length-1);return"/"!==i&&(r+="/"),r}var t="data-templates-path";commonsModule.value("getTemplatesBasePath",e)}(),commonsModule.directive("setTemplatesPath",["getTemplatesBasePath",function(e){return{restrict:"A",priority:1e4,compile:function(t){commonsModule.$(t).attr("data-templates-path",e(t))}}}]),commonsModule.$.extend(commonsModule.$.expr[":"],{data:commonsModule.$.expr.createPseudo(function(e){return function(t){return!!commonsModule.$.data(t,e)}})}),commonsModule.directive("elementDataHelper",function(){return{restrict:"A",scope:!1,priority:1e3,link:{pre:function(e,t){e.setElementDataValue=function(e,n){commonsModule.$(t).data(e,n)},e.getClosestDataValue=function(e){return commonsModule.$(t).closest(":data("+e+")").data(e)}}}}}),commonsModule.directive("parametersEditor",["getTemplatesBasePath",function(e){function t(e,t){t.splice(0,t.length),e.forEach(function(e){e.isVisible&&t.push(e.clone())})}function n(e,t){for(var n=0;n<e._parameterRules.length;n++)e._parameterRules[n].apply(e.parameters,t)}return{restrict:"E",scope:{windowTitle:"@",originParameters:"=parameters",windowService:"=?",onApply:"&",onCancel:"&"},controller:["$scope",function(e){e.validator=ObjectFactory.createInstance(Validator),e.$watch("validator.hasError()",function(t){e.isValid=!t}),e.parameters=ObjectFactory.createInstance(Parameters),e.$watch("originParameters",function(){t(e.originParameters,e.parameters),e._parameterRules=e.originParameters.getRules(),e._parameterRules&&n(e)},!0);var r=function(){e.skipCancelWhenClose||e.cancel(),e.validator.clearErrors()};e.apply=function(){var t=e.parameters,n=0,r=e.originParameters;r.forEach(function(e){e.isVisible&&e.setValue(t[n++].getValue())}),e.skipCancelWhenClose=!0,e.windowService&&e.windowService.close(),e.skipCancelWhenClose=!1,e.onApply&&e.onApply()},e.cancel=function(){t(e.originParameters,e.parameters),e._parameterRules&&n(e),e.windowService&&e.windowService.close(),e.onCancel&&e.onCancel()},e.onParameterChanged=function(t,r){t.setValue(r),e._parameterRules&&n(e,t)},e.windowService&&EventBus.on(e.windowService,"Window:closed",r)}],templateUrl:function(t,n){var r="parameterseditor.html",o=n.templateName;return o&&o.length>0&&(r=o),e(t)+r},link:function(e,t){var n=commonsModule.$(t),r=n.find(".fmr-pwi-commons-scrollable");if(r.length>0){var o=n.parent(),i=n.find(".modalwindow-title");e.$watch(function(){return{max:o.css("max-height"),title:i.outerHeight(!0)}},function(e){var t=e.max,n=e.title;t&&t.length>0&&"px"===t.substring(t.length-2)?r.css("max-height",parseFloat(t.substring(0,t.length-2))-n+"px"):r.css("max-height","")},!0)}}}}]),commonsModule.directive("fmrSpinner",["getTemplatesBasePath",function(e){return{restrict:"E",templateUrl:function(t){return e(t,"templates/tabchart/")+"fmrspinner.html"},controller:[function(){}]}}]),TimeframeService.prototype=function(){function e(){this._primaryFrequencies=[{key:Fmr_Pwi_Commons_TimePeriod.OneDay,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly]},{key:Fmr_Pwi_Commons_TimePeriod.TwoDays,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly]},{key:Fmr_Pwi_Commons_TimePeriod.FiveDays,value:[Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Daily]},{key:Fmr_Pwi_Commons_TimePeriod.TenDays,value:[Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Daily]},{key:Fmr_Pwi_Commons_TimePeriod.OneMonth,value:[Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Daily]},{key:Fmr_Pwi_Commons_TimePeriod.ThreeMonths,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly]},{key:Fmr_Pwi_Commons_TimePeriod.SixMonths,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly]},{key:Fmr_Pwi_Commons_TimePeriod.YearToDate,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly]},{key:Fmr_Pwi_Commons_TimePeriod.OneYear,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly]},{key:Fmr_Pwi_Commons_TimePeriod.TwoYears,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly]},{key:Fmr_Pwi_Commons_TimePeriod.FiveYears,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.TenYears,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.Max,value:[Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.Custom,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]}]}function t(){this._defaultFrequencies=[{key:Fmr_Pwi_Commons_TimePeriod.OneDay,value:Fmr_Pwi_Commons_FrequencyScale.OneMinute},{key:Fmr_Pwi_Commons_TimePeriod.TwoDays,value:Fmr_Pwi_Commons_FrequencyScale.OneMinute},{key:Fmr_Pwi_Commons_TimePeriod.FiveDays,value:Fmr_Pwi_Commons_FrequencyScale.FiveMinutes},{key:Fmr_Pwi_Commons_TimePeriod.TenDays,value:Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes},{key:Fmr_Pwi_Commons_TimePeriod.OneMonth,value:Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes},{key:Fmr_Pwi_Commons_TimePeriod.ThreeMonths,value:Fmr_Pwi_Commons_FrequencyScale.Daily},{key:Fmr_Pwi_Commons_TimePeriod.SixMonths,value:Fmr_Pwi_Commons_FrequencyScale.Daily},{key:Fmr_Pwi_Commons_TimePeriod.YearToDate,value:Fmr_Pwi_Commons_FrequencyScale.Daily},{key:Fmr_Pwi_Commons_TimePeriod.OneYear,value:Fmr_Pwi_Commons_FrequencyScale.Daily},{key:Fmr_Pwi_Commons_TimePeriod.TwoYears,value:Fmr_Pwi_Commons_FrequencyScale.Daily},{key:Fmr_Pwi_Commons_TimePeriod.FiveYears,value:Fmr_Pwi_Commons_FrequencyScale.Weekly},{key:Fmr_Pwi_Commons_TimePeriod.TenYears,value:Fmr_Pwi_Commons_FrequencyScale.Monthly},{key:Fmr_Pwi_Commons_TimePeriod.Max,value:Fmr_Pwi_Commons_FrequencyScale.Monthly}]}function n(){this._secondaryFrequencies=[{key:Fmr_Pwi_Commons_TimePeriod.OneDay,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.TwoDays,value:[Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.FiveDays,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.TenDays,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.OneMonth,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.Weekly,Fmr_Pwi_Commons_FrequencyScale.Monthly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.ThreeMonths,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Quarterly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.SixMonths,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.YearToDate,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.OneYear,
value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.TwoYears,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Yearly]},{key:Fmr_Pwi_Commons_TimePeriod.FiveYears,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly]},{key:Fmr_Pwi_Commons_TimePeriod.TenYears,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly]},{key:Fmr_Pwi_Commons_TimePeriod.Max,value:[Fmr_Pwi_Commons_FrequencyScale.OneMinute,Fmr_Pwi_Commons_FrequencyScale.FiveMinutes,Fmr_Pwi_Commons_FrequencyScale.TenMinutes,Fmr_Pwi_Commons_FrequencyScale.FifteenMinutes,Fmr_Pwi_Commons_FrequencyScale.ThirtyMinutes,Fmr_Pwi_Commons_FrequencyScale.Hourly,Fmr_Pwi_Commons_FrequencyScale.Daily,Fmr_Pwi_Commons_FrequencyScale.Weekly]},{key:Fmr_Pwi_Commons_TimePeriod.Custom,value:[]}]}function r(e){if(void 0===e||null===e)throw new UndefinedOrNullException("timeframe");if(e>Fmr_Pwi_Commons_TimePeriod.Custom||e<Fmr_Pwi_Commons_TimePeriod.OneDay)throw new ArgumentOutOfRangeException("timeframe")}function o(e){if(void 0===e||null===e)throw new UndefinedOrNullException("frequency");if(e>Fmr_Pwi_Commons_FrequencyScale.Yearly||e<Fmr_Pwi_Commons_FrequencyScale.OneMinute)throw new ArgumentOutOfRangeException("frequency")}function i(e,t){r(e),o(t);var n=this.getPrimaryFrequencies(e);return n.indexOf(t)!==-1}function a(e){return r(e),this._defaultFrequencies||t.call(this),commonsModule.$.grep(this._defaultFrequencies,function(t){return t.key===e})[0].value}function c(t){return r(t),this._primaryFrequencies||e.call(this),commonsModule.$.grep(this._primaryFrequencies,function(e){return e.key===t})[0].value}function s(e){return r(e),this._secondaryFrequencies||n.call(this),$.grep(this._secondaryFrequencies,function(t){return t.key===e})[0].value}return{getPrimaryFrequencies:c,getSecondaryFrequencies:s,getDefaultFrequency:a,isPrimarySelection:i}}(),TimeframeService.prototype.constructor=TimeframeService,commonsModule.filter("math",function(){return function(e,t){var n;if("function"==typeof Math[t]){var r=Array.prototype.slice.call(arguments,2);r.unshift(e),n=Math[t].apply(void 0,r)}return n}}),commonsModule.filter("createObject",["$window",function(e){return function(t){var n=Array.prototype.slice.apply(arguments,[1]);return n.unshift(e[t]),ObjectFactory.createInstance.apply(void 0,n)}}]),commonsModule.filter("usLocale",function(){return function(e,t,n){var r,o=1e6,i=1e4,a=1e7;return r=e>=a?NumberExtensions.toUSLocaleString(e/o,0,0)+"M":e>=i&&e<a?NumberExtensions.toUSLocaleString(e,0,0):NumberExtensions.toUSLocaleString(e,t,n)}}),commonsModule.filter("relativeX",function(){return function(e){if(e)return e.pageX-commonsModule.$(e.currentTarget).offset().left}}),commonsModule.filter("invokeJQueryMethod",function(){return function(e,t){var n,r=commonsModule.$(e);return r.length>0&&"function"==typeof r[t]&&(n=r[t].apply(r,Array.prototype.slice.call(arguments,2))),n}}),commonsModule.filter("splits",function(){var e=Math.sqrt(25e-5);return function(t){for(var n=1,r=function(){return t*n},o=function(e){return Math.abs(e-Math.round(e))};o(r())>e;)n++;return Math.round(r())+":"+n}}),commonsModule.filter("toAssignable",function(){return function(e,t,n,r){if(e&&angular.isString(e)&&angular.isDefined(t)&&angular.isObject(t)&&angular.isFunction(r))return t[e]=r.call(n),t}}),commonsModule.filter("numberAbbr",function(){var e=[{threshold:1e12,unit:1e12,suffix:"T"},{threshold:1e9,unit:1e9,suffix:"B"},{threshold:1e6,unit:1e6,suffix:"M"},{threshold:1e4,unit:1e3,suffix:"K"}],t=2,n=2;return function(r,o,i,a){if(!r)return"0.00";a&&(e=a);var c=parseInt(o);(o&&c||0===o)&&(t=o);var s=parseInt(i);(i&&s||0===i)&&(n=i);var u=1,l="",m=r<0?"-":"";r=Math.abs(r);for(var f=0;f<e.length;f++){var p=e[f];if(r>=p.threshold){u=p.unit,l=p.suffix;break}}return m+NumberExtensions.toUSLocaleString(r/u,t,n)+l}}),commonsModule.directive("dockContainer",function(){function e(e){return"none"!==e.css("display")}function t(e,t){var n=e.children().filter(function(){return m(this)===_.ATTRS.FILL_LEFT_AWARE});n.each(function(){var e=commonsModule.$(this);e.css("left",t+"px")})}function n(e){return{h:r(e),w:o(e)}}function r(e){var t=e.height(),n=e.css("height");return n===t+"%"?0:t}function o(e){var t=e.width(),n=e.css("width");return n===t+"%"?0:t}function i(e,t){var n=parseFloat(e.css(t));return commonsModule.$.isNumeric(n)?n||0:0}function a(e){return i(e,"marginTop")+i(e,"marginBottom")}function c(e){return i(e,"marginLeft")+i(e,"marginRight")}function s(e){return function(){var t=e[0].getBoundingClientRect();return{h:t.height+a(e),w:t.width+c(e)}}}function u(e){return function(){var t=e[0].getBoundingClientRect();return t.width+c(e)}}function l(e){return function(){var t=e[0].getBoundingClientRect();return t.height+a(e)}}function m(e){var t=commonsModule.$(e).attr(_.NAME);if(t)return commonsModule.$.trim(t).toLowerCase()}function f(e){var t=[];return e.forEach(function(e){var n=commonsModule.$(e),r=m(n);r!==_.ATTRS.TOP&&r!==_.ATTRS.BOTTOM||t.push(l(n)),r!==_.ATTRS.LEFT&&r!==_.ATTRS.RIGHT||t.push(u(n))}),t}function p(e,t){var n,r=f(t.children().get()),o=[];r.forEach(function(r){n=e.$watch(r,function(){y(e,t)}),o.push(n)}),n=e.$watch(s(t),function(){y(e,t)},!0),o.push(n),t.data("DockContainerUnwatches",o)}function d(e){var t=e.data("DockContainerUnwatches");t&&t.forEach(function(e){e()})}function h(e,t){e.$watchCollection(function(){return t.children()},function(){d(t),p(e,t)})}var _={NAME:"dock",ATTRS:{NONE:"none",LEFT:"left",TOP:"top",BOTTOM:"bottom",RIGHT:"right",FILL:"fill",FILL_LEFT_AWARE:"fill_left_aware"}},y=function(r,o){var i=n(o),a=i.w,c=i.h,s=0,u=o.children().filter(function(){return commonsModule.$(this).attr(_.NAME)});u.each(function(){var t=commonsModule.$(this),n=m(this);if(n===_.ATTRS.RIGHT){var r=t.outerWidth(!0);a-=r,a<0&&(a=0),t.outerHeight(c,!0)}else if(n===_.ATTRS.LEFT&&e(t)){var o=t.outerWidth(!0);a-=o,a<0&&(a=0),t.outerHeight(c,!0),s+=o}else if(n===_.ATTRS.TOP||n===_.ATTRS.BOTTOM){var i=t.outerHeight(!0);c-=i,c<0&&(c=0),t.outerWidth(a,!0)}});var l=o.children().filter(function(){return m(this)===_.ATTRS.FILL||m(this)===_.ATTRS.FILL_LEFT_AWARE});l.each(function(){var e=commonsModule.$(this);e.outerHeight(c,!0),e.outerWidth(a,!0)}),t(o,s)};return{restrict:"A",link:function(e,t){var n=commonsModule.$(t);p(e,n),h(e,n)}}}),ErrorMessageService.prototype=function(){function e(e){return e.toUpperCase()}function t(){return""}function n(e,t){var n="Unable to retrieve data at this time. Please try again later.",o="";if(e!==Fmr_Pwi_Commons_SecurityDataErrorCode.NoError){for(var i=0;i<r.length;i++){var a=r[i];if(a.code===e){n=a.message,o=a.getSymbol(t);break}}return{message:n,symbol:o,toString:function(){return n+o}}}}var r=[{code:Fmr_Pwi_Commons_SecurityDataErrorCode.NoData,message:"No data available for symbol : ",getSymbol:e},{code:Fmr_Pwi_Commons_SecurityDataErrorCode.InvalidData,message:"No data available for symbol : ",getSymbol:e},{code:Fmr_Pwi_Commons_SecurityDataErrorCode.InvalidSymbol,message:"Invalid Symbol : ",getSymbol:e},{code:Fmr_Pwi_Commons_SecurityDataErrorCode.EntitledInternational,message:"User is not international enabled",getSymbol:t},{code:Fmr_Pwi_Commons_SecurityDataErrorCode.UnsupportedTimeframe,message:"Chart not available for selected timeframe.",getSymbol:t}];return{getErrorMessage:n}}(),ErrorMessageService.prototype.constructor=ErrorMessageService,AddOrSubtractDataSource.prototype=function(){function e(){var e=this._datasource1.getDataSeries(),t=this._datasource2.getDataSeries();e&&t?this._dataseries=this._isSubtract?e.subtract(t):e.add(t):this._dataseries=null,EventBus.trigger(this,"DataSource:datachanged")}function t(){e.call(this),this._eventRegistered||(this._eventRegistered=!0,EventBus.on(this._datasource1,"DataSource:datachanged",e,this),EventBus.on(this._datasource2,"DataSource:datachanged",e,this))}function n(){EventBus.off(this._datasource1,"DataSource:datachanged",e,this),EventBus.off(this._datasource2,"DataSource:datachanged",e,this)}var r=Object.create(DataSeriesDataSource.prototype);return r.initialize=t,r.destroy=n,r}(),AddOrSubtractDataSource.prototype.constructor=AddOrSubtractDataSource,RegistrationService.prototype=function(){function e(){return this._items}function t(e){if(e){var t=this._items.indexOf(e);t<=-1&&this._items.push(e)}}function n(e){if(e){var t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}return{getItems:e,register:t,unregister:n}}(),RegistrationService.prototype.constructor=RegistrationService;var GeometryHelper=function(){function e(){}return e.PixelSensitivity=4,e.isInRect=function(t,n,r,o,i,a){var c=e.PixelSensitivity;return a>=Math.min(n,o)-c&&a<=Math.max(n,o)+c&&i>=Math.min(t,r)-c&&i<=Math.max(t,r)+c},e.distanceBetweenPoints=function(e,t,n,r){return Math.sqrt(Math.pow(Math.abs(e-n),2)+Math.pow(Math.abs(t-r),2))},e.perpendicularFoot=function(e,t,n,r,o,i){if(e===n)return{x:e,y:i};if(t===r)return{x:o,y:t};var a=(r-t)/(n-e),c={};return c.x=(i+1/a*o+a*n-r)/(a+1/a),c.y=r-a*(n-c.x),c},e.distanceToLine=function(t,n,r,o,i,a){var c=e.perpendicularFoot(t,n,r,o,i,a);return e.distanceBetweenPoints(i,a,c.x,c.y)},e.calculateX=function(e,t,n,r,o){if(e===n)return e;if(t!==r){var i=(r-t)/(n-e),a=(n*t-e*r)/(n-e);return(o-a)/i}},e}();Validator.prototype=function(){function e(e,t,n){for(var r=e.length,o=0;o<r;o++){var i=e[o];if(i.object===t&&i.exception===n)return o}return-1}function t(t,n){t&&n&&e(this._errors,t,n)===-1&&this._errors.push({object:t,exception:n})}function n(t,n){var r=e(this._errors,t,n);r!==-1&&this._errors.splice(r,1)}function r(){return this._errors.length>0}function o(){var e=this._errors.length;this._errors.splice(0,e)}return{addError:t,removeError:n,hasError:r,clearErrors:o}}(),Validator.prototype.constructor=Validator;var SocialSentimentDataParser=function(){function e(e,t){var n=e.replace(/\-/g," "),r=new Date(n);return t||r.setHours(0,0,0,0),r}var t={parse:function(t,n){if(t.sscore&&t.sscore.SentimentRecord){for(var r=ObjectFactory.createInstance(Bars),o=0;o<t.sscore.SentimentRecord.length;o++){var i=t.sscore.SentimentRecord[o],a=parseFloat(i.op),c=parseFloat(i.hi),s=parseFloat(i.lo),u=parseFloat(i.cl),l=e(i.lt,n),m=new Bar(a,c,s,u,0,l);r.push(m)}return r}}};return t}();SynchronizedDataSeriesDataSource.prototype=function(){function e(){var e=this._dataSeriesDataSource.getDataSeries(),t=this._baseDataSeriesDataSource.getDataSeries();!e||e.length<=0||!t||t.length<=0?this._dataseries=void 0:this._dataseries=e.synchronize(t),EventBus.trigger(this,"DataSource:datachanged")}function t(){this._lastDataSeries!==this._dataSeriesDataSource.getDataSeries()&&this._lastBaseDataSeries!==this._baseDataSeriesDataSource.getDataSeries()?(e.call(this),this._lastDataSeries=this._dataSeriesDataSource.getDataSeries(),this._lastBaseDataSeries=this._baseDataSeriesDataSource.getDataSeries()):this._lastDataSeries===this._dataSeriesDataSource.getDataSeries()&&this._lastBaseDataSeries!==this._baseDataSeriesDataSource.getDataSeries()&&void 0!==this._dataseries&&(this._dataseries=void 0,EventBus.trigger(this,"DataSource:datachanged"))}function n(){EventBus.off(this._dataSeriesDataSource,"DataSource:datachanged",this.dataSeriesUpdated,this),EventBus.off(this._baseDataSeriesDataSource,"DataSource:datachanged",this.dataSeriesUpdated,this)}var r=Object.create(DataSeriesDataSource.prototype);return r.dataSeriesUpdated=t,r.destroy=n,r}(),SynchronizedDataSeriesDataSource.prototype.constructor=SynchronizedDataSeriesDataSource,commonsModule.directive("lineThicknessSelector",["getTemplatesBasePath",function(e){var t=[1,2,3,4,5,6,7];return{restrict:"E",scope:{value:"=",onChange:"&",thicknesses:"=?values",disabled:"=?"},templateUrl:function(t){return e(t)+"linethicknessselector.html"},controller:["$scope",function(e){e.thickness=e.value,e.$watch("thickness",function(t,n){e.value=t,t!==n&&e.onChange&&e.onChange({value:e.value})}),e.thicknesses||(e.thicknesses=t)}]}}]),LineThicknessParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(LineThicknessParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),LineThicknessParameter.prototype.constructor=LineThicknessParameter,commonsModule.directive("colorPicker",["getTemplatesBasePath",function(e){var t=["#B57541","#EB793E","#FE8C00","#FFCA33","#083863","#1962C8","#417CFD","#000000","#646464","#969696","#C8C8C8","#4329D2","#7A29FE","#A374FE","#AF5AD2","#F63AFF","#F685FF","#22767C","#3F8700","#00A965","#53B000","#D3CB4F","#B50000","#FF2A00"];return{restrict:"E",scope:{color:"=value",onChange:"&",colors:"=?values"},templateUrl:function(t){return e(t)+"colorpicker.html"},controller:["$scope",function(e){e.$watch("color",function(t,n){t!==n&&e.onChange&&e.onChange({value:t})}),e.colors||(e.colors=t)}]}}]),ColorParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(ColorParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),ColorParameter.prototype.constructor=ColorParameter,LineStyleParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(LineStyleParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),LineStyleParameter.prototype.constructor=LineStyleParameter,commonsModule.directive("lineStyleSelector",["getTemplatesBasePath",function(e){var t=[Fmr_Pwi_Charting_LineStyle.Solid,Fmr_Pwi_Charting_LineStyle.Dashed,Fmr_Pwi_Charting_LineStyle.Dotted];return{restrict:"E",scope:{value:"=",onChange:"&",styles:"=?values"},templateUrl:function(t){return e(t)+"linestyleselector.html"},controller:["$scope",function(e){e.style=e.value,e.$watch("style",function(t,n){e.value=t,t!==n&&e.onChange&&e.onChange({value:e.value})}),e.styles||(e.styles=t)}]}}]);var Fmr_Pwi_Charting_LineStyle={Solid:0,Dashed:1,Dotted:2,Histogram:3,getDashArray:function(e,t){return void 0===t&&(t=1),e===Fmr_Pwi_Charting_LineStyle.Dashed?[5*t,t]:e===Fmr_Pwi_Charting_LineStyle.Dotted?[t,2*t]:null}};SettableDataSeriesDataSource.prototype=function(){function e(e){this._dataseries!==e&&(this._dataseries=e,EventBus.trigger(this,"DataSource:datachanged"))}var t=Object.create(DataSeriesDataSource.prototype);return t.setDataSeries=e,t}(),SettableDataSeriesDataSource.prototype.constructor=SettableDataSeriesDataSource,commonsModule.directive("textItemSelector",["getTemplatesBasePath",function(e){return{restrict:"E",scope:{value:"=",onChange:"&",values:"=",disabled:"=?"},templateUrl:function(t){return e(t)+"textitemselector.html"},controller:["$scope",function(e){e.fromValue=function(t){for(var n=e.values,r=0;r<n.length;r++)if(t===n[r].value)return n[r]},e.$watch("value",function(t,n){t!==n&&e.onChange&&e.onChange({value:e.value})})}]}}]),commonsModule.filter("localeSensitiveOrderBy",function(){function e(e,t){return e&&e.constructor===Array&&e.sort(function(e,n){return e[t]&&n[t]?e[t].localeCompare(n[t]):0}),e}return e}),commonsModule.directive("fmrcheckbox",["getTemplatesBasePath",function(e){return{restrict:"E",scope:{value:"=",onChange:"&",label:"="},templateUrl:function(t){return e(t)+"fmrcheckbox.html"},controller:["$scope",function(e){e.$watch("value",function(t,n){t!==n&&e.onChange&&e.onChange({value:e.value})})}]}}]),BooleanParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(BooleanParameter,this._label,this._name,this._value,this.directiveName);return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),BooleanParameter.prototype.constructor=BooleanParameter,commonsModule.directive("clickOutside",["$document",function(e){return{restrict:"A",scope:{clickOutside:"&"},link:function(t,n){var r;commonsModule.$(e).click(function(){!r&&t.clickOutside(),r=!1}),commonsModule.$(n).click(function(){r=!0})}}}]),commonsModule.directive("tooltip",["getTemplatesBasePath","$window",function(e,t){return{restrict:"E",replace:!0,transclude:!0,scope:{title:"=tooltiptitle",content:"@content",layerstyle:"@layerstyle",scrollable:"@scrollable",nomouseevent:"=nomouseevent"},templateUrl:function(t){return e(t)+"tooltip.html"},link:function(e,n){var r=commonsModule.$(n),o=commonsModule.$(n).find(".tooltip-icon");e.open=function(t){if(!e.nomouseevent||e.nomouseevent!==!0||!t){if(e.scrollable){var n=commonsModule.$("."+e.scrollable);n&&n.get(0)&&n.get(0).scrollHeight>n.height()?(r.css("position","relative"),n.animate({scrollTop:o.offset().top},200)):r.css("position","absolute")}e.isOpen=!0}},e.close=function(t){e.nomouseevent&&e.nomouseevent===!0&&t||(e.isOpen=!1)},e.clickOutside=function(){e.isOpen=!1,e.$apply()},angular.element(t).on("resize",function(){if(e.scrollable){var t=commonsModule.$("."+e.scrollable);t&&t.get(0)&&t.get(0).scrollHeight>t.height()?r.css("position","relative"):r.css("position","absolute")}})}}}]),commonsModule.directive("backgroundColorPicker",["getTemplatesBasePath",function(e){var t=["#EEEEEE","#FFFFFF","#C6D6A5","#FFEBD0","#FFF5CC","#E2F4FB","#F5EBF9"];return{restrict:"E",scope:{color:"=value",onChange:"&",colors:"=?values"},templateUrl:function(t){return e(t)+"colorpicker.html"},controller:["$scope",function(e){e.$watch("color",function(t,n){t!==n&&e.onChange&&e.onChange({value:t})}),e.colors||(e.colors=t)}]}}]),BackgroundColorParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(BackgroundColorParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),BackgroundColorParameter.prototype.constructor=BackgroundColorParameter,commonsModule.directive("fontColorPicker",["getTemplatesBasePath",function(e){var t=["#000000","#024A7A","#0D6F3F","#E01616","#FB9914","#6F9824","#FFCD00","#1DADE2","#7F05A2"];return{restrict:"E",scope:{color:"=value",onChange:"&",colors:"=?values"},templateUrl:function(t){return e(t)+"colorpicker.html"},controller:["$scope",function(e){e.$watch("color",function(t,n){t!==n&&e.onChange&&e.onChange({value:t})}),e.colors||(e.colors=t)}]}}]),FontColorParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(FontColorParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),FontColorParameter.prototype.constructor=FontColorParameter,commonsModule.directive("fontSizePicker",["getTemplatesBasePath",function(e){var t=[8,10,12,14,16,18,24,28,32,36];return{restrict:"E",scope:{fontSize:"=value",onChange:"&",fontSizes:"=?values"},templateUrl:function(t){return e(t)+"fontsizepicker.html"},controller:["$scope",function(e){e.$watch("fontSize",function(t,n){t!==n&&e.onChange&&e.onChange({value:t})}),e.fontSizes||(e.fontSizes=t)}]}}]),FontSizeParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(FontSizeParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),FontSizeParameter.prototype.constructor=FontSizeParameter,commonsModule.directive("fontStylePicker",["getTemplatesBasePath",function(e){var t=["normal","bold","italic"];return{restrict:"E",scope:{fontStyle:"=value",onChange:"&",fontStyles:"=?values"},templateUrl:function(t){return e(t)+"fontstylepicker.html"},controller:["$scope",function(e){e.$watch("fontStyle",function(t,n){t!==n&&e.onChange&&e.onChange({value:t})}),e.fontStyles||(e.fontStyles=t)}]}}]),FontStyleParameter.prototype=function(){function e(){var e=ObjectFactory.createInstance(FontStyleParameter,this._label,this._name,this.getValue());return commonsModule.copy(this,e),e}var t=Object.create(Parameter.prototype);return t.clone=e,t}(),FontStyleParameter.prototype.constructor=FontStyleParameter;var DateUtil=function(){var e="MM/DD/YYYY",t=function(t,n){return n=n||e,moment(t,n,!0)},n=function(n,r){r=r||e;var o=t(n,r);if(!o.isValid())throw new Error("Invalid date format. Expecting "+r);return o.toDate()},r=function(t,n){return n=n||e,t instanceof Date?moment(t).format(n):""},o=function(){for(var e,n,r=arguments.length,o=0;o<r;o++)if(e=arguments[o],n=t(e),!n.isValid())return!1;return!0};return{strToMoment:t,strToDate:n,dateToStr:r,areDatesValid:o}}(),DigitalVolatilityPeriod={OneYear:1,FiveYears:5,TenYears:10,Max:20};commonsModule.directive("resetFieldIcon",["$compile",function(e){var t='<i ng-click-ex="reset()" class="reset-icon"></i>',n='<div class="fmr-pwi-common-reset-field-icon"></div>';return{restrict:"A",require:"ngModel",scope:{},link:function(r,o,i,a){var c=/text|search|tel|url|email|password/i;if("INPUT"!==o[0].nodeName)throw new Error("resetField is limited to input elements");if(!c.test(i.type))throw new Error("Invalid input type for resetField: "+i.type);var s=angular.element(n),u=e(t)(r);i.name&&s.addClass("fmr-pwi-common-reset-field-icon-"+i.name),o.wrap(s),o.after(u),r.reset=function(){a.$setViewValue(""),a.$render()}}}}]),commonsModule.filter("timeframeName",function(){return getTimeframeName});