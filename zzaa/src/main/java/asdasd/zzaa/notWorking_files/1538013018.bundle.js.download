!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";var ctrl=["$scope","balanceOverTimeService","$templateCache","$compile","$element","$document","$interval",function($scope,balanceOTService,$templateCache,$compile,$element,$document,$interval){function loadBalanceHisData(){$scope.loaded=!1,$scope.error=void 0,$(angular.element($document)).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),balanceOTService.loadData($scope).then(function(response){response&&response.balances&&response.balances.length>0?($scope.loaded=!0,response.balances=response.balances.filter(function(balance){return!isNaN(balance.value)}),$scope.balanceHis=response,void 0===$scope.isEnabledSinceLastLogin&&void 0!==response.isEnabledSinceLastLogin&&($scope.isEnabledSinceLastLogin=response.isEnabledSinceLastLogin),!$scope.daysAndMonths&&response.daysAndMonths&&($scope.daysAndMonths=response.daysAndMonths),!$scope.lastLoginTime&&response.lastLoginTime&&($scope.lastLoginTime=response.lastLoginTime),$scope.cardStatus||(response.cardStatus?$scope.cardStatus=response.cardStatus:$scope.cardStatus="expand"),$scope.isHaveWIAccounts=response.isHaveWIAccounts):($scope.balanceHis=void 0,$scope.error=!0)})["catch"](function(error){$scope.balanceHis=void 0,$scope.error=error||"error"})["finally"](function(){if($scope.loaded===!0)var interval=$interval(function(){angular.element($element[0].querySelectorAll(".fid-card--block-chart")).html()&&($(angular.element($document)).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),$interval.cancel(interval))},100);else if($scope.error)var interval=$interval(function(){angular.element($element[0].querySelectorAll(".fid-card-block-chart--message")).html()&&($(angular.element($document)).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),$interval.cancel(interval))},100)})}$scope.loaded=!1,$scope.error=!1,$scope.duration="1Y",$scope.investmentHtml="",$scope.toggleMap=window.toggleMap||{},loadBalanceHisData(),$scope.changeTimeFrame=function(timeFrame){$scope.duration!==timeFrame&&($scope.duration=timeFrame,$scope.$broadcast("destroyBOTchart"),loadBalanceHisData())},$scope.gotoActivityTab=function(){var hash=location.hash.substring(1),accounts="";if(hash){var segments=hash.split("/");segments=segments.filter(function(e){return e}),2===segments.length&&(accounts="/"+segments[1])}location.hash="activity"+accounts}}];module.exports=ctrl},{}],2:[function(require,module,exports){"use strict";var appConfig=require("../../dpcs-config.json"),appName=appConfig.appName,config=["$controllerProvider",function($controllerProvider){$controllerProvider.register("balanceHistoryCtrl",require("./components/home"))}];module.exports={name:appName,deps:[require("./shared/services/apiSvc"),require("./shared/services/stateApiSvc"),require("./shared/services/cardCollapseSvc"),require("./shared/directives/cardCollapse"),require("./shared/directives/balanceOverTimeChart"),require("./shared/directives/investmentText"),require("./shared/directives/balanceOverTimeStruct"),require("./shared/directives/balanceOverTimeLedger"),require("./templates")],config:config}},{"../../dpcs-config.json":13,"./components/home":1,"./shared/directives/balanceOverTimeChart":4,"./shared/directives/balanceOverTimeLedger":5,"./shared/directives/balanceOverTimeStruct":6,"./shared/directives/cardCollapse":7,"./shared/directives/investmentText":8,"./shared/services/apiSvc":9,"./shared/services/cardCollapseSvc":10,"./shared/services/stateApiSvc":11,"./templates":12}],3:[function(require,module,exports){"use strict";var deps,ngapp=require(".");deps=ngapp.deps,angular.module(ngapp.name,deps).config(ngapp.config)},{".":2}],4:[function(require,module,exports){"use strict";!function(window,angular){angular.module("balanceOverTimeChartDirective",[]).directive("balanceOverTimeChartDirective",["$templateCache","$document",function($templateCache,$document){return{restrict:"C",template:$templateCache.get("shared/directives/balanceOverTimeChart/template.html"),link:function($scope,element){function initialChartConfig(){var yAxisConfig={ceiling:!1,floor:!1,gridLineColor:"#DBDBDB",labels:{align:"left",formatter:function(){return"$"+(this.axis.defaultLabelFormatter.call(this)||"").replace(/g/i,"B")},style:{color:"#666",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"11px",lineHeight:"120%",textTransform:"uppercase"},x:5},title:{text:null},opposite:!0,showLastLabel:!0},seriesTemplate={data:null,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"rgb(233,246,255)"],[1,"rgba(255,255,255,0.5)"]]},marker:{enabled:!1,symbol:"circle"},type:"area"},dataArray=_organizeData(),config={animation:!0,dataArray:dataArray,chartID:"fid-card--block-chart-balance-over-time",chartClass:".fid-card--block-chart",floor:!1},dataArray=config.dataArray,floor=config.floor,ceiling=config.ceiling,newValues=setFloorAndCeiling(dataArray);return floor||(floor=newValues.newFloor),ceiling||(ceiling=newValues.newCeiling),yAxisConfig.floor=floor,yAxisConfig.ceiling=ceiling,Highcharts.Chart.prototype.firstRender=function(func){return function(){func.apply(this,arguments),this.tooltip&&this.tooltip.label.toFront()}}(Highcharts.Chart.prototype.firstRender),{yAxisConfig:yAxisConfig,seriesTemplate:seriesTemplate,config:config}}function createChart(chartConfiguration,renderTarget){var yAxisLocalConfig=$.extend(!0,{},chartConfiguration.yAxisConfig,{labels:{x:5,y:4}});new Highcharts.StockChart({chart:{marginBottom:28,marginLeft:0,marginRight:50,marginTop:14,renderTo:renderTarget},credits:{enabled:!1},exporting:{enabled:!1},navigator:{enabled:!1},plotOptions:{area:{lineWidth:2},series:{animation:chartConfiguration.config.animation,color:"#1B63C8",dataLabels:{enabled:!0,formatter:function(){return null}}}},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},series:[$.extend(!0,{},chartConfiguration.seriesTemplate,{data:chartConfiguration.config.dataArray})],tooltip:{xDateFormat:"%B %e, %Y",pointFormat:"<strong>${point.y:,.2f}</strong>"},xAxis:{dateTimeLabelFormats:{second:"%Y-%m-%d<br/>%H:%M:%S",minute:"%Y-%m-%d<br/>%H:%M",hour:"%Y-%m-%d<br/>%H:%M",day:"%m/%d",week:"%m/%d",month:"%m/%d/%y",year:"%Y"},labels:{style:{color:"#666",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"11px",lineHeight:"120%"},y:15},lineColor:"#CBCBCB",tickColor:"#CBCBCB",tickLength:4,tickPosition:"inside",type:"datetime"},yAxis:[yAxisLocalConfig]},function(){var chart=getChartObj();drawLastPointFlag(chart,chartConfiguration)})}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function drawLastPointFlag(chart,chartConfiguration){var LAST_POINT_TEXT_ID_NAME="last-point-text",LAST_POINT_BOX_ID_NAME="last-point-box",targetElement=document.getElementById(LAST_POINT_TEXT_ID_NAME);targetElement&&targetElement.parentNode.removeChild(targetElement),targetElement=document.getElementById(LAST_POINT_BOX_ID_NAME),targetElement&&targetElement.parentNode.removeChild(targetElement);var correspondingYlocation=null,correspondingXlocation=null,points=chart.series[0].points;if(points.length){var lastPoint=points[points.length-1],formattedLastPoint=chartConfiguration.yAxisConfig.labels.formatter.call({axis:chart.yAxis[0],chart:chart,isFirst:!1,isLast:!1,dateTimeLabelFormat:void 0,value:lastPoint.y});formattedLastPoint=formattedLastPoint.replace(/(?:(^\$\d\.\d)\d*?(?=[^\d]|$))|(?:(\..+?(?=[^\d]|$)))/,"$1"),correspondingXlocation=points[points.length-1].plotX,correspondingYlocation=points[points.length-1].plotY;var text=chart.renderer.text(formattedLastPoint,correspondingXlocation+chart.plotLeft+8,correspondingYlocation+chart.plotTop+4).attr({fontColor:"#FFF",id:LAST_POINT_TEXT_ID_NAME,zIndex:2001}).css({color:"#FFF",fontSize:"11px",textTransform:"uppercase"}).add(),box=text.getBBox();box.y=box.y+6,box.x=box.x-8;var path=["M",box.x,box.y,"L",box.x+7,box.y+7,box.x+box.width+16,box.y+7,box.x+box.width+16,box.y-7,box.x+7,box.y-7,box.x,box.y];chart.renderer.path(path).attr({id:LAST_POINT_BOX_ID_NAME,"stroke-width":1,stroke:"#1962C8",fill:"#1962C8",zIndex:2e3}).add()}}function _organizeData(){var output=[];return $.each($scope.balanceHis&&$scope.balanceHis.balances||[],function(index,balancePoint){var date=balancePoint.date,dateSegments=date.split("/"),balance=+balancePoint.value;isNaN(balance)||output.push([Date.UTC(dateSegments[2],dateSegments[0]-1,dateSegments[1]),+balance.toFixed(2)])}),output}function getMaxValue(array){return Math.max.apply(Math,array)}function getMinValue(array){return Math.min.apply(Math,array)}function setFloorAndCeiling(dataArray){for(var newArray=[],i=0,len=dataArray.length;i<len;i++)newArray.push(dataArray[i][1]);var newFloor,newCeiling,minimum=getMinValue(newArray),maximum=getMaxValue(newArray),padding=.1*(maximum-minimum);return minimum<0||minimum-padding<0?(newFloor=!1,newCeiling=!1):(newFloor=minimum-padding,newCeiling=maximum+padding),{newFloor:newFloor,newCeiling:newCeiling}}function getChartObj(){var chart=$("#fid-card--block-chart-balance-over-time").highcharts();if(chart)return chart;var charts=Highcharts.charts;for(var i in charts)if(charts[i]&&charts[i].renderTo&&"fid-card--block-chart-balance-over-time"===charts[i].renderTo.id)return charts[i]}$scope.$on("destroyBOTchart",function(){var chartInstance=getChartObj();chartInstance&&chartInstance.destroy&&chartInstance.destroy()}),$(angular.element($document)).off("CARD_LAYOUT_CHANGED.summaryCards.botChartReflow"),$(angular.element($document)).on("CARD_LAYOUT_CHANGED.summaryCards.botChartReflow",function(){resizeChart()});var resizeChart=debounce(function(){setTimeout(function(){var chart=getChartObj();chart&&chart.reflow&&(chart.reflow(),drawLastPointFlag(chart,chartConfig))})},250),chartConfig=initialChartConfig(),target=$(element[0].querySelectorAll(chartConfig.config.chartClass));createChart(chartConfig,target[0])}}}])}(window,window.angular),module.exports="balanceOverTimeChartDirective"},{}],5:[function(require,module,exports){"use strict";!function(window,angular){angular.module("balanceOverTimeLedgerDirective",[]).directive("balanceOverTimeLedgerDirective",["$templateCache",function($templateCache){return{restrict:"C",template:$templateCache.get("shared/directives/balanceOverTimeLedger/template.html"),link:function($scope,element){var totalTodayChangeValue=$scope.totalTodayChangeValue,totalTodayChangePercent=$scope.totalTodayChangePercent,rorVal=$scope.rorVal,asOfTime=$scope.asOfTime,$gainLossPercent=$(element[0].querySelectorAll(".js-narrative-bot-gain-loss-percent")).removeClass("color-negative color-positive");if(totalTodayChangeValue.indexOf("$0.00")!==-1||""===totalTodayChangeValue||""==totalTodayChangePercent)$(element[0].querySelectorAll(".js-narrative-bot--gain-loss")).hide();else{$(element[0].querySelectorAll(".js-narrative-bot--gain-loss")).show(),$gainLossPercent.text(" ("+totalTodayChangePercent+")"),totalTodayChangePercent.indexOf("+")!==-1&&totalTodayChangePercent.indexOf("+0.00")===-1&&$gainLossPercent.addClass("color-positive"),totalTodayChangePercent.indexOf("-")!==-1&&totalTodayChangePercent.indexOf("-0.00")===-1&&$gainLossPercent.addClass("color-negative");var $gainLossDollarValue=$(element[0].querySelectorAll(".js-narrative-bot-gain-loss-value")).removeClass("color-negative color-positive");totalTodayChangeValue.indexOf("-")===-1?$gainLossDollarValue.addClass("color-positive"):totalTodayChangeValue.indexOf("+")===-1&&$gainLossDollarValue.addClass("color-negative"),$gainLossDollarValue.text(totalTodayChangeValue)}if(0!==rorVal){$(element[0].querySelectorAll(".js-narrative-bot--ror")).show();var $changeValue=$(element[0].querySelectorAll(".js-narrative-bot-ror-value")),$changeAsOfTime=$(element[0].querySelectorAll(".js-narrative-bot-as-of-time"));if("N/A"!=rorVal&&"null"!=asOfTime&&"false"!=asOfTime){var asOfTimeText="AS OF "+asOfTime;$changeAsOfTime.text(asOfTimeText),$changeAsOfTime.show()}else $changeAsOfTime.hide();$changeValue.removeClass("color-positive color-negative"),rorVal>0?($changeValue.addClass("color-positive"),$changeValue.text("+"+rorVal+"%")):rorVal<0?($changeValue.addClass("color-negative"),$changeValue.text(rorVal+"%")):"--"===rorVal?($changeValue.addClass("ytd-change"),$changeValue.text(rorVal)):($changeValue.addClass("ytd-change"),$changeValue.text("0.00%"))}else $(element[0].querySelectorAll(".js-narrative-bot--ror")).hide()}}}])}(window,window.angular),module.exports="balanceOverTimeLedgerDirective"},{}],6:[function(require,module,exports){"use strict";!function(window,angular){angular.module("balanceOverTimeStructDirective",["botCardCollapseDirective","balanceOverTimeChartDirective","investmentTextDirective","balanceOverTimeLedgerDirective"]).directive("balanceOverTimeStructDirective",["$templateCache","botCardCollapseService",function($templateCache,botCardCollapseService){return{restrict:"C",template:$templateCache.get("shared/directives/balanceOverTimeStruct/template.html"),link:function($scope,element){botCardCollapseService.bindCardCollapseEvent($scope,element,"Your balance history","expand"===$scope.cardStatus||void 0===$scope.cardStatus?"expand":"collapse",!0)}}}])}(window,window.angular),module.exports="balanceOverTimeStructDirective"},{}],7:[function(require,module,exports){"use strict";!function(window,angular){angular.module("botCardCollapseDirective",[]).directive("botCardCollapseDirective",["$templateCache","botCardStateApiService",function($templateCache,botCardStateApiService){return{restrict:"C",template:$templateCache.get("shared/directives/cardCollapse/template.html"),link:function($scope,element){$scope.$watch("$viewContentLoaded",function(){var ARIA_SELECTED="aria-selected",$targetElement=$(element[0].querySelectorAll(".fid-card")),$toggleTitle=$(element[0].querySelectorAll(".fid-car.expander--title"));$toggleTitle.length<1&&($toggleTitle=$targetElement),$scope.cardCollapseToggle=function(){$targetElement.hasClass("expanded")?($scope.cardStatus="collapse",$scope.$emit("cardCollapse.collapse",!1),botCardStateApiService.saveCardState($scope.tcmId)):($scope.cardStatus="expand",$scope.$emit("cardCollapse.expand",!1),botCardStateApiService.deleteCardState($scope.tcmId)),$("html").hasClass("lt-ie9")&&($toggleTitle.blur(),$toggleTitle.focus())},"expand"===$scope.cardStatus?$scope.$emit("cardCollapse.expand",!0):$scope.$emit("cardCollapse.collapse",!0),$targetElement.off("blur"),$targetElement.off("focus"),$targetElement.on("blur",function(){$targetElement.attr(ARIA_SELECTED,"true")}),$targetElement.on("focus",function(){$targetElement.attr(ARIA_SELECTED,"false")})})}}}])}(window,window.angular),module.exports="botCardCollapseDirective"},{}],8:[function(require,module,exports){"use strict";!function(window,angular){angular.module("investmentTextDirective",[]).directive("investmentTextDirective",["$compile",function($compile){return{restrict:"C",link:function($scope,element){function formatPrice(options){options=options||{};var value=options.price-0;if(isNaN(value))return options.defaultValue||options.price;value=isNaN(options.digits)?Math.abs(value)<1?value.toFixed(4):value.toFixed(2):value.toFixed(options.digits);var negative=value<0?"-":"";return options.addCommas?negative+(options.prefix||"")+numberAddCommas(Math.abs(value).toFixed(options.digits)):negative+(options.prefix||"")+Math.abs(value)}function numberAddCommas(nStr){nStr+="";for(var x=nStr.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(x1);)x1=x1.replace(rgx,"$1,$2");return x1+x2}if($scope.isNarrativeCard&&$scope.duration&&("SLL"===$scope.duration&&$scope.balanceHis.daysAndMonths||"SLL"!==$scope.duration)&&$scope.balanceHis&&$scope.balanceHis.balances&&$scope.balanceHis.balances.length>0){var investmentText="";"1M"===$scope.duration?investmentText="<span>Over the past 1 month</span>":"1Y"===$scope.duration?investmentText="<span>Over the past year</span>":"YTD"===$scope.duration?investmentText="<span>Since the start of this year</span>":"SLL"===$scope.duration&&(investmentText="<span>In the "+$scope.balanceHis.daysAndMonths+" since your last visit</span>");var totalPreviousBalance=$scope.balanceHis.balances[0].value,totalBalanceChange=$scope.balanceHis.balances[$scope.balanceHis.balances.length-1].value-totalPreviousBalance,totalFormattedChange=formatPrice({price:Math.abs(totalBalanceChange),prefix:"$",digits:2,addCommas:!0}),totalPercentage=(totalBalanceChange/totalPreviousBalance*100).toFixed(2);totalBalanceChange<0?investmentText+=", your total balance has gone down "+totalFormattedChange+", for an overall <strong>decrease of "+Math.abs(totalPercentage)+"%.</strong><sup>&sect;&sect;</sup>":0===totalBalanceChange?investmentText+=", your total balance has not changed.<sup>&sect;&sect;</sup>":totalBalanceChange>0&&0!==totalPreviousBalance?investmentText+=", your total balance has gone up "+totalFormattedChange+", for an overall <strong>increase of "+totalPercentage+"%.</strong><sup>&sect;&sect;</sup>":totalBalanceChange>0&&0===totalPreviousBalance&&(investmentText+=", your total balance has gone up "+totalFormattedChange+" from an initial balance of $0.00.<sup>&sect;&sect;</sup>"),element.append($compile(investmentText)($scope))}}}}])}(window,window.angular),module.exports="investmentTextDirective"},{}],9:[function(require,module,exports){"use strict";!function(window,angular){angular.module("balanceOverTimeService",[]).service("balanceOverTimeService",["$q","$http","$window",function($q,$http,$window){function postRequest($scope,url){var deferred=$q.defer(),reqData={duration:$scope.duration,accounts:$scope.accounts,isNarrativeCard:$scope.isNarrativeCard};return $scope.toggleMap&&$scope.toggleMap.dpcsBalanceOverTimeAMCEnable&&$scope.amc&&(reqData.amc=$scope.amc),$scope.isNarrativeCard===!0&&(reqData.isEnabledSinceLastLogin=$scope.isEnabledSinceLastLogin,reqData.cardStatus=$scope.cardStatus,reqData.tcmId=$scope.tcmId,"SLL"===$scope.duration&&(reqData.daysAndMonths=$scope.daysAndMonths,reqData.lastLoginTime=$scope.lastLoginTime)),$http({method:"POST",url:url,data:$.param(reqData),withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).success(function(data){data.error?deferred.reject(data.error):deferred.resolve(data)}).error(function(error){deferred.reject(error)}),deferred.promise}var loadData=function($scope){return $scope.toggleMap&&$scope.toggleMap.felixBalanceOverTimeEntitledFeature?postRequest($scope,$window.envMap.DIGITAL_APP_URL+"balances-overtime/api"):postRequest($scope,$window.envMap.DPCS_URL_VALUE+"/ftgw/dpcs/balances-overtime/api")};return{loadData:loadData}}])}(window,window.angular),module.exports="balanceOverTimeService"},{}],10:[function(require,module,exports){"use strict";!function(window,angular){angular.module("botCardCollapseService",[]).service("botCardCollapseService",[function(){var bindCardCollapseEvent=function($scope,element,cardCollapseTitle,cardStatus){function getCardBodyElement(targetElement){var $cardBody=$(targetElement[0].querySelectorAll(".narrative-summary-card-body"));return $cardBody.hasClass("card-layout--card-wrapper")&&($cardBody=$cardBody.find(">*")),$cardBody}function getParentContainerElement(targetElement){return $(targetElement[0].querySelectorAll(".card-layout--card-content,.card-layout--welcome-card-content,.card-layout--narrative-card-content"))}function getFidCardElement(targetElement){return $(targetElement[0].querySelectorAll(".fid-card"))}function getCardHeader(targetElement){return $(targetElement[0].querySelectorAll(".fid-card--header"))}function updateClassWhenOpen(targetElement){var COLLAPSED_CLASS_NAME="collapsed",EXPANDED_CLASS_NAME="expanded",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",$parentContainer=getParentContainerElement(targetElement);$parentContainer.removeClass(COLLAPSED_CLASS_NAME).addClass(EXPANDED_CLASS_NAME);var $fidCard=getFidCardElement(targetElement);$fidCard.removeAttr(ARIA_EXPANDED).removeAttr(ARIA_HIDDEN);var $cardBody=getCardBodyElement(targetElement);$cardBody.attr(ARIA_EXPANDED,"true").attr(ARIA_HIDDEN,"false")}function updateClassWhenComplete(targetElement){var $cardBody=getCardBodyElement(targetElement);$cardBody.css("overflow",""),setTimeout(function(){var $parentContainer=getParentContainerElement(targetElement);$parentContainer.find(".fid-card--block-chart").css("visiblity","visible")},100),$(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),$(document).trigger("CARD_LAYOUT_CHANGED.summaryCards.botChartReflow")}function updateClassWhenClose(targetElement){var COLLAPSED_CLASS_NAME="collapsed",EXPANDED_CLASS_NAME="expanded",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",$parentContainer=getParentContainerElement(targetElement);$parentContainer.removeClass(EXPANDED_CLASS_NAME).addClass(COLLAPSED_CLASS_NAME);var $fidCard=getFidCardElement(targetElement);$fidCard.removeAttr(ARIA_EXPANDED).removeAttr(ARIA_HIDDEN);var $cardBody=getCardBodyElement(targetElement);$cardBody.attr(ARIA_EXPANDED,"false").attr(ARIA_HIDDEN,"true")}function updateClassWhenCloseComplete(targetElement){var EXPANDED_CLASS_NAME="expanded",$parentContainer=getParentContainerElement(targetElement);$parentContainer.removeClass(EXPANDED_CLASS_NAME)}$scope.cardCollapseTitle=cardCollapseTitle,$scope.cardStatus=cardStatus,$scope.cardCollapseRootElement=element,$scope.$on("cardCollapse.expand",function(event,isInitialBehavior){var COLLAPSED_CLASS_NAME="collapsed",EXPANDED_CLASS_NAME="expanded",ANIMATING_CLASS_NAME="is-animating",COLLAPSED_HEADER_CLASS_NAME="collapsed-header",$cardBody=getCardBodyElement($scope.cardCollapseRootElement);if(!$cardBody.hasClass(ANIMATING_CLASS_NAME)){var $parentContainer=getParentContainerElement($scope.cardCollapseRootElement);$parentContainer.find(".fid-card--block-chart").css("visiblity","hidden"),$parentContainer.removeClass(COLLAPSED_CLASS_NAME).addClass(EXPANDED_CLASS_NAME);var $cardHeader=getCardHeader($scope.cardCollapseRootElement);if($cardHeader.removeClass(COLLAPSED_HEADER_CLASS_NAME),isInitialBehavior){var $cardBody=getCardBodyElement($scope.cardCollapseRootElement);$cardBody.show(),updateClassWhenOpen($scope.cardCollapseRootElement),updateClassWhenComplete($scope.cardCollapseRootElement)}else $cardBody.addClass(ANIMATING_CLASS_NAME).slideDown("fast",function(){setTimeout(function(){$cardBody.fadeTo("fast",1,function(){$cardBody.removeClass(ANIMATING_CLASS_NAME),updateClassWhenOpen($scope.cardCollapseRootElement),updateClassWhenComplete($scope.cardCollapseRootElement)})},200)})}}),$scope.$on("cardCollapse.collapse",function(event,isInitialBehavior){var ANIMATING_CLASS_NAME="is-animating",COLLAPSED_HEADER_CLASS_NAME="collapsed-header",$parentContainer=getParentContainerElement($scope.cardCollapseRootElement);if($parentContainer.addClass("collapsed"),isInitialBehavior){var $cardBody=getCardBodyElement($scope.cardCollapseRootElement);$cardBody.hide(),updateClassWhenClose($scope.cardCollapseRootElement),updateClassWhenCloseComplete($scope.cardCollapseRootElement),updateClassWhenComplete($scope.cardCollapseRootElement)}else{var $cardBody=getCardBodyElement($scope.cardCollapseRootElement);$cardBody.addClass(ANIMATING_CLASS_NAME).fadeTo("fast",0,function(){setTimeout(function(){var $cardHeader=getCardHeader($scope.cardCollapseRootElement);$cardHeader.addClass(COLLAPSED_HEADER_CLASS_NAME),$cardBody.slideUp("fast",function(){$cardBody.removeClass(ANIMATING_CLASS_NAME),updateClassWhenClose($scope.cardCollapseRootElement),updateClassWhenCloseComplete($scope.cardCollapseRootElement),updateClassWhenComplete($scope.cardCollapseRootElement)})},200)})}})};return{bindCardCollapseEvent:bindCardCollapseEvent}}])}(window,window.angular),module.exports="botCardCollapseService"},{}],11:[function(require,module,exports){"use strict";!function(window,angular){angular.module("botCardStateApiService",[]).service("botCardStateApiService",["$q","$http","$window",function($q,$http,$window){function postRequest(data,operation){var deferred=$q.defer();return $http({method:"POST",url:($window.toggleMap&&$window.toggleMap.felixBalanceOverTimeEntitledFeature?$window.envMap.DIGITAL_APP_URL:$window.envMap.DPCS_URL_VALUE+"/ftgw/dpcs/")+"balances-overtime/card/status/"+operation,data:$.param(data),withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),deferred.resolve(),deferred.promise}var saveCardState=function(tcmId){if(tcmId)return postRequest(JSON.stringify({tcmId:tcmId}),"save")},deleteCardState=function(tcmId){if(tcmId)return postRequest(JSON.stringify({tcmId:tcmId}),"delete")};return{saveCardState:saveCardState,deleteCardState:deleteCardState}}])}(window,window.angular),module.exports="botCardStateApiService"},{}],12:[function(require,module,exports){"use strict";module.exports="balanceOvertTimeTemplates",angular.module("balanceOvertTimeTemplates",[]).run(["$templateCache",function($templateCache){$templateCache.put("shared/directives/balanceOverTimeChart/template.html",'<div class="fid-card--block-chart" id="fid-card--block-chart-balance-over-time">\n</div>'),$templateCache.put("shared/directives/balanceOverTimeLedger/template.html",'<div class="narrative-summary-card--gain-loss-ror">\n    <div class="narrative-summary-card--section section-left js-narrative-bot--gain-loss">\n        <div class="narrative-summary-card--section-title">Today\'s Gain/Loss**</div>\n        <div class="narrative-summary-card--section-inner">\n            <span class="js-narrative-bot-gain-loss-value"></span>\n            <span class="js-narrative-bot-gain-loss-percent"></span>\n        </div>\n    </div>\n    <div class="narrative-summary-card--section section-right js-narrative-bot--ror">\n        <div class="narrative-summary-card--section-title">1-Year <a href="/ftgw/fbc/ofperformance/perfOverview" title="Click to view Rate of Return analysis on the Performance tab.">Rate of Return</a>***</div>\n        <div class="narrative-summary-card--section-inner inner-right">\n            <span class="js-narrative-bot-ror-value"></span>\n            <p class="as-of-time js-narrative-bot-as-of-time"></p>\n        </div>\n    </div>\n</div>'),$templateCache.put("shared/directives/balanceOverTimeStruct/template.html",'<!-- normal card -->\n<div class="fid-card fid-card--balance-over-time" ng-if="!isNarrativeCard">\n    <div class="fid-card--inset">\n        <div class="fid-card--header clearfix">\n            <h2 class="fid-card--title">Your Balance History</h2>\n        </div>\n\n        <div class="fid-card--block-container">\n            <div class="block-chart--range-selector">\n                <div class="range-button-container">\n                    <a class="range-button range-1M" href="javascript:void(0)" ng-class="{\'active\':duration === \'1M\'}" ng-click="changeTimeFrame(\'1M\')">1-Month</a>\n                    <a class="range-button range-1Y" href="javascript:void(0)" ng-class="{\'active\':duration === \'1Y\'}" ng-click="changeTimeFrame(\'1Y\')">1-Year</a>\n                    <a class="range-button range-2Y" href="javascript:void(0)" ng-class="{\'active\':duration === \'2Y\'}" ng-click="changeTimeFrame(\'2Y\')">2-Year</a>\n                    <a class="range-button range-YTD" href="javascript:void(0)" ng-class="{\'active\':duration === \'YTD\'}" ng-click="changeTimeFrame(\'YTD\')">Year-to-Date</a>\n                </div>\n            </div>\n\n            <div class="fid-card--block-chart" ng-class="{\'height-auto\': !loaded}" ng-if="!loaded && !error">\n                <div class=\'fid-card--loading-indicator\'></div>\n            </div>\n            <div class="balanceOverTimeChartDirective" ng-if="loaded && !error && balanceHis.balances.length > 1"></div>\n            <div class="fid-card--block-chart" ng-if="error || (loaded && balanceHis.balances.length <= 1)">\n                <div class="fid-card-block-chart--message-container">\n                    <p class="fid-card-block-chart--message">Balance data for the selected timeframe is not available.</p>\n                </div>\n            </div>\n\n            <div class="fid-card--footer">\n                <a class="js-bot-action-link" href="javascript:void(0);" ng-click="gotoActivityTab()">See how recent account activity may have affected your balance.</a>\n            </div>\n\n            <div class="fid-card--bot-inline-footnotes js-exclude-brklink-footer" ng-if="!balanceHis.includeBrkLinkStatus">\n                Showing <span class="fid-card--date-range" ng-if="loaded && !error && balanceHis.balances.length > 1">{{balanceHis.startDate}} - {{balanceHis.endDate}}</span>. Excludes Institutional Wealth Services, life insurance accounts, and stock plan accounts.<span ng-if="isHaveWIAccounts"> Workplace account balances may not reflect historical adjustments. For details, see transaction history in <a href="{{NBRETAIL_URL_VALUE}}/nbretail/navstation/navigation/dc/Balances">NetBenefits.</a></span>\n            </div>\n\n            <div class="fid-card--bot-inline-footnotes js-include-brklink-footer" ng-if="balanceHis.includeBrkLinkStatus">\n                Showing <span class="fid-card--date-range" ng-if="loaded && !error && balanceHis.balances.length > 1">{{balanceHis.startDate}} - {{balanceHis.endDate}}</span>. Includes linked BrokerageLink&reg; accounts and excludes Institutional Wealth Services, life insurance accounts, and stock plan accounts.<span ng-if="isHaveWIAccounts"> Workplace account balances may not reflect historical adjustments. For details, see transaction history in <a href="{{NBRETAIL_URL_VALUE}}/nbretail/navstation/navigation/dc/Balances">NetBenefits.</a></span>\n            </div>\n        </div>\n    </div>\n    <div class="last-point"></div>\n</div>\n\n<!-- narrative card -->\n<div class="card-wrapper card-layout--narrative-card-content" data-tcmId="{{tcmId}}" data-init-work-around="true" ng-if="isNarrativeCard">\n\n    <div class="botCardCollapseDirective"></div>\n\n    <div class="narrative-summary-card js-narrative-bot card-layout--card-wrapper narrative-summary-card-body clearfix">\n        <div class="narrative-summary-card-container">\n            <div class="narrative-summary-card--left">\n                <div class="narrative-summary-card--left--conclusion_statement js-narrative-bot-total-balance">\n                    Your total balance is <strong> <span ng-bind="portfolioFormattedBalance"></span> </strong> across <span ng-bind="totalAcctCountWithoutCreditCard"></span> <span ng-bind="totalAcctCountWithoutCreditCard <= 1 ? \' account.\' : \' accounts.\'"></span>\n                </div>\n            </div>\n            <div class="narrative-summary-card--right">\n                <div class="balanceOverTimeLedgerDirective" ng-if="totalTodayChangeValue !== undefined && totalTodayChangePercent !== undefined"></div>\n                <div class="narrative-summary-card-right--visual_element" ng-class="{\'bot-card---ror-clearfix\':totalTodayChangeValue !== undefined && totalTodayChangePercent !== undefined}">\n                    <!-- Balance Over Time card starts here -->\n                    <div class="fid-card fid-card--balance-over-time">\n                        <div class="fid-card--inset">\n                            <div class="fid-card--header narrative-summary-card--chart--header clearfix">\n                                <h2 class="fid-card--title">Your Balance History</h2>\n                            </div>\n\n                            <div class="fid-card--block-container">\n                                <div class="fid-card--block-chart" ng-class="{\'height-auto\': !loaded}" ng-if="!loaded && !error">\n                                    <div class=\'fid-card--loading-indicator\'></div>\n                                </div>\n                                <div class="balanceOverTimeChartDirective" ng-if="loaded && !error && balanceHis.balances.length > 1"></div>\n                                <div class="fid-card--block-chart" ng-if="error || (loaded && balanceHis.balances.length <= 1)">\n                                    <div class="fid-card-block-chart--message-container">\n                                        <p class="fid-card-block-chart--message">Balance data for the selected timeframe is not available.</p>\n                                    </div>\n                                </div>\n                                <div class="block-chart--range-selector">\n                                    <div class="range-button-container">\n                                        <a class="range-button range-1M" href="javascript:void(0)" ng-class="{\'active\':duration === \'1M\'}" ng-click="changeTimeFrame(\'1M\')">1-Month</a>\n                                        <a class="range-button range-1Y" href="javascript:void(0)" ng-class="{\'active\':duration === \'1Y\'}" ng-click="changeTimeFrame(\'1Y\')">1-Year</a>\n                                        <a class="range-button range-YTD" href="javascript:void(0)" ng-class="{\'active\':duration === \'YTD\'}" ng-click="changeTimeFrame(\'YTD\')">Year-to-Date</a>\n                                        <a class="range-button range-SLL" href="javascript:void(0)" ng-class="{\'active\':duration === \'SLL\'}" ng-click="changeTimeFrame(\'SLL\')" ng-if="isEnabledSinceLastLogin">Since Last Login</a>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="fid-card--footer">\n                                <p class="fid-card--date-range" ng-if="loaded && !error && balanceHis.balances.length > 1">{{balanceHis.startDate}} - {{balanceHis.endDate}}</p>\n                            </div>\n                        </div>\n\n                        <div class="last-point"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="narrative-summary-card--left">\n                <div class="narrative-summary-card--left--analysis_content js-narrative-bot-investment">\n                    <p ng-if="loaded && !error" class="investmentTextDirective"></p>\n                    <div ng-if="error && error !== true">We\'re sorry, there was a temporary system error.<br>Please try again later.</div>\n                </div>\n                <p class="narrative-summary-card--left--contextual_footnote" ng-if="isHaveWIAccounts">\n                    Workplace account balances may not reflect historical adjustments. For details, see transaction history in\n                    <a href="{{NBRETAIL_URL_VALUE}}/nbretail/navstation/navigation/dc/Balances">NetBenefits.</a>\n                </p>\n                <p class="narrative-summary-card--left--contextual_footnote fid-card--bot-inline-footnotes" ng-if="portfolioFormattedBalance != \'$0.00\'">\n                    Excludes Institutional Wealth Services, life insurance accounts, and stock plan accounts.\n                </p>\n                <div class="narrative-summary-card--left--call_to_action">\n                    <a class="js-bot-action-link" href="javascript:void(0);" ng-click="gotoActivityTab()">See how recent account activity may have affected your balance.</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),
$templateCache.put("shared/directives/cardCollapse/template.html",'<div class="narrative-summary-card card-layout--card-wrapper">\n    <div class="icon--plus-minus icon--plus-minus--narrative fid-card-controls--collapse-expand--narrative-ngapp expanded" ng-click="cardCollapseToggle()"></div>\n    <div class="card-layout-card-wrapper--work-around">\n        <div class="fid-card" ng-class="{\'expanded\': cardStatus === \'expand\', \'collapsed\': cardStatus !== \'expand\'}">\n            <div class="fid-card--header fid-card--inset clearfix" ng-class="{\'collapsed-header\': cardStatus !== \'expand\'}">\n                <h2 class="fid-card--title fid-card--collapsed-title" ng-bind="cardCollapseTitle"></h2>\n            </div>\n        </div>\n    </div>\n</div>')}])},{}],13:[function(require,module,exports){module.exports={appName:"ap115488AtBalanceOverTime",angular:!0,cors:!0,rethink:!1,sso:!1,xsrf:!1,staticMounts:[{path:"/stgw/digital/balances-overtime/",directory:"./client/public/dist/"},{path:"/dist",directory:"./client/public/dist"},{path:"/ftgw/dpcs/balances-overtime/dist",directory:"./client/public/dist"}]}},{}]},{},[3]);