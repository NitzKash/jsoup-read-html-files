(window._walkmeABWebpackJP_latest=window._walkmeABWebpackJP_latest||[]).push([[2],{22:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_MESSAGE_FUNC="WM_BOT_INIT_MESSAGE_FUNC",t.ADD_USER_ID="WM_BOT_ADD_USER_ID",t.ADD_BOT_SETTINGS="WM_BOT_ADD_BOT_SETTINGS",t.TRY_INIT_SESSION="WM_BOT_TRY_INIT_SESSION",t.GET_BOT_DATA_SUCCESS="GET_BOT_DATA_SUCCESS",t.GET_BOT_DATA_FAIL="GET_BOT_DATA_FAIL",t.GET_BOT_CONVERSATIONS_SUCCESS="GET_BOT_CONVERSATIONS_SUCCESS",t.GET_BOT_CONVERSATIONS_FAIL="GET_BOT_CONVERSATIONS_FAIL",t.BOT_STATUS="BOT_STATUS",t.CHANGE_INPUT_FOCUS="CHANGE_INPUT_FOCUS",t.PASS_ENV_ID="PASS_ENV_ID",t.PASS_API_BASE_URL="PASS_API_BASE_URL",t.INIT_SESSION_SUCCESS="INIT_SESSION_SUCCESS",t.INIT_SESSION_FAIL="INIT_SESSION_FAIL",t.INITIAL_DATA_LOAD_FAIL="INITIAL_DATA_LOAD_FAIL",t.RESTORE_DIALOG_SUCCESS="RESTORE_DIALOG_SUCCESS",t.RESTORE_DIALOG_FAIL="RESTORE_DIALOG_FAIL",t.ADD_SEPARATOR="ADD_SEPARATOR",t.SEND_MESSAGE_FAIL="SEND_MESSAGE_FAIL",t.GET_SUGGESTIONS_SUCCESS="GET_SUGGESTIONS_SUCCESS",t.GET_REST_SUGGESTIONS_START="GET_REST_SUGGESTIONS_START",t.CHOOSE_CONVERSATION_SUCCESS="CHOOSE_CONVERSATION_SUCCESS",t.GET_CONVERSATION_NODE_SUCCESS="GET_CONVERSATION_NODE_SUCCESS",t.CREATE_DIALOG_SUCCESS="CREATE_DIALOG_SUCCESS",t.FINISH_CONVERSATION="FINISH_CONVERSATION",t.BOT_ANALYTICS_EVENT="BOT_ANALYTICS_EVENT",t.BOT_READY="BOT_READY",t.BOT_CLOSE="BOT_CLOSE",t.BOT_SHOW="BOT_SHOW",t.BOT_HIDE="BOT_HIDE",t.BOT_SHOW_ANALYTICS="BOT_SHOW_ANALYTICS",t.WALK_ME_ACTION="WALK_ME_ACTION",t.START_WALKTHRU="START_WALKTHRU",t.START_SMARTWALKTHRU="START_SMARTWALKTHRU",t.WEBHOOK="WEBHOOK",t.ADD_MESSAGE="ADD_MESSAGE",t.ADD_IDS_TO_LAST_MESSAGE="ADD_IDS_TO_LAST_MESSAGE",t.REMOVE_ANSWER_SUCCESS="REMOVE_ANSWER_SUCCESS",t.REMOVE_ANSWER_FAIL="REMOVE_ANSWER_FAIL",t.FINISH_CURRENT_DIALOG_SUCCESS="FINISH_CURRENT_DIALOG_SUCCESS",t.FINISH_CURRENT_DIALOG_FAIL="FINISH_CURRENT_DIALOG_FAIL",t.RECALCULATE_SCROLL="RECALCULATE_SCROLL",t.FLUSH_STORE="FLUSH_STORE",t.ANALYTICS_CONVERSATION_SEARCH_TRY="ANALYTICS_CONVERSATION_SEARCH_TRY",t.ANALYTICS_ANSWER_QUESTION_TRY="ANALYTICS_ANSWER_QUESTION_TRY"},270:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(324)),o=r(n(191)),u="middleEndian",i="date";t.default=function(e,t){switch(e&&e.type){case i:return function(e,t){var n=new Date(e.value);if(!(0,o.default)(n))return e;var r=t;if(!r)switch(e.settings&&e.settings.format){case u:r="MM/DD/YYYY";break;default:r="DD/MM/YYYY"}return(0,a.default)(n,r)}(e,t);default:return e&&e.value}}},31:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WM_WRAPPER_BOT_CLASSNAME="wm-chatbot",t.WM_BOT_CLASSNAME="wm-chatbot-container";var n=t.IFRAME_ID="wm-action-bot-iframe-latest";t.LINK_TAG_ID=n+"-link",t.STYLE_TAG_ID=n+"-style",t.MAX_SUGGESTIONS_IN_VIEW=4,t.SCROLL_BTN_OFFSET_PX=40,t.MAX_USER_MESSAGE_LENGTH=7e3,t.SUGGESTIONS_LOADER_ID="loader",t.SUGGESTION_ITEM_HEIGHT=34,t.DEFAULT_SUGGESTION_ITEM_WIDTH=347,t.ANALYTICS_EVENTS={conversationsNodeServed:"conversationsNodeServed",conversationsQuestionAnswered:"conversationsQuestionAnswered",conversationsSearch:"conversationsSearch",conversationStarted:"conversationStarted",conversationEnded:"conversationEnded",chatOpened:"chatOpened",chatClosed:"chatClosed",endUserEngaged:"endUserEngaged"},t.DEFAULT_LABELS={buttonSendText:"Send",buttonStartOverText:"Start Over",conversationUnpublishedText:"The dialog has been restarted automatically because conversation has been changed since you used it last.",conversationUpdatedText:"The dialog has been restarted automatically because conversation has been changed since you used it last.",doneText:"Ok, we are done! Thank you. Anything else?",severalConversationsFoundText:"I found several options for you, please choose one.",suggestionsText:"Suggestions",chatInputPlaceholderText:"Type a message...",disabledInputText:"Please click to choose one of the above suggestions.",separatorNewText:"New",separatorTodayText:"Today",separatorYesterdayText:"Yesterday",separatorCompletedText:"Completed"},t.WM_DEPLOYABLE_IDS={launcher:3,actionBot:29},t.DEFAULT_ERROR_MESSAGE="Something went wrong. Please try again later.",t.DATE_FORMATS={littleEndian:"DD/MM/YYYY",middleEndian:"MM/DD/YYYY"},t.SALESFORCE_QUESTION_TYPE="connection_salesforce",t.MIN_SUGGESTIONS_CHUNK_SIZE=200,t.EXT_ACTIONBOT_ACTION="wm.cb.ACTIONBOT_ACTION"},565:function(e,t,n){"use strict";(function(e,r){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(571)),u=a(n(566)),i=a(n(568));t.default={init:function(){var t,n=(t=r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.default.init(t),i.default.init(),o.proxyClientStorageManager(),o.proxyJQuerySelectorRunner(),o.proxyActionStagesFactory(),o.proxyInputGenerator(),o.handleLauncherClick(),o.handleWalkMeRemove(),o.handleActionBotRunEvent();case 9:case"end":return e.stop()}},e,this)}),function(){var n=t.apply(this,arguments);return new e(function(t,r){return function a(o,u){try{var i=n[o](u),c=i.value}catch(e){return void r(e)}if(!i.done)return e.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});t(c)}("next")})});return function(){return n.apply(this,arguments)}}()}}).call(this,n(21).Promise,n(60))},566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(567),o=(r=a)&&r.__esModule?r:{default:r},u=["publicPath","apiBaseUrl","clientStorageManager","jQuerySelectorRunner","actionStagesFactory","inputGenerator","consts","settingsFile","wmjQuery","wmLogger","eventSender","eventsListener","userGuidContainer","endUsersManager","auditSourceManager","classWalkMeAPI","launchersModule","dataFile"],i=void 0;t.default={init:function(e){i=e;var t=Object.keys(e);u.forEach(function(e){-1===t.indexOf(e)&&o.default.error("Dependency "+e+" is required.")})},get deps(){return i},getUserGuid:function(){return i.userGuidContainer.getUserGuid()},getEndUserGuid:function(){return i.endUsersManager.getEndUserGuid()},getEnvId:function(){return i.auditSourceManager.get()},getSettingsFile:function(){return i.settingsFile.getSettingsFile()},startFlowById:function(e){return i.classWalkMeAPI.startFlowById(e)},getLaunchers:function(){var e=i.launchersModule&&i.launchersModule.getLaunchers();return e&&e.length?e:i.dataFile&&i.dataFile.Launchers},getWmAjax:function(){return window._walkmeInternals&&window._walkmeInternals.ctx.get("WmAjax")},isValidLauncher:function(e){try{return"none"===e.Settings.action.actionType}catch(e){}return!1},getPublicPath:function(){return i.publicPath},getApiBaseUrl:function(){return i.apiBaseUrl},getWmEventsTrigger:function(){return window._walkmeInternals&&window._walkmeInternals.ctx.get("EventsTrigger")},getTopContainer:function(){var e=window._walkmeInternals&&window._walkmeInternals.ctx.get("TopContainerProvider");return e&&e.getTopContainer()}}},567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(566),o=(r=a)&&r.__esModule?r:{default:r},u=n(269);t.default={log:function(e){o.default.deps.wmLogger.customerLog(e,u.LOG_LEVEL_STR_TO_NUM.INFO,u.LOG_FEATURE_NAME)},debug:function(e){o.default.deps.wmLogger.customerLog(e,u.LOG_LEVEL_STR_TO_NUM.DEBUG,u.LOG_FEATURE_NAME)},warn:function(e){o.default.deps.wmLogger.customerLog(e,u.LOG_LEVEL_STR_TO_NUM.WARN,u.LOG_FEATURE_NAME)},error:function(e){o.default.deps.wmLogger.customerLog(e,u.LOG_LEVEL_STR_TO_NUM.ERROR,u.LOG_FEATURE_NAME)}}},568:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);t.length>n;n++)r[n]=t[n];return r}return e(t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(566)),u=r(n(567)),i=r(n(575)),c=function(e){try{var t=o.default.deps.wmjQuery,n=t();if(!e)return n;t.merge(n,t(e));try{var r=window.frames;if(!r||!r.length)return n;[].concat(a(r)).forEach(function(r){var a=t(e,r.document);t.merge(n,a)})}catch(e){}return n}catch(e){return u.default.error(e),o.default.deps.wmjQuery()}};t.default={init:function(){!function(){try{var e=i.default.toString(),t=document.createElement("style"),n=document.createTextNode(e);t.classNames="walkme-to-remove",t.appendChild(n),document.head.appendChild(t);try{var r=window.frames;r&&r.length&&[].concat(a(r)).forEach(function(t){var n=document.createElement("style"),r=document.createTextNode(e);n.classNames="walkme-to-remove",n.appendChild(r),t.document.head.appendChild(n)})}catch(e){}}catch(e){u.default.error(e)}}()},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.type){case"launcher":!function(e){if(e){var t=o.default.deps.wmjQuery,n=c(".walkme-launcher-id-"+e);if(n.length&&!n.find(".wm-ab-launcher-spinner").length){var r=t("<div>");r.addClass("wm-ab-launcher-spinner"),n.append(r)}}}(e.id)}},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.type){case"launcher":!function(e){if(e){var t=c(".walkme-launcher-id-"+e);t.length&&t.find(".wm-ab-launcher-spinner").remove()}}(e.id)}},removeAll:function(){c(".wm-ab-launcher-spinner").remove()}}}).call(this,n(52).from)},569:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,u=n(566),i=(o=u)&&o.__esModule?o:{default:o};t.default={getItem:function(e){return i.default.deps.clientStorageManager.getData("wm-ab-"+e)},setItem:function(e,t){return i.default.deps.clientStorageManager.saveData("wm-ab-"+e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:600)},removeItem:function(e){var t;return(t=i.default.deps.clientStorageManager).removeData.apply(t,["wm-ab-"+e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return r(e)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})))},clear:function(){},sync:function(){var t,n=(t=a.mark(function t(){return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(function(e){i.default.deps.clientStorageManager.refreshGetData(null,function(){e()})}));case 1:case"end":return t.stop()}},t,this)}),function(){var n=t.apply(this,arguments);return new e(function(t,r){return function a(o,u){try{var i=n[o](u),c=i.value}catch(e){return void r(e)}if(!i.done)return e.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});t(c)}("next")})});return function(){return n.apply(this,arguments)}}()}}).call(this,n(21).Promise,n(52).from,n(60))},570:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUrlWOProtocol=t.resolveVariablesInText=t.isTextHasVariable=t.parseVarName=t.extractVariableName=void 0;var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(n(206)),u=r(n(569)),i=r(n(270)),c=/\${([^{]+)}/g,s=function(e){return e.replace(/\\/g,"")},l=t.extractVariableName=function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\${(.*)}/,"$1")},d=function(e){return function(e){return s(e).match(c)||[]}(e).map(function(e){return l(e)})},f=t.parseVarName=function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("@")};t.isTextHasVariable=function(){return Boolean(s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(c))},t.resolveVariablesInText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=d(e);if(!t.length)return e;var n=t.map(function(e){var t=f(e),n=a(t,2),r=n[1];return(0,i.default)(u.default.getItem(n[0]),r)}),r=s(e);return t.forEach(function(e,t){void 0!==n[t]&&(r=r.replace("${"+e+"}",n[t]))}),(0,o.default)(r)},t.getCurrentUrlWOProtocol=function(){var e=window.location;return e.host+e.pathname}},571:function(e,t,n){"use strict";(function(e,r,a){function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){s.default.deps.eventsListener.bind(e,t),v.push({key:e,func:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.proxyClientStorageManager=t.proxyJQuerySelectorRunner=t.proxyActionStagesFactory=t.proxyInputGenerator=t.handleWalkMeRemove=t.handleLauncherClick=t.handleActionBotRunEvent=void 0;var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=o(n(567)),s=o(n(566)),l=o(n(572)),d=o(n(574)),f=o(n(568)),_=o(n(270)),S=n(570),T=o(n(569)),E=n(269),p=!1,v=[];t.handleActionBotRunEvent=function(){return u("wmActionBotRun",function(e){d.default.open({type:E.INITIATOR_TYPES.event},e)})},t.handleLauncherClick=function(){var t,n,o=s.default.deps.consts.EVENTS.Launchers.LauncherClicked,i=s.default.getLaunchers(),_=i&&i.reduce(function(e,t){var n,a,o;return r(e,(o=t,(a=t.Id)in(n={})?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,n)),e},{});return u(o,(t=a.mark(function e(t,n){var r,o,u,i,S,T,v=n.launcherId;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p&&s.default.isValidLauncher(_[v])){e.next=4;break}return e.abrupt("return");case 4:if(p=!0,v){e.next=7;break}throw new Error("[Intergation: launcher click listener] Launcher ID isn't present in data");case 7:return e.next=9,(0,l.default)();case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(o=void 0===(r=e.t0.launchers)?{}:r,-1!==Object.keys(o).map(Number).indexOf(v)){e.next=19;break}return p=!1,e.abrupt("return");case 19:return f.default.show(u={type:E.INITIATOR_TYPES.launcher,id:v}),S=(i=o[v]||{}).bot,T=i.conversation,e.next=24,d.default.open(u,{botId:S,conversationId:T});case 24:p=!1,e.next=31;break;case 27:e.prev=27,e.t1=e.catch(0),p=!1,c.default.error(e.t1);case 31:case"end":return e.stop()}},e,void 0,[[0,27]])}),n=function(){var n=t.apply(this,arguments);return new e(function(t,r){return function a(o,u){try{var i=n[o](u),c=i.value}catch(e){return void r(e)}if(!i.done)return e.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});t(c)}("next")})},function(){return n.apply(this,arguments)}))},t.handleWalkMeRemove=function(){return u(s.default.deps.consts.EVENTS.BeforeWalkmeRemoved,function(){try{if(d.default.destroy(),s.default.deps.wmjQuery("script[src*=chatbot], script[src*=local]'").remove(),f.default.removeAll(),v&&v.length)for(;v.length;){var e=v.pop();s.default.deps.eventsListener.unbind(e.key,e.func)}["_walkmeABWebpackJP_latest","__wm-ab-core-js_shared__latest"].forEach(function(e){window.hasOwnProperty(e)&&delete window[e]})}catch(e){c.default.error(e)}})},t.proxyInputGenerator=function(){var e=s.default.deps.inputGenerator,t=e.text,n=e.selectByText;e.text=function(e,n,r,a,o){var u="";try{(0,S.isTextHasVariable)(n)&&(u=(0,S.resolveVariablesInText)(n))}catch(e){c.default.error(e)}return t(e,u||n,r,a,o)},e.selectByText=function(e,t,r){var a="";try{(0,S.isTextHasVariable)(t)&&(a=(0,S.resolveVariablesInText)(t))}catch(e){c.default.error(e)}return n(e,a||t,r)}},t.proxyActionStagesFactory=function(){var e=s.default.deps.actionStagesFactory,t=e.createActionStage;e.createActionStage=function(e){try{if(e&&"Redirect"===e.ActionType&&e.Settings&&e.Settings.actionArgs&&e.Settings.actionArgs.url){var n=e.Settings.actionArgs.url;(0,S.isTextHasVariable)(n)&&r(e.Settings.actionArgs,{url:(0,S.resolveVariablesInText)(n)})}}catch(e){c.default.error(e)}return t(e)}},t.proxyJQuerySelectorRunner=function(){var e=s.default.deps.jQuerySelectorRunner,t=e.run;e.run=function(e,n){var r="";try{(0,S.isTextHasVariable)(e)&&(r=(0,S.resolveVariablesInText)(e))}catch(e){c.default.error(e)}return t(r||e,n)}},t.proxyClientStorageManager=function(){var e=s.default.deps.clientStorageManager,t=e.getData;e.getData=function(e,n,r){try{if((0,S.isTextHasVariable)(e)){var a=(0,S.extractVariableName)(e),o=(0,S.parseVarName)(a),u=i(o,2),s=u[1],l=T.default.getItem(u[0]);if(l&&l.value)return(0,_.default)(l,s)}}catch(e){c.default.error(e)}return t(e,n,r)}}}).call(this,n(21).Promise,n(13).assign,n(60))},572:function(e,t,n){"use strict";(function(e,r){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,u,i=a(n(573)),c=a(n(566)),s=void 0,l=(o=r.mark(function e(){var t,n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=9;break}return t=c.default.getUserGuid(),n=c.default.getEnvId(),a=c.default.getSettingsFile(),e.next=6,(0,i.default)({url:"/chatbot/settings",baseURL:a.PlayerApiServer,headers:{"x-wmab-wmenv":n},params:{userGuid:t}});case 6:s=e.sent.data;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}},e,void 0)}),u=function(){var t=o.apply(this,arguments);return new e(function(n,r){return function a(o,u){try{var i=t[o](u),c=i.value}catch(e){return void r(e)}if(!i.done)return e.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});n(c)}("next")})},function(){return u.apply(this,arguments)});t.default=l}).call(this,n(21).Promise,n(60))},573:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(566),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(t){var n=t.type,r=void 0===n?"GET":n,a=t.baseURL,u=t.url,i=t.headers,c=t.params;return new e(function(e,t){try{o.default.getWmAjax().execute({type:r,url:a+u,data:c,dataType:"json",headers:i,success:function(t){e({data:t})},error:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t(n)}})}catch(e){t(e)}})}}).call(this,n(21).Promise)},574:function(e,t,n){"use strict";(function(e,r,a,o){function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new r(function(e,n){return function a(o,u){try{var i=t[o](u),c=i.value}catch(e){return void n(e)}if(!i.done)return r.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var c,s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=e||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=u(n(566)),f=u(n(568)),_=u(n(567)),S=u(n(569)),T=u(n(577)),E=n(570),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(22)),v=n(31),A=n(269),h=void 0,I=void 0,O=void 0,g=!1,y=!1,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return e.type===t.type&&e.id===t.id}catch(e){return!1}},N=(c=i(a.mark(function t(u,c){var N,w,L,C;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,N=c.botId,L=void 0===(w=c.additionalSettings)?{}:w,u||_.default.error("[DIU: Open] Initiator is mandatory"),C=u.type!==A.INITIATOR_TYPES.event&&m(h,u)&&g,h=u,I){t.next=13;break}return t.next=8,new r(function(e){n.e(3).then(function(){e(n(578))}.bind(null,n)).catch(n.oe)});case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={};case 11:I=new(0,t.t0.default);case 13:if(y){t.next=25;break}return t.next=16,I.init({userGuid:d.default.getUserGuid(),walkmeEndUserId:d.default.getEndUserGuid(),envId:d.default.getEnvId(),apiBaseUrl:d.default.getApiBaseUrl(),publicPath:d.default.getPublicPath(),uuid:S.default.getItem("euid")});case 16:S.default.setItem("euid",t.sent.uuid,63072e3),y=!0,I.on(p.BOT_SHOW,function(){try{f.default.remove(h),g=!0,L.previewMode&&d.default.deps.eventsListener.emit(p.BOT_SHOW)}catch(e){_.default.error(e)}}),I.on(p.BOT_CLOSE,function(){try{f.default.remove(h),I.hide(),g=!1,L.previewMode&&d.default.deps.eventsListener.emit(p.BOT_CLOSE)}catch(e){_.default.error(e)}}),I.on(p.BOT_ANALYTICS_EVENT,function(e){var t=e.type,n=e.data,r=e.options;try{if(!h||h.type!==A.INITIATOR_TYPES.launcher)return;var a=l({},r.skipPInit?null:{pInit:{id:h.id,type:v.WM_DEPLOYABLE_IDS.launcher,appType:3}},n);(0,T.default)(t,a)}catch(e){_.default.error(e)}}),I.on(p.WALK_ME_ACTION,function(){var t=i(a.mark(function t(n){var r,u,i,c,l,f,T;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(L.previewMode&&d.default.deps.eventsListener.emit(p.WALK_ME_ACTION,n),t.prev=1,u=(r=n.settings).app,i=r.id,l=void 0===(c=n.answers)?{}:c,u!==p.START_WALKTHRU&&u!==p.START_SMARTWALKTHRU){t.next=12;break}f=void 0;try{f=d.default.getWmEventsTrigger().sync(v.EXT_ACTIONBOT_ACTION,l)}catch(e){}return T={type:"string",value:(0,E.getCurrentUrlWOProtocol)()},e(l,{returnUrl:l.returnUrl||T},f||{}),o(l).forEach(function(e){var t=s(e,2);return S.default.setItem(t[0],t[1])}),t.next=11,S.default.sync();case 11:d.default.startFlowById(i);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),_.default.error(t.t0);case 17:case"end":return t.stop()}},t,void 0,[[1,14]])}));return function(){return t.apply(this,arguments)}}()),I.on(p.INITIAL_DATA_LOAD_FAIL,function(){try{f.default.remove(h),O=null}catch(e){_.default.error(e)}});case 25:if(!N||C){t.next=32;break}return I.hide(),t.next=29,I.open(c,O===N);case 29:O=N,t.next=35;break;case 32:I.hide(),f.default.remove(h),g=!1;case 35:t.next=40;break;case 37:t.prev=37,t.t1=t.catch(0),f.default.remove(h);case 40:case"end":return t.stop()}},t,void 0,[[0,37]])})),function(){return c.apply(this,arguments)});t.default={open:N,destroy:function(){I&&(I.close(),I=null)}}}).call(this,n(13).assign,n(21).Promise,n(60),n(13).entries)},575:function(e,t,n){(e.exports=n(576)(!1)).push([e.i,".wm-ab-launcher-spinner {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.wm-ab-launcher-spinner::before {\n  animation: wm-ab-spin 1.5s linear infinite;\n  border: 2px solid #f3f3f3;\n  border-radius: 50%;\n  border-top: 2px solid transparent;\n  content: '';\n  height: 18px;\n  left: calc(50% - 9px);\n  position: absolute;\n  top: calc(50% - 9px);\n  width: 18px;\n}\n\n@keyframes wm-ab-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n",""])},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(566),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e,t){return o.default.deps.eventSender.postEvent(e,t)}}}]);