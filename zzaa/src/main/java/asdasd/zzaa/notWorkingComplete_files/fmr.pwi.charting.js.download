function Point(t,e){if(null===t||void 0===t)throw new UndefinedOrNullException("x");if(null===e||void 0===e)throw new UndefinedOrNullException("y");if(isNaN(t)||isNaN(e)){var i=new ArgumentException;throw i.message="The parameters passed in should be positive number",i}this.x=Math.floor(t)+.5,this.y=Math.floor(e)+.5,this.rawX=t,this.rawY=e}function PlotObject(){this._pane=null,this._element=null}function Rectangle(){PlotObject.call(this),this.setColor(ObjectFactory.createInstance(tinycolor,"#CFCFCF"))}function Axis(){this._length,this._minimum,this._maximum,this._calculator=ObjectFactory.createInstance(YAxisTickCalculator)}function YAxis(){Axis.call(this),this._minMaxManager=ObjectFactory.createInstance(AxisMinMaxManager,this),this._calculatorManager=ObjectFactory.createInstance(TicksCalculatorManager),this._algorithmManager=ObjectFactory.createInstance(AxisAlgorithmManager),this._algorithmManager.register(ObjectFactory.createInstance(LinearAxisAlgorithm),0),this.getAxisAlgorithmManager()}function CategoryXAxisDataSource(){DataSource.call(this,"XAxisData","XAxisData"),this._values=[]}function CategoryXAxis(){this._values=[],this._spacing=0,this._length=0,this._minIndex=-1,this._maxIndex=-1}function XAxisLabel(t,e,i){this.date=t,this.style=e,this.coordinate=i}function AxisMinMaxManager(t){this._axis=t,this._sources=[]}function LineSeries(t){if(PlotObject.call(this),!t)throw new UndefinedOrNullException("dataSource","dataSource must be defined");this._dataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this),this.setColor(tinycolor("black")),this.setLineWidth(1),this.setLineStyle(Fmr_Pwi_Charting_LineStyle.Solid),this.setOpacity(1)}function HistogramSeries(t){PlotObject.call(this),this._dataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this),this.setColor(tinycolor("rgba(255,255,255,1)")),this.setOpacity(1)}function DotsSeries(t){if(PlotObject.call(this),!t)throw new UndefinedOrNullException("dataSource","dataSource must be defined");this._dataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this),this.setColor(tinycolor("rgba(255,255,255,0.8)")),this._radius=2}function DualSeries(t,e){PlotObject.call(this),this._upDataSource=t,this._lowDataSource=e,EventBus.on(t,"DataSource:datachanged",this.update,this),EventBus.on(e,"DataSource:datachanged",this.update,this),this.setColor(tinycolor("rgba(255,255,0,1)")),this.setLineStyle(Fmr_Pwi_Charting_LineStyle.Solid),this.setLineWidth(1),this.setOpacity(.5)}function DragEventArgs(t,e,i){EventArgs.call(this),this.pane=t,this.x=e,this.y=i,this.xValue,this.yValue,this.plotObject}function ChartPane(t){if(!t)throw new UndefinedOrNullException("id");this._id=t,this._xAxis,this._yAxis,this._yAxisLabels=[],this._yAxisLeft,this._yAxisLeftLabels=[],this._dualAxisCompareMode="undefined"!=typeof Fmr_AdvancedChart_DualAxisCompareMode?Fmr_AdvancedChart_DualAxisCompareMode.Percent:void 0,this._state=Fmr_Pwi_Charting_ChartPaneState.Normal,this._plotObjects=[],this._isUpdating=!1,this._updateCounter=0,this._maincanvasWidth=0,this._maincanvasHeight=0,this._canvas=null,this._headerLabels=[],this._height=ChartPane.defaultHeight,this.dragStartEvent=ObjectFactory.createInstance(EventHandlerChain,this,"ChartPane:dragstart"),this._tags=[]}function Chart(){this._isUpdating=!1,this._updateCounter=0,this._panes=[],this.dragStartEvent=ObjectFactory.createInstance(EventHandlerChain,this,"Chart:dragstart"),this._trackballDefaultVisibility=Trackball.defaultVisible}function AggregatedPlotObject(){this._plotObjects=[],this._pane}function TextPlotObject(){PlotObject.call(this),this._xOffset=0,this._yOffset=0,this.setFontSize(12),this.setFontFamily("Helvetica"),this.setFontWeight("normal")}function MountainSeries(t,e){PlotObject.call(this),this._dataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this),this.setColor(e||tinycolor("#0F57C2")),this.setZIndex(50)}function AxisMinMaxSource(t){this.setPriority(0),this._forceApply=!1,this._dataSource=t,EventBus.on(t,"DataSource:datachanged",this.onDataSourceDataChanged,this)}function SingleValueAxisMinMaxSource(t){AxisMinMaxSource.call(this,t)}function DataSeriesAxisMinMaxSource(t,e){AxisMinMaxSource.call(this,t),this._xAxis=e,EventBus.on(this._xAxis,"Axis:scalechanged",this.onAxisScaleChanged,this)}function CenterAlignAxisMinMaxSource(){AxisMinMaxSource.call(this,{}),this.setPriority(900)}function RangeAxisMinMaxSource(){AxisMinMaxSource.call(this,{})}function FlagDataSource(){this._flag=!1}function XAxisTicksDataSource(t,e){if(!t)throw new UndefinedOrNullException("axis");if(!e)throw new UndefinedOrNullException("tickCalculator");this._axis=t,this._tickCalculator=e,this._ticks=this._tickCalculator.calculate(this._axis),EventBus.on(this._axis,"Axis:scalechanged",function(){this._ticks=this._tickCalculator.calculate(this._axis),EventBus.trigger(this,"DataSource:datachanged")},this)}function YAxisTicksDataSource(t,e,i){this._axis=t,this._ticksCalculatorManager=e,this._initialized=!1,this._baseYAxisTicksDataSource=i,this.getTicks()}function CustomizedYAxisTicksDataSource(){DataSource.call(this,"CustomizedYAxisTicks"),this._ticks=[]}function AxisTicksMinMaxSource(t){AxisMinMaxSource.call(this,t),this.setPriority(999)}function HorizontalLine(t,e,i,n,a){this._price=t,this.setOpacity(i||.5),this.setColor(e||tinycolor("rgb(159, 159, 159)")),this.setLineWidth(n||1),this.setLineStyle(a||Fmr_Pwi_Charting_LineStyle.Solid),PlotObject.call(this)}function VerticalLine(t,e,i,n,a){null===t&&(t=void 0),this._date=t,this.setOpacity(i||.5),this.setColor(e||tinycolor("rgb(159, 159, 159)")),this.setLineWidth(n||1),this.setLineStyle(a||Fmr_Pwi_Charting_LineStyle.Solid),PlotObject.call(this)}function VerticalGridLines(t,e){PlotObject.call(this),this._ticksDataSource=t,this._flagDataSource=e,this.setOpacity(.5),this.setColor(tinycolor("#DDDDDD")),this.setLineWidth(1),this.setLineStyle(Fmr_Pwi_Charting_LineStyle.Solid),this.setZIndex(10),EventBus.on(t,"DataSource:datachanged",this.update,this),EventBus.on(e,"DataSource:datachanged",this.update,this)}function HorizontalGridLines(t){PlotObject.call(this),this.setOpacity(.5),this.setColor(tinycolor("#DDDDDD")),this._topBottomColor=tinycolor("#CCCCCC"),this.setLineWidth(1),this.setLineStyle(Fmr_Pwi_Charting_LineStyle.Solid),this.setZIndex(10),this._ticksDataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this)}function YAxisTick(t){this._value=t}function YAxisTickCalculator(){}function YAxisLabel(t,e){this.directiveName=e||"y-axis-label",this._yAxis=t,this._value,this._coord,this._valueIsSet=!1,this.minDecimals=2,this.maxDecimals=4,this.textColor="#000",this.backgroundColor=void 0,this.zIndex=0}function YAxisLabels(t,e,i){YAxisLabel.call(this,t,i||"y-axis-labels"),this._ticksDataSource=e,this.removeFirstAndLast(!0)}function HeaderLabel(t,e){if(!t)throw new UndefinedOrNullException("directiveName");e&&(this.label=e),Object.defineProperty(this,"directiveName",{value:t,writable:!1})}function XAxisController(t){function e(){var e=t.axis;t.ticks=[];var i=e.getTickCalculator().calculate(e);if(i&&i.length){for(var n=[],a=0;a<i.length;a++){var r=i[a];r.setCoordinate(e.toCoordinate(r.getDate())),n.push(r)}t.ticks=n}}t.$watch("axis",function(t){t&&(EventBus.on(t,"Axis:scalechanged",e),e())}),t.$on("$destroy",function(){EventBus.off(t.axis,"Axis:scalechanged",e)})}function IndicatorModifyWindowController(t){t.windowService=ObjectFactory.createInstance(WindowService)}function TicksCalculatorManager(){this._calculators=[]}function LinearAxisAlgorithm(){}function OffsetLinearAxisAlgorithm(){LinearAxisAlgorithm.call(this),this._offset=0}function AxisAlgorithmManager(){this._algorithms=[]}function LogarithmicAxisAlgorithm(){}function WatermarkFontScaler(){}function Watermark(t,e,i,n,a,r,s,o,c){PlotObject.call(this),this._symbol=t||"",this._description=e||"",this.setOpacity(n||1),this.setColor(a||tinycolor("#dddddd")),this._baseSymbolFontSize=r||80,this._baseDescriptionFontSize=s||20,this._family=o||"Helvetica",this._weight=c||"bold",this._showDescription=void 0===i||i,this.setZIndex(5)}function Trackball(t,e){if(!t)throw new UndefinedOrNullException("trackballDataSource");if(!e)throw new UndefinedOrNullException("dataSource");PlotObject.call(this),this._visible=Trackball.defaultVisible,this._radius=Trackball.defaultRadius,this.setColor(Trackball.defaultFillColor),this._borderWidth=1,this._borderColor=tinycolor("#FFFFFF"),this.setZIndex(200),this.hideIfNoData=Trackball.defaultHideIfNoData,this._dataSource=e,this._trackballDataSource=t,EventBus.on(t,"DataSource:datachanged",this.update,this),EventBus.on(e,"DataSource:datachanged",this.update,this)}function LastTickLabel(t,e,i,n){var a=function(t,e){if(!t)throw new UndefinedOrNullException(e)};a(t,"dataSource"),a(e,"xAxis"),a(i,"yAxis"),this._dataSource=t,this._xAxis=e,YAxisLabel.call(this,i,n||"y-axis-marker"),this.getValue()}function TrackballDataSource(){DataSource.call(this,"Trackball"),this._xValue=null}function MessageText(t,e,i,n,a,r){PlotObject.call(this),this._message=t||"",this.setOpacity(e||1),this.setColor(i||tinycolor("#000000")),this._fontSize=n||12,this._family=a||"Helvetica",this._weight=r||"normal",this.setZIndex(1e3)}function LineSeriesWithGaps(t){LineSeries.call(this,t),this._dataSource=t}function DataSeriesLabel(t,e,i,n){HeaderLabel.call(this,t),this.label=e,this._trackballDataSource=i,this._seriesDataSource=n,this.showLastValue=!1,i&&n&&(this.update(),EventBus.on(i,"DataSource:datachanged",this.update,this),EventBus.on(n,"DataSource:datachanged",this.update,this))}function YAxisLeftMinMaxManager(t){AxisMinMaxManager.call(this,t),this._yAxisLeft=t,this._sources=[],this._comparisonMinMaxSource,this._cachedSources=[]}function YAxisTickSynchronizedCalculator(){YAxisTickCalculator.call(this)}var chartingModule=angular.module("fmr.pwi.charting",["fmr.pwi.commons"]);PlotObject.prototype=function(){function t(){return null}function e(){}function i(t){if(!t)throw new UndefinedOrNullException("pane");this._pane=t,this.update()}function n(){if(this._pane){var t=this._pane,e=t.getXAxis().getLength(),i=t.getYAxis().getLength();e>0&&i>0&&(this._element||(this._element=this.createElement()),this._element&&(this.updateElement(),this._element.zIndex=this.getZIndex(),t.addElement(this._element)))}}function a(){this._pane&&this._pane.removePlotObject(this),this._pane=null}function r(){this._pane&&this._element&&this._pane.removeElement(this._element),this._element=null,this._pane=null}function s(t){if(!t)throw new UndefinedOrNullException("color");this._color=t}function o(){return this._color}function c(){return this._backgroundColor}function h(t){this._backgroundColor=t}function l(t){if(void 0===t||null===t)throw new UndefinedOrNullException("opacity");if(t<0||t>1||isNaN(t))throw new ArgumentOutOfRangeException("opacity");this._opacity=t}function u(){return this._opacity}function g(t){if(void 0===t||null===t)throw new UndefinedOrNullException("lineWidth");if(t<0||isNaN(t))throw new ArgumentOutOfRangeException("lineWidth");this._lineWidth=t}function f(){return this._lineWidth}function d(t){if(void 0===t||null===t)throw new UndefinedOrNullException("lineStyle");if(t<Fmr_Pwi_Charting_LineStyle.Solid||t>Fmr_Pwi_Charting_LineStyle.Histogram||isNaN(t))throw new ArgumentOutOfRangeException("lineStyle");this._lineStyle=t}function _(){return this._lineStyle}function p(t){this._fontSize=t}function x(){return this._fontSize}function v(t){this._fontFamily=t}function m(){return this._fontFamily}function y(t){this._fontWeight=t}function b(){return this._fontWeight}function A(t){this._zIndex=t}function M(){return void 0===this._zIndex||null===this._zIndex?100:this._zIndex}function S(){}function C(){}function O(){return this._yAxis?this._yAxis:this._pane?this._pane.getYAxis():void 0}function L(t){var e=this._yAxis;e&&EventBus.off(e,"Axis:scalechanged",this.update,this),this._yAxis=t,this._pane&&e!==t&&this.update(),t&&EventBus.on(t,"Axis:scalechanged",this.update,this)}return{createElement:t,updateElement:e,getColor:o,setColor:s,getBackgroundColor:c,setBackgroundColor:h,getOpacity:u,setOpacity:l,getLineWidth:f,setLineWidth:g,getLineStyle:_,setLineStyle:d,getFontSize:x,setFontSize:p,getFontFamily:m,setFontFamily:v,getFontWeight:b,setFontWeight:y,setZIndex:A,getZIndex:M,plot:i,update:n,remove:a,removePlot:r,hitTest:S,destroy:C,getYAxis:O,setYAxis:L}}(),PlotObject.prototype.constructor=PlotObject,Rectangle.prototype=function(){function t(){var t=this._pane.getXAxis(),e=this._pane.getYAxis(),i=Math.floor(t.getLength()),n=Math.floor(e.getLength()),a=this.getColor().toHexString();return{width:i,height:n,color:a}}function e(){var e=t.call(this);return ObjectFactory.createInstance(fabric.Rect,{fill:null,stroke:e.color,strokeWidth:1,left:0,top:0,width:e.width,height:e.height})}function i(){var e=t.call(this),i=this._element;i.stroke=e.color,i.width=e.width,i.height=e.height}var n=Object.create(PlotObject.prototype);return n.createElement=e,n.updateElement=i,n}(),Rectangle.prototype.constructor=Rectangle;var Fmr_Pwi_Charting_BarStyle={OHLC:0,HollowCandlestick:1,FilledCandlestick:2,StandardCandlestick:3},Fmr_Pwi_Charting_BarTrend={UP:"up",DOWN:"down"};Axis.prototype=function(){function t(t,e){if(void 0===t||null===t)throw new UndefinedOrNullException(e)}function e(e){t(e,"length");var i=this._length;this._length=e,i!==e&&(EventBus.trigger(this,"Axis:lengthchanged"),void 0!==this._maximum&&void 0!==this._minimum&&EventBus.trigger(this,"Axis:scalechanged"))}function i(){return this._length}function n(e,i){if(t(e,"min"),t(i,"max"),i<e)throw new ArgumentException("max","the max value should be less than min value");var n=this._minimum,a=this._maximum;this._minimum=e,this._maximum=i,(n!==e||a!==i)&&EventBus.trigger(this,"Axis:minmaxchanged")}function a(){return this._minimum}function r(){return this._maximum}function s(t){this._calculator=t}function o(){return this._calculator}function c(){return void 0!==this._length&&void 0!==this._minimum&&void 0!==this._maximum}return{setLength:e,getLength:i,setMinMax:n,getMinValue:a,getMaxValue:r,setTickCalculator:s,getTickCalculator:o,isReady:c}}(),Axis.prototype.constructor=Axis,YAxis.prototype=function(){function t(){return this._minMaxManager}function e(){return this._calculatorManager}function i(){return this._eventRegistered||(this._eventRegistered=!0,EventBus.on(this._algorithmManager,"AxisAlgorithmManager:algorithmchanged",r,this)),this._algorithmManager}function n(t){return this._algorithmManager.getAlgorithm().toCoordinate(t,this)}function a(t){return this._algorithmManager.getAlgorithm().toValue(t,this)}function r(){EventBus.trigger(this,"Axis:scalechanged")}function s(){EventBus.off(this._algorithmManager,"AxisAlgorithmManager:algorithmchanged",r,this)}var o=Object.create(Axis.prototype);return o.getMinMaxManager=t,o.getTicksCalculatorManager=e,o.getAxisAlgorithmManager=i,o.toCoordinate=n,o.toValue=a,o.destroy=s,o}(),YAxis.prototype.constructor=YAxis,CategoryXAxisDataSource.prototype=function(){function t(t,e){if(this._values.length>0&&void 0!==t&&void 0!==e){var i=ArrayExtensions.quickSearchGreater(this._values,t,function(t){return t}),n=ArrayExtensions.quickSearchSmaller(this._values,e,function(t){return t});this._actualMin=this._values[i],this._actualMax=this._values[n]}else this._actualMin=t,this._actualMax=e}function e(t){t||(t=[]),t.length<=0&&this._values.length<=0||(this._values=t.slice(0),this._actualMin=this._values[0],this._actualMax=this._values[this._values.length-1],EventBus.trigger(this,"DataSource:datachanged",{valuesChanged:!0,minMaxChanged:!0}))}function i(e,i){var n=this._actualMin,a=this._actualMax;t.call(this,e,i),(n!==this._actualMin||a!==this._actualMax)&&EventBus.trigger(this,"DataSource:datachanged",{valuesChanged:!1,minMaxChanged:!0})}function n(){return this._values}function a(){return this._actualMin}function r(){return this._actualMax}var s=Object.create(DataSource.prototype);return s.setValues=e,s.getValues=n,s.setMinMax=i,s.getMinValue=a,s.getMaxValue=r,s}(),CategoryXAxisDataSource.prototype.constructor=CategoryXAxisDataSource,CategoryXAxis.prototype=function(){function t(){var t=this._length;this._minIndex===-1||this._maxIndex===-1?this._spacing=0:this._spacing=t/(this._maxIndex-this._minIndex+1)}function e(){this._values.length>0&&void 0!==this._min&&void 0!==this._max?(this._minIndex=ArrayExtensions.quickSearchGreater(this._values,this._min,function(t){return t}),this._maxIndex=ArrayExtensions.quickSearchSmaller(this._values,this._max,function(t){return t}),this._actualMin=this._values[this._minIndex],this._actualMax=this._values[this._maxIndex]):(this._minIndex=-1,this._maxIndex=-1,this._actualMin=this._min,this._actualMax=this._max)}function i(e){e||(e=[]),e.length<=0&&this._values.length<=0||(this._values=e.slice(0),this._minIndex=0,this._maxIndex=this._values.length-1,this._actualMin=this._values[this._minIndex],this._actualMax=this._values[this._maxIndex],t.call(this),this._length&&EventBus.trigger(this,"Axis:scalechanged"))}function n(i,n){var a=this._actualMin,r=this._actualMax;this._min=i,this._max=n,this._actualMin=i,this._actualMax=n,e.call(this),t.call(this),(a!==this._actualMin||r!==this._actualMax)&&EventBus.trigger(this,"Axis:scalechanged")}function a(t,e){this._invalidMin=t,this._invalidMax=e}function r(){return this._values}function s(){return this._spacing}function o(){return this._actualMin}function c(){return this._actualMax}function h(e){var i=this._spacing;this._length=e,t.call(this),i!==this._spacing&&EventBus.trigger(this,"Axis:scalechanged")}function l(){return this._length}function u(t){if(this._spacing<=0)return 0;if(t<this._values[0])return(-this._minIndex-1)*this._spacing;if(t>this._values[this._values.length-1])return(this._values.length-this._minIndex+1)*this._spacing;var e=ArrayExtensions.quickSearchGreater(this._values,t,function(t){return t});return(e-this._minIndex)*this._spacing+this._spacing/2}function g(t){if(this._spacing<=0)return this._invalidMax;var e=Math.floor(NumberExtensions.round(t/this._spacing,10));return t===this._length&&(e-=1),e+this._minIndex<0?this._invalidMin:e+this._minIndex>=this._values.length?this._invalidMax:this._values[e+this._minIndex]}function f(t){return t>=this._actualMin&&t<=this._actualMax}function d(){return this._spacing>0}return{setLength:h,getLength:l,setValues:i,getValues:r,setMinMax:n,setOutOfRangeMinMax:a,getMinValue:o,getMaxValue:c,toCoordinate:u,toValue:g,isVisible:f,getSpacing:s,isReady:d}}(),CategoryXAxis.prototype.constructor=CategoryXAxis,XAxisLabel.prototype=function(){function t(t){this.date=t}function e(){return this.date}function i(t){this.style=t}function n(){return this.style}function a(t){this.coordinate=t}function r(){return this.coordinate}return{setDate:t,getDate:e,setStyle:i,getStyle:n,setCoordinate:a,getCoordinate:r}}(),XAxisLabel.prototype.constructor=XAxisLabel;var Fmr_Pwi_Charting_XAxisLabelStyle={Hour:0,Day:1,Week:2,ShortMonth:3,Month:4,ShortYear:5,Year:6,DayMonth:7,ExtendedHour:8};AxisMinMaxManager.prototype=function(){function t(t,e,i){var n=t;return n&&!i?(n.min=Math.min(n.min,e.min),n.max=Math.max(n.max,e.max)):n=ObjectFactory.createInstance(Range,e.min,e.max),n}function e(e,i,n){if(!i)return e;var a=t(e,i,n);return this._axis.setMinMax(a.min,a.max),a}function i(t){if(this._recalculating)return void(t&&(this._restart=this._sources.indexOf(t)<=this._index));this._recalculating=!0,this._restart||(this._oldMin=this._axis.getMinValue(),this._oldMax=this._axis.getMaxValue()),this._restart=!1;var n,a=this._axis.getLength(),r=[];for(this._index=0;this._index<this._sources.length;this._index++){if(this._restart)return this._recalculating=!1,void i.call(this);var s=this._sources[this._index],o=s.getMinMax(this._axis,r);r.push(o),n=e.call(this,n,o,s.forceApply())}this._index=-1,this._recalculating=!1,a&&(this._oldMin!==this._axis.getMinValue()||this._oldMax!==this._axis.getMaxValue())&&EventBus.trigger(this._axis,"Axis:scalechanged")}function n(t,e){for(var i=t.length;i>0;i--)if(e.getPriority()>=t[i-1].getPriority())return i;return 0}function a(t){commonsModule.$.isArray(t)||(t=[t]);var e=t.length;if(!(e<=0)){for(var a=0;a<e;a++){var r=t[a];this._sources.splice(n(this._sources,r),0,r),EventBus.on(r,"AxisMinMaxSource:minmaxchanged",i,this)}i.call(this)}}function r(t){commonsModule.$.isArray(t)||(t=[t]);var e=t.length;if(!(e<=0)){for(var n=!1,a=0;a<e;a++){var r=t[a],s=this._sources.indexOf(r);s>=0&&(EventBus.off(r,"AxisMinMaxSource:minmaxchanged",i,this),this._sources.splice(s,1),n=!0)}n&&i.call(this)}}return{register:a,unregister:r,calculateMinMax:t,getIndex:n,recalculate:i}}(),AxisMinMaxManager.prototype.constructor=AxisMinMaxManager,LineSeries.prototype=function(){function t(){EventBus.off(this._dataSource,"DataSource:datachanged",this.update,this)}function e(){return ObjectFactory.createInstance(fabric.Group)}function i(){var t=this._element;t.forEachObject(function(e){t.remove(e)});var e=this._dataSource.getDataSeries(),i=this.getColor(),n=this.getLineStyle(),a=this._pane.getYAxisLeft()&&this._dataSource instanceof ComparisonDataSource&&this._dataSource._dualAxisCompareMode===Fmr_AdvancedChart_DualAxisCompareMode.Dual?this._pane.getYAxisLeft():this._pane.getYAxis();if(n===Fmr_Pwi_Charting_LineStyle.Histogram){var r=GraphicsHelper.generateHistogramSeries(this._pane.getXAxis(),a,e,i,this.getOpacity(),this._histogramVaseValue);r&&r.getObjects().forEach(function(e){t.add(e)})}else{var s=GraphicsHelper.generateLineSeries(this._pane.getXAxis(),a,e,i,this.getLineWidth(),n);s&&t.add(s)}}function n(t){this._histogramVaseValue=t}var a=Object.create(PlotObject.prototype);return a.createElement=e,a.updateElement=i,a.destroy=t,a.setHistogramBaseValue=n,a}(),LineSeries.prototype.constructor=LineSeries,HistogramSeries.prototype=function(){function t(){return ObjectFactory.createInstance(fabric.Group)}function e(){var t=this._element;t.forEachObject(function(e){t.remove(e)});var e=GraphicsHelper.generateHistogramSeries(this._pane.getXAxis(),this.getYAxis(),this._dataSource.getDataSeries(),this.getColor(),this.getOpacity(),0);e&&e.forEachObject(function(e){t.add(e)})}function i(){EventBus.off(this._dataSource,"DataSource:datachanged",this.update,this)}var n=Object.create(PlotObject.prototype);return n.createElement=t,n.updateElement=e,n.destroy=i,n}(),HistogramSeries.prototype.constructor=HistogramSeries,DotsSeries.prototype=function(){function t(t){var e=this._pane,i=e.getXAxis(),n=e.getYAxis(),a=this._dataSource.getDataSeries();if(a)for(var r=0;r<a.length;r++){var s=a[r],o=i.toCoordinate(s.date),c=n.toCoordinate(s.value),h=ObjectFactory.createInstance(fabric.Circle,{radius:this._radius,fill:this.getColor().toRgbString(),left:o,top:c});t.add(h)}}function e(){return ObjectFactory.createInstance(fabric.Group)}function i(){var e=this._element;e.forEachObject(function(t){e.remove(t)}),t.call(this,e)}function n(t){if(void 0===t||null===t)throw new UndefinedOrNullException("radius","The radius of circle must be defined");if(t<=0)throw new ArgumentOutOfRangeException("radius","The radius of circle must be greater than 0");this._radius=t}function a(){return this._radius}function r(){EventBus.off(this._dataSource,"DataSource:datachanged",this.update,this)}var s=Object.create(PlotObject.prototype);return s.setRadius=n,s.getRadius=a,s.createElement=e,s.updateElement=i,s.destroy=r,s}(),DotsSeries.prototype.constructor=DotsSeries,DualSeries.prototype=function(){function t(t,e){if(!t)return null;var i=tinycolor(t.toRgbString());return i.setAlpha(e),i.toRgbString()}function e(t,e,i){for(var n=[],a=e.getMinValue(),r=t.length-1;r>=0;r--){var s=t[r],o=s.getXValue();if(e.isVisible(o)){var c=e.toCoordinate(s.getXValue()),h=i.toCoordinate(s.getYValue());n.unshift(ObjectFactory.createInstance(Point,c,h))}else if(o<a)break}return n}function i(t){for(var e=[["M",t[0].x,t[0].y]],i=1;i<t.length;i++)e.push(["L",t[i].x,t[i].y]);return e}function n(t,e,n,a,r,s){var o=ObjectFactory.createInstance(fabric.Path,[],{left:0,top:0,width:r,height:s}),c=i(t);return o.path=c,o.setStroke(e),o.setStrokeWidth(n),o.setFill(null),commonsModule.$.isArray(a)&&(o.strokeDashArray=a),o}function a(t,e,n,a,r){var s=ObjectFactory.createInstance(fabric.Path,[],{left:0,top:0,width:a,height:r}),o=i(t);return o.push(["Z"]),s.path=o,s.setStroke(null),s.setStrokeWidth(n),s.setFill(e),s}function r(t,e){for(var i=0;i<t.length;i++)if(t[i].x>=e)return i}function s(t,e){var i=[],n=t[0].x,a=e[0].x,s=t.length,o=e.length,c=t[s-1].x,h=e[o-1].x;if(n>h||c<a)return i;var l=0,u=0;n>a?u=r(e,n):n<a&&(l=r(t,a));var g,f=s-1,d=o-1;if(c>h?(g=l+d-u,g<f&&(f=g)):c<h&&(g=u+f-l,g<d&&(d=g)),l===f)return i;var _;for(_=l;_<=f;_++)i.push(t[_]);for(_=d;_>=u;_--)i.push(e[_]);return i}function o(i){var r=this._upDataSource.getDataSeries(),o=this._lowDataSource.getDataSeries();if(r&&o){var c=this.getLineWidth(),h=Fmr_Pwi_Charting_LineStyle.getDashArray(this.getLineStyle(),c),l=this.getUpperColor().toRgbString(),u=this.getLowerColor().toRgbString(),g=t(this.getBackgroundColor(),this.getOpacity()),f=this._pane,d=f.getXAxis(),_=f.getYAxis(),p=e(r,d,_),x=e(o,d,_),v=d.getLength(),m=_.getLength(),y=p.length,b=x.length;if(y>0&&i.push(n(p,l,c,h,v,m)),y>0&&b>0){var A=s(p,x);A.length>0&&i.push(a(A,g,c,v,m))}b>0&&i.push(n(x,u,c,h,v,m))}}function c(){return ObjectFactory.createInstance(fabric.PathGroup)}function h(){var t=this._element,e=t.paths;e.splice(0,e.length),o.call(this,e)}function l(){EventBus.off(this._upDataSource,"DataSource:datachanged",this.update,this),EventBus.off(this._lowDataSource,"DataSource:datachanged",this.update,this)}function u(t){this._upperColor=t,this._lowerColor=t,this._color=t}function g(){return this._upperColor}function f(t){this._upperColor=t}function d(){return this._lowerColor}function _(t){this._lowerColor=t}var p=Object.create(PlotObject.prototype);return p.createElement=c,p.updateElement=h,p.destroy=l,p.setColor=u,p.getUpperColor=g,p.setUpperColor=f,p.getLowerColor=d,p.setLowerColor=_,p}(),DualSeries.prototype.constructor=DualSeries,DragEventArgs.prototype=function(){var t=Object.create(EventArgs.prototype);return t}(),DragEventArgs.prototype.constructor=DragEventArgs;var Fmr_Pwi_Charting_ChartPaneState={Closed:0,Minimized:1,Normal:2};ChartPane.defaultHeight=90,ChartPane.prototype=function(){function t(t){var e=commonsModule.$.inArray(t,this._plotObjects);return e>-1}function e(t){var e=this._headerLabels.indexOf(t);return e>-1}function i(){for(var t=0;t<this._plotObjects.length;t++)this._plotObjects[t].update()}function n(){var t=this;this._plotObjects.slice().forEach(function(e){t.removePlotObject(e)})}function a(){this._headerLabels.splice(0,this._headerLabels.length)}function r(){this._yAxisLabels.splice(0,this._yAxisLabels.length)}function s(){this._yAxisLeftLabels.splice(0,this._yAxisLeftLabels.length)}function o(t){return void 0===t.zIndex||null===t.zIndex?0:t.zIndex}function c(t,e){for(var i=t.length,n=o(e),a=i-1;a>=0;a--){var r=o(t[a]);if(r<=n)return a+1}return Math.max(0,a)}function h(t,e,i){var n=this._poUnderMouse;this._poUnderMouse=t,t!==n&&n&&EventBus.trigger(n,"PlotObject:mouseout"),t&&(t!==n?EventBus.trigger(t,"PlotObject:mouseenter",{x:e,y:i}):EventBus.trigger(t,"PlotObject:mousemove",{x:e,y:i}))}function l(t,e){for(var i=this._plotObjects.length-1;i>=0;i--){var n=this._plotObjects[i].hitTest(t,e);if(n)return n}}function u(t,e,i){var n=ObjectFactory.createInstance(DragEventArgs,this,t,e);return n.xValue=this._xAxis.toValue(t),n.yValue=this._yAxis.toValue(e),i&&(n.rawEvent=i),n}function g(t,e){var i=ObjectFactory.createInstance(DragEventArgs,this,t,e),n=l.call(this,t,e);return n&&(i.plotObject=n),i}function f(t){this._maincanvasWidth=t,this._canvas&&this._canvas.setWidth(t),this._xAxis&&this._xAxis.setLength(Math.max(0,t-.5)),this.refresh()}function d(){return this._maincanvasWidth}function _(t){this._maincanvasHeight=t,this._canvas&&this._canvas.setHeight(t),this._yAxis&&this._yAxis.setLength(Math.max(0,t-.5)),this._yAxisLeft&&this._yAxisLeft.setLength(Math.max(0,t-.5)),this.refresh()}function p(){return this._maincanvasHeight}function x(){return this._xAxis}function v(){return this._yAxis}function m(t){if(!t)throw new UndefinedOrNullException("axis");t.setLength(Math.max(0,this._maincanvasWidth-.5)),this._xAxis=t}function y(t,e){return t&&EventBus.off(t,"Axis:scalechanged",this.refresh,this),e.setLength(Math.max(0,this._maincanvasHeight-.5)),EventBus.on(e,"Axis:scalechanged",this.refresh,this),e}function b(t){this._yAxis=y.call(this,this._yAxis,t)}function A(){return this._id}function M(){return this._state}function S(){return this._plotObjects}function C(e){return t.call(this,e)?void e.update():(this._plotObjects.push(e),void e.plot(this))}function O(t){this._canvas&&(this._canvas.contains(t)?!this._isUpdating&&this._canvas.renderAll():this._canvas.insertAt(t,c(this._canvas.getObjects(),t)))}function L(e){if(t.call(this,e)){var i=commonsModule.$.inArray(e,this._plotObjects);this._plotObjects.splice(i,1),e.removePlot()}}function w(t){this._canvas&&this._canvas.contains(t)&&this._canvas.remove(t)}function E(){this._isUpdating=!0,this._updateCounter++,this._canvas&&(this._canvas.renderOnAddRemove=!1)}function P(){0!==this._updateCounter&&(this._updateCounter--,0===this._updateCounter&&(this._isUpdating=!1,this._canvas&&(this._canvas.renderOnAddRemove=!0,this._canvas.renderAll())))}function F(){if(this._canvas&&this._plotObjects.length>0)try{this.beginUpdate(),i.call(this)}finally{this.endUpdate()}}function k(t){if(!t)throw new UndefinedOrNullException("canvas");this._canvas=t,this._canvas.renderOnAddRemove=this._updateCounter<1,this._plotObjects.length>0&&this.refresh()}function D(t){var e={area:Fmr_Pwi_Charting_ChartPaneArea.Header};if(t=Math.max(0,t),t<=this._xAxis.getLength()){var i=this._xAxis.toValue(t);e.x=i}EventBus.trigger(this,"ChartPane:MouseMove",e)}function j(t,e){h.call(this,l.call(this,t,e),t,e),t=Math.max(0,Math.min(this._xAxis.getLength(),t)),e=Math.max(0,Math.min(this._yAxis.getLength(),e));var i=this._xAxis.toValue(t),n=this._yAxis.toValue(e);EventBus.trigger(this,"ChartPane:MouseMove",{x:i,area:Fmr_Pwi_Charting_ChartPaneArea.PlotArea,y:n})}function V(){EventBus.trigger(this,"ChartPane:MouseMove",{area:Fmr_Pwi_Charting_ChartPaneArea.YAxis})}function T(){h.call(this)}function I(t){void 0===t||null===t||e.call(this,t)||this._headerLabels.push(t)}function Y(){return this._headerLabels}function B(t){if(e.call(this,t)){var i=this._headerLabels.indexOf(t);this._headerLabels.splice(i,1)}}function X(){if(this._state!==Fmr_Pwi_Charting_ChartPaneState.Closed){var t=this._state;this._state=Fmr_Pwi_Charting_ChartPaneState.Closed,n.call(this),a.call(this),r.call(this),s.call(this),EventBus.trigger(this,"ChartPane:StateChanged",{fromState:t,toState:this._state})}}function W(){if(this._state!==Fmr_Pwi_Charting_ChartPaneState.Minimized&&this._state!==Fmr_Pwi_Charting_ChartPaneState.Closed){var t=this._state;this._state=Fmr_Pwi_Charting_ChartPaneState.Minimized,EventBus.trigger(this,"ChartPane:StateChanged",{fromState:t,toState:this._state})}}function N(){if(this._state!==Fmr_Pwi_Charting_ChartPaneState.Normal){var t=this._state;this._state=Fmr_Pwi_Charting_ChartPaneState.Normal,EventBus.trigger(this,"ChartPane:StateChanged",{fromState:t,toState:this._state})}}function R(t){if(void 0===t||null===t)throw new UndefinedOrNullException("height");if(t<0)throw new ArgumentOutOfRangeException("height","Height can not be less than 0");this._height=t}function H(){return this._height}function U(t){if(!t)throw new UndefinedOrNullException("yAxisLabel");if(this._yAxisLabels.indexOf(t)<0){for(var e=this._yAxisLabels.length,i=0;i<this._yAxisLabels.length;i++){var n=this._yAxisLabels[i];if(n.zIndex>t.zIndex){e=i;break}}this._yAxisLabels.splice(e,0,t)}}function z(t){if(!t)throw new UndefinedOrNullException("yAxisLabel");var e=this._yAxisLabels.indexOf(t);e>=0&&this._yAxisLabels.splice(e,1)}function G(){return this._yAxisLabels}function $(){return this._yAxisLeft}function q(t){this._yAxisLeft=y.call(this,this._yAxisLeft,t)}function Z(){return this._dualAxisCompareMode===Fmr_AdvancedChart_DualAxisCompareMode.Dual;
}function J(){return this._dualAxisCompareMode}function K(t){this._dualAxisCompareMode=t,nt(Z.call(this),tt())}function Q(){return commonsModule.$(".chart-pane-yaxis-left")}function tt(){var t=Q(),e=0;return t&&t.length>0&&(e=commonsModule.$(t[0]).width()),e}function et(){return commonsModule.$(".fmr-pwi-charting-xaxis")}function it(){return commonsModule.$(".xaxis-container")}function nt(t,e){var i=et(),n=it();if(i&&i.length>0&&n&&n.length>0){var a=commonsModule.$(i[0]),r=commonsModule.$(n[0]),s="0px"!==a.css("left");t&&!s?(a.css("left",e+"px"),r.css("overflow","hidden")):!t&&s&&(a.css("left","0px"),r.css("overflow",""))}}function at(t){if(!t)throw new UndefinedOrNullException("yAxisLeftLabel");if(this._yAxisLeftLabels.indexOf(t)<0){for(var e=this._yAxisLeftLabels.length,i=0;i<this._yAxisLeftLabels.length;i++){var n=this._yAxisLeftLabels[i];if(n.zIndex>t.zIndex){e=i;break}}this._yAxisLeftLabels.splice(e,0,t)}}function rt(t){if(!t)throw new UndefinedOrNullException("yAxisLeftLabel");var e=this._yAxisLeftLabels.indexOf(t);e>=0&&this._yAxisLeftLabels.splice(e,1)}function st(){this._yAxisLeftLabels.splice(0,this._yAxisLeftLabels.length)}function ot(){return this._yAxisLeftLabels}function ct(t,e,i){var n=u.call(this,t,e,i),a=l.call(this,t,e);a&&(n.plotObject=a),this.dragStartEvent.trigger(n)}function ht(t,e,i){EventBus.trigger(this,"ChartPane:dragmove",u.call(this,t,e,i))}function lt(t,e,i){EventBus.trigger(this,"ChartPane:dragend",u.call(this,t,e,i))}function ut(t,e){EventBus.trigger(this,"ChartPane:mousedown",g.call(this,t,e))}function gt(){return this._tags.slice(0)}function ft(t,e){var i;if(this._state!==Fmr_Pwi_Charting_ChartPaneState.Closed&&(t||e)){if(e&&(i=this._tags.indexOf(e),i>=0)){if(t===e)return;this._tags.splice(i,1)}t&&this._tags.push(t),EventBus.trigger(this,"ChartPane:tagchanged",{tagToAdd:t,tagToRemove:e})}}function dt(){for(var t=this.getPlotObjects(),e=0;e<t.length;e++){var i=t[e];i instanceof Trackball&&i.setVisible(!1)}}function _t(){for(var t=this.getPlotObjects(),e=0;e<t.length;e++){var i=t[e];i instanceof Trackball&&i.setVisible(!0)}}return{getId:A,getState:M,getXAxis:x,getYAxis:v,setXAxis:m,setYAxis:b,addElement:O,removeElement:w,addPlotObject:C,removePlotObject:L,getPlotObjects:S,refresh:F,beginUpdate:E,endUpdate:P,setMainCanvas:k,setMainCanvasWidth:f,getMainCanvasWidth:d,setMainCanvasHeight:_,getMainCanvasHeight:p,onHeaderMouseMove:D,onPlotAreaMouseMove:j,onYAxisMouseMove:V,onPlotAreaMouseOut:T,addHeaderLabel:I,getHeaderLabels:Y,removeHeaderLabel:B,close:X,minimize:W,restore:N,setHeight:R,getHeight:H,addYAxisLabel:U,removeYAxisLabel:z,getYAxisLabels:G,getTags:gt,updateTags:ft,onDragStart:ct,onDragMove:ht,onDragEnd:lt,onMouseDown:ut,hideTrackballs:dt,showTrackballs:_t,getYAxisLeft:$,setYAxisLeft:q,addYAxisLeftLabel:at,removeYAxisLeftLabel:rt,removeYAxisLeftLabels:st,getYAxisLeftLabels:ot,isYAxisLeftVisible:Z,setDualAxisCompareMode:K,getDualAxisCompareMode:J,getChartPaneYAxisLeftElements:Q,getFmrPwiChartingXAxisElements:et}}(),ChartPane.prototype.constructor=ChartPane,Chart.prototype=function(){function t(t){var e=commonsModule.$.inArray(t,this._panes);return e>-1}function e(){for(var t=0;t<this._panes.length;t++)this._panes[t].beginUpdate()}function i(){for(var t=0;t<this._panes.length;t++)this._panes[t].endUpdate()}function n(t,e){e.toState===Fmr_Pwi_Charting_ChartPaneState.Closed&&(EventBus.trigger(this,"Chart:paneclosed",{pane:t}),this.removePane(t))}function a(t,e){this.dragStartEvent.trigger(e)}function r(t,e){EventBus.trigger(this,"Chart:dragmove",e)}function s(t,e){EventBus.trigger(this,"Chart:dragend",e)}function o(t,e){EventBus.trigger(this,"Chart:mousedown",e)}function c(){}function h(e,i){if(!e)throw new UndefinedOrNullException("pane");t.call(this,e)||(EventBus.on(e,"ChartPane:MouseMove",this.onChartPaneMouseMove,this),EventBus.on(e,"ChartPane:StateChanged",n,this),EventBus.on(e,"ChartPane:dragstart",a,this),EventBus.on(e,"ChartPane:dragmove",r,this),EventBus.on(e,"ChartPane:dragend",s,this),EventBus.on(e,"ChartPane:mousedown",o,this),(void 0===i||null===i||i<0||i>=this._panes.length)&&(i=this._panes.length),this._panes.splice(i,0,e),EventBus.trigger(this,"Chart:paneadded",{pane:e}),this._isUpdating?e.beginUpdate():this.refresh())}function l(e){e&&t.call(this,e)&&(EventBus.off(e,"ChartPane:MouseMove",this.onChartPaneMouseMove,this),EventBus.off(e,"ChartPane:StateChanged",n,this),EventBus.off(e,"ChartPane:dragstart",a,this),EventBus.off(e,"ChartPane:dragmove",r,this),EventBus.off(e,"ChartPane:dragend",s,this),EventBus.off(e,"ChartPane:mousedown",o,this),this._panes.splice(this._panes.indexOf(e),1),EventBus.trigger(this,"Chart:paneremoved",{pane:e}),this._isUpdating?e.endUpdate():this.refresh())}function u(){return this._panes}function g(t){for(var e=this._panes.length,i=0;i<e;i++){var n=this._panes[i];if(n.getId()===t)return n}}function f(){this._isUpdating=!0,this._updateCounter++,1===this._updateCounter&&e.call(this)}function d(){if(!this._isUpdating)for(var t=0;t<this._panes.length;t++)this._panes[t].refresh()}function _(){if(this._updateCounter--,0===this._updateCounter){this._isUpdating=!1;try{this.refresh()}finally{i.call(this)}}}function p(){for(var t=this._panes,e=0;e<t.length;e++)t[e].hideTrackballs();Trackball.defaultVisible=!1}function x(){Trackball.defaultVisible=this._trackballDefaultVisibility;for(var t=this._panes,e=0;e<t.length;e++)t[e].showTrackballs()}function v(){}return{addPane:h,removePane:l,getPanes:u,findPane:g,refresh:d,beginUpdate:f,endUpdate:_,onChartPaneMouseMove:c,hideTrackballs:p,showTrackballs:x,destroy:v}}(),Chart.prototype.constructor=Chart,AggregatedPlotObject.prototype.getPlotObjects=function(){return this._plotObjects},AggregatedPlotObject.prototype.plot=function(t){if(t){this._pane=t;for(var e=0;e<this._plotObjects.length;e++)this._plotObjects[e].plot(t)}},AggregatedPlotObject.prototype.remove=function(){this._pane&&(this._pane.removePlotObject(this),this._pane=null)},AggregatedPlotObject.prototype.removePlot=function(){if(this._pane)try{this._pane.beginUpdate();for(var t=0;t<this._plotObjects.length;t++)this._plotObjects[t].removePlot()}finally{this._pane.endUpdate()}},AggregatedPlotObject.prototype.update=function(){if(this._pane)try{this._pane.beginUpdate();for(var t=0;t<this._plotObjects.length;t++)this._plotObjects[t].update()}finally{this._pane.endUpdate()}},AggregatedPlotObject.prototype.destroy=function(){for(var t=0;t<this._plotObjects.length;t++)this._plotObjects[t].destroy()},TextPlotObject.prototype=function(){function t(){var t=this._element;t.renderOnAddRemove=!1,t.forEachObject(function(e){t.remove(e)});var e=this.getLocation(),i=this.getText();if(e&&i){var n=ObjectFactory.createInstance(fabric.Text,i,{fill:this.getColor().toHexString(),textAlign:"left",fontFamily:this.getFontFamily(),fontSize:this.getFontSize(),fontWeight:this.getFontWeight(),originX:"center",originY:"center",lineHeight:1}),a=this._pane.getXAxis(),r=this.getYAxis(),s=Math.round(a.toCoordinate(e.getXValue())),o=Math.round(r.toCoordinate(e.getYValue()));n.left=s+this._xOffset,n.top=o+this._yOffset,t.add(n)}}function e(){return ObjectFactory.createInstance(fabric.Group)}function i(t){this._location!==t&&(this._location=t,this.update())}function n(){return this._location}function a(t){this._text!==t&&(this._text=t,this.update())}function r(){return this._text}function s(t){this._xOffset!==t&&(this._xOffset=t,this.update())}function o(){return this._xOffset}function c(t){this._yOffset!==t&&(this._yOffset=t,this.update())}function h(){return this._yOffset}var l=Object.create(PlotObject.prototype);return l.getLocation=n,l.setLocation=i,l.getText=r,l.setText=a,l.getXOffset=o,l.setXOffset=s,l.getYOffset=h,l.setYOffset=c,l.createElement=e,l.updateElement=t,l}(),TextPlotObject.prototype.constructor=TextPlotObject,MountainSeries.prototype=function(){function t(t,i,n){var a=[];t=e(t,i);for(var r=0;r<t.length;r++){var s=t[r],o=i.toCoordinate(s.date),c=n.toCoordinate(s.value),h=new Point(o,c);a.push(h)}return a}function e(t,e){var i=commonsModule.$.grep(t,function(t){return e.isVisible(t.date)});return i}function i(t,e){var i=[];i.push(["M",t[0].x,e]),i.push(["L",t[0].x,t[0].y]);for(var n=1;n<t.length;n++)i.push(["L",t[n].x,t[n].y]);return i.push(["L",t[t.length-1].x,e]),i.push(["z"]),i}function n(t){for(var e=[],i=1;i<t.length;i++)e.push(["M",t[i-1].x,t[i-1].y]),e.push(["L",t[i].x,t[i].y]),e.push(["z"]);return e}function a(t,e,i){var n=ObjectFactory.createInstance(fabric.Path,t,{left:0,top:0,width:e,height:i});return n.left=0,n.top=0,n}function r(t,e,i,n){var a=ObjectFactory.createInstance(fabric.Path,t,{stroke:e.toRgbString(),strokeWidth:1,left:0,top:0,width:i,height:n});return a.left=0,a.top=0,a}function s(t,e,i){var n=tinycolor(i.toRgbString());n.setAlpha(.5);var a=tinycolor(i.toRgbString());a.setAlpha(0),t.setGradient("fill",{type:"linear",x1:0,y1:0,x2:0,y2:e,colorStops:{0:n.toRgbString(),.8:a.toRgbString(),1:a.toRgbString()}})}function o(){return ObjectFactory.createInstance(fabric.PathGroup)}function c(){var e=this._element,o=e.paths;o.splice(0,o.length);var c=this._pane,h=this._dataSource.getDataSeries();if(h){var l=this.getColor(),u=c.getXAxis(),g=this.getYAxis(),f=u.getLength(),d=g.getLength(),_=t(h,u,g);if(!(_.length<=0)){var p=a(i(_,d),f,d);this._isFilledWithFixedColor?p.setFill(l.toRgbString()):s(p,f,l);var x;x=this._lineColor?tinycolor(this._lineColor.toRgbString()):tinycolor(l.toRgbString()),x.setAlpha(1);var v=r(n(_),x,f,d);this._element.paths=[p,v]}}}function h(){EventBus.off(this._dataSource,"DataSource:datachanged",this.update,this)}function l(t){this._isFilledWithFixedColor=t}function u(t){this._lineColor=t}var g=Object.create(PlotObject.prototype);return g.createElement=o,g.updateElement=c,g.destroy=h,g.setFilledWithFixedColor=l,g.setLineColor=u,g}(),MountainSeries.prototype.constructor=MountainSeries,AxisMinMaxSource.prototype=function(){function t(){EventBus.trigger(this,"AxisMinMaxSource:minmaxchanged")}function e(){}function i(){return this._priority}function n(t){this._priority=t}function a(){return this._forceApply}function r(){EventBus.off(this._dataSource,"DataSource:datachanged",t,this)}return{onDataSourceDataChanged:t,getMinMax:e,getPriority:i,setPriority:n,destroy:r,forceApply:a}}(),AxisMinMaxSource.prototype.constructor=AxisMinMaxSource,SingleValueAxisMinMaxSource.prototype=function(){function t(){var t=this._dataSource.getValue();if(void 0!==t&&null!==t)return new Range(t,t)}var e=Object.create(AxisMinMaxSource.prototype);return e.getMinMax=t,e}(),SingleValueAxisMinMaxSource.prototype.constructor=SingleValueAxisMinMaxSource,DataSeriesAxisMinMaxSource.prototype=function(){function t(t){for(var e,i,n=!1,a=t.length-1;a>=0;a--){var r=t[a].getXValue(),s=t[a].getYValue();if(this._xAxis.isVisible(r))n?(e>s&&(e=s),i<s&&(i=s)):(e=t[a].getYValue(),i=e,n=!0);else if(r<this._xAxis.getMinValue())break}return n?new Range(e,i):void 0}function e(){EventBus.trigger(this,"AxisMinMaxSource:minmaxchanged")}function i(){var e=this._dataSource.getDataSeries();if(e&&!(e.length<=0))return t.call(this,e)}function n(){AxisMinMaxSource.prototype.destroy.call(this),EventBus.off(this._xAxis,"Axis:scalechanged",this.onAxisScaleChanged,this)}var a=Object.create(AxisMinMaxSource.prototype);return a.getMinMax=i,a.destroy=n,a.onAxisScaleChanged=e,a}(),DataSeriesAxisMinMaxSource.prototype.constructor=DataSeriesAxisMinMaxSource,CenterAlignAxisMinMaxSource.prototype=function(){function t(t){var e=t.getMinValue(),i=t.getMaxValue();if(void 0!==e&&void 0!==i&&e===i)return 0===i?(e=-5,i=5):i>0?(e=0,i*=2):(i=0,e*=2),ObjectFactory.createInstance(Range,e,i)}var e=Object.create(AxisMinMaxSource.prototype);return e.getMinMax=t,e}(),CenterAlignAxisMinMaxSource.prototype.constructor=CenterAlignAxisMinMaxSource,RangeAxisMinMaxSource.prototype=function(){function t(){return this._range}function e(t,e){var i=this._range;void 0===t||null===t?void 0===e||null===e?this._range=void 0:this._range=ObjectFactory.createInstance(Range,e,e):void 0===e||null===e?this._range=ObjectFactory.createInstance(Range,t,t):this._range=ObjectFactory.createInstance(Range,t,e),Range.equals(i,this._range)||EventBus.trigger(this,"AxisMinMaxSource:minmaxchanged")}var i=Object.create(AxisMinMaxSource.prototype);return i.getMinMax=t,i.setMinMax=e,i}(),RangeAxisMinMaxSource.prototype.constructor=RangeAxisMinMaxSource,FlagDataSource.prototype=function(){function t(){return this._flag}function e(t){if(void 0===t||null===t)throw new UndefinedOrNullException("flag");t!==this._flag&&(this._flag=t,EventBus.trigger(this,"DataSource:datachanged"))}return{getFlag:t,setFlag:e}}(),FlagDataSource.prototype.constructor=FlagDataSource,XAxisTicksDataSource.prototype=function(){function t(){return this._ticks}return{getTicks:t}}(),XAxisTicksDataSource.prototype.constructor=XAxisTicksDataSource,YAxisTicksDataSource.prototype=function(){function t(t){var e,i,n=t.length;if(n>0){e=i=t[0].getValue();for(var a=1;a<n;a++){var r=t[a].getValue();e>r&&(e=r),i<r&&(i=r)}}return{min:e,max:i}}function e(){this._min=this._axis.getMinValue(),this._max=this._axis.getMaxValue(),this._length=this._axis.getLength();var e=t(this._ticks);this._minFromTicks=e.min,this._maxFromTicks=e.max,this._numberOfTicks=i.call(this)}function i(){return this._baseYAxisTicksDataSource?this._baseYAxisTicksDataSource.getTicks().length:void 0}function n(){o.call(this)}function a(){o.call(this)}function r(){this._ticks=c.call(this),e.call(this),EventBus.trigger(this,"DataSource:datachanged")}function s(t,e,i,n){var a=t!==this._min||e!==this._max,r=t!==this._minFromTicks||e!==this._maxFromTicks,s=i!==this._length,o=n!==this._numberOfTicks;return a&&r||s||o}function o(){var t=this._axis.getMinValue(),n=this._axis.getMaxValue(),a=this._axis.getLength();s.call(this,t,n,a,i.call(this))?(this._ticks=c.call(this),e.call(this),EventBus.trigger(this,"DataSource:datachanged")):t===this._minFromTicks&&n===this._maxFromTicks&&EventBus.trigger(this,"DataSource:datachanged")}function c(){return this._ticksCalculatorManager.getTicksCalculator().calculate(this._axis,i.call(this))}function h(){return this._initialized||(this._initialized=!0,this._ticks=c.call(this),e.call(this),EventBus.on(this._axis,"Axis:lengthchanged",n,this),EventBus.on(this._axis,"Axis:minmaxchanged",a,this),EventBus.on(this._ticksCalculatorManager,"TicksCalculatorManager:calculatorchanged",r,this)),this._ticks}function l(){EventBus.off(this._axis,"Axis:lengthchanged",n,this),EventBus.off(this._axis,"Axis:minmaxchanged",a,this),EventBus.off(this._ticksCalculatorManager,"TicksCalculatorManager:calculatorchanged",r,this)}return{getTicks:h,destroy:l}}(),YAxisTicksDataSource.prototype.constructor=YAxisTicksDataSource,CustomizedYAxisTicksDataSource.prototype=function(){function t(){return this._ticks}function e(t){t||(t=[]),this._ticks=t,EventBus.trigger(this,"DataSource:datachanged")}var i=Object.create(DataSource.prototype);return i.getTicks=t,i.setTicks=e,i}(),CustomizedYAxisTicksDataSource.prototype.constructor=CustomizedYAxisTicksDataSource,AxisTicksMinMaxSource.prototype=function(){function t(t){for(var e=t[0].getValue(),i=t[0].getValue(),n=1;n<t.length;n++){var a=t[n].getValue();e>a&&(e=a),i<a&&(i=a)}return new Range(e,i)}function e(){var e=this._dataSource.getTicks();if(e&&!(e.length<=0))return t.call(this,e)}var i=Object.create(AxisMinMaxSource.prototype);return i.getMinMax=e,i}(),AxisTicksMinMaxSource.prototype.constructor=AxisTicksMinMaxSource,HorizontalLine.prototype=function(){function t(){return ObjectFactory.createInstance(fabric.PathGroup,[])}function e(){if(this._element.paths.splice(0,this._element.paths.length),void 0!==this._price&&null!==this._price){var t=this._pane,e=t.getXAxis().getLength(),i=t.getYAxis().getLength(),n=t.getYAxis().toCoordinate(this._price),a=ObjectFactory.createInstance(Point,0,n),r=ObjectFactory.createInstance(Point,e,n),s=[];s.push(["M",a.x,a.y]),s.push(["L",r.x,r.y]);var o=ObjectFactory.createInstance(fabric.Path,s,{stroke:this.getColor().toRgbString(),strokeWidth:this.getLineWidth(),opacity:this.getOpacity(),strokeDashArray:Fmr_Pwi_Charting_LineStyle.getDashArray(this.getLineStyle()),left:0,top:0,width:e,height:i});this._element.paths=[o],this._element.opacity=this.getOpacity()}}function i(t){this._price!==t&&(this._price=t,this.update())}function n(){return this._price}function a(t,e){if(this._element&&this._pane&&void 0!==this._price&&null!==this._price){var i=this._pane.getYAxis(),n=i.toCoordinate(this._price);return Math.abs(n-e)<GeometryHelper.PixelSensitivity?this:void 0}}var r=Object.create(PlotObject.prototype);return r.createElement=t,r.updateElement=e,r.setPrice=i,r.getPrice=n,r.hitTest=a,r}(),HorizontalLine.prototype.constructor=HorizontalLine,VerticalLine.prototype=function(){function t(){return ObjectFactory.createInstance(fabric.PathGroup,[])}function e(){if(this._element.paths.splice(0,this._element.paths.length),void 0!==this._date&&null!==this._date){var t=this._pane,e=t.getXAxis().getLength(),i=t.getYAxis().getLength(),n=t.getXAxis().toCoordinate(this._date),a=ObjectFactory.createInstance(Point,n,0),r=ObjectFactory.createInstance(Point,n,i),s=[];s.push(["M",a.x,a.y]),s.push(["L",r.x,r.y]);var o=ObjectFactory.createInstance(fabric.Path,s,{stroke:this.getColor().toRgbString(),strokeWidth:this.getLineWidth(),opacity:this.getOpacity(),strokeDashArray:Fmr_Pwi_Charting_LineStyle.getDashArray(this.getLineStyle(),this.getLineWidth()),left:0,top:0,width:e,height:i,originX:"center",originY:"center"});this._element.paths=[o],this._element.opacity=this.getOpacity()}}function i(t){var e=!1;null===t&&(t=void 0),void 0!==this._date&&void 0!==t&&this._date.getTime()!==t.getTime()?e=!0:(void 0===this._date&&void 0!==t||void 0!==this._date&&void 0===t)&&(e=!0),this._date=t,e&&this.update()}function n(){return this._date}function a(t){if(this._element&&this._pane&&void 0!==this._date&&null!==this._date){var e=this._pane.getXAxis(),i=e.toCoordinate(this._date);return Math.abs(i-t)<GeometryHelper.PixelSensitivity?this:void 0}}var r=Object.create(PlotObject.prototype);return r.createElement=t,r.updateElement=e,r.setDate=i,r.getDate=n,r.hitTest=a,r}(),VerticalLine.prototype.constructor=VerticalLine,VerticalGridLines.prototype=function(){function t(t,e,i,n,a,r){var s=ObjectFactory.createInstance(fabric.Path,t,{stroke:e.toRgbString(),strokeWidth:i,strokeDashArray:Fmr_Pwi_Charting_LineStyle.getDashArray(n),left:0,top:0,width:a,height:r});return s}function e(){return ObjectFactory.createInstance(fabric.PathGroup)}function i(){var e=this._element;e.paths=[];var i=this._pane,n=i.getXAxis(),a=this.getYAxis(),r=n.getLength(),s=a.getLength(),o=this._height||s,c=s-o,h=this._ticksDataSource.getTicks();if(this._flagDataSource.getFlag()&&h&&!(h.length<=0)){for(var l=[],u=0;u<h.length;u++){var g=h[u],f=n.toCoordinate(g.date),d=ObjectFactory.createInstance(Point,f,c),_=ObjectFactory.createInstance(Point,f,s);l.push(["M",d.x,d.y]),l.push(["L",_.x,_.y])}e.paths=[t(l,this.getColor(),this.getLineWidth(),this.getLineStyle(),r,o)],e.setOpacity(this.getOpacity())}}function n(t){!t||t<0?this._height=void 0:this._height=t}var a=Object.create(PlotObject.prototype);return a.createElement=e,a.updateElement=i,a.setHeight=n,a}(),VerticalGridLines.prototype.constructor=VerticalGridLines,HorizontalGridLines.prototype=function(){function t(t,e,i,n,a,r){var s=ObjectFactory.createInstance(fabric.Path,t,{stroke:e.toRgbString(),strokeWidth:i,strokeDashArray:Fmr_Pwi_Charting_LineStyle.getDashArray(n),left:0,top:0,width:a,height:r});return s.left=0,s.top=0,s}function e(t,e,i,n){var a=i.toCoordinate(t.getValue()),r=ObjectFactory.createInstance(Point,0,a),s=ObjectFactory.createInstance(Point,e,a);n.push(["M",r.x,r.y]),n.push(["L",s.x,s.y])}function i(t,i,n){for(var a=[],r=0;r<t.length;r++){var s=t[r];e(s,i,n,a)}return a}function n(e,n){e=e.map(function(t){return t});var a=this._pane,r=a.getXAxis(),s=a.getYAxis(),o=r.getLength(),c=s.getLength(),h=this.getLineWidth(),l=this.getLineStyle();if(e.length>=2){var u=e.shift(),g=e.pop(),f=i([u],o,s),d=i([g],o,s);n.paths.push(t(f,u.color||this._topBottomColor,h,l,o,c)),n.paths.push(t(d,g.color||this._topBottomColor,h,l,o,c))}for(var _,p=[],x=0;x<e.length;x++){var v=e[x];v.color?(_=i([v],o,s),n.paths.push(t(_,v.color,h,l,o,c))):p.push(v)}p.length>0&&(_=i(p,o,s),n.paths.push(t(_,this.getColor(),h,l,o,c)))}function a(){return ObjectFactory.createInstance(fabric.PathGroup)}function r(){var t=this._element,e=t.paths;e.splice(0,e.length);var i=this._pane,a=i.getYAxis(),r=a.getMaxValue(),s=a.getMinValue();if(void 0!==s&&null!==s&&void 0!==r&&null!==r){var o=this._ticksDataSource.getTicks();!o||o.length<=0||(t.paths=[],n.call(this,o,t),t.setOpacity(this.getOpacity()))}}function s(t){if(!t)throw new UndefinedOrNullException("topBottomColor");this._topBottomColor=t}function o(){return this._topBottomColor}var c=Object.create(PlotObject.prototype);return c.createElement=a,c.updateElement=r,c.setTopBottomColor=s,c.getTopBottomColor=o,c}(),HorizontalGridLines.prototype.constructor=HorizontalGridLines,YAxisTick.prototype=function(){function t(){return this._value}function e(t){this._value=t}return{getValue:t,setValue:e}}(),YAxisTick.prototype.constructor=YAxisTick,YAxisTickCalculator.prototype=function(){function t(t,e){return!(null===t||void 0===t||null===e||void 0===e)}function e(t,e){if(t===Number.NEGATIVE_INFINITY||t===Number.POSITIVE_INFINITY)throw new ArgumentOutOfRangeException("minValue");if(e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY)throw new ArgumentOutOfRangeException("maxValue")}function i(t){for(var e=[1,2,2.5,5],i=0;i<e.length;i++)if(t<=e[i])return e[i];return 10}function n(t,e){var i;if(e){for(i=0;i<f.length;i++)if(t<=f[i])return f[i]}else for(i=0;i<d.length;i++)if(t<=d[i])return d[i]}function a(t){return NumberExtensions.round(t,10)}function r(t,e,i,n){var r=[];e=a(e),i=a(i);for(var s=a(t);s<i;)r.push(ObjectFactory.createInstance(YAxisTick,s)),s+=n,s=a(s);return r.push(ObjectFactory.createInstance(YAxisTick,s)),r}function s(t){return Math.log(t)/Math.LN10}function o(t){var e=Math.floor(a(s(t))),n=Math.pow(10,e);return t=i(t/n)*n}function c(t,e,i){var a=1;return e>0&&(a=e/t),a=a<1?n(a,i):o(a)}function h(t,e,i,n){if(n){var r=a(t),s=i.length;for(s>0&&(r=i[s-1].getValue());s<n;)r+=e,r=a(r),i.push(ObjectFactory.createInstance(YAxisTick,r)),s++}}function l(t){if(!t)return[];var e=t.getMinValue(),i=t.getMaxValue(),n=t.getLength();return this.calculateTicks(e,i,n)}function u(i,n,s){if(!t(i,n))return[];e(i,n);var o=Math.floor(s/15);if(0===o)return[];n=Math.max(i,n),o=Math.min(Math.max(o,1),12);var l=a(n-i),u=c(o,l,i<1),g=Math.floor(a(i/u))*u,f=r(g,i,n,u);return h(g,u,f,this._minimumCount),f}function g(t){this._minimumCount=t}var f=[1e-4,2e-4,5e-4,.001,.0015,.002,.0025,.005,.01,.015,.02,.025,.05,.1,.15,.2,.25,.5,1],d=[.01,.02,.05,.1,.15,.2,.25,.5,1];return{calculate:l,calculateTicks:u,setMinimumCount:g,validateMinMax:t,validateMinMaxRange:e,truncate:a,addToMinimumCount:h,generateTicks:r,adjustIncrement:o}}(),YAxisTickCalculator.prototype.constructor=YAxisTickCalculator,YAxisLabel.prototype=function(){function t(){if(void 0===this._value||null===this._value)this._coord=void 0;else{this._coord=Math.floor(this._yAxis.toCoordinate(this._value));var t=this._yAxis.toCoordinate(this._yAxis.getMinValue()),e=this._yAxis.toCoordinate(this._yAxis.getMaxValue());(this._coord<Math.min(t,e)||this._coord>Math.max(t,e))&&(this._coord=void 0)}}function e(){return this._value}function i(e){this._valueIsSet||(EventBus.on(this._yAxis,"Axis:scalechanged",t,this),this._valueIsSet=!0),this._value=e,t.call(this)}function n(){return this._coord}function a(){EventBus.off(this._yAxis,"Axis:scalechanged",t,this),this._coord=void 0}function r(t){this._yAxis=t}return{getValue:e,setValue:i,getCoordinate:n,destroy:a,updateYAxis:r}}(),YAxisLabel.prototype.constructor=YAxisLabel,YAxisLabel.generateYAxisMarker=function(t,e,i,n){var a=ObjectFactory.createInstance(YAxisLabel,t,"y-axis-marker");return a.textColor=n?n.toHexString():"#FFF",a.setValue(e),a.backgroundColor=i.toHexString(),a},YAxisLabels.prototype=function(){function t(t){t=t?t.map(function(t){return t}):[],this._removeFirstAndLast&&(t.shift(),t.pop());var e=t.length&&t[0].getValue()<1?4:2,i=this;return t.map(function(t){var n=ObjectFactory.createInstance(YAxisLabel,i._yAxis);return n.setValue(t.getValue()),n.minDecimals=e,n.percentage=t.percentage,n})}function e(){this.labels=t.call(this,this._ticksDataSource.getTicks())}function i(){this._initialized=!0,this.labels=t.call(this,this._ticksDataSource.getTicks()),EventBus.on(this._ticksDataSource,"DataSource:datachanged",e,this)}function n(e){this._initialized||i.call(this),this._removeFirstAndLast=e,this.labels=t.call(this,this._ticksDataSource.getTicks())}var a=Object.create(YAxisLabel.prototype);return a.removeFirstAndLast=n,a}(),YAxisLabels.prototype.constructor=YAxisLabels,HeaderLabel.prototype=function(){function t(){}return{destroy:t}}(),HeaderLabel.prototype.constructor=HeaderLabel;var filterXAxisLabels=function(){function t(t,e){for(var i,n=e-1;n>=0;n--)if(i=t[n],!i.remove)return i}function e(t,e){return Math.abs(e.getCoordinate()-t.getCoordinate())>=s}function i(t){return o.indexOf(t.getStyle())}function n(t,e){var n=i(t),a=i(e);return n<a?t:e}function a(t,e){n(t,e).remove=!0}function r(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n.remove?delete n.remove:e.push(n)}return e}var s=45,o=[Fmr_Pwi_Charting_XAxisLabelStyle.ExtendedHour,Fmr_Pwi_Charting_XAxisLabelStyle.Hour,Fmr_Pwi_Charting_XAxisLabelStyle.Day,Fmr_Pwi_Charting_XAxisLabelStyle.DayMonth,Fmr_Pwi_Charting_XAxisLabelStyle.Week,Fmr_Pwi_Charting_XAxisLabelStyle.ShortMonth,Fmr_Pwi_Charting_XAxisLabelStyle.Month,Fmr_Pwi_Charting_XAxisLabelStyle.ShortYear,Fmr_Pwi_Charting_XAxisLabelStyle.Year];return function(i){if(i&&i.length){for(var n=1;n<i.length;n++){var s=i[n],o=t(i,n);e(s,o)||a(s,o)}return r(i)}return i}}();chartingModule.directive("indicatorLabel",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},controller:["$scope",IndicatorModifyWindowController],templateUrl:function(e){return t(e)+"indicatorlabel.html"}}}]),chartingModule.directive("chartPane",["getTemplatesBasePath",function(t){function e(t,e){t.pane.setMainCanvas(ObjectFactory.createInstance(fabric.StaticCanvas,e)),t.pane.setMainCanvasWidth(e.clientWidth),t.pane.setMainCanvasHeight(e.clientHeight),t.yAxis=t.pane.getYAxis()}return{restrict:"E",scope:{pane:"=?"},link:function(t,i){t.price=null,void 0===t.pane&&(t.pane=ObjectFactory.createInstance(ChartPane,1));var n=commonsModule.$(i),a=n.find(".chart-pane-pricepane")[0],r=n.find(".canvas-container");a.height=a.clientHeight,a.width=a.clientWidth,e(t,a),t.$watch("pane",function(i){i&&e(t,a)}),t.$watch(function(){return r.width()},function(e){a.width=e,t.pane&&t.pane.setMainCanvasWidth(e)}),t.$watch(function(){return r.height()},function(e){a.height=e,t.pane&&t.pane.setMainCanvasHeight(e)})},templateUrl:function(e,i){var n=i.templateName;return n&&n.length>0?t(e)+n:t(e)+"chartpane.html"}}}]),chartingModule.directive("yAxis",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{labels:"="},templateUrl:function(e){return t(e)+"yaxis.html"}}}]),chartingModule.directive("xaxis",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{axis:"="},controller:["$scope",XAxisController],templateUrl:function(e){return t(e)+"xaxis.html"}}}]),chartingModule.directive("priceIndicator",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"priceindicator.html"}}}]),chartingModule.directive("pricePaneYAxisLabels",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"pricepaneyaxislabels.html"}}}]),chartingModule.directive("yAxisLabel",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"yaxislabel.html"}}}]),chartingModule.directive("yAxisLabels",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"yaxislabels.html"}}}]),chartingModule.directive("yAxisMarker",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"yaxismarker.html"}}}]),chartingModule.directive("yAxisLastPrice",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"yaxislastprice.html"}}}]),chartingModule.directive("indicatorSettings",["getTemplatesBasePath",function(t){function e(t,e){e.splice(0,e.length),t.forEach(function(t){t.isVisible&&e.push(t.clone())})}function i(t,e){for(var i=0;i<t._parameterRules.length;i++)t._parameterRules[i].apply(t.parameters,e)}return{restrict:"E",scope:{indicator:"=",windowService:"=?",onApply:"&",onCancel:"&"},controller:["$scope",function(t){t.validator=ObjectFactory.createInstance(Validator),t.$watch("validator.hasError()",function(e){t.isValid=!e}),t.parameters=ObjectFactory.createInstance(Parameters),t.$watch("indicator.getParameters()",function(){e(t.indicator.getParameters(),t.parameters),t._parameterRules=t.indicator.getParameters().getRules(),t._parameterRules&&i(t)},!0);var n=function(){t.skipCancelWhenClose||t.cancel(),t.validator.clearErrors()};t.apply=function(){var e=t.parameters,i=0,n=t.indicator.getParameters();n.forEach(function(t){t.isVisible&&t.setValue(e[i++].getValue())}),t.skipCancelWhenClose=!0,t.windowService&&t.windowService.close(),t.skipCancelWhenClose=!1,t.onApply&&t.onApply()},t.cancel=function(){e(t.indicator.getParameters(),t.parameters),t._parameterRules&&i(t),t.windowService&&t.windowService.close(),t.onCancel&&t.onCancel()},t.onParameterChanged=function(e,n){e.setValue(n),t._parameterRules&&i(t,e)},t.windowService&&EventBus.on(t.windowService,"Window:closed",n)}],templateUrl:function(e,i){var n="indicatorsettings.html",a=i.templateName;return a&&a.length>0&&(n=a),t(e)+n},link:function(t,e){var i=commonsModule.$(e),n=i.find(".fmr-pwi-advancedchart-scrollable");if(n.length>0){var a=i.parent(),r=i.find(".modalwindow-title");t.$watch(function(){return{max:a.css("max-height"),title:r.outerHeight(!0)}},function(t){var e=t.max,i=t.title;e&&e.length>0&&"px"===e.substring(e.length-2)?n.css("max-height",parseFloat(e.substring(0,e.length-2))-i+"px"):n.css("max-height","")},!0)}}}}]),chartingModule.filter("xAxisLabelFormatter",function(){function t(t){return c[t.getMonth()]}function e(t){return h[t.getMonth()]}function i(t){return l[t.getDay()]}function n(t){return t.getFullYear().toString()}function a(t){return(t.getFullYear()%100).toString()}function r(e){return s(e)+t(e)}function s(t){return t.getDate().toString()}function o(t){var e,i=t.getHours();return e=12===i?"12P":0===i?"12A":i>12?i-12+"P":i+"A"}var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["J","F","M","A","M","J","J","A","S","O","N","D"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=[{style:Fmr_Pwi_Charting_XAxisLabelStyle.ExtendedHour,formatter:o},{style:Fmr_Pwi_Charting_XAxisLabelStyle.Hour,formatter:o},{style:Fmr_Pwi_Charting_XAxisLabelStyle.Day,formatter:s},{style:Fmr_Pwi_Charting_XAxisLabelStyle.Week,formatter:i},{style:Fmr_Pwi_Charting_XAxisLabelStyle.ShortMonth,formatter:e},{style:Fmr_Pwi_Charting_XAxisLabelStyle.Month,formatter:t},{style:Fmr_Pwi_Charting_XAxisLabelStyle.DayMonth,formatter:r},{style:Fmr_Pwi_Charting_XAxisLabelStyle.ShortYear,formatter:a},{style:Fmr_Pwi_Charting_XAxisLabelStyle.Year,formatter:n}];return function(t,e){var i;if(t)for(var n=0;n<u.length;n++){var a=u[n];if(a.style===e)return a.formatter(t)}return i}}),chartingModule.filter("xAxisLabel",function(){return filterXAxisLabels}),TicksCalculatorManager.prototype=function(){function t(t){for(var e=this._calculators.length,i=e-1;i>=0;i--)if(t<=this._calculators[i].priority)return i+1;return Math.max(0,i)}function e(){if(this._calculators.length>0)return this._calculators[0].calculator}function i(e,i){var n=t.call(this,i);this._calculators.splice(n,0,{
calculator:e,priority:i}),0===n&&EventBus.trigger(this,"TicksCalculatorManager:calculatorchanged")}function n(t){for(var e=this._calculators.length,i=e-1;i>=0;i--)if(this._calculators[i].calculator===t)return this._calculators.splice(i,1),void(0===i&&EventBus.trigger(this,"TicksCalculatorManager:calculatorchanged"))}return{getTicksCalculator:e,register:i,unregister:n}}(),TicksCalculatorManager.prototype.constructor=TicksCalculatorManager,LinearAxisAlgorithm.prototype=function(){function t(t,e){var i=e.getLength(),n=e.getMinValue(),a=e.getMaxValue();return e.isReady()&&n!==a?i*(1-(t-n)/(a-n)):0}function e(t,e){if(!e.isReady())return 0;var i=e.getLength(),n=e.getMinValue(),a=e.getMaxValue();return i<=0?n:n+(a-n)*(1-t/i)}return{toCoordinate:t,toValue:e}}(),LinearAxisAlgorithm.prototype.constructor=LinearAxisAlgorithm,OffsetLinearAxisAlgorithm.prototype=function(){function t(){return this._offset}function e(t){this._offset=t}function i(t,e){return LinearAxisAlgorithm.prototype.toCoordinate.call(this,t,e)+this._offset}function n(t,e){return LinearAxisAlgorithm.prototype.toValue.call(this,t-this._offset,e)}var a=Object.create(LinearAxisAlgorithm.prototype);return a.toCoordinate=i,a.toValue=n,a.setOffset=e,a.getOffset=t,a}(),OffsetLinearAxisAlgorithm.prototype.constructor=OffsetLinearAxisAlgorithm,AxisAlgorithmManager.prototype=function(){function t(t){for(var e=this._algorithms.length,i=e-1;i>=0;i--)if(t<=this._algorithms[i].priority)return i+1;return Math.max(0,i)}function e(){if(this._algorithms.length>0)return this._algorithms[0].algorithm}function i(e,i){var n=t.call(this,i);this._algorithms.splice(n,0,{algorithm:e,priority:i}),0===n&&EventBus.trigger(this,"AxisAlgorithmManager:algorithmchanged")}function n(t){for(var e=this._algorithms.length,i=e-1;i>=0;i--)if(this._algorithms[i].algorithm===t)return this._algorithms.splice(i,1),void(0===i&&EventBus.trigger(this,"AxisAlgorithmManager:algorithmchanged"))}return{getAlgorithm:e,register:i,unregister:n}}(),AxisAlgorithmManager.prototype.constructor=AxisAlgorithmManager,LogarithmicAxisAlgorithm.prototype=function(){function t(t,e){return Math.log(e)/Math.log(t)}function e(e,i){var n=i.getLength(),a=i.getMinValue(),r=i.getMaxValue();return i.isReady()&&a!==r?a<=0?0===e?n:e>0?0:2*n:e<=0?1e6:n*(1-t(r/a,e/a)):0}function i(t,e){var i=e.getLength(),n=e.getMinValue(),a=e.getMaxValue();return!e.isReady()||i<=0?0:n<=0?t===i?0:t<i?a:-a:n*Math.pow(a/n,1-t/i)}return{toCoordinate:e,toValue:i}}(),LogarithmicAxisAlgorithm.prototype.constructor=LogarithmicAxisAlgorithm,WatermarkFontScaler.prototype=function(){function t(t,e,i){if(null===t||void 0===t)throw new UndefinedOrNullException("width");if(null===e||void 0===e)throw new UndefinedOrNullException("height");if(null===i||void 0===i)throw new UndefinedOrNullException("size")}function e(t,e,i){if(t<=0)throw new ArgumentOutOfRangeException("width");if(e<=0)throw new ArgumentOutOfRangeException("height");if(i<=0)throw new ArgumentOutOfRangeException("size")}function i(i,n,a){t(i,n,a),e(i,n,a);var r=i/800,s=n/600,o=r<s?r:s,c=Math.floor(a*o);return c<=0?12:c}return{calculateFontSize:i}}(),WatermarkFontScaler.prototype.constructor=WatermarkFontScaler,Watermark.prototype=function(){function t(t){t.forEachObject(function(e){t.remove(e)})}function e(t){var e=this._pane.getXAxis().getLength();return e/Math.max(t.width,e)}function i(t,i){var n=1,a=1;n=e.call(this,t),this._showDescription&&(a=e.call(this,i));var r=Math.min(n,a);t.setScaleX(r),this._showDescription&&(i.setScaleX(r),i.top=t.height)}function n(){return ObjectFactory.createInstance(fabric.Group)}function a(){var e=this._element;t(e);var n,a,r=this._pane,s=r.getXAxis().getLength(),o=r.getYAxis().getLength(),c=this._baseSymbolFontSize,h=this._baseDescriptionFontSize,l=this._fontScaler||ObjectFactory.createInstance(WatermarkFontScaler),u=l.calculateFontSize(s,o,c),g=l.calculateFontSize(s,o,h);n=ObjectFactory.createInstance(fabric.Text,this._symbol,{fill:this.getColor().toRgbString(),opacity:this.getOpacity(),fontFamily:this._family,fontSize:u,fontWeight:this._weight,originX:"center",lineHeight:1});var f=[n];this._showDescription&&(a=ObjectFactory.createInstance(fabric.Text,this._description,{fill:this.getColor().toRgbString(),opacity:this.getOpacity(),fontFamily:this._family,fontSize:g,fontWeight:this._weight,top:n.height,originX:"center",lineHeight:1}),f.push(a)),i.call(this,n,a);var d=new fabric.Group(f,{originX:"center",originY:"center"});e.initialize([d],{left:0,top:0,width:s,height:o})}function r(t){if(null===t||void 0===t)throw new UndefinedOrNullException("symbolSize");this._baseSymbolFontSize=t}function s(){return this._baseSymbolFontSize}function o(t){if(null===t||void 0===t)throw new UndefinedOrNullException("descriptionSize");this._baseDescriptionFontSize=t}function c(){return this._baseDescriptionFontSize}function h(t){if(null===t||void 0===t)throw new UndefinedOrNullException("family");this._family=t}function l(){return this._family}function u(t){if(null===t||void 0===t)throw new UndefinedOrNullException("weight");this._weight=t}function g(){return this._weight}function f(t,e){if(null===t||void 0===t)throw new UndefinedOrNullException("symbol");if(null===e||void 0===e)throw new UndefinedOrNullException("description");this._symbol=t,this._description=e}function d(){return{symbol:this._symbol,description:this._description}}function _(t){this._showDescription=t}function p(){return this._showDescription}function x(t){this._fontScaler=t}var v=Object.create(PlotObject.prototype);return v.createElement=n,v.updateElement=a,v.setSymbolFontSize=r,v.getSymbolFontSize=s,v.setDescriptionFontSize=o,v.getDescriptionFontSize=c,v.setFontFamily=h,v.getFontFamily=l,v.setWeight=u,v.getWeight=g,v.setText=f,v.getText=d,v.setShowDescription=_,v.getShowDescription=p,v.setFontScaler=x,v}(),Watermark.prototype.constructor=Watermark,Trackball.defaultVisible=!0,Trackball.defaultRadius=4,Trackball.defaultFillColor=tinycolor("#000000"),Trackball.defaultHideIfNoData=!1,Trackball.prototype=function(){function t(t,e){var i=null;if((t||[]).forEach(function(t){angular.equals(t.getXValue(),e)&&(i=t)},this),null===i&&this.hideIfNoData)return null;if(null===i&&t&&t.length>0){var n=t[t.length-1];e>n.getXValue()&&(i=new DataSeriesItem(e,n.getYValue()))}return i}function e(){return ObjectFactory.createInstance(fabric.Circle,{radius:this._radius,fill:this.getColor().toHexString(),stroke:this._borderColor?this._borderColor.toHexString():null,strokeWidth:this._borderWidth})}function i(){var e=this._element;e.visible=!1;var i=this._dataSource.getDataSeries(),n=this._trackballDataSource.getXValue();if(this._visible!==!1&&i&&void 0!==n&&null!==n){var a=t.call(this,i,n);if(null!==a){e.visible=!0;var r=this._pane,s=r.getXAxis().toCoordinate(a.getXValue()),o=this.getYAxis().toCoordinate(a.getYValue()),c=this._borderColor?this._borderColor.toHexString():null,h=this.getColor().toHexString();e.set({left:s-this._radius,top:o-this._radius,stroke:c,fill:h})}}}function n(t){this._borderColor=t}function a(t){this._visible=t,this.update()}var r=Object.create(PlotObject.prototype);return r.createElement=e,r.updateElement=i,r.setBorderColor=n,r.setVisible=a,r}(),Trackball.prototype.constructor=Trackball;var Fmr_Pwi_Charting_ChartPaneArea={Header:0,PlotArea:1,YAxis:2};LastTickLabel.prototype=function(){function t(t,e){var i=e.getLength(),n=t[0],a=e.toCoordinate(n.getXValue());if(a>0&&a<i)return n;var r=ArrayExtensions.quickSearchGreater(t,0,function(t){return e.toCoordinate(t.getXValue())});return t[r]}function e(t,e){var i=e.getLength(),n=t[t.length-1],a=e.toCoordinate(n.getXValue());if(a>0&&a<i)return n;var r=ArrayExtensions.quickSearchSmaller(t,i,function(t){return e.toCoordinate(t.getXValue())});return t[r]}function i(){var i,n,a=this._dataSource.getDataSeries(),r=this._xAxis;if(a&&a.length>0&&r.getMinValue()&&r.getMaxValue()){var s=a[a.length-1];if(r.toCoordinate(s.getXValue())<=0)i=s.getYValue(),n=i;else{var o=a[0];if(r.toCoordinate(o.getXValue())>=r.getLength())i=o.getYValue(),n=i;else{var c=e(a,r);i=c&&c.getYValue(),c=t(a,r),this._percentageModeEnabled&&c&&(n=c.getYValue())}}this._percentageModeEnabled?this.percentage=n&&(i-n)/n*100:this.percentage=void 0}this.setValue(i)}function n(){return this._initialized||(this._initialized=!0,i.call(this),EventBus.on(this._dataSource,"DataSource:datachanged",i,this),EventBus.on(this._xAxis,"Axis:scalechanged",i,this)),YAxisLabel.prototype.getValue.call(this)}function a(){return this._dataSource}function r(t){this._dataSource=t}function s(t){this._percentageModeEnabled!==t&&(this._percentageModeEnabled=t,i.call(this))}function o(){EventBus.off(this._dataSource,"DataSource:datachanged",i,this),EventBus.off(this._xAxis,"Axis:scalechanged",i,this),YAxisLabel.prototype.destroy.call(this)}var c=Object.create(YAxisLabel.prototype);return c.getValue=n,c.getDataSource=a,c.setDataSource=r,c.enablePercentageMode=s,c.destroy=o,c}(),LastTickLabel.prototype.constructor=LastTickLabel;var EnclosedAreaCalculator=function(){function t(t,e,i){for(var n,a=[],r=0;r<t.length;r++){var s=t[r];i(s,e)?(n||(n=[],n.previous=t[r-1],a.push(n)),n.push(s)):(n&&(n.follow=s),n=void 0)}return a}function e(t,e){return t.rawY>e}function i(t,e){return t.rawY<e}function n(t,e){return t.rawY===e}function a(t,e,i){var n=t.rawX,a=t.rawY,r=e.rawX,s=e.rawY,o=GeometryHelper.calculateX(n,a,r,s,i);return new Point(o,i)}function r(t,e,i,r,s,o){e?n(e,o)?t.unshift(e):t.unshift(a(e,i,o)):t.unshift(new Point(i.rawX,o)),s?n(s,o)?t.push(s):t.push(a(r,s,o)):t.push(new Point(r.rawX,o))}function s(e,i,n){var a=t(e,i,n);if(e.length<=1)return a;for(var s=0;s<a.length;s++){var o=a[s],c=o[0],h=o.previous,l=o[o.length-1],u=o.follow;r(o,h,c,l,u,i)}return a}var o={};return o.calculateAbove=function(t,i){return s(t,i,e)},o.calculateBelow=function(t,e){return s(t,e,i)},o.calculateOverlap=function(e,i){return t(e,i,n)},o}();TrackballDataSource.prototype=function(){function t(){return this._xValue}function e(t){var e=this._xValue;this._xValue=t,(null!==e&&void 0!==e||null!==t&&void 0!==t)&&e!==t&&EventBus.trigger(this,"DataSource:datachanged",{oldXValue:e,newXValue:t})}function i(){this.setXValue(null),DataSource.prototype.destroy.call(this)}var n=Object.create(DataSource.prototype);return n.getXValue=t,n.setXValue=e,n.destroy=i,n}(),TrackballDataSource.prototype.constructor=TrackballDataSource;var GraphicsHelper=function(){function t(){}return t.generateHorizontalLine=function(t,e,i,n,a,r){if(void 0!==i&&null!==i){var s=[],o=t.getLength(),c=e.getLength(),h=void 0===r?null:Fmr_Pwi_Charting_LineStyle.getDashArray(r,a),l=e.toCoordinate(i),u=ObjectFactory.createInstance(Point,0,l),g=ObjectFactory.createInstance(Point,o,l);return s.push(["M",Math.round(u.rawX),u.y]),s.push(["L",Math.round(g.rawX),g.y]),ObjectFactory.createInstance(fabric.Path,s,{stroke:n.toRgbString(),strokeWidth:a,strokeDashArray:h,left:0,top:0,width:o,height:c,originX:"center",originY:"center"})}},t.generateVerticalLine=function(t,e,i,n,a,r){if(void 0!==i&&null!==i){var s=[],o=t.getLength(),c=e.getLength(),h=void 0===r?null:Fmr_Pwi_Charting_LineStyle.getDashArray(r,a),l=t.toCoordinate(i),u=ObjectFactory.createInstance(Point,l,0),g=ObjectFactory.createInstance(Point,l,c);return s.push(["M",Math.round(u.rawX),u.y]),s.push(["L",Math.round(g.rawX),g.y]),ObjectFactory.createInstance(fabric.Path,s,{stroke:n.toRgbString(),strokeWidth:a,strokeDashArray:h,left:0,top:0,width:o,height:c,originX:"center",originY:"center"})}},t.generateHistogramSeries=function(t,e,i,n,a,r){if(i&&!(i.length<=0)){var s=ArrayExtensions.quickSearchGreater(i,0,function(e){return t.toCoordinate(e.getXValue())}),o=ArrayExtensions.quickSearchSmaller(i,t.getLength(),function(e){return t.toCoordinate(e.getXValue())});if(s!==-1&&o!==-1){var c=ObjectFactory.createInstance(fabric.Group);void 0===r&&(r=e.getMinValue());for(var h=e.toCoordinate(r),l=t.getBarWidth()-1,u=l/2,g=s;g<=o;g++){var f=i[g],d=t.toCoordinate(f.getXValue()),_=e.toCoordinate(f.getYValue()),p=d-u,x=h-_,v=Math.floor(p),m=Math.max(Math.floor(p+l)-v,1);p=v;var y=ObjectFactory.createInstance(fabric.Rect,{left:p,top:_,width:m,height:x,fill:n.toRgbString(),opacity:a});c.add(y)}return c}}},t.generateLineSeries=function(t,e,i,n,a,r){if(i&&!(i.length<=1)){var s=ArrayExtensions.quickSearchGreater(i,0,function(e){return t.toCoordinate(e.getXValue())}),o=ArrayExtensions.quickSearchSmaller(i,t.getLength(),function(e){return t.toCoordinate(e.getXValue())});if(!(s<=-1||o<=-1||o-s<1)){for(var c=[],h=s;h<=o;h++){var l=i[h];c.push(ObjectFactory.createInstance(fabric.Point,t.toCoordinate(l.date),e.toCoordinate(l.value)))}var u=Fmr_Pwi_Charting_LineStyle.getDashArray(r,a),g=ObjectFactory.createInstance(fabric.Polyline,c,{fill:"",originX:"center",originY:"center",stroke:n.toRgbString(),strokeWidth:a,strokeDashArray:u},!0);return g}}},t.generateLine=function(t,e,i,n,a,r,s){if(i&&n){var o=[],c=t.getLength(),h=e.getLength(),l=void 0===s?null:Fmr_Pwi_Charting_LineStyle.getDashArray(s,r),u=new Point(t.toCoordinate(i.getXValue()),e.toCoordinate(i.getYValue())),g=new Point(t.toCoordinate(n.getXValue()),e.toCoordinate(n.getYValue()));return u.y===g.y?(o.push(["M",Math.round(u.rawX),u.y]),o.push(["L",Math.round(g.rawX),g.y])):u.x===g.x?(o.push(["M",u.x,Math.round(u.rawY)]),o.push(["L",g.x,Math.round(g.rawY)])):(o.push(["M",u.x,u.y]),o.push(["L",g.x,g.y])),ObjectFactory.createInstance(fabric.Path,o,{stroke:a.toRgbString(),strokeWidth:r,strokeDashArray:l,left:0,top:0,width:c,height:h,originX:"center",originY:"center"})}},t.generateRectangle=function(t,e,i,n,a,r,s){if(i&&n){var o=void 0===s?null:Fmr_Pwi_Charting_LineStyle.getDashArray(s,r),c=t.toCoordinate(i.getXValue()),h=t.toCoordinate(n.getXValue()),l=e.toCoordinate(i.getYValue()),u=e.toCoordinate(n.getYValue()),g=Math.round(Math.min(c,h)),f=Math.round(Math.min(l,u)),d=Math.round(Math.abs(h-c)),_=Math.round(Math.abs(u-l)),p=ObjectFactory.createInstance(fabric.Rect,{fill:null,stroke:a.toRgbString(),strokeDashArray:o,strokeWidth:r,left:g,top:f,width:d,height:_});return p}},t}();MessageText.prototype=function(){function t(t){t.forEachObject(function(e){t.remove(e)})}function e(){return ObjectFactory.createInstance(fabric.Group)}function i(){var e=this._element;t(e);var i=ObjectFactory.createInstance(fabric.Text,this._message,{fill:this.getColor().toRgbString(),opacity:this.getOpacity(),fontFamily:this._family,fontSize:this._fontSize,fontWeight:this._weight,originX:"center",lineHeight:1}),n=[i],a=new fabric.Group(n,{originX:"center",originY:"center"}),r=this._pane.getXAxis().getLength(),s=this._pane.getYAxis().getLength();e.initialize([a],{left:0,top:0,width:r,height:s})}function n(t){if(null===t||void 0===t)throw new UndefinedOrNullException("symbolSize");this._fontSize=t}function a(){return this._fontSize}function r(t){if(null===t||void 0===t)throw new UndefinedOrNullException("family");this._family=t}function s(){return this._family}function o(t){if(null===t||void 0===t)throw new UndefinedOrNullException("weight");this._weight=t}function c(){return this._weight}function h(t){if(null===t||void 0===t)throw new UndefinedOrNullException("message");this._message=t}function l(){return this._message}var u=Object.create(PlotObject.prototype);return u.createElement=e,u.updateElement=i,u.setFontSize=n,u.getFontSize=a,u.setFontFamily=r,u.getFontFamily=s,u.setWeight=o,u.getWeight=c,u.setMessage=h,u.getMessage=l,u}(),MessageText.prototype.constructor=MessageText,LineSeriesWithGaps.prototype=function(){function t(){function t(){var t=GraphicsHelper.generateLineSeries(o.getXAxis(),o.getYAxis(),_,h,u,l);t&&i.add(t)}function e(t){return r=g.toCoordinate(c[t-1].getXValue()),s=g.toCoordinate(c[t].getXValue()),Math.abs(s-r)}var i=this._element;i.forEachObject(function(t){i.remove(t)});var n,a,r,s,o=this._pane,c=this._dataSource.getDataSeries(),h=this.getColor(),l=this.getLineStyle(),u=this.getLineWidth(),g=o.getXAxis(),f=Number.MAX_VALUE;for(n=1;n<c.length;n++)a=e(n),a<f&&(f=a);var d=1.5*f,_=ObjectFactory.createInstance(DataSeries);for(n=0;n<c.length;n++)n>0&&(a=e(n),a>d&&(t(),_=ObjectFactory.createInstance(DataSeries))),_.push(c[n]);_.length>0&&t()}var e=Object.create(LineSeries.prototype);return e.updateElement=t,e}(),LineSeriesWithGaps.prototype.constructor=LineSeriesWithGaps,chartingModule.directive("yAxisAbbrMarker",["getTemplatesBasePath",function(t){return{restrict:"E",scope:{context:"="},templateUrl:function(e){return t(e)+"yaxisabbrmarker.html"}}}]),DataSeriesLabel.prototype=function(){function t(){this.value=void 0;for(var t=this._trackballDataSource.getXValue(),e=this._seriesDataSource.getDataSeries()||[],i=e.length-1;i>=0;i--){var n=e[i];if(angular.equals(n.getXValue(),t))return void(this.value=n.getYValue())}if(e.length>0&&this.showLastValue){var a=e[e.length-1];t>a.getXValue()&&(this.value=a.getYValue())}}function e(){EventBus.trigger(this,"DataSeriesLabel:deleted")}function i(){EventBus.trigger(this,"DataSeriesLabel:modified")}function n(){EventBus.trigger(this,"DataSeriesLabel:showed")}function a(){EventBus.trigger(this,"DataSeriesLabel:hid")}var r=Object.create(HeaderLabel.prototype);return r.remove=e,r.update=t,r.modify=i,r.show=n,r.hide=a,r}(),DataSeriesLabel.prototype.constructor=DataSeriesLabel,YAxisLeftMinMaxManager.prototype=function(){function t(t,e,i){return e?this.calculateMinMax(t,e,i):t}function e(){if(!this._comparisonMinMaxSource){var t=ObjectFactory.createInstance(DataSource,"ComparisonMinMaxDataSource","ComparisonMinMaxDataSource");this._comparisonMinMaxSource=ObjectFactory.createInstance(AxisMinMaxSource,t),this._comparisonMinMaxSource._minimum=0,this._comparisonMinMaxSource._maximum=0,this._comparisonMinMaxSource.getMinMax=function(){return new Range(this._minimum,this._maximum)},this._sources.splice(this.getIndex(this._sources,this._comparisonMinMaxSource),0,this._comparisonMinMaxSource)}}function i(){if(0===this._cachedSources.length){var t=this._sources.indexOf(this._comparisonMinMaxSource);t>=0&&(this._sources.splice(t,1),this._comparisonMinMaxSource.destroy(),this._comparisonMinMaxSource=void 0)}}function n(){e.call(this);var i;this._cachedSources.forEach(function(e){var n=e.getMinMax(this._yAxisLeft);i=t.call(this,i,n,e.forceApply())},this),i&&(this._comparisonMinMaxSource._minimum=i.min,this._comparisonMinMaxSource._maximum=i.max),this.recalculate()}function a(t){t&&"DataSeriesAxisMinMaxSource"===t.constructor.name&&(this._cachedSources.splice(this.getIndex(this._cachedSources,t),0,t),EventBus.on(t,"AxisMinMaxSource:minmaxchanged",n,this))}function r(t){if(t&&"DataSeriesAxisMinMaxSource"===t.constructor.name){var e=!1,a=this._cachedSources.indexOf(t);a>=0&&(this._cachedSources.splice(a,1),EventBus.off(t,"AxisMinMaxSource:minmaxchanged",n,this),e=!0),i.call(this),e&&n.call(this)}}var s=Object.create(AxisMinMaxManager.prototype);return s.registerComparisonMinMaxSource=a,s.unregisterComparisonMinMaxSource=r,s.updateGlobalComparisonMinMaxSource=n,s}(),YAxisLeftMinMaxManager.prototype.constructor=YAxisLeftMinMaxManager,YAxisTickSynchronizedCalculator.prototype=function(){function t(t,e,i){var n=i?4:2,a=i?1e-4:.01;return NumberExtensions.round(e/t,n)+a}function e(t,e){if(!t)return[];var n=t.getMinValue(),a=t.getMaxValue();return i.call(this,n,a,e)}function i(e,i,n){if(!this.validateMinMax(e,i)||!n)return[];this.validateMinMaxRange(e,i),i=Math.max(e,i);var a=this.truncate(i-e),r=a<1,s=t.call(this,n-1,a,r),o=this.truncate(e),c=this.generateTicks(o,e,i,s);return this.addToMinimumCount(o,s,c,this._minimumCount),c}var n=Object.create(YAxisTickCalculator.prototype);return n.calculate=e,n.calculateTicks=i,n}(),YAxisTickSynchronizedCalculator.prototype.constructor=YAxisTickSynchronizedCalculator;