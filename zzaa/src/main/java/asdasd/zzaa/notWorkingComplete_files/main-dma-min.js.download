/*
 RequireJS 2.1.9 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
 RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
 RequireJS text 0.24.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(a){function b(a){return"[object Function]"===N.call(a)}function g(a){return"[object Array]"===N.call(a)}function c(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function e(a,b){if(a){var c;for(c=a.length-1;-1<c&&(!a[c]||!b(a[c],c,a));c-=1);}}function d(a,b){return P.call(a,b)}function h(a,b){return d(a,b)&&a[b]}function f(a,b){for(var c in a)if(d(a,c)&&b(a[c],c))break}function j(a,b,c,e){b&&f(b,function(b,f){if(c||!d(a,f))e&&"string"!==typeof b?(a[f]||(a[f]={}),j(a[f],
b,c,e)):a[f]=b});return a}function k(a,b){return function(){return b.apply(a,arguments)}}function l(a){throw a;}function p(b){if(!b)return b;var d=a;c(b.split("."),function(a){d=d[a]});return d}function m(a,b,c,d){b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);b.requireType=a;b.requireModules=d;c&&(b.originalError=c);return b}function n(e){function n(a,b,c){var d,f,e,j,k,g,l,m=b&&b.split("/");d=m;var p=T.map,r=p&&p["*"];if(a&&"."===a.charAt(0))if(b){d=h(T.pkgs,b)?m=[b]:m.slice(0,m.length-
1);b=a=d.concat(a.split("/"));for(d=0;b[d];d+=1)if(f=b[d],"."===f)b.splice(d,1),d-=1;else if(".."===f)if(1===d&&(".."===b[2]||".."===b[0]))break;else 0<d&&(b.splice(d-1,2),d-=2);d=h(T.pkgs,b=a[0]);a=a.join("/");d&&a===b+"/"+d.main&&(a=b)}else 0===a.indexOf("./")&&(a=a.substring(2));if(c&&p&&(m||r)){b=a.split("/");for(d=b.length;0<d;d-=1){e=b.slice(0,d).join("/");if(m)for(f=m.length;0<f;f-=1)if(c=h(p,m.slice(0,f).join("/")))if(c=h(c,e)){j=c;k=d;break}if(j)break;!g&&(r&&h(r,e))&&(g=h(r,e),l=d)}!j&&
g&&(j=g,k=l);j&&(b.splice(0,k,j),a=b.join("/"))}return a}function s(a){W&&c(document.getElementsByTagName("script"),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===ka.contextName)return b.parentNode.removeChild(b),!0})}function v(a){var b=h(T.paths,a);if(b&&g(b)&&1<b.length)return b.shift(),ka.require.undef(a),ka.require([a]),!0}function A(a){var b,c=a?a.indexOf("!"):-1;-1<c&&(b=a.substring(0,c),a=a.substring(c+1,a.length));return[b,a]}function z(a,
b,c,d){var f,e,j=null,k=b?b.name:null,g=a,l=!0,m="";a||(l=!1,a="_@r"+(ma+=1));a=A(a);j=a[0];a=a[1];j&&(j=n(j,k,d),e=h(ra,j));a&&(j?m=e&&e.normalize?e.normalize(a,function(a){return n(a,k,d)}):n(a,k,d):(m=n(a,k,d),a=A(m),j=a[0],m=a[1],c=!0,f=ka.nameToUrl(m)));c=j&&!e&&!c?"_unnormalized"+(aa+=1):"";return{prefix:j,name:m,parentMap:b,unnormalized:!!c,url:f,originalName:g,isDefine:l,id:(j?j+"!"+m:m)+c}}function w(a){var b=a.id,c=h(ia,b);c||(c=ia[b]=new ka.Module(a));return c}function y(a,b,c){var f=a.id,
e=h(ia,f);if(d(ra,f)&&(!e||e.defineEmitComplete))"defined"===b&&c(ra[f]);else if(e=w(a),e.error&&"error"===b)c(e.error);else e.on(b,c)}function B(a,b){var d=a.requireModules,f=!1;if(b)b(a);else if(c(d,function(b){if(b=h(ia,b))b.error=a,b.events.error&&(f=!0,b.emit("error",a))}),!f)r.onError(a)}function ea(){va.length&&(U.apply(Ka,[Ka.length-1,0].concat(va)),va=[])}function la(a){delete ia[a];delete qa[a]}function J(a,b,d){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,c(a.depMaps,function(c,
f){var e=c.id,j=h(ia,e);j&&(!a.depMatched[f]&&!d[e])&&(h(b,e)?(a.defineDep(f,ra[e]),a.check()):J(j,b,d))}),d[f]=!0)}function I(){var a,b,d,e,j=(d=1E3*T.waitSeconds)&&ka.startTime+d<(new Date).getTime(),h=[],k=[],g=!1,l=!0;if(!Sa){Sa=!0;f(qa,function(c){a=c.map;b=a.id;if(c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&j)v(b)?g=e=!0:(h.push(b),s(b));else if(!c.inited&&(c.fetched&&a.isDefine)&&(g=!0,!a.prefix))return l=!1});if(j&&h.length)return d=m("timeout","Load timeout for modules: "+h,
null,h),d.contextName=ka.contextName,B(d);l&&c(k,function(a){J(a,{},{})});if((!j||e)&&g)if((W||ca)&&!oa)oa=setTimeout(function(){oa=0;I()},50);Sa=!1}}function S(a){d(ra,a[0])||w(z(a[0],null,!0)).init(a[1],a[2])}function N(a){a=a.currentTarget||a.srcElement;var b=ka.onScriptLoad;a.detachEvent&&!Z?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=ka.onScriptError;(!a.detachEvent||Z)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}
function P(){var a;for(ea();Ka.length;){a=Ka.shift();if(null===a[0])return B(m("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));S(a)}}var Sa,Ha,ka,na,oa,T={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},ia={},qa={},ja={},Ka=[],ra={},Fa={},ma=1,aa=1;na={require:function(a){return a.require?a.require:a.require=ka.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?a.exports:a.exports=ra[a.map.id]={}},module:function(a){return a.module?
a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=h(T.pkgs,a.map.id);return(b?h(T.config,a.map.id+"/"+b.main):h(T.config,a.map.id))||{}},exports:ra[a.map.id]}}};Ha=function(a){this.events=h(ja,a.id)||{};this.map=a;this.shim=h(T.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Ha.prototype={init:function(a,b,c,d){d=d||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&(c=k(this,function(a){this.emit("error",
a)}));this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=d.ignore;d.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;ka.startTime=(new Date).getTime();var a=this.map;if(this.shim)ka.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],k(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?
this.callPlugin():this.load()}},load:function(){var a=this.map.url;Fa[a]||(Fa[a]=!0,ka.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,c,d=this.map.id;c=this.depExports;var f=this.exports,e=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(b(e)){if(this.events.error&&this.map.isDefine||r.onError!==l)try{f=ka.execCb(d,e,c,f)}catch(j){a=j}else f=ka.execCb(d,e,c,f);this.map.isDefine&&
((c=this.module)&&void 0!==c.exports&&c.exports!==this.exports?f=c.exports:void 0===f&&this.usingExports&&(f=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",B(this.error=a)}else f=e;this.exports=f;if(this.map.isDefine&&!this.ignore&&(ra[d]=f,r.onResourceLoad))r.onResourceLoad(ka,this.map,this.depMaps);la(d);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=
!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,c=z(a.prefix);this.depMaps.push(c);y(c,"defined",k(this,function(c){var e,j;j=this.map.name;var g=this.map.parentMap?this.map.parentMap.name:null,l=ka.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(c.normalize&&(j=c.normalize(j,function(a){return n(a,g,!0)})||""),c=z(a.prefix+"!"+j,this.map.parentMap),y(c,"defined",k(this,function(a){this.init([],
function(){return a},null,{enabled:!0,ignore:!0})})),j=h(ia,c.id)){this.depMaps.push(c);if(this.events.error)j.on("error",k(this,function(a){this.emit("error",a)}));j.enable()}}else e=k(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=k(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];f(ia,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&la(a.map.id)});B(a)}),e.fromText=k(this,function(c,f){var j=a.name,h=z(j),k=H;f&&(c=f);k&&(H=!1);w(h);d(T.config,
b)&&(T.config[j]=T.config[b]);try{r.exec(c)}catch(g){return B(m("fromtexteval","fromText eval for "+b+" failed: "+g,g,[b]))}k&&(H=!0);this.depMaps.push(h);ka.completeLoad(j);l([j],e)}),c.load(a.name,l,e,T)}));ka.enable(c,this);this.pluginMaps[c.id]=c},enable:function(){qa[this.map.id]=this;this.enabling=this.enabled=!0;c(this.depMaps,k(this,function(a,b){var c,f;if("string"===typeof a){a=z(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=h(na,a.id)){this.depExports[b]=
c(this);return}this.depCount+=1;y(a,"defined",k(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&y(a,"error",k(this,this.errback))}c=a.id;f=ia[c];!d(na,c)&&(f&&!f.enabled)&&ka.enable(a,this)}));f(this.pluginMaps,k(this,function(a){var b=h(ia,a.id);b&&!b.enabled&&ka.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){c(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};ka=
{config:T,contextName:e,registry:ia,defined:ra,urlFetched:Fa,defQueue:Ka,Module:Ha,makeModuleMap:z,nextTick:r.nextTick,onError:B,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=T.pkgs,d=T.shim,e={paths:!0,config:!0,map:!0};f(a,function(a,b){e[b]?"map"===b?(T.map||(T.map={}),j(T[b],a,!0,!0)):j(T[b],a,!0):T[b]=a});a.shim&&(f(a.shim,function(a,b){g(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn)a.exportsFn=ka.makeShimExports(a);d[b]=a}),T.shim=
d);a.packages&&(c(a.packages,function(a){a="string"===typeof a?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(V,"").replace(O,"")}}),T.pkgs=b);f(ia,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=z(b))});if(a.deps||a.callback)ka.require(a.deps||[],a.callback)},makeShimExports:function(b){return function(){var c;b.init&&(c=b.init.apply(a,arguments));return c||b.exports&&p(b.exports)}},makeRequire:function(a,c){function f(j,h,k){var g,l;c.enableBuildCallback&&
(h&&b(h))&&(h.__requireJsBuild=!0);if("string"===typeof j){if(b(h))return B(m("requireargs","Invalid require call"),k);if(a&&d(na,j))return na[j](ia[a.id]);if(r.get)return r.get(ka,j,a,f);g=z(j,a,!1,!0);g=g.id;return!d(ra,g)?B(m("notloaded",'Module name "'+g+'" has not been loaded yet for context: '+e+(a?"":". Use require([])"))):ra[g]}P();ka.nextTick(function(){P();l=w(z(null,a));l.skipMap=c.skipMap;l.init(j,h,k,{enabled:!0});I()});return f}c=c||{};j(f,{isBrowser:W,toUrl:function(b){var c,d=b.lastIndexOf("."),
f=b.split("/")[0];if(-1!==d&&(!("."===f||".."===f)||1<d))c=b.substring(d,b.length),b=b.substring(0,d);return ka.nameToUrl(n(b,a&&a.id,!0),c,!0)},defined:function(b){return d(ra,z(b,a,!1,!0).id)},specified:function(b){b=z(b,a,!1,!0).id;return d(ra,b)||d(ia,b)}});a||(f.undef=function(b){ea();var c=z(b,a,!0),d=h(ia,b);s(b);delete ra[b];delete Fa[c.url];delete ja[b];d&&(d.events.defined&&(ja[b]=d.events),la(b))});return f},enable:function(a){h(ia,a.id)&&w(a).enable()},completeLoad:function(a){var b,c,
f=h(T.shim,a)||{},e=f.exports;for(ea();Ka.length;){c=Ka.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);S(c)}c=h(ia,a);if(!b&&!d(ra,a)&&c&&!c.inited){if(T.enforceDefine&&(!e||!p(e)))return v(a)?void 0:B(m("nodefine","No define call for "+a,null,[a]));S([a,f.deps||[],f.exportsFn])}I()},nameToUrl:function(a,b,c){var d,f,e,j,k,l;if(r.jsExtRegExp.test(a))j=a+(b||"");else{d=T.paths;f=T.pkgs;j=a.split("/");for(k=j.length;0<k;k-=1)if(l=j.slice(0,k).join("/"),e=h(f,l),l=h(d,l)){g(l)&&
(l=l[0]);j.splice(0,k,l);break}else if(e){a=a===e.name?e.location+"/"+e.main:e.location;j.splice(0,k,a);break}j=j.join("/");j+=b||(/^data\:|\?/.test(j)||c?"":".js");j=("/"===j.charAt(0)||j.match(/^[\w\+\.\-]+:/)?"":T.baseUrl)+j}return T.urlArgs?j+((-1===j.indexOf("?")?"?":"&")+T.urlArgs):j},load:function(a,b){r.load(ka,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||R.test((a.currentTarget||a.srcElement).readyState))D=null,a=N(a),ka.completeLoad(a.id)},
onScriptError:function(a){var b=N(a);if(!v(b.id))return B(m("scripterror","Script error for: "+b.id,a,[b.id]))}};ka.require=ka.makeRequire();return ka}var r,s,v,A,w,z,D,y,B,I,S=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,J=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,O=/\.js$/,V=/^\.\//;s=Object.prototype;var N=s.toString,P=s.hasOwnProperty,U=Array.prototype.splice,W=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ca=!W&&"undefined"!==typeof importScripts,R=W&&
"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Z="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),ea={},la={},va=[],H=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(b(requirejs))return;la=requirejs;requirejs=void 0}"undefined"!==typeof require&&!b(require)&&(la=require,require=void 0);r=requirejs=function(a,b,c,d){var f,e="_";!g(a)&&"string"!==typeof a&&(f=a,g(b)?(a=b,b=c,c=d):a=[]);f&&f.context&&(e=f.context);(d=h(ea,e))||(d=ea[e]=
r.s.newContext(e));f&&d.configure(f);return d.require(a,b,c)};r.config=function(a){return r(a)};r.nextTick="undefined"!==typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()};require||(require=r);r.version="2.1.9";r.jsExtRegExp=/^\/|:|\?|\.js$/;r.isBrowser=W;s=r.s={contexts:ea,newContext:n};r({});c(["toUrl","undef","defined","specified"],function(a){r[a]=function(){var b=ea._;return b.require[a].apply(b,arguments)}});if(W&&(v=s.head=document.getElementsByTagName("head")[0],A=document.getElementsByTagName("base")[0]))v=
s.head=A.parentNode;r.onError=l;r.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");b.type=a.scriptType||"text/javascript";b.charset="utf-8";b.async=!0;return b};r.load=function(a,b,c){var d=a&&a.config||{};if(W)return d=r.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),d.attachEvent&&!(d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code"))&&
!Z?(H=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)):(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)),d.src=c,y=d,A?v.insertBefore(d,A):v.appendChild(d),y=null,d;if(ca)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(m("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}};W&&!la.skipDataMain&&e(document.getElementsByTagName("script"),function(a){v||(v=a.parentNode);if(w=a.getAttribute("data-main"))return B=w,la.baseUrl||(z=B.split("/"),
B=z.pop(),I=z.length?z.join("/")+"/":"./",la.baseUrl=I),B=B.replace(O,""),r.jsExtRegExp.test(B)&&(B=w),la.deps=la.deps?la.deps.concat(B):[B],!0});define=function(a,c,d){var f,j;"string"!==typeof a&&(d=c,c=a,a=null);g(c)||(d=c,c=null);!c&&b(d)&&(c=[],d.length&&(d.toString().replace(S,"").replace(J,function(a,b){c.push(b)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(H){if(!(f=y))D&&"interactive"===D.readyState||e(document.getElementsByTagName("script"),function(a){if("interactive"===
a.readyState)return D=a}),f=D;f&&(a||(a=f.getAttribute("data-requiremodule")),j=ea[f.getAttribute("data-requirecontext")])}(j?j.defQueue:va).push([a,c,d])};define.amd={jQuery:!0};r.exec=function(a){return eval(a)};r(la)}})(this);define("lib/require-2.1.9",function(){});
(function(a,b){function g(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(Db,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Q.test(d)?q.parseJSON(d):d}catch(f){}q.data(a,c,d)}else d=b;return d}function c(a){for(var b in a)if(!("data"===b&&q.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function e(){return!1}function d(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function f(a,
b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){b=b||0;if(q.isFunction(b))return q.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return q.grep(a,function(a){return a===b===c});if("string"===typeof b){var d=q.grep(a,function(a){return 1===a.nodeType});if(ub.test(b))return q.filter(b,d,!c);b=q.filter(b,d)}return q.grep(a,function(a){return 0<=q.inArray(a,b)===c})}function k(a){var b=ed.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());
return a}function l(a,b){if(1===b.nodeType&&q.hasData(a)){var c,d,f;d=q._data(a);var e=q._data(b,d),j=d.events;if(j)for(c in delete e.handle,e.events={},j){d=0;for(f=j[c].length;d<f;d++)q.event.add(b,c,j[c][d])}e.data&&(e.data=q.extend({},e.data))}}function p(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),q.support.html5Clone&&(a.innerHTML&&!q.trim(b.innerHTML))&&
(b.innerHTML=a.innerHTML)):"input"===c&&fd.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(q.expando))}function m(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function n(a){fd.test(a.type)&&(a.defaultChecked=
a.checked)}function r(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,f=Kc.length;f--;)if(b=Kc[f]+c,b in a)return b;return d}function s(a,b){a=b||a;return"none"===q.css(a,"display")||!q.contains(a.ownerDocument,a)}function v(a,b){for(var c,d,f=[],e=0,j=a.length;e<j;e++)c=a[e],c.style&&(f[e]=q._data(c,"olddisplay"),b?(!f[e]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&s(c)&&(f[e]=q._data(c,"olddisplay",D(c.nodeName)))):(d=vb(c,"display"),!f[e]&&"none"!==
d&&q._data(c,"olddisplay",d)));for(e=0;e<j;e++)if(c=a[e],c.style&&(!b||"none"===c.style.display||""===c.style.display))c.style.display=b?f[e]||"":"none";return a}function A(a,b,c){return(a=gd.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function w(a,b,c,d){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=q.css(a,c+hc[b],!0)),d?("content"===c&&(f-=parseFloat(vb(a,"padding"+hc[b]))||0),"margin"!==c&&(f-=parseFloat(vb(a,"border"+hc[b]+"Width"))||0)):(f+=parseFloat(vb(a,
"padding"+hc[b]))||0,"padding"!==c&&(f+=parseFloat(vb(a,"border"+hc[b]+"Width"))||0));return f}function z(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,f=!0,e=q.support.boxSizing&&"border-box"===q.css(a,"boxSizing");if(0>=d||null==d){d=vb(a,b);if(0>d||null==d)d=a.style[b];if(Kb.test(d))return d;f=e&&(q.support.boxSizingReliable||d===a.style[b]);d=parseFloat(d)||0}return d+w(a,b,c||(e?"border":"content"),f)+"px"}function D(a){if(Uc[a])return Uc[a];var b=q("<"+a+">").appendTo(R.body),c=b.css("display");
b.remove();if("none"===c||""===c){wb=R.body.appendChild(wb||q.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!oc||!wb.createElement)oc=(wb.contentWindow||wb.contentDocument).document,oc.write("<!doctype html><html><body>"),oc.close();b=oc.body.appendChild(oc.createElement(a));c=vb(b,"display");R.body.removeChild(wb)}return Uc[a]=c}function y(a,b,c,d){var f;if(q.isArray(b))q.each(b,function(b,f){c||yd.test(a)?d(a,f):y(a+"["+("object"===typeof f?b:"")+"]",f,c,d)});else if(!c&&
"object"===q.type(b))for(f in b)y(a+"["+f+"]",b[f],c,d);else d(a,b)}function B(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,f,e=b.toLowerCase().split(Ca),j=0,h=e.length;if(q.isFunction(c))for(;j<h;j++)d=e[j],(f=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[f?"unshift":"push"](c)}}function I(a,c,d,f,e,j){e=e||c.dataTypes[0];j=j||{};j[e]=!0;var h;e=a[e];for(var u=0,k=e?e.length:0,g=a===Vc;u<k&&(g||!h);u++)h=e[u](c,d,f),"string"===typeof h&&(!g||j[h]?h=b:(c.dataTypes.unshift(h),
h=I(a,c,d,f,h,j)));if((g||!h)&&!j["*"])h=I(a,c,d,f,"*",j);return h}function S(a,c){var d,f,e=q.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((e[d]?a:f||(f={}))[d]=c[d]);f&&q.extend(!0,a,f)}function J(){try{return new a.XMLHttpRequest}catch(b){}}function O(){setTimeout(function(){pc=b},0);return pc=q.now()}function V(a,b,c){var d,f=0,e=Lc.length,j=q.Deferred().always(function(){delete h.elem}),h=function(){for(var b=pc||O(),b=Math.max(0,u.startTime+u.duration-b),c=1-(b/u.duration||0),d=0,f=u.tweens.length;d<
f;d++)u.tweens[d].run(c);j.notifyWith(a,[u,c,b]);if(1>c&&f)return b;j.resolveWith(a,[u]);return!1},u=j.promise({elem:a,props:q.extend({},b),opts:q.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:pc||O(),duration:c.duration,tweens:[],createTween:function(b,c){var d=q.Tween(a,u.opts,b,c,u.opts.specialEasing[b]||u.opts.easing);u.tweens.push(d);return d},stop:function(b){for(var c=0,d=b?u.tweens.length:0;c<d;c++)u.tweens[c].run(1);b?j.resolveWith(a,[u,b]):j.rejectWith(a,
[u,b]);return this}});b=u.props;c=u.opts.specialEasing;var k,g,l,C;for(d in b)if(k=q.camelCase(d),g=c[k],l=b[d],q.isArray(l)&&(g=l[1],l=b[d]=l[0]),d!==k&&(b[k]=l,delete b[d]),(C=q.cssHooks[k])&&"expand"in C)for(d in l=C.expand(l),delete b[k],l)d in b||(b[d]=l[d],c[d]=g);else c[k]=g;for(;f<e;f++)if(d=Lc[f].call(u,a,b,u.opts))return d;var m=u;q.each(b,function(a,b){for(var c=(Ac[a]||[]).concat(Ac["*"]),d=0,f=c.length;d<f&&!c[d].call(m,a,b);d++);});q.isFunction(u.opts.start)&&u.opts.start.call(a,u);
q.fx.timer(q.extend(h,{anim:u,queue:u.opts.queue,elem:a}));return u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function N(a,b,c,d,f){return new N.prototype.init(a,b,c,d,f)}function P(a,b){var c,d={height:a},f=0;for(b=b?1:0;4>f;f+=2-b)c=hc[f],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function U(a){return q.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W,ca,R=a.document,Z=a.location,ea=a.navigator,la=
a.jQuery,va=a.$,H=Array.prototype.push,M=Array.prototype.slice,F=Array.prototype.indexOf,Ba=Object.prototype.toString,X=Object.prototype.hasOwnProperty,ta=String.prototype.trim,q=function(a,b){return new q.fn.init(a,b,W)},Y=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,sa=/\S/,Ca=/\s+/,Aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Va=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,za=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,cb=/^[\],:{}\s]*$/,Na=/(?:^|:|,)(?:\s*\[)+/g,tb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,db=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
Sa=/^-ms-/,Ha=/-([\da-z])/gi,ka=function(a,b){return(b+"").toUpperCase()},na=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",na,!1),q.ready()):"complete"===R.readyState&&(R.detachEvent("onreadystatechange",na),q.ready())},oa={};q.fn=q.prototype={constructor:q,init:function(a,c,d){var f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){if((f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Va.exec(a))&&
(f[1]||!c)){if(f[1])return a=(c=c instanceof q?c[0]:c)&&c.nodeType?c.ownerDocument||c:R,a=q.parseHTML(f[1],a,!0),za.test(f[1])&&q.isPlainObject(c)&&this.attr.call(a,c,!0),q.merge(this,a);if((c=R.getElementById(f[2]))&&c.parentNode){if(c.id!==f[2])return d.find(a);this.length=1;this[0]=c}this.context=R;this.selector=a;return this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}if(q.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return q.makeArray(a,
this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return M.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){a=q.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")");return a},each:function(a,b){return q.each(this,a,b)},ready:function(a){q.ready.promise().done(a);
return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(a){return this.pushStack(q.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:[].sort,splice:[].splice};q.fn.init.prototype=q.fn;q.extend=q.fn.extend=function(){var a,
c,d,f,e,j=arguments[0]||{},u=1,h=arguments.length,k=!1;"boolean"===typeof j&&(k=j,j=arguments[1]||{},u=2);"object"!==typeof j&&!q.isFunction(j)&&(j={});h===u&&(j=this,--u);for(;u<h;u++)if(null!=(a=arguments[u]))for(c in a)d=j[c],f=a[c],j!==f&&(k&&f&&(q.isPlainObject(f)||(e=q.isArray(f)))?(e?(e=!1,d=d&&q.isArray(d)?d:[]):d=d&&q.isPlainObject(d)?d:{},j[c]=q.extend(k,d,f)):f!==b&&(j[c]=f));return j};q.extend({noConflict:function(b){a.$===q&&(a.$=va);b&&a.jQuery===q&&(a.jQuery=la);return q},isReady:!1,
readyWait:1,holdReady:function(a){a?q.readyWait++:q.ready(!0)},ready:function(a){if(!(!0===a?--q.readyWait:q.isReady)){if(!R.body)return setTimeout(q.ready,1);q.isReady=!0;!0!==a&&0<--q.readyWait||(ca.resolveWith(R,[q]),q.fn.trigger&&q(R).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===q.type(a)},isArray:Array.isArray||function(a){return"array"===q.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},
type:function(a){return null==a?String(a):oa[Ba.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==q.type(a)||a.nodeType||q.isWindow(a))return!1;try{if(a.constructor&&!X.call(a,"constructor")&&!X.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===b||X.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){var d;if(!a||"string"!==typeof a)return null;"boolean"===
typeof b&&(c=b,b=0);b=b||R;if(d=za.exec(a))return[b.createElement(d[1])];d=q.buildFragment([a],b,c?null:[]);return q.merge([],(d.cacheable?q.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=q.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(cb.test(b.replace(tb,"@").replace(db,"]").replace(Na,"")))return(new Function("return "+b))();q.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;if(!c||"string"!==typeof c)return null;try{a.DOMParser?
(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(e){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&q.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&sa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Sa,"ms-").replace(Ha,ka)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},
each:function(a,c,d){var f,e=0,j=a.length,u=j===b||q.isFunction(a);if(d)if(u)for(f in a){if(!1===c.apply(a[f],d))break}else for(;e<j&&!1!==c.apply(a[e++],d););else if(u)for(f in a){if(!1===c.call(a[f],f,a[f]))break}else for(;e<j&&!1!==c.call(a[e],e,a[e++]););return a},trim:ta&&!ta.call("\ufeff\u00a0")?function(a){return null==a?"":ta.call(a)}:function(a){return null==a?"":(a+"").replace(Aa,"")},makeArray:function(a,b){var c,d=b||[];null!=a&&(c=q.type(a),null==a.length||"string"===c||"function"===
c||"regexp"===c||q.isWindow(a)?H.call(d,a):q.merge(d,a));return d},inArray:function(a,b,c){var d;if(b){if(F)return F.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,f=a.length,e=0;if("number"===typeof d)for(;e<d;e++)a[f++]=c[e];else for(;c[e]!==b;)a[f++]=c[e++];a.length=f;return a},grep:function(a,b,c){var d,f=[],e=0,j=a.length;for(c=!!c;e<j;e++)d=!!b(a[e],e),c!==d&&f.push(a[e]);return f},map:function(a,c,d){var f,
e,j=[],u=0,h=a.length;if(a instanceof q||h!==b&&"number"===typeof h&&(0<h&&a[0]&&a[h-1]||0===h||q.isArray(a)))for(;u<h;u++)f=c(a[u],u,d),null!=f&&(j[j.length]=f);else for(e in a)f=c(a[e],e,d),null!=f&&(j[j.length]=f);return j.concat.apply([],j)},guid:1,proxy:function(a,c){var d,f;"string"===typeof c&&(d=a[c],c=a,a=d);if(!q.isFunction(a))return b;f=M.call(arguments,2);d=function(){return a.apply(c,f.concat(M.call(arguments)))};d.guid=a.guid=a.guid||q.guid++;return d},access:function(a,c,d,f,e,j,u){var h,
k=null==d,g=0,l=a.length;if(d&&"object"===typeof d){for(g in d)q.access(a,c,g,d[g],1,j,f);e=1}else if(f!==b){h=u===b&&q.isFunction(f);k&&(h?(h=c,c=function(a,b,c){return h.call(q(a),c)}):(c.call(a,f),c=null));if(c)for(;g<l;g++)c(a[g],d,h?f.call(a[g],g,c(a[g],d)):f,u);e=1}return e?a:k?c.call(a):l?c(a[0],d):j},now:function(){return(new Date).getTime()}});q.ready.promise=function(b){if(!ca)if(ca=q.Deferred(),"complete"===R.readyState)setTimeout(q.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",
na,!1),a.addEventListener("load",q.ready,!1);else{R.attachEvent("onreadystatechange",na);a.attachEvent("onload",q.ready);var c=!1;try{c=null==a.frameElement&&R.documentElement}catch(d){}c&&c.doScroll&&function xd(){if(!q.isReady){try{c.doScroll("left")}catch(a){return setTimeout(xd,50)}q.ready()}}()}return ca.promise(b)};q.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){oa["[object "+b+"]"]=b.toLowerCase()});W=q(R);var T={};q.Callbacks=function(a){var c;if("string"===
typeof a){if(!(c=T[a])){c=a;var d=T[c]={};q.each(c.split(Ca),function(a,b){d[b]=!0});c=d}}else c=q.extend({},a);a=c;var f,e,j,u,h,k,g=[],l=!a.once&&[],C=function(b){f=a.memory&&b;e=!0;k=u||0;u=0;h=g.length;for(j=!0;g&&k<h;k++)if(!1===g[k].apply(b[0],b[1])&&a.stopOnFalse){f=!1;break}j=!1;g&&(l?l.length&&C(l.shift()):f?g=[]:m.disable())},m={add:function(){if(g){var b=g.length;(function zd(b){q.each(b,function(b,c){var d=q.type(c);"function"===d?(!a.unique||!m.has(c))&&g.push(c):c&&(c.length&&"string"!==
d)&&zd(c)})})(arguments);j?h=g.length:f&&(u=b,C(f))}return this},remove:function(){g&&q.each(arguments,function(a,b){for(var c;-1<(c=q.inArray(b,g,c));)g.splice(c,1),j&&(c<=h&&h--,c<=k&&k--)});return this},has:function(a){return-1<q.inArray(a,g)},empty:function(){g=[];return this},disable:function(){g=l=f=b;return this},disabled:function(){return!g},lock:function(){l=b;f||m.disable();return this},locked:function(){return!l},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];if(g&&(!e||l))j?
l.push(b):C(b);return this},fire:function(){m.fireWith(this,arguments);return this},fired:function(){return!!e}};return m};q.extend({Deferred:function(a){var b=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){f.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return q.Deferred(function(c){q.each(b,function(b,
d){var e=d[0],j=a[b];f[d[1]](q.isFunction(j)?function(){var a=j.apply(this,arguments);if(a&&q.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[e+"With"](this===f?c:this,[a])}:c[e])});a=null}).promise()},promise:function(a){return null!=a?q.extend(a,d):d}},f={};d.pipe=d.then;q.each(b,function(a,e){var j=e[2],u=e[3];d[e[1]]=j.add;u&&j.add(function(){c=u},b[a^1][2].disable,b[2][2].lock);f[e[0]]=j.fire;f[e[0]+"With"]=j.fireWith});d.promise(f);a&&a.call(f,f);return f},
when:function(a){var b=0,c=M.call(arguments),d=c.length,f=1!==d||a&&q.isFunction(a.promise)?d:0,e=1===f?a:q.Deferred(),j=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?M.call(arguments):d;c===u?e.notifyWith(b,c):--f||e.resolveWith(b,c)}},u,h,k;if(1<d){u=Array(d);h=Array(d);for(k=Array(d);b<d;b++)c[b]&&q.isFunction(c[b].promise)?c[b].promise().done(j(b,k,c)).fail(e.reject).progress(j(b,h,u)):--f}f||e.resolveWith(k,c);return e.promise()}});var ia=q,qa;var ja,Ka,ra,Fa,ma,aa,L,wa,
E,Ea,Ma,ya=R.createElement("div");ya.setAttribute("className","t");ya.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";Ka=ya.getElementsByTagName("*");ra=ya.getElementsByTagName("a")[0];if(!Ka||!ra||!Ka.length)qa={};else{Fa=R.createElement("select");ma=Fa.appendChild(R.createElement("option"));aa=ya.getElementsByTagName("input")[0];ra.style.cssText="top:1px;float:left;opacity:.5";ja={leadingWhitespace:3===ya.firstChild.nodeType,tbody:!ya.getElementsByTagName("tbody").length,
htmlSerialize:!!ya.getElementsByTagName("link").length,style:/top/.test(ra.getAttribute("style")),hrefNormalized:"/a"===ra.getAttribute("href"),opacity:/^0.5/.test(ra.style.opacity),cssFloat:!!ra.style.cssFloat,checkOn:"on"===aa.value,optSelected:ma.selected,getSetAttribute:"t"!==ya.className,enctype:!!R.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===R.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,
deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};aa.checked=!0;ja.noCloneChecked=aa.cloneNode(!0).checked;Fa.disabled=!0;ja.optDisabled=!ma.disabled;try{delete ya.test}catch(pa){ja.deleteExpando=!1}!ya.addEventListener&&(ya.attachEvent&&ya.fireEvent)&&(ya.attachEvent("onclick",Ma=function(){ja.noCloneEvent=!1}),ya.cloneNode(!0).fireEvent("onclick"),ya.detachEvent("onclick",Ma));aa=R.createElement("input");
aa.value="t";aa.setAttribute("type","radio");ja.radioValue="t"===aa.value;aa.setAttribute("checked","checked");aa.setAttribute("name","t");ya.appendChild(aa);L=R.createDocumentFragment();L.appendChild(ya.lastChild);ja.checkClone=L.cloneNode(!0).cloneNode(!0).lastChild.checked;ja.appendChecked=aa.checked;L.removeChild(aa);L.appendChild(ya);if(ya.attachEvent)for(E in{submit:!0,change:!0,focusin:!0})wa="on"+E,Ea=wa in ya,Ea||(ya.setAttribute(wa,"return;"),Ea="function"===typeof ya[wa]),ja[E+"Bubbles"]=
Ea;q(function(){var b,c,d,f=R.getElementsByTagName("body")[0];f&&(b=R.createElement("div"),b.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(b,f.firstChild),c=R.createElement("div"),b.appendChild(c),c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d=c.getElementsByTagName("td"),d[0].style.cssText="padding:0;margin:0;border:0;display:none",Ea=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",ja.reliableHiddenOffsets=
Ea&&0===d[0].offsetHeight,c.innerHTML="",c.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ja.boxSizing=4===c.offsetWidth,ja.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,a.getComputedStyle&&(ja.pixelPosition="1%"!==(a.getComputedStyle(c,null)||{}).top,ja.boxSizingReliable="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width,d=R.createElement("div"),d.style.cssText=
c.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",d.style.marginRight=d.style.width="0",c.style.width="1px",c.appendChild(d),ja.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),"undefined"!==typeof c.style.zoom&&(c.innerHTML="",c.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",ja.inlineBlockNeedsLayout=3===c.offsetWidth,c.style.display="block",c.style.overflow="visible",c.innerHTML=
"<div></div>",c.firstChild.style.width="5px",ja.shrinkWrapBlocks=3!==c.offsetWidth,b.style.zoom=1),f.removeChild(b))});L.removeChild(ya);Ka=ra=Fa=ma=aa=L=ya=null;qa=ja}ia.support=qa;var Q=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Db=/([A-Z])/g;q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?q.cache[a[q.expando]]:a[q.expando];return!!a&&!c(a)},
data:function(a,c,d,f){if(q.acceptData(a)){var e=q.expando,j="string"===typeof c,u=a.nodeType,h=u?q.cache:a,k=u?a[e]:a[e]&&e;if(k&&h[k]&&(f||h[k].data)||!(j&&d===b)){k||(u?a[e]=k=q.deletedIds.pop()||q.guid++:k=e);h[k]||(h[k]={},u||(h[k].toJSON=q.noop));if("object"===typeof c||"function"===typeof c)f?h[k]=q.extend(h[k],c):h[k].data=q.extend(h[k].data,c);a=h[k];f||(a.data||(a.data={}),a=a.data);d!==b&&(a[q.camelCase(c)]=d);j?(d=a[c],null==d&&(d=a[q.camelCase(c)])):d=a;return d}}},removeData:function(a,
b,d){if(q.acceptData(a)){var f,e,j,u=a.nodeType,h=u?q.cache:a,k=u?a[q.expando]:q.expando;if(h[k]){if(b&&(f=d?h[k]:h[k].data)){q.isArray(b)||(b in f?b=[b]:(b=q.camelCase(b),b=b in f?[b]:b.split(" ")));e=0;for(j=b.length;e<j;e++)delete f[b[e]];if(!(d?c:q.isEmptyObject)(f))return}if(!d&&(delete h[k].data,!c(h[k])))return;u?q.cleanData([a],!0):q.support.deleteExpando||h!=h.window?delete h[k]:h[k]=null}}},_data:function(a,b,c){return q.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&q.noData[a.nodeName.toLowerCase()];
return!b||!0!==b&&a.getAttribute("classid")===b}});q.fn.extend({data:function(a,c){var d,f,e,j,h,u=this[0],k=0,l=null;if(a===b){if(this.length&&(l=q.data(u),1===u.nodeType&&!q._data(u,"parsedAttrs"))){e=u.attributes;for(h=e.length;k<h;k++)j=e[k].name,j.indexOf("data-")||(j=q.camelCase(j.substring(5)),g(u,j,l[j]));q._data(u,"parsedAttrs",!0)}return l}if("object"===typeof a)return this.each(function(){q.data(this,a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";f=d[1]+"!";return q.access(this,function(c){if(c===
b)return l=this.triggerHandler("getData"+f,[d[0]]),l===b&&u&&(l=q.data(u,a),l=g(u,a,l)),l===b&&d[1]?this.data(d[0]):l;d[1]=c;this.each(function(){var b=q(this);b.triggerHandler("setData"+f,d);q.data(this,a,c);b.triggerHandler("changeData"+f,d)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){q.removeData(this,a)})}});q.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=q._data(a,b),c&&(!d||q.isArray(c)?d=q._data(a,b,q.makeArray(c)):d.push(c)),
d||[]},dequeue:function(a,b){b=b||"fx";var c=q.queue(a,b),d=c.length,f=c.shift(),e=q._queueHooks(a,b),j=function(){q.dequeue(a,b)};"inprogress"===f&&(f=c.shift(),d--);f&&("fx"===b&&c.unshift("inprogress"),delete e.stop,f.call(a,j,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return q._data(a,c)||q._data(a,c,{empty:q.Callbacks("once memory").add(function(){q.removeData(a,b+"queue",!0);q.removeData(a,c,!0)})})}});q.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&
(c=a,a="fx",d--);return arguments.length<d?q.queue(this[0],a):c===b?this:this.each(function(){var b=q.queue(this,a,c);q._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&q.dequeue(this,a)})},dequeue:function(a){return this.each(function(){q.dequeue(this,a)})},delay:function(a,b){a=q.fx?q.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,f=1,e=q.Deferred(),
j=this,u=this.length,h=function(){--f||e.resolveWith(j,[j])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";u--;)if((d=q._data(j[u],a+"queueHooks"))&&d.empty)f++,d.empty.add(h);h();return e.promise(c)}});var ha,kb,qb,G=/[\t\r\n]/g,t=/\r/g,rb=/^(?:button|input)$/i,eb=/^(?:button|input|object|select|textarea)$/i,$a=/^a(?:rea|)$/i,ac=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,lb=q.support.getSetAttribute;q.fn.extend({attr:function(a,
b){return q.access(this,q.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){q.removeAttr(this,a)})},prop:function(a,b){return q.access(this,q.prop,a,b,1<arguments.length)},removeProp:function(a){a=q.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,f,e,j,u;if(q.isFunction(a))return this.each(function(b){q(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a){b=a.split(Ca);c=0;for(d=
this.length;c<d;c++)if(f=this[c],1===f.nodeType)if(!f.className&&1===b.length)f.className=a;else{e=" "+f.className+" ";j=0;for(u=b.length;j<u;j++)0>e.indexOf(" "+b[j]+" ")&&(e+=b[j]+" ");f.className=q.trim(e)}}return this},removeClass:function(a){var c,d,f,e,j,u,h;if(q.isFunction(a))return this.each(function(b){q(this).removeClass(a.call(this,b,this.className))});if(a&&"string"===typeof a||a===b){c=(a||"").split(Ca);u=0;for(h=this.length;u<h;u++)if(f=this[u],1===f.nodeType&&f.className){d=(" "+f.className+
" ").replace(G," ");e=0;for(j=c.length;e<j;e++)for(;0<=d.indexOf(" "+c[e]+" ");)d=d.replace(" "+c[e]+" "," ");f.className=a?q.trim(d):""}}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return q.isFunction(a)?this.each(function(c){q(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var f,e=0,j=q(this),u=b,h=a.split(Ca);f=h[e++];)u=d?u:!j.hasClass(f),j[u?"addClass":"removeClass"](f);else if("undefined"===c||"boolean"===c)this.className&&
q._data(this,"__className__",this.className),this.className=this.className||!1===a?"":q._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(G," ").indexOf(a))return!0;return!1},val:function(a){var c,d,f,e=this[0];if(arguments.length)return f=q.isFunction(a),this.each(function(d){var e=q(this);if(1===this.nodeType&&(d=f?a.call(this,d,e.val()):a,null==d?d="":"number"===typeof d?d+="":q.isArray(d)&&
(d=q.map(d,function(a){return null==a?"":a+""})),c=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()],!c||!("set"in c)||c.set(this,d,"value")===b))this.value=d});if(e){if((c=q.valHooks[e.type]||q.valHooks[e.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return"string"===typeof d?d.replace(t,""):null==d?"":d}}});q.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,
c=a.options,d=a.selectedIndex,f=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,j=0>d?e:a?d:0;j<e;j++)if(b=c[j],(b.selected||j===d)&&(q.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!q.nodeName(b.parentNode,"optgroup"))){b=q(b).val();if(a)return b;f.push(b)}return f},set:function(a,b){var c=q.makeArray(b);q(a).find("option").each(function(){this.selected=0<=q.inArray(q(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{},attr:function(a,
c,d,f){var e,j,u=a.nodeType;if(a&&!(3===u||8===u||2===u)){if(f&&q.isFunction(q.fn[c]))return q(a)[c](d);if("undefined"===typeof a.getAttribute)return q.prop(a,c,d);if(f=1!==u||!q.isXMLDoc(a))c=c.toLowerCase(),j=q.attrHooks[c]||(ac.test(c)?kb:ha);if(d!==b)if(null===d)q.removeAttr(a,c);else{if(j&&"set"in j&&f&&(e=j.set(a,d,c))!==b)return e;a.setAttribute(c,d+"");return d}else{if(j&&"get"in j&&f&&null!==(e=j.get(a,c)))return e;e=a.getAttribute(c);return null===e?b:e}}},removeAttr:function(a,b){var c,
d,f,e,j=0;if(b&&1===a.nodeType)for(d=b.split(Ca);j<d.length;j++)if(f=d[j])c=q.propFix[f]||f,(e=ac.test(f))||q.attr(a,f,""),a.removeAttribute(lb?f:c),e&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(rb.test(a.nodeName)&&a.parentNode)q.error("type property can't be changed");else if(!q.support.radioValue&&"radio"===b&&q.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return ha&&q.nodeName(a,"button")?ha.get(a,b):b in a?a.value:
null},set:function(a,b,c){if(ha&&q.nodeName(a,"button"))return ha.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var f,e,j;j=a.nodeType;if(a&&!(3===j||8===j||2===j)){if(j=1!==j||!q.isXMLDoc(a))c=q.propFix[c]||c,e=q.propHooks[c];return d!==
b?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:a[c]=d:e&&"get"in e&&null!==(f=e.get(a,c))?f:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):eb.test(a.nodeName)||$a.test(a.nodeName)&&a.href?0:b}}}});kb={get:function(a,c){var d,f=q.prop(a,c);return!0===f||"boolean"!==typeof f&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?q.removeAttr(a,c):(b=q.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,
c.toLowerCase()));return c}};lb||(qb={name:!0,id:!0,coords:!0},ha=q.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(qb[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=R.createAttribute(c),a.setAttributeNode(d));return d.value=b+""}},q.each(["width","height"],function(a,b){q.attrHooks[b]=q.extend(q.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),q.attrHooks.contenteditable={get:ha.get,set:function(a,
b,c){""===b&&(b="false");ha.set(a,b,c)}});q.support.hrefNormalized||q.each(["href","src","width","height"],function(a,c){q.attrHooks[c]=q.extend(q.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});q.support.style||(q.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}});q.support.optSelected||(q.propHooks.selected=q.extend(q.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&
a.parentNode.selectedIndex;return null}}));q.support.enctype||(q.propFix.enctype="encoding");q.support.checkOn||q.each(["radio","checkbox"],function(){q.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});q.each(["radio","checkbox"],function(){q.valHooks[this]=q.extend(q.valHooks[this],{set:function(a,b){if(q.isArray(b))return a.checked=0<=q.inArray(q(a).val(),b)}})});var zb=/^(?:textarea|input|select)$/i,ic=/^([^\.]*|)(?:\.(.+)|)$/,qc=/(?:^|\s)hover(\.\S+|)\b/,
Bc=/^key/,rc=/^(?:mouse|contextmenu)|click/,Eb=/^(?:focusinfocus|focusoutblur)$/,Lb=function(a){return q.event.special.hover?a:a.replace(qc,"mouseenter$1 mouseleave$1")};q.event={add:function(a,c,d,f,e){var j,u,h,k,g,l,C,m,n;if(!(3===a.nodeType||8===a.nodeType||!c||!d||!(j=q._data(a)))){d.handler&&(C=d,d=C.handler,e=C.selector);d.guid||(d.guid=q.guid++);h=j.events;h||(j.events=h={});u=j.handle;u||(j.handle=u=function(a){return"undefined"!==typeof q&&(!a||q.event.triggered!==a.type)?q.event.dispatch.apply(u.elem,
arguments):b},u.elem=a);c=q.trim(Lb(c)).split(" ");for(j=0;j<c.length;j++){k=ic.exec(c[j])||[];g=k[1];l=(k[2]||"").split(".").sort();n=q.event.special[g]||{};g=(e?n.delegateType:n.bindType)||g;n=q.event.special[g]||{};k=q.extend({type:g,origType:k[1],data:f,handler:d,guid:d.guid,selector:e,needsContext:e&&q.expr.match.needsContext.test(e),namespace:l.join(".")},C);m=h[g];if(!m&&(m=h[g]=[],m.delegateCount=0,!n.setup||!1===n.setup.call(a,f,l,u)))a.addEventListener?a.addEventListener(g,u,!1):a.attachEvent&&
a.attachEvent("on"+g,u);n.add&&(n.add.call(a,k),k.handler.guid||(k.handler.guid=d.guid));e?m.splice(m.delegateCount++,0,k):m.push(k);q.event.global[g]=!0}a=null}},global:{},remove:function(a,b,c,d,f){var e,j,u,h,k,g,l,C,m,n,p=q.hasData(a)&&q._data(a);if(p&&(l=p.events)){b=q.trim(Lb(b||"")).split(" ");for(e=0;e<b.length;e++)if(j=ic.exec(b[e])||[],u=h=j[1],j=j[2],u){C=q.event.special[u]||{};u=(d?C.delegateType:C.bindType)||u;m=l[u]||[];k=m.length;j=j?RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+
"(\\.|$)"):null;for(g=0;g<m.length;g++)if(n=m[g],(f||h===n.origType)&&(!c||c.guid===n.guid)&&(!j||j.test(n.namespace))&&(!d||d===n.selector||"**"===d&&n.selector))m.splice(g--,1),n.selector&&m.delegateCount--,C.remove&&C.remove.call(a,n);0===m.length&&k!==m.length&&((!C.teardown||!1===C.teardown.call(a,j,p.handle))&&q.removeEvent(a,u,p.handle),delete l[u])}else for(u in l)q.event.remove(a,u+b[e],c,d,!0);q.isEmptyObject(l)&&(delete p.handle,q.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,
changeData:!0},trigger:function(c,d,f,e){if(!f||!(3===f.nodeType||8===f.nodeType)){var j,u,h,k,g,l,C=c.type||c;h=[];if(!Eb.test(C+q.event.triggered)&&(0<=C.indexOf("!")&&(C=C.slice(0,-1),j=!0),0<=C.indexOf(".")&&(h=C.split("."),C=h.shift(),h.sort()),f&&!q.event.customEvent[C]||q.event.global[C]))if(c="object"===typeof c?c[q.expando]?c:new q.Event(C,c):new q.Event(C),c.type=C,c.isTrigger=!0,c.exclusive=j,c.namespace=h.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null,h=0>C.indexOf(":")?"on"+C:"",f){if(c.result=b,c.target||(c.target=f),d=null!=d?q.makeArray(d):[],d.unshift(c),k=q.event.special[C]||{},!(k.trigger&&!1===k.trigger.apply(f,d))){l=[[f,k.bindType||C]];if(!e&&!k.noBubble&&!q.isWindow(f)){g=k.delegateType||C;j=Eb.test(g+C)?f:f.parentNode;for(u=f;j;j=j.parentNode)l.push([j,g]),u=j;if(u===(f.ownerDocument||R))l.push([u.defaultView||u.parentWindow||a,g])}for(u=0;u<l.length&&!c.isPropagationStopped();u++)j=l[u][0],c.type=l[u][1],(g=(q._data(j,"events")||
{})[c.type]&&q._data(j,"handle"))&&g.apply(j,d),(g=h&&j[h])&&(q.acceptData(j)&&g.apply&&!1===g.apply(j,d))&&c.preventDefault();c.type=C;if(!e&&!c.isDefaultPrevented()&&(!k._default||!1===k._default.apply(f.ownerDocument,d))&&!("click"===C&&q.nodeName(f,"a"))&&q.acceptData(f))if(h&&f[C]&&("focus"!==C&&"blur"!==C||0!==c.target.offsetWidth)&&!q.isWindow(f))(u=f[h])&&(f[h]=null),q.event.triggered=C,f[C](),q.event.triggered=b,u&&(f[h]=u);return c.result}}else for(u in f=q.cache,f)f[u].events&&f[u].events[C]&&
q.event.trigger(c,d,f[u].handle.elem,!0)}},dispatch:function(c){c=q.event.fix(c||a.event);var d,f,e,j,u,h,k=(q._data(this,"events")||{})[c.type]||[],g=k.delegateCount,l=M.call(arguments),C=!c.exclusive&&!c.namespace,m=q.event.special[c.type]||{},n=[];l[0]=c;c.delegateTarget=this;if(!(m.preDispatch&&!1===m.preDispatch.call(this,c))){if(g&&!(c.button&&"click"===c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(!0!==f.disabled||"click"!==c.type){j={};u=[];for(d=0;d<g;d++)e=k[d],h=e.selector,j[h]===
b&&(j[h]=e.needsContext?0<=q(h,this).index(f):q.find(h,this,null,[f]).length),j[h]&&u.push(e);u.length&&n.push({elem:f,matches:u})}k.length>g&&n.push({elem:this,matches:k.slice(g)});for(d=0;d<n.length&&!c.isPropagationStopped();d++){j=n[d];c.currentTarget=j.elem;for(f=0;f<j.matches.length&&!c.isImmediatePropagationStopped();f++)if(e=j.matches[f],C||!c.namespace&&!e.namespace||c.namespace_re&&c.namespace_re.test(e.namespace))c.data=e.data,c.handleObj=e,e=((q.event.special[e.origType]||{}).handle||
e.handler).apply(j.elem,l),e!==b&&(c.result=e,!1===e&&(c.preventDefault(),c.stopPropagation()))}m.postDispatch&&m.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,c){var d,f,e=c.button,j=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||R,f=d.documentElement,d=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0));!a.relatedTarget&&j&&(a.relatedTarget=j===a.target?c.toElement:j);!a.which&&e!==b&&(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[q.expando])return a;var b,
c,d=a,f=q.event.fixHooks[a.type]||{},e=f.props?this.props.concat(f.props):this.props;a=q.Event(d);for(b=e.length;b;)c=e[--b],a[c]=d[c];a.target||(a.target=d.srcElement||R);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){q.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=
null)}}},simulate:function(a,b,c,d){a=q.extend(new q.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?q.event.trigger(a,null,b):q.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};q.event.handle=q.event.dispatch;q.removeEvent=R.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};q.Event=function(a,b){if(!(this instanceof q.Event))return new q.Event(a,
b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?d:e):this.type=a;b&&q.extend(this,b);this.timeStamp=a&&a.timeStamp||q.now();this[q.expando]=!0};q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=d;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=d;var a=this.originalEvent;a&&(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d;this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e};q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){q.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,f=a.handleObj;if(!d||d!==this&&!q.contains(this,d))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}});q.support.submitBubbles||
(q.event.special.submit={setup:function(){if(q.nodeName(this,"form"))return!1;q.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=q.nodeName(a,"input")||q.nodeName(a,"button")?a.form:b)&&!q._data(a,"_submit_attached"))q.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),q._data(a,"_submit_attached",!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&q.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(q.nodeName(this,
"form"))return!1;q.event.remove(this,"._submit")}});q.support.changeBubbles||(q.event.special.change={setup:function(){if(zb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)q.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),q.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);q.event.simulate("change",this,a,!0)});return!1}q.event.add(this,"beforeactivate._change",
function(a){a=a.target;zb.test(a.nodeName)&&!q._data(a,"_change_attached")&&(q.event.add(a,"change._change",function(a){this.parentNode&&(!a.isSimulated&&!a.isTrigger)&&q.event.simulate("change",this.parentNode,a,!0)}),q._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){q.event.remove(this,"._change");return!zb.test(this.nodeName)}});
q.support.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){q.event.simulate(b,a.target,q.event.fix(a),!0)};q.event.special[b]={setup:function(){0===c++&&R.addEventListener(a,d,!0)},teardown:function(){0===--c&&R.removeEventListener(a,d,!0)}}});q.fn.extend({on:function(a,c,d,f,j){var u,h;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],j);return this}null==d&&null==f?(f=c,d=c=b):null==f&&("string"===typeof c?(f=d,d=
b):(f=d,d=c,c=b));if(!1===f)f=e;else if(!f)return this;1===j&&(u=f,f=function(a){q().off(a);return u.apply(this,arguments)},f.guid=u.guid||(u.guid=q.guid++));return this.each(function(){q.event.add(this,a,f,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var f;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,q(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"===typeof a){for(f in a)this.off(f,c,a[f]);
return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=e);return this.each(function(){q.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){q(this.context).on(a,this.selector,b,c);return this},die:function(a,b){q(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,
a||"**",c)},trigger:function(a,b){return this.each(function(){q.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return q.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||q.guid++,d=0,f=function(c){var f=(q._data(this,"lastToggle"+a.guid)||0)%d;q._data(this,"lastToggle"+a.guid,f+1);c.preventDefault();return b[f].apply(this,arguments)||!1};for(f.guid=c;d<b.length;)b[d++].guid=c;return this.click(f)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||
a)}});q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){q.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};Bc.test(b)&&(q.event.fixHooks[b]=q.event.keyHooks);rc.test(b)&&(q.event.fixHooks[b]=q.event.mouseHooks)});var La=a,xa=function(a,b,c,d){c=c||[];b=b||Hb;var f,
e,j,h,k=b.nodeType;if(!a||"string"!==typeof a)return c;if(1!==k&&9!==k)return[];j=ab(b);if(!j&&!d&&(f=Wc.exec(a)))if(h=f[1])if(9===k)if((e=b.getElementById(h))&&e.parentNode){if(e.id===h)return c.push(e),c}else return c;else{if(b.ownerDocument&&(e=b.ownerDocument.getElementById(h))&&Mc(b,e)&&e.id===h)return c.push(e),c}else{if(f[2])return mb.apply(c,Ib.call(b.getElementsByTagName(a),0)),c;if((h=f[3])&&u&&b.getElementsByClassName)return mb.apply(c,Ib.call(b.getElementsByClassName(h),0)),c}return Ia(a.replace(Xa,
"$1"),b,c,d,j)},Ta=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},Wa=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},Ra=function(a){return nb(function(b){b=+b;return nb(function(c,d){for(var f,e=a([],c.length,b),j=e.length;j--;)if(c[f=e[j]])c[f]=!(d[f]=c[f])})})},Pb=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1},tc=function(a,b){var c,d,f,e,j,
u,h;if(j=Qa[Ja][a+" "])return b?0:j.slice(0);j=a;u=[];for(h=Ya.preFilter;j;){if(!c||(d=Nc.exec(j)))d&&(j=j.slice(d[0].length)||j),u.push(f=[]);c=!1;if(d=sc.exec(j))f.push(c=new jc(d.shift())),j=j.slice(c.length),c.type=d[0].replace(Xa," ");for(e in Ya.filter)if((d=Da[e].exec(j))&&(!h[e]||(d=h[e](d))))f.push(c=new jc(d.shift())),j=j.slice(c.length),c.type=e,c.matches=d;if(!c)break}return b?j.length:j?xa.error(a):Qa(a,u).slice(0)},Jb=function(a,b,c){var d=b.dir,f=c&&"parentNode"===b.dir,e=Ab++;return b.first?
function(b,c,e){for(;b=b[d];)if(f||1===b.nodeType)return a(b,c,e)}:function(b,c,j){if(j)for(;b=b[d];){if((f||1===b.nodeType)&&a(b,c,j))return b}else for(var u,h=Ub+" "+e+" ",k=h+Ua;b=b[d];)if(f||1===b.nodeType){if((u=b[Ja])===k)return b.sizset;if("string"===typeof u&&0===u.indexOf(h)){if(b.sizset)return b}else{b[Ja]=k;if(a(b,c,j))return b.sizset=!0,b;b.sizset=!1}}}},K=function(a){return 1<a.length?function(b,c,d){for(var f=a.length;f--;)if(!a[f](b,c,d))return!1;return!0}:a[0]},ob=function(a,b,c,d,
f){for(var e,j=[],u=0,h=a.length,k=null!=b;u<h;u++)if(e=a[u])if(!c||c(e,d,f))j.push(e),k&&b.push(u);return j},bc=function(a,b,c,d,f,e){d&&!d[Ja]&&(d=bc(d));f&&!f[Ja]&&(f=bc(f,e));return nb(function(e,j,u,h){var k,g,l=[],C=[],m=j.length,n;if(!(n=e)){n=b||"*";for(var p=u.nodeType?[u]:u,fa=[],r=0,da=p.length;r<da;r++)xa(n,p[r],fa);n=fa}n=a&&(e||!b)?ob(n,l,a,u,h):n;p=c?f||(e?a:m||d)?[]:j:n;c&&c(n,p,u,h);if(d){k=ob(p,C);d(k,[],u,h);for(u=k.length;u--;)if(g=k[u])p[C[u]]=!(n[C[u]]=g)}if(e){if(f||a){if(f){k=
[];for(u=p.length;u--;)if(g=p[u])k.push(n[u]=g);f(null,p=[],k,h)}for(u=p.length;u--;)if((g=p[u])&&-1<(k=f?gb.call(e,g):l[u]))e[k]=!(j[k]=g)}}else p=ob(p===j?p.splice(m,p.length):p),f?f(null,j,p,h):mb.apply(j,p)})},hb=function(a){var b,c,d,f=a.length,e=Ya.relative[a[0].type];c=e||Ya.relative[" "];for(var j=e?1:0,u=Jb(function(a){return a===b},c,!0),h=Jb(function(a){return-1<gb.call(b,a)},c,!0),k=[function(a,c,d){return!e&&(d||c!==pb)||((b=c).nodeType?u(a,c,d):h(a,c,d))}];j<f;j++)if(c=Ya.relative[a[j].type])k=
[Jb(K(k),c)];else{c=Ya.filter[a[j].type].apply(null,a[j].matches);if(c[Ja]){for(d=++j;d<f&&!Ya.relative[a[d].type];d++);return bc(1<j&&K(k),1<j&&a.slice(0,j-1).join("").replace(Xa,"$1"),c,j<d&&hb(a.slice(j,d)),d<f&&hb(a=a.slice(d)),d<f&&a.join(""))}k.push(c)}return K(k)},Ia=function(a,b,c,d,f){var e,j,u,h,k=tc(a);if(!d&&1===k.length){j=k[0]=k[0].slice(0);if(2<j.length&&"ID"===(u=j[0]).type&&9===b.nodeType&&!f&&Ya.relative[j[1].type]){b=Ya.find.ID(u.matches[0].replace(Oa,""),b,f)[0];if(!b)return c;
a=a.slice(j.shift().length)}for(e=Da.POS.test(a)?-1:j.length-1;0<=e;e--){u=j[e];if(Ya.relative[h=u.type])break;if(h=Ya.find[h])if(d=h(u.matches[0].replace(Oa,""),Za.test(j[0].type)&&b.parentNode||b,f)){j.splice(e,1);a=d.length&&j.join("");if(!a)return mb.apply(c,Ib.call(d,0)),c;break}}}uc(a,k)(d,b,f,c,Za.test(a));return c},bb=function(){},Ua,Cc,Ya,Qb,ab,Mc,uc,Dc,xb,pb,cc=!0,Ja=("sizcache"+Math.random()).replace(".",""),jc=String,Hb=La.document,ib=Hb.documentElement,Ub=0,Ab=0,Rb=[].pop,mb=[].push,
Ib=[].slice,gb=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},nb=function(a,b){a[Ja]=null==b||b;return a},Vb=function(){var a={},b=[];return nb(function(c,d){b.push(c)>Ya.cacheLength&&delete a[b.shift()];return a[c+" "]=d},a)},Fb=Vb(),Qa=Vb(),Bb=Vb(),fb="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+
")|)|)[\\x20\\t\\r\\n\\f]*\\]",Sb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+fb+")|[^:]|\\\\.)*|.*))\\)|)",Xa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Nc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,sc=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,Ec=RegExp(Sb),Wc=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Za=/[\x20\t\r\n\f]*[+~]/,kc=/h\d/i,Wb=/input|select|textarea|button/i,Oa=/\\(?!\\)/g,Da={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,
NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+fb),PSEUDO:RegExp("^"+Sb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},jb=function(a){var b=Hb.createElement("div");try{return a(b)}catch(c){return!1}finally{}},Tb=jb(function(a){a.appendChild(Hb.createComment(""));return!a.getElementsByTagName("*").length}),Xc=jb(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),Xb=jb(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),u=jb(function(a){a.innerHTML=
"<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),C=jb(function(a){a.id=Ja+0;a.innerHTML="<a name='"+Ja+"'></a><div name='"+Ja+"'></div>";ib.insertBefore(a,ib.firstChild);var b=Hb.getElementsByName&&Hb.getElementsByName(Ja).length===2+Hb.getElementsByName(Ja+0).length;Cc=!Hb.getElementById(Ja);ib.removeChild(a);return b});try{Ib.call(ib.childNodes,
0)[0].nodeType}catch(fa){Ib=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}xa.matches=function(a,b){return xa(a,null,null,b)};xa.matchesSelector=function(a,b){return 0<xa(b,null,null,[a]).length};Qb=xa.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Qb(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=Qb(b);return c};ab=xa.isXML=function(a){return(a=
a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Mc=xa.contains=ib.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&c.contains&&c.contains(d)))}:ib.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};xa.attr=function(a,b){var c,d=ab(a);d||(b=b.toLowerCase());return(c=Ya.attrHandle[b])?c(a):d||Xb?a.getAttribute(b):(c=
a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:c.specified?c.value:null:null};Ya=xa.selectors={cacheLength:50,createPseudo:nb,match:Da,attrHandle:Xc?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:Cc?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a))?b.id===a||"undefined"!==
typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:void 0:[]},TAG:Tb?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,f=[],e=0;d=c[e];e++)1===d.nodeType&&f.push(d);return f}return c},NAME:C&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},CLASS:u&&function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},
relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(Oa,"");a[3]=(a[4]||a[5]||"").replace(Oa,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||xa.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&xa.error(a[0]);return a},PSEUDO:function(a){var b,
c;if(Da.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4]){if(Ec.test(b)&&(c=tc(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length))b=b.slice(0,c),a[0]=a[0].slice(0,c);a[2]=b}return a.slice(0,3)}},filter:{ID:Cc?function(a){a=a.replace(Oa,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(Oa,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(Oa,
"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=Fb[Ja][a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Fb(a,function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){d=xa.attr(d,a);if(null==d)return"!="===b;if(!b)return!0;d+="";return"="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):
"$="===b?c&&d.substr(d.length-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.substr(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,f;b=a.parentNode;if(1===c&&0===d)return!0;if(b){f=0;for(b=b.firstChild;b&&!(1===b.nodeType&&(f++,a===b));b=b.nextSibling);}f-=d;return f===c||0===f%c&&0<=f/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case "last":for(;c=
c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var c,d=Ya.pseudos[a]||Ya.setFilters[a.toLowerCase()]||xa.error("unsupported pseudo: "+a);return d[Ja]?d(b):1<d.length?(c=[a,a,"",b],Ya.setFilters.hasOwnProperty(a.toLowerCase())?nb(function(a,c){for(var f,e=d(a,b),j=e.length;j--;)f=gb.call(a,e[j]),a[f]=!(c[f]=e[j])}):function(a){return d(a,0,c)}):d}},pseudos:{not:nb(function(a){var b=[],c=[],d=uc(a.replace(Xa,"$1"));return d[Ja]?nb(function(a,b,c,f){f=d(a,null,f,[]);for(var e=
a.length;e--;)if(c=f[e])a[e]=!(b[e]=c)}):function(a,f,e){b[0]=a;d(b,null,e,c);return!c.pop()}}),has:nb(function(a){return function(b){return 0<xa(a,b).length}}),contains:nb(function(a){return function(b){return-1<(b.textContent||b.innerText||Qb(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;
return!0===a.selected},parent:function(a){return!Ya.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return kc.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:Ta("radio"),checkbox:Ta("checkbox"),file:Ta("file"),password:Ta("password"),image:Ta("image"),submit:Wa("submit"),
reset:Wa("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Wb.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:Ra(function(){return[0]}),last:Ra(function(a,b){return[b-1]}),eq:Ra(function(a,b,c){return[0>c?c+b:c]}),even:Ra(function(a,b){for(var c=
0;c<b;c+=2)a.push(c);return a}),odd:Ra(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:Ra(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:Ra(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};Dc=ib.compareDocumentPosition?function(a,b){return a===b?(xb=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return xb=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-
b.sourceIndex;var c,d,f=[],e=[];c=a.parentNode;d=b.parentNode;var j=c;if(c===d)return Pb(a,b);if(c){if(!d)return 1}else return-1;for(;j;)f.unshift(j),j=j.parentNode;for(j=d;j;)e.unshift(j),j=j.parentNode;c=f.length;d=e.length;for(j=0;j<c&&j<d;j++)if(f[j]!==e[j])return Pb(f[j],e[j]);return j===c?Pb(a,e[j],-1):Pb(f[j],b,1)};[0,0].sort(Dc);cc=!xb;xa.uniqueSort=function(a){var b,c=[],d=1,f=0;xb=cc;a.sort(Dc);if(xb){for(;b=a[d];d++)b===a[d-1]&&(f=c.push(d));for(;f--;)a.splice(c[f],1)}return a};xa.error=
function(a){throw Error("Syntax error, unrecognized expression: "+a);};uc=xa.compile=function(a,b){var c,d=[],f=[],e=Bb[Ja][a+" "];if(!e){b||(b=tc(a));for(c=b.length;c--;)e=hb(b[c]),e[Ja]?d.push(e):f.push(e);var j=0<d.length,u=0<f.length,h=function(a,b,c,e,k){var g,l,C=[],m=0,n="0",p=a&&[],fa=null!=k,r=pb,da=a||u&&Ya.find.TAG("*",k&&b.parentNode||b),s=Ub+=null==r?1:Math.E;fa&&(pb=b!==Hb&&b,Ua=h.el);for(;null!=(k=da[n]);n++){if(u&&k){for(g=0;l=f[g];g++)if(l(k,b,c)){e.push(k);break}fa&&(Ub=s,Ua=++h.el)}j&&
((k=!l&&k)&&m--,a&&p.push(k))}m+=n;if(j&&n!==m){for(g=0;l=d[g];g++)l(p,C,b,c);if(a){if(0<m)for(;n--;)!p[n]&&!C[n]&&(C[n]=Rb.call(e));C=ob(C)}mb.apply(e,C);fa&&(!a&&0<C.length&&1<m+d.length)&&xa.uniqueSort(e)}fa&&(Ub=s,pb=r);return p};h.el=0;c=j?nb(h):h;e=Bb(a,c)}return e};if(Hb.querySelectorAll){var da,ba=Ia,ga=/'|\\/g,Ga=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Pa=[":focus"],Cb=[":active"],lc=ib.matchesSelector||ib.mozMatchesSelector||ib.webkitMatchesSelector||ib.oMatchesSelector||ib.msMatchesSelector;
jb(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||Pa.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||Pa.push(":checked")});jb(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&Pa.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||Pa.push(":enabled",
":disabled")});Pa=RegExp(Pa.join("|"));Ia=function(a,b,c,d,f){if(!d&&!f&&!Pa.test(a)){var e,j,u=!0,h=Ja;j=b;e=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){e=tc(a);(u=b.getAttribute("id"))?h=u.replace(ga,"\\$&"):b.setAttribute("id",h);h="[id='"+h+"'] ";for(j=e.length;j--;)e[j]=h+e[j].join("");j=Za.test(a)&&b.parentNode||b;e=e.join(",")}if(e)try{return mb.apply(c,Ib.call(j.querySelectorAll(e),0)),c}catch(k){}finally{u||b.removeAttribute("id")}}return ba(a,b,c,d,f)};lc&&
(jb(function(a){da=lc.call(a,"div");try{lc.call(a,"[test!='']:sizzle"),Cb.push("!=",Sb)}catch(b){}}),Cb=RegExp(Cb.join("|")),xa.matchesSelector=function(a,b){b=b.replace(Ga,"='$1']");if(!ab(a)&&!Cb.test(b)&&!Pa.test(b))try{var c=lc.call(a,b);if(c||da||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<xa(b,null,null,[a]).length})}Ya.pseudos.nth=Ya.pseudos.eq;Ya.filters=bb.prototype=Ya.pseudos;Ya.setFilters=new bb;xa.attr=q.attr;q.find=xa;q.expr=xa.selectors;q.expr[":"]=q.expr.pseudos;
q.unique=xa.uniqueSort;q.text=xa.getText;q.isXMLDoc=xa.isXML;q.contains=xa.contains;var mc=/Until$/,Fc=/^(?:parents|prev(?:Until|All))/,ub=/^.[^:#\[\.,]*$/,yb=q.expr.match.needsContext,Ad={children:!0,contents:!0,next:!0,prev:!0};q.fn.extend({find:function(a){var b,c,d,f,e,j,u=this;if("string"!==typeof a)return q(a).filter(function(){b=0;for(c=u.length;b<c;b++)if(q.contains(u[b],this))return!0});j=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(d=j.length,q.find(a,this[b],j),0<b)for(f=
d;f<j.length;f++)for(e=0;e<d;e++)if(j[e]===j[f]){j.splice(f--,1);break}return j},has:function(a){var b,c=q(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(q.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?yb.test(a)?0<=q(a,this.context).index(this[0]):0<q.filter(a,this).length:0<this.filter(a).length)},closest:function(a,
b){for(var c,d=0,f=this.length,e=[],j=yb.test(a)||"string"!==typeof a?q(a,b||this.context):0;d<f;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(j?-1<j.index(c):q.find.matchesSelector(c,a)){e.push(c);break}c=c.parentNode}e=1<e.length?q.unique(e):e;return this.pushStack(e,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:"string"===typeof a?q.inArray(this[0],q(a)):q.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c="string"===typeof a?
q(a,b):q.makeArray(a&&a.nodeType?[a]:a),d=q.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:q.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});q.fn.andSelf=q.fn.addBack;q.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return q.dir(a,"parentNode")},parentsUntil:function(a,b,c){return q.dir(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},
nextAll:function(a){return q.dir(a,"nextSibling")},prevAll:function(a){return q.dir(a,"previousSibling")},nextUntil:function(a,b,c){return q.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return q.dir(a,"previousSibling",c)},siblings:function(a){return q.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return q.sibling(a.firstChild)},contents:function(a){return q.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:q.merge([],a.childNodes)}},function(a,b){q.fn[a]=function(c,
d){var f=q.map(this,b,c);mc.test(a)||(d=c);d&&"string"===typeof d&&(f=q.filter(d,f));f=1<this.length&&!Ad[a]?q.unique(f):f;1<this.length&&Fc.test(a)&&(f=f.reverse());return this.pushStack(f,a,M.call(arguments).join(","))}});q.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?q.find.matchesSelector(b[0],a)?[b[0]]:[]:q.find.matches(a,b)},dir:function(a,c,d){var f=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!q(a).is(d));)1===a.nodeType&&f.push(a),a=a[c];return f},sibling:function(a,
b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var ed="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yc=/ jQuery\d+="(?:null|\d+)"/g,Zc=/^\s+/,Oc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,hd=/<([\w:]+)/,Bd=/<tbody/i,Mb=/<|&#?\w+;/,vc=/<(?:script|style|link)/i,Pc=/<(?:script|object|embed|option|style)/i,Qc=RegExp("<(?:"+ed+")[\\s/>]",
"i"),fd=/^(?:checkbox|radio)$/,$c=/checked\s*(?:[^=]|=\s*.checked.)/i,Gc=/\/(java|ecma)script/i,Cd=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},id=k(R),ad=id.appendChild(R.createElement("div"));
Gb.optgroup=Gb.option;Gb.tbody=Gb.tfoot=Gb.colgroup=Gb.caption=Gb.thead;Gb.th=Gb.td;q.support.htmlSerialize||(Gb._default=[1,"X<div>","</div>"]);q.fn.extend({text:function(a){return q.access(this,function(a){return a===b?q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(q.isFunction(a))return this.each(function(b){q(this).wrapAll(a.call(this,b))});if(this[0]){var b=q(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&
b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return q.isFunction(a)?this.each(function(b){q(this).wrapInner(a.call(this,b))}):this.each(function(){var b=q(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=q.isFunction(a);return this.each(function(c){q(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){q.nodeName(this,
"body")||q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=q.clean(arguments);return this.pushStack(q.merge(a,
this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=q.clean(arguments);return this.pushStack(q.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||q.filter(a,[c]).length)!b&&1===c.nodeType&&(q.cleanData(c.getElementsByTagName("*")),q.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,
b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&q.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return q.clone(this,a,b)})},html:function(a){return q.access(this,function(a){var c=this[0]||{},d=0,f=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Yc,""):b;if("string"===typeof a&&!vc.test(a)&&(q.support.htmlSerialize||!Qc.test(a))&&(q.support.leadingWhitespace||!Zc.test(a))&&
!Gb[(hd.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Oc,"<$1></$2>");try{for(;d<f;d++)c=this[d]||{},1===c.nodeType&&(q.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(e){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(!h(this[0])){if(q.isFunction(a))return this.each(function(b){var c=q(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=q(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;q(this).remove();
b?q(b).before(a):q(c).append(a)})}return this.length?this.pushStack(q(q.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var f,e,j,u=0,h=a[0],k=[],g=this.length;if(!q.support.checkClone&&1<g&&"string"===typeof h&&$c.test(h))return this.each(function(){q(this).domManip(a,c,d)});if(q.isFunction(h))return this.each(function(f){var e=q(this);a[0]=h.call(this,f,c?e.html():b);e.domManip(a,c,d)});if(this[0]){f=q.buildFragment(a,
this,k);j=f.fragment;e=j.firstChild;1===j.childNodes.length&&(j=e);if(e){c=c&&q.nodeName(e,"tr");for(f=f.cacheable||g-1;u<g;u++)d.call(c&&q.nodeName(this[u],"table")?this[u].getElementsByTagName("tbody")[0]||this[u].appendChild(this[u].ownerDocument.createElement("tbody")):this[u],u===f?j:q.clone(j,!0,!0))}j=e=null;k.length&&q.each(k,function(a,b){b.src?q.ajax?q.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):q.error("no ajax"):q.globalEval((b.text||b.textContent||b.innerHTML||
"").replace(Cd,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});q.buildFragment=function(a,c,d){var f,e,j,u=a[0];c=c||R;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;if(1===a.length&&"string"===typeof u&&512>u.length&&c===R&&"<"===u.charAt(0)&&!Pc.test(u)&&(q.support.checkClone||!$c.test(u))&&(q.support.html5Clone||!Qc.test(u)))e=!0,f=q.fragments[u],j=f!==b;f||(f=c.createDocumentFragment(),q.clean(a,c,f,d),e&&(q.fragments[u]=j&&f));return{fragment:f,cacheable:e}};q.fragments={};q.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){q.fn[a]=function(c){var d,f=0,e=[];c=q(c);var j=c.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===d.nodeType&&1===d.childNodes.length)&&1===j)return c[b](this[0]),this;for(;f<j;f++)d=(0<f?this.clone(!0):this).get(),q(c[f])[b](d),e=e.concat(d);return this.pushStack(e,a,c.selector)}});q.extend({clone:function(a,b,c){var d,f,e,j;q.support.html5Clone||q.isXMLDoc(a)||!Qc.test("<"+a.nodeName+
">")?j=a.cloneNode(!0):(ad.innerHTML=a.outerHTML,ad.removeChild(j=ad.firstChild));if((!q.support.noCloneEvent||!q.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!q.isXMLDoc(a)){p(a,j);d=m(a);f=m(j);for(e=0;d[e];++e)f[e]&&p(d[e],f[e])}if(b&&(l(a,j),c)){d=m(a);f=m(j);for(e=0;d[e];++e)l(d[e],f[e])}return j},clean:function(a,b,c,d){var f,e,j,u,h,g,l=b===R&&id,C=[];if(!b||"undefined"===typeof b.createDocumentFragment)b=R;for(f=0;null!=(j=a[f]);f++)if("number"===typeof j&&(j+=""),j){if("string"===
typeof j)if(Mb.test(j)){l=l||k(b);g=b.createElement("div");l.appendChild(g);j=j.replace(Oc,"<$1></$2>");e=(hd.exec(j)||["",""])[1].toLowerCase();u=Gb[e]||Gb._default;h=u[0];for(g.innerHTML=u[1]+j+u[2];h--;)g=g.lastChild;if(!q.support.tbody){h=Bd.test(j);u="table"===e&&!h?g.firstChild&&g.firstChild.childNodes:"<table>"===u[1]&&!h?g.childNodes:[];for(e=u.length-1;0<=e;--e)q.nodeName(u[e],"tbody")&&!u[e].childNodes.length&&u[e].parentNode.removeChild(u[e])}!q.support.leadingWhitespace&&Zc.test(j)&&g.insertBefore(b.createTextNode(Zc.exec(j)[0]),
g.firstChild);j=g.childNodes;g.parentNode.removeChild(g)}else j=b.createTextNode(j);j.nodeType?C.push(j):q.merge(C,j)}g&&(j=g=l=null);if(!q.support.appendChecked)for(f=0;null!=(j=C[f]);f++)q.nodeName(j,"input")?n(j):"undefined"!==typeof j.getElementsByTagName&&q.grep(j.getElementsByTagName("input"),n);if(c){a=function(a){if(!a.type||Gc.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(f=0;null!=(j=C[f]);f++)if(!q.nodeName(j,"script")||!a(j))c.appendChild(j),
"undefined"!==typeof j.getElementsByTagName&&(j=q.grep(q.merge([],j.getElementsByTagName("script")),a),C.splice.apply(C,[f+1,0].concat(j)),f+=j.length)}return C},cleanData:function(a,b){for(var c,d,f,e,j=0,u=q.expando,h=q.cache,k=q.support.deleteExpando,g=q.event.special;null!=(f=a[j]);j++)if(b||q.acceptData(f))if(c=(d=f[u])&&h[d]){if(c.events)for(e in c.events)g[e]?q.event.remove(f,e):q.removeEvent(f,e,c.handle);h[d]&&(delete h[d],k?delete f[u]:f.removeAttribute?f.removeAttribute(u):f[u]=null,q.deletedIds.push(d))}}});
var dc,ec;q.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};dc=q.uaMatch(ea.userAgent);ec={};dc.browser&&(ec[dc.browser]=!0,ec.version=dc.version);ec.chrome?ec.webkit=!0:ec.webkit&&(ec.safari=!0);q.browser=ec;q.sub=function(){function a(b,c){return new a.fn.init(b,
c)}q.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){d&&(d instanceof q&&!(d instanceof a))&&(d=a(d));return q.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(R);return a};var vb,wb,oc,Rc=/alpha\([^)]*\)/i,Dd=/opacity=([^)]*)/,Ed=/^(top|right|bottom|left)$/,bd=/^(none|table(?!-c[ea]).+)/,Nb=/^margin/,gd=RegExp("^("+Y+")(.*)$","i"),Kb=RegExp("^("+Y+")(?!px)[a-z%]+$","i"),Fd=RegExp("^([-+])=("+Y+")","i"),Uc={BODY:"block"},
kd={position:"absolute",visibility:"hidden",display:"block"},wc={letterSpacing:0,fontWeight:400},hc=["Top","Right","Bottom","Left"],Kc=["Webkit","O","Moz","ms"],Hc=q.fn.toggle;q.fn.extend({css:function(a,c){return q.access(this,function(a,c,d){return d!==b?q.style(a,c,d):q.css(a,c)},a,c,1<arguments.length)},show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(a,b){var c="boolean"===typeof a;return q.isFunction(a)&&q.isFunction(b)?Hc.apply(this,arguments):this.each(function(){(c?
a:s(this))?q(this).show():q(this).hide()})}});q.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=vb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":q.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,f){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var e,j,u,h=q.camelCase(c),k=a.style;c=q.cssProps[h]||(q.cssProps[h]=r(k,h));u=q.cssHooks[c]||q.cssHooks[h];if(d!==
b){j=typeof d;if("string"===j&&(e=Fd.exec(d)))d=(e[1]+1)*e[2]+parseFloat(q.css(a,c)),j="number";if(!(null==d||"number"===j&&isNaN(d)))if("number"===j&&!q.cssNumber[h]&&(d+="px"),!u||!("set"in u)||(d=u.set(a,d,f))!==b)try{k[c]=d}catch(g){}}else return u&&"get"in u&&(e=u.get(a,!1,f))!==b?e:k[c]}},css:function(a,c,d,f){var e,j;j=q.camelCase(c);c=q.cssProps[j]||(q.cssProps[j]=r(a.style,j));(j=q.cssHooks[c]||q.cssHooks[j])&&"get"in j&&(e=j.get(a,!0,f));e===b&&(e=vb(a,c));"normal"===e&&c in wc&&(e=wc[c]);
return d||f!==b?(a=parseFloat(e),d||q.isNumeric(a)?a||0:e):e},swap:function(a,b,c){var d,f={};for(d in b)f[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=f[d];return c}});a.getComputedStyle?vb=function(b,c){var d,f,e,j,u=a.getComputedStyle(b,null),h=b.style;u&&(d=u.getPropertyValue(c)||u[c],""===d&&!q.contains(b.ownerDocument,b)&&(d=q.style(b,c)),Kb.test(d)&&Nb.test(c)&&(f=h.width,e=h.minWidth,j=h.maxWidth,h.minWidth=h.maxWidth=h.width=d,d=u.width,h.width=f,h.minWidth=e,h.maxWidth=
j));return d}:R.documentElement.currentStyle&&(vb=function(a,b){var c,d,f=a.currentStyle&&a.currentStyle[b],e=a.style;null==f&&(e&&e[b])&&(f=e[b]);if(Kb.test(f)&&!Ed.test(b)){c=e.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;e.left="fontSize"===b?"1em":f;f=e.pixelLeft+"px";e.left=c;d&&(a.runtimeStyle.left=d)}return""===f?"auto":f});q.each(["height","width"],function(a,b){q.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&bd.test(vb(a,"display"))?
q.swap(a,kd,function(){return z(a,b,d)}):z(a,b,d)},set:function(a,c,d){return A(a,c,d?w(a,b,d,q.support.boxSizing&&"border-box"===q.css(a,"boxSizing")):0)}}});q.support.opacity||(q.cssHooks.opacity={get:function(a,b){return Dd.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,f=q.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&(""===q.trim(e.replace(Rc,
""))&&c.removeAttribute)&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Rc.test(e)?e.replace(Rc,f):e+" "+f}});q(function(){q.support.reliableMarginRight||(q.cssHooks.marginRight={get:function(a,b){return q.swap(a,{display:"inline-block"},function(){if(b)return vb(a,"marginRight")})}});!q.support.pixelPosition&&q.fn.position&&q.each(["top","left"],function(a,b){q.cssHooks[b]={get:function(a,c){if(c){var d=vb(a,b);return Kb.test(d)?q(a).position()[b]+"px":d}}}})});q.expr&&q.expr.filters&&
(q.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!q.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||vb(a,"display"))},q.expr.filters.visible=function(a){return!q.expr.filters.hidden(a)});q.each({margin:"",padding:"",border:"Width"},function(a,b){q.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],f={};for(c=0;4>c;c++)f[a+hc[c]+b]=d[c]||d[c-2]||d[0];return f}};Nb.test(a)||(q.cssHooks[a+b].set=A)});var Gd=/%20/g,yd=/\[\]$/,
Yb=/\r?\n/g,Ob=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,sb=/^(?:select|textarea)/i;q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||sb.test(this.nodeName)||Ob.test(this.type))}).map(function(a,b){var c=q(this).val();return null==
c?null:q.isArray(c)?q.map(c,function(a){return{name:b.name,value:a.replace(Yb,"\r\n")}}):{name:b.name,value:c.replace(Yb,"\r\n")}}).get()}});q.param=function(a,c){var d,f=[],e=function(a,b){b=q.isFunction(b)?b():null==b?"":b;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=q.ajaxSettings&&q.ajaxSettings.traditional);if(q.isArray(a)||a.jquery&&!q.isPlainObject(a))q.each(a,function(){e(this.name,this.value)});else for(d in a)y(d,a[d],c,e);return f.join("&").replace(Gd,"+")};var fc,
gc,Hd=/#.*$/,Id=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Jd=/^(?:GET|HEAD)$/,Kd=/^\/\//,ld=/\?/,Ld=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cd=/([?&])_=[^&]*/,Ic=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,dd=q.fn.load,Vc={},md={},nd=["*/"]+["*"];try{gc=Z.href}catch(Rd){gc=R.createElement("a"),gc.href="",gc=gc.href}fc=Ic.exec(gc.toLowerCase())||[];q.fn.load=function(a,c,d){if("string"!==typeof a&&dd)return dd.apply(this,arguments);if(!this.length)return this;var f,e,j,u=this,h=a.indexOf(" ");
0<=h&&(f=a.slice(h,a.length),a=a.slice(0,h));q.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(e="POST");q.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,b){d&&u.each(d,j||[a.responseText,b,a])}}).done(function(a){j=arguments;u.html(f?q("<div>").append(a.replace(Ld,"")).find(f):a)});return this};q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){q.fn[b]=function(a){return this.on(b,a)}});q.each(["get","post"],function(a,c){q[c]=function(a,
d,f,e){q.isFunction(d)&&(e=e||f,f=d,d=b);return q.ajax({type:c,url:a,data:d,success:f,dataType:e})}});q.extend({getScript:function(a,c){return q.get(a,b,c,"script")},getJSON:function(a,b,c){return q.get(a,b,c,"json")},ajaxSetup:function(a,b){b?S(a,q.ajaxSettings):(b=a,a=q.ajaxSettings);S(a,b);return a},ajaxSettings:{url:gc,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(fc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":nd},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":q.parseJSON,"text xml":q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:B(Vc),ajaxTransport:B(md),ajax:function(a,c){function d(a,c,j,k){var l,da,s,ba,ga=c;if(2!==v){v=2;h&&clearTimeout(h);u=b;e=k||"";
A.readyState=0<a?4:0;if(j){ba=C;k=A;var z,w,y,B,Zb=ba.contents,t=ba.dataTypes,D=ba.responseFields;for(w in D)w in j&&(k[D[w]]=j[w]);for(;"*"===t[0];)t.shift(),z===b&&(z=ba.mimeType||k.getResponseHeader("content-type"));if(z)for(w in Zb)if(Zb[w]&&Zb[w].test(z)){t.unshift(w);break}if(t[0]in j)y=t[0];else{for(w in j){if(!t[0]||ba.converters[w+" "+t[0]]){y=w;break}B||(B=w)}y=y||B}y?(y!==t[0]&&t.unshift(y),ba=j[y]):ba=void 0}if(200<=a&&300>a||304===a)if(C.ifModified&&((j=A.getResponseHeader("Last-Modified"))&&
(q.lastModified[f]=j),(j=A.getResponseHeader("Etag"))&&(q.etag[f]=j)),304===a)ga="notmodified",l=!0;else{a:{da=C;s=ba;var Ga,ea,ga=da.dataTypes.slice();z=ga[0];w={};y=0;da.dataFilter&&(s=da.dataFilter(s,da.dataType));if(ga[1])for(Ga in da.converters)w[Ga.toLowerCase()]=da.converters[Ga];for(;j=ga[++y];)if("*"!==j){if("*"!==z&&z!==j){Ga=w[z+" "+j]||w["* "+j];if(!Ga)for(ea in w)if(l=ea.split(" "),l[1]===j&&(Ga=w[z+" "+l[0]]||w["* "+l[0]])){!0===Ga?Ga=w[ea]:!0!==w[ea]&&(j=l[0],ga.splice(y--,0,j));break}if(!0!==
Ga)if(Ga&&da["throws"])s=Ga(s);else try{s=Ga(s)}catch(Pa){l={state:"parsererror",error:Ga?Pa:"No conversion from "+z+" to "+j};break a}}z=j}l={state:"success",data:s}}ga=l.state;da=l.data;s=l.error;l=!s}else if(s=ga,!ga||a)ga="error",0>a&&(a=0);A.status=a;A.statusText=(c||ga)+"";l?p.resolveWith(m,[da,ga,A]):p.rejectWith(m,[A,ga,s]);A.statusCode(r);r=b;g&&n.trigger("ajax"+(l?"Success":"Error"),[A,C,l?da:s]);fa.fireWith(m,[A,ga]);g&&(n.trigger("ajaxComplete",[A,C]),--q.active||q.event.trigger("ajaxStop"))}}
"object"===typeof a&&(c=a,a=b);c=c||{};var f,e,j,u,h,k,g,l,C=q.ajaxSetup({},c),m=C.context||C,n=m!==C&&(m.nodeType||m instanceof q)?q(m):q.event,p=q.Deferred(),fa=q.Callbacks("once memory"),r=C.statusCode||{},da={},s={},v=0,ba="canceled",A={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=s[c]=s[c]||a;da[a]=b}return this},getAllResponseHeaders:function(){return 2===v?e:null},getResponseHeader:function(a){var c;if(2===v){if(!j)for(j={};c=Id.exec(e);)j[c[1].toLowerCase()]=
c[2];c=j[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){v||(C.mimeType=a);return this},abort:function(a){a=a||ba;u&&u.abort(a);d(0,a);return this}};p.promise(A);A.success=A.done;A.error=A.fail;A.complete=fa.add;A.statusCode=function(a){if(a){var b;if(2>v)for(b in a)r[b]=[r[b],a[b]];else b=a[A.status],A.always(b)}return this};C.url=((a||C.url)+"").replace(Hd,"").replace(Kd,fc[1]+"//");C.dataTypes=q.trim(C.dataType||"*").toLowerCase().split(Ca);null==C.crossDomain&&(k=Ic.exec(C.url.toLowerCase()),
C.crossDomain=!(!k||!(k[1]!==fc[1]||k[2]!==fc[2]||(k[3]||("http:"===k[1]?80:443))!=(fc[3]||("http:"===fc[1]?80:443)))));C.data&&(C.processData&&"string"!==typeof C.data)&&(C.data=q.param(C.data,C.traditional));I(Vc,C,c,A);if(2===v)return A;g=C.global;C.type=C.type.toUpperCase();C.hasContent=!Jd.test(C.type);g&&0===q.active++&&q.event.trigger("ajaxStart");if(!C.hasContent&&(C.data&&(C.url+=(ld.test(C.url)?"&":"?")+C.data,delete C.data),f=C.url,!1===C.cache)){k=q.now();var ga=C.url.replace(cd,"$1_="+
k);C.url=ga+(ga===C.url?(ld.test(C.url)?"&":"?")+"_="+k:"")}(C.data&&C.hasContent&&!1!==C.contentType||c.contentType)&&A.setRequestHeader("Content-Type",C.contentType);C.ifModified&&(f=f||C.url,q.lastModified[f]&&A.setRequestHeader("If-Modified-Since",q.lastModified[f]),q.etag[f]&&A.setRequestHeader("If-None-Match",q.etag[f]));A.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+("*"!==C.dataTypes[0]?", "+nd+"; q=0.01":""):C.accepts["*"]);for(l in C.headers)A.setRequestHeader(l,
C.headers[l]);if(C.beforeSend&&(!1===C.beforeSend.call(m,A,C)||2===v))return A.abort();ba="abort";for(l in{success:1,error:1,complete:1})A[l](C[l]);if(u=I(md,C,c,A)){A.readyState=1;g&&n.trigger("ajaxSend",[A,C]);C.async&&0<C.timeout&&(h=setTimeout(function(){A.abort("timeout")},C.timeout));try{v=1,u.send(da,d)}catch(z){if(2>v)d(-1,z);else throw z;}}else d(-1,"No Transport");return A},active:0,lastModified:{},etag:{}});var sd=[],td=/\?/,Sc=/(=)\?(?=&|$)|\?\?/,ud=q.now();q.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var a=sd.pop()||q.expando+"_"+ud++;this[a]=!0;return a}});q.ajaxPrefilter("json jsonp",function(c,d,f){var e,j,u,h=c.data,k=c.url,g=!1!==c.jsonp,l=g&&Sc.test(k),C=g&&!l&&"string"===typeof h&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sc.test(h);if("jsonp"===c.dataTypes[0]||l||C)return e=c.jsonpCallback=q.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,j=a[e],l?c.url=k.replace(Sc,"$1"+e):C?c.data=h.replace(Sc,"$1"+e):g&&(c.url+=(td.test(k)?
"&":"?")+c.jsonp+"="+e),c.converters["script json"]=function(){u||q.error(e+" was not called");return u[0]},c.dataTypes[0]="json",a[e]=function(){u=arguments},f.always(function(){a[e]=j;c[e]&&(c.jsonpCallback=d.jsonpCallback,sd.push(e));u&&q.isFunction(j)&&j(u[0]);u=j=b}),"script"});q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){q.globalEval(a);
return a}}});q.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});q.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(f,e){c=R.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,f){if(f||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=
null,d&&c.parentNode&&d.removeChild(c),c=b,f||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var $b,xc=a.ActiveXObject?function(){for(var a in $b)$b[a](0,1)}:!1,yc=0;q.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&J()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:J;var zc=q.ajaxSettings.xhr();q.extend(q.support,{ajax:!!zc,cors:!!zc&&"withCredentials"in zc});q.support.ajax&&q.ajaxTransport(function(c){if(!c.crossDomain||
q.support.cors){var d;return{send:function(f,e){var j,u,h=c.xhr();c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(u in c.xhrFields)h[u]=c.xhrFields[u];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType);!c.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(u in f)h.setRequestHeader(u,f[u])}catch(k){}h.send(c.hasContent&&c.data||null);d=function(a,f){var u,k,g,l,C;try{if(d&&(f||4===h.readyState))if(d=
b,j&&(h.onreadystatechange=q.noop,xc&&delete $b[j]),f)4!==h.readyState&&h.abort();else{u=h.status;g=h.getAllResponseHeaders();l={};if((C=h.responseXML)&&C.documentElement)l.xml=C;try{l.text=h.responseText}catch(m){}try{k=h.statusText}catch(n){k=""}!u&&c.isLocal&&!c.crossDomain?u=l.text?200:404:1223===u&&(u=204)}}catch(p){f||e(-1,p)}l&&e(u,k,l,g)};c.async?4===h.readyState?setTimeout(d,0):(j=++yc,xc&&($b||($b={},q(a).unload(xc)),$b[j]=d),h.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});
var pc,Tc,Od=/^(?:toggle|show|hide)$/,vd=RegExp("^(?:([-+])=|)("+Y+")([a-z%]*)$","i"),Pd=/queueHooks$/,Lc=[function(a,b,c){var d,f,e,j,u,h,k=this,g=a.style,l={},C=[],m=a.nodeType&&s(a);c.queue||(u=q._queueHooks(a,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,k.always(function(){k.always(function(){u.unqueued--;q.queue(a,"fx").length||u.empty.fire()})}));if(1===a.nodeType&&("height"in b||"width"in b))c.overflow=[g.overflow,g.overflowX,g.overflowY],
"inline"===q.css(a,"display")&&"none"===q.css(a,"float")&&(!q.support.inlineBlockNeedsLayout||"inline"===D(a.nodeName)?g.display="inline-block":g.zoom=1);c.overflow&&(g.overflow="hidden",q.support.shrinkWrapBlocks||k.done(function(){g.overflow=c.overflow[0];g.overflowX=c.overflow[1];g.overflowY=c.overflow[2]}));for(d in b)e=b[d],Od.exec(e)&&(delete b[d],f=f||"toggle"===e,e!==(m?"hide":"show")&&C.push(d));if(b=C.length){e=q._data(a,"fxshow")||q._data(a,"fxshow",{});"hidden"in e&&(m=e.hidden);f&&(e.hidden=
!m);m?q(a).show():k.done(function(){q(a).hide()});k.done(function(){var b;q.removeData(a,"fxshow",!0);for(b in l)q.style(a,b,l[b])});for(d=0;d<b;d++)f=C[d],j=k.createTween(f,m?e[f]:0),l[f]=e[f]||q.style(a,f),f in e||(e[f]=j.start,m&&(j.end=j.start,j.start="width"===f||"height"===f?1:0))}}],Ac={"*":[function(a,b){var c,d,f=this.createTween(a,b),e=vd.exec(b),j=f.cur(),u=+j||0,h=1,k=20;if(e){c=+e[2];d=e[3]||(q.cssNumber[a]?"":"px");if("px"!==d&&u){u=q.css(f.elem,a,!0)||c||1;do h=h||".5",u/=h,q.style(f.elem,
a,u+d);while(h!==(h=f.cur()/j)&&1!==h&&--k)}f.unit=d;f.start=u;f.end=e[1]?u+(e[1]+1)*c:c}return f}]};q.Animation=q.extend(V,{tweener:function(a,b){q.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,f=a.length;d<f;d++)c=a[d],Ac[c]=Ac[c]||[],Ac[c].unshift(b)},prefilter:function(a,b){b?Lc.unshift(a):Lc.push(a)}});q.Tween=N;N.prototype={constructor:N,init:function(a,b,c,d,f,e){this.elem=a;this.prop=c;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||
(q.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];this.pos=this.options.duration?b=q.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;
N.propHooks={_default:{get:function(a){if(null!=a.elem[a.prop]&&(!a.elem.style||null==a.elem.style[a.prop]))return a.elem[a.prop];a=q.css(a.elem,a.prop,!1,"");return!a||"auto"===a?0:a},set:function(a){if(q.fx.step[a.prop])q.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[q.cssProps[a.prop]]||q.cssHooks[a.prop])?q.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};
q.each(["toggle","show","hide"],function(a,b){var c=q.fn[b];q.fn[b]=function(d,f,e){return null==d||"boolean"===typeof d||!a&&q.isFunction(d)&&q.isFunction(f)?c.apply(this,arguments):this.animate(P(b,!0),d,f,e)}});q.fn.extend({fadeTo:function(a,b,c,d){return this.filter(s).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var f=q.isEmptyObject(a),e=q.speed(b,c,d);b=function(){var b=V(this,q.extend({},a),e);f&&b.stop(!0)};return f||!1===e.queue?this.each(b):this.queue(e.queue,
b)},stop:function(a,c,d){var f=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",e=q.timers,j=q._data(this);if(c)j[c]&&j[c].stop&&f(j[c]);else for(c in j)j[c]&&(j[c].stop&&Pd.test(c))&&f(j[c]);for(c=e.length;c--;)if(e[c].elem===this&&(null==a||e[c].queue===a))e[c].anim.stop(d),b=!1,e.splice(c,1);(b||!d)&&q.dequeue(this,a)})}});q.each({slideDown:P("show"),slideUp:P("hide"),
slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){q.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});q.speed=function(a,b,c){var d=a&&"object"===typeof a?q.extend({},a):{complete:c||!c&&b||q.isFunction(a)&&a,duration:a,easing:c&&b||b&&!q.isFunction(b)&&b};d.duration=q.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in q.fx.speeds?q.fx.speeds[d.duration]:q.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue=
"fx";d.old=d.complete;d.complete=function(){q.isFunction(d.old)&&d.old.call(this);d.queue&&q.dequeue(this,d.queue)};return d};q.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};q.timers=[];q.fx=N.prototype.init;q.fx.tick=function(){var a,c=q.timers,d=0;for(pc=q.now();d<c.length;d++)a=c[d],!a()&&c[d]===a&&c.splice(d--,1);c.length||q.fx.stop();pc=b};q.fx.timer=function(a){a()&&(q.timers.push(a)&&!Tc)&&(Tc=setInterval(q.fx.tick,q.fx.interval))};q.fx.interval=
13;q.fx.stop=function(){clearInterval(Tc);Tc=null};q.fx.speeds={slow:600,fast:200,_default:400};q.fx.step={};q.expr&&q.expr.filters&&(q.expr.filters.animated=function(a){return q.grep(q.timers,function(b){return a===b.elem}).length});var wd=/^(?:body|html)$/i;q.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){q.offset.setOffset(this,a,b)});var c,d,f,e,j,u={top:0,left:0};if(f=(e=this[0])&&e.ownerDocument){if((d=f.body)===e)return q.offset.bodyOffset(e);c=f.documentElement;
if(!q.contains(c,e))return u;"undefined"!==typeof e.getBoundingClientRect&&(u=e.getBoundingClientRect());f=U(f);e=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;j=f.pageYOffset||c.scrollTop;c=f.pageXOffset||c.scrollLeft;return{top:u.top+j-e,left:u.left+c-d}}};q.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;q.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(q.css(a,"marginTop"))||0,c+=parseFloat(q.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,
b,c){var d=q.css(a,"position");"static"===d&&(a.style.position="relative");var f=q(a),e=f.offset(),j=q.css(a,"top"),u=q.css(a,"left"),h={},k={};("absolute"===d||"fixed"===d)&&-1<q.inArray("auto",[j,u])?(k=f.position(),d=k.top,u=k.left):(d=parseFloat(j)||0,u=parseFloat(u)||0);q.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(h.top=b.top-e.top+d);null!=b.left&&(h.left=b.left-e.left+u);"using"in b?b.using.call(a,h):f.css(h)}};q.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),
c=this.offset(),d=wd.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(q.css(a,"marginTop"))||0;c.left-=parseFloat(q.css(a,"marginLeft"))||0;d.top+=parseFloat(q.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(q.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||R.body;a&&!wd.test(a.nodeName)&&"static"===q.css(a,"position");)a=a.offsetParent;return a||R.body})}});q.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);q.fn[a]=function(f){return q.access(this,function(a,f,e){var j=U(a);if(e===b)return j?c in j?j[c]:j.document.documentElement[f]:a[f];j?j.scrollTo(!d?e:q(j).scrollLeft(),d?e:q(j).scrollTop()):a[f]=e},a,f,arguments.length,null)}});q.each({Height:"height",Width:"width"},function(a,c){q.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,f){q.fn[f]=function(f,e){var j=arguments.length&&(d||"boolean"!==typeof f),u=d||(!0===f||!0===e?"margin":
"border");return q.access(this,function(c,d,f){return q.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):f===b?q.css(c,d,f,u):q.style(c,d,f,u)},c,j?f:b,j,null)}})});a.jQuery=a.$=q;"function"===typeof define&&(define.amd&&define.amd.jQuery)&&define("jquery",[],function(){return q})})(window);
(function(){var a=this,b=a._,g={},c=Array.prototype,e=Object.prototype,d=c.push,h=c.slice,f=c.concat,j=e.toString,k=e.hasOwnProperty,l=c.forEach,p=c.map,m=c.reduce,n=c.reduceRight,r=c.filter,s=c.every,v=c.some,A=c.indexOf,w=c.lastIndexOf,e=Array.isArray,z=Object.keys,D=Function.prototype.bind,y=function(a){if(a instanceof y)return a;if(!(this instanceof y))return new y(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=y),exports._=
y):a._=y;y.VERSION="1.5.2";var B=y.each=y.forEach=function(a,b,c){if(null!=a)if(l&&a.forEach===l)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,f=a.length;d<f&&b.call(c,a[d],d,a)!==g;d++);else for(var e=y.keys(a),d=0,f=e.length;d<f&&b.call(c,a[e[d]],e[d],a)!==g;d++);};y.map=y.collect=function(a,b,c){var d=[];if(null==a)return d;if(p&&a.map===p)return a.map(b,c);B(a,function(a,f,e){d.push(b.call(c,a,f,e))});return d};y.reduce=y.foldl=y.inject=function(a,b,c,d){var f=2<arguments.length;null==
a&&(a=[]);if(m&&a.reduce===m)return d&&(b=y.bind(b,d)),f?a.reduce(b,c):a.reduce(b);B(a,function(a,e,j){f?c=b.call(d,c,a,e,j):(c=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return c};y.reduceRight=y.foldr=function(a,b,c,d){var f=2<arguments.length;null==a&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=y.bind(b,d)),f?a.reduceRight(b,c):a.reduceRight(b);var e=a.length;if(e!==+e)var j=y.keys(a),e=j.length;B(a,function(h,k,g){k=j?j[--e]:--e;f?c=b.call(d,c,a[k],k,g):
(c=a[k],f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return c};y.find=y.detect=function(a,b,c){var d;I(a,function(a,f,e){if(b.call(c,a,f,e))return d=a,!0});return d};y.filter=y.select=function(a,b,c){var d=[];if(null==a)return d;if(r&&a.filter===r)return a.filter(b,c);B(a,function(a,f,e){b.call(c,a,f,e)&&d.push(a)});return d};y.reject=function(a,b,c){return y.filter(a,function(a,d,f){return!b.call(c,a,d,f)},c)};y.every=y.all=function(a,b,c){b||(b=y.identity);var d=
!0;if(null==a)return d;if(s&&a.every===s)return a.every(b,c);B(a,function(a,f,e){if(!(d=d&&b.call(c,a,f,e)))return g});return!!d};var I=y.some=y.any=function(a,b,c){b||(b=y.identity);var d=!1;if(null==a)return d;if(v&&a.some===v)return a.some(b,c);B(a,function(a,f,e){if(d||(d=b.call(c,a,f,e)))return g});return!!d};y.contains=y.include=function(a,b){return null==a?!1:A&&a.indexOf===A?-1!=a.indexOf(b):I(a,function(a){return a===b})};y.invoke=function(a,b){var c=h.call(arguments,2),d=y.isFunction(b);
return y.map(a,function(a){return(d?b:a[b]).apply(a,c)})};y.pluck=function(a,b){return y.map(a,function(a){return a[b]})};y.where=function(a,b,c){return y.isEmpty(b)?c?void 0:[]:y[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};y.findWhere=function(a,b){return y.where(a,b,!0)};y.max=function(a,b,c){if(!b&&y.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&y.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};B(a,function(a,
f,e){f=b?b.call(c,a,f,e):a;f>d.computed&&(d={value:a,computed:f})});return d.value};y.min=function(a,b,c){if(!b&&y.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&y.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};B(a,function(a,f,e){f=b?b.call(c,a,f,e):a;f<d.computed&&(d={value:a,computed:f})});return d.value};y.shuffle=function(a){var b,c=0,d=[];B(a,function(a){b=y.random(c++);d[c-1]=d[b];d[b]=a});return d};y.sample=function(a,b,c){return 2>arguments.length||
c?a[y.random(a.length-1)]:y.shuffle(a).slice(0,Math.max(0,b))};var S=function(a){return y.isFunction(a)?a:function(b){return b[a]}};y.sortBy=function(a,b,c){var d=S(b);return y.pluck(y.map(a,function(a,b,f){return{value:a,index:b,criteria:d.call(c,a,b,f)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var J=function(a){return function(b,c,d){var f={},e=null==c?y.identity:S(c);B(b,function(c,j){var h=
e.call(d,c,j,b);a(f,h,c)});return f}};y.groupBy=J(function(a,b,c){(y.has(a,b)?a[b]:a[b]=[]).push(c)});y.indexBy=J(function(a,b,c){a[b]=c});y.countBy=J(function(a,b){y.has(a,b)?a[b]++:a[b]=1});y.sortedIndex=function(a,b,c,d){c=null==c?y.identity:S(c);b=c.call(d,b);for(var f=0,e=a.length;f<e;){var j=f+e>>>1;c.call(d,a[j])<b?f=j+1:e=j}return f};y.toArray=function(a){return!a?[]:y.isArray(a)?h.call(a):a.length===+a.length?y.map(a,y.identity):y.values(a)};y.size=function(a){return null==a?0:a.length===
+a.length?a.length:y.keys(a).length};y.first=y.head=y.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)};y.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};y.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))};y.rest=y.tail=y.drop=function(a,b,c){return h.call(a,null==b||c?1:b)};y.compact=function(a){return y.filter(a,y.identity)};var O=function(a,b,c){if(b&&y.every(a,y.isArray))return f.apply(c,a);B(a,function(a){y.isArray(a)||
y.isArguments(a)?b?d.apply(c,a):O(a,b,c):c.push(a)});return c};y.flatten=function(a,b){return O(a,b,[])};y.without=function(a){return y.difference(a,h.call(arguments,1))};y.uniq=y.unique=function(a,b,c,d){y.isFunction(b)&&(d=c,c=b,b=!1);c=c?y.map(a,c,d):a;var f=[],e=[];B(c,function(c,d){if(b?!d||e[e.length-1]!==c:!y.contains(e,c))e.push(c),f.push(a[d])});return f};y.union=function(){return y.uniq(y.flatten(arguments,!0))};y.intersection=function(a){var b=h.call(arguments,1);return y.filter(y.uniq(a),
function(a){return y.every(b,function(b){return 0<=y.indexOf(b,a)})})};y.difference=function(a){var b=f.apply(c,h.call(arguments,1));return y.filter(a,function(a){return!y.contains(b,a)})};y.zip=function(){for(var a=y.max(y.pluck(arguments,"length").concat(0)),b=Array(a),c=0;c<a;c++)b[c]=y.pluck(arguments,""+c);return b};y.object=function(a,b){if(null==a)return{};for(var c={},d=0,f=a.length;d<f;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};y.indexOf=function(a,b,c){if(null==a)return-1;var d=0,f=
a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,f+c):c;else return d=y.sortedIndex(a,b),a[d]===b?d:-1;if(A&&a.indexOf===A)return a.indexOf(b,c);for(;d<f;d++)if(a[d]===b)return d;return-1};y.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(w&&a.lastIndexOf===w)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===b)return c;return-1};y.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),f=0,
e=Array(d);f<d;)e[f++]=a,a+=c;return e};var V=function(){};y.bind=function(a,b){var c,d;if(D&&a.bind===D)return D.apply(a,h.call(arguments,1));if(!y.isFunction(a))throw new TypeError;c=h.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));V.prototype=a.prototype;var f=new V;V.prototype=null;var e=a.apply(f,c.concat(h.call(arguments)));return Object(e)===e?e:f}};y.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,
b.concat(h.call(arguments)))}};y.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw Error("bindAll must be passed function names");B(b,function(b){a[b]=y.bind(a[b],a)});return a};y.memoize=function(a,b){var c={};b||(b=y.identity);return function(){var d=b.apply(this,arguments);return y.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};y.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};y.defer=function(a){return y.delay.apply(y,[a,1].concat(h.call(arguments,
1)))};y.throttle=function(a,b,c){var d,f,e,j=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:new Date;j=null;e=a.apply(d,f)};return function(){var g=new Date;!h&&!1===c.leading&&(h=g);var l=b-(g-h);d=this;f=arguments;0>=l?(clearTimeout(j),j=null,h=g,e=a.apply(d,f)):!j&&!1!==c.trailing&&(j=setTimeout(k,l));return e}};y.debounce=function(a,b,c){var d,f,e,j,h;return function(){e=this;f=arguments;j=new Date;var k=function(){var g=new Date-j;g<b?d=setTimeout(k,b-g):(d=null,c||(h=a.apply(e,f)))},
g=c&&!d;d||(d=setTimeout(k,b));g&&(h=a.apply(e,f));return h}};y.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};y.wrap=function(a,b){return function(){var c=[a];d.apply(c,arguments);return b.apply(this,c)}};y.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};y.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};y.keys=z||function(a){if(a!==
Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)y.has(a,c)&&b.push(c);return b};y.values=function(a){for(var b=y.keys(a),c=b.length,d=Array(c),f=0;f<c;f++)d[f]=a[b[f]];return d};y.pairs=function(a){for(var b=y.keys(a),c=b.length,d=Array(c),f=0;f<c;f++)d[f]=[b[f],a[b[f]]];return d};y.invert=function(a){for(var b={},c=y.keys(a),d=0,f=c.length;d<f;d++)b[a[c[d]]]=c[d];return b};y.functions=y.methods=function(a){var b=[],c;for(c in a)y.isFunction(a[c])&&b.push(c);return b.sort()};
y.extend=function(a){B(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};y.pick=function(a){var b={},d=f.apply(c,h.call(arguments,1));B(d,function(c){c in a&&(b[c]=a[c])});return b};y.omit=function(a){var b={},d=f.apply(c,h.call(arguments,1)),e;for(e in a)y.contains(d,e)||(b[e]=a[e]);return b};y.defaults=function(a){B(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])});return a};y.clone=function(a){return!y.isObject(a)?a:y.isArray(a)?a.slice():
y.extend({},a)};y.tap=function(a,b){b(a);return a};var N=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof y&&(a=a._wrapped);b instanceof y&&(b=b._wrapped);var f=j.call(a);if(f!=j.call(b))return!1;switch(f){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&
a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var e=c.length;e--;)if(c[e]==a)return d[e]==b;var e=a.constructor,h=b.constructor;if(e!==h&&(!y.isFunction(e)||!(e instanceof e&&y.isFunction(h)&&h instanceof h)))return!1;c.push(a);d.push(b);e=0;h=!0;if("[object Array]"==f){if(e=a.length,h=e==b.length)for(;e--&&(h=N(a[e],b[e],c,d)););}else{for(var k in a)if(y.has(a,k)&&(e++,!(h=y.has(b,k)&&N(a[k],b[k],c,d))))break;if(h){for(k in b)if(y.has(b,k)&&!e--)break;h=!e}}c.pop();
d.pop();return h};y.isEqual=function(a,b){return N(a,b,[],[])};y.isEmpty=function(a){if(null==a)return!0;if(y.isArray(a)||y.isString(a))return 0===a.length;for(var b in a)if(y.has(a,b))return!1;return!0};y.isElement=function(a){return!!(a&&1===a.nodeType)};y.isArray=e||function(a){return"[object Array]"==j.call(a)};y.isObject=function(a){return a===Object(a)};B("Arguments Function String Number Date RegExp".split(" "),function(a){y["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}});y.isArguments(arguments)||
(y.isArguments=function(a){return!(!a||!y.has(a,"callee"))});"function"!==typeof/./&&(y.isFunction=function(a){return"function"===typeof a});y.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};y.isNaN=function(a){return y.isNumber(a)&&a!=+a};y.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==j.call(a)};y.isNull=function(a){return null===a};y.isUndefined=function(a){return void 0===a};y.has=function(a,b){return k.call(a,b)};y.noConflict=function(){a._=b;return this};y.identity=
function(a){return a};y.times=function(a,b,c){for(var d=Array(Math.max(0,a)),f=0;f<a;f++)d[f]=b.call(c,f);return d};y.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=y.invert(P.escape);var U={escape:RegExp("["+y.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+y.keys(P.unescape).join("|")+")","g")};y.each(["escape","unescape"],function(a){y[a]=function(b){return null==b?
"":(""+b).replace(U[a],function(b){return P[a][b]})}});y.result=function(a,b){if(null!=a){var c=a[b];return y.isFunction(c)?c.call(a):c}};y.mixin=function(a){B(y.functions(a),function(b){var c=y[b]=a[b];y.prototype[b]=function(){var a=[this._wrapped];d.apply(a,arguments);a=c.apply(y,a);return this._chain?y(a).chain():a}})};var W=0;y.uniqueId=function(a){var b=++W+"";return a?a+b:b};y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ca=/(.)^/,
R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\t|\u2028|\u2029/g;y.template=function(a,b,c){var d;c=y.defaults({},c,y.templateSettings);var f=RegExp([(c.escape||ca).source,(c.interpolate||ca).source,(c.evaluate||ca).source].join("|")+"|$","g"),e=0,j="__p+='";a.replace(f,function(b,c,d,f,h){j+=a.slice(e,h).replace(Z,function(a){return"\\"+R[a]});c&&(j+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");d&&(j+="'+\n((__t=("+d+"))==null?'':__t)+\n'");
f&&(j+="';\n"+f+"\n__p+='");e=h+b.length;return b});j+="';\n";c.variable||(j="with(obj||{}){\n"+j+"}\n");j="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+j+"return __p;\n";try{d=new Function(c.variable||"obj","_",j)}catch(h){throw h.source=j,h;}if(b)return d(b,y);b=function(a){return d.call(this,a,y)};b.source="function("+(c.variable||"obj")+"){\n"+j+"}";return b};y.chain=function(a){return y(a).chain()};y.mixin(y);B("pop push reverse shift sort splice unshift".split(" "),
function(a){var b=c[a];y.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);("shift"==a||"splice"==a)&&0===c.length&&delete c[0];return this._chain?y(c).chain():c}});B(["concat","join","slice"],function(a){var b=c[a];y.prototype[a]=function(){var a=b.apply(this._wrapped,arguments);return this._chain?y(a).chain():a}});y.extend(y.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);define("underscore",function(a){return function(){return a._}}(this));
define("eventBus",["underscore"],function(a){var b={},g={};return{publish:function(c,e){b[c]=b[c]||{cache:void 0,uids:[]};a.forEach(b[c].uids,function(a){g[a].fn(e,b[c].cache)}.bind(this));b[c].cache=e},subscribe:function(c,e){var d=a.uniqueId(c);b[c]=b[c]||{cache:void 0,uids:[]};b[c].uids.push(d);g[d]={fn:e,eventName:c};return d},unsubscribe:function(c){if(!c)throw Error();var e=g[c]&&g[c].eventName;b[e].uids=a.reject(b[e].uids,function(a){return a===c});delete g[c]},unsubscribeByName:function(a){if(!a)throw Error();
if(a=b[a]&&b[a].uids)for(var e in a)this.unsubscribe(a[e])},getCache:function(a){if(!a)throw Error();console.log(b[a]&&b[a].cache);return b[a]&&b[a].cache}}});
define("text",["module"],function(a){var b,g,c,e,d,h=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],f=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,j=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,k="undefined"!==typeof location&&location.href,l=k&&location.protocol&&location.protocol.replace(/\:/,""),p=k&&location.hostname,m=k&&(location.port||void 0),n={},r=a.config&&a.config()||{};b={version:"2.0.10",strip:function(a){if(a){a=a.replace(f,"");var b=a.match(j);b&&(a=b[1])}else a=
"";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:r.createXhr||function(){var a,b,c;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!==typeof ActiveXObject)for(b=0;3>b;b+=1){c=h[b];try{a=new ActiveXObject(c)}catch(d){}if(a){h=[c];break}}return a},parseName:function(a){var b,
c,d=!1,f=a.indexOf(".");b=0===a.indexOf("./")||0===a.indexOf("../");-1!==f&&(!b||1<f)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a;a=c||b;f=a.indexOf("!");-1!==f&&(d="strip"===a.substring(f+1),a=a.substring(0,f),c?c=a:b=a);return{moduleName:b,ext:c,strip:d}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,f){var e,j;e=b.xdRegExp.exec(a);if(!e)return!0;a=e[2];e=e[3];e=e.split(":");j=e[1];e=e[0];return(!a||a===c)&&(!e||e.toLowerCase()===d.toLowerCase())&&(!j&&!e||j===f)},finishLoad:function(a,
c,d,f){d=c?b.strip(d):d;r.isBuild&&(n[a]=d);f(d)},load:function(a,c,d,f){if(f.isBuild&&!f.inlineText)d();else{r.isBuild=f.isBuild;var e=b.parseName(a);f=e.moduleName+(e.ext?"."+e.ext:"");var j=c.toUrl(f),h=r.useXhr||b.useXhr;0===j.indexOf("empty:")?d():!k||h(j,l,p,m)?b.get(j,function(c){b.finishLoad(a,e.strip,c,d)},function(a){d.error&&d.error(a)}):c([f],function(a){b.finishLoad(e.moduleName+"."+e.ext,e.strip,a,d)})}},write:function(a,c,d){if(n.hasOwnProperty(c)){var f=b.jsEscape(n[c]);d.asModule(a+
"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,f,e){c=b.parseName(c);var j=c.ext?"."+c.ext:"",h=c.moduleName+j,k=d.toUrl(c.moduleName+j)+".js";b.load(h,d,function(){var c=function(a){return f(k,a)};c.asModule=function(a,b){return f.asModule(a,k,b)};b.write(a,h,c,e)},e)}};if("node"===r.env||!r.env&&"undefined"!==typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"])g=require.nodeRequire("fs"),b.get=function(a,b,c){try{var d=g.readFileSync(a,
"utf8");0===d.indexOf("\ufeff")&&(d=d.substring(1));b(d)}catch(f){c(f)}};else if("xhr"===r.env||!r.env&&b.createXhr())b.get=function(a,c,d,f){var e=b.createXhr(),j;e.open("GET",a,!0);if(f)for(j in f)f.hasOwnProperty(j)&&e.setRequestHeader(j.toLowerCase(),f[j]);if(r.onXhr)r.onXhr(e,a);e.onreadystatechange=function(){var b;if(4===e.readyState&&(b=e.status,399<b&&600>b?(b=Error(a+" HTTP status: "+b),b.xhr=e,d(b)):c(e.responseText),r.onXhrComplete))r.onXhrComplete(e,a)};e.send(null)};else if("rhino"===
r.env||!r.env&&"undefined"!==typeof Packages&&"undefined"!==typeof java)b.get=function(a,b){var c,d,f=new java.io.File(a),e=java.lang.System.getProperty("line.separator"),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),"utf-8")),j="";try{c=new java.lang.StringBuffer;(d=f.readLine())&&(d.length()&&65279===d.charAt(0))&&(d=d.substring(1));for(null!==d&&c.append(d);null!==(d=f.readLine());)c.append(e),c.append(d);j=String(c.toString())}finally{f.close()}b(j)};
else if("xpconnect"===r.env||!r.env&&"undefined"!==typeof Components&&Components.classes&&Components.interfaces)c=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),d="@mozilla.org/windows-registry-key;1"in c,b.get=function(a,b){var f,j,h,k={};d&&(a=a.replace(/\//g,"\\"));h=new FileUtils.File(a);try{f=c["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),f.init(h,1,0,!1),j=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),
j.init(f,"utf-8",f.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),j.readString(f.available(),k),j.close(),f.close(),b(k.value)}catch(g){throw Error((h&&h.path||"")+": "+g);}};return b});
(function(){var a=this,b=a.Backbone,g=[].slice,c;c="undefined"!==typeof exports?exports:a.Backbone={};c.VERSION="1.1.0";var e=a._;!e&&"undefined"!==typeof require&&(e=require("underscore"));c.$=a.jQuery||a.Zepto||a.ender||a.$;c.noConflict=function(){a.Backbone=b;return this};c.emulateHTTP=!1;c.emulateJSON=!1;var d=c.Events={on:function(a,b,c){if(!f(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},
once:function(a,b,c){if(!f(this,"once",a,[b,c])||!b)return this;var d=this,j=e.once(function(){d.off(a,j);b.apply(this,arguments)});j._callback=b;return this.on(a,j,c)},off:function(a,b,c){var d,j,h,k,g,l,m,n;if(!this._events||!f(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;k=a?[a]:e.keys(this._events);g=0;for(l=k.length;g<l;g++)if(a=k[g],h=this._events[a]){this._events[a]=d=[];if(b||c){m=0;for(n=h.length;m<n;m++)j=h[m],(b&&b!==j.callback&&b!==j.callback._callback||c&&
c!==j.context)&&d.push(j)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!f(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&j(c,b);d&&j(d,arguments);return this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var f=!b&&!c;!c&&"object"===typeof b&&(c=this);a&&((d={})[a._listenId]=a);for(var j in d)a=d[j],a.off(b,c,this),(f||e.isEmpty(a._events))&&delete this._listeningTo[j];
return this}},h=/\s+/,f=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(h.test(c)){c=c.split(h);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},j=function(a,b){var c,d=-1,f=a.length,e=b[0],j=b[1],h=b[2];switch(b.length){case 0:for(;++d<f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,j);break;case 3:for(;++d<
f;)(c=a[d]).callback.call(c.ctx,e,j,h);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){d[b]=function(b,c,d){var f=this._listeningTo||(this._listeningTo={}),j=b._listenId||(b._listenId=e.uniqueId("l"));f[j]=b;!d&&"object"===typeof c&&(d=this);b[a](c,d,this);return this}});d.bind=d.on;d.unbind=d.off;e.extend(c,d);var k=c.Model=function(a,b){var c=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};b.collection&&(this.collection=
b.collection);b.parse&&(c=this.parse(c,b)||{});c=e.defaults({},c,e.result(this,"defaults"));this.set(c,b);this.changed={};this.initialize.apply(this,arguments)};e.extend(k.prototype,d,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},sync:function(){return c.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,
b,c){var d,f,j,h,k,g,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;j=c.unset;h=c.silent;a=[];k=this._changing;this._changing=!0;k||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;g=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(g[d],b)?delete this.changed[d]:this.changed[d]=b,j?delete l[d]:l[d]=b;if(!h){a.length&&
(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(k)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?
e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;c&&c(b,d,a);b.trigger("sync",
b,d,a)};U(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;c=e.extend({validate:!0},c);if(d&&!c.wait){if(!this.set(d,c))return!1}else if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=!0);var j=this,h=c.success;c.success=function(a){j.attributes=f;var b=j.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!j.set(b,c))return!1;h&&h(j,a,c);j.trigger("sync",
j,a,c)};U(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){a=a?e.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(f){(a.wait||b.isNew())&&d();c&&c(b,f,a);b.isNew()||b.trigger("sync",b,f,a)};if(this.isNew())return a.success(),!1;U(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,
"urlRoot")||e.result(this.collection,"url")||P();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=e.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;if(!c)return!0;
this.trigger("invalid",this,c,e.extend(b,{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){k.prototype[a]=function(){var b=g.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var l=c.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},m={add:!0,
remove:!1};e.extend(l.prototype,d,{model:k,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return c.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.extend({merge:!1},b,m))},remove:function(a,b){var c=!e.isArray(a);a=c?[a]:e.clone(a);b||(b={});var d,f,j,h;d=0;for(f=a.length;d<f;d++)if(h=a[d]=this.get(a[d]))delete this._byId[h.id],delete this._byId[h.cid],j=this.indexOf(h),this.models.splice(j,1),this.length--,b.silent||
(b.index=j,h.trigger("remove",h,this,b)),this._removeReference(h);return c?a[0]:a},set:function(a,b){b=e.defaults({},b,p);b.parse&&(a=this.parse(a,b));var c=!e.isArray(a);a=c?a?[a]:[]:e.clone(a);var d,f,j,h,g,l,m=b.at,n=this.model,r=this.comparator&&null==m&&!1!==b.sort,s=e.isString(this.comparator)?this.comparator:null,v=[],A=[],z={},w=b.add,y=b.merge,B=b.remove,D=!r&&w&&B?[]:!1;d=0;for(f=a.length;d<f;d++){g=a[d];j=g instanceof k?h=g:g[n.prototype.idAttribute];if(j=this.get(j))B&&(z[j.cid]=!0),y&&
(g=g===h?h.attributes:g,b.parse&&(g=j.parse(g,b)),j.set(g,b),r&&(!l&&j.hasChanged(s))&&(l=!0)),a[d]=j;else if(w){h=a[d]=this._prepareModel(g,b);if(!h)continue;v.push(h);h.on("all",this._onModelEvent,this);this._byId[h.cid]=h;null!=h.id&&(this._byId[h.id]=h)}D&&D.push(j||h)}if(B){d=0;for(f=this.length;d<f;++d)z[(h=this.models[d]).cid]||A.push(h);A.length&&this.remove(A,b)}if(v.length||D&&D.length)if(r&&(l=!0),this.length+=v.length,null!=m){d=0;for(f=v.length;d<f;d++)this.models.splice(m+d,0,v[d])}else{D&&
(this.models.length=0);g=D||v;d=0;for(f=g.length;d<f;d++)this.models.push(g[d])}l&&this.sort({silent:!0});if(!b.silent){d=0;for(f=v.length;d<f;d++)(h=v[d]).trigger("add",h,this,b);(l||D&&D.length)&&this.trigger("sort",this,b)}return c?a[0]:a},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();a=this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,
e.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,e.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a.id]||this._byId[a.cid]||this._byId[a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==
b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return e.invoke(this.models,"get",a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);
var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};U(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(a,b,f){f.wait&&c.add(a,f);d&&d(a,b,f)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId=
{}},_prepareModel:function(a,b){if(a instanceof k)return a.collection||(a.collection=this),a;b=b?e.clone(b):{};b.collection=this;var c=new this.model(a,b);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,b);return!1},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],
null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){l.prototype[a]=function(){var b=g.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});e.each(["groupBy","countBy","sortBy"],
function(a){l.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var n=c.View=function(a){this.cid=e.uniqueId("view");this.options=a||(a={});e.extend(this,e.pick(a,s));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},r=/^(\S+)\s*(.*)$/,s="model collection el id attributes className tagName events".split(" ");e.extend(n.prototype,d,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof c.$?a:c.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(r),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=c.$("<"+e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});c.sync=function(a,b,d){var f=A[a];e.defaults(d||(d={}),{emulateHTTP:c.emulateHTTP,
emulateJSON:c.emulateJSON});var j={type:f,dataType:"json"};d.url||(j.url=e.result(b,"url")||P());if(null==d.data&&b&&("create"===a||"update"===a||"patch"===a))j.contentType="application/json",j.data=JSON.stringify(d.attrs||b.toJSON(d));d.emulateJSON&&(j.contentType="application/x-www-form-urlencoded",j.data=j.data?{model:j.data}:{});if(d.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){j.type="POST";d.emulateJSON&&(j.data._method=f);var h=d.beforeSend;d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
f);if(h)return h.apply(this,arguments)}}"GET"!==j.type&&!d.emulateJSON&&(j.processData=!1);"PATCH"===j.type&&v&&(j.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=d.xhr=c.ajax(e.extend(j,d));b.trigger("request",b,a,d);return a};var v="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};c.ajax=function(){return c.$.ajax.apply(c.$,arguments)};var w=
c.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,y=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(w.prototype,d,{initialize:function(){},route:function(a,b,d){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(d=b,b="");d||(d=this[b]);var f=this;c.history.route(a,function(e){e=f._extractParameters(a,e);d&&d.apply(f,e);f.trigger.apply(f,["route:"+b].concat(e));f.trigger("route",b,e);c.history.trigger("route",
f,b,e)});return this},navigate:function(a,b){c.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(B,"\\$&").replace(z,"(?:$1)?").replace(D,function(a,b){return b?a:"([^/]+)"}).replace(y,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):
null})}});var I=c.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,O=/msie [\w.]+/,V=/\/$/,N=/[?#].*$/;I.started=!1;e.extend(I.prototype,d,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(V,
"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(S,"")},start:function(a){if(I.started)throw Error("Backbone.history has already been started");I.started=!0;this.options=e.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);a=this.getFragment();var b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&
(!b||7>=b);this.root=("/"+this.root+"/").replace(J,"/");b&&this._wantsHashChange&&(this.iframe=c.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)c.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)c.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,
"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&(b&&a.hash)&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){c.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);
clearInterval(this._checkUrlInterval);I.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return e.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!I.started)return!1;
if(!b||!0===b)b={trigger:!!b};var c=this.root+(a=this.getFragment(a||""));a=a.replace(N,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);
if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});c.history=new I;k.extend=l.extend=w.extend=n.extend=I.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var P=function(){throw Error('A "url" property or function must be specified');
},U=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}}).call(this);define("backbone",["jquery","underscore","text"],function(a){return function(){return a.Backbone}}(this));
define("component",["backbone","underscore","eventBus"],function(a,b){var g=(window.fang=window.fang||{}).Component=a.View.extend({componentName:"component",linkedComponent:null,link:function(a){this.linkedComponent=a},asyncInitialize:function(){}}),c=["initialize","render","destroy","remove"],e=g.extend;g.extend=function(){var a=e.apply(g,arguments);b.each(c,function(b){var c=a.prototype[b];null!=c&&(a.prototype[b]=function(){return c.apply(this,arguments)})});return a};return g});
(function(a,b){"object"===typeof exports&&exports?module.exports=b:"function"===typeof define&&define.amd?define("mustache",b):a.Mustache=b})(this,function(){function a(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function b(a){this.tail=this.string=a;this.pos=0}function g(a,b){this.view=a;this.parent=b;this.clearCache()}function c(){this.clearCache()}function e(a){function b(a,d,f){if(!c[a]){var j=e(d);c[a]=function(a,b){return j(a,b,f)}}return c[a]}var c={};return function(c,d,f){for(var e=
"",j,h,k=0,g=a.length;k<g;++k)switch(j=a[k],j[0]){case "#":h=f.slice(j[3],j[5]);e+=c._section(j[1],d,h,b(k,j[4],f));break;case "^":e+=c._inverted(j[1],d,b(k,j[4],f));break;case ">":e+=c._partial(j[1],d);break;case "&":e+=c._name(j[1],d);break;case "name":e+=c._escaped(j[1],d);break;case "text":e+=j[1]}return e}}function d(b){return[RegExp(a(b[0])+"\\s*"),RegExp("\\s*"+a(b[1]))]}var h={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};h.Scanner=b;h.Context=g;h.Writer=c;var f=/\s*/,j=/\s+/,k=/\S/,
l=/\s*=/,p=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/,n=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return r[a]})};b.prototype.eos=function(){return""===this.tail};b.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):""};b.prototype.scanUntil=
function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};g.make=function(a){return a instanceof g?a:new g(a)};g.prototype.clearCache=function(){this._cache={}};g.prototype.push=function(a){return new g(a,this)};g.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."===a)b=this.view;else for(var c=this;c;){if(0<a.indexOf("."))for(var d=
a.split("."),f=0,b=c.view;b&&f<d.length;)b=b[d[f++]];else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}"function"===typeof b&&(b=b.call(this.view));return b};c.prototype.clearCache=function(){this._cache={};this._partialCache={}};c.prototype.compile=function(a,b){var c=this._cache[a];c||(c=h.parse(a,b),c=this._cache[a]=this.compileTokens(c,a));return c};c.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=b};c.prototype.compileTokens=function(a,b){var c=
e(a),d=this;return function(a,f){if(f)if("function"===typeof f)d._loadPartial=f;else for(var e in f)d.compilePartial(e,f[e]);return c(d,g.make(a),b)}};c.prototype.render=function(a,b,c){return this.compile(a)(b,c)};c.prototype._section=function(a,b,c,d){a=b.lookup(a);switch(typeof a){case "object":if(n(a)){c="";for(var f=0,e=a.length;f<e;++f)c+=d(this,b.push(a[f]));return c}return a?d(this,b.push(a)):"";case "function":var j=this;d=a.call(b.view,c,function(a){return j.render(a,b)});return null!=d?
d:"";default:if(a)return d(this,b)}return""};c.prototype._inverted=function(a,b,c){a=b.lookup(a);return!a||n(a)&&0===a.length?c(this,b):""};c.prototype._partial=function(a,b){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));var c=this._partialCache[a];return c?c(b):""};c.prototype._name=function(a,b){var c=b.lookup(a);"function"===typeof c&&(c=c.call(b.view));return null==c?"":String(c)};c.prototype._escaped=function(a,b){return h.escape(this._name(a,b))};
h.parse=function(c,e){c=c||"";e=e||h.tags;"string"===typeof e&&(e=e.split(j));if(2!==e.length)throw Error("Invalid tags: "+e.join(", "));for(var g=d(e),n=new b(c),r=[],s=[],B=[],I=!1,S=!1,J,O,V;!n.eos();){J=n.pos;if(V=n.scanUntil(g[0]))for(var N=0,P=V.length;N<P;++N)if(O=V.charAt(N),RegExp.prototype.test.call(k,O)?S=!0:B.push(s.length),s.push(["text",O,J,J+1]),J+=1,"\n"===O){if(I&&!S)for(;B.length;)s.splice(B.pop(),1);else B=[];S=I=!1}J=n.pos;if(!n.scan(g[0]))break;I=!0;O=n.scan(m)||"name";n.scan(f);
"="===O?(V=n.scanUntil(l),n.scan(l),n.scanUntil(g[1])):"{"===O?(V=RegExp("\\s*"+a("}"+e[1])),V=n.scanUntil(V),n.scan(p),n.scanUntil(g[1]),O="&"):V=n.scanUntil(g[1]);if(!n.scan(g[1]))throw Error("Unclosed tag at "+n.pos);if("/"===O){if(0===r.length)throw Error('Unopened section "'+V+'" at '+J);N=r.pop();if(N[1]!==V)throw Error('Unclosed section "'+N[1]+'" at '+J);}N=[O,V,J,n.pos];s.push(N);if("#"===O||"^"===O)r.push(N);else if("name"===O||"{"===O||"&"===O)S=!0;else if("="===O){e=V.split(j);if(2!==
e.length)throw Error("Invalid tags at "+J+": "+e.join(", "));g=d(e)}}if(N=r.pop())throw Error('Unclosed section "'+N[1]+'" at '+n.pos);for(var g=[],U,r=0,B=s.length;r<B;++r)n=s[r],"text"===n[0]&&U&&"text"===U[0]?(U[1]+=n[1],U[3]=n[3]):(U=n,g.push(n));U=s=[];n=[];B=0;for(I=g.length;B<I;++B)switch(r=g[B],r[0]){case "#":case "^":n.push(r);U.push(r);U=r[4]=[];break;case "/":n.pop()[5]=r[2];U=0<n.length?n[n.length-1][4]:s;break;default:U.push(r)}return s};var s=new c;h.clearCache=function(){return s.clearCache()};
h.compile=function(a,b){return s.compile(a,b)};h.compilePartial=function(a,b,c){return s.compilePartial(a,b,c)};h.compileTokens=function(a,b){return s.compileTokens(a,b)};h.render=function(a,b,c){return s.render(a,b,c)};h.to_html=function(a,b,c,d){a=h.render(a,b,c);if("function"===typeof d)d(a);else return a};return h}());
(function(a,b,g){function c(a){return function(){var b=arguments[0],c=arguments,d;d="["+(a?a+":":"")+b+"] "+arguments[1].replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<c.length?(a=c[b+2],"function"===typeof a?a.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"===typeof a?"undefined":"string"!==typeof a?ca(a):a):a});d=d+"\nhttp://errors.angularjs.org/1.2.28/"+(a?a+"/":"")+b;for(b=2;b<arguments.length;b++)d=d+(2==b?"?":"&")+"p"+(b-2)+"="+encodeURIComponent("function"===typeof arguments[b]?
arguments[b].toString().replace(/ \{[\s\S]*$/,""):"undefined"===typeof arguments[b]?"undefined":"string"!==typeof arguments[b]?JSON.stringify(arguments[b]):arguments[b]);return Error(d)}}function e(a){if(null==a||I(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:w(a)||ga(a)||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){var f;if(a)if(y(a))for(f in a)"prototype"!=f&&("length"!=f&&"name"!=f&&(!a.hasOwnProperty||a.hasOwnProperty(f)))&&b.call(c,a[f],f);else if(ga(a)||e(a))for(f=0;f<
a.length;f++)b.call(c,a[f],f);else if(a.forEach&&a.forEach!==d)a.forEach(b,c);else for(f in a)a.hasOwnProperty(f)&&b.call(c,a[f],f);return a}function h(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function f(a){return function(b,c){a(c,b)}}function j(){for(var a=ba.length,b;a;){a--;b=ba[a].charCodeAt(0);if(57==b)return ba[a]="A",ba.join("");if(90==b)ba[a]="0";else return ba[a]=String.fromCharCode(b+1),ba.join("")}ba.unshift("0");return ba.join("")}function k(a){var b=a.$$hashKey;
d(arguments,function(b){b!==a&&d(b,function(b,c){a[c]=b})});var c=a;b?c.$$hashKey=b:delete c.$$hashKey;return a}function l(a){return parseInt(a,10)}function p(a,b){return k(new (k(function(){},{prototype:a})),b)}function m(){}function n(a){return a}function r(a){return function(){return a}}function s(a){return"undefined"===typeof a}function v(a){return"undefined"!==typeof a}function A(a){return null!=a&&"object"===typeof a}function w(a){return"string"===typeof a}function z(a){return"number"===typeof a}
function D(a){return"[object Date]"===Xb.call(a)}function y(a){return"function"===typeof a}function B(a){return"[object RegExp]"===Xb.call(a)}function I(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function S(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function J(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function O(a,b){var c=J(a,b);0<=c&&a.splice(c,1);return b}function V(a,b,c,f){if(I(a)||a&&a.$evalAsync&&a.$watch)throw u("cpws",
"Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw u("cpi","Can't copy! Source and destination are identical.");c=c||[];f=f||[];if(A(a)){var e=J(c,a);if(-1!==e)return f[e];c.push(a);f.push(b)}if(ga(a))for(var j=b.length=0;j<a.length;j++)e=V(a[j],null,c,f),A(a[j])&&(c.push(a[j]),f.push(e)),b.push(e);else{j=b.$$hashKey;ga(b)?b.length=0:d(b,function(a,c){delete b[c]});for(var h in a)e=V(a[h],null,c,f),A(a[h])&&(c.push(a[h]),f.push(e)),b[h]=e;a=b;j?a.$$hashKey=
j:delete a.$$hashKey}}else if(b=a)ga(a)?b=V(a,[],c,f):D(a)?b=new Date(a.getTime()):B(a)?(b=RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex):A(a)&&(b=V(a,{},c,f));return b}function N(a,b){if(ga(a)){b=b||[];for(var c=0;c<a.length;c++)b[c]=a[c]}else if(A(a))for(c in b=b||{},a)kc.call(a,c)&&!("$"===c.charAt(0)&&"$"===c.charAt(1))&&(b[c]=a[c]);return b||a}function P(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,d;if(c==typeof b&&
"object"==c)if(ga(a)){if(!ga(b))return!1;if((c=a.length)==b.length){for(d=0;d<c;d++)if(!P(a[d],b[d]))return!1;return!0}}else{if(D(a))return!D(b)?!1:isNaN(a.getTime())&&isNaN(b.getTime())||a.getTime()===b.getTime();if(B(a)&&B(b))return a.toString()==b.toString();if(a&&a.$evalAsync&&a.$watch||b&&b.$evalAsync&&b.$watch||I(a)||I(b)||ga(b))return!1;c={};for(d in a)if(!("$"===d.charAt(0)||y(a[d]))){if(!P(a[d],b[d]))return!1;c[d]=!0}for(d in b)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b[d]!==g&&!y(b[d]))return!1;
return!0}return!1}function U(a,b){var c=2<arguments.length?Tb.call(arguments,2):[];return y(b)&&!(b instanceof RegExp)?c.length?function(){return arguments.length?b.apply(a,c.concat(Tb.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}:b}function W(a,c){var d=c;"string"===typeof a&&"$"===a.charAt(0)?d=g:I(c)?d="$WINDOW":c&&b===c?d="$DOCUMENT":c&&(c.$evalAsync&&c.$watch)&&(d="$SCOPE");return d}function ca(a,b){return"undefined"===typeof a?g:JSON.stringify(a,
W,b?"  ":null)}function R(a){return w(a)?JSON.parse(a):a}function Z(a){"function"===typeof a?a=!0:a&&0!==a.length?(a=Za(""+a),a=!("f"==a||"0"==a||"false"==a||"no"==a||"n"==a||"[]"==a)):a=!1;return a}function ea(a){a=Da(a).clone();try{a.empty()}catch(b){}var c=Da("<div>").append(a).html();try{return 3===a[0].nodeType?Za(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Za(b)})}catch(d){return Za(c)}}function la(a){try{return decodeURIComponent(a)}catch(b){}}function va(a){var b=
{},c,f;d((a||"").split("&"),function(a){a&&(c=a.replace(/\+/g,"%20").split("="),f=la(c[0]),v(f)&&(a=v(c[1])?la(c[1]):!0,kc.call(b,f)?ga(b[f])?b[f].push(a):b[f]=[b[f],a]:b[f]=a))});return b}function H(a){var b=[];d(a,function(a,c){ga(a)?d(a,function(a){b.push(F(c,!0)+(!0===a?"":"="+F(a,!0)))}):b.push(F(c,!0)+(!0===a?"":"="+F(a,!0)))});return b.length?b.join("&"):""}function M(a){return F(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function F(a,b){return encodeURIComponent(a).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function Ba(c,f){var e=function(){c=Da(c);if(c.injector()){var a=c[0]===b?"document":ea(c);throw u("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"));}f=f||[];f.unshift(["$provide",function(a){a.value("$rootElement",c)}]);f.unshift("ng");a=aa(f);a.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return a},j=/^NG_DEFER_BOOTSTRAP!/;if(a&&!j.test(a.name))return e();a.name=a.name.replace(j,"");C.resumeBootstrap=function(a){d(a,function(a){f.push(a)});e()}}function X(a,b){b=b||"_";return a.replace(Cb,function(a,c){return(c?b:"")+a.toLowerCase()})}function ta(a,b,c){if(!a)throw u("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function q(a,b,c){c&&ga(a)&&(a=a[a.length-1]);ta(y(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));
return a}function Y(a,b){if("hasOwnProperty"===a)throw u("badname","hasOwnProperty is not a valid {0} name",b);}function sa(a,b,c){if(!b)return a;b=b.split(".");for(var d,f=a,e=b.length,j=0;j<e;j++)d=b[j],a&&(a=(f=a)[d]);return!c&&y(a)?U(f,a):a}function Ca(a){var b=a[0];a=a[a.length-1];if(b===a)return Da(b);var c=[b];do{b=b.nextSibling;if(!b)break;c.push(b)}while(b!==a);return Da(c)}function Aa(a){return a.replace(Ad,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ed,"Moz$1")}function Va(a,
b,c,d){function f(a){var j=c&&a?[this.filter(a)]:[this],h=b,u,k,g,l,C,m;if(!d||null!=a)for(;j.length;){u=j.shift();k=0;for(g=u.length;k<g;k++){l=Da(u[k]);h?l.triggerHandler("$destroy"):h=!h;C=0;for(l=(m=l.children()).length;C<l;C++)j.push(jb(m[C]))}}return e.apply(this,arguments)}var e=jb.fn[a],e=e.$original||e;f.$original=e;jb.fn[a]=f}function za(a){if(a instanceof za)return a;w(a)&&(a=Ga(a));if(!(this instanceof za)){if(w(a)&&"<"!=a.charAt(0))throw Yc("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
return new za(a)}if(w(a)){var c=a;a=b;var d;if(d=Zc.exec(c))a=[a.createElement(d[1])];else{var f=a,e;a=f.createDocumentFragment();d=[];if(Oc.test(c)){f=a.appendChild(f.createElement("div"));e=(hd.exec(c)||["",""])[1].toLowerCase();e=Mb[e]||Mb._default;f.innerHTML="<div>&#160;</div>"+e[1]+c.replace(Bd,"<$1></$2>")+e[2];f.removeChild(f.firstChild);for(c=e[0];c--;)f=f.lastChild;c=0;for(e=f.childNodes.length;c<e;++c)d.push(f.childNodes[c]);f=a.firstChild;f.textContent=""}else d.push(f.createTextNode(c));
a.textContent="";a.innerHTML="";a=d}T(this,a);Da(b.createDocumentFragment()).append(this)}else T(this,a)}function cb(a){return a.cloneNode(!0)}function Na(a){db(a);var b=0;for(a=a.childNodes||[];b<a.length;b++)Na(a[b])}function tb(a,b,c,f){if(v(f))throw Yc("offargs","jqLite#off() does not support the `selector` argument");var e=Sa(a,"events");Sa(a,"handle")&&(s(b)?d(e,function(b,c){yb(a,c,b);delete e[c]}):d(b.split(" "),function(b){s(c)?(yb(a,b,e[b]),delete e[b]):O(e[b]||[],c)}))}function db(a,b){var c=
a.ng339,d=mc[c];d&&(b?delete mc[c].data[b]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),tb(a)),delete mc[c],a.ng339=g))}function Sa(a,b,c){var d=a.ng339,d=mc[d||-1];if(v(c))d||(a.ng339=d=++Fc,d=mc[d]={}),d[b]=c;else return d&&d[b]}function Ha(a,b,c){var d=Sa(a,"data"),f=v(c),e=!f&&v(b),j=e&&!A(b);!d&&!j&&Sa(a,"data",d={});if(f)d[b]=c;else if(e){if(j)return d&&d[b];k(d,b)}else return d}function ka(a,b){return!a.getAttribute?!1:-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").indexOf(" "+b+" ")}function na(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",Ga((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Ga(b)+" "," ")))})}function oa(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=Ga(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});a.setAttribute("class",Ga(c))}}function T(a,b){if(b){b=!b.nodeName&&v(b.length)&&!I(b)?b:[b];for(var c=0;c<b.length;c++)a.push(b[c])}}
function ia(a,b){return qa(a,"$"+(b||"ngController")+"Controller")}function qa(a,b,c){9==a.nodeType&&(a=a.documentElement);for(b=ga(b)?b:[b];a;){for(var d=0,f=b.length;d<f;d++)if((c=Da.data(a,b[d]))!==g)return c;a=a.parentNode||11===a.nodeType&&a.host}}function ja(a){for(var b=0,c=a.childNodes;b<c.length;b++)Na(c[b]);for(;a.firstChild;)a.removeChild(a.firstChild)}function Ka(a,b){var c=Pc[b.toLowerCase()];return c&&Qc[a.nodeName]&&c}function ra(a,b){var c=typeof a,d;"function"==c||"object"==c&&null!==
a?"function"==typeof(d=a.$$hashKey)?d=a.$$hashKey():d===g&&(d=a.$$hashKey=(b||j)()):d=a;return c+":"+d}function Fa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}d(a,this.put,this)}function ma(a){var b,c;if("function"===typeof a){if(!(b=a.$inject))b=[],a.length&&(c=a.toString().replace(ad,""),c=c.match(Cd),d(c[1].split(Gb),function(a){a.replace(id,function(a,c,d){b.push(d)})})),a.$inject=b}else ga(a)?(c=a.length-1,q(a[c],"fn"),b=a.slice(0,c)):q(a,"fn",!0);return b}function aa(a){function b(a){return function(b,
c){if(A(b))d(b,f(a));else return a(b,c)}}function c(a,b){Y(a,"service");if(y(b)||ga(b))b=n.instantiate(b);if(!b.$get)throw dc("pget","Provider '{0}' must define $get factory method.",a);return C[a+k]=b}function e(a,b){return c(a,{$get:b})}function j(a){var b=[],c,f,e,h;d(a,function(a){if(!l.get(a)){l.put(a,!0);try{if(w(a)){c=fa(a);b=b.concat(j(c.requires)).concat(c._runBlocks);f=c._invokeQueue;e=0;for(h=f.length;e<h;e++){var d=f[e],u=n.get(d[0]);u[d[1]].apply(u,d[2])}}else y(a)?b.push(n.invoke(a)):
ga(a)?b.push(n.invoke(a)):q(a,"module")}catch(k){throw ga(a)&&(a=a[a.length-1]),k.message&&(k.stack&&-1==k.stack.indexOf(k.message))&&(k=k.message+"\n"+k.stack),dc("modulerr","Failed to instantiate module {0} due to:\n{1}",a,k.stack||k.message||k);}}});return b}function h(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===u)throw dc("cdep","Circular dependency found: {0}",d+" <- "+g.join(" <- "));return a[d]}try{return g.unshift(d),a[d]=u,a[d]=b(d)}catch(f){throw a[d]===u&&delete a[d],f;}finally{g.shift()}}
function d(a,b,f){var e=[],j=ma(a),h,u,k;u=0;for(h=j.length;u<h;u++){k=j[u];if("string"!==typeof k)throw dc("itkn","Incorrect injection token! Expected service name as string, got {0}",k);e.push(f&&f.hasOwnProperty(k)?f[k]:c(k))}ga(a)&&(a=a[h]);return a.apply(b,e)}return{invoke:d,instantiate:function(a,b){var c=function(){},f;c.prototype=(ga(a)?a[a.length-1]:a).prototype;c=new c;f=d(a,c,b);return A(f)||y(f)?f:c},get:c,annotate:ma,has:function(b){return C.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}
var u={},k="Provider",g=[],l=new Fa([],!0),C={$provide:{provider:b(c),factory:b(e),service:b(function(a,b){return e(a,["$injector",function(a){return a.instantiate(b)}])}),value:b(function(a,b){return e(a,r(b))}),constant:b(function(a,b){Y(a,"constant");C[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=da.invoke(d,c);return da.invoke(b,null,{$delegate:a})}}}},n=C.$injector=h(C,function(){throw dc("unpr","Unknown provider: {0}",g.join(" <- "));}),p={},da=p.$injector=
h(p,function(a){a=n.get(a+k);return da.invoke(a.$get,a)});d(j(a),function(a){da.invoke(a||m)});return da}function L(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,c,f){function e(){var a=c.hash(),f;if(a)if(f=j.getElementById(a))f.scrollIntoView();else{var h=j.getElementsByName(a),u=null;d(h,function(a){!u&&"a"===Za(a.nodeName)&&(u=a)});(f=u)?f.scrollIntoView():"top"===a&&b.scrollTo(0,0)}else b.scrollTo(0,0)}var j=b.document;a&&f.$watch(function(){return c.hash()},
function(){f.$evalAsync(e)});return e}]}function wa(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function E(a,b,c,f){function e(a){try{a.apply(null,Tb.call(arguments,1))}finally{if(fa--,0===fa)for(;r.length;)try{r.pop()()}catch(b){c.error(b)}}}function j(){v!=h.url()&&(v=h.url(),d(z,function(a){a(h.url())}))}var h=this,u=b[0],k=a.location,l=a.history,C=a.setTimeout,n=a.clearTimeout,p={};h.isMock=!1;var fa=0,r=[];h.$$completeOutstandingRequest=
e;h.$$incOutstandingRequestCount=function(){fa++};h.notifyWhenNoOutstandingRequests=function(a){d(da,function(a){a()});0===fa?a():r.push(a)};var da=[],ba;h.addPollFn=function(a){s(ba)&&function we(){d(da,function(a){a()});ba=C(we,100)}();da.push(a);return a};var v=k.href,ga=b.find("base"),A=null;h.url=function(b,c){k!==a.location&&(k=a.location);l!==a.history&&(l=a.history);if(b){if(v!=b){var d=v&&Lb(v)===Lb(b);v=b;!d&&f.history?c?l.replaceState(null,"",b):(l.pushState(null,"",b),ga.attr("href",ga.attr("href"))):
(d||(A=b),c?k.replace(b):k.href=b);return h}}else return A||k.href.replace(/%27/g,"'")};var z=[],y=!1;h.onUrlChange=function(b){if(!y){if(f.history)Da(a).on("popstate",j);if(f.hashchange)Da(a).on("hashchange",j);else h.addPollFn(j);y=!0}z.push(b);return b};h.$$checkUrlChange=j;h.baseHref=function(){var a=ga.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var t={},B="",q=h.baseHref();h.cookies=function(a,b){var d,f,e,j;if(a)b===g?u.cookie=escape(a)+"=;path="+q+";expires=Thu, 01 Jan 1970 00:00:00 GMT":
w(b)&&(d=(u.cookie=escape(a)+"="+escape(b)+";path="+q).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(u.cookie!==B){B=u.cookie;d=B.split("; ");t={};for(e=0;e<d.length;e++)f=d[e],j=f.indexOf("="),0<j&&(a=unescape(f.substring(0,j)),t[a]===g&&(t[a]=unescape(f.substring(j+1))))}return t}};h.defer=function(a,b){var c;fa++;c=C(function(){delete p[c];e(a)},b||0);p[c]=!0;return c};h.defer.cancel=function(a){return p[a]?(delete p[a],
n(a),e(m),!0):!1}}function Ea(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new E(a,d,b,c)}]}function Ma(){this.$get=function(){function a(d,f){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,j(a.n,a.p),j(a,m),m=a,m.n=null)}function j(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(d in b)throw c("$cacheFactory")("iid","CacheId '{0}' is already taken!",d);var h=0,u=k({},f,{id:d}),g={},l=f&&f.capacity||Number.MAX_VALUE,C={},m=null,n=null;return b[d]={put:function(a,b){if(l<Number.MAX_VALUE){var c=
C[a]||(C[a]={key:a});e(c)}if(!s(b))return a in g||h++,g[a]=b,h>l&&this.remove(n.key),b},get:function(a){if(l<Number.MAX_VALUE){var b=C[a];if(!b)return;e(b)}return g[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=C[a];if(!b)return;b==m&&(m=b.p);b==n&&(n=b.n);j(b.n,b.p);delete C[a]}delete g[a];h--},removeAll:function(){g={};h=0;C={};m=n=null},destroy:function(){C=u=g=null;delete b[d]},info:function(){return k({},u,{size:h})}}}var b={};a.info=function(){var a={};d(b,function(b,c){a[c]=b.info()});
return a};a.get=function(a){return b[a]};return a}}function ya(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function pa(a,c){var e={},j="Directive",h=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,u=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,l=/^(on[a-z]+|formaction)$/;this.directive=function ve(b,c){Y(b,"directive");w(b)?(ta(c,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+j,["$injector","$exceptionHandler",function(a,c){var f=[];d(e[b],function(d,e){try{var j=a.invoke(d);y(j)?
j={compile:r(j)}:!j.compile&&j.link&&(j.compile=r(j.link));j.priority=j.priority||0;j.index=e;j.name=j.name||b;j.require=j.require||j.controller&&j.name;j.restrict=j.restrict||"A";f.push(j)}catch(h){c(h)}});return f}])),e[b].push(c)):d(b,f(ve));return this};this.aHrefSanitizationWhitelist=function(a){return v(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};
this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,c,f,C,m,fa,r,s,ba,v,z,t){function B(a,b,c,f,e){a instanceof Da||(a=Da(a));d(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=Da(b).wrap("<span></span>").parent()[0])});var j=D(a,b,a,c,f,e);q(a,"ng-scope");return function(b,c,f,e){ta(b,"scope");var h=c?vc.clone.call(a):a;d(f,function(a,b){h.data("$"+b+"Controller",
a)});f=0;for(var u=h.length;f<u;f++){var k=h[f].nodeType;(1===k||9===k)&&h.eq(f).data("$scope",b)}c&&c(h,b);j&&j(b,h,h,e);return h}}function q(a,b){try{a.addClass(b)}catch(c){}}function D(a,b,c,d,f,e){function j(a,c,d,f){var e,u,k,l,C,m,n;e=c.length;var p=Array(e);for(l=0;l<e;l++)p[l]=c[l];m=l=0;for(C=h.length;l<C;m++)u=p[m],c=h[l++],e=h[l++],c?(c.scope?(k=a.$new(),Da.data(u,"$scope",k)):k=a,n=c.transcludeOnThisElement?Pa(a,c.transclude,f):!c.templateOnThisElement&&f?f:!f&&b?Pa(a,b):null,c(e,k,u,
d,n)):e&&e(a,u.childNodes,g,f)}for(var h=[],u,k,l,C,m=0;m<a.length;m++)u=new Fc,k=Zb(a[m],[],u,0===m?d:g,f),(e=k.length?J(k,a[m],u,b,c,null,[],[],e):null)&&e.scope&&q(u.$$element,"ng-scope"),u=e&&e.terminal||!(l=a[m].childNodes)||!l.length?null:D(l,e?(e.transcludeOnThisElement||!e.templateOnThisElement)&&e.transclude:b),h.push(e,u),C=C||e||u,e=null;return C?j:null}function Pa(a,b,c){return function(d,f,e){var j=!1;d||(d=a.$new(),j=d.$$transcluded=!0);f=b(d,f,e,c);if(j)f.on("$destroy",function(){d.$destroy()});
return f}}function Zb(a,b,d,f,e){var j=d.$attr,k;switch(a.nodeType){case 1:I(b,Q(da(a).toLowerCase()),"E",f,e);for(var g,l,C,m=a.attributes,n=0,p=m&&m.length;n<p;n++){var fa=!1,r=!1;g=m[n];if(!Oa||8<=Oa||g.specified){k=g.name;l=Ga(g.value);g=Q(k);if(C=yb.test(g))k=X(g.substr(6),"-");var s=g.replace(/(Start|End)$/,"");g===s+"Start"&&(fa=k,r=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));g=Q(k.toLowerCase());j[g]=k;if(C||!d.hasOwnProperty(g))d[g]=l,Ka(a,g)&&(d[g]=!0);L(a,b,l,g);I(b,g,"A",f,
e,fa,r)}}a=a.className;if(w(a)&&""!==a)for(;k=u.exec(a);)g=Q(k[2]),I(b,g,"C",f,e)&&(d[g]=Ga(k[3])),a=a.substr(k.index+k[0].length);break;case 3:var ba=c(a.nodeValue,!0);ba&&b.push({priority:0,compile:function(a){var b=a.parent().length;b&&q(a.parent(),"ng-binding");return function(a,c){var d=c.parent(),f=d.data("$binding")||[];f.push(ba);d.data("$binding",f);b||q(d,"ng-binding");a.$watch(ba,function(a){c[0].nodeValue=a})}}});break;case 8:try{if(k=h.exec(a.nodeValue))g=Q(k[1]),I(b,g,"M",f,e)&&(d[g]=
Ga(k[2]))}catch(v){}}b.sort(M);return b}function Cb(a,b,c){var d=[],f=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw wb("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&f++,a.hasAttribute(c)&&f--);d.push(a);a=a.nextSibling}while(0<f)}else d.push(a);return Da(d)}function V(a,b,c){return function(d,f,e,j,h){f=Cb(f[0],b,c);return a(d,f,e,j,h)}}function J(a,e,j,h,u,k,l,C,m){function n(a,b,c,d){if(a){c&&(a=V(a,c,d));a.require=
M.require;a.directiveName=nc;if(z===M||M.$$isolateScope)a=Z(a,{isolateScope:!0});l.push(a)}if(b){c&&(b=V(b,c,d));b.require=M.require;b.directiveName=nc;if(z===M||M.$$isolateScope)b=Z(b,{isolateScope:!0});C.push(b)}}function p(a,b,c,f){var e,j="data",h=!1;if(w(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(j="inheritedData"),h=h||"?"==e;e=null;f&&"data"===j&&(e=f[b]);e=e||c[j]("$"+b+"Controller");if(!e&&!h)throw wb("ctreq","Controller '{0}', required by directive '{1}', can't be found!",
b,a);}else ga(b)&&(e=[],d(b,function(b){e.push(p(a,b,c,f))}));return e}function da(a,b,h,u,k){function m(a,b){var c;2>arguments.length&&(b=a,a=g);rd&&(c=y);return k(a,b,c)}var n,s,ba,ga,A,w,y={},B;n=e===h?j:N(j,new Fc(Da(h),j.$attr));s=n.$$element;if(z){var Ga=/^\s*([@=&])(\??)\s*(\w*)\s*$/;w=b.$new(!0);t&&(t===z||t===z.$$originalDirective)?s.data("$isolateScope",w):s.data("$isolateScopeNoTemplate",w);q(s,"ng-isolate-scope");d(z.scope,function(a,d){var f=a.match(Ga)||[],e=f[3]||d,j="?"==f[2],f=f[1],
h,u,k,g;w.$$isolateBindings[d]=f+e;switch(f){case "@":n.$observe(e,function(a){w[d]=a});n.$$observers[e].$$scope=b;n[e]&&(w[d]=c(n[e])(b));break;case "=":if(j&&!n[e])break;u=fa(n[e]);g=u.literal?P:function(a,b){return a===b||a!==a&&b!==b};k=u.assign||function(){h=w[d]=u(b);throw wb("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",n[e],z.name);};h=w[d]=u(b);w.$watch(function(){var a=u(b);g(a,w[d])||(g(a,h)?k(b,a=w[d]):w[d]=a);return h=a},null,u.literal);break;case "&":u=
fa(n[e]);w[d]=function(a){return u(b,a)};break;default:throw wb("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",z.name,d,a);}})}B=k&&m;v&&d(v,function(a){var c={$scope:a===z||a.$$isolateScope?w:b,$element:s,$attrs:n,$transclude:B},d;A=a.controller;"@"==A&&(A=n[a.name]);d=r(A,c);y[a.name]=d;rd||s.data("$"+a.name+"Controller",d);a.controllerAs&&(c.$scope[a.controllerAs]=d)});u=0;for(ba=l.length;u<ba;u++)try{ga=l[u],ga(ga.isolateScope?w:b,s,n,ga.require&&
p(ga.directiveName,ga.require,s,y),B)}catch(D){f(D,ea(s))}u=b;if(z&&(z.template||null===z.templateUrl))u=w;a&&a(u,h.childNodes,g,k);for(u=C.length-1;0<=u;u--)try{ga=C[u],ga(ga.isolateScope?w:b,s,n,ga.require&&p(ga.directiveName,ga.require,s,y),B)}catch(Pa){f(Pa,ea(s))}}m=m||{};for(var s=-Number.MAX_VALUE,ba,v=m.controllerDirectives,z=m.newIsolateScopeDirective,t=m.templateDirective,D=m.nonTlbTranscludeDirective,Pa=!1,Nd=!1,rd=m.hasElementTranscludeDirective,I=j.$$element=Da(e),M,nc,L,Jc=h,E,ub=0,
yb=a.length;ub<yb;ub++){M=a[ub];var H=M.$$start,$a=M.$$end;H&&(I=Cb(e,H,$a));L=g;if(s>M.priority)break;if(L=M.scope)ba=ba||M,M.templateUrl||(S("new/isolated scope",z,M,I),A(L)&&(z=M));nc=M.name;!M.templateUrl&&M.controller&&(L=M.controller,v=v||{},S("'"+nc+"' controller",v[nc],M,I),v[nc]=M);if(L=M.transclude)Pa=!0,M.$$tlb||(S("transclusion",D,M,I),D=M),"element"==L?(rd=!0,s=M.priority,L=I,I=j.$$element=Da(b.createComment(" "+nc+": "+j[nc]+" ")),e=I[0],qd(u,Tb.call(L,0),e),Jc=B(L,h,s,k&&k.name,{nonTlbTranscludeDirective:D})):
(L=Da(cb(e)).contents(),I.empty(),Jc=B(L,h));if(M.template)if(Nd=!0,S("template",t,M,I),t=M,L=y(M.template)?M.template(I,j):M.template,L=O(L),M.replace){k=M;L=!Oc.test(L)?[]:Da(Ga(L));e=L[0];if(1!=L.length||1!==e.nodeType)throw wb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",nc,"");qd(u,I,e);yb={$attr:{}};L=Zb(e,[],yb);var wa=a.splice(ub+1,a.length-(ub+1));z&&F(L);a=a.concat(L).concat(wa);lc(j,yb);yb=a.length}else I.html(L);if(M.templateUrl)Nd=!0,S("template",t,M,
I),t=M,M.replace&&(k=M),da=mc(a.splice(ub,a.length-ub),I,j,u,Pa&&Jc,l,C,{controllerDirectives:v,newIsolateScopeDirective:z,templateDirective:t,nonTlbTranscludeDirective:D}),yb=a.length;else if(M.compile)try{E=M.compile(I,j,Jc),y(E)?n(null,E,H,$a):E&&n(E.pre,E.post,H,$a)}catch(ue){f(ue,ea(I))}M.terminal&&(da.terminal=!0,s=Math.max(s,M.priority))}da.scope=ba&&!0===ba.scope;da.transcludeOnThisElement=Pa;da.templateOnThisElement=Nd;da.transclude=Jc;m.hasElementTranscludeDirective=rd;return da}function F(a){for(var b=
0,c=a.length;b<c;b++)a[b]=p(a[b],{$$isolateScope:!0})}function I(b,c,d,h,u,k,l){if(c===u)return null;u=null;if(e.hasOwnProperty(c)){var C;c=a.get(c+j);for(var m=0,n=c.length;m<n;m++)try{if(C=c[m],(h===g||h>C.priority)&&-1!=C.restrict.indexOf(d))k&&(C=p(C,{$$start:k,$$end:l})),b.push(C),u=C}catch(fa){f(fa)}}return u}function lc(a,b){var c=b.$attr,f=a.$attr,e=a.$$element;d(a,function(d,f){"$"!=f.charAt(0)&&(b[f]&&b[f]!==d&&(d+=("style"===f?";":" ")+b[f]),a.$set(f,d,!0,c[f]))});d(b,function(b,d){"class"==
d?(q(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==d?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"!=d.charAt(0)&&!a.hasOwnProperty(d)&&(a[d]=b,f[d]=c[d])})}function mc(a,b,c,f,e,j,h,u){var g=[],l,n,p=b[0],fa=a.shift(),r=k({},fa,{templateUrl:null,transclude:null,replace:null,$$originalDirective:fa}),da=y(fa.templateUrl)?fa.templateUrl(b,c):fa.templateUrl;b.empty();C.get(v.getTrustedResourceUrl(da),{cache:m}).success(function(k){var C,m;k=O(k);if(fa.replace){k=
!Oc.test(k)?[]:Da(Ga(k));C=k[0];if(1!=k.length||1!==C.nodeType)throw wb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",fa.name,da);k={$attr:{}};qd(f,b,C);var s=Zb(C,[],k);A(fa.scope)&&F(s);a=s.concat(a);lc(c,k)}else C=p,b.html(k);a.unshift(r);l=J(a,C,c,e,b,fa,j,h,u);d(f,function(a,c){a==C&&(f[c]=b[0])});for(n=D(b[0].childNodes,e);g.length;){k=g.shift();m=g.shift();var ba=g.shift(),v=g.shift(),s=b[0];if(m!==p){var ga=m.className;if(!u.hasElementTranscludeDirective||
!fa.replace)s=cb(C);qd(ba,Da(m),s);q(Da(s),ga)}m=l.transcludeOnThisElement?Pa(k,l.transclude,v):v;l(n,k,s,f,m)}g=null}).error(function(a,b,c,d){throw wb("tpload","Failed to load template: {0}",d.url);});return function(a,b,c,d,f){a=f;g?(g.push(b),g.push(c),g.push(d),g.push(a)):(l.transcludeOnThisElement&&(a=Pa(b,l.transclude,f)),l(n,b,c,d,a))}}function M(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function S(a,b,c,d){if(b)throw wb("multidir",
"Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,ea(d));}function L(a,b,d,f){var e=c(d,!0);if(e){if("multiple"===f&&"SELECT"===da(a))throw wb("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ea(a));b.push({priority:100,compile:function(){return{pre:function(b,d,j){d=j.$$observers||(j.$$observers={});if(l.test(f))throw wb("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");
var h=c,u=j[f],k;"srcdoc"==f?k=v.HTML:(k=da(a),k="xlinkHref"==f||"FORM"==k&&"action"==f||"IMG"!=k&&("src"==f||"ngSrc"==f)?v.RESOURCE_URL:void 0);if(e=h(u,!0,k))j[f]=e(b),(d[f]||(d[f]=[])).$$inter=!0,(j.$$observers&&j.$$observers[f].$$scope||b).$watch(e,function(a,b){"class"===f&&a!=b?j.$updateClass(a,b):j.$set(f,a)})}}}})}}function qd(a,c,d){var f=c[0],e=c.length,j=f.parentNode,h,u;if(a){h=0;for(u=a.length;h<u;h++)if(a[h]==f){a[h++]=d;u=h+e-1;for(var k=a.length;h<k;h++,u++)u<k?a[h]=a[u]:delete a[h];
a.length-=e-1;break}}j&&j.replaceChild(d,f);a=b.createDocumentFragment();a.appendChild(f);d[Da.expando]=f[Da.expando];f=1;for(e=c.length;f<e;f++)j=c[f],Da(j).remove(),a.appendChild(j),delete c[f];c[0]=d;c.length=1}function Z(a,b){return k(function(){return a.apply(null,arguments)},a,b)}var Fc=function(a,b){this.$$element=a;this.$attr=b||{}};Fc.prototype={$normalize:Q,$addClass:function(a){a&&0<a.length&&z.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&z.removeClass(this.$$element,
a)},$updateClass:function(a,b){var c=Db(a,b),d=Db(b,a);0===c.length?z.removeClass(this.$$element,d):0===d.length?z.addClass(this.$$element,c):z.setClass(this.$$element,c,d)},$set:function(a,b,c,e){var j=Ka(this.$$element[0],a);j&&(this.$$element.prop(a,b),e=j);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=X(a,"-"));j=da(this.$$element);if("A"===j&&"href"===a||"IMG"===j&&"src"===a)this[a]=b=t(b,"src"===a);!1!==c&&(null===b||b===g?this.$$element.removeAttr(e):this.$$element.attr(e,
b));(c=this.$$observers)&&d(c[a],function(a){try{a(b)}catch(c){f(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),f=d[a]||(d[a]=[]);f.push(b);s.$evalAsync(function(){f.$$inter||b(c[a])});return b}};var E=c.startSymbol(),ub=c.endSymbol(),O="{{"==E||"}}"==ub?n:function(a){return a.replace(/\{\{/g,E).replace(/}}/g,ub)},yb=/^ngAttr[A-Z]/;return B}]}function Q(a){return Aa(a.replace(oc,""))}function Db(a,b){var c="",d=a.split(/\s+/),f=b.split(/\s+/),e=0;a:for(;e<d.length;e++){for(var j=
d[e],h=0;h<f.length;h++)if(j==f[h])continue a;c+=(0<c.length?" ":"")+j}return c}function ha(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){Y(b,"controller");A(b)?k(a,b):a[b]=c};this.$get=["$injector","$window",function(d,f){return function(e,j){var h,u,k;w(e)&&(h=e.match(b),u=h[1],k=h[3],e=a.hasOwnProperty(u)?a[u]:sa(j.$scope,u,!0)||sa(f,u,!0),q(e,u,!0));h=d.instantiate(e,j);if(k){if(!(j&&"object"===typeof j.$scope))throw c("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",
u||e.name,k);j.$scope[k]=h}return h}}]}function kb(){this.$get=["$window",function(a){return Da(a.document)}]}function qb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function G(a){var b={},c,f,e;if(!a)return b;d(a.split("\n"),function(a){e=a.indexOf(":");c=Za(Ga(a.substr(0,e)));f=Ga(a.substr(e+1));c&&(b[c]=b[c]?b[c]+", "+f:f)});return b}function t(a){var b=A(a)?a:g;return function(c){b||(b=G(a));return c?b[Za(c)]||null:b}}function rb(a,b,c){if(y(c))return c(a,
b);d(c,function(c){a=c(a,b)});return a}function eb(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,f={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){w(d)&&(d=d.replace(c,""),a.test(d)&&b.test(d)&&(d=R(d)));return d}],transformRequest:[function(a){return A(a)&&"[object File]"!==Xb.call(a)&&"[object Blob]"!==Xb.call(a)?ca(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:N(f),put:N(f),patch:N(f)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},j=this.interceptors=[],u=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,f,l,C){function m(c){function j(a){var b=k({},a,{data:rb(a.data,a.headers,u.transformResponse)});return 200<=a.status&&300>a.status?b:l.reject(b)}var u={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},C,fa=e.headers,r=k({},c.headers),da,ba,z,fa=k({},fa.common,fa[Za(c.method)]);
a:for(da in fa){ba=Za(da);for(z in r)if(Za(z)===ba)continue a;r[da]=fa[da]}var w;d(r,function(a,b){y(a)&&(w=a(),null!=w?r[b]=w:delete r[b])});C=r;k(u,c);u.headers=C;u.method=Wb(u.method);var B=[function(c){C=c.headers;var u=rb(c.data,t(C),c.transformRequest);s(u)&&d(C,function(a,b){"content-type"===Za(b)&&delete C[b]});s(c.withCredentials)&&!s(e.withCredentials)&&(c.withCredentials=e.withCredentials);a:{var k=C,p=function(a,b,c,d){z&&(200<=a&&300>a?z.put(q,[a,b,G(c),d]):z.remove(q));fa(b,a,c,d);f.$$phase||
f.$apply()},fa=function(a,b,d,f){b=Math.max(b,0);(200<=b&&300>b?da.resolve:da.reject)({data:a,status:b,headers:t(d),config:c,statusText:f})},r=function(){var a=J(m.pendingRequests,c);-1!==a&&m.pendingRequests.splice(a,1)},da=l.defer(),ba=da.promise,z,w,q;var B=c.url,Ga=c.params;if(Ga){for(var Pa=[],Zb=function(a,b){null===a||s(a)||(ga(a)||(a=[a]),d(a,function(a){A(a)&&(a=D(a)?a.toISOString():ca(a));Pa.push(F(b)+"="+F(a))}))},Cb=h(Ga),V=0;V<Cb.length;V++)Zb.call(void 0,Ga[Cb[V]],Cb[V]);0<Pa.length&&
(B+=(-1==B.indexOf("?")?"?":"&")+Pa.join("&"))}q=B;m.pendingRequests.push(c);ba.then(r,r);if((c.cache||e.cache)&&!1!==c.cache&&("GET"===c.method||"JSONP"===c.method))z=A(c.cache)?c.cache:A(e.cache)?e.cache:n;if(z)if(w=z.get(q),v(w))if(w&&y(w.then)){w.then(r,r);u=w;break a}else ga(w)?fa(w[1],w[0],N(w[2]),w[3]):fa(w,200,{},"OK");else z.put(q,ba);s(w)&&((r=jc(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:g)&&(k[c.xsrfHeaderName||e.xsrfHeaderName]=r),a(c.method,q,u,p,k,c.timeout,c.withCredentials,
c.responseType));u=ba}return u.then(j,j)},g],q=l.when(u);for(d(p,function(a){(a.request||a.requestError)&&B.unshift(a.request,a.requestError);(a.response||a.responseError)&&B.push(a.response,a.responseError)});B.length;)c=B.shift(),fa=B.shift(),q=q.then(c,fa);q.success=function(a){q.then(function(b){a(b.data,b.status,b.headers,u)});return q};q.error=function(a){q.then(null,function(b){a(b.data,b.status,b.headers,u)});return q};return q}var n=c("$http"),p=[];d(j,function(a){p.unshift(w(a)?C.get(a):
C.invoke(a))});d(u,function(a,b){var c=w(a)?C.get(a):C.invoke(a);p.splice(b,0,{response:function(a){return c(l.when(a))},responseError:function(a){return c(l.reject(a))}})});m.pendingRequests=[];(function(a){d(arguments,function(a){m[a]=function(b,c){return m(k(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){d(arguments,function(a){m[a]=function(b,c,d){return m(k(d||{},{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=e;return m}]}function $a(b){if(8>=Oa&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw c("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.");}function ac(){this.$get=["$browser","$window","$document",function(a,b,c){var f=a,e=$a,j=a.defer,h=b.angular.callbacks,u=c[0],k=-1;return function(a,b,c,g,l,C,n,p){function fa(){da=k;ba&&ba();q&&q.abort()}function r(a,c,d,e,h){t&&j.cancel(t);ba=q=null;0===c&&(c=d?200:"file"==Ja(b).protocol?404:0);a(1223===
c?204:c,d,e,h||"");f.$$completeOutstandingRequest(m)}var da;f.$$incOutstandingRequestCount();b=b||f.url();if("jsonp"==Za(a)){var s="_"+(h.counter++).toString(36);h[s]=function(a){h[s].data=a;h[s].called=!0};var ba;a=b.replace("JSON_CALLBACK","angular.callbacks."+s);var ga=function(a,b){r(g,a,h[s].data,"",b);h[s]=m},A=u.createElement("script"),z=null;A.type="text/javascript";A.src=a;A.async=!0;z=function(a){yb(A,"load",z);yb(A,"error",z);u.body.removeChild(A);A=null;var b=-1,c="unknown";a&&("load"===
a.type&&!h[s].called&&(a={type:"error"}),c=a.type,b="error"===a.type?404:200);ga&&ga(b,c)};ub(A,"load",z);ub(A,"error",z);8>=Oa&&(A.onreadystatechange=function(){w(A.readyState)&&/loaded|complete/.test(A.readyState)&&(A.onreadystatechange=null,z({type:"load"}))});u.body.appendChild(A);ba=z}else{var q=e(a);q.open(a,b,!0);d(l,function(a,b){v(a)&&q.setRequestHeader(b,a)});q.onreadystatechange=function(){if(q&&4==q.readyState){var a=null,b=null,c="";da!==k&&(a=q.getAllResponseHeaders(),b="response"in
q?q.response:q.responseText);da===k&&10>Oa||(c=q.statusText);r(g,da||q.status,b,a,c)}};n&&(q.withCredentials=!0);if(p)try{q.responseType=p}catch(B){if("json"!==p)throw B;}q.send(c||null)}if(0<C)var t=j(fa,C);else C&&y(C.then)&&C.then(fa)}}]}function lb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,f){function e(u,k,g){for(var l,C,m=0,n=[],p=u.length,fa=!1,r=[];m<
p;)-1!=(l=u.indexOf(a,m))&&-1!=(C=u.indexOf(b,l+j))?(m!=l&&n.push(u.substring(m,l)),n.push(m=c(fa=u.substring(l+j,C))),m.exp=fa,m=C+h,fa=!0):(m!=p&&n.push(u.substring(m)),m=p);if(!(p=n.length))n.push(""),p=1;if(g&&1<n.length)throw Rc("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",u);if(!k||fa)return r.length=p,m=function(a){try{for(var b=
0,c=p,e;b<c;b++){if("function"==typeof(e=n[b]))if(e=e(a),e=g?f.getTrusted(g,e):f.valueOf(e),null==e)e="";else switch(typeof e){case "string":break;case "number":e=""+e;break;default:e=ca(e)}r[b]=e}return r.join("")}catch(j){a=Rc("interr","Can't interpolate: {0}\n{1}",u,j.toString()),d(a)}},m.exp=u,m.parts=n,m}var j=a.length,h=b.length;e.startSymbol=function(){return a};e.endSymbol=function(){return b};return e}]}function zb(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(e,j,h,
u){var k=b.setInterval,g=b.clearInterval,l=c.defer(),C=l.promise,m=0,n=v(u)&&!u;h=v(h)?h:0;C.then(null,null,e);C.$$intervalId=k(function(){l.notify(m++);0<h&&m>=h&&(l.resolve(m),g(C.$$intervalId),delete f[C.$$intervalId]);n||a.$apply()},j);f[C.$$intervalId]=l;return C}var f={};d.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1};return d}]}function ic(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",
GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function qc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=M(a[b]);return a.join("/")}function Bc(a,b,c){a=Ja(a,c);b.$$protocol=a.protocol;b.$$host=a.hostname;b.$$port=l(a.port)||Ed[a.protocol]||null}
function rc(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);a=Ja(a,c);b.$$path=decodeURIComponent(d&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname);b.$$search=va(a.search);b.$$hash=decodeURIComponent(a.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Eb(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Lb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function La(a){return a.substr(0,Lb(a).lastIndexOf("/")+1)}function xa(a,b){this.$$html5=!0;b=b||
"";var c=La(a);Bc(a,this,a);this.$$parse=function(b){var d=Eb(c,b);if(!w(d))throw bd("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,c);rc(d,this,a);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=H(this.$$search),b=this.$$hash?"#"+M(this.$$hash):"";this.$$url=qc(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$parseLinkUrl=function(d){var f,e;(f=Eb(a,d))!==g?(d=f,e=(f=Eb(b,f))!==g?c+(Eb("/",f)||f):a+d):(f=Eb(c,d))!==g?e=c+f:c==
d+"/"&&(e=c);e&&this.$$parse(e);return!!e}}function Ta(a,b){var c=La(a);Bc(a,this,a);this.$$parse=function(d){var f=Eb(a,d)||Eb(c,d),f="#"==f.charAt(0)?Eb(b,f):this.$$html5?f:"";if(!w(f))throw bd("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);rc(f,this,a);d=this.$$path;var e=/^\/[A-Z]:(\/.*)/;0===f.indexOf(a)&&(f=f.replace(a,""));e.exec(f)||(d=(f=e.exec(d))?f[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=H(this.$$search),d=this.$$hash?"#"+M(this.$$hash):"";
this.$$url=qc(this.$$path)+(c?"?"+c:"")+d;this.$$absUrl=a+(this.$$url?b+this.$$url:"")};this.$$parseLinkUrl=function(b){return Lb(a)==Lb(b)?(this.$$parse(b),!0):!1}}function Wa(a,b){this.$$html5=!0;Ta.apply(this,arguments);var c=La(a);this.$$parseLinkUrl=function(d){var f,e;a==Lb(d)?f=d:(e=Eb(c,d))?f=a+b+e:c===d+"/"&&(f=c);f&&this.$$parse(f);return!!f};this.$$compose=function(){var c=H(this.$$search),d=this.$$hash?"#"+M(this.$$hash):"";this.$$url=qc(this.$$path)+(c?"?"+c:"")+d;this.$$absUrl=a+b+this.$$url}}
function Ra(a){return function(){return this[a]}}function Pb(a,b){return function(c){if(s(c))return this[a];this[a]=b(c);this.$$compose();return this}}function tc(){var b="",c=!1;this.hashPrefix=function(a){return v(a)?(b=a,this):b};this.html5Mode=function(a){return v(a)?(c=a,this):c};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,f,e,j){function h(a){d.$broadcast("$locationChangeSuccess",u.absUrl(),a)}var u,k=f.baseHref(),g=f.url();c?(k=g.substring(0,g.indexOf("/",g.indexOf("//")+
2))+(k||"/"),e=e.history?xa:Wa):(k=Lb(g),e=Ta);u=new e(k,"#"+b);u.$$parseLinkUrl(g,g);var l=/^\s*(javascript|mailto):/i;j.on("click",function(b){if(!b.ctrlKey&&!(b.metaKey||2==b.which)){for(var c=Da(b.target);"a"!==Za(c[0].nodeName);)if(c[0]===j[0]||!(c=c.parent())[0])return;var e=c.prop("href"),h=c.attr("href")||c.attr("xlink:href");A(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=Ja(e.animVal).href);!l.test(e)&&(e&&(!c.attr("target")&&!b.isDefaultPrevented())&&u.$$parseLinkUrl(e,h))&&(b.preventDefault(),
u.absUrl()!=f.url()&&(d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}});u.absUrl()!=g&&f.url(u.absUrl(),!0);f.onUrlChange(function(a){u.absUrl()!=a&&(d.$evalAsync(function(){var b=u.absUrl();u.$$parse(a);d.$broadcast("$locationChangeStart",a,b).defaultPrevented?(u.$$parse(b),f.url(b)):h(b)}),d.$$phase||d.$digest())});var C=0;d.$watch(function(){var a=f.url(),b=u.$$replace;if(!C||a!=u.absUrl())C++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",u.absUrl(),a).defaultPrevented?u.$$parse(a):
(f.url(u.absUrl(),b),h(a))});u.$$replace=!1;return C});return u}]}function Jb(){var a=!0,b=this;this.debugEnabled=function(b){return v(b)?(a=b,this):a};this.$get=["$window",function(c){function f(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},j=b[a]||b.log||m;a=!1;try{a=!!j.apply}catch(u){}return a?function(){var a=[];d(arguments,
function(b){a.push(f(b))});return j.apply(b,a)}:function(a,b){j(a,null==b?"":b)}}var j=e("log"),u=e("info"),h=e("warn"),k=e("error"),g=e("debug");return{log:j,info:u,warn:h,error:k,debug:function(){a&&g.apply(b,arguments)}}}]}function K(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Nb("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function ob(a,b){if(a){if(a.constructor===
a)throw Nb("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw Nb("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Nb("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Nb("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",
b);}return a}function bc(a,b,c,d,f){ob(a,d);f=f||{};b=b.split(".");for(var e,j=0;1<b.length;j++){e=K(b.shift(),d);var u=ob(a[e],d);u||(u={},a[e]=u);a=u;a.then&&f.unwrapPromises&&(Kb(d),"$$v"in a||function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===g&&(a.$$v={}),a=a.$$v)}e=K(b.shift(),d);ob(a[e],d);return a[e]=c}function hb(a){return"constructor"==a}function Ia(a,b,c,d,f,e,j){K(a,e);K(b,e);K(c,e);K(d,e);K(f,e);var u=function(a){return ob(a,e)},h=j.expensiveChecks,k=h||hb(a)?u:n,l=h||hb(b)?u:n,C=h||
hb(c)?u:n,m=h||hb(d)?u:n,p=h||hb(f)?u:n;return!j.unwrapPromises?function(e,j){var u=j&&j.hasOwnProperty(a)?j:e;if(null==u)return u;u=k(u[a]);if(!b)return u;if(null==u)return g;u=l(u[b]);if(!c)return u;if(null==u)return g;u=C(u[c]);if(!d)return u;if(null==u)return g;u=m(u[d]);return!f?u:null==u?g:u=p(u[f])}:function(j,u){var h=u&&u.hasOwnProperty(a)?u:j,n;if(null==h)return h;if((h=k(h[a]))&&h.then)Kb(e),"$$v"in h||(n=h,n.$$v=g,n.then(function(a){n.$$v=k(a)})),h=k(h.$$v);if(!b)return h;if(null==h)return g;
if((h=l(h[b]))&&h.then)Kb(e),"$$v"in h||(n=h,n.$$v=g,n.then(function(a){n.$$v=l(a)})),h=l(h.$$v);if(!c)return h;if(null==h)return g;if((h=C(h[c]))&&h.then)Kb(e),"$$v"in h||(n=h,n.$$v=g,n.then(function(a){n.$$v=C(a)})),h=C(h.$$v);if(!d)return h;if(null==h)return g;if((h=m(h[d]))&&h.then)Kb(e),"$$v"in h||(n=h,n.$$v=g,n.then(function(a){n.$$v=m(a)})),h=m(h.$$v);if(!f)return h;if(null==h)return g;if((h=p(h[f]))&&h.then)Kb(e),"$$v"in h||(n=h,n.$$v=g,n.then(function(a){n.$$v=p(a)})),h=p(h.$$v);return h}}
function bb(a,b,c){var f=b.expensiveChecks,e=f?yd:Gd;if(e.hasOwnProperty(a))return e[a];var j=a.split("."),h=j.length,u;if(b.csp)u=6>h?Ia(j[0],j[1],j[2],j[3],j[4],c,b):function(a,d){var f=0,e;do e=Ia(j[f++],j[f++],j[f++],j[f++],j[f++],c,b)(a,d),d=g,a=e;while(f<h);return e};else{var k="var p;\n";f&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=f;d(j,function(a,d){K(a,c);var e=(d?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+'["'+a+'"]',j=f||hb(a);j&&(e="eso("+e+", fe)",l=!0);k+="if(s == null) return undefined;\ns="+
e+";\n";b.unwrapPromises&&(k+='if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(j?"eso(v)":"v")+";});\n}\n s="+(j?"eso(s.$$v)":"s.$$v")+"\n}\n")});k+="return s;";u=new Function("s","l","pw","eso","fe",k);u.toString=r(k);if(l||b.unwrapPromises){var C=u;u=function(a,b){return C(a,b,Kb,ob,c)}}}"hasOwnProperty"!==a&&(e[a]=u);return u}function Ua(){var a={},b={},c={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,
expensiveChecks:!1};this.unwrapPromises=function(a){return v(a)?(c.unwrapPromises=!!a,this):c.unwrapPromises};this.logPromiseWarnings=function(a){return v(a)?(c.logPromiseWarnings=a,this):c.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(d,f,e){c.csp=f.csp;var j={csp:c.csp,unwrapPromises:c.unwrapPromises,logPromiseWarnings:c.logPromiseWarnings,expensiveChecks:!0};Kb=function(a){c.logPromiseWarnings&&!gd.hasOwnProperty(a)&&(gd[a]=!0,e.warn("[$parse] Promise found in the expression `"+
a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(f,e){var h;switch(typeof f){case "string":var u=e?b:a;if(u.hasOwnProperty(f))return u[f];h=e?j:c;var k=new Kc(h);h=(new Hc(k,d,h)).parse(f);"hasOwnProperty"!==f&&(u[f]=h);return h;case "function":return f;default:return m}}}]}function Cc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){var c=function(a){return a},f=function(a){return h(a)},e=function(){var d=[],h,k;return k={resolve:function(b){if(d){var c=
d;d=g;h=j(b);c.length&&a.$evalAsync(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){k.resolve(u(a))},notify:function(b){if(d){var c=d;d.length&&a.$evalAsync(function(){for(var a,d=0,f=c.length;d<f;d++)a=c[d],a[2](b)})}},promise:{then:function(a,j,u){var k=e(),g=function(d){try{k.resolve((y(a)?a:c)(d))}catch(f){k.reject(f),b(f)}},l=function(a){try{k.resolve((y(j)?j:f)(a))}catch(c){k.reject(c),b(c)}},C=function(a){try{k.notify((y(u)?u:c)(a))}catch(d){b(d)}};
d?d.push([g,l,C]):h.then(g,l,C);return k.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):d.reject(a);return d.promise}function d(f,e){var j=null;try{j=(a||c)()}catch(h){return b(h,!1)}return j&&y(j.then)?j.then(function(){return b(f,e)},function(a){return b(a,!1)}):b(f,e)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},j=function(b){return b&&y(b.then)?b:{then:function(c){var d=e();a.$evalAsync(function(){d.resolve(c(b))});
return d.promise}}},h=function(a){var b=e();b.reject(a);return b.promise},u=function(c){return{then:function(d,j){var h=e();a.$evalAsync(function(){try{h.resolve((y(j)?j:f)(c))}catch(a){h.reject(a),b(a)}});return h.promise}}};return{defer:e,reject:h,when:function(d,u,k,g){var l=e(),C,m=function(a){try{return(y(u)?u:c)(a)}catch(d){return b(d),h(d)}},n=function(a){try{return(y(k)?k:f)(a)}catch(c){return b(c),h(c)}},p=function(a){try{return(y(g)?g:c)(a)}catch(d){b(d)}};a.$evalAsync(function(){j(d).then(function(a){C||
(C=!0,l.resolve(j(a).then(m,n,p)))},function(a){C||(C=!0,l.resolve(n(a)))},function(a){C||l.notify(p(a))})});return l.promise},all:function(a){var b=e(),c=0,f=ga(a)?[]:{};d(a,function(a,d){c++;j(a).then(function(a){f.hasOwnProperty(d)||(f[d]=a,--c||b.resolve(f))},function(a){f.hasOwnProperty(d)||b.reject(a)})});0===c&&b.resolve(f);return b.promise}}}]}function Ya(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,
d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,f=!!c,e=f?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};e.supported=f;return e}]}function Qb(){var a=10,b=c("$rootScope"),f=null;this.digestTtl=function(b){arguments.length&&(a=b);return a};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(c,h,u,k){function g(){this.$id=j();this.$$phase=this.$parent=
this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function l(a){if(fa.$$phase)throw b("inprog","{0} already in progress",fa.$$phase);fa.$$phase=a}function C(a,b){var c=u(a);q(c,b);return c}function n(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=
a.$parent)}function p(){}g.prototype={constructor:g,$new:function(a){a?(a=new g,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=j();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=
this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,c){var d=C(a,"watch"),e=this.$$watchers,j={fn:b,last:p,get:d,exp:a,eq:!!c};f=null;if(!y(b)){var h=C(b||m,"listener");j.fn=function(a,b,c){h(c)}}if("string"==typeof a&&d.constant){var u=j.fn;j.fn=function(a,b,c){u.call(this,a,b,c);O(e,j)}}e||(e=this.$$watchers=[]);e.unshift(j);return function(){O(e,j);f=null}},$watchCollection:function(a,b){var c=this,
d,f,j,h=1<b.length,k=0,g=u(a),l=[],C={},m=!0,n=0;return this.$watch(function(){d=g(c);var a,b,j;if(A(d))if(e(d)){f!==l&&(f=l,n=f.length=0,k++);a=d.length;n!==a&&(k++,f.length=n=a);for(b=0;b<a;b++)j=f[b]!==f[b]&&d[b]!==d[b],!j&&f[b]!==d[b]&&(k++,f[b]=d[b])}else{f!==C&&(f=C={},n=0,k++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,f.hasOwnProperty(b)?(j=f[b]!==f[b]&&d[b]!==d[b],!j&&f[b]!==d[b]&&(k++,f[b]=d[b])):(n++,f[b]=d[b],k++));if(n>a)for(b in k++,f)f.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(n--,delete f[b])}else f!==
d&&(f=d,k++);return k},function(){m?(m=!1,b(d,d,c)):b(d,j,c);if(h)if(A(d))if(e(d)){j=Array(d.length);for(var a=0;a<d.length;a++)j[a]=d[a]}else for(a in j={},d)kc.call(d,a)&&(j[a]=d[a]);else j=d})},$digest:function(){var c,d,e,j,u=this.$$asyncQueue,g=this.$$postDigestQueue,C,m,n=a,r,da=[],s,ba,v;l("$digest");k.$$checkUrlChange();f=null;do{m=!1;for(r=this;u.length;){try{v=u.shift(),v.scope.$eval(v.expression)}catch(ga){fa.$$phase=null,h(ga)}f=null}a:do{if(j=r.$$watchers)for(C=j.length;C--;)try{if(c=
j[C])if((d=c.get(r))!==(e=c.last)&&!(c.eq?P(d,e):"number"===typeof d&&"number"===typeof e&&isNaN(d)&&isNaN(e)))m=!0,f=c,c.last=c.eq?V(d,null):d,c.fn(d,e===p?d:e,r),5>n&&(s=4-n,da[s]||(da[s]=[]),ba=y(c.exp)?"fn: "+(c.exp.name||c.exp.toString()):c.exp,ba+="; newVal: "+ca(d)+"; oldVal: "+ca(e),da[s].push(ba));else if(c===f){m=!1;break a}}catch(A){fa.$$phase=null,h(A)}if(!(j=r.$$childHead||r!==this&&r.$$nextSibling))for(;r!==this&&!(j=r.$$nextSibling);)r=r.$parent}while(r=j);if((m||u.length)&&!n--)throw fa.$$phase=
null,b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,ca(da));}while(m||u.length);for(fa.$$phase=null;g.length;)try{g.shift()()}catch(z){h(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==fa&&(d(this.$$listenerCount,U(null,n,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=
this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=m,this.$on=this.$watch=function(){return m})}},$eval:function(a,b){return u(a)(this,b)},$evalAsync:function(a){!fa.$$phase&&!fa.$$asyncQueue.length&&k.defer(function(){fa.$$asyncQueue.length&&
fa.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return l("$apply"),this.$eval(a)}catch(b){h(b)}finally{fa.$$phase=null;try{fa.$digest()}catch(c){throw h(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var f=this;return function(){var d=J(c,b);-1!==d&&(c[d]=
null,n(f,1,a))}},$emit:function(a,b){var c=[],d,f=this,e=!1,j={name:a,targetScope:f,stopPropagation:function(){e=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},u=[j].concat(Tb.call(arguments,1)),k,g;do{d=f.$$listeners[a]||c;j.currentScope=f;k=0;for(g=d.length;k<g;k++)if(d[k])try{d[k].apply(null,u)}catch(l){h(l)}else d.splice(k,1),k--,g--;if(e)break;f=f.$parent}while(f);return j},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=
!0},defaultPrevented:!1},e=[f].concat(Tb.call(arguments,1)),j,u;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];j=0;for(u=d.length;j<u;j++)if(d[j])try{d[j].apply(null,e)}catch(k){h(k)}else d.splice(j,1),j--,u--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};var fa=new g;return fa}]}function ab(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return v(b)?
(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(b=a,this):b};this.$get=function(){return function(c,d){var f=d?b:a,e;if(!Oa||8<=Oa)if(e=Ja(c).href,""!==e&&!e.match(f))return"unsafe:"+e;return c}}}function Mc(a){if("self"===a)return a;if(w(a)){if(-1<a.indexOf("***"))throw Yb("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);a=a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+
a+"$")}if(B(a))return RegExp("^"+a.source+"$");throw Yb("imatcher",'Matchers may only be "self", string patterns or RegExp objects');}function uc(a){var b=[];v(a)&&d(a,function(a){b.push(Mc(a))});return b}function Dc(){this.SCE_CONTEXTS=Ob;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=uc(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=uc(a));return b};this.$get=["$injector",function(c){function d(a){var b=function(a){this.$$unwrapTrustedValue=
function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(){throw Yb("unsafe","Attempting to use an unsafe value in a safe context.");};c.has("$sanitize")&&(f=c.get("$sanitize"));var e=d(),j={};j[Ob.HTML]=d(e);j[Ob.CSS]=d(e);j[Ob.URL]=d(e);j[Ob.JS]=d(e);j[Ob.RESOURCE_URL]=d(j[Ob.URL]);return{trustAs:function(a,b){var c=j.hasOwnProperty(a)?j[a]:
null;if(!c)throw Yb("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===g||""===b)return b;if("string"!==typeof b)throw Yb("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===g||""===d)return d;var e=j.hasOwnProperty(c)?j[c]:null;if(e&&d instanceof e)return d.$$unwrapTrustedValue();if(c===Ob.RESOURCE_URL){var e=Ja(d.toString()),h,u,k=!1;h=0;
for(u=a.length;h<u;h++)if("self"===a[h]?jc(e):a[h].exec(e.href)){k=!0;break}if(k){h=0;for(u=b.length;h<u;h++)if("self"===b[h]?jc(e):b[h].exec(e.href)){k=!1;break}}if(k)return d;throw Yb("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",d.toString());}if(c===Ob.HTML)return f(d);throw Yb("unsafe","Attempting to use an unsafe value in a safe context.");},valueOf:function(a){return a instanceof e?a.$$unwrapTrustedValue():a}}}]}function xb(){var a=!0;this.enabled=
function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sniffer","$sceDelegate",function(b,c,f){if(a&&c.msie&&8>c.msieDocumentMode)throw Yb("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=N(Ob);e.isEnabled=function(){return a};e.trustAs=f.trustAs;e.getTrusted=f.getTrusted;
e.valueOf=f.valueOf;a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=n);e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return e.getTrusted(a,d(b,c))}};var j=e.parseAs,h=e.getTrusted,u=e.trustAs;d(Ob,function(a,b){var c=Za(b);e[Aa("parse_as_"+c)]=function(b){return j(a,b)};e[Aa("get_trusted_"+c)]=function(b){return h(a,b)};e[Aa("trust_as_"+c)]=function(b){return u(a,b)}});return e}]}function pb(){this.$get=["$window","$document",function(a,b){var c={},d=
l((/android (\d+)/.exec(Za((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),e=b[0]||{},j=e.documentMode,h,u=/^(Moz|webkit|O|ms)(?=[A-Z])/,k=e.body&&e.body.style,g=!1,C=!1;if(k){for(var m in k)if(g=u.exec(m)){h=g[0];h=h.substr(0,1).toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in k&&"webkit");g=!!("transition"in k||h+"Transition"in k);C=!!("animation"in k||h+"Animation"in k);if(d&&(!g||!C))g=w(e.body.style.webkitTransition),C=w(e.body.style.webkitAnimation)}return{history:!(!a.history||
!a.history.pushState||4>d||f),hashchange:"onhashchange"in a&&(!j||7<j),hasEvent:function(a){if("input"==a&&9==Oa)return!1;if(s(c[a])){var b=e.createElement("div");c[a]="on"+a in b}return c[a]},csp:Pa(),vendorPrefix:h,transitions:g,animations:C,android:d,msie:Oa,msieDocumentMode:j}}]}function cc(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function f(j,h,u){var k=c.defer(),g=k.promise,l=v(u)&&!u;h=b.defer(function(){try{k.resolve(j())}catch(b){k.reject(b),d(b)}finally{delete e[g.$$timeoutId]}l||
a.$apply()},h);g.$$timeoutId=h;e[h]=k;return g}var e={};f.cancel=function(a){return a&&a.$$timeoutId in e?(e[a.$$timeoutId].reject("canceled"),delete e[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function Ja(a){Oa&&(sb.setAttribute("href",a),a=sb.href);sb.setAttribute("href",a);return{href:sb.href,protocol:sb.protocol?sb.protocol.replace(/:$/,""):"",host:sb.host,search:sb.search?sb.search.replace(/^\?/,""):"",hash:sb.hash?sb.hash.replace(/^#/,""):"",hostname:sb.hostname,port:sb.port,
pathname:"/"===sb.pathname.charAt(0)?sb.pathname:"/"+sb.pathname}}function jc(a){a=w(a)?Ja(a):a;return a.protocol===fc.protocol&&a.host===fc.host}function Hb(){this.$get=r(a)}function ib(a){function b(f,e){if(A(f)){var j={};d(f,function(a,c){j[c]=b(c,a)});return j}return a.factory(f+c,e)}var c="Filter";this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];b("currency",Ab);b("date",Vb);b("filter",Ub);b("json",Fb);b("limitTo",Qa);b("lowercase",Kd);b("number",Rb);
b("orderBy",Bb);b("uppercase",ld)}function Ub(){return function(a,b,c){if(!ga(a))return a;var d=typeof c,f=[];f.check=function(a){for(var b=0;b<f.length;b++)if(!f[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return C.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kc.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var e=function(a,b){if("string"===
typeof b&&"!"===b.charAt(0))return!e(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&e(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(e(a[d],b))return!0;return!1;default:return!1}};switch(typeof b){case "boolean":case "number":case "string":b={$:b};case "object":for(var j in b)(function(a){"undefined"!==typeof b[a]&&f.push(function(c){return e("$"==
a?c:c&&c[a],b[a])})})(j);break;case "function":f.push(b);break;default:return a}d=[];for(j=0;j<a.length;j++){var h=a[j];f.check(h)&&d.push(h)}return d}}function Ab(a){var b=a.NUMBER_FORMATS;return function(a,c){s(c)&&(c=b.CURRENCY_SYM);return mb(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function Rb(a){var b=a.NUMBER_FORMATS;return function(a,c){return mb(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function mb(a,b,c,d,f){if(null==a||!isFinite(a)||A(a))return"";var e=0>a;
a=Math.abs(a);var j=a+"",h="",u=[],k=!1;if(-1!==j.indexOf("e")){var g=j.match(/([\d\.]+)e(-?)(\d+)/);g&&"-"==g[2]&&g[3]>f+1?(j="0",a=0):(h=j,k=!0)}if(k)0<f&&(-1<a&&1>a)&&(h=a.toFixed(f));else{j=(j.split(gc)[1]||"").length;s(f)&&(f=Math.min(Math.max(b.minFrac,j),b.maxFrac));a=+(Math.round(+(a.toString()+"e"+f)).toString()+"e"+-f);0===a&&(e=!1);a=(""+a).split(gc);j=a[0];a=a[1]||"";var g=0,l=b.lgSize,C=b.gSize;if(j.length>=l+C){g=j.length-l;for(k=0;k<g;k++)0===(g-k)%C&&0!==k&&(h+=c),h+=j.charAt(k)}for(k=
g;k<j.length;k++)0===(j.length-k)%l&&0!==k&&(h+=c),h+=j.charAt(k);for(;a.length<f;)a+="0";f&&"0"!==f&&(h+=d+a.substr(0,f))}u.push(e?b.negPre:b.posPre);u.push(h);u.push(e?b.negSuf:b.posSuf);return u.join("")}function Ib(a,b,c){var d="";0>a&&(d="-",a=-a);for(a=""+a;a.length<b;)a="0"+a;c&&(a=a.substr(a.length-b));return d+a}function gb(a,b,c,d){c=c||0;return function(f){f=f["get"+a]();if(0<c||f>-c)f+=c;0===f&&-12==c&&(f=12);return Ib(f,b,d)}}function nb(a,b){return function(c,d){var f=c["get"+a](),e=
Wb(b?"SHORT"+a:a);return d[e][f]}}function Vb(a){var b=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,f){var e="",j=[],h,u;f=f||"mediumDate";f=a.DATETIME_FORMATS[f]||f;if(w(c)){if(Jd.test(c))u=l(c);else{var k=c;if(u=k.match(b)){var k=new Date(0),g=0,C=0,m=u[8]?k.setUTCFullYear:k.setFullYear,n=u[8]?k.setUTCHours:k.setHours;u[9]&&(g=l(u[9]+u[10]),C=l(u[9]+u[11]));m.call(k,l(u[1]),l(u[2])-1,l(u[3]));g=l(u[4]||0)-g;C=l(u[5]||0)-
C;m=l(u[6]||0);u=Math.round(1E3*parseFloat("0."+(u[7]||0)));n.call(k,g,C,m,u)}u=k}c=u}z(c)&&(c=new Date(c));if(!D(c))return c;for(;f;)(u=Id.exec(f))?(j=j.concat(Tb.call(u,1)),f=j.pop()):(j.push(f),f=null);d(j,function(b){h=Hd[b];e+=h?h(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return e}}function Fb(){return function(a){return ca(a,!0)}}function Qa(){return function(a,b){if(!ga(a)&&!w(a))return a;b=Infinity===Math.abs(Number(b))?Number(b):l(b);if(w(a))return b?0<=b?a.slice(0,
b):a.slice(b,a.length):"";var c=[],d,f;b>a.length?b=a.length:b<-a.length&&(b=-a.length);0<b?(d=0,f=b):(d=a.length+b,f=a.length);for(;d<f;d++)c.push(a[d]);return c}}function Bb(a){return function(b,c,f){function j(a,b){return Z(b)?function(b,c){return a(c,b)}:a}function h(a,b){var c=typeof a,d=typeof b;return c==d?(D(a)&&D(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!e(b))return b;c=ga(c)?c:[c];0===c.length&&(c=["+"]);var u=function(b){var c=
!1,d=b||n;if(w(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0),b=b.substring(1);if(""===b)return j(function(a,b){return h(a,b)},c);d=a(b);if(d.constant){var f=d();return j(function(a,b){return h(a[f],b[f])},c)}}return j(function(a,b){return h(d(a),d(b))},c)},k=[];d(c,function(a,b,c){k.push(u.call(void 0,a,b,c))});c=k;return Tb.call(b).sort(j(function(a,b){for(var d=0;d<c.length;d++){var f=c[d](a,b);if(0!==f)return f}return 0},f))}}function fb(a){y(a)&&(a={link:a});a.restrict=a.restrict||
"AC";return r(a)}function Sb(a,b,c,f){function e(b,c){c=c?"-"+X(c,"-"):"";f.setClass(a,(b?$b:xc)+c,(b?xc:$b)+c)}var j=this,h=a.parent().controller("form")||Ic,u=0,k=j.$error={},g=[];j.$name=b.name||b.ngForm;j.$dirty=!1;j.$pristine=!0;j.$valid=!0;j.$invalid=!1;h.$addControl(j);a.addClass(yc);e(!0);j.$addControl=function(a){Y(a.$name,"input");g.push(a);a.$name&&(j[a.$name]=a)};j.$removeControl=function(a){a.$name&&j[a.$name]===a&&delete j[a.$name];d(k,function(b,c){j.$setValidity(c,!0,a)});O(g,a)};
j.$setValidity=function(a,b,c){var d=k[a];if(b)d&&(O(d,c),d.length||(u--,u||(e(b),j.$valid=!0,j.$invalid=!1),k[a]=!1,e(!0,a),h.$setValidity(a,!0,j)));else{u||e(b);if(d){if(-1!=J(d,c))return}else k[a]=d=[],u++,e(!1,a),h.$setValidity(a,!1,j);d.push(c);j.$valid=!1;j.$invalid=!0}};j.$setDirty=function(){f.removeClass(a,yc);f.addClass(a,zc);j.$dirty=!0;j.$pristine=!1;h.$setDirty()};j.$setPristine=function(){f.removeClass(a,zc);f.addClass(a,yc);j.$dirty=!1;j.$pristine=!0;d(g,function(a){a.$setPristine()})}}
function Xa(a,b,c,d){a.$setValidity(b,c);return c?d:g}function Nc(a,b){var c,d;if(b)for(c=0;c<b.length;++c)if(d=b[c],a[d])return!0;return!1}function sc(a,b,d,f,e,j){var h=b.prop(Wc),u=b[0].placeholder,k={},g=Za(b[0].type);f.$$validityState=h;if(!e.android){var C=!1;b.on("compositionstart",function(){C=!0});b.on("compositionend",function(){C=!1;m()})}var m=function(c){if(!C){var e=b.val();if(Oa&&"input"===(c||k).type&&b[0].placeholder!==u)u=b[0].placeholder;else{if("password"!==g&&Z(d.ngTrim||"T"))e=
Ga(e);c=h&&f.$$hasNativeValidators;if(f.$viewValue!==e||""===e&&c)a.$root.$$phase?f.$setViewValue(e):a.$apply(function(){f.$setViewValue(e)})}}};if(e.hasEvent("input"))b.on("input",m);else{var n,p=function(){n||(n=j.defer(function(){m();n=null}))};b.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||p()});if(e.hasEvent("paste"))b.on("paste cut",p)}b.on("change",m);f.$render=function(){b.val(f.$isEmpty(f.$viewValue)?"":f.$viewValue)};var fa=d.ngPattern;fa&&((e=fa.match(/^\/(.*)\/([gim]*)$/))?
(fa=RegExp(e[1],e[2]),e=function(a){return Xa(f,"pattern",f.$isEmpty(a)||fa.test(a),a)}):e=function(d){var e=a.$eval(fa);if(!e||!e.test)throw c("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",fa,e,ea(b));return Xa(f,"pattern",f.$isEmpty(d)||e.test(d),d)},f.$formatters.push(e),f.$parsers.push(e));if(d.ngMinlength){var r=l(d.ngMinlength);e=function(a){return Xa(f,"minlength",f.$isEmpty(a)||a.length>=r,a)};f.$parsers.push(e);f.$formatters.push(e)}if(d.ngMaxlength){var da=
l(d.ngMaxlength);e=function(a){return Xa(f,"maxlength",f.$isEmpty(a)||a.length<=da,a)};f.$parsers.push(e);f.$formatters.push(e)}}function Ec(a,b){a="ngClass"+a;return["$animate",function(c){function f(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],j=0;j<b.length;j++)if(e==b[j])continue a;c.push(e)}return c}function e(a){if(!ga(a)){if(w(a))return a.split(" ");if(A(a)){var b=[];d(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(j,h,u){function k(a,
b){var c=h.data("$classCounts")||{},f=[];d(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&f.push(a)});h.data("$classCounts",c);return f.join(" ")}function g(a){if(!0===b||j.$index%2===b){var d=e(a||[]);if(l){if(!P(a,l)){var C=e(l),m=f(d,C),d=f(C,d),d=k(d,-1),m=k(m,1);0===m.length?c.removeClass(h,d):0===d.length?c.addClass(h,m):c.setClass(h,m,d)}}else m=k(d,1),u.$addClass(m)}l=N(a)}var l;j.$watch(u[a],g,!0);u.$observe("class",function(){g(j.$eval(u[a]))});"ngClass"!==a&&j.$watch("$index",
function(c,d){var f=c&1;if(f!==(d&1)){var h=e(j.$eval(u[a]));f===b?(f=k(h,1),u.$addClass(f)):(f=k(h,-1),u.$removeClass(f))}})}}}]}var Wc="validity",Za=function(a){return w(a)?a.toLowerCase():a},kc=Object.prototype.hasOwnProperty,Wb=function(a){return w(a)?a.toUpperCase():a},Oa,Da,jb,Tb=[].slice,Xc=[].push,Xb=Object.prototype.toString,u=c("ng"),C=a.angular||(a.angular={}),fa,da,ba=["0","0","0"];Oa=l((/msie (\d+)/.exec(Za(navigator.userAgent))||[])[1]);isNaN(Oa)&&(Oa=l((/trident\/.*; rv:(\d+)/.exec(Za(navigator.userAgent))||
[])[1]));m.$inject=[];n.$inject=[];var ga;ga=y(Array.isArray)?Array.isArray:function(a){return"[object Array]"===Xb.call(a)};var Ga;Ga=String.prototype.trim?function(a){return w(a)?a.trim():a}:function(a){return w(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a};da=9>Oa?function(a){a=a.nodeName?a:a[0];return a.scopeName&&"HTML"!=a.scopeName?Wb(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var Pa=function(){if(v(Pa.isActive_))return Pa.isActive_;var a=
!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Pa.isActive_=a},Cb=/[A-Z]/g,lc={full:"1.2.28",major:1,minor:2,dot:28,codeName:"finnish-disembarkation"};za.expando="ng339";var mc=za.cache={},Fc=1,ub=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},yb=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)};za._data=
function(a){return this.cache[a[this.expando]]||{}};var Ad=/([\:\-\_]+(.))/g,ed=/^moz([A-Z])/,Yc=c("jqLite"),Zc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Oc=/<|&#?\w+;/,hd=/<([\w:]+)/,Bd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mb={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};
Mb.optgroup=Mb.option;Mb.tbody=Mb.tfoot=Mb.colgroup=Mb.caption=Mb.thead;Mb.th=Mb.td;var vc=za.prototype={ready:function(c){function d(){f||(f=!0,c())}var f=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),za(a).on("load",d))},toString:function(){var a=[];d(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?Da(this[a]):Da(this[this.length+a])},length:0,push:Xc,sort:[].sort,splice:[].splice},Pc={};d("multiple selected checked disabled readOnly required open".split(" "),
function(a){Pc[Za(a)]=a});var Qc={};d("input select option textarea button form details".split(" "),function(a){Qc[Wb(a)]=!0});d({data:Ha,removeData:db},function(a,b){za[b]=a});var fd=d,$c=function(a,b){var c=Gc[a.nodeType];if(s(b))return c?a[c]:"";a[c]=b},Gc=[];9>Oa?(Gc[1]="innerText",Gc[3]="nodeValue"):Gc[1]=Gc[3]="textContent";$c.$dv="";fd({data:Ha,inheritedData:qa,scope:function(a){return Da.data(a,"$scope")||qa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Da.data(a,
"$isolateScope")||Da.data(a,"$isolateScopeNoTemplate")},controller:ia,injector:function(a){return qa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:ka,css:function(a,b,c){b=Aa(b);if(v(c))a.style[b]=c;else{var d;8>=Oa&&(d=a.currentStyle&&a.currentStyle[b],""===d&&(d="auto"));d=d||a.style[b];8>=Oa&&(d=""===d?g:d);return d}},attr:function(a,b,c){var d=Za(b);if(Pc[d])if(v(c))c?(a[b]=!0,a.setAttribute(b,d)):(a[b]=!1,a.removeAttribute(d));else return a[b]||(a.attributes.getNamedItem(b)||
m).specified?d:g;else if(v(c))a.setAttribute(b,c);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?g:a},prop:function(a,b,c){if(v(c))a[b]=c;else return a[b]},text:$c,val:function(a,b){if(s(b)){if("SELECT"===da(a)&&a.multiple){var c=[];d(a.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(s(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)Na(d[c]);a.innerHTML=b},empty:ja},function(a,b){za.prototype[b]=
function(b,c){var d,f,e=this.length;if(a!==ja&&(2==a.length&&a!==ka&&a!==ia?b:c)===g){if(A(b)){for(d=0;d<e;d++)if(a===Ha)a(this[d],b);else for(f in b)a(this[d],f,b[f]);return this}d=a.$dv;e=d===g?Math.min(e,1):e;for(f=0;f<e;f++){var j=a(this[f],b,c);d=d?d+j:j}return d}for(d=0;d<e;d++)a(this[d],b,c);return this}});d({removeData:db,dealoc:Na,on:function Zb(a,c,f,e){if(v(e))throw Yc("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var j=Sa(a,"events"),h=Sa(a,"handle");
j||Sa(a,"events",j={});if(!h){var u=j;e=function(c,f){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||b);if(s(c.defaultPrevented)){var e=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;e.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var j=N(u[f||c.type]||[]);d(j,function(b){b.call(a,c)});8>=Oa?(c.preventDefault=
null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};e.elem=a;Sa(a,"handle",h=e)}d(c.split(" "),function(c){var d=j[c];if(!d){if("mouseenter"==c||"mouseleave"==c){var e=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)))}:function(a,
b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};j[c]=[];Zb(a,{mouseleave:"mouseout",mouseenter:"mouseover"}[c],function(a){var b=a.relatedTarget;(!b||b!==this&&!e(this,b))&&h(a,c)})}else ub(a,c,h),j[c]=[];d=j[c]}d.push(f)})},off:tb,one:function(a,b,c){a=Da(a);a.on(b,function Jc(){a.off(b,c);a.off(b,Jc)});a.on(b,c)},replaceWith:function(a,b){var c,f=a.parentNode;Na(a);d(new za(b),function(b){c?f.insertBefore(b,c.nextSibling):f.replaceChild(b,a);c=b})},children:function(a){var b=[];d(a.childNodes,
function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){d(new za(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;d(new za(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=Da(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a);b.appendChild(a)},remove:function(a){Na(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=
a,f=a.parentNode;d(new za(b),function(a){f.insertBefore(a,c.nextSibling);c=a})},addClass:oa,removeClass:na,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;s(d)&&(d=!ka(a,b));(d?oa:na)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:cb,
triggerHandler:function(a,b,c){var f,e;f=b.type||b;var j=(Sa(a,"events")||{})[f];j&&(f={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:m,type:f,target:a},b.type&&(f=k(f,b)),b=N(j),e=c?[f].concat(c):[f],d(b,function(b){b.apply(a,e)}))}},function(a,b){za.prototype[b]=function(b,c,d){for(var f,e=0;e<this.length;e++)s(f)?(f=a(this[e],b,c,d),v(f)&&(f=Da(f))):T(f,a(this[e],b,c,d));return v(f)?f:this};za.prototype.bind=
za.prototype.on;za.prototype.unbind=za.prototype.off});Fa.prototype={put:function(a,b){this[ra(a,this.nextUid)]=b},get:function(a){return this[ra(a,this.nextUid)]},remove:function(a){var b=this[a=ra(a,this.nextUid)];delete this[a];return b}};var Cd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Gb=/,/,id=/^\s*(_?)(\S+?)\1\s*$/,ad=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,dc=c("$injector"),ec=c("$animate"),vb=["$provide",function(a){this.$$selectors={};this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw ec("notcsel",
"Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d;a.factory(d,c)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,b){return{enter:function(a,c,d,f){if(d)d.after(a);else{if(!c||!c[0])c=d.parent();c.append(a)}f&&b(f)},leave:function(a,c){a.remove();c&&b(c)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(a,
c,f){c=w(c)?c:ga(c)?c.join(" "):"";d(a,function(a){oa(a,c)});f&&b(f)},removeClass:function(a,c,f){c=w(c)?c:ga(c)?c.join(" "):"";d(a,function(a){na(a,c)});f&&b(f)},setClass:function(a,c,f,e){d(a,function(a){oa(a,c);na(a,f)});e&&b(e)},enabled:m}}]}],wb=c("$compile");pa.$inject=["$provide","$$sanitizeUriProvider"];var oc=/^(x[\:\-_]|data[\:\-_])/i,Rc=c("$interpolate"),Dd=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Ed={http:80,https:443,ftp:21},bd=c("$location");Wa.prototype=Ta.prototype=xa.prototype={$$html5:!1,
$$replace:!1,absUrl:Ra("$$absUrl"),url:function(a){if(s(a))return this.$$url;a=Dd.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));if(a[2]||a[1])this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:Ra("$$protocol"),host:Ra("$$host"),port:Ra("$$port"),path:Pb("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(w(a)||z(a))a=a.toString(),this.$$search=va(a);else if(A(a))d(a,function(b,
c){null==b&&delete a[c]}),this.$$search=a;else throw bd("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:s(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Pb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var Nb=c("$parse"),gd={},Kb,Fd=Function.prototype.call,Uc=Function.prototype.apply,kd=Function.prototype.bind,wc={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:m,"+":function(a,b,c,d){c=c(a,b);d=d(a,b);return v(c)?v(d)?c+d:c:v(d)?d:g},"-":function(a,b,c,d){c=c(a,b);d=d(a,b);return(v(c)?c:0)-(v(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":m,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,
b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},hc={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Kc=function(a){this.options=a};Kc.prototype={constructor:Kc,lex:function(a){this.text=a;this.index=0;this.ch=g;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var b=a+this.peek(2),c=wc[this.ch],d=wc[a],f=wc[b];f?(this.tokens.push({index:this.index,text:b,fn:f}),this.index+=3):d?(this.tokens.push({index:this.index,text:a,fn:d}),this.index+=2):c?(this.tokens.push({index:this.index,text:this.ch,fn:c}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;b=v(b)?"s "+b+"-"+this.index+" ["+
this.text.substring(b,c)+"]":" "+c;throw Nb("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Za(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else if(this.isExpOperator(c)&&(!d||!this.isNumber(d))&&"e"==a.charAt(a.length-1))this.throwError("Invalid exponent");
else break}this.index++}a*=1;this.tokens.push({index:b,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,b="",c=this.index,d,f,e,j;this.index<this.text.length;){j=this.text.charAt(this.index);if("."===j||this.isIdent(j)||this.isNumber(j))"."===j&&(d=this.index),b+=j;else break;this.index++}if(d)for(f=this.index;f<this.text.length;){j=this.text.charAt(f);if("("===j){e=b.substr(d-c+1);b=b.substr(0,d-c);this.index=f;break}if(this.isWhitespace(j))f++;else break}c=
{index:c,text:b};if(wc.hasOwnProperty(b))c.fn=wc[b],c.literal=!0,c.constant=!0;else{var h=bb(b,this.options,this.text);c.fn=k(function(a,b){return h(a,b)},{assign:function(c,d){return bc(c,b,d,a.text,a.options)}})}this.tokens.push(c);e&&(this.tokens.push({index:d,text:"."}),this.tokens.push({index:d+1,text:e}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,f=!1;this.index<this.text.length;){var e=this.text.charAt(this.index),d=d+e;if(f)"u"===e?(f=this.text.substring(this.index+
1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,c+=String.fromCharCode(parseInt(f,16))):c+=hc[e]||e,f=!1;else if("\\"===e)f=!0;else{if(e===a){this.index++;this.tokens.push({index:b,text:d,string:c,literal:!0,constant:!0,fn:function(){return c}});return}c+=e}this.index++}this.throwError("Unterminated quote",b)}};var Hc=function(a,b,c){this.lexer=a;this.$filter=b;this.options=c};Hc.ZERO=k(function(){return 0},{constant:!0});Hc.prototype={constructor:Hc,
parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();(a=b.fn)||this.throwError("not a primary expression",b);a.literal=!!b.literal;a.constant=
!!b.constant}for(var c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw Nb("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));},peekToken:function(){if(0===this.tokens.length)throw Nb("ueoe","Unexpected end of expression: {0}",
this.text);return this.tokens[0]},peek:function(a,b,c,d){if(0<this.tokens.length){var f=this.tokens[0],e=f.text;if(e===a||e===b||e===c||e===d||!a&&!b&&!c&&!d)return f}return!1},expect:function(a,b,c,d){return(a=this.peek(a,b,c,d))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return k(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return k(function(d,f){return a(d,
f)?b(d,f):c(d,f)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return k(function(d,f){return b(d,f,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,f=0;f<a.length;f++){var e=a[f];e&&(d=e(b,c))}return d}},filterChain:function(){for(var a=this.expression(),b;;)if(b=this.expect("|"))a=this.binaryFn(a,
b.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;)if(a=this.expect(":"))c.push(this.expression());else{var d=function(a,d,f){f=[f];for(var e=0;e<c.length;e++)f.push(c[e](a,d));return b.apply(a,f)};return function(){return d}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),b,c;return(c=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,c.index)+"] can not be assigned to",
c),b=this.ternary(),function(c,d){return a.assign(c,b(c,d),d)}):a},ternary:function(){var a=this.logicalOR(),b,c;if(this.expect("?")){b=this.assignment();if(c=this.expect(":"))return this.ternaryFn(a,b,this.assignment());this.throwError("expected :",c)}else return a},logicalOR:function(){for(var a=this.logicalAND(),b;;)if(b=this.expect("||"))a=this.binaryFn(a,b.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),b;if(b=this.expect("&&"))a=this.binaryFn(a,b.fn,this.logicalAND());
return a},equality:function(){var a=this.relational(),b;if(b=this.expect("==","!=","===","!=="))a=this.binaryFn(a,b.fn,this.equality());return a},relational:function(){var a=this.additive(),b;if(b=this.expect("<",">","<=",">="))a=this.binaryFn(a,b.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a=this.binaryFn(a,b.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a=this.binaryFn(a,
b.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(Hc.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this,c=this.expect().text,d=bb(c,this.options,this.text);return k(function(b,c,f){return d(f||a(b,c))},{assign:function(d,f,e){(e=a(d,e))||a.assign(d,e={});return bc(e,c,f,b.text,b.options)}})},objectIndex:function(a){var b=this,c=this.expression();
this.consume("]");return k(function(d,f){var e=a(d,f),j=c(d,f),h;K(j,b.text);if(!e)return g;if((e=ob(e[j],b.text))&&e.then&&b.options.unwrapPromises)h=e,"$$v"in e||(h.$$v=g,h.then(function(a){h.$$v=a})),e=e.$$v;return e},{assign:function(d,f,e){var j=K(c(d,e),b.text);(e=ob(a(d,e),b.text))||a.assign(d,e={});return e[j]=f}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text){do c.push(this.expression());while(this.expect(","))}this.consume(")");var d=this;return function(f,e){for(var j=
[],h=b?b(f,e):f,u=0;u<c.length;u++)j.push(ob(c[u](f,e),d.text));u=a(f,e,h)||m;ob(h,d.text);var k=d.text;if(u){if(u.constructor===u)throw Nb("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",k);if(u===Fd||u===Uc||kd&&u===kd)throw Nb("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",k);}j=u.apply?u.apply(h,j):u(j[0],j[1],j[2],j[3],j[4]);return ob(j,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;
var c=this.expression();a.push(c);c.constant||(b=!1)}while(this.expect(","))}this.consume("]");return k(function(b,c){for(var d=[],f=0;f<a.length;f++)d.push(a[f](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var c=this.expect(),c=c.string||c.text;this.consume(":");var d=this.expression();a.push({key:c,value:d});d.constant||(b=!1)}while(this.expect(","))}this.consume("}");return k(function(b,c){for(var d={},f=0;f<
a.length;f++){var e=a[f];d[e.key]=e.value(b,c)}return d},{literal:!0,constant:b})}};var Gd={},yd={},Yb=c("$sce"),Ob={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},sb=b.createElement("a"),fc=Ja(a.location.href,!0);ib.$inject=["$provide"];Ab.$inject=["$locale"];Rb.$inject=["$locale"];var gc=".",Hd={yyyy:gb("FullYear",4),yy:gb("FullYear",2,0,!0),y:gb("FullYear",1),MMMM:nb("Month"),MMM:nb("Month",!0),MM:gb("Month",2,1),M:gb("Month",1,1),dd:gb("Date",2),d:gb("Date",1),HH:gb("Hours",
2),H:gb("Hours",1),hh:gb("Hours",2,-12),h:gb("Hours",1,-12),mm:gb("Minutes",2),m:gb("Minutes",1),ss:gb("Seconds",2),s:gb("Seconds",1),sss:gb("Milliseconds",3),EEEE:nb("Day"),EEE:nb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Ib(Math[0<a?"floor":"ceil"](a/60),2)+Ib(Math.abs(a%60),2))}},Id=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Jd=/^\-?\d+$/;Vb.$inject=["$locale"];var Kd=
r(Za),ld=r(Wb);Bb.$inject=["$parse"];var Ld=r({restrict:"E",compile:function(a,c){8>=Oa&&(!c.href&&!c.name&&c.$set("href",""),a.append(b.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,b){var c="[object SVGAnimatedString]"===Xb.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),cd={};d(Pc,function(a,b){if("multiple"!=a){var c=Q("ng-"+b);cd[c]=function(){return{priority:100,link:function(a,d,f){a.$watch(f[c],function(a){f.$set(b,
!!a)})}}}}});d(["src","srcset","href"],function(a){var b=Q("ng-"+a);cd[b]=function(){return{priority:99,link:function(c,d,f){var e=a,j=a;"href"===a&&"[object SVGAnimatedString]"===Xb.call(d.prop("href"))&&(j="xlinkHref",f.$attr[j]="xlink:href",e=null);f.$observe(b,function(b){b?(f.$set(j,b),Oa&&e&&d.prop(e,f[j])):"href"===a&&f.$set(j,null)})}}}});var Ic={$addControl:m,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m};Sb.$inject=["$element","$attrs","$scope","$animate"];var dd=function(a){return["$timeout",
function(b){return{name:"form",restrict:a?"EAC":"E",controller:Sb,compile:function(){return{pre:function(a,c,d,f){if(!d.action){var e=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};ub(c[0],"submit",e);c.on("$destroy",function(){b(function(){yb(c[0],"submit",e)},0,!1)})}var j=c.parent().controller("form"),h=d.name||d.ngForm;h&&bc(a,h,f,h);if(j)c.on("$destroy",function(){j.$removeControl(f);h&&bc(a,h,g,h);k(f,Ic)})}}}}}]},Vc=dd(),md=dd(!0),nd=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
Rd=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,sd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,td={text:sc,number:function(a,b,c,d,f,e){sc(a,b,c,d,f,e);d.$parsers.push(function(a){var b=d.$isEmpty(a);if(b||sd.test(a))return d.$setValidity("number",!0),""===a?null:b?a:parseFloat(a);d.$setValidity("number",!1);return g});var j=Sc,h=d.$$validityState;A(h)&&(d.$$hasNativeValidators=!0,d.$parsers.push(function(a){if(!d.$error.number&&!Nc(h,null)&&Nc(h,j))d.$setValidity("number",
!1);else return a}));d.$formatters.push(function(a){return d.$isEmpty(a)?"":""+a});c.min&&(a=function(a){var b=parseFloat(c.min);return Xa(d,"min",d.$isEmpty(a)||a>=b,a)},d.$parsers.push(a),d.$formatters.push(a));c.max&&(a=function(a){var b=parseFloat(c.max);return Xa(d,"max",d.$isEmpty(a)||a<=b,a)},d.$parsers.push(a),d.$formatters.push(a));d.$formatters.push(function(a){return Xa(d,"number",d.$isEmpty(a)||z(a),a)})},url:function(a,b,c,d,f,e){sc(a,b,c,d,f,e);a=function(a){return Xa(d,"url",d.$isEmpty(a)||
nd.test(a),a)};d.$formatters.push(a);d.$parsers.push(a)},email:function(a,b,c,d,f,e){sc(a,b,c,d,f,e);a=function(a){return Xa(d,"email",d.$isEmpty(a)||Rd.test(a),a)};d.$formatters.push(a);d.$parsers.push(a)},radio:function(a,b,c,d){s(c.name)&&b.attr("name",j());b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})});d.$render=function(){b[0].checked=c.value==d.$viewValue};c.$observe("value",d.$render)},checkbox:function(a,b,c,d){var f=c.ngTrueValue,e=c.ngFalseValue;w(f)||
(f=!0);w(e)||(e=!1);b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})});d.$render=function(){b[0].checked=d.$viewValue};d.$isEmpty=function(a){return a!==f};d.$formatters.push(function(a){return a===f});d.$parsers.push(function(a){return a?f:e})},hidden:m,button:m,submit:m,reset:m,file:m},Sc=["badInput"],ud=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,f,e){e&&(td[Za(f.type)]||td.text)(c,d,f,e,b,a)}}}],$b="ng-valid",xc="ng-invalid",
yc="ng-pristine",zc="ng-dirty",pc=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,b,f,e,j,h){function u(a,b){b=b?"-"+X(b,"-"):"";h.removeClass(e,(a?xc:$b)+b);h.addClass(e,(a?$b:xc)+b)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=f.name;var k=j(f.ngModel),g=k.assign;if(!g)throw c("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",
f.ngModel,ea(e));this.$render=m;this.$isEmpty=function(a){return s(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||Ic,C=0,n=this.$error={};e.addClass(yc);u(!0);this.$setValidity=function(a,b){n[a]!==!b&&(b?(n[a]&&C--,C||(u(!0),this.$valid=!0,this.$invalid=!1)):(u(!1),this.$invalid=!0,this.$valid=!1,C++),n[a]=!b,u(b,a),l.$setValidity(a,b,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=!0;h.removeClass(e,zc);h.addClass(e,yc)};this.$setViewValue=function(c){this.$viewValue=
c;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,h.removeClass(e,yc),h.addClass(e,zc),l.$setDirty());d(this.$parsers,function(a){c=a(c)});this.$modelValue!==c&&(this.$modelValue=c,g(a,c),d(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var p=this;a.$watch(function(){var b=k(a);if(p.$modelValue!==b){var c=p.$formatters,d=c.length;for(p.$modelValue=b;d--;)b=c[d](b);p.$viewValue!==b&&(p.$viewValue=b,p.$render())}return b})}],Tc=function(){return{require:["ngModel","^?form"],controller:pc,
link:function(a,b,c,d){var f=d[0],e=d[1]||Ic;e.$addControl(f);a.$on("$destroy",function(){e.$removeControl(f)})}}},Od=r({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),vd=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var f=function(a){if(c.required&&d.$isEmpty(a))d.$setValidity("required",!1);else return d.$setValidity("required",!0),a};d.$formatters.push(f);d.$parsers.unshift(f);c.$observe("required",function(){f(d.$viewValue)})}}}},
Pd=function(){return{require:"ngModel",link:function(a,b,c,f){var e=(a=/\/(.*)\//.exec(c.ngList))&&RegExp(a[1])||c.ngList||",";f.$parsers.push(function(a){if(!s(a)){var b=[];a&&d(a.split(e),function(a){a&&b.push(Ga(a))});return b}});f.$formatters.push(function(a){return ga(a)?a.join(", "):g});f.$isEmpty=function(a){return!a||!a.length}}}},Lc=/^(true|false|\d+)$/,Ac=function(){return{priority:100,compile:function(a,b){return Lc.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,
b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},wd=fb({compile:function(a){a.addClass("ng-binding");return function(a,b,c){b.data("$binding",c.ngBind);a.$watch(c.ngBind,function(a){b.text(a==g?"":a)})}}}),Td=["$interpolate",function(a){return function(b,c,d){b=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",b);d.$observe("ngBindTemplate",function(a){c.text(a)})}}],Ud=["$sce","$parse",function(a,b){return{compile:function(c){c.addClass("ng-binding");return function(c,
d,f){d.data("$binding",f.ngBindHtml);var e=b(f.ngBindHtml);c.$watch(function(){return(e(c)||"").toString()},function(){d.html(a.getTrustedHtml(e(c))||"")})}}}}],Vd=Ec("",!0),Wd=Ec("Odd",0),xd=Ec("Even",1),Xd=fb({compile:function(a,b){b.$set("ngCloak",g);a.removeClass("ng-cloak")}}),Yd=[function(){return{scope:!0,controller:"@",priority:500}}],Qd={},Zd={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Q("ng-"+a);Qd[b]=["$parse","$rootScope",function(c,d){return{compile:function(f,e){var j=c(e[b],!0);return function(b,c){c.on(a,function(c){var f=function(){j(b,{$event:c})};Zd[a]&&d.$$phase?b.$evalAsync(f):b.$apply(f)})}}}}]});var $d=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,f,e,j){var h,u,k;c.$watch(f.ngIf,function(e){Z(e)?u||(u=c.$new(),j(u,function(c){c[c.length++]=b.createComment(" end ngIf: "+f.ngIf+
" ");h={clone:c};a.enter(c,d.parent(),d)})):(k&&(k.remove(),k=null),u&&(u.$destroy(),u=null),h&&(k=Ca(h.clone),a.leave(k,function(){k=null}),h=null))})}}}],de=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,b,c,d,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:C.noop,compile:function(e,j){var h=j.ngInclude||j.src,u=j.onload||"",k=j.autoscroll;return function(e,j,g,l,C){var m=0,n,p,fa,r=function(){p&&(p.remove(),p=null);n&&(n.$destroy(),n=null);
fa&&(d.leave(fa,function(){p=null}),p=fa,fa=null)};e.$watch(f.parseAsResourceUrl(h),function(f){var h=function(){v(k)&&(!k||e.$eval(k))&&c()},g=++m;f?(a.get(f,{cache:b}).success(function(a){if(g===m){var b=e.$new();l.template=a;a=C(b,function(a){r();d.enter(a,null,j,h)});n=b;fa=a;n.$emit("$includeContentLoaded");e.$eval(u)}}).error(function(){g===m&&r()}),e.$emit("$includeContentRequested")):(r(),l.template=null)})}}}}],ee=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(b,c,d,f){c.html(f.template);a(c.contents())(b)}}}],fe=fb({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),ge=fb({terminal:!0,priority:1E3}),ae=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(f,e,j){var h=j.count,u=j.$attr.when&&e.attr(j.$attr.when),k=j.offset||0,g=f.$eval(u)||{},l={},C=b.startSymbol(),m=b.endSymbol(),n=/^when(Minus)?(.+)$/;d(j,function(a,b){n.test(b)&&(g[Za(b.replace("when","").replace("Minus",
"-"))]=e.attr(j.$attr[b]))});d(g,function(a,d){l[d]=b(a.replace(c,C+h+"-"+k+m))});f.$watch(function(){var b=parseFloat(f.$eval(h));if(isNaN(b))return"";b in g||(b=a.pluralCat(b-k));return l[b](f,e,!0)},function(a){e.text(a)})}}}],zd=["$parse","$animate",function(a,f){var j=c("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(c,h,u,k,g){var l=u.ngRepeat,C=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),m,n,p,fa,r,da,s={$id:ra};if(!C)throw j("iexp",
"Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);u=C[1];k=C[2];(C=C[3])?(m=a(C),n=function(a,b,d){da&&(s[da]=a);s[r]=b;s.$index=d;return m(c,s)}):(p=function(a,b){return ra(b)},fa=function(a){return a});C=u.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!C)throw j("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",u);r=C[3]||C[1];da=C[2];var ba={};c.$watchCollection(k,function(a){var u,
k,C=h[0],m,s={},v,ga,A,z,w,q,B,t=[];if(e(a))q=a,w=n||p;else{w=n||fa;q=[];for(A in a)a.hasOwnProperty(A)&&"$"!=A.charAt(0)&&q.push(A);q.sort()}v=q.length;k=t.length=q.length;for(u=0;u<k;u++)if(A=a===q?u:q[u],z=a[A],m=w(A,z,u),Y(m,"`track by` id"),ba.hasOwnProperty(m))B=ba[m],delete ba[m],s[m]=B,t[u]=B;else{if(s.hasOwnProperty(m))throw d(t,function(a){a&&a.scope&&(ba[a.id]=a)}),j("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",
l,m,ca(z));t[u]={id:m};s[m]=!1}for(A in ba)ba.hasOwnProperty(A)&&(B=ba[A],u=Ca(B.clone),f.leave(u),d(u,function(a){a.$$NG_REMOVED=!0}),B.scope.$destroy());u=0;for(k=q.length;u<k;u++){A=a===q?u:q[u];z=a[A];B=t[u];t[u-1]&&(C=t[u-1].clone[t[u-1].clone.length-1]);if(B.scope){ga=B.scope;m=C;do m=m.nextSibling;while(m&&m.$$NG_REMOVED);B.clone[0]!=m&&f.move(Ca(B.clone),null,Da(C));C=B.clone[B.clone.length-1]}else ga=c.$new();ga[r]=z;da&&(ga[da]=A);ga.$index=u;ga.$first=0===u;ga.$last=u===v-1;ga.$middle=
!(ga.$first||ga.$last);ga.$odd=!(ga.$even=0===(u&1));B.scope||g(ga,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+l+" ");f.enter(a,null,Da(C));C=a;B.scope=ga;B.clone=a;s[B.id]=B})}ba=s})}}}],be=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[Z(b)?"removeClass":"addClass"](c,"ng-hide")})}}],ce=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[Z(b)?"addClass":"removeClass"](c,"ng-hide")})}}],he=fb(function(a,b,c){a.$watch(c.ngStyle,
function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),ie=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,f,e){var j=[],h=[],u=[],k=[];b.$watch(f.ngSwitch||f.on,function(c){var g,l;g=0;for(l=u.length;g<l;++g)u[g].remove();g=u.length=0;for(l=k.length;g<l;++g){var C=h[g];k[g].$destroy();u[g]=C;a.leave(C,function(){u.splice(g,1)})}h.length=0;k.length=0;if(j=e.cases["!"+c]||e.cases["?"])b.$eval(f.change),
d(j,function(c){var d=b.$new();k.push(d);c.transclude(d,function(b){var d=c.element;h.push(b);a.enter(b,d.parent(),d)})})})}}}],je=fb({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,f){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[];d.cases["!"+c.ngSwitchWhen].push({transclude:f,element:b})}}),ke=fb({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,f){d.cases["?"]=d.cases["?"]||[];d.cases["?"].push({transclude:f,element:b})}}),le=
fb({link:function(a,b,d,f,e){if(!e)throw c("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ea(b));e(function(a){b.empty();b.append(a)})}}),me=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"==c.type&&a.put(c.id,b[0].text)}}}],ne=c("ngOptions"),oe=r({terminal:!0}),pe=["$compile","$parse",function(a,c){var f=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
e={$setViewValue:m};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d=this,f={},j=e,h;d.databound=c.ngModel;d.init=function(a,b,c){j=a;h=c};d.addOption=function(b){Y(b,'"option value"');f[b]=!0;j.$viewValue==b&&(a.val(b),h.parent()&&h.remove())};d.removeOption=function(a){this.hasOption(a)&&(delete f[a],j.$viewValue==a&&this.renderUnknownOption(a))};d.renderUnknownOption=function(b){b="? "+ra(b)+" ?";h.val(b);a.prepend(h);a.val(b);h.prop("selected",
!0)};d.hasOption=function(a){return f.hasOwnProperty(a)};b.$on("$destroy",function(){d.renderUnknownOption=m})}],link:function(e,j,u,k){if(k[1]){var l=k[0],C=k[1],m=u.multiple;u=u.ngOptions;var n=!1,p,fa=Da(b.createElement("option")),r=Da(b.createElement("optgroup")),da=fa.clone();k=0;for(var ba=j.children(),A=ba.length;k<A;k++)if(""===ba[k].value){p=n=ba.eq(k);break}l.init(C,n,da);m&&(C.$isEmpty=function(a){return!a||0===a.length});if(u){var z=function(){var a={"":[]},b=[""],c,d,f,u,k;f=C.$modelValue;
u=Ga(e)||[];var g=B?h(u):u,p,da,s;da={};s=!1;if(m)if(d=C.$modelValue,D&&ga(d)){s=new Fa([]);c={};for(k=0;k<d.length;k++)c[q]=d[k],s.put(D(e,c),d[k])}else s=new Fa(d);k=s;var ba,A;for(s=0;p=g.length,s<p;s++){d=s;if(B){d=g[s];if("$"===d.charAt(0))continue;da[B]=d}da[q]=u[d];c=t(e,da)||"";if(!(d=a[c]))d=a[c]=[],b.push(c);m?c=v(k.remove(D?D(e,da):y(e,da))):(D?(c={},c[q]=f,c=D(e,c)===D(e,da)):c=f===y(e,da),k=k||c);ba=w(e,da);ba=v(ba)?ba:"";d.push({id:D?D(e,da):B?g[s]:s,label:ba,selected:c})}m||(n||null===
f?a[""].unshift({id:"",label:"",selected:!k}):k||a[""].unshift({id:"?",label:"",selected:!0}));da=0;for(g=b.length;da<g;da++){c=b[da];d=a[c];Pa.length<=da?(f={element:r.clone().attr("label",c),label:d.label},u=[f],Pa.push(u),j.append(f.element)):(u=Pa[da],f=u[0],f.label!=c&&f.element.attr("label",f.label=c));ba=null;s=0;for(p=d.length;s<p;s++)c=d[s],(k=u[s+1])?(ba=k.element,k.label!==c.label&&(ba.text(k.label=c.label),ba.prop("label",k.label)),k.id!==c.id&&ba.val(k.id=c.id),ba[0].selected!==c.selected&&
(ba.prop("selected",k.selected=c.selected),Oa&&ba.prop("selected",k.selected))):(""===c.id&&n?A=n:(A=fa.clone()).val(c.id).prop("selected",c.selected).attr("selected",c.selected).prop("label",c.label).text(c.label),u.push({element:A,label:c.label,id:c.id,selected:c.selected}),l.addOption(c.label,A),ba?ba.after(A):f.element.append(A),ba=A);for(s++;u.length>s;)c=u.pop(),l.removeOption(c.label),c.element.remove()}for(;Pa.length>da;)Pa.pop()[0].element.remove()};if(!(k=u.match(f)))throw ne("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",
u,ea(j));var w=c(k[2]||k[1]),q=k[4]||k[6],B=k[5],t=c(k[3]||""),y=c(k[2]?k[1]:q),Ga=c(k[7]),D=k[8]?c(k[8]):null,Pa=[[{element:j,label:""}]];n&&(a(n)(e),n.removeClass("ng-scope"),n.remove());j.empty();j.on("change",function(){e.$apply(function(){var a,b=Ga(e)||[],c={},d,f,u,h,k,l,n;if(m){f=[];h=0;for(l=Pa.length;h<l;h++){a=Pa[h];u=1;for(k=a.length;u<k;u++)if((d=a[u].element)[0].selected){d=d.val();B&&(c[B]=d);if(D)for(n=0;n<b.length&&!(c[q]=b[n],D(e,c)==d);n++);else c[q]=b[d];f.push(y(e,c))}}}else if(d=
j.val(),"?"==d)f=g;else if(""===d)f=null;else if(D)for(n=0;n<b.length;n++){if(c[q]=b[n],D(e,c)==d){f=y(e,c);break}}else c[q]=b[d],B&&(c[B]=d),f=y(e,c);C.$setViewValue(f);z()})});C.$render=z;e.$watchCollection(Ga,z);e.$watchCollection(function(){var a={},b=Ga(e);if(b){for(var c=Array(b.length),d=0,f=b.length;d<f;d++)a[q]=b[d],c[d]=w(e,a);return c}},z);m&&e.$watchCollection(function(){return C.$modelValue},z)}else if(m){var Cb;C.$render=function(){var a=new Fa(C.$viewValue);d(j.find("option"),function(b){b.selected=
v(a.get(b.value))})};e.$watch(function(){P(Cb,C.$viewValue)||(Cb=N(C.$viewValue),C.$render())});j.on("change",function(){e.$apply(function(){var a=[];d(j.find("option"),function(b){b.selected&&a.push(b.value)});C.$setViewValue(a)})})}else C.$render=function(){var a=C.$viewValue;l.hasOption(a)?(da.parent()&&da.remove(),j.val(a),""===a&&p.prop("selected",!0)):s(a)&&p?j.val(""):l.renderUnknownOption(a)},j.on("change",function(){e.$apply(function(){da.parent()&&da.remove();C.$setViewValue(j.val())})})}}}}],
qe=["$interpolate",function(a){var b={addOption:m,removeOption:m};return{restrict:"E",priority:100,compile:function(c,d){if(s(d.value)){var f=a(c.text(),!0);f||d.$set("value",c.text())}return function(a,c,d){var e=c.parent(),j=e.data("$selectController")||e.parent().data("$selectController");j&&j.databound?c.prop("selected",!1):j=b;f?a.$watch(f,function(a,b){d.$set("value",a);a!==b&&j.removeOption(b);j.addOption(a)}):j.addOption(d.value);c.on("$destroy",function(){j.removeOption(d.value)})}}}}],re=
r({restrict:"E",terminal:!0});if(a.angular.bootstrap)console.log("WARNING: Tried to load angular more than once.");else{(jb=a.jQuery)&&jb.fn.on?(Da=jb,k(jb.fn,{scope:vc.scope,isolateScope:vc.isolateScope,controller:vc.controller,injector:vc.injector,inheritedData:vc.inheritedData}),Va("remove",!0,!0,!1),Va("empty",!1,!1,!1),Va("html",!1,!1,!0)):Da=za;C.element=Da;k(C,{bootstrap:Ba,copy:V,extend:k,equals:P,element:Da,forEach:d,injector:aa,noop:m,bind:U,toJson:ca,fromJson:R,identity:n,isUndefined:s,
isDefined:v,isString:w,isFunction:y,isObject:A,isNumber:z,isElement:S,isArray:ga,version:lc,isDate:D,lowercase:Za,uppercase:Wb,callbacks:{counter:0},$$minErr:c,$$csp:Pa});var Sd=a,se=c("$injector"),te=c("ng"),od=Sd.angular||(Sd.angular={});od.$$minErr=od.$$minErr||c;var Md;if(!(Md=od.module)){var pd={};Md=od.module=function(a,b,c){if("hasOwnProperty"===a)throw te("badname","hasOwnProperty is not a valid {0} name","module");b&&pd.hasOwnProperty(a)&&(pd[a]=null);var d;if(!(d=pd[a])){d=function(a,b,
c){return function(){f[c||"push"]([a,b,arguments]);return u}};if(!b)throw se("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",a);var f=[],e=[],j=d("$injector","invoke"),u={_invokeQueue:f,_runBlocks:e,requires:b,name:a,provider:d("$provide","provider"),factory:d("$provide","factory"),service:d("$provide","service"),value:d("$provide","value"),constant:d("$provide",
"constant","unshift"),animation:d("$animateProvider","register"),filter:d("$filterProvider","register"),controller:d("$controllerProvider","register"),directive:d("$compileProvider","directive"),config:j,run:function(a){e.push(a);return this}};c&&j(c);d=pd[a]=u}return d}}fa=Md;try{fa("ngLocale")}catch(xe){fa("ngLocale",[]).provider("$locale",ic)}fa("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:ab});a.provider("$compile",pa).directive({a:Ld,input:ud,textarea:ud,form:Vc,script:me,
select:pe,style:re,option:qe,ngBind:wd,ngBindHtml:Ud,ngBindTemplate:Td,ngClass:Vd,ngClassEven:xd,ngClassOdd:Wd,ngCloak:Xd,ngController:Yd,ngForm:md,ngHide:ce,ngIf:$d,ngInclude:de,ngInit:fe,ngNonBindable:ge,ngPluralize:ae,ngRepeat:zd,ngShow:be,ngStyle:he,ngSwitch:ie,ngSwitchWhen:je,ngSwitchDefault:ke,ngOptions:oe,ngTransclude:le,ngModel:Tc,ngList:Pd,ngChange:Od,required:vd,ngRequired:vd,ngValue:Ac}).directive({ngInclude:ee}).directive(cd).directive(Qd);a.provider({$anchorScroll:L,$animate:vb,$browser:Ea,
$cacheFactory:Ma,$controller:ha,$document:kb,$exceptionHandler:qb,$filter:ib,$interpolate:lb,$interval:zb,$http:eb,$httpBackend:ac,$location:tc,$log:Jb,$parse:Ua,$rootScope:Qb,$q:Cc,$sce:xb,$sceDelegate:Dc,$sniffer:pb,$templateCache:ya,$timeout:cc,$window:Hb,$$rAF:Ya,$$asyncCallback:wa})}]);Da(b).ready(function(){var a=b,c=function(a){a&&f.push(a)},f=[a],e,j,u=["ng:app","ng-app","x-ng-app","data-ng-app"],h=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;d(u,function(f){u[f]=!0;c(b.getElementById(f));f=f.replace(":",
"\\:");a.querySelectorAll&&(d(a.querySelectorAll("."+f),c),d(a.querySelectorAll("."+f+"\\:"),c),d(a.querySelectorAll("["+f+"]"),c))});d(f,function(a){if(!e){var b=h.exec(" "+a.className+" ");b?(e=a,j=(b[2]||"").replace(/\s+/g,",")):d(a.attributes,function(b){!e&&u[b.name]&&(e=a,j=b.value)})}});e&&Ba(e,j?[j]:[])})}})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
define("angular",function(){});define("fang",["eventBus","component","backbone","mustache","angular"],function(a){var b=window.fang=window.fang||{};b.EventBus=a;b.fangModule=angular.module("fangModule",[]);b.fangModule.factory("EventbusFactory",function(){return a});return b});
define("util/pg2",[],function(){return{posnode:function(){$.ajax({url:"/ftgw/dpcs/positions/getcontenturl",dataType:"text"}).done(function(a){console.log(a);window.envMap.NG_PG_CONTENT_URL=a}).fail(function(a,b){console.log(b)})},lastpgused:function(){var a=JSON.stringify({state:[{path:"/user/oce/positions/grid",entry:[{key:"gridlastused"}]}]}),b=encodeURIComponent("/state");$.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,data:a,contentType:"application/json",dataType:"json",type:"POST",
xhrFields:{withCredentials:!0}}).done(function(a){console.log(a);window.envMap.LAST_PG_USED=0<a.length?a[0].entry[0].value:"pg1"}).fail(function(){window.envMap.LAST_PG_USED="pg1"})},getTOU:function(){var a=JSON.stringify({state:[{path:"/user/oce/positions/grid",entry:[{key:"touagreed"}]}]}),b=encodeURIComponent("/state");$.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,data:a,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0}}).done(function(a){window.envMap.TOU_AGREED=
0<a.length?a[0].entry[0].value:"N"}).fail(function(){window.envMap.TOU_AGREED="N"})},saveTOU:function(){var a=JSON.stringify({state:[{path:"/user/oce/positions/grid",entry:[{key:"touagreed",value:"Y"}]}]}),b=encodeURIComponent("/state/save");$.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,data:a,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0}}).done(function(){window.envMap.TOU_AGREED="Y"}).fail(function(){})}}});
define("oceContainer",["fang","util/pg2"],function(){var a=angular.module("ocecontainer",["fangModule"]);"Y"===POSITIONS_GRID_IND?require([envMap.WWW_CDN_URL+envMap.NG_PG_CONTENT_URL+"/js/positions-app.js"],function(){a.controller("topController",[function(){}])}):a.controller("topController",[function(){}]);return a});
define("util/eventhub-backbone",["backbone","underscore"],function(a,b){var g=function(){this._eventHub=b.extend({},a.Events)};g.prototype.publishEvent=function(a,b){this._eventHub.trigger(a,b)};g.prototype.subscribeEvent=function(a,b,c){this._eventHub.on(a,b,c);return{subject:a,callback:b,context:c}};g.prototype.unsubscribeEvent=function(a){a=a||{};this._eventHub.off(a.subject,a.callback,a.context)};var c=null;g.getInstance=function(){null==c&&(c=new g);return c};return g.getInstance()});
define("util/constants",[],function(){return{AJAX:{GET:"GET",POST:"POST"},EVENTS:{PAGE_LOADED:"page_loaded",APPLICATION_START:"application_start",APPLICATION_SESSION_TIMEOUT:"application_session_timeout",ADVISOR_NOACCESS:"adviosr_noaccess",ACCT_INIT:"ACCT_INIT",SELECTED_ACCT_CHANGE:"SELECTED_ACCT_CHANGE",ACCT_EDITING:"ACCT_EDITING",ACCT_EDITING_COMPLETE:"ACCT_EDITING_COMPLETE",SELECTED_MultipleACCT_CHANGE:"SELECTED_MultipleACCT_CHANGE",SELECTED_AN_ACCOUNT_FOR_MOBILE:"SELECTED_AN_ACCOUNT_FOR_MOBILE",
DOCUMENT_ON_CLICK:"DOCUMENT_ON_CLICK",REVEAL_ACCOUNT_SELECTOR:"REVEAL_ACCOUNT_SELECTOR",ACCOUNT_SELECTOR_TOGGLE:"ACCOUNT_SELECTOR_TOGGLE",EXIT_PREVIEW_POPUP_OPEN:"EXIT_PREVIEW_POP_OPEN",FEEDBACK_POPUP_OPEN:"FEEDBACK_POPUP_OPEN",POPUP_CLOSE:"POPUP_CLOSE",TEST_VPN:"TEST_VPN",QUICK_TRADE:"QUICK_TRADE",CARDS_LAYOUT:"CARDS_LAYOUT",MESSAGE_FIRST_LOAD_OPEN:"MESSAGE_FIRST_LOAD_OPEN",ACCOUNT_SLIDE_IN:"ACCOUNT_SLIDE_IN"},URLS:{MYRESEARCH_DRAWER_ADDITIONAL_IMP_INFO:"/myresearch/xhr/additionalImpInfo.jhtml"},
NUMBERS:{DC_I_WANT_CARD_DEFAULT_LINKS:6}}});
define("models/ajax-object-model",["jquery","backbone"],function(a,b){var g=[],c;return new (b.Model.extend({initialize:function(){this.set("pending-ajax-obj-array",g);this.set("isLastReqCompleted",!0)},getAjaxObjArray:function(){return this.get("pending-ajax-obj-array")},addAjaxObjArray:function(b,d){if(!d){g.push(b);this.set("isLastReqCompleted",!1);var h=this,f=a.Deferred(),j=a.when.apply(a,g);j.then(f.resolve,f.reject,f.notify);j=[j].concat([f]);a.when.apply(a,j).then(function(){h.set("isLastReqCompleted",
!0)},function(){h.set("isLastReqCompleted",!1)});c&&1<g.length&&c.reject();c=f;b.always(function(b){b=a.inArray(b,g);g.splice(b,1)})}},clearAjaxObjArray:function(){g=[];this.set("pending-ajax-obj-array",g)},abortPendingAjaxObj:function(){0<this.getAjaxObjArray().length&&(a(this.getAjaxObjArray()).each(function(a,b){b.abort()}),this.clearAjaxObjArray())}}))});
define("tasks/base-task",["jquery","backbone","models/ajax-object-model"],function(a,b,g){var c=function(b){this.options=b||{};this.data=this.options.data||{};this.context=b.context;this.canLoading=!0===b.isLoading&&null!=this.context&&null!=this.context.showLoading;this.$=a;this.onPreExecute=b.onPreExecute;this.onProgress=b.onProgress;this.onSuccess=b.onSuccess;this.onError=b.onError;this.onComplete=b.onComplete;this.initialize(this.options)};c.prototype={initialize:function(){},buildParams:function(a){return a},
run:function(){var b=this;b.onPreExecute&&b.onPreExecute.call(b.context);b.onProgress&&b.onProgress.call(b.context);b.canLoading&&b.context.showLoading();var c={url:b.url,dataType:b.dataType||"html",type:b.type||"GET",data:b.buildParams(b.data),xhrFields:{withCredentials:!0},success:function(a){b.onSuccess&&b.onSuccess.call(b.context,a)},error:function(a,c,d){b.onError&&b.onError.call(b.context,a,c,d)},complete:function(){b.canLoading&&b.context.hideLoading();b.onComplete&&b.onComplete.call(b.context)}};
b.type&&("POST"===b.type.toUpperCase()&&b.contentType)&&(c.contentType=b.contentType);c=a.ajax(c);b.$ajaxObj=c;g.addAjaxObjArray(c,b.isNotCancelable)},stop:function(){self.$ajaxObj&&"pending"===self.$ajaxObj.state()&&self.$ajaxObj.abort()}};c.extend=b.Model.extend;return c});
define("util/formats",[],function(){function a(a){a=a||{};var g=a.price-0;if(isNaN(g))return a.defaultValue||a.price;var g=isNaN(a.digits)?1>Math.abs(g)?g.toFixed(4):g.toFixed(2):g.toFixed(a.digits),c=0>g?"-":"";if(a.addCommas){c+=a.prefix||"";a=Math.abs(g).toFixed(a.digits);x=(a+"").split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return c+(x1+x2)}return c+(a.prefix||"")+Math.abs(g)}return{formatPrice:a,truncateFormattedPrice:function(b){var g=
a(b);4==b.digits&&(b=g.substr(g.length-1),"0"==b&&(g=g.slice(0,-1),b=g.substr(g.length-1),"0"==b&&(g=g.slice(0,-1))));return g},getDefaultPriceFormatOptions:function(a){return{price:a,prefix:"$",addCommas:!0,digits:2}}}});
define("models/account-context-model",["jquery","backbone","underscore","util/formats","util/eventhub-backbone"],function(a,b,g,c,e){function d(b){b&&a.extend(this,b)}function h(a){var b=a.data("total-balance"),c=a.data("today-change-value")||"",d=p(b),f=p(c),e=d-f;return{acctName:"Portfolio",formattedBalance:b,totalTodayChangeValue:c,totalTodayChangePercent:a.data("today-change-pct-value")||"",changePct:a.data("ytd-change-pct"),changePctVal:a.data("ytd-change-pct-value"),rorVal:a.data("ror-value").replace("+",
"").replace("%",""),asOfTime:a.data("ror-asoftime"),fidelityBalance:a.data("fidelity-balance"),nonFidelityBalance:a.data("non-fidelity-balance"),hasFullViewAccount:a.data("has-fullviewaccount"),hasNQSDBAndNQDCAccount:a.data("has-nqsdb-nqdcaccount"),totalAcctVal:d,totalAcctValChg:f,originalTotalAcctValue:e}}function f(a){return Math.floor(100*a+1E-5)/100}function j(b){var c=b.data("group-id"),d=b.data("group-total"),f=b.data("group-total"),d=p(d),e=a.trim(b.find(".js-group-name").text());b=b.find(".js-account");
var j=[];a.each(b,function(b,d){j.push(k(a(d),c))});return{groupId:c,groupTotal:f,totalAcctVal:d,acctName:e,accounts:j}}function k(b,e){var j=b.data("acct-type")||"Unknown",h=b.data("change-pct-value"),k="";null!=h&&(k=a.trim(h).replace("+","").replace("%",""));-1!=j.indexOf("FILI Account")&&(h=b.data("acct-perfchange-class"));var g="",l="",m="";b.hasClass("js-fullview-account")?(g=b.data("full-view-siteid"),m=b.find(".account-selector--account-number").text(),l=a.trim(b.find(".js-fullview-asOfTime").text())):
g=b.data("acct-number");var B=b.data("acct-url");"Stock Plans"==j&&null!=B&&(B=B.substr(B.indexOf("?")+1),a.each(B.split("&"),function(a,b){a=b.indexOf("ACCOUNT=");0===a&&(g=b.substring(8))}));var B=b.find(".js-today-change-value").data("today-change-value")||"",I=p(B),S=b.data("dc-history-entitled"),J="",J=b.hasClass("js-fullview-account")?m:b.data("regisition-type"),O=b.data("acct-balance")-0,V=b.data("acct-vested-balance"),N=b.data("dc-master-administrator-ind"),P=a.trim(b.find(".js-acct-balance").html()),
U=b.data("dc-navigation-links"),U=U?(U+"").split(","):[],W=b.data("dc-brokerage-link-accounts"),W=W?(W+"").split(","):[],ca=n.get("dcNavigationInfo")||[],U=a.map(U,function(a){return ca[a]});P||(P=c.formatPrice(c.getDefaultPriceFormatOptions(f(O))));return new d({groupId:e,acctName:b.data("acct-name"),totalBalance:O,vestedBalance:V,dcMasterAdministratorInd:N,serviceIndicators:b.data("service-indicators")||"",accountAsOfDate:b.data("acct-as-of-date")||"",otherProviderBalance:otherProviderBalances[g]||
[],recentMarketVal:b.data("most-recent-value")-0,acctNum:g,oltxType:b.data("oltx-type"),isPWM:b.data("oltx-is-pwm"),isDMA:b.data("is-dma")||"PPA"===b.data("pas-product-name"),isPPAS:b.data("is-ppas"),isIWSAcct:b.data("is-iws-acct"),acctType:j,asOfTime:a.trim(b.data("js-performance-asoftime")),subAcctType:b.data("sub-acct-type"),urlName:b.data("acct-url"),formattedBalance:P,viewIncomeValueLink:b.find(".account-selector--viewIncomeValueLink a").attr("href"),todayChangePctVal:b.data("acct-perfchange-class"),
todayChangePct:h,totalAcctValChg:I,accountTodayChangeValue:B,accountTodayChangePercent:b.find(".js-today-change-pct-value").data("today-change-pct-value")||"",rorVal:k,fullviewSiteId:b.data("full-view-siteid"),isFullViewAccount:b.hasClass("js-fullview-account"),isCreditCardAccount:b.hasClass("js-creditcard-account"),registrationType:J,registrationCode:b.data("regisition-code"),dcHistoryEntitled:S,isFavorAccount:b.data("favoraccount"),isFidelityAccount:b.data("fidelityaccount"),authInd:b.data("acct-auth-ind"),
systemOfRecord:b.data("system-of-record")||"",internalProdCode:b.data("internal-prod-code")||"",pg2AcctType:b.data("pg2-acct-type")||"",pg2AcctSubType:b.data("pg2-acct-sub-type")||"",pg2PosTabInd:b.data("pg2-pos-tab-ind")||"",isInInclusionList:b.data("account-in-inclusion-list")||!1,isDCEnrollableAcct:b.data("dc-enrollable-acct")||!1,dcPlanEntryAcknowledgementRequired:b.data("dc-planentry-acknowledgement-required")||!1,dcQDIAElectionResponseRequired:b.data("dc-qdia-electioin-response-required")||
!1,fvAsOfTime:l,fvDisplayAccNum:m,dcNavigationLinks:U,dcBrokerageLinkAccounts:W,acctTypeCode:b.data("acct-type-code")||"",subAcctTypeCode:b.data("sub-acct-type-code")||"",hard2Borrow:b.data("hard2borrow")||"",clientId:b.data("dc-client-id")||"",planId:b.data("dc-plan-id")||"",optionLevel:b.data("option-level"),positionCount:b.data("position-count"),isSMA:b.data("is-sma"),pasProductName:b.data("pas-product-name"),isPPA:"PPA"===b.data("pas-product-name")})}function l(b){var c=[];a.each(b,function(b,
d){a.merge(c,d.accounts)});return c}function p(a){var b=0;a&&(a=(""+a).replace(/[,$]/g,"")-0,isNaN(a)||(b=a));return b}function m(a){var b="";a-=0;isNaN(a)||(0<a&&(b="+"),b+=a.toFixed(2)+"%");return b}d.prototype.renderLink=function(b){return b&&a.extend({},b,{linkUrl:(b.linkUrl||"").replace("__ACCOUNT__",this.acctNum).replace("__CLIENT__",this.clientId)})};d.prototype.getLink=function(b){if(5===this.oltxType){var c=a(this.dcNavigationLinks).filter(function(a,c){return c.linkId===b}).get();if(c&&
0<c.length)return this.renderLink(c[0])}else return null};d.prototype.getLinks=function(){var b=this;return 5===this.oltxType?a(this.dcNavigationLinks||[]).map(function(a,c){return b.renderLink(c)}).get():[]};var n=new (b.Model.extend({buildAccountInfo:function(b){var c=b.find(".js-portfolio"),d=b.find(".js-group");this.set("perfHidden",c.data("performance-hidden"));this.set("isFidEmployee",c.data("is-fid-employee"));this.set("hasFiliAcctsOnly",c.data("has-fili-accts-only"));this.set("portfolio",
h(c));var f=[];a.each(d,function(b,c){f.push(j(a(c)))});this.set("groups",f);this.set("accounts",l(f));this.set("dcNavigationInfo",b.find("#dcIWantToNavigationLinks .js-dc-i-want-to-navigation-link").map(function(b,c){var d=a(c),f=a.trim(d.text());f&&(f=f.replace(/client=\d+($|\&)/g,"client=__CLIENT__$1"));return{linkUrl:f,linkId:d.data("link-id"),linkDisplayName:d.data("link-display-name")}}))},buildSelectedAccountInfo:function(b){var c=null;b.hasClass("js-portfolio")?(c={portfolio:h(b)},c.accounts=
this.getAllAccounts()):b.hasClass("js-group")?c=j(b):b.hasClass("js-account")?(c="",c=b.hasClass("js-fullview-account")?b.data("full-view-siteid"):b.data("acct-number"),c={accounts:[this.getAccount(c)]}):c={};this.set("selectedAccounts",c);window.toggleMap&&window.toggleMap.pgxEmoney&&(b=a("div[data-external-customer-id]"))&&(b.data()&&""!==b.data().externalCustomerId)&&this.set("externalCustId",b.data().externalCustomerId);return c},isFidEmployee:function(){return this.get("isFidEmployee")},isPerformanceHidden:function(){return this.get("perfHidden")},
isFullViewEntitled:function(){return a(".js-footer-entitlement-info").data("fv-entitlement")},getPortfolio:function(){return this.get("portfolio")},getGroups:function(){return this.get("groups")},getGroup:function(b){var c=null,d=this.get("groups");a.each(d,function(a,d){if(d.groupId==b)return c=d,!1});return c},getAllAccounts:function(){return this.get("accounts")},getAccount:function(b){var c=null,d=this.getAllAccounts();a.each(d,function(a,d){if(d.acctNum==b)return c=d,!1});return c},getAccountsByGroup:function(a){return(this.getGroup(a)||
{}).accounts},getSelectedAccountInfo:function(){return this.get("selectedAccounts")},getCreditCardAccounts:function(){var b=[],c=this.getAllAccounts();a.each(c,function(a,c){c.isCreditCardAccount&&b.push(c)});return b},getLoanAccounts:function(){var b=[],c=this.getAllAccounts();a.each(c,function(a,c){(24===c.oltxType||25===c.oltxType)&&b.push(c)});return b},getFullViewAccounts:function(){var b=[],c=this.getAllAccounts();a.each(c,function(a,c){c.isFullViewAccount&&b.push(c)});return b},getDCPlanId:function(){var b=
[],c=this.getAllAccounts();a.each(c,function(c,d){""!=d.planId&&void 0!==d.planId&&a("."+d.planId).attr("data-acct-as-of-date")&&b.push(a("."+d.planId).attr("data-acct-as-of-date"))});return b},setAccountMiniContext:function(a){this.set("AMC",a)},updateAccountBalances:function(b){var d={},j=this;b&&a.each(b,function(a,b){var h=j.getAccount(b.acctNum);if(h){var k=h.groupId;if("CC"!=k&&"FV"!=k){h.totalBalance=h.totalAcctValChg=b.currentVal-0;var g=c.formatPrice(c.getDefaultPriceFormatOptions(f(h.totalBalance)));
h.formattedBalance=g;h.totalAcctValChg=p(b.todayChange);h.accountTodayChangeValue=c.formatPrice(c.getDefaultPriceFormatOptions(h.totalAcctValChg));var g=b.todayChangePct,l=0;g&&(g=(""+g).replace(/[,%]/g,"")-0,isNaN(g)||(l=g));h.totalAcctValChgPct=l;h.accountTodayChangePercent=m(h.totalAcctValChgPct);h.recentMarketVal=b.recentMarketVal-0;e.publishEvent("UPDATE_ACCOUNT_FROM_ACCOUNT_CONTEXT",h);d["_"+k]=k}}});a.each(d,function(b,d){var h=j.getGroup(d),k=j.getAccountsByGroup(d),g=0;a.each(k,function(a,
b){isNaN(b.totalBalance)||(g="Credit Card Account"==b.acctType&&0>b.totalBalance||4===b.oltxType||3===b.oltxType?g+0:g+b.totalBalance)});h.totalAcctVal=g;h.groupTotal=c.formatPrice(c.getDefaultPriceFormatOptions(f(h.totalAcctVal)));e.publishEvent("UPDATE_GROUP_FROM_ACCOUNT_CONTEXT",h)});b=this.getPortfolio();var h=this.getGroups(),k=0;a.each(h,function(a,b){"CC"!=b.groupId&&("LO"!=b.groupId&&"RE"!=b.groupId&&"CG"!=b.groupId)&&(k+=b.totalAcctVal)});b.totalAcctVal=k;b.formattedBalance=c.formatPrice(c.getDefaultPriceFormatOptions(f(b.totalAcctVal)));
var h=this.getAllAccounts(),g=0;a.each(h,function(a,b){var c=b.totalAcctValChg-0;if(!isNaN(c)&&(0==b.oltxType||6==b.oltxType))g+=c});b.totalAcctValChg=g;var h=this.getGroups(),l=0;a.each(h,function(a,b){"CC"!=b.groupId&&("FV"!=b.groupId&&"LO"!=b.groupId&&"RE"!=b.groupId&&"CG"!=b.groupId)&&(l+=b.totalAcctVal)});b.fidelityBalance=c.formatPrice(c.getDefaultPriceFormatOptions(f(l)));var h=this.getAllAccounts(),n=0;a.each(h,function(a,b){var c=b.recentMarketVal-0;if(!isNaN(c)&&(0==b.oltxType||6==b.oltxType))n+=
c});h=(100*(b.totalAcctValChg/n)).toFixed(2);b.changePctVal=h;b.totalTodayChangeValue=c.formatPrice(c.getDefaultPriceFormatOptions(b.totalAcctValChg));b.totalTodayChangePercent=b.changePct=m(h);e.publishEvent("UPDATE_PORTFOLIO_FROM_ACCOUNT_CONTEXT",b)},hasSMAaccount:function(b){var c=!1;a.each(b,function(a,b){if("IBSMA"==b.pasProductName||"TASMA"==b.pasProductName||b.isSMA)return c=!0});return c},hasFiliAcctsOnly:function(){return this.get("hasFiliAcctsOnly")}}));return n});
define("tasks/summary-cards-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofportfolio/summaryCards",type:"POST",cardList:null,buildParams:function(a){var c="",e=this.$(a.accounts).map(function(a,b){return b.acctNum}).get();a.portfolio&&null!=a.portfolio&&(c="&ALL_ACCTS=Y&positions-mini-context="+$(".positions-mini-context").val(),$(".positions-mini-context").remove(),toggleMap.experienceConfigratorFeature&&(c+="&experience-mini-context="+experienceMiniContext,
null!=this.cardList&&(c+="&cardList="+encodeURIComponent(JSON.stringify(this.cardList))),this.options.debug&&(c+="&debug_flag="+this.options.debug)));b.isPerformanceHidden()&&(c+="&isBalanceHidden=Y");this.options.stackedCards&&(c+="&stackedCards="+this.options.stackedCards);if(0<e.length){c="ACCOUNTS="+e.join(",")+"&ACCTS="+e.join(",")+c;a=a.accounts[0];var d=$(".js-portfolio").data("employerMessagingEnabled")?"WIMessagingEnabled":"";1<e.length?d&&(c+="&SERVICE_INDICATORS="+d):1==e.length&&(5==a.oltxType&&
a.serviceIndicators)&&(c+="&SERVICE_INDICATORS="+(d?d+",":"")+a.serviceIndicators);return c}return""}})});
define("util/progressbar",["jquery"],function(a){var b=a(".feedback-content.feedback-win-trigger");a(".feedback-go-content.feedback-win-trigger");b.attr("data-href");a(".progress-bar").click(function(){return!1});return{showLoading:function(b,c,e){b=b||"";c=null!=c?c:!0;2<arguments.length&&(console.warn?console_warn("WARNING: ProgressBar no longer supports an animation time parameter for fade in or fade out.  Please update your code"):console_log("WARNING: ProgressBar no longer supports an animation time parameter for fade in or fade out.  Please update your code"));
var d=a(".progress-bar");this.fadeIn();d.find(".message-content").text(b);c?d.addClass("bordered"):d.removeClass("bordered")},hideLoading:function(){this.fadeOut()},stop:function(){clearTimeout(this.currentHandle)},fadeIn:function(){this.stop();var b=a(".progress-bar");b.show();this.currentHandle=setTimeout(function(){b.addClass("fade-in")})},fadeOut:function(){this.stop();var b=a(".progress-bar");b.removeClass("fade-in");b.hide()}}});
define("views/base-view",["backbone","util/progressbar","util/constants","require"],function(a,b,g,c){return a.View.extend({constants:g,getAppContext:function(){return c("app").getInstance()},render:function(){return this},getProgressbar:function(){return this.$(".progress-bar")},isLoading:function(){return this.getProgressbar().is(":visible")},showLoading:function(){var a=this.getProgressbar();a&&0<a.length&&progressbar.show()},hideLoading:function(){var a=this.getProgressbar();a&&0<a.length&&progressbar.hide()},
destroy:function(){this.undelegateEvents();this.remove()}})});define("views/composite-view",["backbone","underscore","views/base-view","util/constants"],function(a,b,g){return g.extend({initialize:function(){},render:function(){return this},destroy:function(){}})});
(function(a,b){function g(b){if(b&&(b=a(b),1===b.length)){var f=b.find(e);if(1===f.length){f=f.data("actionbar-button-name");if(!f||1>f.length)f="name"+(c++).toString();this.name=f.toLowerCase();this.$item=b;this.$counter=null;b.on("click",{actionbarItem:this},this._onActionbarItemClicked);b=b.find(d);1===b.length&&(this.$counter=b)}}}var c=1,e=".action-bar--item-title",d=".action-bar--item-counter";g.prototype.name=null;g.prototype._onActionbarItemClicked=function(b){var c=a.Event(h.ITEM_CLICKED_EVENT,
{button:b.currentTarget,actionbarItem:b.data.actionbarItem});a(b.currentTarget).trigger(c)};g.prototype.setItemCount=function(a){a=parseInt(a,10);if(!this.$counter||isNaN(a))return!1;this.$counter.html(" ("+a.toString()+")");0<a?(this.$counter.addClass("visible unread"),a=!0):(this.$counter.removeClass("visible unread"),a=!1);return a};g.prototype.markRead=function(){var a=this.$counter;a&&a.removeClass("unread")};g.prototype.hideCounter=function(){this.$counter.removeClass("visible")};var h={ITEM_CLICKED_EVENT:"actionbaritemclicked",
ACCOUNTS_CLICKED_EVENT:"actionbaraccountsclicked",ACTION_ALERT_TRIGGERED_EVENT:"actionbaractionalerttriggered"},f={defaults:{},init:function(c){var e=this;return this.each(function(){var l=a.extend({},f.defaults,c),p=a.extend({},l,e.data("plugin-options")),m=a(this),n=m.find(".action-bar--account-alert"),r=m.find(".action-bar--group-container"),s=e.find(".action-bar--mobile.action-bar--accounts"),v=m.find(".action-bar--mobile.action-bar--action"),A=v.find(d),w=v.find(b.FID.Accessibility.OFF_SCREEN_SELECTOR),
l={options:l,config:p,$accountAlert:n,$groupContainer:r,$accountsButton:s,$actionButton:v,$actionButtonCount:A,$actionOffScreenSpan:w,actionbarItemsList:{}};m.data("actionbar",l);for(var p=m.find(".action-bar--item"),n=p.length,A=l.actionbarItemsList,z,D=0;D<n;D++)z=new g(p[D]),z.name&&(A[z.name]=z);v.on("click",function(a){a.preventDefault();f.toggleDropdownMenuVisibility.apply(m);r.hasClass("action-bar--collapsed")&&r.addClass("action-bar--animation-slide-up");f.markActionRead.apply(m)});w.append(", menu closed, Click to open.");
s.on("click",function(b){var c=a(b.currentTarget);c.toggleClass("action-bar--button-clicked");b=a.Event(h.ACCOUNTS_CLICKED_EVENT,{button:b.currentTarget});c.trigger(b)});"function"===typeof ButtonRole&&(s=m.find(".action-bar--exit-preview-button a"),0<s.length&&(l.role=new ButtonRole(s)))})},updateItems:function(a){var b=this.data("actionbar"),c=b.actionbarItemsList,b=b.$actionButtonCount,d=!1,f=0,e,h,g;for(g in a)e=c[g],g&&(h=a[g],d|=e.setItemCount(h),f+=parseInt(h)||0);0<f&&b.empty().addClass("visible unread").append(" ("+
f.toString()+")")},showActionAlert:function(){var b=this.data("actionbar"),c=b.$actionButtonCount,b=b.actionbarItemsList.messages.$counter;b.hasClass("alert")||(b.addClass("alert"),c.addClass("alert"),c=a.Event(h.ACTION_ALERT_TRIGGERED_EVENT,{alertVisible:!0,counters:{$messageCounter:b,$tradeTransactCounter:c}}),this.trigger(c))},hideActionAlert:function(){var b=this.data("actionbar"),c=b.$actionButtonCount,b=b.actionbarItemsList.messages.$counter;b.hasClass("alert")&&(b.removeClass("alert"),c.removeClass("alert"),
c=a.Event(h.ACTION_ALERT_TRIGGERED_EVENT,{alertVisible:!0,counters:{$messageCounter:b,$tradeTransactCounter:c}}),this.trigger(c))},markActionRead:function(){this.data("actionbar").$actionButtonCount.removeClass("unread")},hideCounters:function(a){if(a&&!(1>a.length)){var b=this.data("actionbar").actionbarItemsList,c;if("string"===typeof a)(c=b[a])&&c.hideCounter();else for(var d=a.length,f=0;f<d;f++)(c=b[a[f]])&&c.hideCounter()}},setAccountVisibility:function(a){var b=this.data("actionbar").$accountsButton;
a?b.removeClass("hidden"):b.addClass("hidden")},toggleDropdownMenuVisibility:function(){var a=this.data("actionbar"),b=a.$actionButton,c=a.$accountsButton,d=a.$groupContainer,a=a.$actionOffScreenSpan;!1!==b.is(":visible")&&(b.toggleClass("action-bar--button-clicked"),a.empty(),d.hasClass("action-bar--expanded")?(c.removeClass("action-bar--animation-slide-out").addClass("action-bar--animation-slide-in"),d.addClass("action-bar--collapsed").removeClass("action-bar--expanded"),a.append(", menu closed, Click to open.")):
(c.addClass("action-bar--animation-slide-out").removeClass("action-bar--animation-slide-in"),d.addClass("action-bar--expanded").removeClass("action-bar--collapsed action-bar--animation-slide-up"),a.append(", menu opened, Click to close.")))}};a.fn.actionbar=function(){var b=arguments[0],c=arguments;if(f[b])b=f[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||!b)b=f.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.actionbar=
a.extend(a.actionbar,{Events:h})})(jQuery,window);define("components/actionbar",["jquery"],function(){});
(function(a,b){function g(a){function d(b){var c;b&&(c=this,b=a(b),b.on("keydown",function(a){c._onKeyDown.apply(c,arguments)}),this._$element=b,this._attachAttributes.call(c,b))}c=b.FID=b.FID||{};var h=c.Accessibility=c.Accessibility||{};d.KeyCode={Tab:9,Esc:27,Enter:13,Space:32,End:35,Home:36,Left:37,Up:38,Right:39,Down:40};d.Events={KeyDown:"RoleKeyDown"};d.prototype._super=function(){};d.prototype._$element=null;d.prototype.role=null;d.prototype._attachAttributes=function(a){this.role&&a.attr({role:this.role})};
d.prototype._onKeyDown=function(b){var c=a.Event(d.Events.KeyDown,{roleInstance:this});a(b.currentTarget).trigger(c)};return h.BaseRole=d}var c=b.FID=b.FID||{};b.FID.extend=b.FID.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype};"function"===typeof define&&define.amd?define("FIDBaseRole",["require","jquery"],function(a){return g(a("jquery"))}):g(a)})(jQuery,window);
(function(a,b){function g(a,c){function f(a){this._super.constructor.apply(this,arguments)}(b.FID.extend=b.FID.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype})(f,c);f.prototype.role="tab";f.prototype._attachAttributes=function(a){this._super._attachAttributes.apply(this,arguments);a.attr({tabindex:"0"})};f.prototype._onKeyDown=function(a){var b=a.keyCode;b===c.KeyCode.Enter||b===c.KeyCode.Space?this._$element.click():
this._super._onKeyDown.apply(this,arguments)};return e.TabRole=f}var c,e;"function"===typeof define&&define.amd?define("FIDTabRole",["require","jquery","FIDBaseRole"],function(a){c=b.FID=b.FID||{};e=c.Accessibility=c.Accessibility||{};return g(a("jquery"),a("FIDBaseRole"))}):(c=b.FID=b.FID||{},e=c.Accessibility=c.Accessibility||{},g(a,e.BaseRole))})(jQuery,window);
(function(a,b){function g(b,d){var f,e,h,g=b.nodeName.toLowerCase();return"area"===g?(f=b.parentNode,e=f.name,!b.href||!e||"map"!==f.nodeName.toLowerCase()?!1:(h=a("img[usemap=#"+e+"]")[0],!!h&&c(h))):(/input|select|textarea|button|object/.test(g)?!b.disabled:"a"===g?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,d=/^ui-id-\d+$/;a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.9.2",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.ui.ie&&
/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==
b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,
b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return g(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||0<=c)&&g(b,!d)}});a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight;a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"});a("<a>").outerWidth(1).jquery||
a.each(["Width","Height"],function(c,d){function f(b,c,d,j){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);j&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],h=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(h,
f(this,c)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(h,f(this,b,!0,c)+"px")})}});if(a("<a>").data("a-b","a").removeData("a-b").data("a-b")){var h=a.fn.removeData;a.fn.removeData=function(b){return arguments.length?h.call(this,a.camelCase(b)):h.call(this)}}var f=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=f.length?!0:!1;a.ui.ie6=6===parseFloat(f[1],10);a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?
"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.extend(a.ui,{plugin:{add:function(b,c,d){var f;b=a.ui[b].prototype;for(f in d)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,
c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop";return 0<b[d]?!0:(b[d]=1,b[d]=0,!1)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,f,e,h){return a.ui.isOverAxis(b,d,e)&&a.ui.isOverAxis(c,f,h)}})}})(jQuery);
(function(a,b){var g=0,c=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,f;null!=(f=b[c]);c++)try{a(f).triggerHandler("remove")}catch(j){}e(b)};a.widget=function(b,c,f){var e,k,g,p,m=b.split(".")[0];b=b.split(".")[1];e=m+"-"+b;f||(f=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)};a[m]=a[m]||{};k=a[m][b];g=a[m][b]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)};a.extend(g,k,{version:f.version,_proto:a.extend({},
f),_childConstructors:[]});p=new c;p.options=a.widget.extend({},p.options);a.each(f,function(b,d){if(a.isFunction(d)){var e=function(){return c.prototype[b].apply(this,arguments)},j=function(a){return c.prototype[b].apply(this,a)};f[b]=function(){var a=this._super,b=this._superApply,c;return this._super=e,this._superApply=j,c=d.apply(this,arguments),this._super=a,this._superApply=b,c}}});g.prototype=a.widget.extend(p,{widgetEventPrefix:k?p.widgetEventPrefix:b},f,{constructor:g,namespace:m,widgetName:b,
widgetBaseClass:e,widgetFullName:e});k?(a.each(k._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete k._childConstructors):c._childConstructors.push(g);a.widget.bridge(b,g)};a.widget.extend=function(d){for(var e=c.call(arguments,1),f=0,j=e.length,k,g;f<j;f++)for(k in e[f])g=e[f][k],e[f].hasOwnProperty(k)&&g!==b&&(a.isPlainObject(g)?d[k]=a.isPlainObject(d[k])?a.widget.extend({},d[k],g):a.widget.extend({},g):d[k]=g);return d};a.widget.bridge=
function(d,e){var f=e.prototype.widgetFullName||d;a.fn[d]=function(j){var k="string"==typeof j,g=c.call(arguments,1),p=this;return j=!k&&g.length?a.widget.extend.apply(null,[j].concat(g)):j,k?this.each(function(){var c,e=a.data(this,f);if(!e)return a.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+j+"'");if(!a.isFunction(e[j])||"_"===j.charAt(0))return a.error("no such method '"+j+"' for "+d+" widget instance");c=e[j].apply(e,g);if(c!==e&&c!==b)return p=c&&
c.jquery?p.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,f);b?b.option(j||{})._init():a.data(this,f,new e(j,this))}),p}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=g++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,
this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetName,this),a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,
_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(c,e){var f=c,j,k,g;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(f={},j=c.split("."),c=j.shift(),j.length){k=f[c]=a.widget.extend({},this.options[c]);for(g=0;g<j.length-1;g++)k[j[g]]=k[j[g]]||{},k=k[j[g]];c=j.pop();if(e===b)return k[c]===b?null:k[c];k[c]=e}else{if(e===b)return this.options[c]===b?null:this.options[c];f[c]=e}return this._setOptions(f),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,f){var e,k=this;"boolean"!=typeof b&&(f=c,c=b,b=!1);f?(c=e=a(c),this.bindings=this.bindings.add(c)):(f=c,c=this.element,e=
this.widget());a.each(f,function(f,g){function m(){if(b||!(!0===k.options.disabled||a(this).hasClass("ui-state-disabled")))return("string"==typeof g?k[g]:g).apply(k,arguments)}"string"!=typeof g&&(m.guid=g.guid=g.guid||m.guid||a.guid++);var n=f.match(/^(\w+)\s*(.*)$/),r=n[1]+k.eventNamespace;(n=n[2])?e.delegate(n,r,m):c.bind(r,m)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"==
typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,f){var e,
k=this.options[b];f=f||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);return this.element.trigger(c,f),!(a.isFunction(k)&&!1===k.apply(this.element[0],[c].concat(f))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(f,e,k){"string"==typeof e&&(e={effect:e});var g,p=e?!0===e||"number"==typeof e?c:e.effect||c:b;e=e||
{};"number"==typeof e&&(e={duration:e});g=!a.isEmptyObject(e);e.complete=k;e.delay&&f.delay(e.delay);g&&a.effects&&(a.effects.effect[p]||!1!==a.uiBackCompat&&a.effects[p])?f[b](e):p!==b&&f[p]?f[p](e.duration,e.easing,k):f.queue(function(c){a(this)[b]();k&&k.call(f[0]);c()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a){var b=!1;a(document).mouseup(function(){b=!1});a.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},
_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(g){if(!b){this._mouseStarted&&this._mouseUp(g);this._mouseDownEvent=g;var c=this,e=1===g.which,d="string"==typeof this.options.cancel&&g.target.nodeName?a(g.target).closest(this.options.cancel).length:!1;if(!e||d||!this._mouseCapture(g))return!0;(this.mouseDelayMet=
!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));return this._mouseDistanceMet(g)&&this._mouseDelayMet(g)&&(this._mouseStarted=!1!==this._mouseStart(g),!this._mouseStarted)?(g.preventDefault(),!0):(!0===a.data(g.target,this.widgetName+".preventClickEvent")&&a.removeData(g.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},a(document).bind("mousemove."+
this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),g.preventDefault(),b=!0,!0)}},_mouseMove:function(b){return!a.ui.ie||9<=document.documentMode||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},
_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var g=this.options;return this.helper||g.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(a(!0===g.iframeFix?
"iframe":g.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var g=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),
this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,
g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),g.containment&&this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,g){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!g){var c=this._uiHash();if(!1===this._trigger("drag",b,c))return this._mouseUp({}),
!1;this.position=c.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var g=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(g=a.ui.ddmanager.drop(this,b));this.dropped&&(g=this.dropped,this.dropped=!1);for(var c=this.element[0],e=!1;c&&(c=c.parentNode);)c==document&&(e=!0);
if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!g||"valid"==this.options.revert&&g||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,g)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",b)&&d._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var g=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),g},_createHelper:function(b){var g=this.options;b=a.isFunction(g.helper)?a(g.helper.apply(this.element[0],
[b])):"clone"==g.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"==g.appendTo?this.element[0].parentNode:g.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=a(b.containment),g=b[0];if(g){b.offset();var c="hidden"!=a(g).css("overflow");this.containment=[(parseInt(a(g).css("borderLeftWidth"),10)||0)+(parseInt(a(g).css("paddingLeft"),10)||0),(parseInt(a(g).css("borderTopWidth"),10)||0)+(parseInt(a(g).css("paddingTop"),10)||
0),(c?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(a(g).css("borderLeftWidth"),10)||0)-(parseInt(a(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(a(g).css("borderTopWidth"),10)||0)-(parseInt(a(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=
b.containment)},_convertPositionTo:function(b,g){g||(g=this.position);var c="absolute"==b?1:-1,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(e[0].tagName);return{top:g.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:e.scrollTop())*c,left:g.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==
this.cssPosition?-this.scrollParent.scrollLeft():d?0:e.scrollLeft())*c}},_generatePosition:function(b){var g=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(c[0].tagName),d=b.pageX,h=b.pageY;if(this.originalPosition){var f;this.containment&&(this.relative_container?(f=this.relative_container.offset(),f=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+
f.left,this.containment[3]+f.top]):f=this.containment,b.pageX-this.offset.click.left<f[0]&&(d=f[0]+this.offset.click.left),b.pageY-this.offset.click.top<f[1]&&(h=f[1]+this.offset.click.top),b.pageX-this.offset.click.left>f[2]&&(d=f[2]+this.offset.click.left),b.pageY-this.offset.click.top>f[3]&&(h=f[3]+this.offset.click.top));g.grid&&(h=g.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,h=f?h-this.offset.click.top<f[1]||h-this.offset.click.top>f[3]?
h-this.offset.click.top<f[1]?h+g.grid[1]:h-g.grid[1]:h:h,d=g.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,d=f?d-this.offset.click.left<f[0]||d-this.offset.click.left>f[2]?d-this.offset.click.left<f[0]?d+g.grid[0]:d-g.grid[0]:d:d)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,g,c){return c=c||this._uiHash(),a.ui.plugin.call(this,b,[g,c]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,g,c)},plugins:{},
_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,g){var c=a(this).data("draggable"),e=c.options,d=a.extend({},g,{item:c.element});c.sortables=[];a(e.connectToSortable).each(function(){var e=a.data(this,"sortable");e&&!e.options.disabled&&(c.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",b,d))})},
stop:function(b,g){var c=a(this).data("draggable"),e=a.extend({},g,{item:c.element});a.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,e))})},drag:function(b,g){var c=a(this).data("draggable"),e=this;a.each(c.sortables,function(){var d=!1,h=this;this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(d=!0,a.each(c.sortables,function(){return this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this!=h&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(h.instance.element[0],this.instance.element[0])&&(d=!1),d}));d?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return g.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=c.offset.click.top,
this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",b),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",b),c.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),g=a(this).data("draggable").options;b.css("cursor")&&(g._cursor=b.css("cursor"));b.css("cursor",g.cursor)},stop:function(){var b=
a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,g){var c=a(g.helper),e=a(this).data("draggable").options;c.css("opacity")&&(e._opacity=c.css("opacity"));c.css("opacity",e.opacity)},stop:function(b,g){var c=a(this).data("draggable").options;c._opacity&&a(g.helper).css("opacity",c._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=
b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var g=a(this).data("draggable"),c=g.options,e=!1;if(g.scrollParent[0]!=document&&"HTML"!=g.scrollParent[0].tagName){if(!c.axis||"x"!=c.axis)g.overflowOffset.top+g.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?g.scrollParent[0].scrollTop=e=g.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-g.overflowOffset.top<c.scrollSensitivity&&(g.scrollParent[0].scrollTop=e=g.scrollParent[0].scrollTop-c.scrollSpeed);
if(!c.axis||"y"!=c.axis)g.overflowOffset.left+g.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?g.scrollParent[0].scrollLeft=e=g.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-g.overflowOffset.left<c.scrollSensitivity&&(g.scrollParent[0].scrollLeft=e=g.scrollParent[0].scrollLeft-c.scrollSpeed)}else{if(!c.axis||"x"!=c.axis)b.pageY-a(document).scrollTop()<c.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
c.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed));if(!c.axis||"y"!=c.axis)b.pageX-a(document).scrollLeft()<c.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))}!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(g,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=
a(this).data("draggable"),g=b.options;b.snapElements=[];a(g.snap.constructor!=String?g.snap.items||":data(draggable)":g.snap).each(function(){var c=a(this),e=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})})},drag:function(b,g){for(var c=a(this).data("draggable"),e=c.options,d=e.snapTolerance,h=g.offset.left,f=h+c.helperProportions.width,j=g.offset.top,k=j+c.helperProportions.height,l=c.snapElements.length-1;0<=l;l--){var p=
c.snapElements[l].left,m=p+c.snapElements[l].width,n=c.snapElements[l].top,r=n+c.snapElements[l].height;if(p-d<h&&h<m+d&&n-d<j&&j<r+d||p-d<h&&h<m+d&&n-d<k&&k<r+d||p-d<f&&f<m+d&&n-d<j&&j<r+d||p-d<f&&f<m+d&&n-d<k&&k<r+d){if("inner"!=e.snapMode){var s=Math.abs(n-k)<=d,v=Math.abs(r-j)<=d,A=Math.abs(p-f)<=d,w=Math.abs(m-h)<=d;s&&(g.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top-c.margins.top);v&&(g.position.top=c._convertPositionTo("relative",{top:r,left:0}).top-
c.margins.top);A&&(g.position.left=c._convertPositionTo("relative",{top:0,left:p-c.helperProportions.width}).left-c.margins.left);w&&(g.position.left=c._convertPositionTo("relative",{top:0,left:m}).left-c.margins.left)}var z=s||v||A||w;"outer"!=e.snapMode&&(s=Math.abs(n-j)<=d,v=Math.abs(r-k)<=d,A=Math.abs(p-h)<=d,w=Math.abs(m-f)<=d,s&&(g.position.top=c._convertPositionTo("relative",{top:n,left:0}).top-c.margins.top),v&&(g.position.top=c._convertPositionTo("relative",{top:r-c.helperProportions.height,
left:0}).top-c.margins.top),A&&(g.position.left=c._convertPositionTo("relative",{top:0,left:p}).left-c.margins.left),w&&(g.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left-c.margins.left));!c.snapElements[l].snapping&&(s||v||A||w||z)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,b,a.extend(c._uiHash(),{snapItem:c.snapElements[l].item}));c.snapElements[l].snapping=s||v||A||w||z}else c.snapElements[l].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
b,a.extend(c._uiHash(),{snapItem:c.snapElements[l].item})),c.snapElements[l].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,b=a.makeArray(a(b.stack)).sort(function(b,e){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(e).css("zIndex"),10)||0)});if(b.length){var g=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=g+a});this[0].style.zIndex=g+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
g){var c=a(g.helper),e=a(this).data("draggable").options;c.css("zIndex")&&(e._zIndex=c.css("zIndex"));c.css("zIndex",e.zIndex)},stop:function(b,g){var c=a(this).data("draggable").options;c._zIndex&&a(g.helper).css("zIndex",c._zIndex)}})})(jQuery);
(function(a){a.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,g=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(g)?g:function(a){return a.is(g)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],g=0;g<b.length;g++)b[g]==this&&b.splice(g,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,g){"accept"==b&&(this.accept=a.isFunction(g)?g:function(a){return a.is(g)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var g=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
g&&this._trigger("activate",b,this.ui(g))},_deactivate:function(b){var g=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);g&&this._trigger("deactivate",b,this.ui(g))},_over:function(b){var g=a.ui.ddmanager.current;if(g&&(g.currentItem||g.element)[0]!=this.element[0])this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(g)))},_out:function(b){var g=
a.ui.ddmanager.current;if(g&&(g.currentItem||g.element)[0]!=this.element[0])this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(g)))},_drop:function(b,g){var c=g||a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&
!b.options.disabled&&b.options.scope==c.options.scope&&b.accept.call(b.element[0],c.currentItem||c.element)&&a.ui.intersect(c,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(c)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,g,c){if(!g.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,d=e+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,f=h+b.helperProportions.height,j=g.offset.left,k=j+g.proportions.width,l=g.offset.top,p=l+g.proportions.height;switch(c){case "fit":return j<=e&&d<=k&&l<=h&&f<=p;case "intersect":return j<e+b.helperProportions.width/2&&d-b.helperProportions.width/2<k&&l<h+
b.helperProportions.height/2&&f-b.helperProportions.height/2<p;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,l,j,g.proportions.height,g.proportions.width);case "touch":return(h>=l&&h<=p||f>=l&&f<=p||h<l&&f>p)&&(e>=j&&e<=k||d>=j&&d<=k||e<j&&d>k);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,g){var c=a.ui.ddmanager.droppables[b.options.scope]||
[],e=g?g.type:null,d=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<c.length;h++)if(!(c[h].options.disabled||b&&!c[h].accept.call(c[h].element[0],b.currentItem||b.element))){for(var f=0;f<d.length;f++)if(d[f]==c[h].element[0]){c[h].proportions.height=0;continue a}c[h].visible="none"!=c[h].element.css("display");c[h].visible&&("mousedown"==e&&c[h]._activate.call(c[h],g),c[h].offset=c[h].element.offset(),c[h].proportions={width:c[h].element[0].offsetWidth,height:c[h].element[0].offsetHeight})}},
drop:function(b,g){var c=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(c=this._drop.call(this,g)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,g)))}),c},dragStart:function(b,g){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,g)})},drag:function(b,g){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,g);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c=a.ui.intersect(b,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==this.isover?"isover":null){var e;if(this.options.greedy){var d=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
d});h.length&&(e=a.data(h[0],"droppable"),e.greedyChild="isover"==c?1:0)}e&&"isover"==c&&(e.isover=0,e.isout=1,e._out.call(e,g));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==c?"_over":"_out"].call(this,g);e&&"isout"==c&&(e.isout=0,e.isover=1,e._over.call(e,g))}}})},dragStop:function(b,g){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,g)}}})(jQuery);
(function(a){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,e=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=e.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");
this.handles={};for(var h=0;h<d.length;h++){var f=a.trim(d[h]),j=a('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');j.css({zIndex:e.zIndex});"se"==f&&j.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(j)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
a(this.handles[c],this.element),f=0,f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(d,f);this._proportionallyResize()}a(this.handles[c])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});e.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){e.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){e.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var e=!1,d;for(d in this.handles)a(this.handles[d])[0]==b.target&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var e=this.options,d=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:d.top,left:d.left});this._renderProxy();var d=b(this.helper.css("left")),f=b(this.helper.css("top"));e.containment&&(d+=a(e.containment).scrollLeft()||0,f+=a(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:d,top:f};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:d,top:f};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",
"auto"==e?this.axis+"-resize":e),h.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(a){var b=this.helper,d=this.originalMousePosition,h=this._change[this.axis];if(!h)return!1;d=h.apply(this,[a,a.pageX-d.left||0,a.pageY-d.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)d=this._updateRatio(d,a);return d=this._respectSize(d,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(d),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var e=this.options;if(this._helper){var d=this._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),d=h&&a.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-d},d=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;e.animate||this.element.css(a.extend(h,{top:f,left:d}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!e.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=
this.options,d,h,f,b={minWidth:g(b.minWidth)?b.minWidth:0,maxWidth:g(b.maxWidth)?b.maxWidth:Infinity,minHeight:g(b.minHeight)?b.minHeight:0,maxHeight:g(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,d=b.maxHeight*this.aspectRatio,f=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),d<b.maxWidth&&(b.maxWidth=d),f<b.maxHeight&&(b.maxHeight=f);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();g(a.left)&&(this.position.left=a.left);g(a.top)&&(this.position.top=a.top);g(a.height)&&(this.size.height=a.height);g(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,h=this.axis;return g(a.height)?a.width=a.height*this.aspectRatio:g(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==h&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==h&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=
this._vBoundaries,d=this.axis,h=g(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=g(a.height)&&b.maxHeight&&b.maxHeight<a.height,j=g(a.width)&&b.minWidth&&b.minWidth>a.width,k=g(a.height)&&b.minHeight&&b.minHeight>a.height;j&&(a.width=b.minWidth);k&&(a.height=b.minHeight);h&&(a.width=b.maxWidth);f&&(a.height=b.maxHeight);var l=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,m=/sw|nw|w/.test(d),d=/nw|ne|n/.test(d);j&&m&&(a.left=l-b.minWidth);h&&m&&(a.left=l-b.maxWidth);
k&&d&&(a.top=p-b.minHeight);f&&d&&(a.top=p-b.maxHeight);b=!a.width&&!a.height;return b&&!a.left&&a.top?a.top=null:b&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,e=0;e<this._proportionallyResizeElements.length;e++){var d=this._proportionallyResizeElements[e];if(!this.borderDif){var h=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),
d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(h,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var e=a.ui.ie6?1:0,d=a.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(a,b,d){return{height:this.originalSize.height+
d}},se:function(b,e,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,e,d]))},sw:function(b,e,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,e,d]))},ne:function(b,e,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,e,d]))},nw:function(b,e,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,e,d]))}},_propagate:function(b,e){a.ui.plugin.call(this,b,[e,this.ui()]);
"resize"!=b&&this._trigger(b,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable").options,e=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),
left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"==typeof b.alsoResize&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],e(b.alsoResize)):a.each(b.alsoResize,function(a){e(a)}):e(b.alsoResize)},resize:function(b,e){var d=a(this).data("resizable"),h=d.options,f=d.originalSize,j=d.originalPosition,k={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-j.top||0,left:d.position.left-j.left||0},g=function(b,c){a(b).each(function(){var b=
a(this),d=a(this).data("resizable-alsoresize"),f={},j=c&&c.length?c:b.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(j,function(a,b){var c=(d[b]||0)+(k[b]||0);c&&0<=c&&(f[b]=c||null)});b.css(f)})};"object"==typeof h.alsoResize&&!h.alsoResize.nodeType?a.each(h.alsoResize,function(a,b){g(a,b)}):g(h.alsoResize)},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(b){var e=a(this).data("resizable"),
d=e.options,h=e._proportionallyResizeElements,f=h.length&&/textarea/i.test(h[0].nodeName),j=f&&a.ui.hasScroll(h[0],"left")?0:e.sizeDiff.height,f={width:e.size.width-(f?0:e.sizeDiff.width),height:e.size.height-j},j=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,k=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(a.extend(f,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d=
{width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};h&&h.length&&a(h[0]).css({width:d.width,height:d.height});e._updateCache(d);e._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),e=c.element,d=c.options.containment;if(e=d instanceof a?d.get(0):/parent/.test(d)?e.parent().get(0):d)if(c.containerElement=a(e),/document/.test(d)||
d==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(e),f=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){f[a]=b(h.css("padding"+c))});c.containerOffset=h.offset();c.containerPosition=h.position();c.containerSize={height:h.innerHeight()-f[3],width:h.innerWidth()-f[1]};var d=c.containerOffset,j=c.containerSize.height,
k=c.containerSize.width,k=a.ui.hasScroll(e,"left")?e.scrollWidth:k,j=a.ui.hasScroll(e)?e.scrollHeight:j;c.parentData={element:e,left:d.left,top:d.top,width:k,height:j}}},resize:function(b){var e=a(this).data("resizable"),d=e.options,h=e.containerOffset,f=e.position;b=e._aspectRatio||b.shiftKey;var j={top:0,left:0},k=e.containerElement;k[0]!=document&&/static/.test(k.css("position"))&&(j=h);f.left<(e._helper?h.left:0)&&(e.size.width+=e._helper?e.position.left-h.left:e.position.left-j.left,b&&(e.size.height=
e.size.width/e.aspectRatio),e.position.left=d.helper?h.left:0);f.top<(e._helper?h.top:0)&&(e.size.height+=e._helper?e.position.top-h.top:e.position.top,b&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?h.top:0);e.offset.left=e.parentData.left+e.position.left;e.offset.top=e.parentData.top+e.position.top;d=Math.abs(e.offset.left-j.left+e.sizeDiff.width);h=Math.abs((e._helper?e.offset.top-j.top:e.offset.top-h.top)+e.sizeDiff.height);f=e.containerElement.get(0)==e.element.parent().get(0);
j=/relative|absolute/.test(e.containerElement.css("position"));f&&j&&(d-=e.parentData.left);d+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-d,b&&(e.size.height=e.size.width/e.aspectRatio));h+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-h,b&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(){var b=a(this).data("resizable"),e=b.options,d=b.containerOffset,h=b.containerPosition,f=b.containerElement,j=a(b.helper),k=j.offset(),g=j.outerWidth()-b.sizeDiff.width,
j=j.outerHeight()-b.sizeDiff.height;b._helper&&!e.animate&&/relative/.test(f.css("position"))&&a(this).css({left:k.left-h.left-d.left,width:g,height:j});b._helper&&!e.animate&&/static/.test(f.css("position"))&&a(this).css({left:k.left-h.left-d.left,width:g,height:j})}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),e=b.options,d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:d.height,width:d.width,
margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("resizable"),e=b.options,d=b.size,h=b.originalSize,
f=b.originalPosition,j=b.axis;e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var k=Math.round((d.width-h.width)/(e.grid[0]||1))*(e.grid[0]||1),e=Math.round((d.height-h.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(j)?(b.size.width=h.width+k,b.size.height=h.height+e):/^(ne)$/.test(j)?(b.size.width=h.width+k,b.size.height=h.height+e,b.position.top=f.top-e):/^(sw)$/.test(j)?(b.size.width=h.width+k,b.size.height=h.height+e,b.position.left=f.left-k):(b.size.width=h.width+k,b.size.height=
h.height+e,b.position.top=f.top-e,b.position.left=f.left-k)}});var b=function(a){return parseInt(a,10)||0},g=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var g;this.refresh=function(){g=a(b.options.filter,b.element[0]);g.addClass("ui-selectee");g.each(function(){var b=a(this),e=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:e.left,top:e.top,right:e.left+b.outerWidth(),bottom:e.top+b.outerHeight(),
startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=g.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var g=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var c=this.options;this.selectees=a(c.filter,this.element[0]);this._trigger("start",b);a(c.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});c.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");c.startselected=!0;!b.metaKey&&!b.ctrlKey&&(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,g._trigger("unselecting",
b,{unselecting:c.element}))});a(b.target).parents().andSelf().each(function(){var c=a.data(this,"selectable-item");if(c){var d=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");return c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),c.unselecting=!d,c.selecting=d,c.selected=d,d?g._trigger("selecting",b,{selecting:c.element}):g._trigger("unselecting",b,{unselecting:c.element}),!1}})}},_mouseDrag:function(b){var g=this;this.dragged=!0;if(!this.options.disabled){var c=
this.options,e=this.opos[0],d=this.opos[1],h=b.pageX,f=b.pageY;if(e>h)var j=h,h=e,e=j;d>f&&(j=f,f=d,d=j);return this.helper.css({left:e,top:d,width:h-e,height:f-d}),this.selectees.each(function(){var j=a.data(this,"selectable-item");if(j&&j.element!=g.element[0]){var l=!1;"touch"==c.tolerance?l=!(j.left>h||j.right<e||j.top>f||j.bottom<d):"fit"==c.tolerance&&(l=j.left>e&&j.right<h&&j.top>d&&j.bottom<f);l?(j.selected&&(j.$element.removeClass("ui-selected"),j.selected=!1),j.unselecting&&(j.$element.removeClass("ui-unselecting"),
j.unselecting=!1),j.selecting||(j.$element.addClass("ui-selecting"),j.selecting=!0,g._trigger("selecting",b,{selecting:j.element}))):(j.selecting&&((b.metaKey||b.ctrlKey)&&j.startselected?(j.$element.removeClass("ui-selecting"),j.selecting=!1,j.$element.addClass("ui-selected"),j.selected=!0):(j.$element.removeClass("ui-selecting"),j.selecting=!1,j.startselected&&(j.$element.addClass("ui-unselecting"),j.unselecting=!0),g._trigger("unselecting",b,{unselecting:j.element}))),j.selected&&!b.metaKey&&!b.ctrlKey&&
!j.startselected&&(j.$element.removeClass("ui-selected"),j.selected=!1,j.$element.addClass("ui-unselecting"),j.unselecting=!0,g._trigger("unselecting",b,{unselecting:j.element})))}}),!1}},_mouseStop:function(b){var g=this;this.dragged=!1;return a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;g._trigger("unselected",b,{unselected:c.element})}),a(".ui-selecting",this.element[0]).each(function(){var c=
a.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;g._trigger("selected",b,{selected:c.element})}),this._trigger("stop",b),this.helper.remove(),!1}})})(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,g){"disabled"===b?(this.options[b]=
g,this.widget().toggleClass("ui-sortable-disabled",!!g)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,g){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var e=null;a(b.target).parents().each(function(){if(a.data(this,c.widgetName+"-item")==c)return e=a(this),!1});a.data(b.target,c.widgetName+"-item")==c&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!g){var d=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==
b.target&&(d=!0)});if(!d)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,g,c){g=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
g.containment&&this._setContainment();g.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",g.cursor));g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity));g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var g=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?c=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(c=a(document).scrollTop(a(document).scrollTop()+
g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?c=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(c=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)));!1!==c&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";
if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(g=this.items.length-1;0<=g;g--){var c=this.items[g],e=c.item[0],d=this._intersectsWithPointer(c);if(d&&c.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[1==d?"next":"prev"]()[0]!=e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],e):1)){this.direction=1==d?"down":"up";if("pointer"!=this.options.tolerance&&!this._intersectsWithSides(c))break;
this._rearrange(b,c);this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,g){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var c=this,e=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(b)})}else this._clear(b,g);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var g=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},a(g).each(function(){var e=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);e&&c.push((b.key||e[1]+"[]")+"="+(b.key&&b.expression?e[1]:e[2]))}),!c.length&&b.key&&c.push(b.key+"="),c.join("&")},toArray:function(b){var g=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},g.each(function(){c.push(a(b.item||this).attr(b.attribute||
"id")||"")}),c},_intersectsWith:function(a){var g=this.positionAbs.left,c=g+this.helperProportions.width,e=this.positionAbs.top,d=e+this.helperProportions.height,h=a.left,f=h+a.width,j=a.top,k=j+a.height,l=this.offset.click.top,p=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?e+l>j&&e+l<k&&g+p>h&&g+p<f:h<g+this.helperProportions.width/
2&&c-this.helperProportions.width/2<f&&j<e+this.helperProportions.height/2&&d-this.helperProportions.height/2<k},_intersectsWithPointer:function(b){var g="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);g=g&&b;b=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return g?this.floating?c&&"right"==c||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var g=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&b||"left"==e&&!b:c&&("down"==c&&g||"up"==c&&!g)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var g=[],c=[],e=this._connectWith();if(e&&b)for(b=e.length-1;0<=b;b--)for(var d=a(e[b]),h=d.length-1;0<=h;h--){var f=a.data(d[h],this.widgetName);f&&
f!=this&&!f.options.disabled&&c.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}c.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=c.length-1;0<=b;b--)c[b][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var g=this.items,c=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var d=e.length-1;0<=d;d--)for(var h=a(e[d]),f=h.length-1;0<=f;f--){var j=
a.data(h[f],this.widgetName);j&&j!=this&&!j.options.disabled&&(c.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}for(d=c.length-1;0<=d;d--){b=c[d][1];e=c[d][0];f=0;for(h=e.length;f<h;f++)j=a(e[f]),j.data(this.widgetName+"-item",b),g.push({item:j,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var g=this.items.length-1;0<=g;g--){var c=this.items[g];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;b||(c.width=e.outerWidth(),c.height=e.outerHeight());e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(g=this.containers.length-1;0<=g;g--)e=this.containers[g].element.offset(),
this.containers[g].containerCache.left=e.left,this.containers[g].containerCache.top=e.top,this.containers[g].containerCache.width=this.containers[g].element.outerWidth(),this.containers[g].containerCache.height=this.containers[g].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var g=b.options;if(!g.placeholder||g.placeholder.constructor==String){var c=g.placeholder;g.placeholder={element:function(){var e=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return c||(e.style.visibility="hidden"),e},update:function(a,d){if(!c||g.forcePlaceholderSize)d.height()||d.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(g.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);g.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var g=null,c=null,e=this.containers.length-1;0<=e;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!g||!a.contains(this.containers[e].element[0],g.element[0]))g=this.containers[e],c=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=
0);if(g)if(1===this.containers.length)this.containers[c]._trigger("over",b,this._uiHash(this)),this.containers[c].containerCache.over=1;else{for(var g=1E4,e=null,d=this.containers[c].floating?"left":"top",h=this.containers[c].floating?"width":"height",f=this.positionAbs[d]+this.offset.click[d],j=this.items.length-1;0<=j;j--)if(a.contains(this.containers[c].element[0],this.items[j].item[0])&&this.items[j].item[0]!=this.currentItem[0]){var k=this.items[j].item.offset()[d],l=!1;Math.abs(k-f)>Math.abs(k+
this.items[j][h]-f)&&(l=!0,k+=this.items[j][h]);Math.abs(k-f)<g&&(g=Math.abs(k-f),e=this.items[j],this.direction=l?"up":"down")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[c],e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[c].element,!0),this._trigger("change",b,this._uiHash()),this.containers[c]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",b,this._uiHash(this)),
this.containers[c].containerCache.over=1}},_createHelper:function(b){var g=this.options;b=a.isFunction(g.helper)?a(g.helper.apply(this.element[0],[b,this.currentItem])):"clone"==g.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!=g.appendTo?g.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==b[0].style.width||g.forceHelperSize)&&b.width(this.currentItem.width()),(""==b[0].style.height||g.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in
b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var g=a(b.containment)[0],b=a(b.containment).offset(),c="hidden"!=a(g).css("overflow");this.containment=[b.left+(parseInt(a(g).css("borderLeftWidth"),10)||
0)+(parseInt(a(g).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(g).css("borderTopWidth"),10)||0)+(parseInt(a(g).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(a(g).css("borderLeftWidth"),10)||0)-(parseInt(a(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(a(g).css("borderTopWidth"),10)||0)-(parseInt(a(g).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,g){g||(g=this.position);var c="absolute"==b?1:-1,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(e[0].tagName);return{top:g.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:e.scrollTop())*c,left:g.left+this.offset.relative.left*
c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:e.scrollLeft())*c}},_generatePosition:function(b){var g=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(c[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());
var d=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),g.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/g.grid[1])*g.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+g.grid[1]:h-g.grid[1]:h:h,d=this.originalPageX+Math.round((d-this.originalPageX)/g.grid[0])*g.grid[0],d=this.containment?d-this.offset.click.left<this.containment[0]||d-this.offset.click.left>this.containment[2]?d-this.offset.click.left<this.containment[0]?d+g.grid[0]:d-g.grid[0]:d:d));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,g,c,e){c?c[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?g.item[0]:g.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:
1;this._delay(function(){d==this.counter&&this.refreshPositions(!e)})},_clear:function(b,g){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!g&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!g&&c.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&(g||(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(e=this.containers.length-1;0<=e;e--)g||c.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!g){this._trigger("beforeStop",b,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}g||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!g){for(e=0;e<c.length;e++)c[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var g=b||this;return{helper:g.helper,placeholder:g.placeholder||a([]),position:g.position,originalPosition:g.originalPosition,offset:g.positionAbs,item:g.currentItem,sender:b?b.element:null}}})})(jQuery);
jQuery.effects||function(a,b){var g=!1!==a.uiBackCompat;a.effects={effect:{}};var c=jQuery,e=function(a,b,c){var d=p[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)},d=function(a){var b=k(),d=b._rgba=[];return a=a.toLowerCase(),s(j,function(c,f){var e,j=f.re.exec(a),j=j&&f.parse(j),h=f.space||"rgba";if(j)return e=b[h](j),b[l[h].cache]=e[l[h].cache],d=b._rgba=e._rgba,!1}),d.length?("0,0,0,0"===d.join()&&c.extend(d,
r.transparent),b):r[a]},h=function(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a},f=/^([\-+])=\s*(\d+\.?\d*)/,j=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],k=c.Color=function(a,b,d,f){return new c.Color.fn.parse(a,b,d,f)},l={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=k.support={},n=c("<p>")[0],r,s=c.each;n.style.cssText="background-color:rgba(1,1,1,.5)";m.rgba=-1<n.style.backgroundColor.indexOf("rgba");s(l,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});k.fn=c.extend(k.prototype,{parse:function(b,f,j,
h){if(void 0===b)return this._rgba=[null,null,null,null],this;if(b.jquery||b.nodeType)b=c(b).css(f),f=void 0;var g=this,m=c.type(b),n=this._rgba=[];void 0!==f&&(b=[b,f,j,h],m="array");if("string"===m)return this.parse(d(b)||r._default);if("array"===m)return s(l.rgba.props,function(a,c){n[c.idx]=e(b[c.idx],c)}),this;if("object"===m)return b instanceof k?s(l,function(a,c){b[c.cache]&&(g[c.cache]=b[c.cache].slice())}):s(l,function(c,d){var f=d.cache;s(d.props,function(a,c){if(!g[f]&&d.to){if("alpha"===
a||null==b[a])return;g[f]=d.to(g._rgba)}g[f][c.idx]=e(b[a],c,!0)});g[f]&&0>a.inArray(null,g[f].slice(0,3))&&(g[f][3]=1,d.from&&(g._rgba=d.from(g[f])))}),this},is:function(a){var b=k(a),c=!0,d=this;return s(l,function(a,f){var e,j=b[f.cache];return j&&(e=d[f.cache]||f.to&&f.to(d._rgba)||[],s(f.props,function(a,b){if(null!=j[b.idx])return c=j[b.idx]===e[b.idx],c})),c}),c},_space:function(){var a=[],b=this;return s(l,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=k(a),
d=c._space(),f=l[d],j=0===this.alpha()?k("transparent"):this,h=j[f.cache]||f.to(j._rgba),g=h.slice();return c=c[f.cache],s(f.props,function(a,d){var f=d.idx,j=h[f],k=c[f],l=p[d.type]||{};null!==k&&(null===j?g[f]=k:(l.mod&&(k-j>l.mod/2?j+=l.mod:j-k>l.mod/2&&(j-=l.mod)),g[f]=e((k-j)*b+j,d)))}),this[d](g)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),d=b.pop(),f=k(a)._rgba;return k(c.map(b,function(a,b){return(1-d)*f[b]+d*a}))},toRgbaString:function(){var a="rgba(",b=c.map(this._rgba,
function(a,b){return null==a?2<b?1:0:a});return 1===b[3]&&(b.pop(),a="rgb("),a+b.join()+")"},toHslaString:function(){var a="hsla(",b=c.map(this.hsla(),function(a,b){return null==a&&(a=2<b?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===b[3]&&(b.pop(),a="hsl("),a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),d=b.pop();return a&&b.push(~~(255*d)),"#"+c.map(b,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?
"transparent":this.toRgbaString()}});k.fn.parse.prototype=k.fn;l.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var f=Math.max(b,c,d),e=Math.min(b,c,d),j=f-e,h=f+e,k=0.5*h,g,l;return e===f?g=0:b===f?g=60*(c-d)/j+360:c===f?g=60*(d-b)/j+120:g=60*(b-c)/j+240,0===k||1===k?l=k:0.5>=k?l=j/h:l=j/(2-h),[Math.round(g)%360,l,k,null==a?1:a]};l.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];
var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=0.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*h(d,c,b+1/3)),Math.round(255*h(d,c,b)),Math.round(255*h(d,c,b-1/3)),a]};s(l,function(a,b){var d=b.props,j=b.cache,h=b.to,g=b.from;k.fn[a]=function(a){h&&!this[j]&&(this[j]=h(this._rgba));if(void 0===a)return this[j].slice();var b,f=c.type(a),l="array"===f||"object"===f?a:arguments,m=this[j].slice();return s(d,function(a,b){var c=l["object"===f?a:b.idx];null==c&&(c=m[b.idx]);m[b.idx]=e(c,b)}),g?(b=k(g(m)),b[j]=
m,b):k(m)};s(d,function(b,d){k.fn[b]||(k.fn[b]=function(e){var j=c.type(e),h="alpha"===b?this._hsla?"hsla":"rgba":a,k=this[h](),g=k[d.idx],l;return"undefined"===j?g:("function"===j&&(e=e.call(this,g),j=c.type(e)),null==e&&d.empty?this:("string"===j&&(l=f.exec(e),l&&(e=g+parseFloat(l[2])*("+"===l[1]?1:-1))),k[d.idx]=e,this[h](k)))})})});s("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(a,b){c.cssHooks[b]={set:function(a,f){var e,j="";if("string"!==c.type(f)||(e=d(f))){f=k(e||f);if(!m.rgba&&1!==f._rgba[3]){for(e="backgroundColor"===b?a.parentNode:a;(""===j||"transparent"===j)&&e&&e.style;)try{j=c.css(e,"backgroundColor"),e=e.parentNode}catch(h){}f=f.blend(j&&"transparent"!==j?j:"_default")}f=f.toRgbaString()}try{a.style[b]=f}catch(g){}}};c.fx.step[b]=function(a){a.colorInit||(a.start=k(a.elem,b),a.end=k(a.end),a.colorInit=!0);c.cssHooks[b].set(a.elem,a.start.transition(a.end,
a.pos))}});c.cssHooks.borderColor={expand:function(a){var b={};return s(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}};r=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var v=function(){var b=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},d,f;if(b&&b.length&&b[0]&&b[b[0]])for(f=b.length;f--;)d=b[f],"string"==typeof b[d]&&(c[a.camelCase(d)]=b[d]);else for(d in b)"string"==typeof b[d]&&(c[d]=b[d]);return c},A=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});a.effects.animateClass=function(b,c,d,f){var e=a.speed(c,d,f);return this.queue(function(){var c=a(this),d=c.attr("class")||"",f,j=e.children?c.find("*").andSelf():c,j=j.map(function(){return{el:a(this),start:v.call(this)}});f=function(){a.each(A,function(a,d){b[d]&&c[d+"Class"](b[d])})};f();j=j.map(function(){this.end=v.call(this.el[0]);var b=this.start,c=this.end,d={},f,e;for(f in c)e=c[f],
b[f]!==e&&!w[f]&&(a.fx.step[f]||!isNaN(parseFloat(e)))&&(d[f]=e);return this.diff=d,this});c.attr("class",d);j=j.map(function(){var b=this,c=a.Deferred(),d=jQuery.extend({},e,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()});a.when.apply(a,j.get()).done(function(){f();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});e.complete.call(c[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,f){return c?
a.effects.animateClass.call(this,{add:b},c,d,f):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,f){return c?a.effects.animateClass.call(this,{remove:b},c,d,f):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,f,e,j){return"boolean"==typeof d||d===b?f?a.effects.animateClass.call(this,d?{add:c}:{remove:c},f,e,j):this._toggleClass(c,d):a.effects.animateClass.call(this,{toggle:c},d,f,e)},switchClass:function(b,c,d,f,e){return a.effects.animateClass.call(this,
{add:c,remove:b},d,f,e)}});var z=function(b,c,d,f){a.isPlainObject(b)&&(c=b,b=b.effect);b={effect:b};null==c&&(c={});a.isFunction(c)&&(f=c,d=null,c={});if("number"==typeof c||a.fx.speeds[c])f=d,d=c,c={};return a.isFunction(d)&&(f=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=f||c.complete,b},D=function(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"==typeof b&&!a.effects.effect[b]?g&&
a.effects[b]?!1:!0:!1};a.extend(a.effects,{version:"1.9.2",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,c){var d,f;for(f=0;f<c.length;f++)null!==c[f]&&(d=a.data("ui-effects-"+c[f]),d===b&&(d=""),a.css(c[f],d))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/
b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:b.width(),height:b.height()},e=document.activeElement;try{e.id}catch(j){e=
document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(f),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;
return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,f){return f=f||{},a.each(c,function(a,c){var e=b.cssUnit(c);0<e[0]&&(f[c]=e[0]*d+e[1])}),f}});a.fn.extend({effect:function(){function b(d){function f(){a.isFunction(h)&&h.call(j[0]);a.isFunction(d)&&d()}var j=a(this),h=c.complete,k=c.mode;(j.is(":hidden")?"hide"===k:"show"===k)?f():e.call(j[0],c,f)}var c=z.apply(this,arguments),d=c.mode,f=c.queue,e=
a.effects.effect[c.effect],j=!e&&g&&a.effects[c.effect];return a.fx.off||!e&&!j?d?this[d](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):e?!1===f?this.each(b):this.queue(f||"fx",b):j.call(this,{options:c,duration:c.duration,callback:c.complete,mode:c.mode})},_show:a.fn.show,show:function(a){if(D(a))return this._show.apply(this,arguments);var b=z.apply(this,arguments);return b.mode="show",this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(D(a))return this._hide.apply(this,
arguments);var b=z.apply(this,arguments);return b.mode="hide",this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(D(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=z.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])}),d}});var y={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){y[b]=
function(b){return Math.pow(b,a+2)}});a.extend(y,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(y,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};
a.easing["easeInOut"+b]=function(a){return 0.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}(jQuery);
(function(a){var b=0,g={},c={};g.height=g.paddingTop=g.paddingBottom=g.borderTopWidth=g.borderBottomWidth="hide";c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++b),d=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();!d.collapsible&&(!1===d.active||null==d.active)&&(d.active=
0);0>d.active&&(d.active+=this.headers.length);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(b){var d=a(this),f=d.attr("id"),e=d.next(),j=e.attr("id");f||(f=c+"-header-"+b,d.attr("id",f));j||(j=c+"-panel-"+b,e.attr("id",j));d.attr("aria-controls",
j);e.attr("aria-labelledby",f)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(d.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"===a&&!b&&!1===this.options.active&&this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,f=this.headers.index(b.target),e=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(f+1)%d];break;case c.LEFT:case c.UP:e=this.headers[(f-1+d)%d];
break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:e=this.headers[0];break;case c.END:e=this.headers[d-1]}e&&(a(b.target).attr("tabIndex",-1),a(e).attr("tabIndex",0),e.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,c,d=this.options.heightStyle,f=this.element.parent();"fill"===d?(a.support.minHeight||(c=f.css("overflow"),f.css("overflow","hidden")),b=f.height(),this.element.siblings(":visible").each(function(){var c=
a(this),d=c.css("position");"absolute"===d||"fixed"===d||(b-=c.outerHeight(!0))}),c&&f.css("overflow",c),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={};b&&(a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._on(this.headers,c))},_eventHandler:function(b){var c=this.options,d=this.active,f=a(b.currentTarget),e=f[0]===d[0],j=e&&c.collapsible,h=j?a():f.next(),k=d.next(),h={oldHeader:d,oldPanel:k,newHeader:j?a():f,newPanel:h};b.preventDefault();e&&!c.collapsible||!1===this._trigger("beforeActivate",
b,h)||(c.active=j?!1:this.headers.index(f),this.active=e?a():f,this._toggle(h),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),e||(f.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&f.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),f.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));d.attr({"aria-expanded":"false","aria-hidden":"true"});d.prev().attr("aria-selected","false");c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,d){var f,e,j,h=this,k=0,l=a.length&&(!b.length||a.index()<b.index()),m=this.options.animate||{},l=l&&m.down||m,n=function(){h._toggleComplete(d)};"number"==typeof l&&(j=l);"string"==typeof l&&(e=l);e=e||l.easing||m.easing;j=j||l.duration||m.duration;if(!b.length)return a.animate(c,j,e,n);if(!a.length)return b.animate(g,j,e,n);f=a.show().outerHeight();b.animate(g,{duration:j,easing:e,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(c,{duration:j,easing:e,complete:n,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?k+=c.now:"content"!==h.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-k),k=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});if(!1!==a.uiBackCompat){var e=jQuery,
d=jQuery.ui.accordion.prototype;e.extend(d.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var h=d._create;d._create=function(){if(this.options.navigation){var a=this,b=this.element.find(this.options.header),c=b.next(),d=b.add(c).find("a").filter(this.options.navigationFilter)[0];d&&b.add(c).each(function(b){if(e.contains(this,d))return a.options.active=Math.floor(b/2),!1})}h.call(this)};var d=jQuery,f=jQuery.ui.accordion.prototype;
d.extend(f.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var j=f._create,k=f._setOption;d.extend(f,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();j.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();k.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}});
d=jQuery.ui.accordion.prototype;jQuery.extend(d.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var l=d._createIcons;d._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);l.call(this)};d=jQuery.ui.accordion.prototype;d.activate=d._activate;var p=d._findActive;d._findActive=function(a){return-1===a&&(a=!1),a&&"number"!=typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&
(a=!1)),p.call(this,a)};jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh;d=jQuery.ui.accordion.prototype;jQuery.extend(d.options,{change:null,changestart:null});var m=d._trigger;d._trigger=function(a,b,c){var d=m.apply(this,arguments);return d?("beforeActivate"===a?d=m.call(this,"changestart",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}):"activate"===a&&(d=m.call(this,"change",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,
newContent:c.newPanel})),d):!1};d=jQuery.ui.accordion.prototype;jQuery.extend(d.options,{animate:null,animated:"slide"});var n=d._create;d._create=function(){var a=this.options;null===a.animate&&(a.animated?"slide"===a.animated?a.animate=300:"bounceslide"===a.animated?a.animate={duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animate=a.animated:a.animate=!1);n.call(this)}}})(jQuery);
(function(a){var b=0;a.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,e;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(d){if(this.element.prop("readOnly"))c=e=b=!0;else{c=e=b=!1;var h=a.ui.keyCode;switch(d.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",d);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",d);break;case h.UP:b=!0;this._keyEvent("previous",d);break;case h.DOWN:b=!0;this._keyEvent("next",d);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,d.preventDefault(),this.menu.select(d));break;case h.TAB:this.menu.active&&this.menu.select(d);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(d),d.preventDefault());break;default:c=!0,this._searchTimeout(d)}}},keypress:function(d){if(b)b=!1,d.preventDefault();else if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){e?(e=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target!==b.element[0]&&d.target!==c&&!a.contains(c,d.target)&&b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var f=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:f})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(f.value):this.liveRegion.text(f.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),e=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);
this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,e=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,e){e(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,
this.source=function(b,h){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){h(a)},error:function(){h([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(e){c===b&&a.__response(e);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var e=this;a.each(c,function(a,c){e._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var e=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);!this.options.disabled&&!this.cancelSearch&&(a&&a.length?b=this.options.messages.results(a.length):b=this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a){var b,g,c,e,d=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,d);"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var f=this,j=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active";null===j.label&&(j.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){j.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){j.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){j.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){f.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){f.buttonElement.removeClass("ui-state-focus")});
k&&(this.element.bind("change"+this.eventNamespace,function(){e||f.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){j.disabled||(e=!1,g=a.pageX,c=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){if(!j.disabled&&(g!==a.pageX||c!==a.pageY))e=!0}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(j.disabled||e)return!1;a(this).toggleClass("ui-state-active");f.buttonElement.attr("aria-pressed",f.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(j.disabled||e)return!1;a(this).addClass("ui-state-active");f.buttonElement.attr("aria-pressed","true");var b=f.element[0];h(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(j.disabled)return!1;a(this).addClass("ui-state-active");b=this;f.document.one("mouseup",function(){b=null})}).bind("mouseup"+
this.eventNamespace,function(){if(j.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(j.disabled)return!1;(b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",j.disabled);
this._resetButton()},_determineButtonType:function(){var a,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,h=[];d.primary||d.secondary?(this.options.text&&h.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(h.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):h.push("ui-button-text-only");b.addClass(h.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,b){function g(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=c(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function c(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(h.inline?b.parent()[0]:h.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(c,d){a.extend(c,d);for(var e in d)if(null==d[e]||d[e]==b)c[e]=d[e];return c}a.extend(a.ui,{datepicker:{version:"1.9.2"}});var d=(new Date).getTime(),h;a.extend(g.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d=null,e;for(e in this._defaults){var h=b.getAttribute("date:"+e);if(h){d=d||{};try{d[e]=eval(h)}catch(g){d[e]=h}}}e=b.nodeName.toLowerCase();h="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var n=this._newInst(a(b),h);n.settings=a.extend({},c||{},d||{});"input"==e?this._connectDatepicker(b,n):h&&this._inlineDatepicker(b,n)},_newInst:function(b,
d){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:d?c(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d=this._get(c,"appendText"),e=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a('<span class="'+this._appendClass+'">'+d+"</span>"),b[e?"before":"after"](c.append));b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");("focus"==
d||"both"==d)&&b.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(c,"buttonText"),h=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:h,alt:d,title:d}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==h?d:a("<img/>").attr({src:h,alt:d,title:d})));b[e?"before":"after"](c.trigger);c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,
c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&
this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,h,g){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));e(b.settings,h||{});c=c&&c.constructor==Date?this._formatDate(b,
c):c;this._dialogInput.val(c);this._pos=g?g.length?g:[g.pageX,g.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),b.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),
a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",b),this},_destroyDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&c.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().removeClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,d,h){var g=this._getInst(c);if(2==arguments.length&&"string"==typeof d)return"defaults"==
d?a.extend({},a.datepicker._defaults):g?"all"==d?a.extend({},g.settings):this._get(g,d):null;var p=d||{};"string"==typeof d&&(p={},p[d]=h);if(g){this._curInst==g&&this._hideDatepicker();var m=this._getDateDatepicker(c,!0),n=this._getMinMaxDate(g,"min"),r=this._getMinMaxDate(g,"max");e(g.settings,p);null!==n&&p.dateFormat!==b&&p.minDate===b&&(g.settings.minDate=this._formatDate(g,n));null!==r&&p.dateFormat!==b&&p.maxDate===b&&(g.settings.maxDate=this._formatDate(g,r));this._attachments(a(c),g);this._autoSize(g);
this._setDate(g,m);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c=
a.datepicker._getInst(b.target),d=!0,e=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();d=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv),d[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,d[0]),(b=a.datepicker._get(c,"onSelect"))?(d=a.datepicker._formatDate(c),b.apply(c.input?c.input[0]:null,[d,c])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d=a.datepicker._getInst(c.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(c.charCode==
b?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(c){a.datepicker.log(c)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var c=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var d=a.datepicker._get(c,"beforeShow"),d=d?d.apply(b,[b,c]):{};if(!1!==d){e(c.settings,d);c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var h=!1;a(b).parents().each(function(){return h|="fixed"==a(this).css("position"),!h});d={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);d=a.datepicker._checkOffset(c,d,h);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":
"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!c.inline){var d=a.datepicker._get(c,"showAnim"),g=a.datepicker._get(c,"duration"),m=function(){var b=c.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var d=a.datepicker._getBorders(c.dpDiv);b.css({left:-d[0],top:-d[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;a.effects&&(a.effects.effect[d]||a.effects[d])?c.dpDiv.show(d,a.datepicker._get(c,"showOptions"),
g,m):c.dpDiv[d||"show"](d?g:null,m);(!d||!g)&&m();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.datepicker._curInst=c}}}},_updateDatepicker:function(b){this.maxRows=4;var c=a.datepicker._getBorders(b.dpDiv);h=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var d=b.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
c=this._getNumberOfMonths(b);d=c[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!=c[0]||1!=c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),h=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,n=b.input?b.input.outerHeight():
0,r=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),s=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top==b.input.offset().top+n?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>r&&r>e?Math.abs(c.left+e-r):0),c.top-=Math.min(c.top,c.top+h>s&&s>h?Math.abs(h+n):0),c},_findPos:function(b){for(var c=this._getInst(b),c=this._get(c,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(c&&!(b&&c!=a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(c,"showAnim");var d=this._get(c,"duration"),e=function(){a.datepicker._tidyDialog(c)};a.effects&&(a.effects.effect[b]||a.effects[b])?c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),d,e):c.dpDiv["slideDown"==b?"slideUp":"fadeIn"==
b?"fadeOut":"hide"](b?d:null,e);b||e();this._datepickerShowing=!1;(b=this._get(c,"onClose"))&&b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);
var c=a.datepicker._getInst(b[0]);(b[0].id!=a.datepicker._mainDivId&&0==b.parents("#"+a.datepicker._mainDivId).length&&!b.hasClass(a.datepicker.markerClassName)&&!b.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
c+("M"==d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,d){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==d?"Month":"Year")]=e["draw"+("M"==d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,c,d,e){var h=a(b);!a(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(h[0])&&(h=this._getInst(h[0]),h.selectedDay=h.currentDay=a("a",e).html(),h.selectedMonth=h.currentMonth=c,h.selectedYear=h.currentYear=d,this._selectDate(b,this._formatDate(h,h.currentDay,h.currentMonth,h.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var d=a(b),d=this._getInst(d[0]);c=null!=c?c:this._formatDate(d);d.input&&d.input.val(c);this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[c,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c=
this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),h=this.formatDate(d,e,this._getFormatConfig(b));a(c).each(function(){a(this).val(h)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";
c="object"==typeof c?c.toString():c+"";if(""==c)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),h=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,g=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,r=(d?d.monthNames:null)||this._defaults.monthNames,s=d=-1,v=-1,A=-1,w=!1,z=function(a){a=S+1<b.length&&b.charAt(S+1)==a;return a&&S++,a},D=function(a){var b=
z(a);a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=c.substring(I).match(a);if(!a)throw"Missing number at position "+I;return I+=a[0].length,parseInt(a[0],10)},y=function(b,d,f){b=a.map(z(b)?f:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var e=-1;a.each(b,function(a,b){var d=b[1];if(c.substr(I,d.length).toLowerCase()==d.toLowerCase())return e=b[0],I+=d.length,!1});if(-1!=e)return e+1;throw"Unknown name at position "+I;},B=function(){if(c.charAt(I)!=
b.charAt(S))throw"Unexpected literal at position "+I;I++},I=0,S=0;S<b.length;S++)if(w)"'"==b.charAt(S)&&!z("'")?w=!1:B();else switch(b.charAt(S)){case "d":v=D("d");break;case "D":y("D",h,g);break;case "o":A=D("o");break;case "m":s=D("m");break;case "M":s=y("M",n,r);break;case "y":d=D("y");break;case "@":var J=new Date(D("@"));d=J.getFullYear();s=J.getMonth()+1;v=J.getDate();break;case "!":J=new Date((D("!")-this._ticksTo1970)/1E4);d=J.getFullYear();s=J.getMonth()+1;v=J.getDate();break;case "'":z("'")?
B():w=!0;break;default:B()}if(I<c.length&&(h=c.substr(I),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<A){s=1;v=A;do{e=this._getDaysInMonth(d,s-1);if(v<=e)break;s++;v-=e}while(1)}J=this._daylightSavingAdjust(new Date(d,s-1,v));if(J.getFullYear()!=d||J.getMonth()+1!=s||J.getDate()!=v)throw"Invalid date";return J},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var g=
function(b){b=A+1<a.length&&a.charAt(A+1)==b;return b&&A++,b},r=function(a,b,c){b=""+b;if(g(a))for(;b.length<c;)b="0"+b;return b},s="",v=!1;if(b)for(var A=0;A<a.length;A++)if(v)"'"==a.charAt(A)&&!g("'")?v=!1:s+=a.charAt(A);else switch(a.charAt(A)){case "d":s+=r("d",b.getDate(),2);break;case "D":var w;w=b.getDay();var z=d,D=e;w=g("D")?D[w]:z[w];s+=w;break;case "o":s+=r("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);
break;case "m":s+=r("m",b.getMonth()+1,2);break;case "M":w=b.getMonth();z=h;D=c;w=g("M")?D[w]:z[w];s+=w;break;case "y":s+=g("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":s+=b.getTime();break;case "!":s+=1E4*b.getTime()+this._ticksTo1970;break;case "'":g("'")?s+="'":v=!0;break;default:s+=a.charAt(A)}return s},_possibleChars:function(a){for(var b="",c=!1,d=function(b){b=e+1<a.length&&a.charAt(e+1)==b;return b&&e++,b},e=0;e<a.length;e++)if(c)"'"==a.charAt(e)&&!d("'")?
c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,h;e=h=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||
h}catch(r){this.log(r),d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){if(null==c||""===c)c=d;else{var e;if("string"==typeof c)a:{try{e=a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),c,a.datepicker._getFormatConfig(b));break a}catch(h){}var g=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date;b=g.getFullYear();e=g.getMonth();for(var g=g.getDate(),n=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=n.exec(c);r;){switch(r[2]||"d"){case "d":case "D":g+=parseInt(r[1],10);break;case "w":case "W":g+=7*parseInt(r[1],10);break;case "m":case "M":e+=parseInt(r[1],10);g=Math.min(g,a.datepicker._getDaysInMonth(b,e));break;case "y":case "Y":b+=parseInt(r[1],10),g=Math.min(g,
a.datepicker._getDaysInMonth(b,e))}r=n.exec(c)}e=new Date(b,e,g)}else"number"==typeof c?isNaN(c)?c=d:(b=new Date,c=(b.setDate(b.getDate()+c),b)):c=new Date(c.getTime()),e=c;c=e}return c=c&&"Invalid Date"==c.toString()?d:c,c&&(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)),this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){return a?(a.setHours(12<a.getHours()?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,
this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(e!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=
this._get(b,"stepMonths"),e="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+d].datepicker._adjustDate(e,-c,"M")},next:function(){window["DP_jQuery_"+d].datepicker._adjustDate(e,+c,"M")},hide:function(){window["DP_jQuery_"+d].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+d].datepicker._gotoToday(e)},selectDay:function(){return window["DP_jQuery_"+d].datepicker._selectDay(e,
+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+d].datepicker._selectMonthYear(e,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+d].datepicker._selectMonthYear(e,this,"Y"),!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var c=new Date,c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate())),d=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),h=this._get(b,"hideIfNoPrevNext"),
g=this._get(b,"navigationAsDateFormat"),n=this._getNumberOfMonths(b),r=this._get(b,"showCurrentAtPos"),s=this._get(b,"stepMonths"),v=1!=n[0]||1!=n[1],A=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(b,"min"),z=this._getMinMaxDate(b,"max"),r=b.drawMonth-r,D=b.drawYear;0>r&&(r+=12,D--);if(z)for(var y=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth()-n[0]*n[1]+1,z.getDate())),y=w&&y<w?w:y;this._daylightSavingAdjust(new Date(D,
r,1))>y;)r--,0>r&&(r=11,D--);b.drawMonth=r;b.drawYear=D;var y=this._get(b,"prevText"),y=g?this.formatDate(y,this._daylightSavingAdjust(new Date(D,r-s,1)),this._getFormatConfig(b)):y,y=this._canAdjustMonth(b,-1,D,r)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+y+"</span></a>":h?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"e":"w")+'">'+y+"</span></a>",B=this._get(b,"nextText"),B=g?this.formatDate(B,this._daylightSavingAdjust(new Date(D,r+s,1)),this._getFormatConfig(b)):B,h=this._canAdjustMonth(b,1,D,r)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+B+"</span></a>":h?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":
"e")+'">'+B+"</span></a>",s=this._get(b,"currentText"),B=this._get(b,"gotoCurrent")&&b.currentDay?A:c,s=g?this.formatDate(s,B,this._getFormatConfig(b)):s,g=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?g:"")+(this._isInRange(b,B)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
s+"</button>":"")+(d?"":g)+"</div>":"",g=parseInt(this._get(b,"firstDay"),10),g=isNaN(g)?0:g,s=this._get(b,"showWeek"),B=this._get(b,"dayNames");this._get(b,"dayNamesShort");var I=this._get(b,"dayNamesMin"),S=this._get(b,"monthNames"),J=this._get(b,"monthNamesShort"),O=this._get(b,"beforeShowDay"),V=this._get(b,"showOtherMonths"),N=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var P=this._getDefaultDate(b),U="",W=0;W<n[0];W++){var ca="";this.maxRows=4;for(var R=0;R<n[1];R++){var Z=
this._daylightSavingAdjust(new Date(D,r,b.selectedDay)),ea=" ui-corner-all",la="";if(v){la+='<div class="ui-datepicker-group';if(1<n[1])switch(R){case 0:la+=" ui-datepicker-group-first";ea=" ui-corner-"+(d?"right":"left");break;case n[1]-1:la+=" ui-datepicker-group-last";ea=" ui-corner-"+(d?"left":"right");break;default:la+=" ui-datepicker-group-middle",ea=""}la+='">'}for(var la=la+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+ea+'">'+(/all|left/.test(ea)&&0==W?d?h:y:"")+
(/all|right/.test(ea)&&0==W?d?y:h:"")+this._generateMonthYearHeader(b,r,D,w,z,0<W||0<R,S,J)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),va=s?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",ea=0;7>ea;ea++)var H=(ea+g)%7,va=va+("<th"+(5<=(ea+g+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+B[H]+'">'+I[H]+"</span></th>");la+=va+"</tr></thead><tbody>";va=this._getDaysInMonth(D,r);D==b.selectedYear&&r==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,
va));ea=(this._getFirstDayOfMonth(D,r)-g+7)%7;va=Math.ceil((ea+va)/7);this.maxRows=va=v?this.maxRows>va?this.maxRows:va:va;for(var H=this._daylightSavingAdjust(new Date(D,r,1-ea)),M=0;M<va;M++){for(var la=la+"<tr>",F=s?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(H)+"</td>":"",ea=0;7>ea;ea++){var Ba=O?O.apply(b.input?b.input[0]:null,[H]):[!0,""],X=H.getMonth()!=r,ta=X&&!N||!Ba[0]||w&&H<w||z&&H>z,F=F+('<td class="'+(5<=(ea+g+6)%7?" ui-datepicker-week-end":"")+(X?" ui-datepicker-other-month":
"")+(H.getTime()==Z.getTime()&&r==b.selectedMonth&&b._keyEvent||P.getTime()==H.getTime()&&P.getTime()==Z.getTime()?" "+this._dayOverClass:"")+(ta?" "+this._unselectableClass+" ui-state-disabled":"")+(X&&!V?"":" "+Ba[1]+(H.getTime()==A.getTime()?" "+this._currentClass:"")+(H.getTime()==c.getTime()?" ui-datepicker-today":""))+'"'+((!X||V)&&Ba[2]?' title="'+Ba[2]+'"':"")+(ta?"":' data-handler="selectDay" data-event="click" data-month="'+H.getMonth()+'" data-year="'+H.getFullYear()+'"')+">"+(X&&!V?"&#xa0;":
ta?'<span class="ui-state-default">'+H.getDate()+"</span>":'<a class="ui-state-default'+(H.getTime()==c.getTime()?" ui-state-highlight":"")+(H.getTime()==A.getTime()?" ui-state-active":"")+(X?" ui-priority-secondary":"")+'" href="#">'+H.getDate()+"</a>")+"</td>");H.setDate(H.getDate()+1);H=this._daylightSavingAdjust(H)}la+=F+"</tr>"}r++;11<r&&(r=0,D++);la+="</tbody></table>"+(v?"</div>"+(0<n[0]&&R==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");ca+=la}U+=ca}return U+=e+(a.ui.ie6&&!b.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),b._keyEvent=!1,U},_generateMonthYearHeader:function(a,b,c,d,e,h,g,r){var s=this._get(a,"changeMonth"),v=this._get(a,"changeYear"),A=this._get(a,"showMonthAfterYear"),w='<div class="ui-datepicker-title">',z="";if(h||!s)z+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{g=d&&d.getFullYear()==c;for(var D=e&&e.getFullYear()==c,z=z+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
y=0;12>y;y++)(!g||y>=d.getMonth())&&(!D||y<=e.getMonth())&&(z+='<option value="'+y+'"'+(y==b?' selected="selected"':"")+">"+r[y]+"</option>");z+="</select>"}A||(w+=z+(h||!s||!v?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!v)w+='<span class="ui-datepicker-year">'+c+"</span>";else{r=this._get(a,"yearRange").split(":");var B=(new Date).getFullYear();g=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?B+parseInt(a,10):parseInt(a,10);return isNaN(a)?B:a};b=g(r[0]);
r=Math.max(b,g(r[1]||""));b=d?Math.max(b,d.getFullYear()):b;r=e?Math.min(r,e.getFullYear()):r;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=r;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";w+=a.yearshtml;a.yearshtml=null}return w+=this._get(a,"yearSuffix"),A&&(w+=(h||!s||!v?"&#xa0;":"")+z),w+="</div>",w},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+
("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return c=d&&c>d?d:c,c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,
d+(0>b?b:e[0]*e[1]),1));return 0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;
a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!=b&&"getDate"!=b&&"widget"!=b?"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))};a.datepicker=new g;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.9.2";window["DP_jQuery_"+d]=a})(jQuery);
(function(a,b){var g={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",
b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!=typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,c=this.options,h=c.title||"&#160;",f,j,g,l;f=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(f){c.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===a.ui.keyCode.ESCAPE&&(b.close(f),f.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);j=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){f.focus()}).prependTo(f);g=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(j);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(g);h=a("<span>").uniqueId().addClass("ui-dialog-title").html(h).prependTo(j);l=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(l);f.attr({role:"dialog","aria-labelledby":h.attr("id")});j.find("*").add(j).disableSelection();this._hoverable(g);this._focusable(g);c.draggable&&a.fn.draggable&&this._makeDraggable();c.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;a.fn.bgiframe&&f.bgiframe();this._on(f,{keydown:function(b){if(c.modal&&b.keyCode===a.ui.keyCode.TAB){var e=a(":tabbable",f),h=e.filter(":first"),e=e.filter(":last");
if(b.target===e[0]&&!b.shiftKey)return h.focus(1),!1;if(b.target===h[0]&&b.shiftKey)return e.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var c=this,h,f;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(h=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(f=a(this).css("z-index"),
isNaN(f)||(h=Math.max(h,f)))}),a.ui.dialog.maxZ=h),this},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var h=this.options,f;return h.modal&&!b||!h.stack&&!h.modal?this._trigger("focus",c):(h.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=h.zIndex),this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ)),f={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},a.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",
a.ui.dialog.maxZ),this.element.attr(f),this._trigger("focus",c),this)},open:function(){if(!this._isOpen){var b,c=this.options,h=this.uiDialog;return this._size(),this._position(c.position),h.show(c.show),this.overlay=c.modal?new a.ui.dialog.overlay(this):null,this.moveToTop(!0),b=this.element.find(":tabbable"),b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=h)),b.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(b){var c=this,h=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"==typeof b&&null!==b&&a.each(b,function(){return!(h=!0)});h?(a.each(b,function(b,e){var h,g;e=a.isFunction(e)?{click:e,text:b}:e;e=a.extend({type:"button"},e);g=e.click;e.click=function(){g.apply(c.element[0],arguments)};h=a("<button></button>",e).appendTo(c.uiButtonSet);a.fn.button&&h.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var c=this,h=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){a(this).addClass("ui-dialog-dragging");c._trigger("dragStart",f,b(h))},drag:function(a,h){c._trigger("drag",a,b(h))},stop:function(f,j){h.position=[j.position.left-c.document.scrollLeft(),j.position.top-c.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",f,b(j));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var h=this,f=this.options,j=this.uiDialog.css("position");c="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:this._minHeight(),handles:c,start:function(b,c){a(this).addClass("ui-dialog-resizing");
h._trigger("resizeStart",b,d(c))},resize:function(a,b){h._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");f.height=a(this).height();f.width=a(this).width();h._trigger("resizeStop",b,d(c));a.ui.dialog.overlay.resize()}}).css("position",j).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],h=[0,0],f;if(b){if("string"==
typeof b||"object"==typeof b&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(h[a]=c[a],c[a]=b)}),b={my:c[0]+(0>h[0]?h[0]:"+"+h[0])+" "+c[1]+(0>h[1]?h[1]:"+"+h[1]),at:c.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(f=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);f||this.uiDialog.hide()},_setOptions:function(b){var d=this,h={},f=
!1;a.each(b,function(a,b){d._setOption(a,b);a in g&&(f=!0);a in c&&(h[a]=b)});f&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",h)},_setOption:function(b,c){var h,f=this.uiDialog;switch(b){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":f.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?f.addClass("ui-dialog-disabled"):
f.removeClass("ui-dialog-disabled");break;case "draggable":(h=f.is(":data(draggable)"))&&!c&&f.draggable("destroy");!h&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(h=f.is(":data(resizable)"))&&!c&&f.resizable("destroy");h&&"string"==typeof c&&f.resizable("option","handles",c);!h&&!1!==c&&this._makeResizable(c);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(b,c)},_size:function(){var b,c,h,f=this.options,
j=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});f.minWidth>f.width&&(f.width=f.minWidth);b=this.uiDialog.css({height:"auto",width:f.width}).outerHeight();c=Math.max(0,f.minHeight-b);"auto"===f.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),h=this.element.css("height","auto").height(),j||this.uiDialog.hide(),this.element.height(Math.max(h,c))):this.element.height(Math.max(f.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");return a||(this.uuid+=1,a=this.uuid),"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");return a(document).bind("keydown.dialog-overlay",function(h){var f=a.ui.dialog.overlay.instances;0!==f.length&&f[f.length-1]===c&&b.options.closeOnEscape&&!h.isDefaultPrevented()&&h.keyCode&&h.keyCode===a.ui.keyCode.ESCAPE&&(b.close(h),h.preventDefault())}),
c.appendTo(document.body).css({width:this.width(),height:this.height()}),a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances),h=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){h=Math.max(h,this.css("z-index"))});this.maxZ=h},height:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a){var b=/up|down|vertical/,g=/up|left|vertical|horizontal/;a.effects.effect.blind=function(c,e){var d=a(this),h="position top bottom left right height width".split(" "),f=a.effects.setMode(d,c.mode||"hide"),j=c.direction||"up",k=b.test(j),l=k?"height":"width",p=k?"top":"left",j=g.test(j),m={},n="show"===f,r,s,v;d.parent().is(".ui-effects-wrapper")?a.effects.save(d.parent(),h):a.effects.save(d,h);d.show();r=a.effects.createWrapper(d).css({overflow:"hidden"});s=r[l]();v=parseFloat(r.css(p))||
0;m[l]=n?s:0;j||(d.css(k?"bottom":"right",0).css(k?"top":"left","auto").css({position:"absolute"}),m[p]=n?v:s+v);n&&(r.css(l,0),j||r.css(p,v+s));r.animate(m,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,h);a.effects.removeWrapper(d);e()}})}})(jQuery);
(function(a){a.effects.effect.bounce=function(b,g){var c=a(this),e="position top bottom left right height width".split(" "),d=a.effects.setMode(c,b.mode||"effect"),h="hide"===d,f="show"===d,j=b.direction||"up",d=b.distance,k=b.times||5,l=2*k+(f||h?1:0),p=b.duration/l,m=b.easing,n="up"===j||"down"===j?"top":"left",j="up"===j||"left"===j,r,s,v=c.queue(),A=v.length;(f||h)&&e.push("opacity");a.effects.save(c,e);c.show();a.effects.createWrapper(c);d||(d=c["top"===n?"outerHeight":"outerWidth"]()/3);f&&
(s={opacity:1},s[n]=0,c.css("opacity",0).css(n,j?2*-d:2*d).animate(s,p,m));h&&(d/=Math.pow(2,k-1));s={};for(f=s[n]=0;f<k;f++)r={},r[n]=(j?"-=":"+=")+d,c.animate(r,p,m).animate(s,p,m),d=h?2*d:d/2;h&&(r={opacity:0},r[n]=(j?"-=":"+=")+d,c.animate(r,p,m));c.queue(function(){h&&c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()});1<A&&v.splice.apply(v,[1,0].concat(v.splice(A,l+1)));c.dequeue()}})(jQuery);
(function(a){a.effects.effect.clip=function(b,g){var c=a(this),e="position top bottom left right height width".split(" "),d="show"===a.effects.setMode(c,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),f=h?"height":"width",h=h?"top":"left",j={},k,l;a.effects.save(c,e);c.show();k=a.effects.createWrapper(c).css({overflow:"hidden"});k="IMG"===c[0].tagName?k:c;l=k[f]();d&&(k.css(f,0),k.css(h,l/2));j[f]=d?l:0;j[h]=d?0:l/2;k.animate(j,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){d||
c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()}})}})(jQuery);
(function(a){a.effects.effect.drop=function(b,g){var c=a(this),e="position top bottom left right opacity height width".split(" "),d=a.effects.setMode(c,b.mode||"hide"),h="show"===d,f=b.direction||"left",j="up"===f||"down"===f?"top":"left",f="up"===f||"left"===f?"pos":"neg",k={opacity:h?1:0},l;a.effects.save(c,e);c.show();a.effects.createWrapper(c);l=b.distance||c["top"===j?"outerHeight":"outerWidth"](!0)/2;h&&c.css("opacity",0).css(j,"pos"===f?-l:l);k[j]=(h?"pos"===f?"+=":"-=":"pos"===f?"-=":"+=")+
l;c.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===d&&c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()}})}})(jQuery);
(function(a){a.effects.effect.explode=function(b,g){function c(){p.push(this);p.length===e*d&&(h.css({visibility:"visible"}),a(p).remove(),f||h.hide(),g())}var e=b.pieces?Math.round(Math.sqrt(b.pieces)):3,d=e,h=a(this),f="show"===a.effects.setMode(h,b.mode||"hide"),j=h.show().css("visibility","hidden").offset(),k=Math.ceil(h.outerWidth()/d),l=Math.ceil(h.outerHeight()/e),p=[],m,n,r,s,v,A;for(m=0;m<e;m++){s=j.top+m*l;A=m-(e-1)/2;for(n=0;n<d;n++)r=j.left+n*k,v=n-(d-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-n*k,top:-m*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:k,height:l,left:r+(f?v*k:0),top:s+(f?A*l:0),opacity:f?0:1}).animate({left:r+(f?0:v*k),top:s+(f?0:A*l),opacity:f?1:0},b.duration||500,b.easing,c)}}})(jQuery);(function(a){a.effects.effect.fade=function(b,g){var c=a(this),e=a.effects.setMode(c,b.mode||"toggle");c.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:g})}})(jQuery);
(function(a){a.effects.effect.fold=function(b,g){var c=a(this),e="position top bottom left right height width".split(" "),d=a.effects.setMode(c,b.mode||"hide"),h="show"===d,f="hide"===d,d=b.size||15,j=/([0-9]+)%/.exec(d),k=!!b.horizFirst,l=h!==k,p=l?["width","height"]:["height","width"],m=b.duration/2,n,r={},s={};a.effects.save(c,e);c.show();n=a.effects.createWrapper(c).css({overflow:"hidden"});l=l?[n.width(),n.height()]:[n.height(),n.width()];j&&(d=parseInt(j[1],10)/100*l[f?0:1]);h&&n.css(k?{height:0,
width:d}:{height:d,width:0});r[p[0]]=h?l[0]:d;s[p[1]]=h?l[1]:0;n.animate(r,m,b.easing).animate(s,m,b.easing,function(){f&&c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()})}})(jQuery);
(function(a){a.effects.effect.highlight=function(b,g){var c=a(this),e=["backgroundImage","backgroundColor","opacity"],d=a.effects.setMode(c,b.mode||"show"),h={backgroundColor:c.css("backgroundColor")};"hide"===d&&(h.opacity=0);a.effects.save(c,e);c.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===d&&c.hide();a.effects.restore(c,e);g()}})}})(jQuery);
(function(a){a.effects.effect.pulsate=function(b,g){var c=a(this),e=a.effects.setMode(c,b.mode||"show"),d="show"===e,h="hide"===e,e=2*(b.times||5)+(d||"hide"===e?1:0),f=b.duration/e,j=0,k=c.queue(),l=k.length;if(d||!c.is(":visible"))c.css("opacity",0).show(),j=1;for(d=1;d<e;d++)c.animate({opacity:j},f,b.easing),j=1-j;c.animate({opacity:j},f,b.easing);c.queue(function(){h&&c.hide();g()});1<l&&k.splice.apply(k,[1,0].concat(k.splice(l,e+1)));c.dequeue()}})(jQuery);
(function(a){a.effects.effect.puff=function(b,g){var c=a(this),e=a.effects.setMode(c,b.mode||"hide"),d="hide"===e,h=parseInt(b.percent,10)||150,f=h/100,j={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:g,percent:d?h:100,from:d?j:{height:j.height*f,width:j.width*f,outerHeight:j.outerHeight*f,outerWidth:j.outerWidth*f}});c.effect(b)};a.effects.effect.scale=function(b,g){var c=a(this),e=a.extend(!0,
{},b),d=a.effects.setMode(c,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===d?0:100),f=b.direction||"both",j=b.origin,k={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},l="horizontal"!==f?h/100:1,h="vertical"!==f?h/100:1;e.effect="size";e.queue=!1;e.complete=g;"effect"!==d&&(e.origin=j||["middle","center"],e.restore=!0);e.from=b.from||("show"===d?{height:0,width:0,outerHeight:0,outerWidth:0}:k);e.to={height:k.height*l,width:k.width*
h,outerHeight:k.outerHeight*l,outerWidth:k.outerWidth*h};e.fade&&("show"===d&&(e.from.opacity=0,e.to.opacity=1),"hide"===d&&(e.from.opacity=1,e.to.opacity=0));c.effect(e)};a.effects.effect.size=function(b,g){var c,e,d,h,f,j,k=a(this),l="position top bottom left right width height overflow opacity".split(" ");f="position top bottom left right overflow opacity".split(" ");var p=["width","height","overflow"],m=["fontSize"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=["borderLeftWidth",
"borderRightWidth","paddingLeft","paddingRight"],s=a.effects.setMode(k,b.mode||"effect"),v=b.restore||"effect"!==s,A=b.scale||"both",w=b.origin||["middle","center"],z=k.css("position"),D=v?l:f,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===s&&k.show();f={height:k.height(),width:k.width(),outerHeight:k.outerHeight(),outerWidth:k.outerWidth()};"toggle"===b.mode&&"show"===s?(k.from=b.to||y,k.to=b.from||f):(k.from=b.from||("show"===s?y:f),k.to=b.to||("hide"===s?y:f));d=k.from.height/f.height;
h=k.from.width/f.width;c=k.to.height/f.height;e=k.to.width/f.width;if("box"===A||"both"===A)d!==c&&(D=D.concat(n),k.from=a.effects.setTransition(k,n,d,k.from),k.to=a.effects.setTransition(k,n,c,k.to)),h!==e&&(D=D.concat(r),k.from=a.effects.setTransition(k,r,h,k.from),k.to=a.effects.setTransition(k,r,e,k.to));("content"===A||"both"===A)&&d!==c&&(D=D.concat(m).concat(p),k.from=a.effects.setTransition(k,m,d,k.from),k.to=a.effects.setTransition(k,m,c,k.to));a.effects.save(k,D);k.show();a.effects.createWrapper(k);
k.css("overflow","hidden").css(k.from);w&&(j=a.effects.getBaseline(w,f),k.from.top=(f.outerHeight-k.outerHeight())*j.y,k.from.left=(f.outerWidth-k.outerWidth())*j.x,k.to.top=(f.outerHeight-k.to.outerHeight)*j.y,k.to.left=(f.outerWidth-k.to.outerWidth)*j.x);k.css(k.from);if("content"===A||"both"===A)n=n.concat(["marginTop","marginBottom"]).concat(m),r=r.concat(["marginLeft","marginRight"]),p=l.concat(n).concat(r),k.find("*[width]").each(function(){var f=a(this),j=f.height(),g=f.width(),k=f.outerHeight(),
l=f.outerWidth();v&&a.effects.save(f,p);f.from={height:j*d,width:g*h,outerHeight:k*d,outerWidth:l*h};f.to={height:j*c,width:g*e,outerHeight:j*c,outerWidth:g*e};d!==c&&(f.from=a.effects.setTransition(f,n,d,f.from),f.to=a.effects.setTransition(f,n,c,f.to));h!==e&&(f.from=a.effects.setTransition(f,r,h,f.from),f.to=a.effects.setTransition(f,r,e,f.to));f.css(f.from);f.animate(f.to,b.duration,b.easing,function(){v&&a.effects.restore(f,p)})});k.animate(k.to,{queue:!1,duration:b.duration,easing:b.easing,
complete:function(){0===k.to.opacity&&k.css("opacity",k.from.opacity);"hide"===s&&k.hide();a.effects.restore(k,D);v||("static"===z?k.css({position:"relative",top:k.to.top,left:k.to.left}):a.each(["top","left"],function(a,b){k.css(b,function(b,c){var d=parseInt(c,10),e=a?k.to.left:k.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(k);g()}})}})(jQuery);
(function(a){a.effects.effect.shake=function(b,g){var c=a(this),e="position top bottom left right height width".split(" "),d=a.effects.setMode(c,b.mode||"effect"),h=b.direction||"left",f=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),p="up"===h||"down"===h?"top":"left",m="up"===h||"left"===h,h={},n={},r={},s=c.queue(),v=s.length;a.effects.save(c,e);c.show();a.effects.createWrapper(c);h[p]=(m?"-=":"+=")+f;n[p]=(m?"+=":"-=")+2*f;r[p]=(m?"-=":"+=")+2*f;c.animate(h,l,b.easing);for(f=1;f<
j;f++)c.animate(n,l,b.easing).animate(r,l,b.easing);c.animate(n,l,b.easing).animate(h,l/2,b.easing).queue(function(){"hide"===d&&c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()});1<v&&s.splice.apply(s,[1,0].concat(s.splice(v,k+1)));c.dequeue()}})(jQuery);
(function(a){a.effects.effect.slide=function(b,g){var c=a(this),e="position top bottom left right width height".split(" "),d=a.effects.setMode(c,b.mode||"show"),h="show"===d,f=b.direction||"left",j="up"===f||"down"===f?"top":"left",f="up"===f||"left"===f,k,l={};a.effects.save(c,e);c.show();k=b.distance||c["top"===j?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(c).css({overflow:"hidden"});h&&c.css(j,f?isNaN(k)?"-"+k:-k:k);l[j]=(h?f?"+=":"-=":f?"-=":"+=")+k;c.animate(l,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===d&&c.hide();a.effects.restore(c,e);a.effects.removeWrapper(c);g()}})}})(jQuery);
(function(a){a.effects.effect.transfer=function(b,g){var c=a(this),e=a(b.to),d="fixed"===e.css("position"),h=a("body"),f=d?h.scrollTop():0,h=d?h.scrollLeft():0,j=e.offset(),e={top:j.top-f,left:j.left-h,height:e.innerHeight(),width:e.innerWidth()},j=c.offset(),k=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:j.top-f,left:j.left-h,height:c.innerHeight(),width:c.innerWidth(),position:d?"fixed":"absolute"}).animate(e,b.duration,b.easing,function(){k.remove();
g()})}})(jQuery);
(function(a){var b=!1;a.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(g){var c=a(g.target).closest(".ui-menu-item");!b&&c.not(".ui-state-disabled").length&&(b=!0,this.select(g),c.has(".ui-menu").length?this.expand(g):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var e=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,e)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(g){a(g.target).closest(".ui-menu").length||this.collapseAll(g);b=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var e,d,h,f,j=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:j=!1,e=this.previousFilter||"",d=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),d===e?h=!0:d=e+d,f=RegExp("^"+c(d),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return f.test(a(this).children("a").text())}),e=h&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e,e.length||(d=String.fromCharCode(b.keyCode),f=RegExp("^"+c(d),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return f.test(a(this).children("a").text())})),
e.length?(this.focus(b,e),1<e.length?(this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}j&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu;b=this.element.find(this.options.menus);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),h=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(h);b.attr("aria-labelledby",d.attr("id"))});b=b.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=
a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var e;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();e=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",
e.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);e=b.children(".ui-menu");e.length&&/^mouse/.test(a.type)&&this._startOpening(e);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,e,d,h,f,j;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,e=parseFloat(a.css(this.activeMenu[0],
"paddingTop"))||0,d=b.offset().top-this.activeMenu.offset().top-c-e,h=this.activeMenu.scrollTop(),f=this.activeMenu.height(),j=b.height(),0>d?this.activeMenu.scrollTop(h+d):d+j>f&&this.activeMenu.scrollTop(h+d-f+j))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();
this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var e=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element);this._close(e);this.blur(b);
this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,e){var d;this.active&&("first"===a||"last"===a?d=this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):d=this.active[a+
"All"](".ui-menu-item").eq(0));if(!d||!d.length||!this.active)d=this.activeMenu.children(".ui-menu-item")[b]();this.focus(e,d)},nextPage:function(b){var c,e,d;this.active?this.isLastItem()||(this._hasScroll()?(e=this.active.offset().top,d=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-e-d}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,
e,d;this.active?this.isFirstItem()||(this._hasScroll()?(e=this.active.offset().top,d=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),0<c.offset().top-e+d}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,b){function g(a,b,c){return[parseInt(a[0],10)*(p.test(a[0])?b/100:1),parseInt(a[1],10)*(p.test(a[1])?c/100:1)]}a.ui=a.ui||{};var c,e=Math.max,d=Math.abs,h=Math.round,f=/left|center|right/,j=/top|center|bottom/,k=/[\+\-]\d+%?/,l=/^\w+/,p=/%$/,m=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),h=f.children()[0];return a("body").append(f),
d=h.offsetWidth,f.css("overflow","scroll"),e=h.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),d="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:"scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var c=a.isWindow(b[0]);return{element:b,
isWindow:c,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c?b.width():b.outerWidth(),height:c?b.height():b.outerHeight()}}};a.fn.position=function(b){if(!b||!b.of)return m.apply(this,arguments);b=a.extend({},b);var c,n,p,r,s,v=a(b.of),z=a.position.getWithinInfo(b.within),A=a.position.getScrollInfo(z),w=v[0],U=(b.collision||"flip").split(" "),W={};return 9===w.nodeType?(n=v.width(),p=v.height(),r={top:0,left:0}):a.isWindow(w)?(n=v.width(),p=v.height(),r={top:v.scrollTop(),
left:v.scrollLeft()}):w.preventDefault?(b.at="left top",n=p=0,r={top:w.pageY,left:w.pageX}):(n=v.outerWidth(),p=v.outerHeight(),r=v.offset()),s=a.extend({},r),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;1===a.length&&(a=f.test(a[0])?a.concat(["center"]):j.test(a[0])?["center"].concat(a):["center","center"]);a[0]=f.test(a[0])?a[0]:"center";a[1]=j.test(a[1])?a[1]:"center";c=k.exec(a[0]);d=k.exec(a[1]);W[this]=[c?c[0]:0,d?d[0]:0];b[this]=[l.exec(a[0])[0],l.exec(a[1])[0]]}),1===U.length&&
(U[1]=U[0]),"right"===b.at[0]?s.left+=n:"center"===b.at[0]&&(s.left+=n/2),"bottom"===b.at[1]?s.top+=p:"center"===b.at[1]&&(s.top+=p/2),c=g(W.at,n,p),s.left+=c[0],s.top+=c[1],this.each(function(){var f,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),w=parseInt(a.css(this,"marginLeft"),10)||0,H=parseInt(a.css(this,"marginTop"),10)||0,M=l+w+(parseInt(a.css(this,"marginRight"),10)||0)+A.width,F=m+H+(parseInt(a.css(this,"marginBottom"),10)||0)+A.height,P=a.extend({},s),X=g(W.my,k.outerWidth(),k.outerHeight());
"right"===b.my[0]?P.left-=l:"center"===b.my[0]&&(P.left-=l/2);"bottom"===b.my[1]?P.top-=m:"center"===b.my[1]&&(P.top-=m/2);P.left+=X[0];P.top+=X[1];a.support.offsetFractions||(P.left=h(P.left),P.top=h(P.top));f={marginLeft:w,marginTop:H};a.each(["left","top"],function(d,e){a.ui.position[U[d]]&&a.ui.position[U[d]][e](P,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:f,collisionWidth:M,collisionHeight:F,offset:[c[0]+X[0],c[1]+X[1]],my:b.my,at:b.at,within:z,elem:k})});a.fn.bgiframe&&
k.bgiframe();b.using&&(j=function(a){var c=r.left-P.left,f=c+n-l,h=r.top-P.top,j=h+p-m,g={target:{element:v,left:r.left,top:r.top,width:n,height:p},element:{element:k,left:P.left,top:P.top,width:l,height:m},horizontal:0>f?"left":0<c?"right":"center",vertical:0>j?"top":0<h?"bottom":"middle"};n<l&&d(c+f)<n&&(g.horizontal="center");p<m&&d(h+j)<p&&(g.vertical="middle");e(d(c),d(f))>e(d(h),d(j))?g.important="horizontal":g.important="vertical";b.using.call(this,a,g)});k.offset(a.extend(P,{using:j}))})};
a.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,c=c.width,f=a.left-b.collisionPosition.marginLeft,h=d-f,j=f+b.collisionWidth-c-d,g;b.collisionWidth>c?0<h&&0>=j?(g=a.left+h+b.collisionWidth-c-d,a.left+=h-g):0<j&&0>=h?a.left=d:h>j?a.left=d+c-b.collisionWidth:a.left=d:0<h?a.left+=h:0<j?a.left-=j:a.left=e(a.left-f,a.left)},top:function(a,b){var c=b.within,c=c.isWindow?c.scrollTop:c.offset.top,d=b.within.height,f=a.top-b.collisionPosition.marginTop,h=c-f,j=
f+b.collisionHeight-d-c,g;b.collisionHeight>d?0<h&&0>=j?(g=a.top+h+b.collisionHeight-d-c,a.top+=h-g):0<j&&0>=h?a.top=c:h>j?a.top=c+d-b.collisionHeight:a.top=c:0<h?a.top+=h:0<j?a.top-=j:a.top=e(a.top-f,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,f=c.width,h=c.isWindow?c.scrollLeft:c.offset.left,j=a.left-b.collisionPosition.marginLeft,c=j-h,g=j+b.collisionWidth-f-h,j="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,k="left"===b.at[0]?b.targetWidth:"right"===
b.at[0]?-b.targetWidth:0,l=-2*b.offset[0];if(0>c){if(e=a.left+j+k+l+b.collisionWidth-f-e,0>e||e<d(c))a.left+=j+k+l}else if(0<g&&(e=a.left-b.collisionPosition.marginLeft+j+k+l-h,0<e||d(e)<g))a.left+=j+k+l},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,f=c.height,c=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,j=h-c,h=h+b.collisionHeight-f-c,g="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,k="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?
-b.targetHeight:0,l=-2*b.offset[1],m,n;0>j?(n=a.top+g+k+l+b.collisionHeight-f-e,a.top+g+k+l>j&&(0>n||n<d(j))&&(a.top+=g+k+l)):0<h&&(m=a.top-b.collisionPosition.marginTop+g+k+l-c,a.top+g+k+l>h&&(0<m||d(m)<h)&&(a.top+=g+k+l))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};var n,r,s,v,A=document.getElementsByTagName("body")[0];
s=document.createElement("div");n=document.createElement(A?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};A&&a.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(v in r)n.style[v]=r[v];n.appendChild(s);r=A||document.documentElement;r.insertBefore(n,r.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";s=a(s).offset().left;a.support.offsetFractions=10<s&&11>s;n.innerHTML="";r.removeChild(n);if(!1!==a.uiBackCompat){var w=jQuery,
z=w.fn.position;w.fn.position=function(a){if(!a||!a.offset)return z.call(this,a);var c=a.offset.split(" "),d=a.at.split(" ");return 1===c.length&&(c[1]=c[0]),/^\d/.test(c[0])&&(c[0]="+"+c[0]),/^\d/.test(c[1])&&(c[1]="+"+c[1]),1===d.length&&(/left|center|right/.test(d[0])?d[1]="center":(d[1]=d[0],d[0]="center")),z.call(this,w.extend(a,{at:d[0]+c[0]+" "+d[1]+c[1],offset:b}))}}})(jQuery);
(function(a,b){a.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(a,b){"value"===a&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,b)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();
this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a){a.widget("ui.slider",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,g,c=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),d=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);c.range&&(!0===c.range&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));g=c.values&&c.values.length||1;for(b=e.length;b<g;b++)d.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=e.add(a(d.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){c.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var c,d,e,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,g),!1===
c))return}c=this.options.step;this.options.values&&this.options.values.length?d=e=this.values(g):d=e=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;e=this._trimAlignValue(d+
c);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;e=this._trimAlignValue(d-c)}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var g,c,e,d,h,f,j,k,l=this,p=this.options;return p.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),g={x:b.pageX,y:b.pageY},c=this._normValueFromMouse(g),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var f=Math.abs(c-l.values(b));e>f&&(e=f,d=a(this),h=b)}),!0===p.range&&this.values(1)===p.min&&(h+=1,d=a(this.handles[h])),f=this._start(b,h),
!1===f?!1:(this._mouseSliding=!0,this._handleIndex=h,d.addClass("ui-state-active").focus(),j=d.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-d.width()/2,top:b.pageY-j.top-d.height()/2-(parseInt(d.css("borderTopWidth"),10)||0)-(parseInt(d.css("borderBottomWidth"),10)||0)+(parseInt(d.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,c),this._animateOff=!0,!0))},_mouseStart:function(){return!0},
_mouseDrag:function(a){var g=this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,this._handleIndex,g),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var g,
c,e,d,h;return"horizontal"===this.orientation?(g=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(g=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=c/g,1<e&&(e=1),0>e&&(e=0),"vertical"===this.orientation&&(e=1-e),d=this._valueMax()-this._valueMin(),h=this._valueMin()+e*d,this._trimAlignValue(h)},_start:function(a,g){var c={handle:this.handles[g],value:this.value()};return this.options.values&&this.options.values.length&&
(c.value=this.values(g),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,g,c){var e,d,h;this.options.values&&this.options.values.length?(e=this.values(g?0:1),2===this.options.values.length&&!0===this.options.range&&(0===g&&c>e||1===g&&c<e)&&(c=e),c!==this.values(g)&&(d=this.values(),d[g]=c,h=this._trigger("slide",a,{handle:this.handles[g],value:c,values:d}),this.values(g?0:1),!1!==h&&this.values(g,c,!0))):c!==this.value()&&(h=this._trigger("slide",a,{handle:this.handles[g],value:c}),
!1!==h&&this.value(c))},_stop:function(a,g){var c={handle:this.handles[g],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(g),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,g){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[g],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(g),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,g){var c,e,d;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(g),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();c=this.options.values;e=arguments[0];for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(e[d]),this._change(null,
d);this._refreshValue()}},_setOption:function(b,g){var c,e=0;a.isArray(this.options.values)&&(e=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":g?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<e;c+=1)this._change(null,c);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(a){var g,c;if(arguments.length)return g=this.options.values[a],
g=this._trimAlignValue(g),g;g=this.options.values.slice();for(c=0;c<g.length;c+=1)g[c]=this._trimAlignValue(g[c]);return g},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var g=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%g;a-=c;return 2*Math.abs(c)>=g&&(a+=0<c?g:-g),parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
g,c,e,d,h=this.options.range,f=this.options,j=this,k=this._animateOff?!1:f.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(c){g=100*((j.values(c)-j._valueMin())/(j._valueMax()-j._valueMin()));l["horizontal"===j.orientation?"left":"bottom"]=g+"%";a(this).stop(1,1)[k?"animate":"css"](l,f.animate);!0===j.options.range&&("horizontal"===j.orientation?(0===c&&j.range.stop(1,1)[k?"animate":"css"]({left:g+"%"},f.animate),1===c&&j.range[k?"animate":"css"]({width:g-b+
"%"},{queue:!1,duration:f.animate})):(0===c&&j.range.stop(1,1)[k?"animate":"css"]({bottom:g+"%"},f.animate),1===c&&j.range[k?"animate":"css"]({height:g-b+"%"},{queue:!1,duration:f.animate})));b=g}):(c=this.value(),e=this._valueMin(),d=this._valueMax(),g=d!==e?100*((c-e)/(d-e)):0,l["horizontal"===this.orientation?"left":"bottom"]=g+"%",this.handle.stop(1,1)[k?"animate":"css"](l,f.animate),"min"===h&&"horizontal"===this.orientation&&this.range.stop(1,1)[k?"animate":"css"]({width:g+"%"},f.animate),"max"===
h&&"horizontal"===this.orientation&&this.range[k?"animate":"css"]({width:100-g+"%"},{queue:!1,duration:f.animate}),"min"===h&&"vertical"===this.orientation&&this.range.stop(1,1)[k?"animate":"css"]({height:g+"%"},f.animate),"max"===h&&"vertical"===this.orientation&&this.range[k?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:f.animate}))}})})(jQuery);
(function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var h=c.attr(d);void 0!==h&&h.length&&(b[d]=h)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]===
this.document[0].activeElement||(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}var e;e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();c.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,e=a.ui.keyCode;switch(b.keyCode){case e.UP:return this._repeat(null,1,b),!0;case e.DOWN:return this._repeat(null,-1,b),!0;case e.PAGE_UP:return this._repeat(null,c.page,b),!0;case e.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return!this.spinning&&!1===this._trigger("start",a)?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(a,b,e){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,e)},a);this._spin(b*this.options.step,e)},_spin:function(a,b){var e=this.value()||0;this.counter||
(this.counter=1);e=this._adjustValue(e+a*this._increment(this.counter));if(!this.spinning||!1!==this._trigger("spin",b,{value:e}))this._value(e),this.counter++},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");
return-1===b?0:a.length-b-1},_adjustValue:function(a){var b,e,d=this.options;return b=null!==d.min?d.min:0,e=a-b,e=Math.round(e/d.step)*d.step,a=b+e,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var e=this._parse(this.element.val());
this.options[a]=b;this.element.val(this._format(e))}else("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,
this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var e;""!==a&&(e=this._parse(a),null!==e&&(b||(e=this._adjustValue(e)),a=this._format(e)));this.element.val(a);this._refresh()},
_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),
pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length)return this._parse(this.element.val());b(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,b){function g(a){return 1<a.hash.length&&a.href.replace(e,"")===location.href.replace(e,"").replace(/\s/g,"%20")}var c=0,e=/#.*$/;a.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options,d=c.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();if(null===d&&(e&&this.tabs.each(function(b,c){if(a(c).attr("aria-controls")===e)return d=b,!1}),null===d&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===d||-1===d))d=this.tabs.length?0:!1;!1!==
d&&(d=this.tabs.index(this.tabs.eq(d)),-1===d&&(d=c.collapsible?!1:0));c.active=d;!c.collapsible&&!1===c.active&&this.anchors.length&&(c.active=0);a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());!1!==this.options.active&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=a();this._refresh();this.active.length&&this.load(c.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},
_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){for(var d=this.tabs.length-1;-1!==a.inArray((b>d&&(b=0),0>b&&(b=d),b),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,
b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),!b&&!1===this.options.active&&this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++c},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");
b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1===b.active||!this.anchors.length?(b.active=!1,this.active=a()):this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);
this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=
this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(c,d){var e,l,p,m=a(d).uniqueId().attr("id"),n=a(d).closest("li"),
r=n.attr("aria-controls");g(d)?(e=d.hash,l=b.element.find(b._sanitizeSelector(e))):(p=b._tabId(n),e="#"+p,l=b.element.find(e),l.length||(l=b._createPanel(p),l.insertAfter(b.panels[c-1]||b.tablist)),l.attr("aria-live","polite"));l.length&&(b.panels=b.panels.add(l));r&&n.data("ui-tabs-aria-controls",r);n.attr({"aria-controls":e.substring(1),"aria-labelledby":m});l.attr("aria-labelledby",m)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},
_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,d;d=this.tabs[c];c++)!0===b||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};
b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d,e=this.element.parent();"fill"===b?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow","hidden")),c=e.height(),this.element.siblings(":visible").each(function(){var b=
a(this),d=b.css("position");"absolute"===d||"fixed"===d||(c-=b.outerHeight(!0))}),d&&e.css("overflow",d),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget).closest("li"),
g=e[0]===d[0],p=g&&c.collapsible,m=p?a():this._getPanelForTab(e),n=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:n,newTab:p?a():e,newPanel:m};b.preventDefault();if(!e.hasClass("ui-state-disabled")&&!e.hasClass("ui-tabs-loading")&&!this.running&&!(g&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)))c.active=p?!1:this.tabs.index(e),this.active=g?a():e,this.xhr&&this.xhr.abort(),!n.length&&!m.length&&a.error("jQuery UI Tabs: Mismatching fragment identifier."),m.length&&this.load(this.tabs.index(e),
b),this._toggle(b,d)},_toggle:function(b,c){function d(){g.running=!1;g._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");p.length&&g.options.show?g._show(p,g.options.show,d):(p.show(),d())}var g=this,p=c.newPanel,m=c.oldPanel;this.running=!0;m.length&&this.options.hide?this._hide(m,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
m.hide(),e());m.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");p.length&&m.length?c.oldTab.attr("tabIndex",-1):p.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);p.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");
c?b.attr("aria-controls",c):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;!1!==d&&(c===b?d=!1:(c=this._getIndex(c),a.isArray(d)?d=a.map(d,function(a){return a!==c?a:null}):d=a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(!0!==d){if(c===b)d=!0;else{c=this._getIndex(c);if(-1!==a.inArray(c,d))return;a.isArray(d)?
d=a.merge([c],d).sort():d=[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),l=e.find(".ui-tabs-anchor"),p=this._getPanelForTab(e),m={tab:e,panel:p};g(l[0])||(this.xhr=a.ajax(this._ajaxSettings(l,c,m)))&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),p.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){p.html(a);d._trigger("load",c,m)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,
!0);e.removeClass("ui-tabs-loading");p.removeAttr("aria-busy");a===d.xhr&&delete d.xhr},1)}))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,h){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:h},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});if(!1!==a.uiBackCompat){a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}};a.widget("ui.tabs",
a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",b)}});a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(c,d){a.data(d.tab[0],"cache.tabs")?c.preventDefault():d.jqXHR.success(function(){b.options.cache&&a.data(d.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,c,d){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,d.tab.closest("li").index(),d.tab[0])}catch(c){}}},
this._superApply(arguments))},_setOption:function(a,b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}});a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}});a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,
b){if(a.target===this.element[0]&&this.options.spinner){var c=b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}});a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var c=this.options,d;if(b&&!0===c.disabled||a.isArray(c.disabled)&&-1!==a.inArray(b,c.disabled))d=!0;this._superApply(arguments);d&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var c=this.options,d;if(b&&
!1===c.disabled||a.isArray(c.disabled)&&-1===a.inArray(b,c.disabled))d=!0;this._superApply(arguments);d&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}});a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(c,d,e){e===b&&(e=this.anchors.length);var g,l,p=this.options;d=a(p.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d));c=c.indexOf("#")?this._tabId(d):c.replace("#","");return d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",
!0),d.attr("aria-controls",c),g=e>=this.tabs.length,l=this.element.find("#"+c),l.length||(l=this._createPanel(c),g?0<e?l.insertAfter(this.panels.eq(-1)):l.appendTo(this.element):l.insertBefore(this.panels[e])),l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),g?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]),p.disabled=a.map(p.disabled,function(a){return a>=e?++a:a}),this.refresh(),1===this.tabs.length&&!1===p.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.tabs.eq(b).remove(),e=this._getPanelForTab(d).remove();return d.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a}),this.refresh(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this}});a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}});
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;return b=b[0],a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++c}});a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}});
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==b&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}});a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d,e,g=this._superApply(arguments);return g?("beforeActivate"===a?(d=c.newTab.length?c.newTab:c.oldTab,e=c.newPanel.length?c.newPanel:c.oldPanel,g=this._super("select",b,{tab:d.find(".ui-tabs-anchor")[0],panel:e[0],
index:d.closest("li").index()})):"activate"===a&&c.newTab.length&&(g=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()})),g):!1}});a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a){if(!this.options.collapsible||-1===this.options.selected)return;a=this.options.selected}this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}});var d=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(b){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++d)];return arguments.length&&(c.push(!1===b?-1:b),c.push(this.options.cookie)),a.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}});a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,c,d){d=a.extend({},d);return"load"===b&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]),this._super(b,c,d)}});a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,c,d=this.options.fx;return d&&(a.isArray(d)?(b=d[0],c=d[1]):b=c=d),d?{show:c,hide:b}:null},_toggle:function(a,b){function c(){e.running=!1;
e._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&n.show?g.animate(n.show,n.show.duration,function(){c()}):(g.show(),c())}var e=this,g=b.newPanel,m=b.oldPanel,n=this._getFx();if(!n)return this._super(a,b);e.running=!0;m.length&&n.hide?m.animate(n.hide,n.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),m.hide(),d())}})}})(jQuery);
(function(a){var b=0;a.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return a(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,c){var e=this;"disabled"===b?(this[c?"_disable":"_enable"](),
this.options[b]=c):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){e._updateContent(b)}))},_disable:function(){var b=this;a.each(this.tooltips,function(c,e){var d=a.Event("blur");d.target=d.currentTarget=e[0];b.close(d,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&
b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,e=a(b?b.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&e.parents().each(function(){var b=a(this),e;b.data("ui-tooltip-open")&&(e=a.Event("blur"),e.target=e.currentTarget=this,c.close(e,!0));b.attr("title")&&(b.uniqueId(),c.parents[this.id]={element:this,title:b.attr("title")},
b.attr("title",""))}),this._updateContent(e,b))},_updateContent:function(a,b){var e;e=this.options.content;var d=this,h=b?b.type:null;if("string"==typeof e)return this._open(b,a,e);(e=e.call(a[0],function(e){a.data("ui-tooltip-open")&&d._delay(function(){b&&(b.type=h);this._open(b,a,e)})}))&&this._open(b,a,e)},_open:function(b,c,e){function d(a){j.of=a;h.is(":hidden")||h.position(j)}var h,f,j=a.extend({},this.options.position);if(e)if(h=this._find(c),h.length)h.find(".ui-tooltip-content").html(e);
else{c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title"));h=this._tooltip(c);var k=h.attr("id"),l=(c.attr("aria-describedby")||"").split(/\s+/);l.push(k);c.data("ui-tooltip-id",k).attr("aria-describedby",a.trim(l.join(" ")));h.find(".ui-tooltip-content").html(e);this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:d}),d(b)):h.position(a.extend({of:c},this.options.position));h.hide();this._show(h,this.options.show);this.options.show&&this.options.show.delay&&
(f=setInterval(function(){h.is(":visible")&&(d(j.of),clearInterval(f))},a.fx.interval));this._trigger("open",b,{tooltip:h});e={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),b.currentTarget=c[0],this.close(b,!0))},remove:function(){this._removeTooltip(h)}};if(!b||"mouseover"===b.type)e.mouseleave="close";if(!b||"focusin"===b.type)e.focusout="close";this._on(!0,c,e)}},close:function(b){var c=this,e=a(b?b.currentTarget:this.element),d=this._find(e);if(!this.closing){e.data("ui-tooltip-title")&&
e.attr("title",e.data("ui-tooltip-title"));var h=e.data("ui-tooltip-id"),f=(e.attr("aria-describedby")||"").split(/\s+/),h=a.inArray(h,f);-1!==h&&f.splice(h,1);e.removeData("ui-tooltip-id");(f=a.trim(f.join(" ")))?e.attr("aria-describedby",f):e.removeAttr("aria-describedby");d.stop(!0);this._hide(d,this.options.hide,function(){c._removeTooltip(a(this))});e.removeData("ui-tooltip-open");this._off(e,"mouseleave focusout keyup");e[0]!==this.element[0]&&this._off(e,"remove");this._off(this.document,"mousemove");
b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title);delete c.parents[b]});this.closing=!0;this._trigger("close",b,{tooltip:d});this.closing=!1}},_tooltip:function(g){var c="ui-tooltip-"+b++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),a.fn.bgiframe&&e.bgiframe(),this.tooltips[c]=
g,e},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,e){var d=a.Event("blur");d.target=d.currentTarget=e[0];b.close(d,!0);a("#"+c).remove();e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(jQuery);define("jqueryui",["jquery"],function(){});
(function(a,b){function g(a,c){function f(b){if("undefined"==typeof a||!/[1-9]\.[8-9].[3-9]/.test(a.fn.jquery)||"undefined"==typeof a.ui||!/[1-9]\.9.[2-9]/.test(a.ui.version))throw"Dependencies not loaded: DialogRole requires JQuery 1.8.3 or higher and JQuery UI 1.9.2 or higher.";this._super.constructor.apply(this,arguments)}var j=b.FID.extend=b.FID.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype};f.Events=
a.extend({},c.Events,{CloseDialog:"RoleCloseDialog"});j(f,c);f.prototype.role="dialog";f.prototype._attachAttributes=function(a){a.attr({tabindex:"-1"})};f.prototype._onKeyDown=function(b){var e=!0,j;switch(b.keyCode){case c.KeyCode.Tab:var g=a(":tabbable",this._$element);if(0<g.length){j=g.filter(":first");g=g.filter(":last");if(b.target===g[0]&&!b.shiftKey)return j.focus(),b.preventDefault(),!1;if(b.target===j[0]&&b.shiftKey)return g.focus(),b.preventDefault(),!1}break;case c.KeyCode.Esc:e=!1,j=
a.Event(f.Events.CloseDialog,{roleInstance:this}),a(b.currentTarget).trigger(j)}e&&this._super._onKeyDown.apply(this,arguments)};f.prototype.SetFocusOnDialog=function(){var a=this._$element.find(":tabbable");a.length&&a.eq(0).focus()};return e.DialogRole=f}var c,e;"function"===typeof define&&define.amd?define("FIDDialogRole",["require","jqueryui","jquery","FIDBaseRole"],function(a){c=b.FID=b.FID||{};e=c.Accessibility=c.Accessibility||{};a("jqueryui");return g(a("jquery"),a("FIDBaseRole"))}):(c=b.FID=
b.FID||{},e=c.Accessibility=c.Accessibility||{},g(a,e.BaseRole))})(jQuery,window);
(function(a,b){function g(a,c){function f(a){this._super.constructor.apply(this,arguments)}(b.FID.extend=b.FID.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype})(f,c);f.prototype.role="button";f.prototype._attachAttributes=function(a){this._super._attachAttributes.apply(this,arguments);a.attr({tabindex:"0"})};f.prototype._onKeyDown=function(a){a.keyCode===c.KeyCode.Space?this._$element.click():this._super._onKeyDown.apply(this,
arguments)};return e.ButtonRole=f}var c,e;"function"===typeof define&&define.amd?define("FIDButtonRole",["require","jquery","FIDBaseRole"],function(a){c=b.FID=b.FID||{};e=c.Accessibility=c.Accessibility||{};return g(a("jquery"),a("FIDBaseRole"))}):(c=b.FID=b.FID||{},e=c.Accessibility=c.Accessibility||{},g(a,e.BaseRole))})(jQuery,window);(function(a){var b=window.FID=window.FID||{};a.extend(b.Accessibility,{OFF_SCREEN_CLASS_NAME:"off-screen",OFF_SCREEN_SELECTOR:".off-screen"});a.extend(window,b.Accessibility)})(jQuery);
define("components/accessibility",["FIDBaseRole","FIDTabRole","FIDDialogRole","FIDButtonRole"],function(){});
(function(a,b){function g(b,c){var e=a(b),f=this,j=e.find(d),h;0<j.length&&("function"===typeof ButtonRole&&new ButtonRole(j),j.on("click",function(){f.close()}));"function"===typeof DialogRole&&(h=new DialogRole(b),e.on(DialogRole.Events.CloseDialog,function(a){f._onCloseDialog.apply(f,arguments)}),this._role=h);this._$DOMElement=e;this._$closeButton=j;this._isOpen=!1;this._group=c}function c(b){return a(b).data("basepopup-instance")}var e=b.FID=b.FID||{},d=".base-popup--close-button",h={},f={};
g._BASE_POPUP_VISIBLE_CLASS_NAME="base-popup--visible";g._ANIMATED_CLASS_NAME="animation--visible";g.DISPLAY_MODE={Blocking:0,NonBlocking:1,Multi:2};g.Events={OpenDialog:"OpenDialog",CloseDialog:"CloseDialog"};g.prototype._$currentOpenInstance=null;g.prototype._displayMode=g.DISPLAY_MODE.Blocking;g.prototype._onCloseDialog=function(){this.close()};g.prototype.isEqual=function(a){return!a?!1:this._$DOMElement[0]===a[0]};g.prototype.setDisplayMode=function(a,b){if(b)h[b]=a;else switch(a){case g.DISPLAY_MODE.Blocking:case g.DISPLAY_MODE.NonBlocking:case g.DISPLAY_MODE.Multi:g.prototype._displayMode=
a}};g.prototype.open=function(c){if(this._isOpen)return!0;var d=null,e=this._group,d=h[e],k=d==g.DISPLAY_MODE.Blocking||d==g.DISPLAY_MODE.NonBlocking||d==g.DISPLAY_MODE.Multi,r;k?(r=f[e],d=h[e]):(r=g.prototype._$currentOpenInstance,d=g.prototype._displayMode);if(r){if(d===g.DISPLAY_MODE.Blocking)return e=a.Event(g.Events.OpenDialog,{failed:!0}),this._$DOMElement.trigger(e),!1;if(d===g.DISPLAY_MODE.NonBlocking&&(!k||e==r._group))c=c?c.initiator:"",-1===(r._$DOMElement.data("persistAgainst")?r._$DOMElement.data("persistAgainst"):
[]).indexOf(c)&&r.close()}if(d===g.DISPLAY_MODE.Blocking||d===g.DISPLAY_MODE.NonBlocking)k?f[e]=this:g.prototype._$currentOpenInstance=this;this._$DOMElement.addClass(g._BASE_POPUP_VISIBLE_CLASS_NAME);var s=this._$DOMElement;b.setTimeout(function(){s.addClass(g._ANIMATED_CLASS_NAME)},25);if(e=this._role){e.SetFocusOnDialog();e=a(j.activeElement).first()[0];a(":tabbable",this._$DOMElement);var v=this._$closeButton;e==v[0]&&(v.addClass("base-popup--close-button--remove-focus"),v.on("focusout",function(){v.removeClass("base-popup--close-button--remove-focus")}))}this._isOpen=
!0;e=a.Event(g.Events.OpenDialog,{failed:!1});this._$DOMElement.trigger(e);return!0};g.prototype.close=function(){if(this.isOpen()){this._$DOMElement.removeClass(g._BASE_POPUP_VISIBLE_CLASS_NAME);this._$DOMElement.removeClass(g._ANIMATED_CLASS_NAME);this._isOpen=!1;g.prototype._$currentOpenInstance===this&&(g.prototype._$currentOpenInstance=null);var b=a.Event(g.Events.CloseDialog);this._$DOMElement.trigger(b)}};g.prototype.isOpen=function(){return this._isOpen||this._$DOMElement.hasClass(g._BASE_POPUP_VISIBLE_CLASS_NAME)};
g.prototype.toggle=function(){this.isOpen()?this.close():this.open()};e.BasePopup=g;var j=b.document,k={defaults:{},data:{},init:function(b){var c;b&&(c=b.group);return this.each(function(b,d){a(d).data("basepopup-instance",new g(this,c))})},open:function(a){var b=c(this);b&&b.open(a)},close:function(){var a=c(this);a&&a.close()},isOpen:function(){var a=c(this);if(a)return a.isOpen()},toggle:function(){var a=c(this);if(a)return a.toggle()},_findInstanceFromArray:c};a.fn.BasePopup=function(){var b=
arguments[0],c=arguments;if(k[b])b=k[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||!b)b=k.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.BasePopup=a.extend(a.BasePopup,{DisplayMode:g.DISPLAY_MODE,setDisplayMode:g.prototype.setDisplayMode,Events:g.Events,extend:function(b){return a.extend({},k,b)}})})(jQuery,window);define("components/basepopup",["jquery","components/accessibility"],function(a){return function(){return a.FID.BasePopup}}(this));
(function(a,b){var g=b.FID=b.FID||{},c=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},e=g.BasePopup,d=g.DraggablePopup=function(b,c,d){e.prototype.constructor.apply(this,arguments);if("undefined"==typeof jQuery||!/[1-9]\.[8-9].[3-9]/.test(a.fn.jquery)||"undefined"==typeof jQuery.ui||!/[1-9]\.9.[2-9]/.test(a.ui.version))throw"Dependencies not loaded: DraggablePopup requires JQuery 1.8.3 or higher and JQuery UI 1.9.2 or higher.";
var h={handle:".draggable-popup--title-bar-container"};d&&(h.containment=d);this._$DOMElement.draggable(h)};d.Events=a.extend({},e.Events);c(d,e);var h=a.BasePopup.extend({defaults:{},init:function(b){var c=this;return this.each(function(e,g){var p=a.extend({},h.defaults,b),p=a.extend({},p,c.data("plugin-options"));a(g).data("basepopup-instance",new d(this,p.group,p.containment))})}});a.fn.DraggablePopup=function(){var b=arguments[0],c=arguments;if(h[b])b=h[b],c=Array.prototype.slice.call(arguments,
1);else if("object"==typeof b||!b)b=h.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.DraggablePopup=a.extend(a.DraggablePopup,a.BasePopup,{Events:d.Events})})(jQuery,window);define("components/draggablepopup",["jquery","jqueryui","components/basepopup"],function(a){return function(){return a.FID.DraggablePopup}}(this));
(function(a,b){var g;g=b.FID=b.FID||{};var c=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},e=g.DraggablePopup,d=g.ActionBarPopup=function(b,c,d){c||(2>arguments.length?[].push.call(arguments,"actionBarGroup"):arguments[1]="actionBarGroup",c="actionBarGroup");d||(3>arguments.length?[].push.call(arguments,"document"):arguments[2]="document");a.DraggablePopup.setDisplayMode(a.DraggablePopup.DisplayMode.NonBlocking,
c);e.prototype.constructor.apply(this,arguments)};c(d,e);var h=a.DraggablePopup.extend({defaults:{containment:"document",group:"actionBarGroup"},init:function(b){var c=this,e;return this.each(function(g,p){var m=a.extend({},h.defaults,b),m=a.extend({},m,c.data("plugin-options"));e=new d(this,m.group,m.containment);a(p).data("basepopup-instance",e)})}});a.fn.ActionBarPopup=function(){var b=arguments[0],c=arguments;if(h[b])b=h[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||
!b)b=h.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.ActionBarPopup=a.extend(a.ActionBarPopup,a.DraggablePopup,{});g.ActionbarPopup=d})(jQuery,window);define("components/actionbarpopup",["jquery","components/draggablepopup"],function(){});
(function(a){var b=window.FID=window.FID||{};b.Tabs=function(b,c){var e=a(b);this.$el=e;this.$currentTab=null;this.initSettings(c);this.$tabs=e=e.find(this.settings.tabClassSelector);if("undefined"==typeof c){c={};var d=this._getCurrentSelectedTab();if(d){for(var d=d.first(),h=-1,f=0;f<e.length&&-1===h;f++)if(e[f]===d[0]){h=f+1;break}-1!=h&&(c.selected=h)}}this.init(this);return this};b.Tabs.prototype.initSettings=function(b){this.settings=a.extend({},{selected:1,ignoreHiddenTabs:!0,tabClassSelector:".tabs--tab",
linkClassSelector:".tabs--link",tabLinkClassSelector:".tabs--tab-link",navClassSelector:".tabs--nav",containerClassSelector:".tabs--container",selectedClassSelector:".tabs--selected",shadowClassSelector:".tabs--shadow",extendedSelectedClass:""},b)};b.Tabs.Events={open:"open",tabselected:"tabselected",tabclicked:"fidtab-clicked"};b.Tabs.prototype.init=function(b){var c=a(this.settings.tabClassSelector,b.$el).eq(b.settings.selected-1).find(this.settings.tabLinkClassSelector),e=c.data("tab-anchor"),
c=c.attr("href");b.open(e||c,!0);a(this.settings.tabClassSelector,b.$el).on("click",function(a){b._onTabClicked.apply(b,arguments)});a(this.settings.linkClassSelector,b.$el).on("click",function(a){b._onLinkClicked.apply(b,arguments)});a(this.settings.navClassSelector,b.$el).keydown(function(a){b._onNavigationKeyDown.apply(b,arguments)});a(this.settings.containerClassSelector,b.$el).keydown(function(a){b._onContainerKeyDown.apply(b,arguments)});a(this.settings.navClassSelector,b.$el).hasClass("tabs--wide")&&
(e=b.$tabs,e.css("width",100/e.length+"%"));return this};b.Tabs.prototype.preventDefault=function(b){var c=a(b.currentTarget).find(this.settings.tabLinkClassSelector).attr("href");c&&0==c.indexOf("#")&&b.preventDefault()};b.Tabs.prototype._onTabClicked=function(g){this.preventDefault(g);var c=a(g.currentTarget);this.open(c.find(this.settings.tabLinkClassSelector).attr("href"),!1);g=a.Event(b.Tabs.Events.tabclicked,{tab:g.currentTarget});c.parent().trigger(g)};b.Tabs.prototype._onLinkClicked=function(b){this.preventDefault(b);
this.open(a(b.currentTarget).attr("href"),!1)};b.Tabs.prototype._onNavigationKeyDown=function(b){switch(b.which){case 39:b.preventDefault();this.next();break;case 37:b.preventDefault();this.prev();break;case 36:b.preventDefault(),this.open(a(this.settings.tabClassSelector+":first-child",this.$el).children(this.settings.tabLinkClassSelector).attr("href"),!1)}};b.Tabs.prototype._onContainerKeyDown=function(a){a.altKey&&(33==a.which?(a.preventDefault(),this.prev()):34==a.which&&(a.preventDefault(),this.next()))};
b.Tabs.prototype.open=function(g,c){if(!(g&&0==!g.indexOf("#"))){var e=this.$el.find(g),d=this._getTabFromContainer(e);if(this.settings.ignoreHiddenTabs&&0<d.length&&"none"===d.css("display"))return this.next(),this;this.activateTab(d);this.openTabContainer(e);c||d.find(this.settings.tabLinkClassSelector).focus();this.$el.trigger(a.Event(b.Tabs.Events.open,{$tab:d,$tabContainer:e}));return this}};b.Tabs.prototype.next=function(){for(var b=this._getCurrentSelectedTab(),c=null,e=b.next();!c;)0===e.length?
c=a(this.$tabs[0]):"none"!==e.css("display")?c=e:e=e.next();0!==c.length&&(b[0]!==c[0]&&"none"!==c.css("display"))&&(c.find(this.settings.tabLinkClassSelector).focus(),this.open(c.find(this.settings.tabLinkClassSelector).attr("href"),!1));return this};b.Tabs.prototype.prev=function(){for(var b=this._getCurrentSelectedTab(),c=null,e=b.prev();!c;)0===e.length?(c=this.$tabs,c=a(c[c.length-1])):"none"!==e.css("display")?c=e:e=e.prev();0!==c.length&&(b[0]!==c[0]&&"none"!==c.css("display"))&&(c.find(this.settings.tabLinkClassSelector).focus(),
this.open(c.find(this.settings.tabLinkClassSelector).attr("href"),!1));return this};b.Tabs.prototype.last=function(){var b=this._getCurrentSelectedTab(),c=a(this.$tabs).filter(":visible:last");0!==c.length&&(b[0]!==c[0]&&"none"!==c.css("display"))&&(c.find(this.settings.tabLinkClassSelector).focus(),this.open(c.find(this.settings.tabLinkClassSelector).attr("href"),!1));return this};b.Tabs.prototype.openTabContainer=function(b){this._hideContainer(this.$el.find(this.settings.containerClassSelector));
this._showContainer(a(b,this.$el));return this};b.Tabs.prototype.activateTab=function(a){this._unselectTab(this.$el);this._selectTab(a);this.$currentTab=a;return this};b.Tabs.prototype._getAnchorFromTab=function(b){return a(b).find(this.settings.tabLinkClassSelector)};b.Tabs.prototype._getTabContainerSelectorFromTab=function(b){return a(b).find(this.settings.tabLinkClassSelector).attr("href")};b.Tabs.prototype._getCurrentSelectedTab=function(){return this.$el.find(this.settings.selectedClassSelector)};
b.Tabs.prototype._getTabFromContainer=function(b){var c=this.$el.find('[data-tab-anchor="#'+a(b).attr("id")+'"]');0==c.length&&(c=this.$el.find('[href="#'+a(b).attr("id")+'"]'));return c.parents(this.settings.tabClassSelector)};b.Tabs.prototype._isTabSelected=function(b){return a(b).hasClass("tabs--selected")};b.Tabs.prototype._showContainer=function(a){a.addClass("tabs--container-visible").attr("aria-hidden","false")};b.Tabs.prototype._hideContainer=function(a){a.removeClass("tabs--container-visible").attr("aria-hidden",
"true")};b.Tabs.prototype._selectTab=function(b){b=a(b);b.addClass("tabs--selected "+this.settings.extendedSelectedClass);b.next().addClass("tabs--shadow");this._getAnchorFromTab(b).attr({"aria-selected":"true",tabindex:"0"})};b.Tabs.prototype._unselectTab=function(a){this.$tabs.removeClass("tabs--selected tabs--shadow "+this.settings.extendedSelectedClass);this._getAnchorFromTab(a).attr({"aria-selected":"false",tabindex:"-1"})};return b.Tabs})(jQuery);define("components/fidtab",["jquery"],function(a){return function(){return a.FID.Tabs}}(this));
(function(a,b){function g(a,b){var c=parseInt(b,10);a&&!isNaN(c)&&(a.empty().append("&nbsp;("+c.toString()+")"),1>c?a.addClass(d):a.removeClass(d))}var c=b.FID=b.FID||{},e=c.extend=c.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},d="hidden",h=c.ActionBarPopup,f=c.MessagingPopup=function(b,d,e){h.prototype.constructor.apply(this,arguments);var f=this,j=this._$DOMElement,k=j.find(".messaging-popup--message-reader"),
g=j.find(".messaging-popup--tab-notification-number"),A=j.find(".messaging-popup--back-link"),w=j.find(".messaging-popup--tab-item-container"),z=w.length,D=null,y=null;A.on("click",function(){f._closeMessageReader.apply(f)});this.tabs=new c.Tabs(j);this._$popupTab=j.find(".messaging-popup--tab");this._$notificationNumber=g;this._$notificationTab=g.closest(".messaging-popup--tab-element-container");this._$messagesNumber=j.find(".messaging-popup--tab-messages-number");this._$messageReader=k;this._$messageReaderContent=
k.find(".messaging-popup--message-reader-content");this._$backLink=A;for(k=0;k<z&&(!D||!y);k++)j=a(w[k]),j.hasClass("messaging-popup--notification-container")?D=j:j.hasClass("messaging-popup--messages-container")&&(y=j);this._$notificationsContainer=D;this._notificationsCount=0;this._$messagesContainer=y;this._messagesCount=0;1===y.length&&(w=y.find(".messaging-popup--tab-item-urgent-messages"),this._messagesDivs={$noMessageDiv:y.find(".messaging-popup--tab-item-no-messages"),$noUrgentDiv:y.find(".messaging-popup--tab-item-no-urgent-messages"),
$urgentDiv:w,$urgentDivAnchor:w.find(".messaging-popup--tab-item-urgent-messages-content-anchor"),$urgentDivContent:w.find(".messaging-popup--tab-item-urgent-messages-content")})};e(f,h);var j={NO_MESSAGES:0,NO_URGENT_MESSAGES:1,URGENT_MESSAGES:2};f._MESSAGES_STATUS=j;f.prototype._setMessagesStatus=function(a){switch(a){case j.NO_MESSAGES:this._messagesDivs.$noMessageDiv.removeClass(d);this._messagesDivs.$noUrgentDiv.addClass(d);this._messagesDivs.$urgentDiv.addClass(d);break;case j.NO_URGENT_MESSAGES:this._messagesDivs.$noMessageDiv.addClass(d);
this._messagesDivs.$noUrgentDiv.removeClass(d);this._messagesDivs.$urgentDiv.addClass(d);break;case j.URGENT_MESSAGES:this._messagesDivs.$noMessageDiv.addClass(d),this._messagesDivs.$noUrgentDiv.addClass(d),this._messagesDivs.$urgentDiv.removeClass(d)}};f.Events=a.extend({},h.Events,{NotificationsCountChanged:"notificationcountchanged",MessagesCountChanged:"messagescountchanged"});f.prototype.getTotalCount=function(){return this._notificationsCount+this._messagesCount};f.prototype.open=function(){h.prototype.open.apply(this,
arguments);this._closeMessageReader()};f.prototype.close=function(){h.prototype.close.apply(this,arguments);this._closeMessageReader();this._$DOMElement.css({left:"",top:""})};f.prototype.updateItems=function(a){var b,c=!0,d=!0,e;for(e in a)switch(b=a[e],e){case "notification":this.populateNotifications(b);c=!1;break;case "messages":this.populateMessages(b),d=!1}c?this.setNotificationCount(0):this.tabs.open(".messaging-popup--notification-container");d&&this.setMessageCount(0)};f.prototype.populateNotifications=
function(b){var c=0,d=0,e=this,f=null,j,h,k,g,z;this._$notificationsContainer.empty();b&&b.length&&(c=b.length);for(var D=0;D<c;D++)j=b[D].title,g=b[D].content,j&&g&&(d++,f=a("<li/>").addClass("messaging-popup--tab-notification-item"),k=a("<h3/>").addClass("messaging-popup--tab-notification-item-title").append(j).attr("data-pii","true"),f.append(k),j=a("<div/>").addClass("messaging-popup--tab-notification-item-content").attr("data-pii","true"),240<g.length?(j.data({content:g}),g=g.substring(0,239)+
"...&nbsp;",h=a("<a />").attr("href","#").append("Full message").on("click",function(a){e._onMoreLinkClicked.apply(e,arguments)}),z="MessagingPopupItem"+d.toString(),k.attr("id",z),h.attr("aria-describedby",z)):h=null,f.append(j.append(g)),h&&j.append(h),this._$notificationsContainer.append(f));this.setNotificationCount(d);f&&f.addClass("last")};f.prototype.populateMessages=function(a){var b=null,c;a&&a.count&&(b=parseInt(a.count),c=a.urgentmessage);if(isNaN(b)||1>b)b=0,c=!1;this.setMessageCount(b);
if(c&&(a=c.text,c=c.url,a&&c)){var d=this._messagesDivs,b=d.$urgentDivAnchor,d=d.$urgentDivContent;1===d.length&&(d.empty().append(a),b&&b.attr("href",c),this._setMessagesStatus(j.URGENT_MESSAGES))}};f.prototype._setToggleVisibility=function(){0==this._notificationsCount&&0==this._messagesCount?this._$popupTab.addClass(d):this._$popupTab.removeClass(d)};f.prototype.setNotificationCount=function(b){b=parseInt(b);isNaN(b)&&(b=0);g(this._$notificationNumber,b);0<b?this._$notificationTab.removeClass(d):
(this._$notificationTab.addClass(d),this.tabs.open(".messaging-popup--messages-container"));this._notificationsCount=b;this._setToggleVisibility();b=a.Event(f.Events.NotificationsCountChanged,{notificationCount:b});this._$DOMElement.trigger(b)};f.prototype.setMessageCount=function(b){b=parseInt(b);isNaN(b)&&(b=0);g(this._$messagesNumber,b);0<b?this._setMessagesStatus(j.NO_URGENT_MESSAGES):this._setMessagesStatus(j.NO_MESSAGES);this._messagesDivs.$urgentDiv.addClass(d);this._messagesCount=b;this._setToggleVisibility();
b=a.Event(f.Events.MessagesCountChanged,{messageCount:b});this._$DOMElement.trigger(b)};f.prototype._onMoreLinkClicked=function(b){b.preventDefault();var c=a(b.currentTarget).parent().data("content");b=this._$backLink;var d=this._$messageReaderContent;d.empty();d.attr("tabindex","0");var e=this._$messageReader,f=parseInt(e.parent().height());d.append(c);this._$DOMElement.addClass("messaging-popup--full-message-view");if(e.height()>f){var c=b.height(),j=parseFloat(d.css("margin-top")),h=parseFloat(d.css("padding-top")),
k=parseFloat(d.css("padding-bottom"));d.css("height",(f-j-h-k-c).toString()+"px");e.css("height",f+"px")}b.focus()};f.prototype._closeMessageReader=function(){this._$messageReader.css("height","");this._$messageReaderContent.css("height","");this._$DOMElement.removeClass("messaging-popup--full-message-view")};var k=a.ActionBarPopup.extend({defaults:{},init:function(b){var c=this,d;return this.each(function(e,j){var h=a.extend({},k.defaults,b),h=a.extend({},h,c.data("plugin-options"));d=new f(this,
h.group,h.containment);d.updateItems(b);a(j).data("basepopup-instance",d)})},setNotificationCount:function(a){k._findInstanceFromArray(this).setNotificationCount(a)},setMessageCount:function(a){k._findInstanceFromArray(this).setMessageCount(a)},getTotalCount:function(){return k._findInstanceFromArray(this).getTotalCount()},updateItems:function(a){k._findInstanceFromArray(this).updateItems(a)}});a.fn.MessagingPopup=function(){var b=arguments[0],c=arguments;if(k[b])b=k[b],c=Array.prototype.slice.call(arguments,
1);else if("object"==typeof b||!b)b=k.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.MessagingPopup=a.extend(a.MessagingPopup,a.ActionBarPopup,{Events:f.Events})})(jQuery,window);define("components/messagingpopup",["jquery","components/draggablepopup","components/actionbarpopup","components/fidtab"],function(a){return function(){return a.FID.MessagingPopup}}(this));
define("tasks/service-message-task",["tasks/base-task","util/eventhub-backbone"],function(a,b){var g=a.extend({url:envMap.SERVICE_MESSAGES_URL+"/ftgw/amtd/serviceMsgCtr?callback=?",dataType:"json",isNotCancelable:!0});window.showServiceMessage=function(a){b.publishEvent("ServiceMessageData",a)};return g});
define("tasks/portfolio-preference-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/snippet/modifyPortfolioPreference",type:"POST",buildParams:function(a){return{prefName:a.prefName,prefValue:a.prefValue,sessionOnly:a.sessionOnly}},isNotCancelable:!0})});
define("views/messaging-view",["jquery","views/base-view","components/messagingpopup","tasks/service-message-task","tasks/portfolio-preference-task"],function(a,b,g,c,e){return b.extend({initialize:function(){this.level=0;this.firstLoad=!0;this.$el.MessagingPopup({containment:".fidgrid"});var b=this._getNotificationObject();this.$el.MessagingPopup("updateItems",{notification:b,messages:{count:0}});0==b.length&&this.$(".messaging-popup--tab-element-container").trigger("click");this.getAppContext().subscribeEvent("ServiceMessageData",
_.bind(this.showMessageData,this));var e=(PREFERENCE_MAP.NGRBE_MESSAGE_HASH||"").split("#"),b=e[0]||"",e=e[1]&&""!=e[1]?e[1]:"",f=String(this.$(".actionbar-notification-data").data("notification-hash")),j=this;this.level=0;""===f?(b!==f&&j.saveStatus(f,e),j.shouldOpen=!0):b!==f?(this.level=1,a(document).bind("this.context.constants.EVENTS.MESSAGE_TEMPORAY_CLOSE",function(){j.$el.MessagingPopup("close")}),a(document).bind("MESSAGE_POPUP_OPEN",function(){(0===a(".quick-trade-popup-wrapper").length||
!a(".quick-trade-popup-wrapper").BasePopup("isOpen"))&&j.$el.MessagingPopup("open")}),j.saveStatus(f,e)):a(document).bind("MESSAGE_POPUP_OPEN",function(){j.shouldOpen=!0});(new c({context:this})).run()},render:function(){return this},showMessagingPupup:function(a){this.$el.MessagingPopup(a?"open":"close")},showMessageData:function(b){var c=this,e=c._getNotificationObject();b=c._getMessageObject(b);if(this.firstLoad&&0!==e.length+(b.count||0))this.$el.MessagingPopup("updateItems",{notification:e,messages:b}),
0==e.length&&this.$(".messaging-popup--tab-element-container").trigger("click");var e=(PREFERENCE_MAP.NGRBE_MESSAGE_HASH||"").split("#"),j;j=e[1]&&""!=e[1]?e[1]:"";var e=String(this.$(".actionbar-notification-data").data("notification-hash")),k=b.urgentmessage?b.urgentmessage.messageId:"";this.firstLoad&&b.urgentmessage&&j!==k&&""!==k?(a(document).unbind("this.context.constants.EVENTS.MESSAGE_TEMPORAY_CLOSE").bind("this.context.constants.EVENTS.MESSAGE_TEMPORAY_CLOSE",function(){c.$el.MessagingPopup("close")}),
j=function(){0===a(".quick-trade-popup-wrapper").length&&!a(".quick-trade-popup-wrapper").BasePopup().BasePopup("isOpen")&&c.$el.MessagingPopup("open")},a(document).unbind("MESSAGE_POPUP_OPEN").bind("MESSAGE_POPUP_OPEN",j),c.shouldOpen&&j(),this.saveStatus(e,k),c.level=1===this.level?1:2):this.firstLoad&&""===k&&this.saveStatus(e,k);b.urgentmessage&&2<=c.level&&(b=a(".messaging-popup--wrapper").data("basepopup-instance"))&&b.tabs.open("#messaging-popup-panel-messages");this.firstLoad=!1},saveStatus:function(a,
b){(new e({data:{prefName:"NGRBE_MESSAGE_HASH",prefValue:a+"#"+b}})).run()},_getMessageObject:function(a){var b=a.highest_urgt_to_do_msg_id,c=envMap.SERVICE_MESSAGES_URL+"/ftgw/amtd/messageCenter?source=portSum&hasUrgentMsg=Y&msgLink=Y&msgId="+b+"&hasNewMsg=Y&hasMsg=Y",e=a.highest_urgt_to_do_msg_desc,k={count:a.new_msg_cnt};"Y"===a.urgent_ind&&(k.urgentmessage={text:(e||"").replace(/^([\w\W]{0,80})(?=\s|$)([\w\W]*)$/,function(a,b,c){return b+(c?"...":"")}),url:c,messageId:b});return k},_getNotificationObject:function(){return this.$(".actionbar-notification-data li[data-title]").map(function(b,
c){var e=a(c).html();e&&(e=e.replace(/<br\/?>/g,"").replace(/((&nbsp;)|[\s])+/g," "));return{title:" ",content:e}})}})});function popOBWireAndImprovedMM(a,b,g,c){var e="no";c&&"yes"==c&&(e="yes");window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+e+",left=10,top=10,height="+b+",width="+g+",fullscreen=no").focus()}
define("views/deposit-view",["jquery","util/eventhub-backbone","components/actionbar","components/accessibility","views/base-view"],function(a,b,g,c,e){return e.extend({events:{"click .cancel":"onCancelClick"},defaults:{appName:"deposit",basePath:envMap.DPCS_URL+"retirementincome/deposit",pathToBundles:"/dist/"},state:{rendered:!1},initialize:function(){this.options=_.extend({},this.defaults,this.options);this.$el.ActionBarPopup({containment:"body"})},render:function(){return this},toggle:function(){if(this.$el.is(":visible"))this.$el.ActionBarPopup("close");
else if(this.state.rendered)this.resetView(),this.$el.ActionBarPopup("open");else{var a=this;this.renderApp(function(){a.state.rendered=!0;a.$el.ActionBarPopup("open")})}},destroy:function(){this.undelegateEvents()},renderApp:function(b){var c=this.options.basePath,e=this.options.pathToBundles,j=this.options.appName,k=c+e+"bundle.js",e=c+e+"bundle.css",g="#"+j;this.$el.find(".deposit-container").append('<link href="'+e+'" rel="stylesheet"><div id="'+j+'" class="'+j+' content"><deposit-boot></deposit-boot></div>');
a(g).attr("data-app-path",c);a(g).attr("data-injected",!0);require([k],function(){a(g).hasClass("ng-scope")||(angular.bootstrap(angular.element(g),[j]),b())})},resetView:function(){},onCancelClick:function(){this.toggle()}})});
define("views/advisor-noaccess-view",["jquery","views/base-view"],function(a,b){var g=b.extend({events:{"click .advisor-no-access-close":"advisorNoAccessClose"},render:function(){a(".overlay-background").show();a("#advisor-no-access-skin").show();return this},advisorNoAccessClose:function(){a("#advisor-no-access-skin").hide();a(".overlay-background").hide()}});return BillPayAdvisorNoAccessView=g});
define("views/actionbar-view","jquery util/constants tasks/summary-cards-task models/account-context-model views/composite-view util/eventhub-backbone components/actionbar components/accessibility views/messaging-view views/deposit-view views/advisor-noaccess-view components/actionbarpopup tasks/base-task".split(" "),function(a,b,g,c,e,d,h,f,j,k,l){return e.extend({events:{"click .action-bar--accounts:not(.disable)":"toggleAccountSelector","click .action-bar--mobile.action-bar--action":"actionDropdownInMobile",
"click .ab_profile_content li:nth-child(4)":"hideAccountSelectorInPhone","click .qt-quote--prospectus":"openProspectus","click .js-digital-experience-debug":"goToDebugPage"},initialize:function(){var b=this;toggleMap.shipItDaycheckDepositFeature&&(this.$el.find(".action-bar--group.action-bar--left ul").append('<li class="action-bar--item action-bar--item-submenu action-bar--item-checkdeposit"><a class="action-bar--item-title check-deposit" data-actionbar-button-name="check-deposit" name="check-deposit" href="javascript:void(0)">Deposit<span class="action-bar--item-counter"></span></a></li>'),
this.$el.find(".action-bar--popups-wrapper").append('<div class="deposit-container" id="depositContainer"><div class="deposit-popup-wrapper draggable-popup--wrapper"><div class="base-popup--header draggable-popup--title-bar-container clearfix"><h2 id="H1" class="base-popup--header--title ">Deposit</h2><div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Deposit"></div></div><div class="base-popup" aria-label="popup"><div class="base-popup--content-wrapper"><div class="base-popup--content"><div class="deposit-container"></div></div></div></div> </div></div>'),
this.depositView=new k({el:this.$el.find(".deposit-popup-wrapper")}));this.isTransferLoaded=this.isBillpayLoaded=!1;this.transferInitValues=void 0;this.loadTradeTicket();this.messagingView=(new j({el:a(".messaging-popup--wrapper"),actionBar:b})).render();this.advisorNoAccessActions=["transfer","messages","feedback","exitpreview"];this.advisorNoAccessView=new l({el:a("#advisor-no-access-skin")});this.$(".profile-popup-wrapper").ActionBarPopup({containment:".fidgrid"});this.$(".action-bar--accounts").addClass("action-bar--animation-slide-out");
a(document).bind("this.context.constants.EVENTS.ACCOUNT_SLIDE_IN",function(){b.$(".action-bar--accounts").removeClass("action-bar--animation-slide-out").removeClass("action-bar--button-clicked").addClass("action-bar--animation-slide-in")});a(document).bind(a.BasePopup.Events.CloseDialog,function(c){c.target&&a(c.target).hasClass("draggable-popup--wrapper")&&b.$(".draggable-popup--wrapper").css("top","").css("left","")});window.fang&&(this.openListen||(this.openListen=fang.EventBus.subscribe("openDMATransfer",
this.loadDMATransfer.bind(this))),this.openHybridListen||(this.openHybridListen=fang.EventBus.subscribe("openPortSummWidgetInHybridMode",this.loadDMATransfer.bind(this))),fang.EventBus.subscribe("openTransfer",function(c){b.transferInitValues=c||{};b.transferInitValues.hideDropdownMenu=!0;a(".action-bar--item-title.transfer").click()}));d.subscribeEvent("routeTransfer",function(c){b.transferInitValues=c;a(".action-bar--item-title.transfer").click()})},goToDebugPage:function(){var b=new g({debug:"Y",
data:c.get("selectedAccounts"),onSuccess:function(b){a("#display-layout").empty();a("#display-layout").css("padding-left","50px");a("#display-layout").append(b)}});b.url="/ftgw/fbc/ofportfolio/summaryCardsExperience";var d=this.processCardList(cardListGlobal);d&&d.cardList&&(b.cardList=d.cardList);b.run()},processCardList:function(a){if(a){var b={},c=[];for(i=0;i<a.length;i++){var d=a[i];if(d.cardId){d=d.cardId.replace("tcm:","").split("-");if(3==d.length)var e={componentId:d[1],templateId:d[2],publicationId:d[0]};
c.push(e)}}if(0<c.length)return b.cardList={componentPresentation:{components:{component:c}}},b}},render:function(){function b(a){0<a.notificationCount&&$actionBarContainer.actionbar("showActionAlert");a=$messagesPopupWrapper.MessagingPopup("getTotalCount");$actionBarContainer.actionbar("updateItems",{messages:a})}var c=this;$actionBarContainer=this.$el;this.$el.actionbar();c.loadAddNote();$messagesPopupWrapper=this.$(".messaging-popup--wrapper");a(document).on(a.MessagingPopup.Events.NotificationsCountChanged,
b);a(document).on(a.MessagingPopup.Events.MessagesCountChanged,b);a(document).on(a.actionbar.Events.ITEM_CLICKED_EVENT,function(b){b.actionbarItem.markRead();b.actionbarItem.$item.find(">a");if(advisor_indicator&&-1!=a.inArray(b.actionbarItem.name,c.advisorNoAccessActions))c.advisorNoAccessView.render();else if("messages"===b.actionbarItem.name)c.messagingView.showMessagingPupup(!0),b.actionbarItem.$item.find("a"),$actionBarContainer.actionbar("toggleDropdownMenuVisibility");else if("trade"===b.actionbarItem.name){var d=
null,e=c.getAppContext().getCurrentAccounts();void 0!=e&&(null!=e&&1===e.length)&&(d=e[0]);a(document).trigger("QUICK_TRADE",{accountNumber:d});b.actionbarItem.$item.find("a");$actionBarContainer.actionbar("toggleDropdownMenuVisibility")}else if("billpay"===b.actionbarItem.name)if(d=envMap.WWW_BILLPAY_WIDGET_HOST+envMap.BILLPAY_WIDGET_CONTENT_PATH,this.isBillpayLoaded)c.loadBillpay(b);else{var e=!!navigator.userAgent.match(" Safari/")&&!navigator.userAgent.match(" Chrom")&&!!navigator.userAgent.match(" Version/5."),
f=a('<link rel="stylesheet" type="text/css"/>'),j=d+"/css/billpay-integrated.css";a("html").hasClass("lt-ie9")&&(j=d+"/css/billpay-integrated-ie.css");if(e||!("onload"in f[0])){var h=!1,k=a("<img>").on("error",function(){f.attr("href",j);c.loadBillpay.call(c,b);h=!0}).attr("src",j);setTimeout(function(){h||(k.off("error"),c.loadBillpay.call(c,b),h=!0)},1E3)}else f.attr("href",j),f.load(function(){c.loadBillpay.call(c,b)});a("head").append(f)}else"addnote"===b.actionbarItem.name?(a(".action-bar--item-trade,.action-bar--item-transfer,.action-bar--item-billpay,.action-bar--item-profile,.action-bar--item-message,.action-bar--item-exitpreview,.action-bar--item-feedback").click(function(){a("#in-widget-wrapper .cancel").trigger("click")}),
a("#in-widget-wrapper .base-popup--header").live("click",function(){FID.InfoFlyout.close()}),a("#in-widget-wrapper .notebook-section-content").live("click",function(){FID.InfoFlyout.close()})):"transfer"===b.actionbarItem.name?c.loadMoneyTransferCSS(b):"profile"===b.actionbarItem.name?(c.$(".profile-popup-wrapper").BasePopup("open"),c.$(".profile-popup-wrapper").on("click","a[href^=#]",function(){c.$(".profile-popup-wrapper").BasePopup("close")}),b.actionbarItem.$item.find("a"),$actionBarContainer.actionbar("toggleDropdownMenuVisibility")):
"exitpreview"===b.actionbarItem.name?(c.exitPreview(),b.actionbarItem.$item.find("a"),$actionBarContainer.actionbar("toggleDropdownMenuVisibility")):"feedback"===b.actionbarItem.name?(b.actionbarItem.$item.find("a"),$actionBarContainer.actionbar("toggleDropdownMenuVisibility"),a(".feedback-win-trigger:not(.disable)").trigger("click")):"quote"===b.actionbarItem.name?(d=c.$el.find(".quote-popup-wrapper").ActionBarPopup({containment:"body"}),a(".quote-popup-wrapper").is(":visible")?d.ActionBarPopup("close"):
(a(".qt-quote").empty(),a("#quote-symbol").val(""),a("#get--trade-button").hide(),a("#get--research-button").hide(),d.ActionBarPopup("open"),a("#quote-symbol").val(),a("#get--quote-Button").click(function(){c.requestQuotes()}),a("#quote-symbol").on("keypress",function(a){(13==a.keyCode||9==a.keyCode)&&c.requestQuotes()}))):"check-deposit"===b.actionbarItem.name&&(c.depositView.toggle(),$actionBarContainer.actionbar("toggleDropdownMenuVisibility"))})},requestQuotes:function(){a(".qt-quote").empty();
this.loadQuote(a("#quote-symbol").val())},saveLoadedQuote:function(b){a.ajax({type:"GET",url:"/ftgw/fbc/ofportfolio/rest/saveSymbol?SYMBOL="+b})},loadQuote:function(b){var c=this,d=a.ajax({type:"GET",url:"/ftgw/fbc/ofoltxsvc/snippet/quote?quotetype=floatingQuote&symbols="+b,async:!1,success:function(){a("#quote-symbol").focus();a("#quote-symbol").select()}}).responseText;a(".qt-quote").append(d);a(".errorTrade").is(":visible")?(a("#get--research-button").hide(),a("#get--trade-button").hide()):c.saveLoadedQuote(b);
var e=a(".qt-quote .cusip-id").eq(0).val(),f=a(".qt-quote .security-code").eq(0).val();"E"===f?c.checkETFSymbol(e,b):"M"===f?(c.showTradeAndResearchButtons(),a("#get--research-button").click(function(){c.researchButtonRoute(envMap.FUNDRESEARCH_URL+"/mutual-funds/summary/"+e)}),a("#get--trade-button").click(function(){c.tradeButtonRoute(b,f)})):"O"===f?(a("#get--trade-button").show(),a("#get--trade-button").click(function(){c.tradeButtonRoute(b,f)})):"I"===f&&(a("#get--trade-button").hide(),a("#get--research-button").hide())},
checkETFSymbol:function(b,c){var d=this;a.ajax({url:"/ftgw/fbc/oftrade/rest/getHolidayList?REQUEST_TYPE=etf&SYMBOL="+b,dataType:"json",xhrFields:{withCredentials:!0},success:function(b){1==b.marketHolidays.etf?(d.$(".qt-quote--prospectus").show(),d.showTradeAndResearchButtons(),a("#get--research-button").click(function(){d.researchButtonRoute(envMap.SCREENER_URL+"/ftgw/etf/goto/snapshot/snapshot.jhtml?symbols="+c)})):(d.$(".qt-quote--prospectus").hide(),d.showTradeAndResearchButtons(),a("#get--research-button").click(function(){d.researchButtonRoute(envMap.ERESEARCH_URL_VALUE+
"/eresearch/evaluate/snapshot.jhtml?symbols="+c)}));a("#get--trade-button").click(function(){d.tradeButtonRoute(c,"E")})},onError:function(){}})},openProspectus:function(b){var c=a(b.currentTarget).closest(".trade-quote-info").find(".full-name").text(),d=b.currentTarget.id;try{d=c.match(/\(([^)]*)\)/)[1]}catch(e){d=b.currentTarget.id}b="FTS";5<d.length&&(b="CUSIP");d=envMap.FUNDRESEARCH_URL+"/prospectus/eproredirect?clientId=Fidelity&applicationId=OLTX&securityId="+d+"&securityIdType="+b;window.open(d,
"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable=yes,left=10,top=10,height=768,width=1024,fullscreen=no");return!1},showTradeAndResearchButtons:function(){a("#get--trade-button").show();a("#get--research-button").show()},tradeButtonRoute:function(b,c){var d={securityId:b,orderType:c,accountNumber:"",brkAccountType:""},e={top:a(document).scrollTop()+50};a(document).trigger("QUICK_TRADE",{security:d,location:e})},researchButtonRoute:function(a){window.location.href=
a},loadAddNote:function(){var b=envMap.TRADE_ARMOR_HOST+"/ftgw/dpcs/notebook/mini-notebook/script/notebook-mini.js";PIGlobal_INVESTORNOTEBOOK_HOST_URL=envMap.TRADE_ARMOR_HOST+"/ftgw/dpcs/notebook/";require([b],function(){a(document).on("QUICK_TRADE",function(){a("#in-widget-wrapper .cancel").trigger("click")})},function(){})},loadBillpay:function(a){var b=this;this.isBillpayLoaded=!0;if(!a.actionbarItem.$item.hasClass("disable"))if(this.billpayView)this.billpayView.open(),currentAnchor=a.actionbarItem.$item.find("a"),
$actionBarContainer.actionbar("toggleDropdownMenuVisibility");else var c="",c="Y"===envMap.BILLPAY_WIDGET_DEBUG?"/js/billpay-integrated-expand.js":"/js/billpay-integrated-min.js",d=envMap.WWW_BILLPAY_WIDGET_HOST+envMap.BILLPAY_WIDGET_CONTENT_PATH+c,e=!1,f=setInterval(function(){clearInterval(f);e||(e=!e,require([d],function(){require(["billpay-integrated"],function(c){b.billpayView=c.openBillpay({el:b.$el,actionBar:b});currentAnchor=a.actionbarItem.$item.find("a");$actionBarContainer.actionbar("toggleDropdownMenuVisibility")})}))},
0)},loadDMATransfer:function(a){this.loadMoneyTransferCSS();this.loadMoneyTransferWidget(null,a)},loadTransfer:function(a){this.loadMoneyTransferWidget(a,null)},loadMoneyTransferCSS:function(b){var c=this,d=envMap.WWW_TRANSFER_WIDGET_HOST+envMap.TRANSFER_WIDGET_CONTENT_PATH;if(this.isTransferLoaded)b&&c.loadTransfer(b);else{var e=a('<link rel="stylesheet" type="text/css" href="'+d+'/css/transfer-integrated.css" />');a("html").hasClass("lt-ie9")&&(e=a('<link rel="stylesheet" type="text/css" href="'+
d+'/css/transfer-integrated-ie.css" />'));this.isTransferLoaded=!0;a("head").append(e);e.load(function(){b&&c.loadTransfer.call(c,b)})}},loadMoneyTransferWidget:function(b,c){var d=this;if(this.moneytransferView){c?(this.moneytransferView.open({dmaContext:c.dmaContext,dmaAccountInfo:c.dmaAccountInfo}),currentAnchor=a(".action-bar--item-title.transfer")):(this.moneytransferView.open({initValues:d.transferInitValues}),currentAnchor=b.actionbarItem.$item.find("a"));if(!d||!d.transferInitValues||"undefined"===
typeof d.transferInitValues.hideDropdownMenu||!1===d.transferInitValues.hideDropdownMenu)d.transferInitValues&&("undefined"===typeof d.transferInitValues.fromAccount||!1===d.transferInitValues.fromAccount)&&$actionBarContainer.actionbar("toggleDropdownMenuVisibility");d.transferInitValues={}}else var e=envMap.WWW_TRANSFER_WIDGET_HOST+envMap.TRANSFER_WIDGET_CONTENT_PATH,e="Y"===envMap.TRANSFER_WIDGET_DEBUG?e+"/js/transfer-integrated-expand.js":e+"/js/transfer-integrated-min.js",f=!1,j=setInterval(function(){clearInterval(j);
f||(f=!f,require([e],function(){require(["transfer-integrated"],function(e){c?(d.moneytransferView=e.openMoneyTransfer({el:d.$el,actionBar:d,dmaContext:c.dmaContext,dmaAccountInfo:c.dmaAccountInfo}),currentAnchor=a(".action-bar--item-title.transfer")):(d.moneytransferView=e.openMoneyTransfer({el:d.$el,actionBar:d,initValues:d.transferInitValues}),currentAnchor=b.actionbarItem.$item.find("a"));if(!d||!d.transferInitValues||"undefined"===typeof d.transferInitValues.hideDropdownMenu||!1===d.transferInitValues.hideDropdownMenu)d.transferInitValues&&
("undefined"===typeof d.transferInitValues.fromAccount||!1===d.transferInitValues.fromAccount)&&$actionBarContainer.actionbar("toggleDropdownMenuVisibility");d.transferInitValues={}})}))},0)},exitPreview:function(){a(document).trigger(b.EVENTS.POPUP_CLOSE);a(document).trigger(b.EVENTS.EXIT_PREVIEW_POPUP_OPEN);a(document).trigger(b.EVENTS.TEST_VPN)},hideAccountSelectorInPhone:function(){window.matchMedia&&window.matchMedia("(max-width: 30em)").matches&&a(document).trigger(b.EVENTS.REVEAL_ACCOUNT_SELECTOR,
[!1])},toggleAccountSelector:function(c){c=a(c.currentTarget);c.removeClass("action-bar--animation-slide-in").addClass("action-bar--button-clicked").addClass("action-bar--animation-slide-out");a(document).trigger(b.EVENTS.REVEAL_ACCOUNT_SELECTOR,[c.hasClass("action-bar--button-clicked")])},actionDropdownInMobile:function(){var b=a(".port-nav").hasClass("reveal");b?a(".action-bar--accounts").addClass("action-bar--animation-slide-out").removeClass("action-bar--animation-slide-in"):a(".action-bar--accounts").removeClass("action-bar--animation-slide-out").addClass("action-bar--animation-slide-in");
console_log(b)},loadTradeTicket:function(){this.getAppContext().subscribeEvent("routeTrade",function(a){(window.FID=window.FID||{}).tradeInfo=a});if(!(envMap.LOAD_NGTT_CSS_FROM_TRADE_TOGGLE&&"ON"===envMap.LOAD_NGTT_CSS_FROM_TRADE_TOGGLE)){var b="/css";envMap.NGTT_MVP4_TOGGLE&&"ON"===envMap.NGTT_MVP4_TOGGLE&&(b="/css-MVP4");a("html").hasClass("lt-ie9")?(b=envMap.WWW_CDN_URL+envMap.NG_TT_CONTENT_URL+b,a("head").append('<link rel="stylesheet" type="text/css" href="'+b+'/float/ngtt-integrated-ie.css" />'),
a("head").append('<link rel="stylesheet" type="text/css" href="'+b+'/float/ngtt-integrated-ie-blessed1.css" />')):(b=envMap.WWW_CDN_URL+envMap.NG_TT_CONTENT_URL+b,a("head").append('<link rel="stylesheet" type="text/css" href="'+b+'/float/ngtt-integrated.css" />'))}}})});define("text!templates/introtour.html",[],function(){return'\x3c!-- Intro Tour --\x3e\n<div class="base-popup base-modal--container base-modal--container-large introtour-modal js-summary-intro-tour" data-willShow="true">\n\n\t\x3c!-- Hidden for redundancy --\x3e\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t<ul class="introtour-modal--slide-content-container">\n\n\t\x3c!-- Intro Tour Content --\x3e\n\n\t\t<li class="introtour-modal--slide-content introtour-modal--slide-content-active clearfix">\n\n\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t<h2 class="introtour-modal--container-header">Welcome to the New Accounts &amp; Trade experience!</h2>\n\t\t\t</div>\n\n\t\t\t<div class="introtour-modal--right-half">\n\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-spaced" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/experience-multi-device.png" alt="Welcome to the New Accounts &amp; Trade experience!">\n\t\t\t</div>\n\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t<p class="introtour-modal--list-info">We\'ve made it easier than ever for you to manage your accounts, with:</p>\n\n\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t<li class="list-unordered--item">Streamlined, more intuitive navigation.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">Quick and easy access to common tasks.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">New summary page with insight and guidance.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">Touch-friendly experience across mobile, tablet, and desktop.</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t<h2 class="introtour-modal--container-header">Find your account information quickly and easily</h2>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--right-half">\n\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-zoom" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/tabanimation.gif" alt="Find your account information quickly and easily">\n\t\t\t</div>\n\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t<li class="list-unordered--item">Track and research all your holdings together under Positions.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">View orders, pending transfers, and history under Activity &amp; Orders.</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t<h2 class="introtour-modal--container-header">Trade, transfer money, and pay bills&#8212;all from one place</h2>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--right-half">\n\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-zoom" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/actionbaranimation.gif" alt="Trade, transfer money, and pay bills &#8211; easily and quickly">\n\t\t\t</div>\n\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t<li class="list-unordered--item">Access common tasks any time via the quick links on the menu bar.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">Complete your tasks without ever leaving the current view.</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t<div class="introtour-modal--slide-content-head introtour-modal--slide-content-head-large">\n\t\t\t\t<h2 class="introtour-modal--container-header">Get a bird\'s-eye view of your accounts with new Summary page</h2>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--right-half">\n\t\t\t\t<img class="introtour-modal--slide-image" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/cardanimation.gif" alt="Get a bird\'s-eye view of your accounts with new Summary page">\n\t\t\t</div>\n\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t<li class="list-unordered--item">View key account activity and timely market data.</li>\n\n\t\t\t\t\t<li class="list-unordered--item">Get insight and guidance to help you make smarter, more informed decisions.</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t</li>\n\n\t\x3c!-- End Intro Tour Content --\x3e\n\n\t</ul>\n\n\t<div class="introtour-modal--actions">\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-first clearfix introtour-modal--action-container-active">\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--next">Get Started</button>\n\t\t\t</span>\n\t\t</div>\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-middle clearfix">\n\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t</span>\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--next">Next</button>\n\t\t\t</span>\n\t\t</div>\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-last clearfix">\n\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t</span>\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--close">Done</button>\n\t\t\t</span>\n\t\t</div>\n\n\t</div>\n\t\n\t<div class="introtour-modal--classic-note-container">\n\t\t<%\n\t\t\tif(txnData.activePhaseName != \'ACT.NEXTGEN.SWITCH\'){\n\t\t%>\n\t\t\x3c!-- Intro Tour before switching note --\x3e\n\t\t<div class="introtour-modal--classic-note introtour-modal--classic-note-active">\n\t\t\t<img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/icon-i-bluecircle-2x.png" height="15" width="15" alt="Note">\n\t\t\t<p class="introtour-modal--classic-note-comment"><strong>Note:</strong> You can still switch back to the classic experience by choosing <strong>Exit Preview</strong> in the upper right.</p>\n\t\t</div>\n\t\t<%\n\t\t\t}\n\t\t%>\n\t</div>\n\n\n\t<div class="introtour-modal--page-counter-container clearfix">\n\t\t<span class="introtour-modal--page-counter">\n\t\t\t<span class="introtour-modal--page-counter-current"></span> of <span class="introtour-modal--page-counter-max"></span>\n\t\t</span>\n\t</div>\n\n</div>\n\n\x3c!-- Help Instruction Bubble --\x3e\n<div class="infotour-modal--help-instruction-bubble-container" style="display:none;">\n\t<div class="infotour-modal--help-instruction-bubble">\n\t\t<p>Get help, take the tour again, or give feedback here!</p>\n\t</div>\n</div>'});
(function(a){function b(a){if(a in f.style)return a;var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1);if(a in f.style)return a;for(a=0;a<b.length;++a){var d=b[a]+c;if(d in f.style)return d}}function g(a){"string"===typeof a&&this.parse(a);return this}function c(b,c,d,e){var f=[];a.each(b,function(b){b=a.camelCase(b);b=a.transit.propertyMap[b]||a.cssProps[b]||b;b=b.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});-1===a.inArray(b,f)&&f.push(b)});a.cssEase[d]&&(d=a.cssEase[d]);
var j=""+h(c)+" "+d;0<parseInt(e,10)&&(j+=" "+h(e));var k=[];a.each(f,function(a,b){k.push(b+" "+j)});return k.join(", ")}function e(b,c){c||(a.cssNumber[b]=!0);a.transit.propertyMap[b]=j.transform;a.cssHooks[b]={get:function(c){return a(c).css("transit:transform").get(b)},set:function(c,d){var e=a(c).css("transit:transform");e.setFromString(b,d);a(c).css({"transit:transform":e})}}}function d(a,b){return"string"===typeof a&&!a.match(/^[\-0-9\.]+$/)?a:""+a+b}function h(b){a.fx.speeds[b]&&(b=a.fx.speeds[b]);
return d(b,"ms")}a.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var f=document.createElement("div"),j={},k=-1<navigator.userAgent.toLowerCase().indexOf("chrome");j.transition=b("transition");j.transitionDelay=b("transitionDelay");j.transform=b("transform");j.transformOrigin=b("transformOrigin");f.style[j.transform]=
"";f.style[j.transform]="rotateY(90deg)";j.transform3d=""!==f.style[j.transform];var l=j.transitionEnd={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[j.transition]||null,p;for(p in j)j.hasOwnProperty(p)&&"undefined"===typeof a.support[p]&&(a.support[p]=j[p]);f=null;a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",
easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",
easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};a.cssHooks["transit:transform"]={get:function(b){return a(b).data("transform")||
new g},set:function(b,c){var d=c;d instanceof g||(d=new g(d));b.style[j.transform]="WebkitTransform"===j.transform&&!k?d.toString(!0):d.toString();a(b).data("transform",d)}};a.cssHooks.transform={set:a.cssHooks["transit:transform"].set};"1.8">a.fn.jquery&&(a.cssHooks.transformOrigin={get:function(a){return a.style[j.transformOrigin]},set:function(a,b){a.style[j.transformOrigin]=b}},a.cssHooks.transition={get:function(a){return a.style[j.transition]},set:function(a,b){a.style[j.transition]=b}});e("scale");
e("translate");e("rotate");e("rotateX");e("rotateY");e("rotate3d");e("perspective");e("skewX");e("skewY");e("x",!0);e("y",!0);g.prototype={setFromString:function(a,b){var c="string"===typeof b?b.split(","):b.constructor===Array?b:[b];c.unshift(a);g.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=
d(a,"deg")},rotateX:function(a){this.rotateX=d(a,"deg")},rotateY:function(a){this.rotateY=d(a,"deg")},scale:function(a,b){void 0===b&&(b=a);this.scale=a+","+b},skewX:function(a){this.skewX=d(a,"deg")},skewY:function(a){this.skewY=d(a,"deg")},perspective:function(a){this.perspective=d(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,b){void 0===this._translateX&&(this._translateX=0);void 0===this._translateY&&(this._translateY=0);
null!==a&&void 0!==a&&(this._translateX=d(a,"px"));null!==b&&void 0!==b&&(this._translateY=d(b,"px"));this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");a[0]&&(a[0]=parseFloat(a[0]));a[1]&&(a[1]=parseFloat(a[1]));return a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),b=0;3>=b;++b)a[b]&&(a[b]=parseFloat(a[b]));
a[3]&&(a[3]=d(a[3],"deg"));return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,c,d){b.setFromString(c,d)})},toString:function(a){var b=[],c;for(c in this)if(this.hasOwnProperty(c)&&(j.transform3d||!("rotateX"===c||"rotateY"===c||"perspective"===c||"transformOrigin"===c)))"_"!==c[0]&&(a&&"scale"===c?b.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?b.push(c+"3d("+this[c]+",0)"):b.push(c+"("+this[c]+")"));return b.join(" ")}};a.fn.transition=a.fn.transit=function(b,
d,e,f){var k=this,g=0,p=!0;"function"===typeof d&&(f=d,d=void 0);"function"===typeof e&&(f=e,e=void 0);"undefined"!==typeof b.easing&&(e=b.easing,delete b.easing);"undefined"!==typeof b.duration&&(d=b.duration,delete b.duration);"undefined"!==typeof b.complete&&(f=b.complete,delete b.complete);"undefined"!==typeof b.queue&&(p=b.queue,delete b.queue);"undefined"!==typeof b.delay&&(g=b.delay,delete b.delay);"undefined"===typeof d&&(d=a.fx.speeds._default);"undefined"===typeof e&&(e=a.cssEase._default);
d=h(d);var z=c(b,d,e,g),D=a.transit.enabled&&j.transition?parseInt(d,10)+parseInt(g,10):0;if(0===D)return d=p,e=function(a){k.css(b);f&&f.apply(k);a&&a()},!0===d?k.queue(e):d?k.queue(d,e):e(),k;var y={};d=p;e=function(c){this.offsetWidth;var d=!1,e=function(){d&&k.unbind(l,e);0<D&&k.each(function(){this.style[j.transition]=y[this]||null});"function"===typeof f&&f.apply(k);"function"===typeof c&&c()};0<D&&l&&a.transit.useTransitionEnd?(d=!0,k.bind(l,e)):window.setTimeout(e,D);k.each(function(){0<D&&
(this.style[j.transition]=z);a(this).css(b)})};!0===d?k.queue(e):d?k.queue(d,e):e();return this};a.transit.getTransitionValue=c})(jQuery);define("jqueryTransmit",function(){});
(function(a,b){var g;g=b.FID=b.FID||{};var c=g.BasePopup,e=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},c=g.BasePopup,d=g.ModalPopup=function(b){c.prototype.constructor.apply(this,arguments);var d=this,e=this._$DOMElement.find(".modal-popup--button"),h=a(".modal-popup--overlay");this._$ModalButtons=e;0===h.length&&(h=a("<div/>",{"class":"modal-popup--overlay"}),h.prependTo("body"));this._$layer=
h;e.on("click",function(a){d._onButtonclicked.apply(d,arguments)})};e(d,c);d.Events=a.extend({},c.Events,{buttonClicked:"buttonclicked"});d.prototype._onButtonclicked=function(b){b.stopPropagation();b.preventDefault();b=a.Event(d.Events.buttonClicked,{button:b.currentTarget});this._$DOMElement.trigger(b)};d.prototype.open=function(){c.prototype.open.apply(this,arguments);this._$layer.addClass("modal-popup--overlay-visible");this._$DOMElement.addClass(c._BASE_POPUP_VISIBLE_CLASS_NAME)};d.prototype.close=
function(){this._isOpen&&(c.prototype.close.apply(this,arguments),this._$layer.removeClass("modal-popup--overlay-visible"),this._$DOMElement.removeClass(c._BASE_POPUP_VISIBLE_CLASS_NAME))};var h=a.BasePopup.extend({init:function(){return this.each(function(b,c){a(c).data("basepopup-instance",new d(this))})}});a.fn.ModalPopup=function(){var b=arguments[0],c=arguments;if(h[b])b=h[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||!b)b=h.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),
this;return b.apply(this,c)};a.ModalPopup=a.extend(a.ModalPopup,a.BasePopup,{Events:d.Events})})(jQuery,window);define("components/modalpopup",["jquery","components/basepopup"],function(a){return function(){return a.ModalPopup}}(this));
(function(a,b){var g=b.FID=b.FID||{};g.Applications=g.Applications||{};var g=b.FID=b.FID||{},c=a,e=g.ModalPopup,d=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},h=c("body"),f="drop-in",e=g.ModalPopup,j=function(a,b,d,f){function j(){B.removeClass(la);c(B[y]).addClass(la);I.removeClass(va);0===y?J.addClass(va):y===S?V.addClass(va):O.addClass(va);ea.html(y+1)}function h(){y++;j();W.hide()}function k(){0<
y&&(y--,j());0===y&&W.show()}var g=this;a=c(a).find(".introtour-modal");var l=c(".modal-popup--overlay"),D=c(c(b)[0]),y=0,B=a.find(".introtour-modal--slide-content");b=a.find(".introtour-modal--actions");var I=b.find(".introtour-modal--action-container"),S=I.length,J=b.find(".introtour-modal--action-container-first"),O=b.find(".introtour-modal--action-container-middle"),V=b.find(".introtour-modal--action-container-last"),N=b.find(".introtour-modal--next"),P=b.find(".introtour-modal--prev"),U=c(".infotour-modal--help-instruction-bubble-container"),
W=a.find(".introtour-modal--classic-note-container"),ca=a.find(".introtour-modal--page-counter-container"),R=a.find(".base-popup--close-button");(b=a.find(".introtour-modal--slide-content-container").data("slide-count"))&&(S=b-1);var Z=I.find(".introtour-modal--close"),ea=a.find(".introtour-modal--page-counter-current");b=a.find(".introtour-modal--page-counter-max");var la="introtour-modal--slide-content-active",va="introtour-modal--action-container-active";1>=S?ca.hide():ca.show();this._$introTourModalOverlay=
l;this._$introTourEl=a;this._layoutClasses=d;this._$transitionTarget=D;this._$helpInstructionBubbleContainer=U;this._tourType=f;e.prototype.constructor.call(this,a);R.swipe({click:function(a){g.closeTour(a.target)}});N.on("click",h);P.on("click",k);1<B.length&&a.swipe({swipeLeft:function(){y!==S?h():y===S&&g.closeTour()},swipeRight:function(){0!==y&&k()}});Z.on("click",function(a){a.preventDefault();g.closeTour(a.target)});J.find(N).on("click",function(){O.find(N).focus()});V.find(P).on("click",function(){O.find(P).focus()});
d=c(".introtour-modal--slide-image");for(f=d.length-1;0<=f;f--)a=c(d[f]),a.attr("src",a.attr("data-imagesrc"));ea.html(y+1);b.html(S+1)};d(j,e);j.prototype._showAnimatedHelpBubble=function(a,d){function e(){j.hide();h.off("resize",e)}var f=0,j=this._$helpInstructionBubbleContainer,h=c(b);h.on("resize",e);h.on("openInfoFlyout",e);if(c.browser.msie&&("8.0"===c.browser.version||"9.0"===c.browser.version))f=3E3;j.css({left:a-5-j.width(),top:d-j.height()/3}).fadeIn().transit({x:-25},800,"easeInOutCubic").transit({x:0},
800,"easeInOutCubic").transit({x:-25},800,"easeInOutCubic").transit({x:-0},800,"easeInOutCubic").transit({x:-25},800,"easeInOutCubic").transit({x:0},800,"easeInOutCubic").delay(f).fadeOut(300,function(){h.off("resize",e);h.off("openInfoFlyout",e)})};var k=!1;j.prototype.closeTour=function(a){function b(a){f.off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",b);g.ModalPopup.prototype.close.apply(D,arguments);D._showAnimatedHelpBubble(d,e);k=!1;f.removeClass("animate-right")}if(!k){var d=
0,e=0,f=this._$introTourEl,j=f.hasClass("introtour-positions-modal"),A=f.hasClass("introtour-orders-modal"),w=f.hasClass("introtour-atp-modal"),z=this._$transitionTarget,D=this;0<z.length&&z.is(":visible")&&(d=z.offset().left,e=z.offset().top);if("nhh-welcome"===this._tourType)g.ModalPopup.prototype.close.apply(D,arguments);else{k=!0;f.addClass("animate-right");if(c("html").hasClass("lt-ie10"))g.ModalPopup.prototype.close.apply(D,arguments),D._showAnimatedHelpBubble(d,e),k=!1;else f.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",
b);h.removeClass("tour-in-progress");"undefined"!==typeof Storage&&(j?localStorage.setItem("hasViewedPositionsTour",!0):A?localStorage.setItem("hasViewedOrdersTour",!0):w?localStorage.setItem("hasViewedATPTour",!0):localStorage.setItem("hasViewedIntroTour",!0));j=c.Event(l.IntroTourClosed,{popup:f[0],eventSource:a});f.trigger(j)}}};j.prototype.open=function(){function a(){b.off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",a);b.removeClass(f)}var b=this._$introTourEl,c=this._$introTourModalOverlay;
e.prototype.open.apply(this,arguments);b.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",a);b.addClass(f);c.addClass(this._layoutClasses);b.focus();h.addClass("tour-in-progress")};j.prototype.close=function(){this.closeTour()};var l={IntroTourClosed:"introTourClosed"};j.events=l;g.Applications.IntroTour=j;c.IntroTour=c.extend(c.IntroTour,c.ModalPopup,{})})(jQuery,window);define("IntroTour",["jquery","jqueryTransmit","components/basepopup","components/modalpopup"],function(){});
define("text!templates/ma-introtour.html",[],function(){return'\x3c!-- Intro Tour --\x3e\n\t<div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-managed-accounts-modal">\n\n\t\t\x3c!-- Hidden for redundancy --\x3e\n\t\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t\t<ul class="introtour-modal--slide-content-container">\n\n\t\t\x3c!-- Intro Tour Content --\x3e\n\n\t\t\t<li class="introtour-modal--slide-content introtour-modal--slide-content-active clearfix">\n\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Welcome to your new Managed Accounts experience!</h2>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="introtour-modal--right-half">\n\t\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-spaced" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/welcome/managed_accounts_1.png" alt="Get the same great managed accounts experience on your laptop, desktop, tablet or mobile phone.">\n\t\t\t\t</div>\n\t\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t\t<p class="introtour-modal--list-info">We\'ve made it easier than ever for you to keep track of your account, with:</p>\n\n\t\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t    <li class="list-unordered--item">Daily snapshots of performance and balance information.</li>\n\n\t\t\t\t\t    <li class="list-unordered--item">Regular updates from your investment team.</li>\n\n\t\t\t\t\t    <li class="list-unordered--item">Quick, easy access to help and key contracts.</li>\n\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t</li>\n\n\t\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Know what you own and how your account is doing</h2>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="introtour-modal--right-half" align="center">\n\t\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-zoom" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/welcome/managed_accounts_2.png" alt="View snapshots of your monthly income, cumulative performance, and balance over time.">\n\t\t\t\t</div>\n\t\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t    <li class="list-unordered--item">Get a summary of your returns and cumulative performance.</li>\n\n\t\t\t\t\t    <li class="list-unordered--item">View changes in your account balance.</li>\n\t\t\t\t\t    \n\t\t\t\t\t    <li class="list-unordered--item">See income and asset allocation breakdown.</li>\n\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t</li>\n\n\t\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Get regular updates from your investment team</h2>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="introtour-modal--right-half" align="center">\n\t\t\t\t\t<img class="introtour-modal--slide-image introtour-modal--slide-image-zoom" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/welcome/managed_accounts_3.png" alt="See updates from your investment team and other market information related to your account.">\n\t\t\t\t</div>\n\t\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t    <li class="list-unordered--item">View explanations of recent trades made in your account.</li>\n\n\t\t\t\t\t    <li class="list-unordered--item">Watch videos and webcasts clarifying how your model portfolio is being managed.</li>\n\t\t\t\t\t    \n\t\t\t\t\t    <li class="list-unordered--item">Understand how market events impact activity in your account.</li>\n\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t</li>\n\n\t\t\t<li class="introtour-modal--slide-content clearfix">\n\n\t\t\t\t<div class="introtour-modal--slide-content-head introtour-modal--slide-content-head-large">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Quickly find the help you need</h2>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="introtour-modal--right-half" align="center">\n\t\t\t\t\t<img class="introtour-modal--slide-image" data-imagesrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/welcome/managed_accounts_4.png" alt="Find key contact information at the top right of your screen.">\n\t\t\t\t</div>\n\t\t\t\t<div class="introtour-modal--left-half">\n\n\t\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\n\t\t\t\t\t    <li class="list-unordered--item">Use our new, comprehensive Frequently Asked Questions section to find answers online.</li>\n\n\t\t\t\t\t    <li class="list-unordered--item">View contact information for your account representatives.</li>\n\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t</li>\n\n\t\t\x3c!-- End Intro Tour Content --\x3e\n\n\t\t</ul>\n\n\t\t<div class="introtour-modal--actions">\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-first clearfix introtour-modal--action-container-active">\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--next">Get Started</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-middle clearfix">\n\t\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t\t</span>\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--next">Next</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-last clearfix">\n\t\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t\t</span>\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--close">Done</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t</div>\n\t\t\n\n\n\t\t<div class="introtour-modal--page-counter-container clearfix">\n\t\t\t<span class="introtour-modal--page-counter">\n\t\t\t\t<span class="introtour-modal--page-counter-current"></span> of <span class="introtour-modal--page-counter-max"></span>\n\t\t\t</span>\n\t\t</div>\n\n\t</div>\n\n\t\x3c!-- Help Instruction Bubble --\x3e\n\t<div class="infotour-modal--help-instruction-bubble-container" style="display:none;">\n\t\t<div class="infotour-modal--help-instruction-bubble">\n\t\t\t<p>Get help or give feedback here!</p>\n\t\t</div>\n\t</div>'});
define("tasks/ma-tour-preference-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/snippet/modifyPortfolioPreference",type:"POST",buildParams:function(a){return{prefName:"MA_WELCOME_TOUR_IND",prefValue:a.tourInd}},isNotCancelable:!0})});
define("views/ma-introtour-view",["jquery","views/base-view","IntroTour","text!../templates/ma-introtour.html","tasks/ma-tour-preference-task"],function(a,b,g,c,e){return b.extend({initialize:function(){},showMaIntroTour:function(){var b=_.template(c),h={txnData:{activePhaseName:a("#intro-tour-wrapper").data("active-phase-name")}},b=b(h);a("#ma-intro-tour-wrapper").html(b);a("#intro-tour-wrapper").empty();a("#intro-tour-positions-wrapper").empty();a("#fv-gtm-intro-tour-wrapper").empty();(new FID.Applications.IntroTour(a("#ma-intro-tour-wrapper"),
".info-flyout")).open();a(document).on(FID.Applications.IntroTour.events.IntroTourClosed+".maintrotour",function(){AT_MA_Welcome_tour_indicator="N";a(document).off(FID.Applications.IntroTour.events.IntroTourClosed+".maintrotour");(new e({data:{tourInd:"N"}})).run()})}})});
define("models/introtour-queue-model",["jquery","backbone","components/basepopup","IntroTour"],function(a,b,g){var c=[];return new (b.Model.extend({initialize:function(){this.set("intro-tour-obj-array",c)},addIntroTourObjQueue:function(a,b){c.push({func:a,selector:b});1==c.length&&this.openIntrotour(c[0])},callNextIntroTourObj:function(){c.shift();0!=c.length&&this.openIntrotour(c[0])},openIntrotour:function(b){var c=this;b.func();a(b.selector).off(".introtourmodel");a(b.selector).on(g.Events.CloseDialog+
".introtourmodel",function(){setTimeout(function(){c.callNextIntroTourObj()})})}}))});
define("views/nextgen-welcome-view","jquery backbone views/base-view util/eventhub-backbone text!../templates/introtour.html models/account-context-model views/ma-introtour-view models/introtour-queue-model IntroTour".split(" "),function(a,b,g,c,e){b=g.extend({events:{"click .start-now-button:not(.not-active)":"startNowClick","click .start-now:not(.not-active)":"startNowClick","click .no-thanks-button, .onion-skin--to-classic-link":"noThanksClick","click .no-thanks":"noThanksClick","click .welcome-keyword.new":"whatisnewClick",
"change .acknowledge-checkbox":"toggleStartNow","click .legal-content-link":"popLegalContent","click .close-button":"closeLegalContent"},locateAccountActionOnion:function(){var b=a(".action-bar--item-transfer");if(0<b.length){var c=a(".onion-skin-account-action"),e=b.offset().left+b.outerWidth(!0)-10,b=b.offset().top+c.height();a(".action-bar--wrapper.action-bar--group-container").is(":hidden")&&(b=a(".action-bar--mobile.action-bar--accounts"),e=b.offset().left+0.5*b.width(),b=b.offset().top+b.outerHeight(!0));
c.css("left",e).css("top",b)}},locateAccountProtfolioOnion:function(){var b=a(".tabs--nav-content li:eq(1)");if(0<b.length){var c=a(".onion-skin-account-portfolio"),e=b.offset().top+b.outerHeight()-8,b=b.offset().left+0.3*b.outerWidth();c.css("left",b).css("top",e)}},locateAccountInfoOnion:function(){var b=a(".more-tab--tab.more-tab--tab-4");if(0<b.length){var c=a(".onion-skin-account-information"),e=b.offset().left+0.7*b.outerWidth(!0),b=b.offset().top+b.outerHeight()-8;c.css("left",e).css("top",
b)}},locateAccountNavigationOnion:function(){var b=a(".js-account").eq(0),c=a(".onion-skin-account-navigation");0<b.length&&568<a(window).width()?(b=b.offset(),b.left+=90,b.top+=10,c.offset(b),c.show()):c.hide()},locateAccountWelcome:function(){var b=a(".tabs--nav-content li:eq(0)"),c=a(".action-bar--wrapper.action-bar--group-container"),e=a(".onion-skin-account-welcome");0<b.length&&(leftMargin=568<a(window).width()?c.is(":visible")?b.offset().left+0.25*e.width():0.5*b.outerWidth(!0):"auto",e.css("margin-left",
leftMargin))},loadExitpreviewOnion:function(){var b=a(".action-bar--item-exitpreview");if(0<b.length){var c=a(".onion-skin--exit-preview"),e=b.offset().top+b.height(),j=b.offset().left-c.outerWidth(!0)+0.4*b.outerWidth(!0);a(".action-bar--wrapper.action-bar--group-container").is(":hidden")&&(b=a(".action-bar--account-alert"),j=b.offset().left-0.5*b.outerWidth(!0),e=b.offset().top+b.height());c.css("top",e).css("left",j)}},loadFeedbackOnion:function(){var b=a(".feedback-content");if(0<b.length){var c=
a(".onion-skin--feedback"),e=b.offset().top-c.height(),b=b.offset().left-c.width();c.css("top",e).css("left",b)}},locateOnionSkin:function(){this.locateAccountActionOnion();this.locateAccountProtfolioOnion();this.locateAccountInfoOnion();this.locateAccountNavigationOnion();this.locateAccountWelcome();this.loadExitpreviewOnion();this.loadFeedbackOnion()},initialize:function(){var b=this;a(window).resize(function(){b.locateOnionSkin()});a(".overlay-background").show();this.whatisnewClick()},render:function(){return this},
startNowClick:function(){this.handleStartNow(!0)},handleStartNow:function(b){b&&this.getAppContext().router.navigate("startNow",{trigger:!0});a(document).trigger("MESSAGE_POPUP_OPEN");a.ajax({url:"/ftgw/fbc/ofsummary/NGWelcome?Act=IN",dataType:"html",xhrFields:{withCredentials:!0}})},noThanksClick:function(){window.location.href="/ftgw/fbc/ofsummary/NGWelcome?Act=OUT"},whatisnewClick:function(){a(document).trigger("this.context.constants.EVENTS.MESSAGE_TEMPORAY_CLOSE");a("#welcome-screen").hide();
a("#onion-skin").show();a(".onion-skin--content").show();this.locateOnionSkin()},toggleStartNow:function(b){"checked"===a(b.currentTarget).attr("checked")?(a(".acknowledge-checkbox",this.$el).attr("checked",!0),a(".start-now-button").removeClass("not-active"),a(".start-now").removeClass("not-active")):(a(".acknowledge-checkbox",this.$el).attr("checked",!1),a(".start-now-button").addClass("not-active"),a(".start-now").addClass("not-active"))},popLegalContent:function(){this.orginalScreen=a("#onion-skin, .onion-skin--content").is(":visible")?
a("#onion-skin, .onion-skin--content"):a("#welcome-screen");this.orginalScreen.hide();a(".legal-content-area").show()},closeLegalContent:function(){this.orginalScreen.show();a(".legal-content-area").hide()},_adjustAcctNavTop:function(){var b=a(".all_accounts:first").offset().top+30,c=!0;a(".acct-list").each(function(e,j){a(j).find("li").each(function(e,f){if(144<a(f).offset().top)return b=a(f).offset().top+10,c=!1});if(!c)return!1});return b}});c.subscribeEvent("routeStartNow",function(){AT_beta_opt_indicator=
"1";a("#welcome-screen").hide();a("#onion-skin").hide();a(".onion-skin--content").hide();a(".overlay-background").hide();a(".acknowledge-checkbox").attr("checked",!1)});b.showIfPossible=function(){function b(){a("#intro-tour-positions-wrapper").empty();a("#ma-intro-tour-wrapper").empty();a("#fv-gtm-intro-tour-wrapper").empty();var c=_.template(e),d={txnData:{activePhaseName:a("#intro-tour-wrapper").data("active-phase-name")}},c=c(d);a("#intro-tour-wrapper").html(c);(new FID.Applications.IntroTour(a("#intro-tour-wrapper"),
".info-flyout")).open();a("#intro-tour-wrapper").data("willshow",!1)}"1"!=AT_beta_opt_indicator&&0<a(".introtour-modal").length&&a(document).bind("this.context.constants.EVENTS.OPEN_INTROTOUR",b);a(document).bind("FORCE_OPEN_INTROTOUR",b);a(".info-flyout--intro-tour").click(function(){a(".info-flyout").removeClass("info-flyout-open");b()});a(document).trigger("MESSAGE_POPUP_OPEN")};return b});
define("lib/simple-char-table",["underscore"],function(a){function b(a,b){this.str=a||"";this.padding=+b||0}b.prototype.toString=function(){return this.padding>this.str.length?Array.prototype.join.call({length:this.padding-this.str.length+1}," ")+this.str:this.str};return function(g){function c(a,c,f){var h=e,g;if(!(g=e[c]))g=function(a){this.str=a||""},g.prototype=new b;h=h[c]=g;h.prototype.padding=Math.max(h.prototype.padding||0,(f||"").length);d[a]=d[a]||(d[a]=[]);d[a][c]=new h(f)}var e=[],d=[],
h=[],f=0;c(0,0,"");a.each(g,function(b,d){d=String(d);c(f+1,0,d);a.each(b,function(b,d){d=String(d);var e=a.indexOf(h,d);-1===e&&(e=h.length,h.push(d));c(0,e+1,d);c(f+1,e+1,String(b))});f++});return a.map(d,function(a,b){for(var c=0;c<e.length;a[c]||(a[c]=new e[c]),c++);c=a.join("    ");0===b&&(c+="\n"+Array.prototype.join.call({length:c.length+1},"-"));return c}).join("\n")}});
define("lib/dfa",["backbone","underscore","lib/simple-char-table"],function(a,b,g){var c={state:"UNDEFINED_STATE"},e={state:"UNINITIALIZED"},d=function(){function a(){}this.DFATableStates=a;this.DFATableActions=function(){};this.DFATable=new a;this.startState=this._state=e;this.finalStates={}};b.extend(d.prototype,a.Events);d.prototype.declareStates=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.DFATableStates.prototype[b]||(this.DFATableStates.prototype[b]=new this.DFATableActions)}};
d.prototype.declareAccept=function(a,b,d){a=this.DFATable[a]=this.DFATable[a]||new this.DFATableActions;b in this.DFATableActions.prototype||(this.DFATableActions.prototype[b]=c);a[b]=d};d.prototype.declareFinalStates=function(){for(var a=0;a<arguments.length;a++)this.finalStates[arguments[a]]=!0};d.prototype.declareStartState=function(a){if(!(a in this.DFATableStates.prototype))throw Error("State "+a+" is not in state list.");this.startState=a};d.prototype.isFinalState=function(){return this._state in
this.finalStates};d.prototype.startWithState=function(a){if(a!==this.startState)throw Error("State '"+a+'" is not an start state.');this._state=a;this.trigger("stateChanged",a,e,"_init")};d.prototype.accept=function(a){if(this.isFinalState())throw Error("Cannot change state at final state: "+this._state);if(this._state===c||!(this._state in this.DFATable))throw Error("Illegal current state for this DFA.");if(this._state===e)throw Error("DFA is not ready to start - no initial state.");if(a in this.DFATableActions.prototype){var b=
this._state,d=this.DFATable[this._state][a];if(!d||d===c)throw Error('Action "'+a+'" moves DFA from "'+this._state+'" to undefined state:'+JSON.stringify(d));this.trigger("stateChanged",d,b,a);this._state=d}else throw Error("DFA doesn't accept \""+a+'" action.');};d.prototype.toString=function(){return g(this.DFATable)};d.createInstance=function(a){var c=new this;c.declareStates.apply(c,a.states);c.declareStartState(a.startState);c.declareFinalStates.apply(c,a.finalStates);b.each(a.actions,function(a,
d){b.each(a,function(a,b){c.declareAccept(d,b,a)})});return c};return d});
define("models/fullview-refresh-model","jquery backbone underscore util/formats util/eventhub-backbone lib/dfa".split(" "),function(a,b,g,c,e,d){return b.Model.extend({initialize:function(){this.statusMachine=d.createInstance({startState:"FIRST_LOAD",finalStates:["READY_TO_GET_DATA","ERROR_END"],states:["FIRST_LOAD","REFRESH","REFRESHING","READY_TO_GET_DATA","ERROR_END"],actions:{FIRST_LOAD:{refresh_not_started:"REFRESH",refresh_running:"REFRESHING",exception:"ERROR_END"},REFRESH:{refresh_started:"REFRESHING",
exception:"ERROR_END"},REFRESHING:{refresh_running:"REFRESHING",refresh_complete:"READY_TO_GET_DATA",refresh_error:"ERROR_END",exception:"ERROR_END"}}});this.statusMachine.on("stateChanged",g.bind(this.onStatusChange,this))},startRefresh:function(){this.statusMachine.startWithState("FIRST_LOAD")},onStatusChange:function(b,c,d){var e=this;"FIRST_LOAD"===b?a.get("/ftgw/fbc/ofsummary/snippet/fullViewRefreshStatus").then(function(b){b=a.trim(a(b).find(".SID-fullViewRefreshStatus").text());"COMPLETE"===
b||"ERROR"===b?e.statusMachine.accept("refresh_not_started"):"RUNNING"===b||"STARTED"===b?e.statusMachine.accept("refresh_running"):e.statusMachine.accept("exception")},function(){e.statusMachine.accept("exception")}):"REFRESH"===b?a.get("/ftgw/fbc/ofsummary/snippet/fullViewRefresh").then(function(b){b=a.trim(a(b).find(".SID-fullViewRefreshRequestStatus").text());"RUNNING"===b||"STARTED"===b?e.statusMachine.accept("refresh_started"):e.statusMachine.accept("exception")},function(){e.statusMachine.accept("exception")}):
"REFRESHING"===b?setTimeout(function(){a.get("/ftgw/fbc/ofsummary/snippet/fullViewRefreshStatus").then(function(b){b=a.trim(a(b).find(".SID-fullViewRefreshStatus").text());"ERROR"===b?e.statusMachine.accept("refresh_error"):"RUNNING"===b||"STARTED"===b?e.statusMachine.accept("refresh_running"):"COMPLETE"===b?e.statusMachine.accept("refresh_complete"):e.statusMachine.accept("exception")},function(){e.statusMachine.accept("exception")})},15E3):"READY_TO_GET_DATA"===b?e.trigger("READY_TO_GET_DATA"):
"ERROR_END"===b&&("refresh_error"===d?e.trigger("REFRSH_ERROR_END"):e.trigger("ERROR_END"))}})});
define("tasks/fv-get-account-data-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofsummary/snippet/fullViewAccountData?REBUILD_COOKIE=Y",dataType:"html",buildParams:function(a){return a?{portfolioTotal:a.portfolioTotal,outSideAccTotal:a.outSideAccTotal,outSideCreditCardAccId:a.outSideCreditCardAccId,outsideAccountsId:a.outsideAccountsId,creditCardTotal:a.creditCardTotal,outSideCreditCardTotal:a.outSideCreditCardTotal}:a},isNotCancelable:!0})});
define("tasks/fv-refresh-status-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofsummary/snippet/fullViewRefreshStatus",dataType:"html",buildParams:function(a){return a},isNotCancelable:!0})});define("tasks/fv-refresh-data-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofsummary/snippet/fullViewRefresh",dataType:"html",buildParams:function(a){return a},isNotCancelable:!0})});
define("tasks/fv-get-refresh-position-data-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofsummary/snippet/fullViewRefreshPositionData",dataType:"html",buildParams:function(a){return a?{fvAccSiteId:a.fvAccSiteId}:a}})});
(function(a){a.timer=function(b,g,c){this.set=function(a,b,c){this.init=!0;if("object"==typeof a){var f=["autostart","time"],j;for(j in f)void 0!=a[f[j]]&&eval(f[j]+" = func[paramList[arg]]");a=a.action}"function"==typeof a&&(this.action=a);isNaN(b)||(this.intervalTime=b);c&&!this.isActive&&(this.isActive=!0,this.setTimer());return this};this.once=function(a){var b=this;isNaN(a)&&(a=0);window.setTimeout(function(){b.action()},a);return this};this.play=function(a){this.isActive||(a?this.setTimer():
this.setTimer(this.remaining),this.isActive=!0);return this};this.pause=function(){this.isActive&&(this.isActive=!1,this.remaining-=new Date-this.last,this.clearTimer());return this};this.stop=function(){this.isActive=!1;this.remaining=this.intervalTime;this.clearTimer();return this};this.toggle=function(a){this.isActive?this.pause():a?this.play(!0):this.play();return this};this.reset=function(){this.isActive=!1;this.play(!0);return this};this.clearTimer=function(){window.clearTimeout(this.timeoutObject)};
this.setTimer=function(a){var b=this;"function"==typeof this.action&&(isNaN(a)&&(a=this.intervalTime),this.remaining=a,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){b.go()},a))};this.go=function(){this.isActive&&(this.action(),this.setTimer())};if(this.init)return new a.timer(b,g,c);this.set(b,g,c);return this}})(jQuery);define("lib/jquery-plugins/jquery.timer",function(){});
define("views/fullview-refresh-view","jquery views/base-view models/account-context-model models/fullview-refresh-model util/constants tasks/fv-get-account-data-task tasks/fv-refresh-status-task tasks/fv-refresh-data-task tasks/fv-get-refresh-position-data-task lib/jquery-plugins/jquery.timer util/eventhub-backbone".split(" "),function(a,b,g,c,e,d,h,f,j,k,l){return b.extend({initialize:function(){this.FV_REFRESH_AFFEVT_DATA_ACCOUNT_SELECTOR={};this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION={};
this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE={};this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY={};this.FV_REFRESH_AFFEVT_DATA={};this.fvFinsihRefreshedHandler();this.subscribeManualRefresh();var b=this;this.fvRefreshModel=new c;this.fvRefreshModel.on("READY_TO_GET_DATA",function(){b.getAccounsData()});this.fvRefreshModel.on("ERROR_END",function(){b.hideFVRefreshLoading()});this.fvRefreshModel.on("REFRSH_ERROR_END",function(){a(".fullview-refresh-status-error").show();b.hideFVRefreshLoading()})},
render:function(){return this},subscribeManualRefresh:function(){var a=this;l.subscribeEvent("FV_ACCOUNTS_REFRESH_STARTED",function(b){"FV_ACCOUNTS_REFRESH_STARTED"==b&&a.startRefresh()})},startRefresh:function(){fullview_refresh_completed_indicator?this.hideFVRefreshLoading():(this.showFVRefreshLoading(),this.hideFVRefreshStatusError(),this.fvRefreshModel.startRefresh())},finishRefresh:function(){l.publishEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_ACCOUNT_SELECTOR",this.FV_REFRESH_AFFEVT_DATA_ACCOUNT_SELECTOR)},
triggerPositionRefresh:function(){l.publishEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION",this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION)},triggerBalanceRefresh:function(){l.publishEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE",this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE)},triggerSummaryRefresh:function(){l.publishEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY",this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY)},fvFinsihRefreshedHandler:function(){var a=this;l.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_ACCOUNT_SELECTOR",
function(){a.hideFVRefreshLoading()})},showFVRefreshLoading:function(){a(".js-fullview-loading").text("Updating...");a(".js-fullview-loading").show();a(".js-fullview-asOfTime").hide();l.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")},hideFVRefreshStatusError:function(){a(".fullview-refresh-status-error").hide();l.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")},hideFVRefreshLoading:function(){a(".js-fullview-loading").hide();g.isPerformanceHidden()?a(".js-fullview-asOfTime").hide():a(".js-fullview-asOfTime").show();
l.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED");this.refreshingStatus=!1},getRefreshPositionData:function(){var b=null!=g.get("selectedAccounts").portfolio,c=a("#tab-2").attr("aria-selected");this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION.isAllAccSelected=b;this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION.isPositionTabSelected=c;this.triggerPositionRefresh()},getRefreshBalanceData:function(){var b=g.get("selectedAccounts"),c=null!=b.portfolio||1<b.accounts.length,d=1==b.accounts.length,e=
a("#tab-3").attr("aria-selected");this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE.isMulAccSelected=c;this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE.isBalanceTabSelected=e;this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE.isSingleSelected=d;this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE.accounts=b.accounts;this.triggerBalanceRefresh()},getRefreshSummaryData:function(){var b=null!=g.get("selectedAccounts").portfolio,c=a("#tab-1").attr("aria-selected");this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY.isAllAccSelected=
b;this.FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY.isSummaryTabSelected=c;this.triggerSummaryRefresh()},getAccounsData:function(){var b=this,c=g.getPortfolio(),e="",c=e=-1<c.formattedBalance.indexOf("<sup>")?c.formattedBalance.substring(0,c.formattedBalance.indexOf("<sup>")):c.formattedBalance,f=0,j=0,h=0,k="",w="",e=g.getGroups();a.each(e,function(b,c){if("CC"==c.groupId){h=c.groupTotal;var d=c.accounts;a.each(d,function(a,b){b.isFullViewAccount&&(isNaN(b.totalBalance)||(j+=b.totalBalance),k=0==
k.length?b.fullviewSiteId:k+(","+b.fullviewSiteId))})}else"FV"==c.groupId&&(f=c.groupTotal,d=c.accounts,a.each(d,function(a,b){w=0==w.length?b.fullviewSiteId:w+(","+b.fullviewSiteId)}))});this.paramData={portfolioTotal:c,outSideAccTotal:f,outSideCreditCardTotal:j,creditCardTotal:h,outSideCreditCardAccId:k,outsideAccountsId:w};console_log(this.paramData);(new d({context:this,data:this.paramData,onPreExecute:function(){},onSuccess:function(c){console_log(c);var d=a("<div/>").html(c);if(0!=d.find(".js-fullview-snippet").length){g.isPerformanceHidden()&&
(d.find(".js-acct-balance").hide(),d.find(".js-group-total").hide(),d.find(".js-fullview-asOfTime").hide());var e=a(".js-group.CC"),f=d.find(".js-group.CC"),j=a(".js-group.FV");c=d.find(".js-group.FV");0==f.length&&0==c.length?a(".js-refresh-fullview-account").addClass("hidden"):a(".js-refresh-fullview-account").removeClass("hidden");0==e.length&&0==f.length||(0!=e.length&&0==f.length?(e.find(".js-fullview-account").remove(),0==e.find(".js-account").length?e.remove():(1==e.find(".js-account").length?
(f=d.find(".js-fullview-snippet").data("creditcard-total"),e.find(".js-group-total").html("")):(f=d.find(".js-fullview-snippet").data("creditcard-total"),e.find(".js-group-total").html(f)),e.data("group-total",f))):0==e.length&&0!=f.length?(0==j.length?f.insertBefore(a(".js-add-fullview-account").parent()):f.insertBefore(j),1==f.find(".js-fullview-account").length?(f=d.find(".js-fullview-snippet").data("creditcard-total"),e.find(".js-group-total").html("")):(f=d.find(".js-fullview-snippet").data("creditcard-total"),
e.find(".js-group-total").html(f)),e.data("group-total",f)):0!=e.length&&0!=f.length&&(e.find(".js-fullview-account").remove(),f.find(".js-fullview-account").appendTo(e),1==f.find(".js-fullview-account").length?(f=d.find(".js-fullview-snippet").data("creditcard-total"),e.find(".js-group-total").html("")):(f=d.find(".js-fullview-snippet").data("creditcard-total"),e.find(".js-group-total").html(f)),e.data("group-total",f)));0==j.length&&0==c.length||(0!=j.length&&0==c.length?j.remove():0==j.length&&
0!=c.length?(f=d.find(".js-fullview-snippet").data("fullview-total"),c.data("group-total",f),1<c.find(".js-fullview-account").length&&c.find(".js-group-total").html(f),0==e.length?c.insertBefore(a(".js-add-fullview-account").parent()):c.insertAfter(e)):0!=j.length&&0!=c.length&&(f=d.find(".js-fullview-snippet").data("fullview-total"),c.data("group-total",f),1<c.find(".js-fullview-account").length&&c.find(".js-group-total").html(f),j.replaceWith(c)));d=d.find(".js-fullview-snippet").data("portfolio-total");
a(".js-portfolio").data("total-balance",d);0<c.length?a(".js-portfolio-balance").html(d+"<sup>&sect;</sup>"):a(".js-portfolio-balance").html(d);g.buildAccountInfo(a(".account-selector"));d=g.get("selectedAccounts");c=!0;"FV"==d.groupId?0<a(".js-group.FV").length?a(".js-group.FV").addClass("js-selected"):a(".js-portfolio").addClass("js-selected"):1==d.accounts.length&&"FV"==d.accounts[0].groupId?(d=d.accounts[0].fullviewSiteId,a(".js-group.FV").find("[data-full-view-siteid="+d+"]").addClass("js-selected")):
1===d.accounts.length&&"CC"===d.accounts[0].groupId&&d.accounts[0].isFullViewAccount?(d=d.accounts[0].fullviewSiteId,a(".js-group.CC").find("[data-full-view-siteid="+d+"]").addClass("js-selected")):"CC"==d.groupId?0<a(".js-group.CC").length?a(".js-group.CC").addClass("js-selected"):a(".js-portfolio").addClass("js-selected"):d.portfolio||(c=!1);g.buildSelectedAccountInfo(a(".js-selected"));d=g.get("selectedAccounts");b.FV_REFRESH_AFFEVT_DATA_ACCOUNT_SELECTOR.selectedAccounts=d;l.publishEvent("LEDGER_CARD_REFRESH");
l.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED");this.getRefreshPositionData();c&&this.getRefreshBalanceData();this.getRefreshSummaryData()}},onError:function(){l.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")},onComplete:function(){b.finishRefresh()}})).run()}})});
define("util/account-utils",["jquery"],function(a){return{hasFVOnlyIncludedInvestmentAccounts:function(a){var g=!0,c,e=!1;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){var d=c[a];if(!d.isFullViewAccount){g=!1;break}"FV Investment Account"==d.acctType&&(e=e||!0)}else g=!1;return g&&e},isFullViewAccount:function(a){return a.isFullViewAccount},hasOnlyFVAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){if(!c[a].isFullViewAccount){g=!1;break}}else g=!1;
return g},hasOnlyNBAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){if("NetBenefit Account"!=c[a].acctType){g=!1;break}}else g=!1;return g},hasOnlyFVBankAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){if("FV Bank Account"!=c[a].acctType){g=!1;break}}else g=!1;return g},isFullViewBankAccount:function(a){return"FV Bank Account"===a.acctType},hasOnlyFVCCAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=
0;a<c.length;a++){var e=c[a];if("Credit Card Account"!=e.acctType||!e.isFullViewAccount){g=!1;break}}else g=!1;return g},hasOnlyLoansAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){var e=c[a];if(24!==e.oltxType&&25!==e.oltxType){g=!1;break}}else g=!1;return g},hasOnlyDigitalCurrencyAccounts:function(a){var g=!0,c;if(a&&(c=a.accounts)&&0<c.length)for(a=0;a<c.length;a++){if(26!==c[a].oltxType){g=!1;break}}else g=!1;return g},isFullViewCreditCardAccount:function(a){return"Credit Card Account"===
a.acctType&&a.isFullViewAccount},hasOneCCAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g="Credit Card Account"==a.accounts[0].acctType);return g},isCreditCardAccount:function(a){return"Credit Card Account"==a.acctType},hasOneCASHAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g="Cash Account"==a.accounts[0].acctType);return g},isCashAccount:function(a){return"Cash Account"===a.acctType},hasOnePASAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&
(g="Advisor Managed Brokerage"==a.accounts[0].acctType);return g},isPasAccount:function(a){return"Advisor Managed Brokerage"==a.acctType},hasOneSPSAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g="Stock Plans"==a.accounts[0].acctType);return g},hasOneNBAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g="NetBenefit Account"==a.accounts[0].acctType);return g},hasUnactivatedHSAAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g="Not Enroll Health Account"==
a.accounts[0].acctType);return g},isUnactivatedHSAAccount:function(a){return"Not Enroll Health Account"==a.acctType},isUnactivatedSDBAccount:function(a){return"No Active SDB Account"==a.acctType||"SDB Account"==a.subAcctType},isOneUnactivatedAccount:function(a){var g=!1;a&&(a.accounts&&1==a.accounts.length)&&(g=-1!=a.accounts[0].acctType.indexOf("No Active"));return g},sumTotalBalancesByAccounts:function(b){var g=0;a.each(b,function(a,b){isNaN(b.totalBalance)||(g="Credit Card Account"==b.acctType&&
0>b.totalBalance?g+0:g+b.totalBalance)});return g},sumTotalTodayChangeValue:function(b){var g=0;a.each(b,function(a,b){var d=b.totalAcctValChg-0;isNaN(d)||(g+=d)});return g},isDCAccount:function(a){return 5===a.oltxType},isDCHistoryEntitled:function(a){return a.dcHistoryEntitled},isActivated:function(a){return-1===a.acctType.indexOf("No Active")},isSPSAccount:function(a){return"Stock Plans"==a.acctType},isNotActiveSPSAccount:function(a){return"No Active Link Account"==a.acctType||"Stock Plans"==a.subAcctType},
isAnnuityAcct:function(a){return 2===a.oltxType||3===a.oltxType||4===a.oltxType},isIncomeAnnuityAcct:function(a){return 4===a.oltxType},hasViewIncomeValueLink:function(a){return!!a.viewIncomeValueLink},isSingleDMAAccount:function(a){return 1==a.accounts.length&&a.accounts[0].isDMA},isDMAAccount:function(a){return a.isDMA},CIT_ACCOUNT_PREFIX:"603 604 605 606 608 615 616 617 618 619 620 621 622 623 624".split(" "),isCitAccount:function(b){b=this.getBranchNumber(b);return-1!=a.inArray(b,this.CIT_ACCOUNT_PREFIX)},
getBranchNumber:function(a){return null!=a&&null!=a.acctNum&&3<a.acctNum.toString().length?a.acctNum.toString().substring(0,3):null},isInInclusionList:function(a){return a.isInInclusionList},isDCEnrollableAcct:function(a){return a.isDCEnrollableAcct},isHSAAccount:function(a){return"HSA"==a.registrationCode},dcPlanEntryAcknowledgementRequired:function(a){return a.dcPlanEntryAcknowledgementRequired},dcQDIAElectionResponseRequired:function(a){return a.dcQDIAElectionResponseRequired},isFullViewLoanAccount:function(a){return a.isFullViewAccount&&
(24===a.oltxType||25===a.oltxType)},isCharitableAccount:function(a){return"CGF"==a.acctType},getCGFRedirectionUrl:function(a){var g=window.location.hostname;document.cookie="accountId="+a.acctNum+"; Max-age=10; Domain="+g.substring(g.lastIndexOf(".",g.lastIndexOf(".")-1)+1)+"; path=/";return a.urlName}}});
define("views/tab-redirect-manager",["jquery","underscore","models/account-context-model","util/account-utils"],function(a,b,g,c){g=[{tabName:"Summary,Positions,Balances,Activity",selection:"single",match:"all",condition:"!${isActivated}",actionLink:"${urlName}"},{tabName:"Activity",selection:"one_or_more",match:"all",condition:"${isDCAccount}",actionLink:function(a){return c.isDCHistoryEntitled(a)?toggleMap.DC_HISTORY_POC?null:envMap.NBRETAIL_URL_VALUE+"/nbretail/savings2/navigation/dc/histories?Ref_at=ng&plan="+
a.acctNum:envMap.NBRETAIL_URL_VALUE+"/nbretail/savings2/navigation/dc/Balances?Ref_at=ng&plan="+a.acctNum}},{tabName:"Balances",selection:"one_or_more",match:"all",condition:"${isDCAccount}",actionLink:envMap.NBRETAIL_URL_VALUE+"/nbretail/savings2/navigation/dc/Balances?Ref_at=ng&plan=${acctNum}"},{tabName:"Balances",selection:"single",match:"all",condition:"${isIncomeAnnuityAcct}",actionLink:envMap.ACCOUNT_URL+"/ftgw/fbc/ofaccounts/annuityBalances?Ref_at=ng&ignoreRedirect=Y&ACCOUNT=${acctNum}"},
{tabName:"Summary",selection:"single",match:"all",condition:"${isSPSAccount}",actionLink:"${urlName}"},{tabName:"Summary",selection:"group",match:"all",condition:"${isSPSAccount} || ${isNotActiveSPSAccount}",actionLink:"${urlName}"},{tabName:"Positions",selection:"single",match:"all",condition:"${isSPSAccount}",actionLink:function(a){return"X"===window.POSITIONS_GRID_IND?a.urlName:null}},{tabName:"Positions",selection:"group",match:"all",condition:"${isSPSAccount} || ${isNotActiveSPSAccount}",actionLink:function(a){return"X"===
window.POSITIONS_GRID_IND?a.urlName:null}},{tabName:"Summary",selection:"group",match:"all",condition:"${isDCAccount} && !${isInInclusionList}",actionLink:envMap.NBRETAIL_URL_VALUE+"/mybenefits/navstation/navigation"},{tabName:"Summary",selection:"single",match:"all",condition:"${isDCAccount} && !${isInInclusionList} || ${isDCEnrollableAcct} || ${dcPlanEntryAcknowledgementRequired} || ${dcQDIAElectionResponseRequired}",actionLink:envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/PlanDefault?plan=${acctNum}"},
{tabName:"Balances",selection:"single",match:"all",condition:"${hasViewIncomeValueLink}",actionLink:"/ftgw/fbc/ofaccounts/annuityBalances?ACCOUNT=${acctNum}&ignoreRedirect=Y"},{tabName:"Summary,Positions,Balances,Activity",selection:"single",match:"all",condition:"${isCreditCardAccount} && !${isFullViewAccount}",actionLink:envMap.PORTFOLIO_RESEARCH_URL_VALUE+"/ftgw/fbc/ofcashmgmt/cashMgmtApp?GOTO=CCT&ACCOUNT=${acctNum}"},{tabName:"Summary,Positions,Balances,Activity",selection:"single",match:"all",
condition:"${isUnactivatedHSAAccount}",actionLink:"${urlName}"},{tabName:"Summary,Positions,Balances,Activity",selection:"single",match:"all",condition:"${isUnactivatedSDBAccount}",actionLink:envMap.ACCOUNT_SETUP_URL+"/ftgw/aong/aongapp/nbsdbAA/activateAccount?acct_num=${acctNum}&clientId=${clientId}&planIds=${planId}"},{tabName:"allTabs",selection:"single",match:"all",condition:"${isCharitableAccount}",actionLink:function(a){return c.getCGFRedirectionUrl(a)}}];var e=function(b){this.redirectLinkProviders=
[];var c=this;a.each(b,function(a,b){c.redirectLinkProviders.push(c.createTabRedirectLinkProvider(b))})};a.extend(e.prototype,{createTabRedirectLinkProvider:function(d){var e=(new Function("AccountUtil",("return function(account){return "+d.condition+";}").replace(/\$\{(.+?)\}/g,function(a,b){return"AccountUtil."+b+"(account)"})))(c),f=d.tabName.split(/\s*,\s*/g);return function(c,k,g){if(!1===d.portfolioSelected&&g||!0===d.portfolioSelected&&g)return null;if(0<=a.inArray(k,f)||"allTabs"===d.tabName){k=
"single"==d.selection&&1===c.length;g="all"===d.selection&&g;var p="group"===d.selection&&1<c.length,m="one_or_more"===d.selection&&1<=c.length;if(k||m||g||p){var n;k=k?"all":d.match;if(c.length&&b[k](c,function(a){return e(a)&&!(!n&&!(n=a))})){var r;"string"===typeof d.actionLink?r=d.actionLink.replace(/\$\{(.+?)\}/g,function(a,b){return n[b]}):"function"===typeof d.actionLink&&(r=d.actionLink(n));return r}}}}},getRedirectUrl:function(a,c,e){var j;return b.any(this.redirectLinkProviders,function(b){j=
b(a,c,e);return!!j})?j:void 0}});return new e(g)});
define("models/error-message-model",["backbone","underscore"],function(a){var b={fvErrorMessages:{400:{message:"Error 400: Your outside account could not be refreshed. There may have been a change on the website that prevents your account from refreshing. Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595"},401:{message:"Error 401: Your outside account could not be refreshed. There may have been a change on the website that prevents your account from refreshing. Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595"},
402:{message:"Error 402: Your outside account could not be updated due to a problem with your login information at the site.  Please log in to the site to verify that your credentials are correct. If the problem persists, please call Fidelity at 800-544-6666.",call:"",url:"update"},403:{message:"Error 403: Your outside account could not be refreshed. There may have been a change on the website that prevents your account from refreshing. Please call Fidelity if you are unable to refresh your account for more than two business days.",
call:"800-544-7595"},404:{message:"Error 404: Your outside account could not be refreshed. Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595"},406:{message:"Error 406:  Your outside account could not be updated because your password provided for the site has expired. Please log in to the site directly and confirm whether you can view all of your account information. ",call:"800-544-6666",url:"update"},407:{message:"Error 407:  Your outside account could not be updated because your account has been locked at the site.  Please verify that you can still access your account. If necessary, please contact the site provider to have the account unlocked. Once your account is unlocked, update the login information. If the problem persists, please call Fidelity at 800-544-6666.",
call:""},408:{message:"Error 408: We are unable to update your account.  Please go to the site and verify that your account is active.  If you continue to receive this error message, please call Fidelity at 800-544-7595.",call:""},409:{message:"Error 409: Your outside account could not be refreshed. It may be currently unavailable or under maintenance.  Please ensure the site is available by logging in and accessing your account. Please call Fidelity if you are unable to refresh your account for more than two business days.",
call:"800-544-7595"},411:{message:"Error 411: Your outside account could not be refreshed because this site no longer provides online services to its customers.",call:""},412:{message:"Error 412: Your outside account could not be refreshed. Please ensure the site is available by logging in and navigating to the site. Please call Fidelity if you are unable to refresh your account  for more than two business days.",call:"800-544-7595"},413:{message:"Error 413: Your outside account could not be refreshed. Please call Fidelity if you are unable to refresh your account for more than two business days.",
call:"800-544-7595"},414:{message:"Error 414: Your outside account could not be updated because this account could not be located. Please follow these steps:<br/> Log in to the site to verify the account is active. If your account is active, verify you correctly added the account and account category at Fidelity. If the account is miscategorized, please remove the account and add it under the correct category.  If you still receive this error message, please call Fidelity at 800-544-6666.",call:""},
415:{message:"Error 415: Your outside account could not be refreshed.  Please log in to the site and view your account information. If your session ends prematurely, contact the site technical support for assistance. Please call Fidelity if the session is normal and the account has not updated after two business days.",call:"800-544-7595"},416:{message:"Error 416: Your outside account could not be updated.  If you are currently logged in to this account directly, please log out and try to update your account.  If you still receive this error message, please call Fidelity at 800-544-6666.",
call:""},417:{message:"Error 417: Your outside account could not be updated because this account type is no longer supported.",call:""},418:{message:"Error 418 : Your outside account could not be refreshed due to a server connection error.Please call Fidelity if you are unable to refresh your account for more than one business day.",call:"800-544-7595"},419:{message:"Error 419 : Your outside account could not be refreshed due to a mismatch in username, password or security questions.Please log in to the site to confirm your login credentials.If you are able to log in but you are unable to refresh your account, please call Fidelity at 800-544-7595.",
call:""},420:{message:"Error 420 : Your outside account could not be updated.Please open a new window and log in to the site to verify your login information.Then return to Fidelity and update the login information for this account.If the problem persists, please call Fidelity at 800-544-6666.",call:""},421:{message:"Error 421 : Your outside account could not be updated because your default language setting is not English.Please log in to the site and change the language setting to English.If you still receive this error message, please call Fidelity at 800-544-6666.",
call:""},422:{message:"Error 422: Your outside account could not be updated because your account is either closed or inactive.  If your account is inactive, you can attempt to reactivate it at the site and then update the login information on this site. If you still receive this error message, please call Fidelity at 800-544-6666.",call:""},423:{message:"Error 423 : Your outside account could not be located at the site.This may be a temporary issue with the account.Please call Fidelity if you are unable to refresh this account for more than one business day.",
call:"800-544-7595"},424:{message:"Error 424 : Your outside account could not be refreshed due to ongoing maintenance at the site.Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595"},425:{message:"Error 425 : Your outside account could not be refreshed.Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595"},426:{message:"Error 426 : Your outside account could not be refreshed.Please call Fidelity if you are unable to refresh your account for more than two business days.",
call:"800-544-7595 "},427:{message:"Error 427: Your outside account could not be updated as the site requires you to view a new promotion. Please log in to the site and navigate to your Account Overview page. Once you are finished viewing the promotion, return to Fidelity and update the login information for this account. If you still receive this error message, please call Fidelity at 800-544-6666.",call:""},428:{message:"Error 428: Your outside account could not be updated because you need to accept a new Terms & Conditions agreement at the site. Please log in to the site to review the new Terms & Conditions. After accepting the agreement, the account should update. If you still receive this error message, please call Fidelity at 800-544-6666.",
call:""},429:{message:"Error 429 : Your outside account could not be refreshed because you need to update information at the site.Please log in to the site to update your information, and then return to Fidelity and refresh your account.",call:"800-544-6666 "},430:{message:"Error 430 : Your outside account could not be updated because this site is no longer supported.",call:""},505:{message:"Error 505 : Your outside account could not be refreshed.We do not currently support the security system used by this site.",
call:""},506:{message:"Error 506:  Your outside account could not be updated because the site has added new security requirements. Please provide the requested information to enable Fidelity to update your account information. If the problem persists, please call Fidelity at 800-544-6666.",call:"",url:"update"},507:{message:"Error 507: We are currently unable to update your information from this site. This site is a new or test site (also known as a BETA site) and account functions may not be available. Please try again later. ",
call:"",url:"update"},508:{message:"Error 508 : Your outside account has timed out during the refresh attempt.Please call Fidelity if this occurs for more than two business days.",call:"800-544-7595 "},509:{message:"Error 509 : Fidelity cannot update your account information because your login information for the site has expired.",call:"800-544-7595 ",url:"update"},510:{message:"Error 510 : The site is unable to find any property information for your address.Please verify that the address you have provided is correct.",
call:""},511:{message:"Error 511: We are unable to provide a home value for this property.  If the problem persists, please call Fidelity at 800-544-7595.",call:""},517:{message:"Error 517 : Your outside account could not be refreshed.Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595 "},518:{message:"Error 518: Your outside account could not be updated because the additional security information you provided for the site is incorrect or incomplete.  Please update your account settings with correct credentials to enable Fidelity to update your account information.  If the problem persists, please call Fidelity at 800-544-7595.",
call:"",url:"update"},519:{message:"Error 519:  Your outside account could not be updated because the site has added new security requirements. Please provide the requested information so that Fidelity can continue to update your account information automatically. If the problem persists, please call Fidelity at 800-544-7595.",call:"",url:"update"},520:{message:"Error 520: Your outside account could not be updated because the additional authentication information you provided at the site is incorrect. Please update your account settings with correct information so that Fidelity can continue to update your account information.   If the problem persists, please call Fidelity at 800-544-7595.",
call:"",url:"update"},521:{message:"Error 521:  Your account could not be updated because the site has added a new login procedure. Please provide the requested information and update your login so Fidelity can update your account information.  If the problem persists, please call Fidelity at 800-544-7595.",call:"",url:"update"},522:{message:"Error 522:  Your account could not be refreshed because your answer is incorrect or has not been provided within the allotted time frame. If this issue persists, please call Fidelity at 800-544-6666. ",
call:""},523:{message:"Error 523:  Your account could not be refreshed because your answer is incorrect or has not been provided within the allotted timeframe. If this issue persists, please call Fidelity at 800 544 6666. ",call:""},524:{message:"Error 524:  Your outside account could not be updated because your login information for this site has expired. If the issue persists, please call Fidelity at 800-544-6666.",call:"",url:"update"},525:{message:"Error 525 : Your outside account has timed out during the refresh attempt of the account.Please call Fidelity if this occurs for more than two business days.",
call:"800-544-7595 "},526:{message:"Error 526:  Your outside account could not be updated because your username or password or additional security credentials are incorrect. Please provide the correct login information so that Fidelity can update your account information. If the problem persists, please call Fidelity 800-544-6666.",call:"",url:"update"},802:{message:"Error 802 : Your outside account could not be refreshed with the revised login credentials.Please call Fidelity if this occurs for more than one business day.",
call:"800-544-7595 "},Default:{message:"Error Default: Your outside account could not be refreshed.There may have been a change on the website that prevents your account from refreshing.Please call Fidelity if you are unable to refresh your account for more than two business days.",call:"800-544-7595 "},1:{message:"Error Default: Your outside account could not be refreshed.There may have been a change on the website that prevents your account from refreshing.Please call Fidelity if you are unable to refresh your account for more than two business days.",
call:"800-544-7595 "}}};return new (a.Model.extend({getErrorMessage:function(a,c){return b[a]&&b[a][c]}}))});
define("models/preference-model","jquery backbone underscore util/formats util/eventhub-backbone tasks/portfolio-preference-task".split(" "),function(a,b,g,c,e,d){g=new (b.Model.extend({set:function(a,c){b.Model.prototype.set.call(this,a,c);if(!c||!c.silent)return c&&!0===c.sessionOnly?this.setSessionPreference(a,c):this.setCrossSessionPreference(a,c)},setSessionPreference:function(b){a.each(b,function(a,b){(new d({data:{prefName:a,prefValue:b,sessionOnly:"Y"}})).run()})},setCrossSessionPreference:function(b){a.each(b,
function(a,b){(new d({data:{prefName:a,prefValue:b}})).run()})}}));g.set(PREFERENCE_MAP,{silent:!0});return g});define("text!templates/portfolio-accounts-edit-error-snippet.html",[],function(){return'\t\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--customize-accounts">\n\t      \t<form class="account-selector-modal--form">\n\t\t      \t<h3 id="account-selector-modal--customize-accounts" class="textblock--h3-headline" tabindex="-1">Customize Your Accounts</h3>\n\t\t\t\t<div class="message message--warning" role="alert">\n\t\t\t\t\t<div class="message--warning-content">\n\t\t\t\t\t\t<div class="message--warning-icon"></div>\n\t\t\t\t\t\t<span class="message--title"><%= generalModel.get(\'errorMsg\')%></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t        <fieldset class="base-modal--actions">\n\t\t           <p class="base-modal--actions-wrapper"><button type="button" class="account-selector-edit--cancel action-button--generic">Close</button></p>\n\t\t        </fieldset>\n\t        </form>          \n\t    </div>\n\n'});
define("views/account-select-view","jquery views/base-view views/fullview-refresh-view models/account-context-model util/constants util/progressbar util/eventhub-backbone views/tab-redirect-manager models/error-message-model models/preference-model underscore util/account-utils fang text!../templates/portfolio-accounts-edit-error-snippet.html components/modalpopup".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m,n){return b.extend({events:{"click .js-add-fullview-account":"handleAddFVAccount","click .js-refresh-fullview-account":"handleFVAccountRefreshIcon",
"click .js-customize-account":"handleCustomizeAccount"},initialize:function(){var b=this;this.accountSelectorInstance=new FID.Applications.AccountSelector(".account-content .account-selector--close-control");this.accountSelector=a(".account-selector");this.accountSelector.on("accountSelectorHidden",function(){a(".account-selector-close-control--link").attr("title","Show account list");a("body").addClass("account-selector--hide");b.adjustPageLayout();(!window.matchMedia||!window.matchMedia("(max-width: 848px)").matches)&&
k.set({ACCOUNT_SELECTOR_HIDDEN:"Y"},{sessionOnly:!0})});this.accountSelector.on("accountSelectorRevealed",function(){a(".account-selector-close-control--link").attr("title","Hide account list");a("body").removeClass("account-selector--hide");b.adjustPageLayout();(!window.matchMedia||!window.matchMedia("(max-width: 848px)").matches)&&k.set({ACCOUNT_SELECTOR_HIDDEN:"N"},{sessionOnly:!0})});this.loadAccountCustomize();var e=a(".account-selector-wrapper");window.matchMedia&&window.matchMedia("(max-width: 848px)").matches?
e.removeClass("account-selector--desktop-initial-page-load"):(e.addClass("account-selector--desktop-initial-page-load"),"Y"===k.get("ACCOUNT_SELECTOR_HIDDEN")&&(e.removeClass("account-selector--reveal").addClass("account-selector--hide"),a("body").addClass("account-selector--hide"),a(".account-selector-close-control--link").attr("title","Show account list"),a(".content-row.expanded .magicgrid--drawer-carousel-content").trigger("updateSizes"),a(".action-bar--accounts").removeClass("action-bar--animation-slide-out").addClass("action-bar--animation-slide-in")));
c.setAccountMiniContext(a(".account-mini-context").val());c.buildAccountInfo(this.accountSelector);h.subscribeEvent("SELECT_ACCOUNTS",l.bind(this.handleAccountRoute,this));h.subscribeEvent("SELECT_DMA_ACCOUNT",l.bind(this.handleDMAAccountRoute,this));h.subscribeEvent("VIEW_MULIPLE_MARGIN",l.bind(this.handleViewMulpleMarginAccts,this));m.EventBus.subscribe("VIEW_MULIPLE_MARGIN",l.bind(this.handleViewMulpleMarginAccts,this));m.EventBus.subscribe("ACCOUNTS_CUSTOMIZED",l.bind(this.refreshAccountSelector,
this));h.subscribeEvent("CLEAN_MULIPLE_MARGIN",l.bind(this.handleCleanMulpleMarginAccts,this));h.subscribeEvent("ACCOUNT_REFRESH",l.bind(this.refreshAccountSelector,this));h.subscribeEvent("UPDATE_ACCOUNT_FROM_ACCOUNT_CONTEXT",l.bind(this.updateAccountBalance,this));h.subscribeEvent("UPDATE_GROUP_FROM_ACCOUNT_CONTEXT",l.bind(this.updateGroupBalance,this));h.subscribeEvent("UPDATE_PORTFOLIO_FROM_ACCOUNT_CONTEXT",l.bind(this.updatePortfolioBalance,this));m.EventBus.subscribe("ACC_CUSTOMIZE_NG_SHOW_LOADING",
function(){d.showLoading("Loading...",!0,500)});m.EventBus.subscribe("ACC_CUSTOMIZE_NG_HIDE_LOADING",function(){d.hideLoading()});this.accountSelector.on("singleAccountSelected",function(c){a(c.elementClicked).hasClass("js-account")&&(console_log("singleAccountSelected"),b.doAccountChange(a(c.elementClicked)))});this.accountSelector.on("allAccountsSelected",function(c){a(c.elementClicked).hasClass("js-portfolio")&&(console_log("allAccountsSelected"),b.doAccountChange(a(c.elementClicked)))});this.accountSelector.on("accountGroupSelected",
function(c){a(c.elementClicked).hasClass("js-group-header")&&(console_log("accountGroupSelected"),b.doAccountChange(a(c.elementClicked).parent()))});a(".js-customize-account").swipe("destroy").swipe({click:this.handleCustomizeAccount});toggleMap&&!toggleMap.emoneyFeature&&(this.fullViewRefreshView=(new g({el:this.$el})).render());this.adjustPageLayout();h.subscribeEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED",function(){b.adjustPageLayout()});a(document).on("MAIN_WINDOW_RESIZE",function(){b.adjustPageLayout()});
a(document).on("REVEAL_ACCOUNT_SELECTOR",function(c,d){var e=a(".account-selector-wrapper");e.removeClass("account-selector--reveal account-selector--hide");a("body").removeClass("account-selector--hide");e.addClass(d?"account-selector--reveal":"account-selector--hide");a("body").addClass(d?"":"account-selector--hide");a(".account-selector-close-control--link").attr("title",d?"Hide account list":"Show account list");a(".content-row.expanded .magicgrid--drawer-carousel-content").trigger("updateSizes");
b.adjustPageLayout()});h.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_ACCOUNT_SELECTOR",l.bind(this.fullViewRefreshCompletedEventHandle,this));h.subscribeEvent("DIGITAL_ACCOUNT_LOAD_FINISHED_EVENT",l.bind(this.renewAccountSelectorEvent,this));this.preventDefautClickForFBC();this.getAppContext().footNote.controlNQSDBFootNote();window.MutationObserver&&b.reactMboxDomChanged()},renewAccountSelectorEvent:function(){a(".account-selector .account-selector--tab, .account-selector .account-selector--group-header").off().swipe("destroy");
a(".account-selector-close-control--link").off().swipe("destroy");this.accountSelectorInstance=new FID.Applications.AccountSelector(".account-content .account-selector--close-control");c.updateAccountBalances();a(".account-selector").swipe("destroy");this.preventDefautClickForFBC()},fullViewRefreshCompletedEventHandle:function(b){a(".js-customize-account").swipe("destroy").swipe({click:this.handleCustomizeAccount});a(".account-selector .account-selector--tab, .account-selector .account-selector--group-header").off().swipe("destroy");
a(".account-selector-close-control--link").off().swipe("destroy");this.accountSelectorInstance=new FID.Applications.AccountSelector(".account-content .account-selector--close-control");0<a(".account-selector--main-wrapper").find(".js-fullview-error-action").length&&1>a(".account-selector--close-control").find(".account-selector--error-icon").length&&0<a(".port-nav.account-selector--hide").length?a(".account-selector-close-control--link").after('<div class="account-selector--error-icon" title="Action Required"><span class="off-screen">Error: </span></div>'):
1>a(".account-selector--main-wrapper").find(".js-fullview-error-action").length&&a(".account-selector--close-control").find(".account-selector--error-icon").remove();b=b?b.selectedAccounts:null;null!=b&&("FV"==b.groupId?0<a(".js-group.FV").length?a(".js-group.FV").find(".js-group-header").trigger("click"):a(".js-portfolio").trigger("click"):"CC"==b.groupId?0<a(".js-group.CC").length?a(".js-group.CC").find(".js-group-header").trigger("click"):a(".js-portfolio").trigger("click"):null==b.portfolio&&
b.accounts&&b.accounts[0].isFullViewAccount?0<a(".js-fullview-account."+b.accounts[0].fullviewSiteId).length?a(".js-fullview-account."+b.accounts[0].fullviewSiteId).trigger("click"):a(".js-portfolio").trigger("click"):c.buildSelectedAccountInfo(a(".js-selected")));this.preventDefautClickForFBC()},render:function(){var b=a(".account-selector-wrapper"),c=a(".account-content");0==a(".account-selector .account-selector--target-tab").length&&a(".account-selector--tab-all").addClass("account-selector--target-tab");
b.hasClass("account-selector--reveal")&&a(".action-bar--accounts").removeClass("action-bar--animation-slide-in").addClass("action-bar--animation-slide-out");a(window).resize(function(){480<a(window).width()&&c.show()});a(window).on("accountSelectorHidden accountSelectorRevealed",function(){if(!window.matchMedia||!window.matchMedia("(max-width: 848px)").matches)c.addClass("account-content--animating"),a("html.lt-ie10").length&&(a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(document).trigger("moretabRecalculate"),
a(".content-row.expanded .magicgrid--drawer-carousel-content").trigger("updateSizes")),c.removeClass("account-content--animating")});c.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");a(document).trigger("moretabRecalculate");a(".content-row.expanded .magicgrid--drawer-carousel-content").trigger("updateSizes")});var d=this.accountSelectorInstance;a(window).on("accountSelectorHidden",function(){(!window.matchMedia||
!window.matchMedia("(max-width: 848px)").matches)&&(window.PreferenceModel&&"Y"!==window.PreferenceModel.get("ACCOUNT_SELECTOR_TOOLTIP_BUBBLE_HIDDEN"))&&d._animatedClose()});b.removeClass("account-selector--desktop-initial-page-load");return this},handleViewMulpleMarginAccts:function(a){if(a&&a.mulAcctNums){a=a.mulAcctNums.split(",");for(var b in a)this.$(".js-account."+a[b]).addClass("highlight")}},handleCleanMulpleMarginAccts:function(){this.accountSelector.find(".highlight").removeClass("highlight")},
updateAccountBalance:function(a){if(a){var b=this.$(".js-account."+a.acctNum);if(0<b.length){var c=b.find(".js-acct-balance"),d=c.find("sup");if(0<c.length){b.data("acct-balance",a.totalBalance);var e=a.formattedBalance;0<d.length?c.html(e+("<sup>"+d.html()+"</sup>")):c.html(e);c=b.find(".js-today-change-value");0<c.length&&("NetBenefit Account"!=a.acctType&&(0.005<=a.totalAcctValChg||-0.005>=a.totalAcctValChg)?(c.data("today-change-value",a.accountTodayChangeValue),c.removeClass("color-positive color-negative"),
-1==a.accountTodayChangeValue.indexOf("-")?c.addClass("color-positive"):c.addClass("color-negative"),b=b.find(".js-today-change-pct-value"),0<b.length&&(b.data("today-change-pct-value",a.accountTodayChangePercent),b.removeClass("color-positive").removeClass("color-negative"),0<a.totalAcctValChgPct?b.addClass("color-positive"):0>a.totalAcctValChgPct&&b.addClass("color-negative"),b.text(" ("+a.accountTodayChangePercent+")")),b=c.html(),b=b.substring(this._getSpanIndexFromHtml(b)),b=a.accountTodayChangeValue+
b,c.html(b)):c.html('<span class="account-selector--right-info-secondary-element js-today-change-pct-value" data-today-change-pct-value=""></span>'))}}}this._updateLedgerCard()},updateGroupBalance:function(a){if(a){var b=this.$(".js-group."+a.groupId);if(0<b.length){var c=b.find(".account-selector--header-total ");0<c.length&&(b.data("group-total",a.groupTotal),c.text(a.groupTotal))}}this._updateLedgerCard()},_getSpanIndexFromHtml:function(a){var b=a.indexOf("<span");return-1==b?a.indexOf("<SPAN"):
b},updatePortfolioBalance:function(a){if(a){var b=this.$(".js-portfolio");if(0<b.length){var c=b.find(".js-portfolio-balance"),d=c.find("sup");if(0<c.length&&(b.data("total-balance",a.formattedBalance),a.fidelityBalance&&b.data("fidelity-balance",a.fidelityBalance),0<d.length?c.html(a.formattedBalance+="<sup>"+d.html()+"</sup>"):c.html(a.formattedBalance),c=b.find(".account-selector--all-accounts-todays-change"),0<c.length)){b.data("today-change-value",a.totalTodayChangeValue);d=c.find(".account-selector--right-info-secondary-element");
if(0<d.length){var e=a.totalTodayChangePercent;e||(e="0.00%");b.data("today-change-pct-value",e);d.removeClass("color-positive").removeClass("color-negative");0<a.changePctVal?d.addClass("color-positive"):0>a.changePctVal&&d.addClass("color-negative");d.text(" ("+e+")")}b=c.html();b=b.substring(this._getSpanIndexFromHtml(b));b=a.totalTodayChangeValue+b;c.html(b)}}}this._updateLedgerCard()},adjustPageLayout:function(){a(".port-content");var b=a(".port-nav"),c=a(".port-nav > .account-selector").height();
a(".port-content").css("min-height",b.hasClass("account-selector--hide")?0:c)},_gotoFullView:function(){document.location.href=envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p"},selectAccount:function(a,b){var c=this.accountSelector.find(".js-account."+a);0<c.length?(this.routeOptions=b,c.trigger("click")):(b.acctNoneOrHidden=!0,this.selectPortfolio(b))},selectGroup:function(a,b){var c=this.accountSelector.find(".js-group."+a);0<c.length?(this.routeOptions=b,c.find(".js-group-header").trigger("click")):
this.selectPortfolio(b)},selectPortfolio:function(a){this.routeOptions=a;this.accountSelector.find(".js-portfolio").trigger("click")},handleAddFVAccount:function(){h.publishEvent("FULL_VIEW_ADD_ACCOUNT")},handleFVAccountRefresh:function(){this.accountSelector.find(".js-portfolio").data("has-fullviewaccount")&&h.publishEvent("FV_ACCOUNTS_REFRESH_STARTED","FV_ACCOUNTS_REFRESH_STARTED")},handleFVAccountRefreshIcon:function(){fullview_refresh_completed_indicator=!1;this.accountSelector.find(".js-portfolio").data("has-fullviewaccount")&&
h.publishEvent("FV_ACCOUNTS_REFRESH_STARTED","FV_ACCOUNTS_REFRESH_STARTED")},handleCustomizeAccount:function(){h.publishEvent("CUSTOMIZE_ACCOUNTS")},handleAccountRoute:function(a){a=a||{};if(null==a.accounts)null==a.group?this.selectPortfolio(a.routeOptions):this.selectGroup(a.group,a.routeOptions);else{var b=a.accounts.split(",");1<b.length?(b=this.accountSelector.find(".js-account."+b[0]).parent(".js-group"),this.selectGroup(b.data("group-id"),a.routeOptions)):this.selectAccount(b[0],a.routeOptions)}},
handleDMAAccountRoute:function(a){var b=a&&a.account;a=c.get("accounts");var d=this;(!envMap.DMA_ENABLED||!b||!l.some(a,function(a){if(p.isDMAAccount(a)){var c=a.acctNum.lastIndexOf(b);if(-1!==c&&a.acctNum.length===c+b.length)return d.accountSelector.find(".js-account."+a.acctNum).trigger("click"),!0}}))&&this.handleAccountRoute({accounts:null,groups:null,routeOptions:{tabName:"Summary",section:null}})},_updateLedgerCard:function(){c.buildSelectedAccountInfo(a(".js-selected"));h.publishEvent("LEDGER_CARD_REFRESH")},
refreshAccountSelector:function(b){var e=b.hidePerformanceInd;void 0!==e&&""!==e&&k.set({HIDE_PERFORMANCE_IND:e},{sessionOnly:!0});b="/ftgw/fbc/ofportfolio/mget?SNIPPET=summaryNav&TYPE=ACCList&USE_PMC=N"+(b.rebuildCookie?"&REBUILD_COOKIE=Y":"");var f=this;d.showLoading("Loading...",!0,500);a.ajax({url:b,dataType:"html",data:"",xhrFields:{withCredentials:!0},success:function(b){console_log(b);b=a("<div>").html(b).find(".account-selector--accounts-wrapper");0==b.length&&(b=a("<div>"));f.$el.html(b.html());
c.buildAccountInfo(f.accountSelector);a(".account-selector .account-selector--tab, .account-selector .account-selector--group-header").off().swipe("destroy");a(".account-selector-close-control--link").off().swipe("destroy");f.accountSelectorInstance=new FID.Applications.AccountSelector(".account-content .account-selector--close-control");a(".js-customize-account").swipe("destroy").swipe({click:f.handleCustomizeAccount});f.preventDefautClickForFBC();f.getAppContext().footNote.controlNQSDBFootNote()},
complete:function(){d.hideLoading(500);h.publishEvent("LEDGER_CARD_REFRESH");var a=c.get("selectedAccounts");a&&(null!=a.portfolio?f.selectPortfolio():null!=a.groupId?f.selectGroup(a.groupId):null!=a.accounts&&0<a.accounts.length?f.selectAccount(a.accounts[0].acctNum):f.selectPortfolio());f.adjustPageLayout();f.loadAccountCustomize();window.fullviewHideInd||h.publishEvent("DIGITAL_ACCOUNT_LOAD_EVENT")}})},doAccountChange:function(b){this.accountSelector.find(".js-selected").removeClass("js-selected");
this.accountSelector.find(".highlight").removeClass("highlight");b.addClass("js-selected");b=c.buildSelectedAccountInfo(b);var d=this.routeOptions&&this.routeOptions.tabName||a(".more-tab--tab.tabs--selected").data("tab-name");(d=f.getRedirectUrl(b.accounts,d,!!b.Portfolio))?document.location.href=d:a(document).trigger(e.EVENTS.SELECTED_ACCT_CHANGE,[b,this.routeOptions]);b=a.map(b.accounts||[],function(a){return a.acctNum});this.getAppContext().setCurrentAccounts(b);delete this.routeOptions},loadAccountCustomize:function(){var b=
a("#account-selector--edit-accounts"),c=this,e=window.envMap.DPCS_URL_VALUE+"/ftgw/dpcs/acct-customize/",f=window.envMap.DPCS_URL_VALUE+"/stgw/dpcs/acct-customize/";toggleMap&&toggleMap.accountCustomizeFelixToggle&&(e=window.envMap.DIGITAL_APP_URL+"acct-customize/",f=window.envMap.DIGITAL_CONTENT_URL+"acct-customize/dist/");a("[name=account-customize]").html('<a class="js-customize-account-lazy" role="button" tabindex="0">Customize<span class="off-screen"> Account Names</span></a>');this.$el.on("click",
".js-customize-account-lazy",function(){d.showLoading("Loading...",!0,500);a.ajax({type:"GET",url:e+"accountCustomize/home",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(e){if(e=/\d{10}.bundle.js/i.exec(e)){a("[name=account-customize]").html(b);0<a("#acctCustomizeJsLink").length&&a("#acctCustomizeJsLink").remove();var j=document.createElement("script");j.src=f+e[0];j.type="text/javascript";j.id="acctCustomizeJsLink";document.head.appendChild(j);a(j).on("load",function(){var a=angular.element("[accountcustomizemodaldir]").isolateScope();
a&&a.openSettings()});0===a("#acctCustomizeStyleLink").length&&(j=document.createElement("link"),j.href=f+e[0].replace(/\.js/,".css"),j.rel="stylesheet",j.type="text/css",j.id="acctCustomizeStyleLink",document.head.appendChild(j))}else d.hideLoading(),c.handleCustomizeAccountError()}).fail(function(){d.hideLoading();c.handleCustomizeAccountError()})})},handleCustomizeAccountError:function(){var b=a('<div class="base-popup base-modal--container base-modal--container-medium">\t\t\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\t\t\t</div>'),
c=l.template(n)({generalModel:{get:function(){return"Fidelity is currently unable to customize your accounts. Please try again later."}}});b.append(c);this.modalPopup&&(this.modalPopup.remove(),delete this.modalPopup);b&&b.length&&(b.appendTo(this.$el),b.ModalPopup(),this.modalPopup=b,b.ModalPopup("open"),a("button.account-selector-edit--cancel").click(function(){a(".base-popup--close-button").click()}))},reactMboxDomChanged:function(){var a=this,b=document.getElementById("onsitemessage");b&&(new MutationObserver(function(b){b.forEach(function(){a.adjustPageLayout()})})).observe(b,
{childList:!0})},preventDefautClickForFBC:function(){this.$el.find("a.account-selector--tab").filter(function(a,b){return 0===b.href.indexOf("javascript:")}).off()}})});
define("views/account-select-ngapp-view",["jquery","views/base-view","util/progressbar","fang"],function(a,b,g,c){return b.extend({initialize:function(){c.EventBus.subscribe("NG_SHOW_LOADING",this.showLoading);c.EventBus.subscribe("NG_HIDE_LOADING",this.hideLoading);c.EventBus.subscribe("NEW_ACCOUNT_SELECTOR_INIT",function(){a(".account-selector>.account-selector--main-wrapper").hide()})},render:function(){a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-selector/snippet",xhrFields:{withCredentials:!0},
crossDomain:!0}).done(function(b){a(".account-selector").append(b)})},showLoading:function(){g.showLoading("Loading...",!0,500)},hideLoading:function(){g.hideLoading()},destroy:function(){c.EventBus.unsubscribeByName("NG_SHOW_LOADING");c.EventBus.unsubscribeByName("NG_HIDE_LOADING");c.EventBus.unsubscribeByName("NEW_ACCOUNT_SELECTOR_INIT")}})});
define("models/account-selector-edit-group-model",["backbone","underscore"],function(a){return a.Model.extend({initialize:function(){this.set("delete",!1);this.set("update",!1);this.set("new",!1);this.set("hasAccount",!1);this.set("accountList",[]);this.set("validated",!0)},setGroupId:function(a){this.set("id",a);this.set("groupId",a)},setGroupName:function(a){"Loan"===a&&(a="Loans");this.set("groupName",a);this.set("originGroupName",a)},setNewGroupName:function(a){this.set("groupName",a);a!==this.get("originGroupName")?
this.set("update",!0):this.set("update",!1)},isCustomGroup:function(){var a=!1;if("NaN"!==parseInt(this.get("groupId")).toString()||this.get("new"))a=!0;return a},addAccount:function(a){-1>=$.inArray(a,this.get("accountList"))&&this.get("accountList").push(a);this._hasAccount()},removeAccount:function(a){a=$.inArray(a,this.get("accountList"));-1<a&&this.get("accountList").splice(a,1);this._hasAccount()},isCCgroup:function(){return"CC"===this.get("groupId")?!0:!1},isSPgroup:function(){return"SP"===
this.get("groupId")?!0:!1},isFVgroup:function(){return"FV"===this.get("groupId")?!0:!1},isLOgroup:function(){return"RE"===this.get("groupId")||"LO"===this.get("groupId")?!0:!1},setNewGroupTempId:function(){var a=this._generateNewGroupTempId();this.set("groupId",a);this.set("id",a)},isNewGroup:function(){var a=!1;-1!=this.get("groupId").indexOf("newAddGroup")&&(a=!0);return a},validationFailed:function(){this.setNewGroupName(this.get("originGroupName"));this.set("validated",!1)},validationSuccessed:function(){this.set("validated",
!0)},_generateNewGroupTempId:function(){return"newAddGroup"+(new Date).getMilliseconds()},_hasAccount:function(){0>=this.get("accountList").length?this.set("hasAccount",!1):this.set("hasAccount",!0)}})});
define("models/account-selector-edit-account-model",["backbone","underscore"],function(a){return a.Model.extend({initialize:function(){this.set("update",!1);this.set("switchGroup",!1);this.set("switchHide",!1);this.set("fullViewAccount",!1);this.set("originalCrditCardName",!1);this.set("validated",!0)},isSelected:function(a){var g=!1;a===this.get("groupId")&&(g=!0);return g},setAcctNum:function(a){this.set("acctNum",a);this.set("id",a)},isHideBoxDisplayed:function(){var a=!1,g=this.get("hideType");
if("1"===g||"2"===g||"20"===this.get("acctType"))a=!0;return a},setNewAcctName:function(a){this.set("acctName",a);a!==this.get("originAcctName")?this.set("update",!0):this.set("update",!1)},setHideAttr:function(a){this.set("hide",a);this.get("originHide")!==a?this.set("switchHide",!0):this.set("switchHide",!1)},setNewGroup:function(a){this.set("groupId",a);a!==this.get("originGroupId")&&-1===this.get("groupId").indexOf("newAddGroup")?this.set("switchGroup",!0):this.set("switchGroup",!1)},setAcctName:function(a){var g=
$("<div>").html(a).text();a&&-1!==a.indexOf("&#174;")&&this.set("originalCrditCardName",!0);this.set("acctName",g);this.set("originAcctName",g)},setGroupId:function(a){this.set("groupId",a);this.set("originGroupId",a)},setHide:function(a){"false"===a?(this.set("hide",!1),this.set("originHide",!1)):(this.set("hide",!0),this.set("originHide",!0))},getGroupIdToSave:function(){var a=this.get("groupId");-1!=this.get("groupId").indexOf("newAddGroup")&&(a=this.get("originGroupId"));this.get("fullViewAccount")&&
(a="FV");return a},setFullViewAcct:function(a){this.set("siteId",a);this.set("id",a);this.set("fullViewAccount",!0)},getHide:function(){var a=!1;this.get("switchGroup")||(a=this.get("hide"));return a},validationFailed:function(){this.setNewAcctName(this.get("originGroupName"));this.set("validated",!1)},validationSuccessed:function(){this.set("validated",!0)}})});
define("models/account-selector-edit-general-model",["backbone","underscore"],function(a){return a.Model.extend({getBalanceLabelText:function(){var a="";return a=this.get("portfolioPrEligible")?"Hide my account balances and rate of return.":"Hide my account balances."},setShowNbBox:function(a){"false"!==a?this.set("showNbBox",!0):this.set("showNbBox",!1)},setNBBoxInd:function(a){"true"===a?this.set("nbBoxInd",!0):this.set("nbBoxInd",!1)},setShowFvBox:function(a){"false"!==a?this.set("showFvBox",!0):
this.set("showFvBox",!1)},setHideAllFVAcct:function(a){"true"===a?this.set("hideAllFVAcct",!0):this.set("hideAllFVAcct",!1)},setPerformanceHidden:function(a){"true"===a?this.set("performanceHidden",!0):this.set("performanceHidden",!1)},setPortfolioPrEligible:function(a){"true"===a?this.set("portfolioPrEligible",!0):this.set("portfolioPrEligible",!1)},setErrorMsg:function(a){this.set("errorMsg",a)},setCsrfToken:function(a){this.set("csrfToken",a)}})});
define("collections/account-selector-edit-collection",["backbone","underscore"],function(a,b){return a.Collection.extend({findElementWithSpecificValue:function(a,c){return b.find(this.models,function(b){var d=!1;b.attributes[a]&&b.get(a)===c&&(d=!0);return d},this)}})});
define("collections/account-selector-edit-group-collection",["models/account-selector-edit-group-model","collections/account-selector-edit-collection"],function(a,b){return b.extend({model:a,customGroupSpaceAvailable:function(){var a=0;_.forEach(this.models,function(b){b.isCustomGroup()&&!b.get("delete")&&a++},this);return 10>a?!0:!1},hasCustomGroup:function(){var a=0,b=!1;_.forEach(this.models,function(b){b.isCustomGroup()&&!b.get("delete")&&a++},this);0<a&&(b=!0);return b}})});
define("collections/account-selector-edit-account-collection",["models/account-selector-edit-account-model","collections/account-selector-edit-collection"],function(a,b){return b.extend({model:a})});define("tasks/account-selector-edit-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofsummary/snippet/rest/customizeAccountsGroupEdit",dataType:"json",type:"GET"})});define("text!templates/portfolio-accounts-edit-snippet.html",[],function(){return'\t\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--customize-accounts">\n\t      \t<form class="account-selector-modal--form">\n\t\t      \t<h3 id="account-selector-modal--customize-accounts" class="textblock--h3-headline" tabindex="-1">Customize Your Accounts</h3>\n\n\t\t\t\t<form class="account-selector-modal--overflow-container">\n\n\t\t\t\t\t<div class="customize-sticky-header customize-menu-show hidden">\n\t\t\t\t\t\t<h4 id="account-selector-modal--set-display-preferences" class="textblock--h4-headline last">Set your display preferences <span class="set-display-preferences--longer">for all accounts</span></h4>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="account-selector-modal--scroll-section customize-menu-show-wrapper">\n\t\t\t\t\t\t<fieldset role="group" aria-labelledby="account-selector-modal--set-display-preferences">\n\t\t\t\t\t\t\t<h4 id="account-selector-modal--set-display-preferences" class="textblock--h4-headline last customize-menu-remove">Set your display preferences <span class="set-display-preferences--longer">for all accounts</span></h4>\n\t\t\t\t\t\t\t<ul class="account-selector-modal--display-preferences-list">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(generalModel.get(\'performanceHidden\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--hide-balance" checked type="checkbox" id="HideMyAcctBal" name="HideMyAcctBal">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--hide-balance" type="checkbox" id="HideMyAcctBal" name="HideMyAcctBal">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<label for="HideMyAcctBal"><%= generalModel.getBalanceLabelText() %></label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\tif(generalModel.get(\'showNbBox\')){\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(generalModel.get(\'nbBoxInd\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-nb" id="account-selector-modal--hide-nb-account" checked name="account-selector-modal--hide-work-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-nb" id="account-selector-modal--hide-nb-account" name="account-selector-modal--hide-work-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<label for="account-selector-modal--hide-nb-account">Hide my workplace savings accounts, such as 401(k) or 403(b) accounts.</label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t%>\n\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\tif(generalModel.get(\'showFvBox\')){\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(generalModel.get(\'hideAllFVAcct\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-fv" id="account-selector-modal--hide-fv-account" checked name="account-selector-modal--hide-fv-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-fv" id="account-selector-modal--hide-fv-account" name="account-selector-modal--hide-fv-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<label for="account-selector-modal--hide-fv-account">Hide my Non-Fidelity accounts.</label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t%>\n\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t//if(generalModel.get(\'showAuthBox\')){\n\t\t\t\t\t\t\t\tvar showAuthBox = false;\n\t\t\t\t\t\t\t\tif(showAuthBox) {\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t//if(generalModel.get(\'enableHideAllAuthAcct\')){\n\t\t\t\t\t\t\t\t\tvar enableHideAllAuthAcct = false;\n\t\t\t\t\t\t\t\t\tif(enableHideAllAuthAcct) {\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-auth" id="account-selector-modal--hide-auth-account" checked name="account-selector-modal--hide-auth-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="account-selector-edit--hide-auth" id="account-selector-modal--hide-auth-account" name="account-selector-modal--hide-auth-account">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<label for="account-selector-modal--hide-auth-account">Hide my authorized accounts from my All Accounts total.</label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</fieldset>\n\n\t\t\t\t\t\t<fieldset class="nameAndGroup" role="group" aria-labelledby="account-selector-modal--name-group-accts">\n\t\t\t\t\t\t\t<h4 id="account-selector-modal--name-group-accts" class="textblock--h4-headline last">Name and group your accounts</h4>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\tfor(var n = 0; n < accountList.length;n++){\n\t\t\t\t\t\t\tvar account = accountList[n];\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t<ul class="account-selector-modal--account">\n\t\t\t\t\t\t\t\t<li class="account-selector-modal--nickname">\n\t\t\t\t\t\t\t\t\t<label for="nickname<%=n%>" id="nicknamelabel<%=n%>">\n\t\t\t\t\t\t\t\t\t\tNickname for Account\n\t\t\t\t\t\t\t\t\t\t<span id="acctnickname<%=n%>" tabindex="-1" data-pii="true"><%= account.get(\'acctNum\')%></span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(account.get(\'fullViewAccount\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input maxlength="40" data-pii="true" class="account-selector-edit--acctname-change" id="nickname<%=n%>" type="text" name="nickname<%=n%>" data-acctnum="<%=account.get(\'id\')%>" data-groupid="<%= account.get(\'groupId\')%>" aria-labelledby="<%= account.get(\'acctName\')%>" value="<%= (account.get(\'acctName\')).substring(0,40)%>">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tif(account.get(\'originalCrditCardName\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input maxlength="40" data-pii="true" class="account-selector-edit--acctname-change original-credit-card-name" id="nickname<%=n%>"  type="text" name="nickname<%=n%>" data-acctnum="<%=account.get(\'id\')%>" data-groupid="<%= account.get(\'groupId\')%>" aria-labelledby="<%= account.get(\'acctName\')%>" value="<%= account.get(\'acctName\')%>">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<input maxlength="40" data-pii="true" class="account-selector-edit--acctname-change" id="nickname<%=n%>"  type="text" name="nickname<%=n%>" data-acctnum="<%=account.get(\'id\')%>" data-groupid="<%= account.get(\'groupId\')%>" aria-labelledby="<%= account.get(\'acctName\')%>" value="<%= account.get(\'acctName\')%>">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class="account-selector-modal--group">\n\t\t\t\t\t\t\t\t\t<label for="group<%=n%>">Group</label>\n\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tvar counter = 0, singleGroup;\n\t\t\t\t\t\t\t\t\tif(account.get(\'acctType\')===\'20\'||account.get(\'fullViewAccount\')){\n\t\t\t\t\t\t\t\t\tfor(var m = 0; m < groupList.length; m++){\n\t\t\t\t\t\t\t\t\tvar group = groupList[m];\n\t\t\t\t\t\t\t\t\tif(account.isSelected(group.get(\'groupId\'))){\n\t\t\t\t\t\t\t\t\tcounter++;\n\t\t\t\t\t\t\t\t\tsingleGroup = group;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar onlySingleGroupEligable = counter === 1;\n\t\t\t\t\t\t\t\t\tif(onlySingleGroupEligable) {\n\t\t\t\t\t\t\t\t\t%>\n\n\t\t\t\t\t\t\t\t\t<span class="fidform-single-option"><%=singleGroup.get(\'groupName\')%></span>\n\t\t\t\t\t\t\t\t\t<select class="account-selector-edit--group-change display-none" data-acctnum="<%=account.get(\'id\')%>" data-acctorigingroup="<%= account.get(\'originGroupId\')%>" id="group<%=n%>" data-pii="true">\n\t\t\t\t\t\t\t\t\t\t\x3c!--Out side account and credit card account cannot be moved into other groups  --\x3e\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t} else {%>\n\t\t\t\t\t\t\t\t\t\t<select class="account-selector-edit--group-change" data-acctnum="<%=account.get(\'id\')%>" data-acctorigingroup="<%= account.get(\'originGroupId\')%>" id="group<%=n%>" data-pii="true">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--Out side account and credit card account cannot be moved into other groups  --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<%}%>\n\n\n\t\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t\tif(account.get(\'acctType\')===\'20\'||account.get(\'fullViewAccount\')){\n\t\t\t\t\t\t\t\t\t\t\tvar fullviewClass = \'\';\n\t\t\t\t\t\t\t\t\t\t\tif(account.get(\'fullViewAccount\'))\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tfullviewClass  = \'full-view-account\';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tfor(var m = 0; m < groupList.length; m++){\n\t\t\t\t\t\t\t\t\t\t\tvar group = groupList[m];\n\t\t\t\t\t\t\t\t\t\t\tif(account.isSelected(group.get(\'groupId\'))){\n\t\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t\t<option value="<%= group.get(\'groupId\')%>" selected><%= group.get(\'groupName\') %></option>\n\t\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tfor(var m = 0; m < groupList.length; m++){\n\t\t\t\t\t\t\t\t\t\t\tvar group = groupList[m];\n\t\t\t\t\t\t\t\t\t\t\tif(group.get(\'delete\')||group.isCCgroup()||group.isSPgroup()||group.isFVgroup()||group.isLOgroup()){\n\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif(account.isSelected(group.get(\'groupId\'))){\n\t\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t\t<option value="<%= group.get(\'groupId\')%>" selected><%= group.get(\'groupName\') %></option>\n\t\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t\t<option value="<%= group.get(\'groupId\')%>" ><%= group.get(\'groupName\') %></option>\n\t\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li id="nickname<%=n%>Error" class="account-selector-modal--message-error hidden">\n\t\t\t\t\t\t\t\t\t<div class="message--error-icon"></div>\n\t\t\t\t\t\t\t\t\t<span class="message--title">Your group name contains an invalid character. Please use only numbers and letters.</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class="account-selector-modal--hide-account-toggle">\n\t\t\t\t\t\t\t\t\t\x3c!-- <div class="left acct-hide-balance-container">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\tif(account.get("accountBalanceHidden")) {\n\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--acct-hide-balance <%=fullviewClass%>" data-acctnum="<%= account.get(\'id\')%>" type="checkbox" checked id="HideThisBalance<%=n%>">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--acct-hide-balance <%=fullviewClass%>" data-acctnum="<%= account.get(\'id\')%>" type="checkbox" id="HideThisBalance<%=n%>">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t%>\n\n\t\t\t\t\t\t\t\t\t\t<label for="HideThisBalance<%=n%>">Exclude account from total balance</label>\n\t\t\t\t\t\t\t\t\t</div> --\x3e\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(account.isHideBoxDisplayed()){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\tif(account.get("hide")) {\n\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--acct-hide <%=fullviewClass%>" data-acctnum="<%= account.get(\'id\')%>" type="checkbox" checked id="HideThisAcct<%=n%>">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--acct-hide <%=fullviewClass%>" data-acctnum="<%= account.get(\'id\')%>" type="checkbox" id="HideThisAcct<%=n%>">\n\t\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t\t<label for="HideThisAcct<%=n%>">Hide this account</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t</fieldset>\n\n\t\t\t\t\t\t<fieldset class="account-selector-modal--custom-group account-selector-modal--fieldset-name customGroup" aria-labelledby="create-custom-group">\n\t\t\t\t\t\t\t<h4 id="create-custom-group" class="textblock--h4-headline last">Create a custom group</h4>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\tif(generalModel.get(\'createInputDisplay\')){\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t<p class="account-selector-modal--create-custom-group">\n\t\t\t\t\t\t\t\t<label for="customgroupname">Name</label>\n\t\t\t\t\t\t\t\t<input maxlength="40" class="account-selector-edit--new-group-name groupname-validate create-group-exist-validate" type="text" id="customgroupname" name="customgroupname" data-pii="true">\n\t\t\t\t\t\t\t\t<button type="button" class="action-button--secondary create-group-button" role="button">Create</button>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div id="customgroupnameError" class="account-selector-modal--message-error hidden">\n\t\t\t\t\t\t\t\t<div class="message--error-icon"></div>\n\t\t\t\t\t\t\t\t<span class="message--title">Your group name contains an invalid character. Please use only numbers and letters.</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\tif(generalModel.get(\'customeGroupLabelDisplay\')){\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t<p id="custom-groups">Your custom groups</p>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t<ul class="account-selector-modal--custom-group-list">\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\tfor(var n = 0; n < groupList.length;n++){\n\t\t\t\t\t\t\t\tvar group = groupList[n];\n\t\t\t\t\t\t\t\tif(group.isCustomGroup()&&!group.get(\'delete\')){\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<li class="clearfix" >\n\t\t\t\t\t\t\t\t\t<label class="off-screen" for="<%= group.get(\'groupId\')%>">Custom Group <%=group.get(\'groupId\')%></label>\n\t\t\t\t\t\t\t\t\t<input class="account-selector-edit--groupname-change groupname-validate change-group-name-exist-validate" type="text" maxlength="40" id="<%= group.get(\'groupId\')%>" data-groupid="<%= group.get(\'groupId\')%>" name="<%= group.get(\'groupName\')%>" value="<%= group.get(\'groupName\') %>" data-pii="true">\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\tif(!group.get(\'hasAccount\')){\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" data-groupid="<%=group.get(\'groupId\')%>" class="account-selector-modal--remove account-selector-edit--group-remove" role="button" aria-label="Remove Group <%=group.get(\'groupId\')%>" data-groupid="<%= group.get(\'groupId\')%>">\n\t\t\t\t\t\t\t\t\t\t<img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/dev/icon-remove.png" alt="Remove Group <%=group.get(\'groupId\')%>">\n\t\t\t\t\t\t\t\t\t\t<span class="off-screen">Remove Group <%=group.get(\'groupId\')%></span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t\t<div id="<%= group.get(\'groupId\')%>Error" class="account-selector-modal--message-error hidden">\n\t\t\t\t\t\t\t\t\t\t<div class="message--error-icon"></div>\n\t\t\t\t\t\t\t\t\t\t<span class="message--title">Your group name contains an invalid character. Please use only numbers and letters.</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</fieldset>\n\t\t\t     \t</div>\x3c!-- end account-selector-modal--scroll-section --\x3e\n\t\t\t\t</form>\n\t\t        <fieldset class="base-modal--actions customize-footer-area" id="customize-footer-area">\n\t\t           <p class="base-modal--actions-wrapper"><button type="button" role="button" class="action-button--generic account-selector-edit--save">Save</button> <a class="account-selector-edit--cancel" href="javascript:void(0);">Cancel</a></p>\n\t\t        </fieldset>\n\t        </form>          \n\t    </div>\n\n'});
this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=f[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function g(a,c){var e,f,n,r,s=d,v,A=c[a];A&&("object"===typeof A&&"function"===typeof A.toJSON)&&(A=A.toJSON(a));"function"===typeof j&&(A=j.call(c,a,A));switch(typeof A){case "string":return b(A);case "number":return isFinite(A)?String(A):"null";case "boolean":case "null":return String(A);
case "object":if(!A)return"null";d+=h;v=[];if("[object Array]"===Object.prototype.toString.apply(A)){r=A.length;for(e=0;e<r;e+=1)v[e]=g(e,A)||"null";n=0===v.length?"[]":d?"[\n"+d+v.join(",\n"+d)+"\n"+s+"]":"["+v.join(",")+"]";d=s;return n}if(j&&"object"===typeof j){r=j.length;for(e=0;e<r;e+=1)f=j[e],"string"===typeof f&&(n=g(f,A))&&v.push(b(f)+(d?": ":":")+n)}else for(f in A)Object.hasOwnProperty.call(A,f)&&(n=g(f,A))&&v.push(b(f)+(d?": ":":")+n);n=0===v.length?"{}":d?"{\n"+d+v.join(",\n"+d)+"\n"+
s+"}":"{"+v.join(",")+"}";d=s;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,h,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var e;h=d="";if("number"===typeof c)for(e=0;e<c;e+=1)h+=" ";else"string"===typeof c&&(h=c);if((j=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return g("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function d(a,c){var e,f,j=a[c];if(j&&"object"===typeof j)for(e in j)Object.hasOwnProperty.call(j,e)&&(f=d(j,e),void 0!==f?j[e]=f:delete j[e]);return b.call(a,c,j)}var e;c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return e=eval("("+a+")"),"function"===typeof b?d({"":e},""):e;throw new SyntaxError("JSON.parse");})})();define("util/json2",function(){});
(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var g=a.data(this[0],"validator");if(g)return g;this.attr("novalidate","novalidate");g=new a.validator(b,this[0]);a.data(this[0],"validator",g);g.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){g.settings.submitHandler&&(g.submitButton=b.target);a(b.target).hasClass("cancel")&&(g.cancelSubmit=!0);void 0!==a(b.target).attr("formnovalidate")&&(g.cancelSubmit=!0)}),this.submit(function(b){function e(){var d;return g.settings.submitHandler?
(g.submitButton&&(d=a("<input type='hidden'/>").attr("name",g.submitButton.name).val(a(g.submitButton).val()).appendTo(g.currentForm)),g.settings.submitHandler.call(g,g.currentForm,b),g.submitButton&&d.remove(),!1):!0}g.settings.debug&&b.preventDefault();if(g.cancelSubmit)return g.cancelSubmit=!1,e();if(g.form())return g.pendingRequest?(g.formSubmitted=!0,!1):e();g.focusInvalid();return!1}));return g}b&&(b.debug&&window.console)&&console.warn("Nothing selected, can't validate, returning nothing.")},
valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,g=a(this[0].form).validate();this.each(function(){b=b&&g.element(this)});return b},removeAttrs:function(b){var g={},c=this;a.each(b.split(/\s/),function(a,b){g[b]=c.attr(b);c.removeAttr(b)});return g},rules:function(b,g){var c=this[0];if(b){var e=a.data(c.form,"validator").settings,d=e.rules,h=a.validator.staticRules(c);switch(b){case "add":a.extend(h,a.validator.normalizeRule(g));delete h.messages;d[c.name]=h;g.messages&&
(e.messages[c.name]=a.extend(e.messages[c.name],g.messages));break;case "remove":if(!g)return delete d[c.name],h;var f={};a.each(g.split(/\s/),function(a,b){f[b]=h[b];delete h[b]});return f}}c=a.validator.normalizeRules(a.extend({},a.validator.classRules(c),a.validator.attributeRules(c),a.validator.dataRules(c),a.validator.staticRules(c)),c);c.required&&(e=c.required,delete c.required,c=a.extend({required:e},c));return c}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+
a(b).val())},unchecked:function(b){return!a(b).prop("checked")}});a.validator=function(b,g){this.settings=a.extend(!0,{},a.validator.defaults,b);this.currentForm=g;this.init()};a.validator.format=function(b,g){if(1===arguments.length)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};2<arguments.length&&g.constructor!==Array&&(g=a.makeArray(arguments).slice(1));g.constructor!==Array&&(g=[g]);a.each(g,function(a,e){b=b.replace(RegExp("\\{"+a+"\\}",
"g"),function(){return e})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},
onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a,g){9===g.which&&""===this.elementValue(a)||(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,g,c){"radio"===b.type?this.findByName(b.name).addClass(g).removeClass(c):a(b).addClass(g).removeClass(c)},unhighlight:function(b,
g,c){"radio"===b.type?this.findByName(b.name).removeClass(g).addClass(c):a(b).removeClass(g).addClass(c)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",
equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},
autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),h="on"+b.type.replace(/^validate/,"");c.settings[h]&&c.settings[h].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid=
{};this.reset();var g=this.groups={};a.each(this.settings.groups,function(b,c){"string"===typeof c&&(c=c.split(/\s/));a.each(c,function(a,c){g[c]=b})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)});a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,g=this.currentElements=
this.elements();g[a];a++)this.check(g[a]);return this.valid()},element:function(b){this.lastElement=b=this.validationTargetFor(this.clean(b));this.prepareElement(b);this.currentElements=a(b);var g=!1!==this.check(b);g?delete this.invalid[b.name]:this.invalid[b.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return g},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var g in b)this.errorList.push({message:b[g],element:this.findByName(g)[0]});
this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var g=
0,c;for(c in a)g++;return g},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&
b},elements:function(){var b=this,g={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&(b.settings.debug&&window.console)&&console.error("%o has no name assigned",this);return this.name in g||!b.objectLength(a(this).rules())?!1:g[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},
reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(b){var g=a(b).attr("type"),c=a(b).val();return"radio"===g||"checkbox"===g?a("input[name='"+a(b).attr("name")+"']:checked").val():"string"===typeof c?c.replace(/\r/g,""):c},check:function(b){b=
this.validationTargetFor(this.clean(b));var g=a(b).rules(),c=!1,e=this.elementValue(b),d,h;for(h in g){var f={method:h,parameters:g[h]};try{if(d=a.validator.methods[h].call(this,e,b,f.parameters),"dependency-mismatch"===d)c=!0;else{c=!1;if("pending"===d){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!d)return this.formatAndAdd(b,f),!1}}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+f.method+"' method.",j),
j;}}if(!c)return this.objectLength(g)&&this.successList.push(b),!0},customDataMessage:function(b,g){return a(b).data("msg-"+g.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+g.toLowerCase())},customMessage:function(a,g){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[g])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,g){return this.findDefined(this.customMessage(b.name,g),this.customDataMessage(b,
g),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[g],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,g){var c=this.defaultMessage(b,g.method),e=/\$?\{(\d+)\}/g;"function"===typeof c?c=c.call(this,g.parameters,b):e.test(c)&&(c=a.validator.format(c.replace(e,"{$1}"),g.parameters));this.errorList.push({message:c,element:b});this.errorMap[b.name]=c;this.submitted[b.name]=c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));
return a},defaultShowErrors:function(){var a,g;for(a=0;this.errorList[a];a++)g=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,g.element,this.settings.errorClass,this.settings.validClass),this.showLabel(g.element,g.message);this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(g=this.validElements();g[a];a++)this.settings.unhighlight.call(this,
g[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,g){var c=this.errorsFor(b);c.length?(c.removeClass(this.settings.validClass).addClass(this.settings.errorClass),c.html(g)):(c=a("<"+this.settings.errorElement+
">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(g||""),this.settings.wrapper&&(c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(c).length||(this.settings.errorPlacement?this.settings.errorPlacement(c,a(b)):c.insertAfter(b)));!g&&this.settings.success&&(c.text(""),"string"===typeof this.settings.success?c.addClass(this.settings.success):this.settings.success(c,b));this.toShow=this.toShow.add(c)},errorsFor:function(b){var g=this.idOrName(b);
return this.errors().filter(function(){return a(this).attr("for")===g})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,g){switch(g.nodeName.toLowerCase()){case "select":return a("option:selected",
g).length;case "input":if(this.checkable(g))return this.findByName(g.name).filter(":checked").length}return b.length},depend:function(a,g){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,g):!0},dependTypes:{"boolean":function(a){return a},string:function(b,g){return!!a(b,g.form).length},"function":function(a,g){return a(g)}},optional:function(b){var g=this.elementValue(b);return!a.validator.methods.required.call(this,g,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||
(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,g){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[b.name];g&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!g&&(0===this.pendingRequest&&this.formSubmitted)&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",
{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,g){b.constructor===String?this.classRuleSettings[b]=g:a.extend(this.classRuleSettings,b)},classRules:function(b){var g={};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(g,a.validator.classRuleSettings[this])});
return g},attributeRules:function(b){var g={};b=a(b);var c=b[0].getAttribute("type"),e;for(e in a.validator.methods){var d;"required"===e?(d=b.get(0).getAttribute(e),""===d&&(d=!0),d=!!d):d=b.attr(e);if(/min|max/.test(e)&&(null===c||/number|range|text/.test(c)))d=Number(d);d?g[e]=d:c===e&&"range"!==c&&(g[e]=!0)}g.maxlength&&/-1|2147483647|524288/.test(g.maxlength)&&delete g.maxlength;return g},dataRules:function(b){var g,c={},e=a(b);for(g in a.validator.methods)b=e.data("rule-"+g.toLowerCase()),void 0!==
b&&(c[g]=b);return c},staticRules:function(b){var g={},c=a.data(b.form,"validator");c.settings.rules&&(g=a.validator.normalizeRule(c.settings.rules[b.name])||{});return g},normalizeRules:function(b,g){a.each(b,function(c,e){if(!1===e)delete b[c];else if(e.param||e.depends){var d=!0;switch(typeof e.depends){case "string":d=!!a(e.depends,g.form).length;break;case "function":d=e.depends.call(g,g)}d?b[c]=void 0!==e.param?e.param:!0:delete b[c]}});a.each(b,function(c,e){b[c]=a.isFunction(e)?e(g):e});a.each(["minlength",
"maxlength"],function(){b[this]&&(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"===typeof b[this]&&(c=b[this].split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))});a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength));return b},normalizeRule:function(b){if("string"===
typeof b){var g={};a.each(b.split(/\s/),function(){g[this]=!0});b=g}return b},addMethod:function(b,g,c){a.validator.methods[b]=g;a.validator.messages[b]=void 0!==c?c:a.validator.messages[b];3>g.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,g,c){return!this.depend(c,g)?"dependency-mismatch":"select"===g.nodeName.toLowerCase()?(b=a(g).val())&&0<b.length:this.checkable(g)?0<this.getLength(b,g):0<a.trim(b).length},email:function(a,g){return this.optional(g)||
/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,g){return this.optional(g)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,g){return this.optional(g)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,g){return this.optional(g)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,g){return this.optional(g)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,g){return this.optional(g)||/^\d+$/.test(a)},creditcard:function(a,g){if(this.optional(g))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c=0,e=0,d=!1;a=a.replace(/\D/g,"");for(var h=a.length-
1;0<=h;h--){e=a.charAt(h);e=parseInt(e,10);if(d&&9<(e*=2))e-=9;c+=e;d=!d}return 0===c%10},minlength:function(b,g,c){b=a.isArray(b)?b.length:this.getLength(a.trim(b),g);return this.optional(g)||b>=c},maxlength:function(b,g,c){b=a.isArray(b)?b.length:this.getLength(a.trim(b),g);return this.optional(g)||b<=c},rangelength:function(b,g,c){b=a.isArray(b)?b.length:this.getLength(a.trim(b),g);return this.optional(g)||b>=c[0]&&b<=c[1]},min:function(a,g,c){return this.optional(g)||a>=c},max:function(a,g,c){return this.optional(g)||
a<=c},range:function(a,g,c){return this.optional(g)||a>=c[0]&&a<=c[1]},equalTo:function(b,g,c){c=a(c);this.settings.onfocusout&&c.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(g).valid()});return b===c.val()},remote:function(b,g,c){if(this.optional(g))return"dependency-mismatch";var e=this.previousValue(g);this.settings.messages[g.name]||(this.settings.messages[g.name]={});e.originalMessage=this.settings.messages[g.name].remote;this.settings.messages[g.name].remote=e.message;
c="string"===typeof c&&{url:c}||c;if(e.old===b)return e.valid;e.old=b;var d=this;this.startRequest(g);var h={};h[g.name]=b;a.ajax(a.extend(!0,{url:c,mode:"abort",port:"validate"+g.name,dataType:"json",data:h,success:function(c){d.settings.messages[g.name].remote=e.originalMessage;var j=!0===c||"true"===c;if(j){var h=d.formSubmitted;d.prepareElement(g);d.formSubmitted=h;d.successList.push(g);delete d.invalid[g.name];d.showErrors()}else h={},c=c||d.defaultMessage(g,"remote"),h[g.name]=e.message=a.isFunction(c)?
c(b):c,d.invalid[g.name]=!0,d.showErrors(h);e.valid=j;d.stopRequest(g,j)}},c));return"pending"}}});a.format=a.validator.format})(jQuery);(function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,e,d){e=a.port;"abort"===a.mode&&(b[e]&&b[e].abort(),b[e]=d)});else{var g=a.ajax;a.ajax=function(c){var e=("port"in c?c:a.ajaxSettings).port;return"abort"===("mode"in c?c:a.ajaxSettings).mode?(b[e]&&b[e].abort(),b[e]=g.apply(this,arguments),b[e]):g.apply(this,arguments)}}})(jQuery);
(function(a){a.extend(a.fn,{validateDelegate:function(b,g,c){return this.bind(g,function(e){var d=a(e.target);if(d.is(b))return c.apply(d,arguments)})}})})(jQuery);define("validate",["jquery"],function(){});
define("views/account-selector-edit-view","jquery util/eventhub-backbone views/base-view util/constants util/progressbar models/account-selector-edit-group-model models/account-selector-edit-account-model models/account-selector-edit-general-model collections/account-selector-edit-group-collection collections/account-selector-edit-account-collection tasks/account-selector-edit-task text!../templates/portfolio-accounts-edit-snippet.html text!../templates/portfolio-accounts-edit-error-snippet.html util/progressbar components/modalpopup util/json2 validate".split(" "),function(a,
b,g,c,e,d,h,f,j,k,l,p,m){var n=/^[a-zA-Z0-9!@#$\u00ae\u00a9\{\}\[\]\/\.\,\-\*\^\|\'\&\:\~\s\(\)\%\+\_\\]+$/,r={save:"Fidelity is currently unable to customize your accounts. Please try again later.",edit:"Fidelity is currently unable to customize your accounts. Please try again later."},s=!0;return g.extend({events:{"click .create-group-button":"createGroup","keyup .create-group-button":"createGroupTabOut","click .account-selector-edit--group-remove":"deleteGroup","change .account-selector-edit--group-change":"changeGroup",
"blur .account-selector-edit--acctname-change":"changeAcctName","change .account-selector-edit--acctname-change":"removeOriginalClass","change .account-selector-edit--groupname-change":"changeGroupName","click .account-selector-edit--save":"saveData","change .account-selector-edit--acct-hide":"hideAcct","click .account-selector-edit--hide-nb":"hideNB","click .account-selector-edit--hide-balance":"hideBalance","keyup .account-selector-edit--acctname-change, .account-selector-edit--new-group-name, .account-selector-edit--groupname-change":"enterToSave",
"click .base-popup--close-button":"closeEditPopup","click .account-selector-edit--cancel":"closeEditPopup","change .account-selector-edit--hide-fv":"hideAllFV"},initialize:function(){s=!0;this.generalModel=new f;this.accountListModels=new k;this.groupListModels=new j;this.loadEditData()},render:function(){return this},refresh:function(){var b;this.generalModel.set("createInputDisplay",this.groupListModels.customGroupSpaceAvailable());this.generalModel.set("customeGroupLabelDisplay",this.groupListModels.hasCustomGroup());
b=_.template(p)({generalModel:this.generalModel,groupList:this.groupListModels.models,accountList:this.accountListModels.models,envMap:envMap});this.$(".js-account-edit-modal-content").html(b);this.customizePageResize();this.showRemoveToggle();this.addFormValidation();a(window).off("resize",this.customizePageResize).on("resize",this.customizePageResize);a(".account-selector-modal--scroll-section").on("scroll",this.stickyHeaders)},errorHandler:function(){var a=_.template(m)({generalModel:this.generalModel});
this.$(".js-account-edit-modal-content").html(a)},customizePageResize:function(){function b(c,d){var e=a(c),f=parseFloat(e.css("padding-top")),j=parseFloat(e.css("padding-bottom")),h=f+j,g=0,k=parseFloat(e.css("margin-top")),l=parseFloat(e.css("margin-bottom"));!1!==d&&(g=a("body").hasClass("lt-ie10")?c[0].offsetHeight-h:parseFloat(e.css("height"))-h);return f+j+g+k+l}function c(){var n=a(".js-account-edit-modal-content"),m;g=d.height();n.attr("data-fixedheights")?m=JSON.parse(n.attr("data-fixedheights")):
(m={},m.modalHeight=b(e,!1),m.topHeaderheight=b(f,!0,!0),m.bottomHeaderHeight=b(j,!0,!0),m.footerAreaHeight=b(h,!0,!0),n.attr("data-fixedheights",JSON.stringify(m)));k=m.modalHeight+m.topHeaderheight+m.bottomHeaderHeight+m.footerAreaHeight;l=g-k;e.find(".account-selector-modal--scroll-section").css("height",l);e.css("visibility","visible")}var d=a(window),e=a(".js-account-edit-modal"),f=e.find("#account-selector-modal--customize-accounts"),j=e.find("#account-selector-modal--set-display-preferences"),
h=e.find(".customize-footer-area"),g,k,l;s?(e.css("visibility","hidden"),setTimeout(function(){c()},0),s=!1):c()},stickyHeaders:function(){var b=a(".customize-sticky-header"),c=b.find("h4"),b=b.offset().top,d=a(".nameAndGroup"),e=d.offset().top,d=d.find("h4").text(),f=a(".customGroup"),j=f.offset().top,f=f.find("h4").text();e<=b?j<=b?c.text(f):c.text(d):e>b&&c.html('Set your display preferences <span class="set-display-preferences--longer">for all accounts</span>')},showRemoveToggle:function(){a(".customize-menu-show").removeClass("hidden");
a(".customize-menu-remove").addClass("hidden")},loadEditData:function(){var b=this;(new l({context:this,onPreExecute:function(){e.showLoading("Loading...",!0,500)},onSuccess:function(c){b.setData(c)?b.refresh():(b.generalModel.setErrorMsg(r.edit),b.errorHandler());a(".base-popup.js-account-edit-modal").ModalPopup("open")},onError:function(c){var d=!1;500==c.status&&(c=a(c.responseXML),0<c.find("Reason").length&&0<c.find("Location").length&&(d=!0));d||(b.generalModel.setErrorMsg(r.edit),b.errorHandler(),
a(".base-popup.js-account-edit-modal").ModalPopup("open"))},onComplete:function(){e.hideLoading(500);b.options.init&&Backbone.history.navigate("summary",{trigger:!0});b.validateAccountName()}})).run()},validateAccountName:function(){a(".account-selector-edit--acctname-change").each(function(){var b=5*(this.value.match(/\u00a9|\u00ae/g)||[]).length+this.value.length;this.maxLength&&(this.value&&this.value.length&&0!=this.value.length&&b>this.maxLength)&&(b=a(this).parent().nextAll(".account-selector-modal--message-error"),
a(b).find(".message--error-icon").addClass("acctName-validation--message-icon"),a(b).find(".message--title").text("Nickname has a "+this.maxLength+" character limit."),a(b).removeClass("hidden"))})},addFormValidation:function(){var b=this,c=b.$el.find(".account-selector-modal--form");jQuery.validator.addMethod("account-selector-edit--acctname-change",function(a){return b.characterValidation(a)},"Your nickname contains an invalid character. Please use only numbers and letters.");jQuery.validator.addMethod("groupname-validate",
function(a){return b.characterValidation(a)},"Your group name contains an invalid character. Please use only numbers and letters.");jQuery.validator.addMethod("create-group-exist-validate",function(a){return b._checkGroupNameExists(a)},"Your group name is already in use. Please provide a unique name for this group.");jQuery.validator.addMethod("change-group-name-exist-validate",function(c,d){var e=a(d).data("groupid").toString();return b._checkGroupNameExists(c,e)},"Your group name is already in use. Please provide a unique name for this group.");
c.validate({onkeyup:!1,showErrors:function(){var b,d,e,f;d=this.successList.length;for(b=0;b<d;b++)e=this.successList[b],f=c.find("#"+e.id+"Error"),f.addClass("hidden");d=this.errorList.length;for(b=0;b<d;b++)e=this.errorList[b],a(e.element).hasClass("original-credit-card-name")||(f=c.find("#"+e.element.id+"Error"),f.removeClass("hidden"),f=f.find(".message--title"),f.empty().append(e.message))}})},characterValidation:function(b){var c=!0;b=a.trim(b);-1===b.search(n)&&""!==b&&(c=!1);return c},emptyStringCheck:function(b){var c=
!0;""===a.trim(b)&&(c=!1);return c},setData:function(a){var b=!1;a.accountlist&&a.accountlist.groupList.defaultAccountGroup&&a.accountlist.accountList.accountHelper?(this._setGeneralModel(a.accountlist),this._setGroupData(a.accountlist.groupList.defaultAccountGroup),this._setAccountData(a.accountlist.accountList.accountHelper),b=!0):this.generalModel.setErrorMsg(r.edit);return b},createGroup:function(){var a=this.$(".account-selector-edit--new-group-name").val(),b=this.groupListModels.findElementWithSpecificValue("groupName",
a);this._checkGroupNameExists(a)&&this._checkNameCharacter(a,"group")&&(b?b.set("delete",!1):(b=new d,b.setNewGroupTempId(),b.setGroupName(a),b.set("new",!0),this.groupListModels.push(b)),this.refresh())},createGroupTabOut:function(a){9===a.keyCode&&this.$(".create-group-button").trigger("click")},deleteGroup:function(b){b=a(b.currentTarget).data("groupid");b=this.groupListModels.get(b);b.isNewGroup()?this.groupListModels.remove(b):b.set("delete",!0);this.refresh()},changeGroup:function(b){var c=
a(b.currentTarget);b=c.attr("data-acctnum");var d=c.data("acctorigingroup").toString(),c=c.val(),e=this.groupListModels.get(c),f=this.accountListModels.get(b),d=this.groupListModels.get(d);e.addAccount(b);d.removeAccount(b);f.setNewGroup(c)},changeAcctName:function(b){var c=a(b.currentTarget);b=c.val();var d=c.attr("data-acctnum"),d=this.accountListModels.get(d),e=c.attr("maxLength"),f=5*(b.match(/\u00ae|\u00a9/g)||[]).length+b.length,c=c.parent().nextAll(".account-selector-modal--message-error");
f>e&&((f=a(c).find(".acctName-validation--message-icon"))&&0<f.length&&f.removeClass("acctName-validation--message-icon"),a(c).find(".message--title").text("Please enter no more than "+e+" characters."),a(c).removeClass("hidden"),d.validationFailed());this._checkNameCharacter(b,"account")?(d.setNewAcctName(b),d.validationSuccessed()):d.validationFailed()},removeOriginalClass:function(b){a(b.currentTarget).removeClass("original-credit-card-name")},changeGroupName:function(b){var c=a(b.currentTarget);
b=c.val();var c=c.data("groupid").toString(),d=this.groupListModels.get(c);this._checkNameCharacter(b,"group")&&this._checkGroupNameExists(b,c)?(d.setNewGroupName(b),d.validationSuccessed()):d.validationFailed()},hideBalance:function(){this.generalModel.set("performanceHidden",this.$(".account-selector-edit--hide-balance").is(":checked"))},hideNB:function(){this.generalModel.set("nbBoxInd",this.$(".account-selector-edit--hide-nb").is(":checked"))},hideAcct:function(b){b=a(b.currentTarget);var c=b.attr("data-acctnum"),
d=b.is(":checked");this.accountListModels.get(c).setHideAttr(d);b.hasClass("full-view-account")&&(d?a(".full-view-account").length==a(".full-view-account:checked").length&&a("#account-selector-modal--hide-fv-account").attr("checked",!0):a("#account-selector-modal--hide-fv-account").attr("checked",!1))},checkInputFieldLength:function(){var b=!1;a(".account-selector-edit--acctname-change").each(function(){var c=a(this).parent().nextAll(".account-selector-modal--message-error");if(!c.hasClass("hidden")){var d=
a(c).find(".acctName-validation--message-icon"),c=a(c).find(".message--error-icon");0>=d.length&&0<c.length&&(b=!0)}});return b?"VALIDATION_FAIL":"Success"},saveData:function(){var c=this,d=!0,e=this._generateNewGroupList(),f=this._generateDeleteGroupList(),j=this._generateUpdatedGroupList(),h=this._generateUpdatedAcctList();"VALIDATION_FAIL"!==this.checkInputFieldLength()&&("VALIDATION_FAIL"!==h&&"VALIDATION_FAIL"!==j&&"VALIDATION_FAIL"!==e)&&(e={csrfToken:this.generalModel.get("csrfToken"),hideNbAccount:this.generalModel.get("nbBoxInd"),
showNbBox:this.generalModel.get("showNbBox"),portfolioPrEligible:this.generalModel.get("portfolioPrEligible"),hideBalances:this.generalModel.get("performanceHidden"),updatedAccounts:h,updatedGroups:j,newGroups:e,deletedGroups:f},a.ajax({url:"/ftgw/fbc/ofsummary/rest/customizeAccountsGroupSave",data:{customAccountsGroupData:JSON.stringify(e)},dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){"undefined"!=typeof a.accountsGroup.txnStatus.errorMsgs[0]&&(d=!1)},error:function(){d=
!1},complete:function(){d?(c.closeEditPopup(),b.publishEvent("ACCOUNT_REFRESH",{rebuildCookie:!1})):(c.generalModel.setErrorMsg(r.save),c.errorHandler())}}))},_setGeneralModel:function(a){this.generalModel.setCsrfToken(a.csrfToken);this.generalModel.setNBBoxInd(a.nbBoxChecked);this.generalModel.setPortfolioPrEligible(a.portfolioPrEligible);this.generalModel.setPerformanceHidden(a.performanceHidden);this.generalModel.setShowNbBox(a.showNbBox);this.generalModel.setShowFvBox("false");this.generalModel.setHideAllFVAcct("true")},
_setGroupData:function(b){var c=this;a(b).each(function(a,b){var e=new d;e.setGroupId(b.code);e.setGroupName(b.name);c.groupListModels.push(e)})},_setAccountData:function(b){var c=this;a(b).each(function(a,b){var d=new h,e=c.groupListModels.get(b.accountGroupId);d.setAcctNum(b.displayAccountNumber);d.set("acctType",b.accountType);d.set("hideType",b.hideType);d.setAcctName(b.escapedAccountName);d.setGroupId(b.accountGroupId);d.setHide(b.hidden);b.asset.key&&(d.setFullViewAcct(b.asset.key.source.siteId),
c.generalModel.setShowFvBox("true"),d.getHide()||c.generalModel.setHideAllFVAcct("false"));e&&e.addAccount(b.displayAccountNumber);c.accountListModels.push(d)})},_checkGroupNameExists:function(a,b){for(var c=!0,d=0;d<this.groupListModels.models.length;d++){var e=this.groupListModels.models[d];if(a.toUpperCase()===e.get("groupName").toUpperCase()&&e.get("groupId")!==b){c=!1;break}}return c},_checkNameCharacter:function(a,b){var c=!0;""===a&&"account"===b||(-1==a.search(n)&&""!==a?c=!1:""==a&&(c=!1));
return c},_generateNewGroupList:function(){for(var a=[],b=0;b<this.groupListModels.models.length;b++){var c=this.groupListModels.models[b];c.get("new")&&a.push({groupName:c.get("groupName"),acctList:c.get("accountList")})}return a},_generateDeleteGroupList:function(){for(var a=[],b=0;b<this.groupListModels.models.length;b++){var c=this.groupListModels.models[b];c.get("delete")&&a.push({groupId:c.get("groupId"),groupName:c.get("originGroupName")})}return a},_generateUpdatedGroupList:function(){for(var a=
[],b=0;b<this.groupListModels.models.length;b++){var c=this.groupListModels.models[b];if(c.get("validated"))c.get("update")&&(!c.get("new")&&!c.get("delete"))&&a.push({groupId:c.get("groupId"),groupName:c.get("groupName")});else return"VALIDATION_FAIL"}return a},_generateUpdatedAcctList:function(){for(var a=[],b=0;b<this.accountListModels.models.length;b++){var c=this.accountListModels.models[b];if(!c.get("validated"))return"VALIDATION_FAIL";if(c.get("switchHide")||c.get("switchGroup")||c.get("update")){var d=
{accountName:this.formateAcctName(c.get("acctName")),accountNumber:c.get("acctNum"),hideType:c.get("hideType"),accountType:c.get("acctType"),hidden:c.getHide(),accountGroupId:c.getGroupIdToSave()};c.get("fullViewAccount")&&(d.fvAccountId=c.get("siteId"));a.push(d)}}return a},formateAcctName:function(a){if(40<5*(a.match(/\u00a9|\u00ae/g)||[]).length+a.length)a=-1<a.indexOf("\u00a9")||-1<a.indexOf("\u00ae")?this.formateAcctName(a.substring(0,a.length-1)):a.substring(0,40);return a},closeEditPopup:function(){this.$el.ModalPopup("close");
this.$(".js-account-edit-modal-content").empty()},destroy:function(){this.undelegateEvents();this.unbind()},enterToSave:function(b){13===b.keyCode&&(a(b.currentTarget).trigger("blur"),this.$(".account-selector-edit--save").trigger("click"))},hideAllFV:function(){var b=this;a("#account-selector-modal--hide-fv-account").is(":checked")?a(".full-view-account").attr("checked",!0):a(".full-view-account").attr("checked",!1);a(".full-view-account").each(function(){var c=a(this).attr("data-acctnum"),d=a(this).is(":checked");
b.accountListModels.get(c).setHideAttr(d)})}})});define("tasks/digital-currency-account-task",["tasks/base-task"],function(a){var b={};b.url=envMap.DIGITAL_APP_URL+"digitalcurrency/coinbase/accounts";b.type="GET";b.isNotCancelable=!0;b.crossDomain=!0;return a.extend(b)});define("text!templates/digital-currency-account.html",[],function(){return'\n<div class="account-selector--group-container account-selector--outside-accounts-container js-group\n      <% if (accounts.length === 1) { %> singleaccount <% } %>"\ndata-group-id="DC" data-group-total="<%= native_balance_total.text %>">\n    <div class="icon--plus-minus expanded" role="link" tabindex="0"></div>\n    <div class="account-selector--group-header clearfix js-group-header" tabindex="0">\n\t\t<span class="off-screen">Show only </span>\n\t\t<span class="account-selector--group-header-title js-group-name" data-pii="true">Non-Fidelity Digital Currency</span>\n        <% if (accounts.length > 1) { %>\n            <span class="account-selector--header-total js-group-total <%= privacyToggleClass %>"> <%= native_balance_total.text %></span>\n        <% } %>\n    </div>\n    <% for (var i = 0; i < accounts.length; i++) {\n        var account = accounts[i]; %>\n        \n        <div class="account-selector--tab account-selector--tab-multiple-accounts clearfix js-account js-fullview-account acct"\n        data-acct-name="<%= account.name %>" data-acct-balance="<%= account.native_balance.amount %>" data-oltx-type="26" data-acct-id="<%= account.id %>" data-full-view-siteid="<%= account.id %>" tabindex="0">\n            \n            <div class="account-selector--tab-left">\n                <span class="account-selector--tab-row account-selector--account-name" data-pii="true"><%= account.name %></span>\n                <span class="off-screen"> </span>\n                <span class="account-selector--tab-row account-selector--account-number" data-pii="true"></span>\n            </div>\n\n            <div class="account-selector--tab-right">\n                <span class="account-selector--tab-row account-selector--account-balance js-acct-balance <%= privacyToggleClass %>">\n                    <%= account.native_balance.text %>\n                </span>\n                <span class="account-selector--tab-row account-selector--attribution js-acct-balance <%= privacyToggleClass %>">\n                    <%= account.balance.text %>\n                </span>\n                <span class="off-screen"> </span>\n                <span class="account-selector--tab-row account-selector--attribution <%= privacyToggleClass %> js-asOfTime">\n                    AS OF <%= as_of_date %>\n                    <span class="account-selector--attribution-time">\n                        <%= as_of_time %>\n                    </span>\n                </span>\n            </div>\n\n        </div>\n    <% } %>\n\t\n</div>'});
define("text!templates/coinbase-success-indicator.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-large coinbase-indicator__popup">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="coinbase-indicator__header">Your Coinbase account was linked successfully.</div>\n\t<div class="coinbase-indicator__body">\n        <div class="coinbase-indicator-message">\n            Congratulations! Your Coinbase account was linked successfully! You\'ll now be able to view your Coinbase balance information on Fidelity.com.\n        </div>\n    </div>\n\t<div class="coinbase-indicator__ctrls">\n\t\t<button class="button-component button--secondary base-popup--close-button-modal coinbase-indicator__ok">OK</button>\n\t</div>\n</div>'});
define("text!templates/coinbase-revoke-popup.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-large coinbase-revoke__popup">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="coinbase-revoke__header">Your Coinbase account is no longer linked.</div>\n\t<div class="coinbase-revoke__body">\n        <div class="coinbase-revoke-message">The token for your Coinbase account is no longer valid. Please use the \u201cAdd Non-Fidelity Accounts\u201d link in the account selector to link your Coinbase account again.\n        </div>\n    </div>\n\t<div class="coinbase-revoke__ctrls">\n\t\t<button class="button-component button--secondary base-popup--close-button-modal coinbase-revoke__ok">OK</button>\n\t</div>\n</div>'});
define("views/portfolio-nav-view","jquery require views/composite-view views/account-select-view views/account-select-ngapp-view views/account-selector-edit-view util/constants util/eventhub-backbone util/formats models/introtour-queue-model models/account-context-model tasks/digital-currency-account-task text!../templates/digital-currency-account.html text!../templates/coinbase-success-indicator.html text!../templates/coinbase-revoke-popup.html".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m,n,r){return g.extend({events:{"click .action_bar .action-edit":"editAcct"},
initialize:function(){g.prototype.initialize.apply(this,arguments);this.accountSelectView=(new c({el:this.$(".account-selector--accounts-wrapper")})).render();toggleMap.nodeAccountSelectorFeature&&l.hasFiliAcctsOnly()&&(new e).render();this.loadDigitalCurrencyAccount(!1);f.unsubscribeEvent({subject:"DIGITAL_ACCOUNT_LOAD_EVENT"});f.subscribeEvent("DIGITAL_ACCOUNT_LOAD_EVENT",_.bind(this.loadDigitalCurrencyAccount,this));f.subscribeEvent("CUSTOMIZE_ACCOUNTS",_.bind(this.preEditAcct,this));f.subscribeEvent("ASOFTIME_UPDATED",
_.bind(this.updateAsOfTime,this));window.fang&&(fang.EventBus.subscribe("UPDATE_ACCOUNTS",this.updateAccountBalances.bind(this)),fang.EventBus.subscribe("UPDATE_ASOFTIME",this.updateAsOfTime.bind(this)));var a=b("app").getInstance().footNote;0<l.getFullViewAccounts().length?a.$(".legal-footer--full-view-footnote").show():a.$(".legal-footer--full-view-footnote").hide();0<this.$(".data-account-total-balance[data-display-balance-footnote-for-fv=true]").length?a.$(".legal-footer--full-view-balance-footnote").show():
a.$(".legal-footer--full-view-balance-footnote").hide()},updateAccountBalances:function(a){console.log("received update account event");l.updateAccountBalances(a)},updateAsOfTime:function(a){console.log("received update as of time event");a&&this.$(".js-portfolio-asOfTime").text(a)},preEditAcct:function(a){if(a&&!0==a.init){var b=this;k.addIntroTourObjQueue(function(){b.editAcct(a)},".js-account-edit-modal")}else this.editAcct(a)},editAcct:function(b){this.accountEditView&&(this.accountEditView.destroy(),
this.accountEditView=null);a(".port-content").addClass("reveal");a(".base-popup.js-account-edit-modal").ModalPopup();this.accountEditView=(new d({el:a(".base-popup.js-account-edit-modal"),init:b&&!0==b.init})).render();a(".nextgen-modal-container")&&(a(".base-popup.js-account-edit-modal").css("position","fixed"),a(".base-popup.js-account-edit-modal").insertAfter(".nextgen-modal-container"));a(document).trigger(this.constants.EVENTS.REVEAL_ACCOUNT_SELECTOR,[!0])},loadDigitalCurrencyAccount:function(c){window.fullviewHideInd||
(window.coinbaseEntitledInd||c)&&(new p({onError:function(b){550<=b.status&&a(".fullview-refresh-status-error").show();401===b.status&&(b=a(_.template(r)()),a(b).appendTo(a("body")),a(b).ModalPopup().ModalPopup("open"))},onSuccess:function(d){d=JSON.parse(d);if(!d.error&&d.accounts&&0!=d.accounts.length){if(c){var e=a(_.template(n)());a(e).appendTo(a("body"));a(e).ModalPopup().ModalPopup("open")}d.privacyToggleClass="";!0===a(".js-portfolio").data("performance-hidden")&&(d.privacyToggleClass="display-none");
var e=_.template(m),h=d.native_balance_total.amount,g=a(".js-portfolio").data("total-balance"),g=parseFloat(g.replace(/[^0-9\.]+/g,"")),g=g+h,h=a(".js-portfolio-balance").html(),h=j.formatPrice({price:Math.abs(g),prefix:"$",digits:2,addCommas:!0})+h.slice(h.indexOf("<sup>"));d=e(d);a(d).insertAfter(a(".account-selector--group-container").last());a(".js-portfolio-balance").html(h);l.buildAccountInfo(a(".account-selector"));f.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED");if(!0===oceShipitToggle){var k=
b("util/eventhub-backbone");a(".account-selector--group-container > .icon--plus-minus").off("click keypress touchstart").on("click keypress touchstart",function(){a(this).closest(".account-selector--group-container").toggleClass("collapsed");1===a(this).closest(".account-selector--group-container").find(".account-selector--tab").length&&a(this).closest(".account-selector--group-container").toggleClass("singleaccount");var b=a(".account-selector--group-container").length,c=a(".account-selector--group-container.collapsed").length;
b===c?a(".account-selector--expand-collapse").addClass("allcollapsed").find("span").text("Expand"):0===c&&a(".account-selector--expand-collapse").removeClass("allcollapsed").find("span").text("Collapse");k.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")});a(".account-selector--expand-collapse").off("click keypress").on("click keypress",function(){a(this).toggleClass("allcollapsed");a(this).hasClass("allcollapsed")?(a(".account-selector--group-container").addClass("collapsed"),a(this).find("span").text("Expand"),
a(".account-selector--group-container").each(function(){1===a(this).find(".account-selector--tab").length&&a(this).removeClass("singleaccount")})):(a(".account-selector--group-container").each(function(){1===a(this).find(".account-selector--tab").length&&a(this).addClass("singleaccount")}),a(".account-selector--group-container").removeClass("collapsed"),a(this).find("span").text("Collapse"),a('.account-selector--tab:not(".account-selector--error-tab, .account-selector--tab-all")').slideDown());k.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")});
!0!==oceShipitToggle&&(a(".account-selector--group-container .icon--plus-minus").remove(),a(".account-selector--header-total").css("margin-right","0"))}}},onComplete:function(){f.publishEvent("DIGITAL_ACCOUNT_LOAD_FINISHED_EVENT")}})).run()}})});
define("views/watchlist-nav-view",["jquery","views/composite-view"],function(a,b){return b.extend({events:{"click .js-watchlist-simple":"redirectToClassic"},initialize:function(){b.prototype.initialize.apply(this,arguments)},redirectToClassic:function(){window.location.href=envMap.CLASSIC_WATCHLIST_URL}})});
(function(){function a(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(b,d,e){if(f.isSupported(d.version))b.innerHTML=f.getHTML(d,e);else if(d.expressInstall&&f.isSupported([6,65]))b.innerHTML=f.getHTML(a(d,{src:d.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(b.innerHTML.replace(/\s/g,"")||(b.innerHTML="<h2>Flash version "+d.version+" or greater is required</h2><h3>"+(0<j[0]?"Your version is "+j:"You have no flash plugin installed")+
"</h3>"+("A"==b.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+c+"'>here</a></p>"),"A"==b.tagName&&(b.onclick=function(){location.href=c})),d.onFail){var h=d.onFail.call(this);"string"==typeof h&&(b.innerHTML=h)}g&&(window[d.id]=document.getElementById(d.id));a(this,{getRoot:function(){return b},getOptions:function(){return d},getConf:function(){return e},getApi:function(){return b.firstChild}})}var g=document.all,c="http://www.adobe.com/go/getflashplayer",
e="function"==typeof jQuery,d=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,h={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}});window.flashembed=function(c,d,e){"string"==typeof c&&(c=document.getElementById(c.replace("#","")));
if(c)return"string"==typeof d&&(d={src:d}),new b(c,a(a({},h),d),e)};var f=a(window.flashembed,{conf:h,getVersion:function(){var a,b;try{b=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(c){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"))&&a.GetVariable("$version")}catch(e){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"))&&a.GetVariable("$version")}catch(f){}}}return(b=d.exec(b))?[b[1],b[3]]:[0,0]},asString:function(a){if(null===a||void 0===a)return null;
var b=typeof a;"object"==b&&a.push&&(b="array");switch(b){case "string":return a=a.replace(/(["\\])/g,"\\$1"),a=a.replace(/^\s?(\d+\.?\d+)%/,"$1pct"),'"'+a+'"';case "array":var b=[],c;for(c in a)a.hasOwnProperty(c)&&(b[c]=f.asString(a[c]));return"["+b.join(",")+"]";case "function":return'"function()"';case "object":var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push('"'+d+'":'+f.asString(a[d]));return"{"+b.join(",")+"}"}return String(a).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(b,c){b=
a({},b);var d='<object width="'+b.width+'" height="'+b.height+'" id="'+b.id+'" name="'+b.id+'"';b.cachebusting&&(b.src+=(-1!=b.src.indexOf("?")?"&":"?")+Math.random());d+=b.w3c||!g?' data="'+b.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';d+=">";if(b.w3c||g)d+='<param name="movie" value="'+b.src+'" />';b.width=b.height=b.id=b.w3c=b.src=null;b.onFail=b.version=b.expressInstall=null;for(var e in b)b[e]&&(d+='<param name="'+e+'" value="'+b[e]+'" />');
b="";if(c){for(var j in c)c[j]&&(e=c[j],b+=j+"="+(/function|object/.test(typeof e)?f.asString(e):e)+"&");b=b.slice(0,-1);d+='<param name="flashvars" value=\''+b+"' />"}return d+"</object>"},isSupported:function(a){return j[0]>a[0]||j[0]==a[0]&&j[1]>=a[1]}}),j=f.getVersion();e&&(jQuery.tools=jQuery.tools||{version:"1.2.5"},jQuery.tools.flashembed={conf:h},jQuery.fn.flashembed=function(a,b){return this.each(function(){$(this).data("flashembed",flashembed(this,a,b))})})})();
(function(a){function b(a){if(a){var b=c.contentWindow.document;b.open().close();b.location.hash=a}}var g,c,e,d;a.tools=a.tools||{version:"1.2.5"};a.tools.history={init:function(h){d||(a.browser.msie&&"8">a.browser.version?c||(c=a("<iframe/>").attr("src","javascript:false;").hide().get(0),a("body").append(c),setInterval(function(){var b=c.contentWindow.document,b=b.location.hash;g!==b&&a.event.trigger("hash",b)},100),b(location.hash||"#")):setInterval(function(){var b=location.hash;b!==g&&a.event.trigger("hash",
b)},100),e=!e?h:e.add(h),h.click(function(d){var e=a(this).attr("href");c&&b(e);if("#"!=e.slice(0,1))return location.href="#"+e,d.preventDefault()}),d=!0)}};a(window).bind("hash",function(b,c){c?e.filter(function(){var b=a(this).attr("href");return b==c||b==c.replace("#","")}).trigger("history",[c]):e.eq(0).trigger("history",[c]);g=c});a.fn.history=function(b){a.tools.history.init(this);return this.bind("history",b)}})(jQuery);
(function(a){function b(){if(a.browser.msie){var b=a(document).height(),c=a(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>b-c?c:b]}return[a(document).width(),a(document).height()]}function g(b){if(b)return b.call(a.mask)}a.tools=a.tools||{version:"1.2.5"};var c;c=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};
var e,d,h,f,j;a.mask={load:function(k,l){if(h)return this;"string"==typeof k&&(k={color:k});k=k||f;f=k=a.extend(a.extend({},c.conf),k);e=a("#"+k.maskId);e.length||(e=a("<div/>").attr("id",k.maskId),a("body").append(e));var p=b();e.css({position:"absolute",top:0,left:0,width:p[0],height:p[1],display:"none",opacity:k.startOpacity,zIndex:k.zIndex});k.color&&e.css("backgroundColor",k.color);if(!1===g(k.onBeforeLoad))return this;k.closeOnEsc&&a(document).bind("keydown.mask",function(b){27==b.keyCode&&
a.mask.close(b)});k.closeOnClick&&e.bind("click.mask",function(b){a.mask.close(b)});a(window).bind("resize.mask",function(){a.mask.fit()});l&&l.length&&(j=l.eq(0).css("zIndex"),a.each(l,function(){var b=a(this);/relative|absolute|fixed/i.test(b.css("position"))||b.css("position","relative")}),d=l.css({zIndex:Math.max(k.zIndex+1,"auto"==j?0:j)}));e.css({display:"block"}).fadeTo(k.loadSpeed,k.opacity,function(){a.mask.fit();g(k.onLoad);h="full"});h=!0;return this},close:function(){if(h){if(!1===g(f.onBeforeClose))return this;
e.fadeOut(f.closeSpeed,function(){g(f.onClose);d&&d.css({zIndex:j});h=!1});a(document).unbind("keydown.mask");e.unbind("click.mask");a(window).unbind("resize.mask")}return this},fit:function(){if(h){var a=b();e.css({width:a[0],height:a[1]})}},getMask:function(){return e},isLoaded:function(a){return a?"full"==h:h},getConf:function(){return f},getExposed:function(){return d}};a.fn.mask=function(b){a.mask.load(b);return this};a.fn.expose=function(b){a.mask.load(b,this);return this}})(jQuery);
(function(a){function b(b){switch(b.type){case "mousemove":return a.extend(b.data,{clientX:b.clientX,clientY:b.clientY,pageX:b.pageX,pageY:b.pageY});case "DOMMouseScroll":a.extend(b,b.data);b.delta=-b.detail/3;break;case "mousewheel":b.delta=b.wheelDelta/120}b.type="wheel";return a.event.handle.call(this,b,b.delta)}a.fn.mousewheel=function(a){return this[a?"bind":"trigger"]("wheel",a)};a.event.special.wheel={setup:function(){a.event.add(this,g,b,{})},teardown:function(){a.event.remove(this,g,b)}};
var g=!a.browser.mozilla?"mousewheel":"DOMMouseScroll"+("1.9">a.browser.version?" mousemove":"")})(jQuery);
(function(a){function b(b,c,h){var f=this,j=b.add(this),k=b.find(h.tabs),l=c.jquery?c:b.children(c),p;k.length||(k=b.children());l.length||(l=b.parent().find(c));l.length||(l=a(c));a.extend(this,{click:function(b,c){var d=k.eq(b);"string"==typeof b&&b.replace("#","")&&(d=k.filter("[href*="+b.replace("#","")+"]"),b=Math.max(k.index(d),0));if(h.rotate){var e=k.length-1;if(0>b)return f.click(e,c);if(b>e)return f.click(0,c)}if(!d.length){if(0<=p)return f;b=h.initialIndex;d=k.eq(b)}if(b===p)return f;c=
c||a.Event();c.type="onBeforeClick";j.trigger(c,[b]);if(!c.isDefaultPrevented())return g[h.effect].call(f,b,function(){c.type="onClick";j.trigger(c,[b])}),p=b,k.removeClass(h.current),d.addClass(h.current),f},getConf:function(){return h},getTabs:function(){return k},getPanes:function(){return l},getCurrentPane:function(){return l.eq(p)},getCurrentTab:function(){return k.eq(p)},getIndex:function(){return p},next:function(){return f.click(p+1)},prev:function(){return f.click(p-1)},destroy:function(){k.unbind(h.event).removeClass(h.current);
l.find("a[href^=#]").unbind("click.T");return f}});a.each(["onBeforeClick","onClick"],function(b,c){a.isFunction(h[c])&&a(f).bind(c,h[c]);f[c]=function(b){b&&a(f).bind(c,b);return f}});h.history&&a.fn.history&&(a.tools.history.init(k),h.event="history");k.each(function(b){a(this).bind(h.event,function(a){f.click(b,a);return a.preventDefault()})});l.find("a[href^=#]").bind("click.T",function(b){f.click(a(this).attr("href"),b)});location.hash&&"a"==h.tabs&&b.find("[href="+location.hash+"]").length?
f.click(location.hash):(0===h.initialIndex||0<h.initialIndex)&&f.click(h.initialIndex)}a.tools=a.tools||{version:"1.2.5"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(a,b){g[a]=b}};var g={"default":function(a,b){this.getPanes().hide().eq(a).show();b.call()},fade:function(a,b){var c=this.getConf(),f=c.fadeOutSpeed,j=this.getPanes();f?j.fadeOut(f):j.hide();j.eq(a).fadeIn(c.fadeInSpeed,
b)},slide:function(a,b){this.getPanes().slideUp(200);this.getPanes().eq(a).slideDown(400,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}},c;a.tools.tabs.addEffect("horizontal",function(b,d){c||(c=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(b).animate({width:c},function(){a(this).show();d.call()})});a.fn.tabs=function(c,d){var h=this.data("tabs");h&&(h.destroy(),this.removeData("tabs"));
a.isFunction(d)&&(d={onBeforeClick:d});d=a.extend({},a.tools.tabs.conf,d);this.each(function(){h=new b(a(this),c,d);a(this).data("tabs",h)});return d.api?h:this}})(jQuery);
(function(a){function b(b,e){function d(d){var e=a(d);return 2>e.length?e:b.parent().find(d)}var h=this,f=b.add(this),j=b.data("tabs"),g,l=!0,p=d(e.next).click(function(){j.next()}),m=d(e.prev).click(function(){j.prev()});a.extend(h,{getTabs:function(){return j},getConf:function(){return e},play:function(){if(g)return h;var b=a.Event("onBeforePlay");f.trigger(b);if(b.isDefaultPrevented())return h;g=setInterval(j.next,e.interval);l=!1;f.trigger("onPlay");return h},pause:function(){if(!g)return h;var b=
a.Event("onBeforePause");f.trigger(b);if(b.isDefaultPrevented())return h;g=clearInterval(g);f.trigger("onPause");return h},stop:function(){h.pause();l=!0}});a.each(["onBeforePlay","onPlay","onBeforePause","onPause"],function(b,c){a.isFunction(e[c])&&a(h).bind(c,e[c]);h[c]=function(b){return a(h).bind(c,b)}});e.autopause&&j.getTabs().add(p).add(m).add(j.getPanes()).hover(h.pause,function(){l||h.play()});e.autoplay&&h.play();e.clickable&&j.getPanes().click(function(){j.next()});if(!j.getConf().rotate){var n=
e.disabledClass;j.getIndex()||m.addClass(n);j.onBeforeClick(function(a,b){m.toggleClass(n,!b);p.toggleClass(n,b==j.getTabs().length-1)})}}var g;g=a.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3E3,clickable:!0,api:!1}};a.fn.slideshow=function(c){var e=this.data("slideshow");if(e)return e;c=a.extend({},g.conf,c);this.each(function(){e=new b(a(this),c);a(this).data("slideshow",e)});return c.api?e:this}})(jQuery);
(function(a){function b(b,c,h){var f=h.relative?b.position().top:b.offset().top,j=h.relative?b.position().left:b.offset().left,g=h.position[0],f=f-(c.outerHeight()-h.offset[0]),j=j+(b.outerWidth()+h.offset[1]);/iPad/i.test(navigator.userAgent)&&(f-=a(window).scrollTop());var l=c.outerHeight()+b.outerHeight();"center"==g&&(f+=l/2);"bottom"==g&&(f+=l);g=h.position[1];b=c.outerWidth()+b.outerWidth();"center"==g&&(j-=b/2);"left"==g&&(j-=b);return{top:f,left:j}}function g(e,d){var h=this,f=e.add(h),j,
g=0,l=0,p=e.attr("title"),m=e.attr("data-tooltip"),n=c[d.effect],r,s=e.is(":input"),v=s&&e.is(":checkbox, :radio, select, :button, :submit"),A=e.attr("type"),w=d.events[A]||d.events[s?v?"widget":"input":"def"];if(!n)throw'Nonexistent effect "'+d.effect+'"';w=w.split(/,\s*/);if(2!=w.length)throw"Tooltip: bad events configuration for "+A;e.bind(w[0],function(a){clearTimeout(g);d.predelay?l=setTimeout(function(){h.show(a)},d.predelay):h.show(a)}).bind(w[1],function(a){clearTimeout(l);d.delay?g=setTimeout(function(){h.hide(a)},
d.delay):h.hide(a)});p&&d.cancelDefault&&(e.removeAttr("title"),e.data("title",p));a.extend(h,{show:function(c){if(!j&&(m?j=a(m):d.tip?j=a(d.tip).eq(0):p?j=a(d.layout).addClass(d.tipClass).appendTo(document.body).hide().append(p):(j=e.next(),j.length||(j=e.parent().next())),!j.length))throw"Cannot find tooltip for "+e;if(h.isShown())return h;j.stop(!0,!0);var s=b(e,j,d);d.tip&&j.html(e.data("title"));c=c||a.Event();c.type="onBeforeShow";f.trigger(c,[s]);if(c.isDefaultPrevented())return h;s=b(e,j,
d);j.css({position:"absolute",top:s.top,left:s.left});r=!0;n[0].call(h,function(){c.type="onShow";r="full";f.trigger(c)});s=d.events.tooltip.split(/,\s*/);j.data("__set")||(j.bind(s[0],function(){clearTimeout(g);clearTimeout(l)}),s[1]&&!e.is("input:not(:checkbox, :radio), textarea")&&j.bind(s[1],function(a){a.relatedTarget!=e[0]&&e.trigger(w[1].split(" ")[0])}),j.data("__set",!0));return h},hide:function(b){if(!j||!h.isShown())return h;b=b||a.Event();b.type="onBeforeHide";f.trigger(b);if(!b.isDefaultPrevented())return r=
!1,c[d.effect][1].call(h,function(){b.type="onHide";f.trigger(b)}),h},isShown:function(a){return a?"full"==r:r},getConf:function(){return d},getTip:function(){return j},getTrigger:function(){return e}});a.each(["onHide","onBeforeShow","onShow","onBeforeHide"],function(b,c){a.isFunction(d[c])&&a(h).bind(c,d[c]);h[c]=function(b){b&&a(h).bind(c,b);return h}})}a.tools=a.tools||{version:"1.2.5"};a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top",
"center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,b,h){c[a]=[b,h]}};var c={toggle:[function(a){var b=this.getConf(),c=this.getTip(),b=b.opacity;1>b&&c.css({opacity:b});c.show();a.call()},function(a){this.getTip().hide();a.call()}],fade:[function(a){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,
a)},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a)}]};a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b);"string"==typeof b.position&&(b.position=b.position.split(/,?\s/));this.each(function(){c=new g(a(this),b);a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);
(function(a){var b=a.tools.tooltip;a.extend(b.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!a.browser.msie});var g={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.addEffect("slide",function(a){var b=this.getConf(),d=this.getTip(),h=b.slideFade?{opacity:b.opacity}:{},f=g[b.direction]||g.up;h[f[1]]=f[0]+"="+b.slideOffset;b.slideFade&&d.css({opacity:0});d.show().animate(h,b.slideInSpeed,a)},function(b){var e=this.getConf(),d=e.slideOffset,
h=e.slideFade?{opacity:0}:{},f=g[e.direction]||g.up,j=""+f[0];e.bounce&&(j="+"==j?"-":"+");h[f[1]]=j+"="+d;this.getTip().animate(h,e.slideOutSpeed,function(){a(this).hide();b.call()})})})(jQuery);
(function(a){var b=a.tools.tooltip;b.dynamic={conf:{classNames:"top right bottom left"}};a.fn.dynamic=function(g){"number"==typeof g&&(g={speed:g});g=a.extend({},b.dynamic.conf,g);var c=g.classNames.split(/\s/),e;this.each(function(){var b=a(this).tooltip().onBeforeShow(function(b,d){b=this.getTip();var j=this.getConf();e||(e=[j.position[0],j.position[1],j.offset[0],j.offset[1],a.extend({},j)]);a.extend(j,e[4]);j.position=[e[0],e[1]];j.offset=[e[2],e[3]];b.css({visibility:"hidden",position:"absolute",
top:d.top,left:d.left}).show();var k=b,l=a(window),p=l.width()+l.scrollLeft(),m=l.height()+l.scrollTop();d=[k.offset().top<=l.scrollTop(),p<=k.offset().left+k.width(),m<=k.offset().top+k.height(),l.scrollLeft()>=k.offset().left];a:{for(k=d.length;k--;)if(d[k]){k=!1;break a}k=!0}if(!k){d[2]&&(a.extend(j,g.top),j.position[0]="top",b.addClass(c[0]));d[3]&&(a.extend(j,g.right),j.position[1]="right",b.addClass(c[1]));d[0]&&(a.extend(j,g.bottom),j.position[0]="bottom",b.addClass(c[2]));d[1]&&(a.extend(j,
g.left),j.position[1]="left",b.addClass(c[3]));if(d[0]||d[2])j.offset[0]*=-1;if(d[1]||d[3])j.offset[1]*=-1}b.css({visibility:"visible"}).hide()});b.onBeforeShow(function(){var a=this.getConf();this.getTip();setTimeout(function(){a.position=[e[0],e[1]];a.offset=[e[2],e[3]]},0)});b.onHide(function(){this.getTip().removeClass(g.classNames)});ret=b});return g.api?ret:this}})(jQuery);
(function(a){function b(b,c){var h=a(c);return 2>h.length?h:b.parent().find(c)}function g(e,d){var h=this,f=e.add(h),j=e.children(),g=0,l=d.vertical;c||(c=h);1<j.length&&(j=a(d.items,e));a.extend(h,{getConf:function(){return d},getIndex:function(){return g},getSize:function(){return h.getItems().size()},getNaviButtons:function(){return n.add(r)},getRoot:function(){return e},getItemWrap:function(){return j},getItems:function(){return j.children(d.item).not("."+d.clonedClass)},move:function(a,b){return h.seekTo(g+
a,b)},next:function(a){return h.move(1,a)},prev:function(a){return h.move(-1,a)},begin:function(a){return h.seekTo(0,a)},end:function(a){return h.seekTo(h.getSize()-1,a)},focus:function(){return c=h},addItem:function(b){b=a(b);d.circular?(j.children("."+d.clonedClass+":last").before(b),j.children("."+d.clonedClass+":first").replaceWith(b.clone().addClass(d.clonedClass))):j.append(b);f.trigger("onAddItem",[b]);return h},seekTo:function(b,e,n){b.jquery||(b*=1);if(d.circular&&0===b&&-1==g&&0!==e||!d.circular&&
0>b||b>h.getSize()||-1>b)return h;var m=b;b.jquery?b=h.getItems().index(b):m=h.getItems().eq(b);var p=a.Event("onBeforeSeek");if(!n&&(f.trigger(p,[b,e]),p.isDefaultPrevented()||!m.length))return h;m=l?{top:-m.position().top}:{left:-m.position().left};g=b;c=h;void 0===e&&(e=d.speed);j.animate(m,e,d.easing,n||function(){f.trigger("onSeek",[b])});return h}});a.each(["onBeforeSeek","onSeek","onAddItem"],function(b,c){a.isFunction(d[c])&&a(h).bind(c,d[c]);h[c]=function(b){b&&a(h).bind(c,b);return h}});
if(d.circular){var p=h.getItems().slice(-1).clone().prependTo(j),m=h.getItems().eq(1).clone().appendTo(j);p.add(m).addClass(d.clonedClass);h.onBeforeSeek(function(a,b,c){if(!a.isDefaultPrevented()){if(-1==b)return h.seekTo(p,c,function(){h.end(0)}),a.preventDefault();b==h.getSize()&&h.seekTo(m,c,function(){h.begin(0)})}});h.seekTo(0,0,function(){})}var n=b(e,d.prev).click(function(){h.prev()}),r=b(e,d.next).click(function(){h.next()});!d.circular&&1<h.getSize()&&(h.onBeforeSeek(function(a,b){setTimeout(function(){a.isDefaultPrevented()||
(n.toggleClass(d.disabledClass,0>=b),r.toggleClass(d.disabledClass,b>=h.getSize()-1))},1)}),d.initialIndex||n.addClass(d.disabledClass));d.mousewheel&&a.fn.mousewheel&&e.mousewheel(function(a,b){if(d.mousewheel)return h.move(0>b?1:-1,d.wheelSpeed||50),!1});if(d.touch){var s,v;j[0].ontouchstart=function(a){a=a.touches[0];s=a.clientX;v=a.clientY};j[0].ontouchmove=function(a){if(1==a.touches.length&&!j.is(":animated")){var b=a.touches[0],c=s-b.clientX,b=v-b.clientY;h[l&&0<b||!l&&0<c?"next":"prev"]();
a.preventDefault()}}}d.keyboard&&a(document).bind("keydown.scrollable",function(b){if(d.keyboard&&(!b.altKey&&!b.ctrlKey&&!a(b.target).is(":input"))&&!("static"!=d.keyboard&&c!=h)){var e=b.keyCode;if(l&&(38==e||40==e))return h.move(38==e?-1:1),b.preventDefault();if(!l&&(37==e||39==e))return h.move(37==e?-1:1),b.preventDefault()}});d.initialIndex&&h.seekTo(d.initialIndex,0,function(){})}a.tools=a.tools||{version:"1.2.5"};a.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",
disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var c;a.fn.scrollable=function(b){var c=this.data("scrollable");if(c)return c;b=a.extend({},a.tools.scrollable.conf,b);this.each(function(){c=new g(a(this),b);a(this).data("scrollable",c)});return b.api?c:this}})(jQuery);
(function(a){var b=a.tools.scrollable;b.autoscroll={conf:{autoplay:!0,interval:3E3,autopause:!0}};a.fn.autoscroll=function(g){"number"==typeof g&&(g={interval:g});var c=a.extend({},b.autoscroll.conf,g),e;this.each(function(){var b=a(this).data("scrollable");b&&(e=b);var h;b.play=function(){h||(h=setInterval(function(){b.next()},c.interval))};b.pause=function(){h=clearInterval(h)};b.stop=function(){b.pause()};c.autopause&&b.getRoot().add(b.getNaviButtons()).hover(b.pause,b.play);c.autoplay&&b.play()});
return c.api?e:this}})(jQuery);
(function(a){var b=a.tools.scrollable;b.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}};a.fn.navigator=function(g){"string"==typeof g&&(g={navi:g});g=a.extend({},b.navigator.conf,g);var c;this.each(function(){function b(a,c,d){j.seekTo(c);if(s)location.hash&&(location.hash=a.attr("href").replace("#",""));else return d.preventDefault()}function d(){return m.find(g.naviItem||"> *")}function h(c){var d=a("<"+(g.naviItem||"a")+"/>").click(function(d){b(a(this),
c,d)}).attr("href","#"+c);0===c&&d.addClass(r);g.indexed&&d.text(c+1);g.idPrefix&&d.attr("id",g.idPrefix+c);return d.appendTo(m)}function f(a,b){a=d().eq(b.replace("#",""));a.length||(a=d().filter("[href="+b+"]"));a.click()}var j=a(this).data("scrollable"),k;if(g.navi.jquery)k=g.navi;else{k=j.getRoot();var l=g.navi,p=a(l);k=2>p.length?p:k.parent().find(l)}var m=k,n=j.getNaviButtons(),r=g.activeClass,s=g.history&&a.fn.history;j&&(c=j);j.getNaviButtons=function(){return n.add(m)};d().length?d().each(function(c){a(this).click(function(d){b(a(this),
c,d)})}):a.each(j.getItems(),function(a){h(a)});j.onBeforeSeek(function(a,b){setTimeout(function(){if(!a.isDefaultPrevented()){var c=d().eq(b);!a.isDefaultPrevented()&&c.length&&d().removeClass(r).eq(b).addClass(r)}},1)});j.onAddItem(function(a,b){b=h(j.getItems().index(b));s&&b.history(f)});s&&d().history(f)});return g.api?c:this}})(jQuery);
(function(a){function b(b,d){var h=this,f=b.add(h),j=a(window),k,l,p,m=a.tools.expose&&(d.mask||d.expose),n=Math.random().toString().slice(10);m&&("string"==typeof m&&(m={color:m}),m.closeOnClick=m.closeOnEsc=!1);var r=d.target||b.attr("rel");l=r?a(r):b;if(!l.length)throw"Could not find Overlay: "+r;b&&-1==b.index(l)&&b.click(function(a){h.load(a);return a.preventDefault()});a.extend(h,{load:function(b){if(h.isOpened())return h;var e=c[d.effect];if(!e)throw'Overlay: cannot find effect : "'+d.effect+
'"';d.oneInstance&&a.each(g,function(){this.close(b)});b=b||a.Event();b.type="onBeforeLoad";f.trigger(b);if(b.isDefaultPrevented())return h;p=!0;m&&a(l).expose(m);var k=d.top,r=d.left,z=l.outerWidth({margin:!0}),D=l.outerHeight({margin:!0});"string"==typeof k&&(k="center"==k?Math.max((j.height()-D)/2,0):parseInt(k,10)/100*j.height());"center"==r&&(r=Math.max((j.width()-z)/2,0));e[0].call(h,{top:k,left:r},function(){p&&(b.type="onLoad",f.trigger(b))});m&&d.closeOnClick&&a.mask.getMask().one("click",
h.close);d.closeOnClick&&a(document).bind("click."+n,function(b){a(b.target).parents(l).length||h.close(b)});d.closeOnEsc&&a(document).bind("keydown."+n,function(a){27==a.keyCode&&h.close(a)});return h},close:function(b){if(!h.isOpened())return h;b=b||a.Event();b.type="onBeforeClose";f.trigger(b);if(!b.isDefaultPrevented())return p=!1,c[d.effect][1].call(h,function(){b.type="onClose";f.trigger(b)}),a(document).unbind("click."+n).unbind("keydown."+n),m&&a.mask.close(),h},getOverlay:function(){return l},
getTrigger:function(){return b},getClosers:function(){return k},isOpened:function(){return p},getConf:function(){return d}});a.each(["onBeforeLoad","onStart","onLoad","onBeforeClose","onClose"],function(b,c){a.isFunction(d[c])&&a(h).bind(c,d[c]);h[c]=function(b){b&&a(h).bind(c,b);return h}});k=l.find(d.close||".close");!k.length&&!d.close&&(k=a('<a class="close"></a>'),l.prepend(k));k.click(function(a){h.close(a)});d.load&&h.load()}a.tools=a.tools||{version:"1.2.5"};a.tools.overlay={addEffect:function(a,
b,h){c[a]=[b,h]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!a.browser.msie||6<a.browser.version,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var g=[],c={};a.tools.overlay.addEffect("default",function(b,c){var h=this.getConf(),f=a(window);h.fixed||(b.top+=f.scrollTop(),b.left+=f.scrollLeft());b.position=h.fixed?"fixed":"absolute";this.getOverlay().css(b).fadeIn(h.speed,c)},function(a){this.getOverlay().fadeOut(this.getConf().closeSpeed,
a)});a.fn.overlay=function(c){var d=this.data("overlay");if(d)return d;a.isFunction(c)&&(c={onBeforeLoad:c});c=a.extend(!0,{},a.tools.overlay.conf,c);this.each(function(){d=new b(a(this),c);g.push(d);a(this).data("overlay",d)});return c.api?d:this}})(jQuery);
(function(a){function b(a){var b=a.offset();return{top:b.top+a.height()/2,left:b.left+a.width()/2}}var g=a.tools.overlay,c=a(window);a.extend(g.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});g.addEffect("apple",function(e,d){var h=this.getOverlay(),f=this.getConf(),j=this.getTrigger(),g=this,l=h.outerWidth({margin:!0}),p=h.data("img"),m=f.fixed?"fixed":"absolute";if(!p){p=h.css("backgroundImage");if(!p)throw"background-image CSS property not set for overlay";p=p.slice(p.indexOf("(")+
1,p.indexOf(")")).replace(/\"/g,"");h.css("backgroundImage","none");p=a('<img src="'+p+'"/>');p.css({border:0,display:"none"}).width(l);a("body").append(p);h.data("img",p)}var n=f.start.top||Math.round(c.height()/2),r=f.start.left||Math.round(c.width()/2);j&&(j=b(j),n=j.top,r=j.left);f.fixed?(n-=c.scrollTop(),r-=c.scrollLeft()):(e.top+=c.scrollTop(),e.left+=c.scrollLeft());p.css({position:"absolute",top:n,left:r,width:0,zIndex:f.zIndex}).show();e.position=m;h.css(e);p.animate({top:h.css("top"),left:h.css("left"),
width:l},f.speed,function(){h.css("zIndex",f.zIndex+1).fadeIn(f.fadeInSpeed,function(){g.isOpened()&&!a(this).index(h)?d.call():h.hide()})}).css("position",m)},function(e){var d=this.getOverlay().hide(),h=this.getConf(),f=this.getTrigger(),d=d.data("img"),j={top:h.start.top,left:h.start.left,width:0};f&&a.extend(j,b(f));h.fixed&&d.css({position:"absolute"}).animate({top:"+="+c.scrollTop(),left:"+="+c.scrollLeft()},0);d.animate(j,h.closeSpeed,e)})})(jQuery);
(function(a){function b(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a}function g(a,c,d){var e=a.getDate(),f=a.getDay(),j=a.getMonth();a=a.getFullYear();var h={d:e,dd:b(e),ddd:k[d].shortDays[f],dddd:k[d].days[f],m:j+1,mm:b(j+1),mmm:k[d].shortMonths[j],mmmm:k[d].months[j],yy:String(a).slice(2),yyyy:a};c=c.replace(l,function(a){return a in h?h[a]:a.slice(1,a.length-1)});return p.html(c).html()}function c(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()}
function e(a){if(a){if(a.constructor==Date)return a;if("string"==typeof a){var b=a.split("-");if(3==b.length)return new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10));if(!/^-?\d+$/.test(a))return;a=parseInt(a,10)}b=new Date;b.setDate(b.getDate()+a);return b}}function d(b,d){function f(c,d,e){N=c;J=c.getFullYear();O=c.getMonth();V=c.getDate();e=e||a.Event("api");e.type="change";R.trigger(e,[c]);e.isDefaultPrevented()||(b.val(g(c,d.format,d.lang)),b.data("date",c),p.hide(e))}function l(c){c.type=
"onShow";R.trigger(c);a(document).bind("keydown.d",function(c){if(c.ctrlKey)return!0;var d=c.keyCode;if(8==d)return b.val(""),p.hide(c);if(27==d)return p.hide(c);if(0<=a(j).index(d)){if(!W)return p.show(c),c.preventDefault();var e=a("#"+w.weeks+" a"),f=a("."+w.focus),h=e.index(f);f.removeClass(w.focus);if(74==d||40==d)h+=7;else if(75==d||38==d)h-=7;else if(76==d||39==d)h+=1;else if(72==d||37==d)h-=1;41<h?(p.addMonth(),f=a("#"+w.weeks+" a:eq("+(h-42)+")")):0>h?(p.addMonth(-1),f=a("#"+w.weeks+" a:eq("+
(h+42)+")")):f=e.eq(h);f.addClass(w.focus);return c.preventDefault()}if(34==d)return p.addMonth();if(33==d)return p.addMonth(-1);if(36==d)return p.today();13==d&&(a(c.target).is("select")||a("."+w.focus).click());return 0<=a([16,17,18,9]).index(d)});a(document).bind("click.d",function(c){var d=c.target;!a(d).parents("#"+w.root).length&&(d!=b[0]&&(!B||d!=B[0]))&&p.hide(c)})}var p=this,A=new Date,w=d.css,z=k[d.lang],D=a("#"+w.root),y=D.find("#"+w.title),B,I,S,J,O,V,N=b.attr("data-value")||d.value||
b.val(),P=b.attr("min")||d.min,U=b.attr("max")||d.max,W;0===P&&(P="0");N=e(N)||A;P=e(P||365*d.yearRange[0]);U=e(U||365*d.yearRange[1]);if(!z)throw"Dateinput: invalid language: "+d.lang;if("date"==b.attr("type")){var ca=a("<input/>");a.each("class disabled id maxlength name readonly required size style tabindex title value".split(" "),function(a,c){ca.attr(c,b.attr(c))});b.replaceWith(ca);b=ca}b.addClass(w.input);var R=b.add(p);if(!D.length){D=a("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",
w.root);D.children().eq(0).attr("id",w.head).end().eq(1).attr("id",w.body).children().eq(0).attr("id",w.days).end().eq(1).attr("id",w.weeks).end().end().end().find("a").eq(0).attr("id",w.prev).end().eq(1).attr("id",w.next);y=D.find("#"+w.head).find("div").attr("id",w.title);if(d.selectors){var Z=a("<select/>").attr("id",w.month),ea=a("<select/>").attr("id",w.year);y.html(Z.add(ea))}for(var la=D.find("#"+w.days),va=0;7>va;va++)la.append(a("<span/>").text(z.shortDays[(va+d.firstDay)%7]));a("body").append(D)}d.trigger&&
(B=a("<a/>").attr("href","#").addClass(w.trigger).click(function(a){p.show();return a.preventDefault()}).insertAfter(b));var H=D.find("#"+w.weeks),ea=D.find("#"+w.year),Z=D.find("#"+w.month);a.extend(p,{show:function(c){if(!b.attr("readonly")&&(!b.attr("disabled")&&!W)&&(c=c||a.Event(),c.type="onBeforeShow",R.trigger(c),!c.isDefaultPrevented())){a.each(h,function(){this.hide()});W=!0;Z.unbind("change").change(function(){p.setValue(ea.val(),a(this).val())});ea.unbind("change").change(function(){p.setValue(a(this).val(),
Z.val())});I=D.find("#"+w.prev).unbind("click").click(function(){I.hasClass(w.disabled)||p.addMonth(-1);return!1});S=D.find("#"+w.next).unbind("click").click(function(){S.hasClass(w.disabled)||p.addMonth();return!1});p.setValue(N);var e=b.offset();/iPad/i.test(navigator.userAgent)&&(e.top-=a(window).scrollTop());D.css({top:e.top+b.outerHeight({margins:!0})+d.offset[0],left:e.left+d.offset[1]});d.speed?D.show(d.speed,function(){l(c)}):(D.show(),l(c));return p}},setValue:function(b,e,j){var h=-1<=parseInt(e,
10)?new Date(parseInt(b,10),parseInt(e,10),parseInt(j||1,10)):b||N;h<P?h=P:h>U&&(h=U);b=h.getFullYear();e=h.getMonth();j=h.getDate();-1==e?(e=11,b--):12==e&&(e=0,b++);if(!W)return f(h,d),p;O=e;J=b;j=new Date(b,e,1-d.firstDay);j=j.getDay();var g=32-(new Date(b,e,32)).getDate(),k=32-(new Date(b,e-1,32)).getDate(),l;if(d.selectors){Z.empty();a.each(z.months,function(c,d){P<new Date(b,c+1,-1)&&U>new Date(b,c,0)&&Z.append(a("<option/>").html(d).attr("value",c))});ea.empty();for(var h=A.getFullYear(),m=
h+d.yearRange[0];m<h+d.yearRange[1];m++)P<=new Date(m+1,-1,1)&&U>new Date(m,0,0)&&ea.append(a("<option/>").text(m));Z.val(e);ea.val(b)}else y.html(z.months[e]+" "+b);H.empty();I.add(S).removeClass(w.disabled);for(var m=!j?-7:0,s,D;m<(!j?35:42);m++)s=a("<a/>"),0===m%7&&(l=a("<div/>").addClass(w.week),H.append(l)),m<j?(s.addClass(w.off),D=k-j+m+1,h=new Date(b,e-1,D)):m>=j+g?(s.addClass(w.off),D=m-g-j+1,h=new Date(b,e+1,D)):(D=m-j+1,h=new Date(b,e,D),c(N,h)?s.attr("id",w.current).addClass(w.focus):c(A,
h)&&s.attr("id",w.today)),P&&h<P&&s.add(I).addClass(w.disabled),U&&h>U&&s.add(S).addClass(w.disabled),s.attr("href","#"+D).text(D).data("date",h),l.append(s);H.find("a").click(function(b){var c=a(this);c.hasClass(w.disabled)||(a("#"+w.current).removeAttr("id"),c.attr("id",w.current),f(c.data("date"),d,b));return!1});w.sunday&&H.find(w.week).each(function(){var b=d.firstDay?7-d.firstDay:0;a(this).children().slice(b,b+1).addClass(w.sunday)});return p},setMin:function(a,b){P=e(a);b&&N<P&&p.setValue(P);
return p},setMax:function(a,b){U=e(a);b&&N>U&&p.setValue(U);return p},today:function(){return p.setValue(A)},addDay:function(a){return this.setValue(J,O,V+(a||1))},addMonth:function(a){return this.setValue(J,O+(a||1),V)},addYear:function(a){return this.setValue(J+(a||1),O,V)},hide:function(b){if(W){b=a.Event();b.type="onHide";R.trigger(b);a(document).unbind("click.d").unbind("keydown.d");if(b.isDefaultPrevented())return;D.hide();W=!1}return p},getConf:function(){return d},getInput:function(){return b},
getCalendar:function(){return D},getValue:function(a){return a?g(N,a,d.lang):N},isOpen:function(){return W}});a.each(["onBeforeShow","onShow","change","onHide"],function(b,c){a.isFunction(d[c])&&a(p).bind(c,d[c]);p[c]=function(b){b&&a(p).bind(c,b);return p}});b.bind("focus click",p.show).keydown(function(b){var c=b.keyCode;return!W&&0<=a(j).index(c)?(p.show(b),b.preventDefault()):b.shiftKey||b.ctrlKey||b.altKey||9==c?!0:b.preventDefault()});e(b.val())&&f(N,d)}a.tools=a.tools||{version:"1.2.5"};var h=
[],f,j=[75,76,38,39,74,72,40,37],k={};f=a.tools.dateinput={conf:{format:"mm/dd/yy",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:void 0,max:void 0,trigger:!1,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},localize:function(b,c){a.each(c,function(a,b){c[a]=b.split(",")});k[b]=c}};f.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",
shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var l=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,p=a("<a/>");a.expr[":"].date=function(b){var c=b.getAttribute("type");return c&&"date"==c||!!a(b).data("dateinput")};a.fn.dateinput=function(b){if(this.data("dateinput"))return this;b=a.extend(!0,{},f.conf,b);a.each(b.css,function(a,c){!c&&"prefix"!=a&&(b.css[a]=(b.css.prefix||"")+(c||
a))});var c;this.each(function(){var e=new d(a(this),b);h.push(e);e=e.getInput().data("dateinput",e);c=c?c.add(e):e});return c?c:this}})(jQuery);
(function(a){function b(a,b){return(b=parseInt(a.css(b),10))?b:(a=a[0].currentStyle)&&a.width&&parseInt(a.width,10)}function g(a){return(a=a.data("events"))&&a.onSlide}function c(c,d){function e(a,b,h,g){void 0===h?h=b/w*y:g&&(h-=d.min);B&&(h=Math.round(h/B)*B);if(void 0===b||B)b=h*w/y;if(isNaN(h))return m;b=Math.max(0,Math.min(b,w));h=b/w*y;if(g||!s)h+=d.min;s&&(g?b=w-b:h=d.max-h);g=h;var k=I,k=Math.pow(10,k);h=Math.round(g*k)/k;k="click"==a.type;if(V&&(void 0!==v&&!k)&&(a.type="onSlide",O.trigger(a,
[h,b]),a.isDefaultPrevented()))return m;g=k?d.speed:0;k=k?function(){a.type="change";O.trigger(a,[h])}:null;s?(z.animate({top:b},g,k),d.progress&&D.animate({height:w-b+z.width()/2},g)):(z.animate({left:b},g,k),d.progress&&D.animate({width:b+z.width()/2},g));v=h;c.val(h);return m}function h(){(s=d.vertical||b(r,"height")>b(r,"width"))?(w=b(r,"height")-b(z,"height"),A=r.offset().top+w):(w=b(r,"width")-b(z,"width"),A=r.offset().left)}function p(){h();m.setValue(void 0!==d.value?d.value:d.min)}var m=
this,n=d.css,r=a("<div><div/><a href='#'/></div>").data("rangeinput",m),s,v,A,w;c.before(r);var z=r.addClass(n.slider).find("a").addClass(n.handle),D=r.find("div").addClass(n.progress);a.each(["min","max","step","value"],function(a,b){a=c.attr(b);parseFloat(a)&&(d[b]=parseFloat(a,10))});var y=d.max-d.min,B="any"==d.step?0:d.step,I=d.precision;if(void 0===I)try{I=B.toString().split(".")[1].length}catch(S){I=0}if("range"==c.attr("type")){var J=a("<input/>");a.each("class disabled id maxlength name readonly required size style tabindex title value".split(" "),
function(a,b){J.attr(b,c.attr(b))});J.val(d.value);c.replaceWith(J);c=J}c.addClass(n.input);var O=a(m).add(c),V=!0;a.extend(m,{getValue:function(){return v},setValue:function(b,c){h();return e(c||a.Event("api"),void 0,b,!0)},getConf:function(){return d},getProgress:function(){return D},getHandle:function(){return z},getInput:function(){return c},step:function(b,c){c=c||a.Event();m.setValue(v+("any"==d.step?1:d.step)*(b||1),c)},stepUp:function(a){return m.step(a||1)},stepDown:function(a){return m.step(-a||
-1)}});a.each(["onSlide","change"],function(b,c){a.isFunction(d[c])&&a(m).bind(c,d[c]);m[c]=function(b){b&&a(m).bind(c,b);return m}});z.drag({drag:!1}).bind("dragStart",function(){h();V=g(a(m))||g(c)}).bind("drag",function(a,b,d){if(c.is(":disabled"))return!1;e(a,s?b:d)}).bind("dragEnd",function(a){a.isDefaultPrevented()||(a.type="change",O.trigger(a,[v]))}).click(function(a){return a.preventDefault()});r.click(function(a){if(c.is(":disabled")||a.target==z[0])return a.preventDefault();h();var b=z.width()/
2;e(a,s?w-A-b+a.pageY:a.pageX-A-b)});d.keyboard&&c.keydown(function(b){if(!c.attr("readonly")){var d=b.keyCode,e=-1!=a([75,76,38,33,39]).index(d),j=-1!=a([74,72,40,34,37]).index(d);if((e||j)&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)return e?m.step(33==d?10:1,b):j&&m.step(34==d?-10:-1,b),b.preventDefault()}});c.blur(function(b){var c=a(this).val();c!==v&&m.setValue(c,b)});a.extend(c[0],{stepUp:m.stepUp,stepDown:m.stepDown});p();w||a(window).load(p)}a.tools=a.tools||{version:"1.2.5"};var e;e=a.tools.rangeinput=
{conf:{min:0,max:100,step:"any",steps:0,value:0,precision:void 0,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var d,h;a.fn.drag=function(b){document.ondragstart=function(){return!1};b=a.extend({x:!0,y:!0,drag:!0},b);d=d||a(document).bind("mousedown mouseup",function(c){var e=a(c.target);if("mousedown"==c.type&&e.data("drag")){var g=e.position(),p=c.pageX-g.left,m=c.pageY-g.top,n=!0;d.bind("mousemove.drag",function(a){var c=
a.pageX-p;a=a.pageY-m;var d={};b.x&&(d.left=c);b.y&&(d.top=a);n&&(e.trigger("dragStart"),n=!1);b.drag&&e.css(d);e.trigger("drag",[a,c]);h=e});c.preventDefault()}else try{h&&h.trigger("dragEnd")}finally{d.unbind("mousemove.drag"),h=null}});return this.data("drag",!0)};a.expr[":"].range=function(b){var c=b.getAttribute("type");return c&&"range"==c||!!a(b).filter("input").data("rangeinput")};a.fn.rangeinput=function(b){if(this.data("rangeinput"))return this;b=a.extend(!0,{},e.conf,b);var d;this.each(function(){var e=
new c(a(this),a.extend(!0,{},b)),e=e.getInput().data("rangeinput",e);d=d?d.add(e):e});return d?d:this}})(jQuery);
(function(a){function b(b,c,d){var e=b.offset().top,f=b.offset().left,j=d.position.split(/,?\s+/),h=j[0],j=j[1],e=e-(c.outerHeight()-d.offset[0]),f=f+(b.outerWidth()+d.offset[1]);/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());d=c.outerHeight()+b.outerHeight();"center"==h&&(e+=d/2);"bottom"==h&&(e+=d);b=b.outerWidth();"center"==j&&(f-=(b+c.outerWidth())/2);"left"==j&&(f-=b);return{top:e,left:f}}function g(c,e,f){var h=this,g=e.add(h);c=c.not(":button, :image, :reset, :submit");a.extend(h,
{getConf:function(){return f},getForm:function(){return e},getInputs:function(){return c},reflow:function(){c.each(function(){var c=a(this),d=c.data("msg.el");d&&(c=b(c,d,f),d.css({top:c.top,left:c.left}))});return h},invalidate:function(b,d){if(!d){var e=[];a.each(b,function(a,b){a=c.filter("[name='"+a+"']");a.length&&(a.trigger("OI",[b]),e.push({input:a,messages:[b]}))});b=e;d=a.Event()}d.type="onFail";g.trigger(d,[b]);d.isDefaultPrevented()||l[f.effect][0].call(h,b,d);return h},reset:function(b){b=
b||c;b.removeClass(f.errorClass).each(function(){var b=a(this).data("msg.el");b&&(b.remove(),a(this).data("msg.el",null))}).unbind(f.errorInputEvent||"");return h},destroy:function(){e.unbind(f.formEvent+".V").unbind("reset.V");c.unbind(f.inputEvent+".V").unbind("change.V");return h.reset()},checkValidity:function(b,e){b=b||c;b=b.not(":disabled");if(!b.length)return!0;e=e||a.Event();e.type="onBeforeValidate";g.trigger(e,[b]);if(e.isDefaultPrevented())return e.result;var m=[];b.not(":radio:not(:checked)").each(function(){var b=
[],c=a(this).data("messages",b),l=d&&c.is(":date")?"onHide.v":f.errorInputEvent+".v";c.unbind(l);a.each(k,function(){var d=this,k=d[0];if(c.filter(k).length&&(d=d[1].call(h,c,c.val()),!0!==d)){e.type="onBeforeFail";g.trigger(e,[c,k]);if(e.isDefaultPrevented())return!1;var l=c.attr(f.messageAttr);if(l)return b=[l],!1;var l=b,m=d;if(f.grouped||!l.length){var p;!1===m||a.isArray(m)?(p=j.messages[k.key||k]||j.messages["*"],p=p[f.lang]||j.messages["*"].en,(k=p.match(/\$\d/g))&&a.isArray(m)&&a.each(k,function(a){p=
p.replace(this,m[a])})):p=m[f.lang]||m;l.push(p)}}});b.length&&(m.push({input:c,messages:b}),c.trigger("OI",[b]),f.errorInputEvent&&c.bind(l,function(a){h.checkValidity(c,a)}));if(f.singleError&&m.length)return!1});var v=l[f.effect];if(!v)throw'Validator: cannot find effect "'+f.effect+'"';if(m.length)return h.invalidate(m,e),!1;v[1].call(h,b,e);e.type="onSuccess";g.trigger(e,[b]);b.unbind(f.errorInputEvent+".v");return!0}});a.each(["onBeforeValidate","onBeforeFail","onFail","onSuccess"],function(b,
c){a.isFunction(f[c])&&a(h).bind(c,f[c]);h[c]=function(b){b&&a(h).bind(c,b);return h}});f.formEvent&&e.bind(f.formEvent+".V",function(a){if(!h.checkValidity(null,a))return a.preventDefault()});e.bind("reset.V",function(){h.reset()});c[0]&&c[0].validity&&c.each(function(){this.oninvalid=function(){return!1}});e[0]&&(e[0].checkValidity=h.checkValidity);f.inputEvent&&c.bind(f.inputEvent+".V",function(b){h.checkValidity(a(this),b)});c.filter(":checkbox, select").filter("[required]").bind("change.V",function(b){var c=
a(this);(this.checked||c.is("select")&&a(this).val())&&l[f.effect][1].call(h,c,b)});var v=c.filter(":radio").change(function(a){h.checkValidity(v,a)});a(window).resize(function(){h.reflow()})}a.tools=a.tools||{version:"1.2.5"};var c=/\[type=([a-z]+)\]/,e=/^-?[0-9]*(\.[0-9]+)?$/,d=a.tools.dateinput,h=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,f=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i,j;j=a.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",
inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(b,c){a.each(c,function(a,c){j.messages[a]=j.messages[a]||{};j.messages[a][b]=c})},localizeFn:function(b,c){j.messages[b]=j.messages[b]||{};a.extend(j.messages[b],c)},fn:function(b,d,e){a.isFunction(d)?e=d:("string"==typeof d&&(d={en:d}),
this.messages[b.key||b]=d);if(d=c.exec(b)){var f=d[1];b=function(){return this.getAttribute("type")==f};b.key="[type="+f+"]"}k.push([b,e])},addEffect:function(a,b,c){l[a]=[b,c]}};var k=[],l={"default":[function(c){var d=this.getConf();a.each(c,function(c,e){c=e.input;c.addClass(d.errorClass);var f=c.data("msg.el");f||(f=a(d.message).addClass(d.messageClass).appendTo(document.body),c.data("msg.el",f));f.css({visibility:"hidden"}).find("p").remove();a.each(e.messages,function(b,c){a("<p/>").html(c).appendTo(f)});
f.outerWidth()==f.parent().width()&&f.add(f.find("p")).css({display:"inline"});e=b(c,f,d);f.css({visibility:"visible",position:"absolute",top:e.top,left:e.left}).fadeIn(d.speed)})},function(b){var c=this.getConf();b.removeClass(c.errorClass).each(function(){var b=a(this).data("msg.el");b&&b.css({visibility:"hidden"})})}]};a.each(["email","url","number"],function(b,c){a.expr[":"][c]=function(a){return a.getAttribute("type")===c}});a.fn.oninvalid=function(a){return this[a?"bind":"trigger"]("OI",a)};
j.fn(":email","Please enter a valid email address",function(a,b){return!b||h.test(b)});j.fn(":url","Please enter a valid URL",function(a,b){return!b||f.test(b)});j.fn(":number","Please enter a numeric value.",function(a,b){return e.test(b)});j.fn("[max]","Please enter a value smaller than $1",function(a,b){if(""===b||d&&a.is(":date"))return!0;a=a.attr("max");return parseFloat(b)<=parseFloat(a)?!0:[a]});j.fn("[min]","Please enter a value larger than $1",function(a,b){if(""===b||d&&a.is(":date"))return!0;
a=a.attr("min");return parseFloat(b)>=parseFloat(a)?!0:[a]});j.fn("[required]","Please complete this mandatory field.",function(a,b){return a.is(":checkbox")?a.is(":checked"):!!b});j.fn("[pattern]",function(a){return RegExp("^"+a.attr("pattern")+"$").test(a.val())});a.fn.validator=function(b){var c=this.data("validator");c&&(c.destroy(),this.removeData("validator"));b=a.extend(!0,{},j.conf,b);if(this.is("form"))return this.each(function(){var d=a(this);c=new g(d.find(":input"),d,b);d.data("validator",
c)});c=new g(this,this.eq(0).closest("form"),b);return this.data("validator",c)}})(jQuery);define("tools",["jquery"],function(a){return function(){return a.$.fn.tools}}(this));
(function(a){var b=window.FID=window.FID||{},g=a(window);a(".more-tab--tabs");var c,e=b.extend=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype};b.MoreTabInstances=b.MoreTabInstances||[];var d=b.MoreTabs=function(d,e,j){this.initSettings(e);c=a(d);c.hasClass("more-tab--tabs")||c.find(".more-tab--tabs");a(window);var g=c.find(".more-tab"),l=this._getTabContainerSelectorFromTab(g),p=c.find(".tabs--nav-content").find(".tabs--tab");
e=a.extend({},{ignoreHiddenTabs:!1},e);this._$moretabTab=g;this._$moretabTabAnchor=this._getAnchorFromTab(g);this._containerSelector=l;this._$containerInstance=c.find(l);this._$tabsTab=p;this._moreTabWidth;this._moreListLiClass="more-tab--item more-tab--tab-item-";this._moreListAClass="tabs--link";this._moreListAHref="#panel-";this._mobileMoreTab=!1;this._createDynamicTabs(this);this._super.constructor.call(this,d,e);this._calculateTabNumber(this);this._readjustTabs(this);this._reCreate=j?!0:!1;b.MoreTabInstances.push(this);
a(p[p.length-2]).addClass("tabs--last")};g.resize(function(){for(var a=0;a<b.MoreTabInstances.length;a++)b.MoreTabInstances[a]._updateTabBreaks(b.MoreTabInstances[a]),b.MoreTabInstances[a]._calculateTabNumber(b.MoreTabInstances[a]),b.MoreTabInstances[a]._readjustTabs(b.MoreTabInstances[a])});a(document).on("moretabRecalculate",function(){for(var a=0;a<b.MoreTabInstances.length;a++)b.MoreTabInstances[a]._calculateTabNumber(b.MoreTabInstances[a]),b.MoreTabInstances[a]._readjustTabs(b.MoreTabInstances[a])});
a(document).on("reevaluateTabNo",function(){for(var a=0;a<b.MoreTabInstances.length;a++)b.MoreTabInstances[a]._calculateTabNumber(b.MoreTabInstances[a]),b.MoreTabInstances[a]._readjustTabs(b.MoreTabInstances[a])});e(d,b.Tabs);b.MoreTabs.prototype.preventDefault=function(b){var c=a(b.currentTarget);(c=c.attr("href")||c.find(this.settings.tabLinkClassSelector).attr("href"))&&0==c.indexOf("#")&&b.preventDefault()};b.MoreTabs.prototype._updateTabBreaks=function(b){var c=b._$tabsTab;b._$moretabTab.outerWidth();
var d=c.length,e;b._tabBreaks=[];for(var g=0;g<d-1;g++){e=0;for(var p=g;-1<p;p--)e+=a(c[p]).outerWidth();b._tabBreaks.push(e+100)}};b.MoreTabs.prototype._createDynamicTabs=function(b){var d=b._$tabsTab,e=c.find(".more-tab--dropdown-element-container");b._currentTabNumber=0;b._updateTabBreaks(b);c.find(".more-tab--dropdown-element-container").empty();for(var g=1;g<d.length-1;g++){var l=a(d[g]).children(".tabs--tab-link"),p=a("<li/>",{"class":b._moreListLiClass+(g+1)}),m=a("<a/>",{"class":b._moreListAClass,
href:l.attr("href"),role:"tab"});e.append(p.append(m.html(l.html())))}b._$moretabTabItem=c.find(".more-tab--item")};b.MoreTabs.prototype._makeMoreTabMobile=function(b){b.$el.find(".tabs--last").filter(function(b,c){return 0<=a(c).text().indexOf("More")}).addClass("tabs--mobile-more-tab")};b.MoreTabs.prototype._unmakeMoreTabMobile=function(a){a.$el.find(".tabs--last").removeClass("tabs--mobile-more-tab")};b.MoreTabs.prototype._calculateTabNumber=function(a){for(var b=a._tabBreaks,c=b.length,d=a._$tabsTab.parent(),
e;-1<c;c--)if(b[c]<d.width()){e=_.indexOf(b,b[c]);a._currentTabNumber!==e&&(a._currentTabNumber=e);break}2>e?a._makeMoreTabMobile(a):a._unmakeMoreTabMobile(a)};b.MoreTabs.prototype._readjustTabs=function(b){var c=b._$tabsTab,d=b._$moretabTabItem,e=b._$moretabTab;c.hide();d.show();if(0<b._currentTabNumber)for(var g=0;g<b._currentTabNumber+1;g++)a(c[g]).show(),a(d[g-1]).hide();else a(c[0]).show();b._currentTabNumber!==b._tabBreaks.length-1?e.show():e.hasClass("tabs--selected")&&(b._unselectTab(e),b._hideContainer(b._$containerInstance),
b.open.call(b,b._$currentOpenedTabSelector,!1))};b.MoreTabs.prototype.open=function(b,d){var e=this._$moretabTab;this._getTabFromContainer(b);var g=this._$containerInstance,l=c.find(".tab-content--header"),p=this;a("."+this._moreListAClass+'[href="'+b+'"]').parent().is(":visible")||"#panel-11"===b?l.addClass("tab-content--header-visible"):l.removeClass("tab-content--header-visible");this._isTabSelected(e)&&(b===this._containerSelector&&(b=this._$currentOpenedTabSelector),g.show(),p._unselectTab(e),
g.slideUp(function(){g.css({display:"",height:"","padding-top":"","margin-top":"","padding-bottom":"","margin-bottom":""});p._hideContainer(g)}));this._super.open.call(this,b,d);if(!e||this.$currentTab[0]!==this._$moretabTab[0])this._$currentOpenedTab=this.$currentTab,this._$currentOpenedTabSelector=b;"none"===this.$currentTab.css("display")&&(this.$currentTab.attr({"aria-selected":"false",tabindex:"-1"}),this._$moretabTabAnchor.attr({"aria-selected":"true",tabindex:"0"}).focus())};b.MoreTabs.prototype.openTabContainer=
function(b){var c=this._$containerInstance,d=arguments,e=this,g=b.css("display");c&&b[0]===c[0]&&"none"===g?(c.hide(),c.slideDown(function(){var c=a(b).css("display","");e._showContainer(c)})):this._super.openTabContainer.apply(this,d)}})(jQuery);define("components/moretab",["jquery","components/fidtab"],function(a){return function(){return a.FID.MoreTabs}}(this));
define("tasks/customer-spoke-info-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/rest/customerSpokeInfo",type:"GET",dataType:"json"})});
define("views/tab-content-manager",["jquery","util/eventhub-backbone","views/tab-redirect-manager"],function(a,b,g){function c(){this.initialize.apply(this,arguments)}var e=1;a.extend(c.prototype,{timeout:0,lastLoadTime:0,getId:function(){this.id||(this.id=e++);return this.id},EVENTS:{load:"tab_manager__load",reload:"tab_manager__reload",beforeload:"tab_manager__before_load",afterload:"tab_manager__after_load",dispose:"tab_manager__dispose",leave:"tab_manager__leave"},initialize:function(b){this.options=
a.extend({},b)},on:function(a,c){b.subscribeEvent(this._getPrivateEventName(this.EVENTS[a]),c)},load:function(c){this.lastLoadTime=(new Date).getTime();c=this.context=c||a.extend(this.context,{domLoaded:!1})||{};var e=f&&f.tabName||a(".more-tab--tab.tabs--selected").data("tab-name"),f=c.routeOptions,j=g.getRedirectUrl(!c.accountsInfo?[]:c.accountsInfo.accounts?c.accountsInfo.accounts:[],e,!(!c.accountsInfo||!c.accountsInfo.Portfolio));if(j)throw setTimeout(function(){document.location.href=j},10),
"ABORT_TAB_LOADING";a(window).off(".cfs");a(document).off(".cfs");"Summary"===e&&(a(document).off(".summaryCards"),a(window).off(".summaryCards"));"Positions"!==e&&(b.unsubscribeEvent({subject:"FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION"}),a(window).off(".position-controls"),a(document).off(".position-controls"),a(window).off(".researchTab"),a(".positions-content").empty());b.publishEvent(this._getPrivateEventName(this.EVENTS.beforeload),c);this.loadTabContent(c);b.publishEvent(this._getPrivateEventName(this.EVENTS.load),
c);b.publishEvent(this._getPrivateEventName(this.EVENTS.afterload),c)},dispose:function(){var a=this.context=this.context||{};b.publishEvent(this._getPrivateEventName(this.EVENTS.dispose),a)},_getPrivateEventName:function(a){return a+"_"+this.getId()},setContext:function(a){this.context=a},getContext:function(){return this.context},isNewOrExpired:function(){if(this.readCookie("SC"))return this.isNew()||this.isExpired();location.reload();return!1},readCookie:function(a){a+="=";for(var b=document.cookie.split(";"),
c=0;c<b.length;c++){for(var e=b[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null},isNew:function(){return 0===this.lastLoadTime},isExpired:function(){return this.timeout<=(new Date).getTime()-this.lastLoadTime}});return c});
define("util/progressbar-tabs",["jquery"],function(a){a(".progress-bar--tabs").click(function(){return!1});return{showLoading:function(b,g,c,e){if(!a(".progress-bar").is(":visible")){b=b||"";g=null!=g?g:!0;2<arguments.length&&(console.warn?console_warn("WARNING: ProgressBar no longer supports an animation time parameter for fade in or fade out.  Please update your code"):console_log("WARNING: ProgressBar no longer supports an animation time parameter for fade in or fade out.  Please update your code"));
var d;if(e)d=a(".more-tab--tabs > .progress-bar--tabs");else{if(a(".more-tab--tabs > .progress-bar--tabs").is(":visible"))return;d=a(".more-tab--tab-container .progress-bar--tabs")}this.fadeIn(d);d.find(".message-content").text(b);g?d.addClass("bordered"):d.removeClass("bordered")}},hideLoading:function(){this.fadeOut()},stop:function(){clearTimeout(this.currentHandle)},fadeIn:function(a){this.stop();a.show();this.currentHandle=setTimeout(function(){a.addClass("fade-in")})},fadeOut:function(){this.stop();
var b=a(".progress-bar--tabs");b.removeClass("fade-in");b.hide()}}});
define("views/moretab-content-adapter","jquery components/moretab views/tab-content-manager util/account-utils util/eventhub-backbone util/progressbar models/ajax-object-model util/progressbar-tabs".split(" "),function(a,b,g,c,e,d,h,f){function j(){this.tabContents={};this.tabContentBuilders={};var b=this;a(document).bind("CHANGE_TAB_WITHOUT_ACCOUNT_CHANGE",function(a){b.executeOnLoad(function(){b.openTab(a.tabName)})})}var k=!1,l=null;a.extend(j.prototype,{regisiterTabContentBuilder:function(a,b){this.tabContentBuilders[a]=
b},executeOnLoad:function(a){this.moreTabInstance?a.call(this):this.executeOnLoadCallback=a},setMoreTabInstance:function(a){this.removeMoreTabInstance();this.moreTabInstance=a;this.moretabRootElement=a._$moretabTab.closest(".more-tab--tabs");this.delegateEvents();this.executeOnLoadCallback&&this.executeOnLoadCallback();this.executeOnLoadCallback=null},removeMoreTabInstance:function(){this.moretabRootElement&&this.moretabRootElement.off(FID.Tabs.Events.open);this.moretabInstance=null;a.each(this.tabContents,
function(a,b){b.dispose()});this.tabContents={}},delegateEvents:function(){var a=this;this.moretabRootElement.on(FID.Tabs.Events.open,function(b){a._onMoreTabOpen.apply(a,arguments)})},_buildRouterParams:function(a){if(this.accountsInfo.portfolio)return"performance"==a&&0<=location.hash.indexOf("#perfOverview")?a+location.hash.replace("#perfOverview",""):a;if(this.accountsInfo.accounts){for(var b="",c=this.accountsInfo.accounts,d=0;d<c.length;d++)b=0==d?c[d].acctNum:b+(","+c[d].acctNum);return a+
"/"+b}},_onMoreTabOpen:function(b){try{var c=b.$tab.data("tab-name");null!=c&&(CURRENT_TAB=c);null!=c&&"Summary"!=c&&a(".legal-footer--below-content .summary-tab").hide();if(!k){if(!b.$tab.hasClass("more-tab--tab")||b.$tab.hasClass("more-tab"))return;this.openTab(c,{domLoaded:!1,accountsInfo:this.accountsInfo})}a(".tabs--nav-content").show();require("app").getInstance().footNote.switchTab(c);var d=this.getRouter();if(!(l&&"multiplemarginbalances"===l.section)){var e=this._buildRouterParams(d.convertTabNameToRouteName(c));
"X"==POSITIONS_GRID_IND&&(window.POSITIONS_GRID_BEFORE_LOAD=!0);d.navigate(e,{trigger:!1})}}catch(f){if("ABORT_TAB_LOADING"!==f)throw f;}},setAccountsInfo:function(a){this.accountsInfo=a},getRouter:function(){return require("app").getInstance().router},openTab:function(b,c,d){this.currentContext=c;console_log("openTabByCode "+b);var j=this;0===j.moretabRootElement.find("[data-tab-name="+b+"]").length&&(b="Summary");this.accountsInfo&&1==this.accountsInfo.accounts.length&&e.publishEvent("CLEAN_MULIPLE_MARGIN");
var g={Positions:"positions",Summary:"summary",Activity:"activity",Balances:"balances",Feature:"feature",Statements:"statements"},v=[];a.each(g,function(a,b){v.push(b)});a("body").removeClass(v.join(" "));g[b]&&a("body").addClass(g[b]);!this.tabContents[b]&&this.tabContentBuilders[b]&&(g=this.tabContents[b]=new this.tabContentBuilders[b](c),g.on("beforeload",function(c){var d=j.moretabRootElement.find("[data-tab-name="+b+"]>a"),d=d.data("tab-anchor")||d.attr("href");k=!0;l=c.routeOptions;try{j.moreTabInstance.open(d)}finally{k=
!1,l=null}"Summary"==b&&a("#intro-tour-wrapper").data("willshow")&&a(document).trigger("this.context.constants.EVENTS.OPEN_INTROTOUR")}),g.on("afterload",function(){a(".positions-mini-context").remove()}));if(g=this.tabContents[b])d||g.isNewOrExpired()?(h.get("isLastReqCompleted")||(a.each(this.tabContents,function(a,b){b.lastLoadTime=0}),f.hideLoading()),this.tabContents[b].load(c)):(console_log("This tab is loaded and not expired."),"Summary"===b&&(e.publishEvent("LEDGER_CARD_REFRESH"),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")));
0<a(".todos-popup-wrapper").length&&(a(".todos-popup-wrapper").data("basepopup-instance")._isOpen&&"Summary"!==b)&&a(".todos-popup-wrapper .base-popup--close-button").click();a("body").data("sally-experience-entered")&&(a("div.error-message-no-cards-sally, div.error-message-box-sally").remove(),c=a(".page-content-title").siblings(".banner-toggle-sally-feedback"),this.accountsInfo.portfolio&&"Summary"===b&&c.data("sally-survey-show-flag")?c.show():c.hide())},getCurrentTabName:function(){return this.moretabRootElement.find(".more-tab--tab.tabs--selected").data("tab-name")},
openCurrentTab:function(a){return this.openTab(this.getCurrentTabName(),a)}});return j});define("util/global-deferred",["jquery"],function(a){return{adobeTargetDeferred:a.Deferred()}});define("tasks/state-delete-task",["tasks/base-task"],function(a){var b=encodeURIComponent("/state/delete");return a.extend({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,contentType:"application/json",dataType:"json",type:"POST"})});
define("tasks/state-save-task",["tasks/base-task"],function(a){var b=encodeURIComponent("/state/save");return a.extend({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,contentType:"application/json",dataType:"json",type:"POST"})});
define("models/state-model","jquery backbone underscore util/formats util/eventhub-backbone tasks/state-delete-task tasks/state-save-task".split(" "),function(a,b,g,c,e,d,h){return b.Model.extend({initialize:function(a,b){this.stateSaveObject={path:b||"/user/oce/summary/card/minimize",version:a||"1.0",entry:[]};this.stateDeleteObject={path:b||"/user/oce/summary/card/minimize",entry:[]};this.requestTemplate={state:[]}},saveCardState:function(a){a?(this.stateSaveObject.entry.push({key:""+a,value:"true"}),
this.requestTemplate.state.push(this.stateSaveObject),a=JSON.stringify(this.requestTemplate),this.cleanRequestTempletes(),(new h({context:this,data:a,onPreExecute:function(){},onSuccess:function(a){console_log(a)},onError:function(a){console_log(a)},onComplete:function(){}})).run()):console_log("Card tcmid or state value missing!")},viewedTour:function(a,b){if(a){this.stateSaveObject.entry.push({key:""+a,value:b});this.requestTemplate.state.push(this.stateSaveObject);var c=JSON.stringify(this.requestTemplate);
this.cleanRequestTempletes();(new h({context:this,data:c,onPreExecute:function(){},onSuccess:function(a){console_log(a)},onError:function(a){console_log(a)},onComplete:function(){}})).run()}else console_log("key for the tour is missing!")},deleteCardState:function(a){a?(this.stateDeleteObject.entry.push({key:""+a}),this.requestTemplate.state.push(this.stateDeleteObject),a=JSON.stringify(this.requestTemplate),this.cleanRequestTempletes(),(new d({context:this,data:a,onPreExecute:function(){},onSuccess:function(a){console_log(a)},
onError:function(a){console_log(a)},onComplete:function(){}})).run()):console_log("Card tcmid missing!")},cleanRequestTempletes:function(){this.requestTemplate.state=[];this.stateSaveObject.entry=[];this.stateDeleteObject.entry=[]},multiCardsStatesSave:function(){},multiCardsStatesDelete:function(){},validation:function(){}})});define("text!templates/nhh-welcometour.html",[],function(){return'\x3c!-- Intro Tour --\x3e\n<div class="base-popup base-modal--container base-modal--container-large introtour-modal nhh-welcome-tour-modal">\n\n\t\x3c!-- Hidden for redundancy --\x3e\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t<ul class="introtour-modal--slide-content-container nhh-welcome-tour-container">\n\n\t\x3c!-- Intro Tour Content --\x3e\n\n\t\t<li class="introtour-modal--slide-content nhh-welcome-main introtour-modal--slide-content-active clearfix">\n\t\t\t<div class="introtour-modal--left-half">\n\t\t\t\t<h2 class="introtour-modal--container-header">Welcome to Your Portfolio Summary!</h2>\n\t\t\t\t<p class="introtour-modal--list-info">At Fidelity, you can expect more from your financial firm. Our mission is to work with you to achieve your goals.</p>\n\t\t\t</div>\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content nhh-welcome-getting-started clearfix">\n\t\t\t<div class="introtour-modal--left-half">\n\t\t\t\t<h2 class="introtour-modal--container-header">Getting Started</h2>\n\t\t\t\t<p class="introtour-modal--list-info">Since you\'re new to the site, we\'ve created a checklist of the main things you\'ll need to do to set up your account. If, at any time, you need some help, we\'re always available.</p>\n\t\t\t\t<p class="introtour-modal--list-info introtour-modal--list-info-sub">If checklists just aren\'t your thing, that\'s ok, you can remove the setup steps once you fund your account.</p>\n\t\t\t</div>\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content nhh-welcome-evolve clearfix">\n\t\t\t\n\t\t\t<div class="introtour-modal--left-half">\n\t\t\t\t\n\t\t\t\t<h2 class="introtour-modal--container-header">Your Portfolio Summary Will Evolve</h2>\n\t\t\t\t<p class="introtour-modal--list-info">As you check items off the list, this page will start displaying:</p>\n\t\t\t\t<ul class="introtour-modal--benefit-list list-unordered">\n\t\t\t\t\t<li class="list-unordered--item">Snapshots of your investment performance.</li>\n\t\t\t\t\t<li class="list-unordered--item">Highlighted information about your account.</li>\n\t\t\t\t\t<li class="list-unordered--item">Investing articles that share our expertise.</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t</li>\n\n\t\t<li class="introtour-modal--slide-content nhh-welcome-thank-you clearfix">\n\t\t\t<div class="introtour-modal--left-half">\n\t\t\t\t<h2 class="introtour-modal--container-header">Thank You</h2>\n\t\t\t\t<p class="introtour-modal--list-info">And, last &#8212; but certainly not least &#8212; thank you for becoming a customer. We\'re excited to be working with you to reach your goals.</p>\n\t\t\t</div>\n\t\t</li>\n\n\t\x3c!-- End Intro Tour Content --\x3e\n\n\t</ul>\n\n\t<div class="introtour-modal--actions">\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-first clearfix introtour-modal--action-container-active">\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--next">Start Here</button>\n\t\t\t</span>\n\t\t</div>\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-middle clearfix">\n\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t</span>\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--next">Next</button>\n\t\t\t</span>\n\t\t</div>\n\t\t\n\t\t<div class="introtour-modal--action-container introtour-modal--action-container-last clearfix">\n\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t</span>\n\t\t\t<span class="glossy-button-sm">\n\t\t\t\t<button class="introtour-modal--close">Close</button>\n\t\t\t</span>\n\t\t</div>\n\n\t</div>\n\n\t<div class="introtour-modal--page-counter-container clearfix">\n\t\t<span class="introtour-modal--page-counter">\n\t\t\t<span class="introtour-modal--page-counter-current"></span> of <span class="introtour-modal--page-counter-max"></span>\n\t\t</span>\n\t</div>\n\n</div>'});
define("views/card-welcome-view",["jquery","views/base-view","models/state-model","text!../templates/nhh-welcometour.html","util/constants"],function(a,b,g,c){return b.extend({events:{"click .nhh-welcome-tour-open":"openWelcomeTour"},initialize:function(){this.openWelcomeTourAutomatically()},openWelcomeTourAutomatically:function(){var a=this.$el.attr("data-isNHH"),b=this.$el.attr("data-isViewedTour"),c=this;void 0!=a&&(null!=a&&"1"===a)&&(void 0!=b&&null!=b&&"0"===b)&&(this.openWelcomeTour(),setTimeout(function(){c.callAjaxSaveState()},
10))},callAjaxSaveState:function(){var b=JSON.stringify({state:[{version:"1.0",path:"/user/oce/summary/nhhWelcomeTour",entry:[{key:"nhhWelcomeTour"}]}]}),c=encodeURIComponent("/state");a.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+c,data:b,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){a&&"ERROR"==a.type||a&&0==a.length&&(new g("1.0","/user/oce/summary/nhhWelcomeTour")).viewedTour("nhhWelcomeTour","true")}})},openWelcomeTour:function(){var b=
a("#intro-tour-wrapper");b.html(c);(new FID.Applications.IntroTour(b,null,null,"nhh-welcome")).open()},removeNHHWelcomeCard:function(){var b=JSON.stringify({state:[{version:"1.0",path:"/user/oce/summary/nhhWelcomeCard",entry:[{key:"isHidden",value:"true"}]}]}),c=encodeURIComponent("/state/save");a.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+c,data:b,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){a&&(0==a.length||a.sysMsgs&&
a.sysMsgs.sysMsg[0]&&"ERROR"==a.sysMsgs.sysMsg[0].type)?console.log("Error in calling state api to save when removing NHH welcome card"):Backbone.history.loadUrl(Backbone.history.getFragment())},error:function(a,b,c){console.log("Error in calling state api to save when removing NHH welcome card: "+c+" "+b+" "+a)}})},removeDCWelcomeBannerCard:function(){var b=JSON.stringify({state:[{version:"1.0",path:"/user/oce/summary/dcWelcomeCard",entry:[{key:"isHidden",value:"true"}]}]}),c=encodeURIComponent("/state/save");
a.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+c,data:b,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){a&&(0==a.length||a.sysMsgs&&a.sysMsgs.sysMsg[0]&&"ERROR"==a.sysMsgs.sysMsg[0].type)?console.log("Error in calling state api to save when removing DC welcome banner card"):Backbone.history.loadUrl(Backbone.history.getFragment())},error:function(a,b,c){console.log("Error in calling state api to save when removing DC welcome banner card: "+
c+" "+b+" "+a)}})},showDCWelcomeVideo:function(){popWinCustomAtPosition("https://www.fidelity.com/learning-center/media/interacting-workplace-investment-video",650,750,"yes","yes")},showDCWelcomeFeedback:function(){popWinCustomAtPosition("https://secure.opinionlab.com/ccc01/o.asp?id=IXRJPMrA&resize=false&custom_var="+USER_MID,616,555,"yes","yes")}})});
define("tasks/track-ira-contributions-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofportfolio/snippet/iraContribution",type:"POST",buildParams:function(a){return"ACCOUNT="+a.ACCOUNT}})});
define("views/card-ira-contributions-view",["jquery","views/base-view","util/progressbar","models/account-context-model","tasks/track-ira-contributions-task"],function(a,b,g,c,e){return b.extend({events:{"click .js-track-contributions-button":"getIRAContributionsData"},setAccounts:function(a){this.account=a&&a.accounts[0]?a.accounts[0]:"";this._updateContributeIRALink()},destroy:function(){this.acctNum=null;this.$el.empty();this.undelegateEvents()},render:function(){return this},getIRAContributionsData:function(){var b=
this;(new e({data:{ACCOUNT:b.account.acctNum},onPreExecute:function(){b.$(".js-track-contributions-button").addClass("is-hidden");b.$(".js-hidden-expander").removeClass("collapsed").addClass("expanded");b.$(".js-track-ira-contributions-data-container").removeClass("collapsed").addClass("expanded");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},onSuccess:function(c){(c=a(c).find(".js-track-ira-contributions-data"))&&null!=c&&0<c.length?b.$(".js-track-ira-contributions-data-container").html(c):
b._errorHandler()},onError:function(){b._errorHandler()},onComplete:function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},_updateContributeIRALink:function(){var a=envMap.MM_URL_VALUE+"/ftgw/fbc/mm/mmIraContribBuffer?Ref_at=ng&ACCOUNT="+this.account.acctNum;this.$(".js-contribute-to-your-ira-link").attr("href",a)},_errorHandler:function(){this.$(".js-ira-card-message-section").hide();this.$(".js-ira-card-main-content").hide();this.$(".js-ira-card-footer").hide();
this.$(".js-ira-card-message-error").removeClass("display-none")}})});define("tasks/track-mrd-distributions-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofaccounts/snippet/contributionsDistributionsCompositeSnippet",type:"POST",initialize:function(a){console.log(a);"Y"==a.customizedata&&(this.url="/ftgw/fbc/ofaccounts/snippet/mrd")},buildParams:function(a){return"ACCT_LIST="+$.map(a.ACCOUNTS,function(a){if(a.acctNum&&null!==a.acctNum)return a.acctNum}).join(",")+"&FROM_MRD_CARD=mrdCard"}})});
define("views/card-mrd-distributions-view",["jquery","views/base-view","util/progressbar","models/account-context-model","tasks/track-mrd-distributions-task"],function(a,b,g,c,e){function d(b){b=b.$anchor.attr("data-tooltipsection");a(".mrd-distributions-card--tooltip-section").removeClass(h);a(".mrd-distributions-card--tooltip-section-"+b).addClass(h)}var h="mrd-distributions-card--tooltip-section-active";return b.extend({events:{"click .js-track-distributions-button":"getMRDDistributionsData"},
initialize:function(){var b=a(".base-popup.mrd-distributions-card--tooltip").BasePopup(),c=a(".fid-card--mrd-distributions"),e=a(".mrd-distributions-card--question-icon");e.on(FID.DynamicTooltip.event.anchorClicked,d);this.tooltip=new FID.DynamicTooltip(c,e,b)},setAccounts:function(a){this.accounts=a&&a.accounts?a.accounts:[];this._updateDistributionMRDLink()},destroy:function(){this.tooltip=this.acctNum=null;this.$el.empty();this.undelegateEvents()},render:function(){return this},getMRDDistributionsData:function(){var b=
this,c=b.$(".js-track-distributions-button").data("enablemrdcardwithfili");(new e({data:{ACCOUNTS:b.accounts},customizedata:c,onPreExecute:function(){b.$(".js-track-distributions-button").addClass("is-hidden");b.$(".js-hidden-expander").removeClass("collapsed").addClass("expanded");b.$(".js-track-mrd-distributions-data-container").removeClass("collapsed").addClass("expanded");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},onSuccess:function(c){(c=a(c).find(".js-track-mrd-distributions-data"))&&
null!=c&&0<c.length?b.$(".js-track-mrd-distributions-data-container").html(c):b._errorHandler()},onError:function(){b._errorHandler()},onComplete:function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},toogleHelperPopup:function(b){b=a(b.currentTarget).attr("data-tooltipsection");this.$(".mrd-distributions-card--tooltip-section").removeClass("mrd-distributions-card--tooltip-section-active");this.$(".mrd-distributions-card--tooltip-section-"+b).addClass("mrd-distributions-card--tooltip-section-active")},
_updateDistributionMRDLink:function(){var a=envMap.MM_URL_VALUE+"/ftgw/fbc/mm/mmRDCLanding";this.$(".js-distribution-center-link").attr("href",a)},_errorHandler:function(){this.$(".js-mrd-card-message-section").hide();this.$(".js-mrd-card-main-content").hide();this.$(".js-mrd-card-footer").hide();this.$(".js-mrd-card-message-error").removeClass("display-none")}})});
define("views/topMovers-view",["views/base-view"],function(a){return a.extend({initialize:function(){},render:function(){return this},refresh:function(){var a=this;$.ajax({url:"/ftgw/fbc/ofportfolio/mget?SNIPPET=topMovers",dataType:"html",xhrFields:{withCredentials:!0},success:function(g){a.renderTopMovers(g)},error:function(){a.renderTopMovers({errorText:'<div class="snippet top-movers"><div class="error-section"><p>We\'re sorry. Top Gainers and Losers are unavailable.</p></div></div>'})}})},renderTopMovers:function(a){if(a){var g=
this.$(".top-movers").css("display");a.errorText?this.$(".top-movers").replaceWith(a.errorText):this.$(".top-movers").replaceWith(a);"none"==g&&this.$(".top-movers").hide()}}})});
define("views/card-ledger-view","jquery views/base-view views/topMovers-view util/constants util/formats models/account-context-model util/eventhub-backbone".split(" "),function(a,b,g,c,e,d,h){return b.extend({events:{"click .MarketingMessage-link-to":"submitLink","click .js-call-to-action":"clickBalanceLink"},initialize:function(b){this.isEii=b.isEii;this.selection=b.selection;h.subscribeEvent("VIEW_MULIPLE_MARGIN",_.bind(this.handleViewMulpleMarginAccts,this));h.subscribeEvent("CLEAN_MULIPLE_MARGIN",
_.bind(this.handleCleanMulpleMarginAccts,this));a(".account-selector-dropdown").hasClass("clickEventBound")||(a(".account-selector-dropdown").addClass("clickEventBound"),a(".account-selector-dropdown").on("click",function(){a(".account-selector-dropdown-items").hasClass("active")?(a(".account-selector-dropdown-items").removeClass("active"),a(".account-selector-dropdown").removeClass("active")):(a(".account-selector-dropdown-items").addClass("active"),a(".account-selector-dropdown").addClass("active"))}),
a(".account-selector-dropdown-items").on("click",function(b){a("."+b.target.id).trigger("click")}))},handleViewMulpleMarginAccts:function(){a(".page-content-title .account-title").text("All Margin Accounts");a(".page-content-title .page-content-title-subtext.account-registration-type").hide()},handleCleanMulpleMarginAccts:function(){var b=d.get("selectedAccounts"),c="";b&&!b.portfolio&&(b=b.accounts,1==b.length&&(c=b[0].acctName,a(".page-content-title .account-title").text(c),a(".page-content-title .account-title").html(a(".page-content-title .account-title").html().replace("\u00ae",
"<sup>&reg;</sup>")),a(".page-content-title .page-content-title-subtext.account-registration-type").show()))},refreshLedgerCard:function(){var b=d.get("selectedAccounts"),c=a(".js-footer-entitlement-info").data("is-ceentitlement");d.isPerformanceHidden()||c&&b.portfolio&&"simplified"==a(".card-layout-toggle--selected").data("card-toggle-value")?this.$el.hide():this.$el.show();this.setContent(null,b)},setContent:function(b,c){var e=c.accounts;this.$el.removeClass("display-none");this.$(".js-cash-available-to-withdraw").addClass("hide");
this._setFootNoteVisiable(!1);var h=d.getAllAccounts().length-d.getCreditCardAccounts().length-d.getLoanAccounts().length,g="Accounts ("+e.length+" of "+h+")";c.portfolio?this._displayPortfolioInfo(c.portfolio,c.accounts,c.fullViewAccounts,"Accounts ("+h+" of "+h+")"):null!=c.groupId?this._displayGroupInfo(c,c.accounts,g):1<e.length?this._displayAccountsInfo(e,g):this._displayOneAccountInfo(e[0],g);this.isEii&&this.removeEiiLedgerCardBody();this.adjustCardSectionWidth();d.hasSMAaccount(e)&&(a("#hasSMAaccount").show(),
a(".js-total-balance-value").text(a(".js-total-balance-value").text()+"*"));if(!a(".account-selector-dropdown").hasClass("initializedDropdown")){a(".account-selector-dropdown").addClass("initializedDropdown");for(e=0;e<a(".account-selector--tab").length;e++)a(".account-selector--tab").eq(e).data("acct-name")&&(h=a(".account-selector--tab").eq(e).data("acct-name"),h='<li><a href="#0" id="'+a(".account-selector--tab").eq(e).data("acct-number")+'">'+h+"</a></li>",a(".account-selector-dropdown-items").append(h))}},
_displayPortfolioInfo:function(a,b,c,d){this._displayTotalInfo("All Accounts",a.formattedBalance,d);this._displayTodayChange(a);c=a.fidelityBalance;a.hasFullViewAccount?(this.$(".js-total-balance .js-total-balance-attribution").addClass("display-none"),this.displayFidelityAcccountBalance(c)):(this.$(".js-total-balance .js-total-balance-attribution").removeClass("display-none"),this.displayFidelityAcccountBalance(!1));this.displayOutsideAccountBalances(!1);this._displayRORInfo(b[0],a.rorVal,a.changePctLink,
a.asOfTime)},_displayGroupInfo:function(b,c,d){this.displayFidelityAcccountBalance(!1);this.displayOutsideAccountBalances(!1);this._displayCashAvailableToWithdraw(c,!1);this.$(".js-total-balance .js-total-balance-attribution").removeClass("display-none");var e=a.grep(c,function(a){return"Credit Card Account"!==a.acctType}).length;1===c.length?this._displayOneAccountInfo(c[0],d):(0===e?this._displayTotalInfo(b.acctName,!1,d):this._displayTotalInfo(b.acctName,b.groupTotal,d),this.$(".js-today-change").removeClass("show").removeClass("hide").addClass("hide"),
this._displayRORInfo(!1))},_displayAccountsInfo:function(b,c){this.displayFidelityAcccountBalance(!1);this.displayOutsideAccountBalances(!1);this.$(".js-total-balance .js-total-balance-attribution").removeClass("display-none");var d=b.length,e="Multiple Account";2>=d&&(e=a.map(b,function(a){return a.acctName}).join(" & "));var h=this._calculateTotalBalance(b),g=a.grep(b,function(a){return"Credit Card Account"!==a.acctType});1===g.length?(this._displayTotalInfo(e,g[0].formattedBalance,c),this._displayRORInfo(g[0],
g[0].rorVal,g[0].changePctLink,g[0].asOfTime)):(2===d?this._displayTotalInfo(e,h,c):this._displayTotalInfo("Multiple Accounts",h,c),this._displayRORInfo(!1));this.displayFidelityAcccountBalance(!1);this.displayOutsideAccountBalances(!1)},displayFidelityAcccountBalance:function(a){a?(this.$(".js-full-view-fidelity-accounts").removeClass("hide").addClass("show"),this.$(".js-full-view-fidelity-accounts .js-full-view-fidelity-accounts-value").html(a)):(this.$(".js-full-view-fidelity-accounts").removeClass("show").addClass("hide"),
this.$(".js-full-view-fidelity-accounts .js-full-view-fidelity-accounts-value").empty())},displayOutsideAccountBalances:function(a){a?(this.$(".js-full-view-outside-accounts").removeClass("hide").addClass("show"),this.$(".js-full-view-outside-accounts .js-full-view-outside-accounts-value").html(a)):(this.$(".js-full-view-outside-accounts").removeClass("show").addClass("hide"),this.$(".js-full-view-outside-accounts .js-full-view-outside-accounts-value").empty())},_displayOneAccountInfo:function(a,
b){this.displayFidelityAcccountBalance(!1);this.displayOutsideAccountBalances(!1);this._displayCashAvailableToWithdraw(!1,a);this.$(".js-total-balance .js-total-balance-attribution").removeClass("display-none");"Credit Card Account"==a.acctType?(this._displayTotalInfo(a.acctName,!1,b),this._displayRORInfo(!1)):(this._displayTotalInfo(a.acctName,a.formattedBalance,b),this._displayTodayChange(a),this._displayRORInfo(a,a.rorVal,a.changePctLink,a.asOfTime))},_displayCashAvailableToWithdraw:function(b,
c){if(a(".js-ledger-region-totalCashAvailableToWithdraw").data("cashavailabletowithdraw-feature")){var d=a(".js-ledger-region-totalCashAvailableToWithdraw").data("total-cashavailabletowithdraw"),e=!1;!c&&1<=b.length&&(this.$(".js-cash-available-to-withdraw-fdic").addClass("hide"),a.each(b,function(a,b){"Cash Account"==b.acctType&&(e=!0)}));if(!b&&"Cash Account"==c.acctType){var e=!0,h=envMap.OLTX_URL+"/ftgw/fbc/ofpositions/fdicProgramBanksView?ACCOUNT="+c.acctNum;a(".js-cash-available-to-withdraw-fdic").on("click",
function(a){a.preventDefault();a=488;var b=518;window.open(h,"infowindowlargemenubar","width="+(void 0!=a?a:1024)+",height="+(void 0!=b?b:768)+",left=080,top=080,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no").focus()})}e&&(this.$(".js-cash-available-to-withdraw").removeClass("hide").addClass("show"),this.$(".js-cash-available-to-withdraw .js-cash-available-to-withdraw-value").html("$"+d),this._setFootNoteVisiable(!0))}},_setFootNoteVisiable:function(b){b?
a(".legal-footer--cash-available-to-withdraw").show():a(".legal-footer--cash-available-to-withdraw").hide()},_displayCreditCardInfo:function(){this._displayRORInfo(!1)},_displayTotalInfo:function(a,b,c){this.$(".js-total-balance-title").text(c);!1===b?this.$(".js-total-balance-value").hide():(this.$(".js-total-balance-value").show(),this.$(".js-total-balance-value").html(b));b&&"View Income Value"!=b?this.$(".js-timestamp-section").show():this.$(".js-timestamp-section").hide()},_displayTodayChange:function(b){var c=
a(".js-today-change-value-percent");c.removeClass("color-positive").removeClass("color-negative");null!=b.accountTodayChangeValue?-1!=b.accountTodayChangeValue.indexOf("0.00")||""==b.accountTodayChangeValue||""==b.accountTodayChangePercent?this.$(".js-today-change").removeClass("show").addClass("hide"):(this.$(".js-today-change").removeClass("hide").addClass("show"),a(".legal-footer--item.summary-tab.today-change-footer").show(),c.text(" ("+b.accountTodayChangePercent+")"),-1!=b.accountTodayChangePercent.indexOf("+")&&
c.addClass("color-positive"),-1!=b.accountTodayChangePercent.indexOf("-")&&c.addClass("color-negative"),c=this.$(".js-today-change-value-dollar").removeClass("color-negative color-positive"),-1==b.accountTodayChangeValue.indexOf("-")?c.addClass("color-positive"):c.addClass("color-negative"),c.text(b.accountTodayChangeValue)):advisor_indicator?(this.$(".js-today-change").removeClass("show").addClass("hide"),a(".legal-footer--item.summary-tab.today-change-footer").hide()):-1!=b.totalTodayChangeValue.indexOf("0.00")||
""==b.totalTodayChangeValue||""==b.totalTodayChangePercent?this.$(".js-today-change").removeClass("show").addClass("hide"):(this.$(".js-today-change").removeClass("hide").addClass("show"),c.text(" ("+b.totalTodayChangePercent+")"),-1!=b.totalTodayChangePercent.indexOf("+")&&-1==b.totalTodayChangePercent.indexOf("0.00")&&c.addClass("color-positive"),-1!=b.totalTodayChangePercent.indexOf("-")&&-1==b.totalTodayChangePercent.indexOf("0.00")&&c.addClass("color-negative"),-1==b.totalTodayChangeValue.indexOf("-")&&
this.$(".js-today-change-value-dollar").addClass("color-positive"),-1!=b.totalTodayChangeValue.indexOf("-")&&this.$(".js-today-change-value-dollar").addClass("color-negative"),this.$(".js-today-change-value-dollar").text(b.totalTodayChangeValue))},_displayRORInfo:function(b,c,d,e){if(advisor_indicator)this.$(".js-rate-of-return").removeClass("show").addClass("hide"),this.getAppContext().footNote.isPerformanceAvailable(!1);else{if("all-accounts"===this.selection||"group"===this.selection)this.$(".ledger--section.js-rate-of-return").remove(),
this.$(".eii-ledger-card__accounts-balance-detail-row.js-rate-of-return").remove(),this.getAppContext().footNote.isPerformanceAvailable(!1);c&&!isNaN(c)&&0!=c?(this.$(".js-rate-of-return .js-rate-of-return-title").html('<a href="/ftgw/fbc/ofperformance/perfOverview" title="Click to view Rate of Return analysis on the Performance tab.">Rate of Return</a>*** (1-Year)'),this.$(".js-rate-of-return").removeClass("hide").addClass("show"),b=this.$(".js-rate-of-return-value"),d=this.$(".js-rate-of-return-as-of-time"),
"N/A"!=c&&"null"!=e&&"false"!=e?(d.text("AS OF "+e),d.show()):d.hide(),b.removeClass("color-positive color-negative ytd-change"),0<c?(b.addClass("color-positive"),b.text("+"+c+"%")):0>c?(b.addClass("color-negative"),b.text(c+"%")):"--"==c?(b.addClass("ytd-change"),b.text(c)):(b.addClass("ytd-change"),b.text("0.00%")),c=a(".more-tab--tab.tabs--selected").data("tab-name"),"Summary"==c&&this.getAppContext().footNote.isPerformanceAvailable(!0)):(this.$(".js-rate-of-return").removeClass("show").addClass("hide"),
c=a(".more-tab--tab.tabs--selected").data("tab-name"),"Summary"==c&&this.getAppContext().footNote.isPerformanceAvailable(!1))}},_calculateTotalBalance:function(b){if(0===a.grep(b,function(a){return"Credit Card Account"==a.acctType?!1:!isNaN(a.totalBalance)}).length)return!1;for(var c=0,d=0;d<b.length;d++)isNaN(b[d].totalBalance)||(c="Credit Card Account"==b[d].acctType&&0>b[d].totalBalance?c+0:c+b[d].totalBalance);return e.formatPrice({price:c,prefix:"$",digits:2,addCommas:!0})},submitLink:function(b){var c=
a(b.currentTarget).attr("href"),d=c.indexOf("'")+1,e=c.indexOf(",")-1,c=c.substring(d,e);window.open(c);b.stopPropagation()},adjustCardSectionWidth:function(){this.$(".ledger--section").removeClass("fidgrid--col-third").removeClass("fidgrid--col-quarter");4===this.$(".ledger--section:visible").length?this.$(".ledger--section").addClass("fidgrid--col-quarter"):this.$(".ledger--section").addClass("fidgrid--col-third")},clickBalanceLink:function(){a(".tabs--tab-link[href=#tabContentBalance]").trigger("click")},
removeEiiLedgerCardBody:function(){this.$(".eii-ledger-card__body>.eii-ledger-card__accounts-balance-detail-row").is(":visible")||this.$(".eii-ledger-card__body").hide()}})});
define("views/card-ledger-ngapp-view",["jquery","backbone","views/base-view","util/progressbar","util/eventhub-backbone"],function(a,b,g,c){return g.extend({accounts:"",type:"",selection:"",groupId:"",totalGroupAcctVal:"",portfolioTotalAcctVal:"",fidelityAcctVal:"",portfolioTotalGainLoss:"",portfolioTotalChangeAmt:"",individualBalance:"",defaults:{appName:"BalanceCard",basePath:envMap.DPCS_URL+"balance-card/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},events:{"click .js-call-to-action":"clickBalanceLink"},
initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){var a=this.options.appName,b=this.options.basePath+this.options.pathToBundles+this.options.cssBundle;this.$wrapperClass.empty().append((toggleMap.DPCSBalanceCardDexResiliencyFeature?"":'<link href="'+b+'" rel="stylesheet">')+'<div id="'+a+'" ng-init="accounts=\''+this.accounts+"';type='"+
this.type+"';selection='"+this.selection+"';groupId='"+this.groupId+"';totalGroupAcctVal='"+this.totalGroupAcctVal+"';portfolioTotalAcctVal='"+this.portfolioTotalAcctVal+"';fidelityAcctVal='"+this.fidelityAcctVal+"';portfolioTotalGainLoss='"+this.portfolioTotalGainLoss+"';portfolioTotalChangeAmt='"+this.portfolioTotalChangeAmt+"';individualBalance='"+this.individualBalance+'\'"><div ng-controller="balanceCardCtrl" id="your-account-balance"><balance-card-directive></balance-card-directive></div><h2 class="fid-card--title hidden">Your Balance Details</h2></div>')},
bootstrap:function(b,c,h){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[h])})},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName,h=b+this.options.pathToBundles+this.options.jsBundle,f="#"+c;this.insertMarkup();toggleMap.DPCSBalanceCardDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DPCS_URL_VALUE+"/ftgw/dpcs/balance-card/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a(f).html(b)}):this.bootstrap(h,f,
c);a(f).attr("data-app-path",b);a(f).attr("data-injected",!0)},refresh:function(){console.log("single acct toggle  "+toggleMap.dpcsBalanceCardFeatureToggle);console.log("multi acct toggle "+toggleMap.dpcsMultiAcctBalanceCardFeatureToggle);this.renderMicroApp();c.hideLoading()},clickBalanceLink:function(){a(".tabs--tab-link[href=#tabContentBalance]").trigger("click")},setAccounts:function(a){this.accounts=a;console.log("inside dpcs balance card account number is  "+a)},setAcctType:function(a){this.type=
a;console.log("inside dpcs balance card type is  "+a)},setSelectionType:function(a){this.selection=a;console.log("inside dpcs balance card selection is  "+a)},setGroupId:function(a){this.groupId=a;console.log("inside dpcs balance card groupId is  "+a)},setGroupTotalAcctVal:function(a){this.totalGroupAcctVal=a;console.log("inside dpcs balance card totalGroupAcctVal is  "+a)},setPortfolioTotalAcctVal:function(a){this.portfolioTotalAcctVal=a},setFidelityAcctVal:function(a){this.fidelityAcctVal=a},setPortfolioTotalGainLoss:function(a){this.portfolioTotalGainLoss=
a},setPortfolioTotalChangeAmt:function(a){this.portfolioTotalChangeAmt=a},setIndividualBalance:function(a){this.individualBalance=a}})});
(function(){function a(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function b(){var a,b=arguments,c,d={},e=function(a,b){var c,d;"object"!==typeof a&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&"object"===typeof c&&"[object Array]"!==Object.prototype.toString.call(c)&&"renderTo"!==d&&"number"!==typeof c.nodeType?e(a[d]||{},c):b[d]);return a};!0===b[0]&&(d=b[1],b=Array.prototype.slice.call(b,2));c=b.length;for(a=0;a<c;a++)d=e(d,b[a]);return d}function g(a,b){return parseInt(a,b||
10)}function c(a){return"string"===typeof a}function e(a){return a&&"object"===typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function h(a){return"number"===typeof a}function f(a){return Ba.log(a)/Ba.LN10}function j(a){return Ba.pow(10,a)}function k(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function l(a){return a!==H&&null!==a}function p(a,b,d){var f,j;if(c(b))l(d)?a.setAttribute(b,d):a&&a.getAttribute&&(j=a.getAttribute(b));else if(l(b)&&e(b))for(f in b)a.setAttribute(f,
b[f]);return j}function m(a){return d(a)?a:[a]}function n(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],c!==H&&null!==c)return c}function r(b,c){db&&(!T&&c&&c.opacity!==H)&&(c.filter="alpha(opacity="+100*c.opacity+")");a(b.style,c)}function s(b,c,d,e,f){b=M.createElement(b);c&&a(b,c);f&&r(b,{padding:0,border:ha,margin:0});d&&r(b,d);e&&e.appendChild(b);return b}function v(b,c){var d=function(){return H};d.prototype=new b;a(d.prototype,c);return d}function A(a,b,c,d){var e=xa.numberFormat,
f=aa.lang,j=+a||0,h=-1===b?(j.toString().split(".")[1]||"").length:isNaN(b=Ca(b))?2:b,k=void 0===c?f.decimalPoint:c,f=void 0===d?f.thousandsSep:d,l=0>j?"-":"",n=String(g(j=Ca(j).toFixed(h))),m=3<n.length?n.length%3:0;return e!==A?e(a,b,c,d):l+(m?n.substr(0,m)+f:"")+n.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+f)+(h?k+Ca(j-n).toFixed(h).slice(2):"")}function w(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function z(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);
a.unshift(d);return c.apply(this,a)}}function D(a,b){for(var c="{",d=!1,e,f,j,h,g,k=[];-1!==(c=a.indexOf(c));){e=a.slice(0,c);if(d){f=e.split(":");j=f.shift().split(".");g=j.length;e=b;for(h=0;h<g;h++)e=e[j[h]];f.length&&(f=f.join(":"),j=/\.([0-9])/,h=aa.lang,/f$/.test(f)?(g=(g=f.match(j))?g[1]:-1,null!==e&&(e=A(e,g,h.decimalPoint,-1<f.indexOf(",")?h.thousandsSep:""))):e=L(f,e))}k.push(e);a=a.slice(c+1);c=(d=!d)?"}":"{"}k.push(a);return k.join("")}function y(a){return Ba.pow(10,ta(Ba.log(a)/Ba.LN10))}
function B(a,b,c,d){var e;c=n(c,1);e=a/c;b||(b=[1,2,2.5,5,10],!1===d&&(1===c?b=[1,2,5,10]:0.1>=c&&(b=[1/c])));for(d=0;d<b.length&&!(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2);d++);return a*c}function I(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].ss_i=e;a.sort(function(a,c){d=b(a,c);return 0===d?a.ss_i-c.ss_i:d});for(e=0;e<c;e++)delete a[e].ss_i}function S(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function J(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function O(a,b){for(var c in a)a[c]&&
a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function V(a){ma||(ma=s(Db));a&&ma.appendChild(a);ma.innerHTML=""}function N(a){return parseFloat(a.toPrecision(14))}function P(a,b){wa=n(a,b.animation)}function U(){var a=aa.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";G=aa.global.Date||window.Date;rb=6E4*(a&&aa.global.timezoneOffset||0);t=a?G.UTC:function(a,b,c,d,e,f){return(new G(a,b,n(c,1),n(d,0),n(e,0),n(f,0))).getTime()};eb=b+"Minutes";$a=b+"Hours";ac=b+"Day";lb=b+"Date";zb=b+"Month";
ic=b+"FullYear";qc=c+"Minutes";Bc=c+"Hours";rc=c+"Date";Eb=c+"Month";Lb=c+"FullYear"}function W(){}function ca(a,b,c,d){this.axis=a;this.pos=b;this.type=c||"";this.isNew=!0;!c&&!d&&this.addLabel()}function R(){this.init.apply(this,arguments)}function Z(){this.init.apply(this,arguments)}function ea(a,b,c,d,e){var f=a.chart.inverted;this.axis=a;this.isNegative=c;this.options=b;this.x=d;this.total=null;this.points={};this.stack=e;this.alignOptions={align:b.align||(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||
(f?"middle":c?"bottom":"top"),y:n(b.y,f?4:c?14:-6),x:n(b.x,f?c?-6:6:0)};this.textAlign=b.textAlign||(f?c?"right":"left":"center")}function la(a){var b=a.options,c=b.navigator,d=c.enabled,b=b.scrollbar,e=b.enabled,f=d?c.height:0,j=e?b.height:0;this.handles=[];this.scrollbarButtons=[];this.elementsToDestroy=[];this.chart=a;this.setBaseSeries();this.height=f;this.scrollbarHeight=j;this.scrollbarEnabled=e;this.navigatorEnabled=d;this.navigatorOptions=c;this.scrollbarOptions=b;this.outlineHeight=f+j;this.init()}
function va(a){this.init(a)}var H,M=document,F=window,Ba=Math,X=Ba.round,ta=Ba.floor,q=Ba.ceil,Y=Ba.max,sa=Ba.min,Ca=Ba.abs,Aa=Ba.cos,Va=Ba.sin,za=Ba.PI,cb=2*za/360,Na=navigator.userAgent,tb=F.opera,db=/msie/i.test(Na)&&!tb,Sa=8===M.documentMode,Ha=/AppleWebKit/.test(Na),ka=/Firefox/.test(Na),na=/(Mobile|Android|Windows Phone)/.test(Na),oa="http://www.w3.org/2000/svg",T=!!M.createElementNS&&!!M.createElementNS(oa,"svg").createSVGRect,ia=ka&&4>parseInt(Na.split("Firefox/")[1],10),qa=!T&&!db&&!!M.createElement("canvas").getContext,
ja,Ka,ra={},Fa=0,ma,aa,L,wa,E,Ea,Ma,ya=function(){return H},pa=[],Q=0,Db="div",ha="none",kb=/^[0-9]+$/,qb="stroke-width",G,t,rb,eb,$a,ac,lb,zb,ic,qc,Bc,rc,Eb,Lb,La={},xa;F.Highcharts?Ma(16,!0):xa=F.Highcharts={};L=function(b,c,d){if(!l(c)||isNaN(c))return"Invalid date";b=n(b,"%Y-%m-%d %H:%M:%S");var e=new G(c-rb),f,j=e[$a](),h=e[ac](),g=e[lb](),k=e[zb](),m=e[ic](),p=aa.lang,r=p.weekdays,e=a({a:r[h].substr(0,3),A:r[h],d:w(g),e:g,b:p.shortMonths[k],B:p.months[k],m:w(k+1),y:m.toString().substr(2,2),
Y:m,H:w(j),I:w(j%12||12),l:j%12||12,M:w(e[eb]()),p:12>j?"AM":"PM",P:12>j?"am":"pm",S:w(e.getSeconds()),L:w(X(c%1E3),3)},xa.dateFormats);for(f in e)for(;-1!==b.indexOf("%"+f);)b=b.replace("%"+f,"function"===typeof e[f]?e[f](c):e[f]);return d?b.substr(0,1).toUpperCase()+b.substr(1):b};Ma=function(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;F.console&&console.log(c)};Ea={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5,month:26784E5,year:31556952E3};
E={init:function(a,b,c){b=b||"";var d=a.shift,e=-1<b.indexOf("C"),f=e?7:3,j;b=b.split(" ");c=[].concat(c);var h,g,k=function(a){for(j=a.length;j--;)"M"===a[j]&&a.splice(j+1,0,a[j+1],a[j+2],a[j+1],a[j+2])};e&&(k(b),k(c));a.isArea&&(h=b.splice(b.length-6,6),g=c.splice(c.length-6,6));if(d<=c.length/f&&b.length===c.length)for(;d--;)c=[].concat(c).splice(0,f).concat(c);a.shift=0;if(b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-f,f),e&&(d[f-6]=d[f-2],d[f-5]=d[f-1]),b=b.concat(d);h&&
(b=b.concat(h),c=c.concat(g));return[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(1===c)e=d;else if(f===b.length&&1>c)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:c*parseFloat(b[f]-d)+d;else e=b;return e}};var Ta=F.jQuery;F.HighchartsAdapter=F.HighchartsAdapter||Ta&&{init:function(a){var b=Ta.fx;Ta.extend(Ta.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});Ta.each(["cur","_default","width","height","opacity"],function(a,c){var d=b.step,e;"cur"===c?d=b.prototype:"_default"===
c&&Ta.Tween&&(d=Ta.Tween.propHooks[c],c="set");(e=d[c])&&(d[c]=function(b){var d;b=a?b:this;if("align"!==b.prop)return d=b.elem,d.attr?d.attr(b.prop,"cur"===c?H:b.now):e.apply(this,arguments)})});z(Ta.cssHooks.opacity,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)});this.addAnimSetter("d",function(b){var c=b.elem,d;b.started||(d=a.init(c,c.d,c.toD),b.start=d[0],b.end=d[1],b.started=!0);c.attr("d",a.step(b.start,b.end,b.pos,c.toD))});this.each=Array.prototype.forEach?function(a,
b){return Array.prototype.forEach.call(a,b)}:function(a,b){var c,d=a.length;for(c=0;c<d;c++)if(!1===b.call(a[c],a[c],c,a))return c};Ta.fn.highcharts=function(){var a="Chart",b=arguments,d,e;this[0]&&(c(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1)),d=b[0],d!==H&&(d.chart=d.chart||{},d.chart.renderTo=this[0],new xa[a](d,b[1]),e=this),d===H&&(e=pa[p(this[0],"data-highcharts-chart")]));return e}},addAnimSetter:function(a,b){Ta.Tween?Ta.Tween.propHooks[a]={set:b}:Ta.fx.step[a]=b},getScript:Ta.getScript,
inArray:Ta.inArray,adapterRun:function(a,b){return Ta(a)[b]()},grep:Ta.grep,map:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c},offset:function(a){return Ta(a).offset()},addEvent:function(a,b,c){Ta(a).bind(b,c)},removeEvent:function(a,b,c){var d=M.removeEventListener?"removeEventListener":"detachEvent";M[d]&&a&&!a[d]&&(a[d]=function(){});Ta(a).unbind(b,c)},fireEvent:function(b,c,d,e){var f=Ta.Event(c),j="detached"+c,h;!db&&d&&(delete d.layerX,delete d.layerY,
delete d.returnValue);a(f,d);b[c]&&(b[j]=b[c],b[c]=null);Ta.each(["preventDefault","stopPropagation"],function(a,b){var c=f[b];f[b]=function(){try{c.call(f)}catch(a){"preventDefault"===b&&(h=!0)}}});Ta(b).trigger(f);b[j]&&(b[c]=b[j],b[j]=null);e&&!f.isDefaultPrevented()&&!h&&e(f)},washMouseEvent:function(a){var b=a.originalEvent||a;b.pageX===H&&(b.pageX=a.pageX,b.pageY=a.pageY);return b},animate:function(a,b,c){var d=Ta(a);a.style||(a.style={});b.d&&(a.toD=b.d,b.d=1);d.stop();b.opacity!==H&&a.attr&&
(b.opacity+="px");a.hasAnim=1;d.animate(b,c)},stop:function(a){a.hasAnim&&Ta(a).stop()}};var Wa=F.HighchartsAdapter,Ra=Wa||{};Wa&&Wa.init.call(Wa,E);var Pb=Ra.adapterRun,tc=Ra.getScript,Jb=Ra.inArray,K=Ra.each,ob=Ra.grep,bc=Ra.offset,hb=Ra.map,Ia=Ra.addEvent,bb=Ra.removeEvent,Ua=Ra.fireEvent,Cc=Ra.washMouseEvent,Ya=Ra.animate,Qb=Ra.stop,Ra={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};aa={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #8085e8 #8d4653 #91e8e1".split(" "),
symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.0.4/modules/canvas-tools.js",
VMLRadialGradientURL:"http://code.highcharts.com/stock/2.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,
showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:b(Ra,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":A(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},
stickyTracking:!0,turboThreshold:1E3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",
x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:T,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",
year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:na?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var ab=aa.plotOptions,
Wa=ab.line;U();var Mc=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,uc=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Dc=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,xb=function(a){var c=[],d,e;a&&a.stops?e=hb(a.stops,function(a){return xb(a[1])}):(d=Mc.exec(a))?c=[g(d[1]),g(d[2]),g(d[3]),parseFloat(d[4],10)]:(d=uc.exec(a))?c=[g(d[1],16),g(d[2],16),g(d[3],16),1]:(d=Dc.exec(a))&&(c=[g(d[1]),g(d[2]),g(d[3]),1]);return{get:function(d){var f;
e?(f=b(a),f.stops=[].concat(f.stops),K(e,function(a,b){f.stops[b]=[f.stops[b][0],a.get(d)]})):f=c&&!isNaN(c[0])?"rgb"===d?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===d?c[3]:"rgba("+c.join(",")+")":a;return f},brighten:function(a){if(e)K(e,function(b){b.brighten(a)});else if(h(a)&&0!==a){var b;for(b=0;3>b;b++)c[b]+=g(255*a),0>c[b]&&(c[b]=0),255<c[b]&&(c[b]=255)}return this},rgba:c,setOpacity:function(a){c[3]=a;return this}}};W.prototype={opacity:1,textProps:"fontSize fontWeight fontFamily color lineHeight width textDecoration textShadow HcTextStroke".split(" "),
init:function(a,b){this.element="span"===b?s(b):M.createElementNS(oa,b);this.renderer=a},animate:function(a,c,d){c=n(c,wa,!0);Qb(this);c?(c=b(c,{}),d&&(c.complete=d),Ya(this,a,c)):(this.attr(a),d&&d());return this},colorGradient:function(a,c,e){var f=this.renderer,j,h,g,k,n,m,p,r,s,q,t=[];a.linearGradient?h="linearGradient":a.radialGradient&&(h="radialGradient");if(h){g=a[h];k=f.gradients;m=a.stops;s=e.radialReference;d(g)&&(a[h]=g={x1:g[0],y1:g[1],x2:g[2],y2:g[3],gradientUnits:"userSpaceOnUse"});
"radialGradient"===h&&s&&!l(g.gradientUnits)&&(g=b(g,{cx:s[0]-s[2]/2+g.cx*s[2],cy:s[1]-s[2]/2+g.cy*s[2],r:g.r*s[2],gradientUnits:"userSpaceOnUse"}));for(q in g)"id"!==q&&t.push(q,g[q]);for(q in m)t.push(m[q]);t=t.join(",");k[t]?a=k[t].attr("id"):(g.id=a="highcharts-"+Fa++,k[t]=n=f.createElement(h).attr(g).add(f.defs),n.stops=[],K(m,function(a){0===a[1].indexOf("rgba")?(j=xb(a[1]),p=j.get("rgb"),r=j.get("a")):(p=a[1],r=1);a=f.createElement("stop").attr({offset:a[0],"stop-color":p,"stop-opacity":r}).add(n);
n.stops.push(a)}));e.setAttribute(c,"url("+f.url+"#"+a+")")}},attr:function(a,b){var c,d,e=this.element,f,j=this,h;"string"===typeof a&&b!==H&&(c=a,a={},a[c]=b);if("string"===typeof a)j=(this[a+"Getter"]||this._defaultGetter).call(this,a,e);else{for(c in a){d=a[c];h=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(f||(this.symbolAttr(a),f=!0),h=!0);if(this.rotation&&("x"===c||"y"===c))this.doTransform=!0;h||(this[c+"Setter"]||this._defaultSetter).call(this,d,
c,e);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)&&this.updateShadows(c,d)}this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return j},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,"height"===a?Y(b-(c[d].cutHeight||0),0):"d"===a?this.d:b)},addClass:function(a){var b=this.element,c=p(b,"class")||"";-1===c.indexOf(a)&&p(b,"class",c+" "+a);return this},symbolAttr:function(a){var b=this;K("x y r start end width height innerR anchorX anchorY".split(" "),
function(c){b[c]=n(a[c],b[c])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":ha)},crisp:function(a){var b,c={},d,e=a.strokeWidth||this.strokeWidth||0;d=X(e)%2/2;a.x=ta(a.x||this.x||0)+d;a.y=ta(a.y||this.y||0)+d;a.width=ta((a.width||this.width||0)-2*d);a.height=ta((a.height||this.height||0)-2*d);a.strokeWidth=e;for(b in a)this[b]!==a[b]&&(this[b]=c[b]=a[b]);return c},css:function(b){var c=
this.styles,d={},e=this.element,f,j,h="";f=!c;b&&b.color&&(b.fill=b.color);if(c)for(j in b)b[j]!==c[j]&&(d[j]=b[j],f=!0);if(f){f=this.textWidth=b&&b.width&&"text"===e.nodeName.toLowerCase()&&g(b.width);c&&(b=a(c,d));this.styles=b;f&&(qa||!T&&this.renderer.forExport)&&delete b.width;if(db&&!T)r(this.element,b);else{c=function(a,b){return"-"+b.toLowerCase()};for(j in b)h+=j.replace(/([A-Z])/g,c)+":"+b[j]+";";p(e,"style",h)}f&&this.added&&this.renderer.buildText(this)}return this},on:function(a,b){var c=
this,d=c.element;Ka&&"click"===a?(d.ontouchstart=function(a){c.touchEventFired=G.now();a.preventDefault();b.call(d,a)},d.onclick=function(a){(-1===Na.indexOf("Android")||1100<G.now()-(c.touchEventFired||0))&&b.call(d,a)}):d["on"+a]=b;return this},setRadialReference:function(a){this.element.radialReference=a;return this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||
0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation,j=this.element;e&&(a+=this.attr("width"),b+=this.attr("height"));a=["translate("+a+","+b+")"];e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(j.getAttribute("x")||0)+" "+(j.getAttribute("y")||0)+")");(l(c)||l(d))&&a.push("scale("+n(c,1)+" "+n(d,1)+")");a.length&&j.setAttribute("transform",a.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,d){var e,
f,j,h,g={};f=this.renderer;j=f.alignedObjects;if(a){if(this.alignOptions=a,this.alignByTranslate=b,!d||c(d))this.alignTo=e=d||"renderer",k(j,this),j.push(this),d=null}else a=this.alignOptions,b=this.alignByTranslate,e=this.alignTo;d=n(d,f[e],f);e=a.align;f=a.verticalAlign;j=(d.x||0)+(a.x||0);h=(d.y||0)+(a.y||0);if("right"===e||"center"===e)j+=(d.width-(a.width||0))/{right:1,center:2}[e];g[b?"translateX":"x"]=X(j);if("bottom"===f||"middle"===f)h+=(d.height-(a.height||0))/({bottom:1,middle:2}[f]||1);
g[b?"translateY":"y"]=X(h);this[this.placed?"animate":"attr"](g);this.placed=!0;this.alignAttr=g;return this},getBBox:function(){var b=this.bBox,c=this.renderer,d,e,f=this.rotation;d=this.element;var j=this.styles,h=f*cb;e=this.textStr;var g;if(""===e||kb.test(e))g="num."+e.toString().length+(j?"|"+j.fontSize+"|"+j.fontFamily:"");g&&(b=c.cache[g]);if(!b){if(d.namespaceURI===oa||c.forExport){try{b=d.getBBox?a({},d.getBBox()):{width:d.offsetWidth,height:d.offsetHeight}}catch(k){}if(!b||0>b.width)b=
{width:0,height:0}}else b=this.htmlGetBBox();c.isSVG&&(d=b.width,e=b.height,db&&(j&&"11px"===j.fontSize&&"16.9"===e.toPrecision(3))&&(b.height=e=14),f&&(b.width=Ca(e*Va(h))+Ca(d*Aa(h)),b.height=Ca(e*Aa(h))+Ca(d*Va(h))));this.bBox=b;g&&(c.cache[g]=b)}return b},show:function(a){a&&this.element.namespaceURI===oa?this.element.removeAttribute("visibility"):this.attr({visibility:a?"inherit":"visible"});return this},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;
b.animate({opacity:0},{duration:a||150,complete:function(){b.attr({y:-9999})}})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=this.element,f=this.zIndex,j,h;a&&(this.parentGroup=a);this.parentInverted=a&&a.inverted;void 0!==this.textStr&&b.buildText(this);f&&(c.handleZ=!0,f=g(f));if(c.handleZ){a=d.childNodes;for(j=0;j<a.length;j++)if(b=a[j],c=p(b,"zIndex"),b!==e&&(g(c)>f||!l(f)&&l(c))){d.insertBefore(e,b);h=!0;break}}h||d.appendChild(e);this.added=!0;if(this.onAdd)this.onAdd();
return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.renderer.isSVG&&"SPAN"===b.nodeName&&a.parentGroup,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=b.point=null;Qb(a);a.clipPath&&(a.clipPath=a.clipPath.destroy());if(a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}a.safeRemoveChild(b);for(c&&K(c,function(b){a.safeRemoveChild(b)});d&&d.div&&0===d.div.childNodes.length;)b=
d.parentGroup,a.safeRemoveChild(d.div),delete d.div,d=b;a.alignTo&&k(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},shadow:function(a,b,c){var d=[],e,f,j=this.element,h,g,k,l;if(a){g=n(a.width,3);k=(a.opacity||0.15)/g;l=this.parentInverted?"(-1,-1)":"("+n(a.offsetX,1)+", "+n(a.offsetY,1)+")";for(e=1;e<=g;e++)f=j.cloneNode(0),h=2*g+1-2*e,p(f,{isShadow:"true",stroke:a.color||"black","stroke-opacity":k*e,"stroke-width":h,transform:"translate"+l,fill:ha}),c&&(p(f,"height",Y(p(f,"height")-
h,0)),f.cutHeight=h),b?b.element.appendChild(f):j.parentNode.insertBefore(f,j),d.push(f);this.shadows=d}return this},xGetter:function(a){"circle"===this.element.nodeName&&(a={x:"cx",y:"cy"}[a]||a);return this._defaultGetter(a)},_defaultGetter:function(a){a=n(this[a],this.element?this.element.getAttribute(a):null,0);/^[\-0-9\.]+$/.test(a)&&(a=parseFloat(a));return a},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" "));/(NaN| {2}|^$)/.test(a)&&(a="M 0 0");c.setAttribute(b,a);this[b]=a},dashstyleSetter:function(a){var b;
if(a=a&&a.toLowerCase()){a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(b=a.length;b--;)a[b]=g(a[b])*this["stroke-width"];a=a.join(",").replace("NaN","none");this.element.setAttribute("stroke-dasharray",a)}},alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},
opacitySetter:function(a,b,c){this[b]=a;c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=M.createElementNS(oa,"title"),this.element.appendChild(b));b.textContent=n(a,"").replace(/<[^>]*>/g,"")},textSetter:function(a){a!==this.textStr&&(delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this))},fillSetter:function(a,b,c){"string"===typeof a?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},zIndexSetter:function(a,b,c){c.setAttribute(b,
a);this[b]=a},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}};W.prototype.yGetter=W.prototype.xGetter;W.prototype.translateXSetter=W.prototype.translateYSetter=W.prototype.rotationSetter=W.prototype.verticalAlignSetter=W.prototype.scaleXSetter=W.prototype.scaleYSetter=function(a,b){this[b]=a;this.doTransform=!0};W.prototype["stroke-widthSetter"]=W.prototype.strokeSetter=function(a,b,c){this[b]=a;this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],W.prototype.fillSetter.call(this,
this.stroke,"stroke",c),c.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===b&&(0===a&&this.hasStroke)&&(c.removeAttribute("stroke"),this.hasStroke=!1)};var pb=function(){this.init.apply(this,arguments)};pb.prototype={Element:W,init:function(a,b,c,d,e){var f=location,j;d=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d));j=d.element;a.appendChild(j);-1===a.innerHTML.indexOf("xmlns")&&p(j,"xmlns",oa);this.isSVG=!0;this.box=j;this.boxWrapper=d;
this.alignedObjects=[];this.url=(ka||Ha)&&M.getElementsByTagName("base").length?f.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(M.createTextNode("Created with Highstock 2.0.4"));this.defs=this.createElement("defs").add();this.forExport=e;this.gradients={};this.cache={};this.setSize(b,c,!1);var h;ka&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){r(a,{left:0,top:0});h=a.getBoundingClientRect();r(a,{left:q(h.left)-
h.left+"px",top:q(h.top)-h.top+"px"})},b(),Ia(F,"resize",b))},getStyle:function(b){return this.style=a({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},b)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();O(this.gradients||{});this.gradients=null;a&&(this.defs=a.destroy());this.subPixelFix&&bb(F,"resize",this.subPixelFix);return this.alignedObjects=
null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},buildText:function(a){for(var b=a.element,c=this,d=c.forExport,e=n(a.textStr,"").toString(),f=-1!==e.indexOf("<"),j=b.childNodes,h,k,l=p(b,"x"),m=a.styles,s=a.textWidth,q=m&&m.lineHeight,t=m&&m.HcTextStroke,z=j.length,v=function(a){return q?g(q):c.fontMetrics(/(px|em)$/.test(a&&a.style.fontSize)?a.style.fontSize:m&&m.fontSize||c.style.fontSize||12,a).h};z--;)b.removeChild(j[z]);!f&&!t&&-1===e.indexOf(" ")?
b.appendChild(M.createTextNode(e)):(h=/<.*style="([^"]+)".*>/,k=/<.*href="(http[^"]+)".*>/,s&&!a.added&&this.box.appendChild(b),e=f?e.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[e],""===e[e.length-1]&&e.pop(),K(e,function(e,f){var j,g=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");j=e.split("|||");K(j,function(e){if(""!==
e||1===j.length){var n={},ba=M.createElementNS(oa,"tspan"),ga;h.test(e)&&(ga=e.match(h)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),p(ba,"style",ga));k.test(e)&&!d&&(p(ba,"onclick",'location.href="'+e.match(k)[1]+'"'),r(ba,{cursor:"pointer"}));e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(" "!==e){ba.appendChild(M.createTextNode(e));g?n.dx=0:f&&null!==l&&(n.x=l);p(ba,n);b.appendChild(ba);!g&&f&&(!T&&d&&r(ba,{display:"block"}),p(ba,"dy",v(ba)));if(s){e=e.replace(/([^\^])-/g,
"$1- ").split(" ");for(var n=1<j.length||1<e.length&&"nowrap"!==m.whiteSpace,q,t,z=m.HcHeight,Ga=[],y=v(ba),w=1;n&&(e.length||Ga.length);)delete a.bBox,q=a.getBBox(),t=q.width,!T&&c.forExport&&(t=c.measureSpanWidth(ba.firstChild.data,a.styles)),q=t>s,!q||1===e.length?(e=Ga,Ga=[],e.length&&(w++,z&&w*y>z?(e=["..."],a.attr("title",a.textStr)):(ba=M.createElementNS(oa,"tspan"),p(ba,{dy:y,x:l}),ga&&p(ba,"style",ga),b.appendChild(ba))),t>s&&(s=t)):(ba.removeChild(ba.firstChild),Ga.unshift(e.pop())),e.length&&
ba.appendChild(M.createTextNode(e.join(" ").replace(/- /g,"-")))}g++}}})}))},button:function(c,d,e,f,j,h,g,k,l){var n=this.label(c,d,e,l,null,null,null,null,"button"),m=0,p,r,s,q,t,z;c={x1:0,y1:0,x2:0,y2:1};j=b({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:c,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},j);s=j.style;delete j.style;h=b(j,{stroke:"#68A",fill:{linearGradient:c,stops:[[0,"#FFF"],[1,"#ACF"]]}},h);q=h.style;delete h.style;g=b(j,{stroke:"#68A",fill:{linearGradient:c,
stops:[[0,"#9BD"],[1,"#CDF"]]}},g);t=g.style;delete g.style;k=b(j,{style:{color:"#CCC"}},k);z=k.style;delete k.style;Ia(n.element,db?"mouseover":"mouseenter",function(){3!==m&&n.attr(h).css(q)});Ia(n.element,db?"mouseout":"mouseleave",function(){3!==m&&(p=[j,h,g][m],r=[s,q,t][m],n.attr(p).css(r))});n.setState=function(a){(n.state=m=a)?2===a?n.attr(g).css(t):3===a&&n.attr(k).css(z):n.attr(j).css(s)};return n.on("click",function(){3!==m&&f.call(n)}).attr(j).css(a({cursor:"default"},s))},crispLine:function(a,
b){a[1]===a[4]&&(a[1]=a[4]=X(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=X(a[2])+b%2/2);return a},path:function(b){var c={fill:ha};d(b)?c.d=b:e(b)&&a(c,b);return this.createElement("path").attr(c)},circle:function(a,b,c){a=e(a)?a:{x:a,y:b,r:c};b=this.createElement("circle");b.xSetter=function(a){this.element.setAttribute("cx",a)};b.ySetter=function(a){this.element.setAttribute("cy",a)};return b.attr(a)},arc:function(a,b,c,d,f,j){e(a)&&(b=a.y,c=a.r,d=a.innerR,f=a.start,j=a.end,a=a.x);a=this.symbol("arc",
a||0,b||0,c||0,c||0,{innerR:d||0,start:f||0,end:j||0});a.r=c;return a},rect:function(a,b,c,d,f,j){f=e(a)?a.r:f;var h=this.createElement("rect");a=e(a)?a:a===H?{}:{x:a,y:b,width:Y(c,0),height:Y(d,0)};j!==H&&(a.strokeWidth=j,a=h.crisp(a));f&&(a.r=f);h.rSetter=function(a){p(this.element,{rx:a,ry:a})};return h.attr(a)},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;this.width=a;this.height=b;for(this.boxWrapper[n(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=
this.createElement("g");return l(a)?b.attr({"class":"highcharts-"+a}):b},image:function(b,c,d,e,f){var j={preserveAspectRatio:ha};1<arguments.length&&a(j,{x:c,y:d,width:e,height:f});j=this.createElement("image").attr(j);j.element.setAttributeNS?j.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b):j.element.setAttribute("hc-svg-href",b);return j},symbol:function(b,c,d,e,f,j){var h,g=this.symbols[b],g=g&&g(X(c),X(d),e,f,j),k=/^url\((.*?)\)$/,l,n;g?(h=this.path(g),a(h,{symbolName:b,x:c,
y:d,width:e,height:f}),j&&a(h,j)):k.test(b)&&(n=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(X((e-b[0])/2),X((f-b[1])/2)))},l=b.match(k)[1],b=ra[l]||j&&j.width&&j.height&&[j.width,j.height],h=this.image(l).attr({x:c,y:d}),h.isImg=!0,b?n(h,b):(h.attr({width:0,height:0}),s("img",{onload:function(){n(h,ra[l]=[this.width,this.height])},src:l})));return h},symbols:{circle:function(a,b,c,d){var e=0.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",
a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start;c=e.r||c||d;var j=e.end-0.001;d=e.innerR;var h=e.open,g=Aa(f),k=Va(f),l=Aa(j),j=Va(j);e=e.end-f<za?0:1;return["M",a+c*g,b+c*k,"A",c,c,0,e,
1,a+c*l,b+c*j,h?"M":"L",a+d*l,b+d*j,"A",d,d,0,e,0,a+d*g,b+d*k,h?"":"Z"]},callout:function(a,b,c,d,e){var f=sa(e&&e.r||0,c,d),j=f+6,h=e&&e.anchorX,g=e&&e.anchorY;e=X(e.strokeWidth||0)%2/2;a+=e;b+=e;e=["M",a+f,b,"L",a+c-f,b,"C",a+c,b,a+c,b,a+c,b+f,"L",a+c,b+d-f,"C",a+c,b+d,a+c,b+d,a+c-f,b+d,"L",a+f,b+d,"C",a,b+d,a,b+d,a,b+d-f,"L",a,b+f,"C",a,b,a,b,a+f,b];h&&h>c&&g>b+j&&g<b+d-j?e.splice(13,3,"L",a+c,g-6,a+c+6,g,a+c,g+6,a+c,b+d-f):h&&0>h&&g>b+j&&g<b+d-j?e.splice(33,3,"L",a,g+6,a-6,g,a,g-6,a,b+f):g&&g>
d&&h>a+j&&h<a+c-j?e.splice(23,3,"L",h+6,b+d,h,b+d+6,h-6,b+d,a+f,b+d):g&&0>g&&h>a+j&&h<a+c-j&&e.splice(3,3,"L",h-6,b,h,b-6,h+6,b,c-f,b);return e}},clipRect:function(a,b,c,d){var e="highcharts-"+Fa++,f=this.createElement("clipPath").attr({id:e}).add(this.defs);a=this.rect(a,b,c,d,0).add(f);a.id=e;a.clipPath=f;return a},text:function(a,b,c,d){var e=qa||!T&&this.forExport,f={};if(d&&!this.forExport)return this.html(a,b,c);f.x=Math.round(b||0);c&&(f.y=Math.round(c));if(a||0===a)f.text=a;a=this.createElement("text").attr(f);
e&&a.css({position:"absolute"});d||(a.xSetter=function(a,b,c){var d=c.getElementsByTagName("tspan"),e,f=c.getAttribute(b),j;for(j=0;j<d.length;j++)e=d[j],e.getAttribute(b)===f&&e.setAttribute(b,a);c.setAttribute(b,a)});return a},fontMetrics:function(a,b){a=a||this.style.fontSize;b&&F.getComputedStyle&&(b=b.element||b,a=F.getComputedStyle(b,"").fontSize);a=/px/.test(a)?g(a):/em/.test(a)?12*parseFloat(a):12;var c=24>a?a+4:X(1.2*a),d=X(0.8*c);return{h:c,b:d,f:a}},label:function(c,d,e,f,j,h,g,k,n){function m(){var b,
c;b=t.element.style;v=(void 0===D||void 0===B||q.styles.textAlign)&&t.textStr&&t.getBBox();q.width=(D||v.width||0)+2*w+A;q.height=(B||v.height||0)+2*w;E=w+s.fontMetrics(b&&b.fontSize,t).b;J&&(z||(b=X(-y*w),c=k?-E:0,q.box=z=f?s.symbol(f,b,c,q.width,q.height,L):s.rect(b,c,q.width,q.height,0,L[qb]),z.attr("fill",ha).add(q)),z.isImg||z.attr(a({width:X(q.width),height:X(q.height)},L)),L=null)}function p(){var a=q.styles,a=a&&a.textAlign,b=A+w*(1-y),c;c=k?0:E;if(l(D)&&v&&("center"===a||"right"===a))b+=
{center:0.5,right:1}[a]*(D-v.width);if(b!==t.x||c!==t.y)t.attr("x",b),c!==H&&t.attr("y",c);t.x=b;t.y=c}function r(a,b){z?z.attr(a,b):L[a]=b}var s=this,q=s.g(n),t=s.text("",0,0,g).attr({zIndex:1}),z,v,y=0,w=3,A=0,D,B,M,V,F=0,L={},E,J;q.onAdd=function(){t.add(q);q.attr({text:c||0===c?c:"",x:d,y:e});z&&l(j)&&q.attr({anchorX:j,anchorY:h})};q.widthSetter=function(a){D=a};q.heightSetter=function(a){B=a};q.paddingSetter=function(a){l(a)&&a!==w&&(w=a,p())};q.paddingLeftSetter=function(a){l(a)&&a!==A&&(A=
a,p())};q.alignSetter=function(a){y={left:0,center:0.5,right:1}[a]};q.textSetter=function(a){a!==H&&t.textSetter(a);m();p()};q["stroke-widthSetter"]=function(a,b){a&&(J=!0);F=a%2/2;r(b,a)};q.strokeSetter=q.fillSetter=q.rSetter=function(a,b){"fill"===b&&a&&(J=!0);r(b,a)};q.anchorXSetter=function(a,b){j=a;r(b,a+F-M)};q.anchorYSetter=function(a,b){h=a;r(b,a-V)};q.xSetter=function(a){q.x=a;y&&(a-=y*((D||v.width)+w));M=X(a);q.attr("translateX",M)};q.ySetter=function(a){V=q.y=X(a);q.attr("translateY",V)};
var Z=q.css;return a(q,{css:function(a){if(a){var c={};a=b(a);K(q.textProps,function(b){a[b]!==H&&(c[b]=a[b],delete a[b])});t.css(c)}return Z.call(q,a)},getBBox:function(){return{width:v.width+2*w,height:v.height+2*w,x:v.x-w,y:v.y-w}},shadow:function(a){z&&z.shadow(a);return q},destroy:function(){bb(q.element,"mouseenter");bb(q.element,"mouseleave");t&&(t=t.destroy());z&&(z=z.destroy());W.prototype.destroy.call(q);q=s=m=p=r=null}})}};ja=pb;a(W.prototype,{htmlCss:function(b){var c=this.element;if(c=
b&&"SPAN"===c.tagName&&b.width)delete b.width,this.textWidth=c,this.updateTransform();this.styles=a(this.styles,b);r(this.element,b);return this},htmlGetBBox:function(){var a=this.element,b=this.bBox;b||("text"===a.nodeName&&(a.style.position="absolute"),b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight});return b},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,c=this.translateX||0,d=this.translateY||0,e=this.x||0,f=this.y||0,j=this.textAlign||
"left",h={left:0,center:0.5,right:1}[j],k=this.shadows;r(b,{marginLeft:c,marginTop:d});k&&K(k,function(a){r(a,{marginLeft:c+1,marginTop:d+1})});this.inverted&&K(b.childNodes,function(c){a.invertChild(c,b)});if("SPAN"===b.tagName){var m=this.rotation,p,s=g(this.textWidth),q=[m,j,b.innerHTML,this.textWidth].join();if(q!==this.cTT){p=a.fontMetrics(b.style.fontSize).b;l(m)&&this.setSpanRotation(m,h,p);k=n(this.elemWidth,b.offsetWidth);if(k>s&&/[ \-]/.test(b.textContent||b.innerText))r(b,{width:s+"px",
display:"block",whiteSpace:"normal"}),k=s;this.getSpanCorrection(k,p,h,m,j)}r(b,{left:e+(this.xCorr||0)+"px",top:f+(this.yCorr||0)+"px"});Ha&&(p=b.offsetHeight);this.cTT=q}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=db?"-ms-transform":Ha?"-webkit-transform":ka?"MozTransform":tb?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)";d[e+(ka?"Origin":"-origin")]=d.transformOrigin=100*b+"% "+c+"px";r(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c;this.yCorr=
-b}});a(pb.prototype,{html:function(b,c,d){var e=this.createElement("span"),f=e.element,j=e.renderer;e.textSetter=function(a){a!==f.innerHTML&&delete this.bBox;f.innerHTML=this.textStr=a};e.xSetter=e.ySetter=e.alignSetter=e.rotationSetter=function(a,b){"align"===b&&(b="textAlign");e[b]=a;e.htmlUpdateTransform()};e.attr({text:b,x:X(c),y:X(d)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});e.css=e.htmlCss;j.isSVG&&(e.add=function(b){var c,
d=j.box.parentNode,h=[];if(this.parentGroup=b){if(c=b.div,!c){for(;b;)h.push(b),b=b.parentGroup;K(h.reverse(),function(b){var e;c=b.div=b.div||s(Db,{className:p(b.element,"class")},{position:"absolute",left:(b.translateX||0)+"px",top:(b.translateY||0)+"px"},c||d);e=c.style;a(b,{translateXSetter:function(a,c){e.left=a+"px";b[c]=a;b.doTransform=!0},translateYSetter:function(a,c){e.top=a+"px";b[c]=a;b.doTransform=!0},visibilitySetter:function(a,b){e[b]=a}})})}}else c=d;c.appendChild(f);e.added=!0;e.alignOnAdd&&
e.htmlUpdateTransform();return e});return e}});var cc,Ja;!T&&!qa&&(Ja={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Db;("shape"===b||e)&&d.push("left:0;top:0;width:1px;height:1px;");d.push("visibility: ",e?"hidden":"visible");c.push(' style="',d.join(""),'"/>');b&&(c=e||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=s(c));this.renderer=a},add:function(a){var b=this.renderer,c=this.element,d=b.box,d=a?a.element||a:d;a&&a.inverted&&b.invertChild(c,
d);d.appendChild(c);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd)this.onAdd();return this},updateTransform:W.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=Aa(a*cb),c=Va(a*cb);r(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):ha})},getSpanCorrection:function(a,b,c,d,e){var f=d?Aa(d*cb):1,j=d?Va(d*cb):0,h=n(this.elemHeight,
this.element.offsetHeight),g;this.xCorr=0>f&&-a;this.yCorr=0>j&&-h;g=0>f*j;this.xCorr+=j*b*(g?1-c:c);this.yCorr-=f*b*(d?g?c:1-c:1);e&&"left"!==e&&(this.xCorr-=a*c*(0>f?-1:1),d&&(this.yCorr-=h*c*(0>j?-1:1)),r(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)if(h(a[b]))c[b]=X(10*a[b])-5;else if("Z"===a[b])c[b]="x";else if(c[b]=a[b],a.isArc&&("wa"===a[b]||"at"===a[b]))c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1);return c.join(" ")||
"x"},clip:function(a){var b=this,c;a?(c=a.members,k(c,b),c.push(b),b.destroyClip=function(){k(c,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),a={clip:Sa?"inherit":"rect(auto)"});return b.css(a)},css:W.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&V(a)},destroy:function(){this.destroyClip&&this.destroyClip();return W.prototype.destroy.apply(this)},on:function(a,b){this.element["on"+a]=function(){var a=F.event;a.target=a.srcElement;b(a)};return this},cutOffPath:function(a,b){var c;
a=a.split(/[ ,]/);c=a.length;if(9===c||11===c)a[c-4]=a[c-2]=g(a[c-2])-10*b;return a.join(" ")},shadow:function(a,b,c){var d=[],e,f=this.element,j=this.renderer,h,k=f.style,l,m=f.path,p,r,q,t;m&&"string"!==typeof m.value&&(m="x");r=m;if(a){q=n(a.width,3);t=(a.opacity||0.15)/q;for(e=1;3>=e;e++)p=2*q+1-2*e,c&&(r=this.cutOffPath(m.value,p+0.5)),l=['<shape isShadow="true" strokeweight="',p,'" filled="false" path="',r,'" coordsize="10 10" style="',f.style.cssText,'" />'],h=s(j.prepVML(l),null,{left:g(k.left)+
n(a.offsetX,1),top:g(k.top)+n(a.offsetY,1)}),c&&(h.cutOff=p+1),l=['<stroke color="',a.color||"black",'" opacity="',t*e,'"/>'],s(j.prepVML(l),null,null,h),b?b.element.appendChild(h):f.parentNode.insertBefore(h,f),d.push(h);this.shadows=d}return this},updateShadows:ya,setAttr:function(a,b){Sa?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){(c.getElementsByTagName("stroke")[0]||s(this.renderer.prepVML(["<stroke/>"]),
null,null,c))[b]=a||"solid";this[b]=a},dSetter:function(a,b,c){var d=this.shadows;a=a||[];this.d=a.join&&a.join(" ");c.path=a=this.pathToVML(a);if(d)for(c=d.length;c--;)d[c].path=d[c].cutOff?this.cutOffPath(a,d[c].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=c.nodeName;"SPAN"===d?c.style.color=a:"IMG"!==d&&(c.filled=a!==ha,this.setAttr("fillcolor",this.renderer.color(a,c,b,this)))},opacitySetter:ya,rotationSetter:function(a,b,c){c=c.style;this[b]=c[b]=a;c.left=-X(Va(a*cb)+1)+"px";
c.top=X(Aa(a*cb))+"px"},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a;this[b]=a;h(a)&&(a+="px");this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,b,c){"inherit"===a&&(a="visible");this.shadows&&K(this.shadows,function(c){c.style[b]=a});"DIV"===c.nodeName&&(a="hidden"===a?"-999em":0,Sa||(c.style[b]=a?"visible":"hidden"),b="top");c.style[b]=a},xSetter:function(a,
b,c){this[b]=a;"x"===b?b="left":"y"===b&&(b="top");this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}},xa.VMLElement=Ja=v(W,Ja),Ja.prototype.ySetter=Ja.prototype.widthSetter=Ja.prototype.heightSetter=Ja.prototype.xSetter,Ja={Element:Ja,isIE8:-1<Na.indexOf("MSIE 8.0"),init:function(b,c,d,e){var f;this.alignedObjects=[];e=this.createElement(Db).css(a(this.getStyle(e),{position:"relative"}));f=e.element;b.appendChild(e.element);this.isVML=!0;
this.box=f;this.boxWrapper=e;this.cache={};this.setSize(c,d,!1);if(!M.namespaces.hcv){M.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{M.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(j){M.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(b,c,d,f){var j=
this.createElement(),h=e(b);return a(j,{members:[],left:(h?b.x:b)+1,top:(h?b.y:c)+1,width:(h?b.width:d)-1,height:(h?b.height:f)-1,getCSS:function(b){var c=b.element,d=c.nodeName;b=b.inverted;var e=this.top-("shape"===d?c.offsetTop:0),f=this.left,c=f+this.width,j=e+this.height,e={clip:"rect("+X(b?f:e)+"px,"+X(b?j:c)+"px,"+X(b?c:j)+"px,"+X(b?e:f)+"px)"};!b&&Sa&&"DIV"===d&&a(e,{width:c+"px",height:j+"px"});return e},updateClipping:function(){K(j.members,function(a){a.element&&a.css(j.getCSS(a))})}})},
color:function(a,b,c,d){var e=this,f,j=/^rgba/,h,g,k=ha;a&&a.linearGradient?g="gradient":a&&a.radialGradient&&(g="pattern");if(g){var l,n,m=a.linearGradient||a.radialGradient,p,r,q,t,z,v="";a=a.stops;var y,w=[],A=function(){h=['<fill colors="'+w.join(",")+'" opacity="',q,'" o:opacity2="',r,'" type="',g,'" ',v,'focus="100%" method="any" />'];s(e.prepVML(h),null,null,b)};p=a[0];y=a[a.length-1];0<p[0]&&a.unshift([0,p[1]]);1>y[0]&&a.push([1,y[1]]);K(a,function(a,b){j.test(a[1])?(f=xb(a[1]),l=f.get("rgb"),
n=f.get("a")):(l=a[1],n=1);w.push(100*a[0]+"% "+l);b?(q=n,t=l):(r=n,z=l)});if("fill"===c)if("gradient"===g)c=m.x1||m[0]||0,a=m.y1||m[1]||0,p=m.x2||m[2]||0,m=m.y2||m[3]||0,v='angle="'+(90-180*Ba.atan((m-a)/(p-c))/za)+'"',A();else{var k=m.r,D=2*k,B=2*k,M=m.cx,V=m.cy,F=b.radialReference,L,k=function(){F&&(L=d.getBBox(),M+=(F[0]-L.x)/L.width-0.5,V+=(F[1]-L.y)/L.height-0.5,D*=F[2]/L.width,B*=F[2]/L.height);v='src="'+aa.global.VMLRadialGradientURL+'" size="'+D+","+B+'" origin="0.5,0.5" position="'+M+","+
V+'" color2="'+z+'" ';A()};d.added?k():d.onAdd=k;k=t}else k=l}else j.test(a)&&"IMG"!==b.tagName?(f=xb(a),h=["<",c,' opacity="',f.get("a"),'"/>'],s(this.prepVML(h),null,null,b),k=f.get("rgb")):(k=b.getElementsByTagName(c),k.length&&(k[0].opacity=1,k[0].type="solid"),k=a);return k},prepVML:function(a){var b=this.isIE8;a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):
a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:pb.prototype.html,path:function(b){var c={coordsize:"10 10"};d(b)?c.d=b:e(b)&&a(c,b);return this.createElement("shape").attr(c)},circle:function(a,b,c){var d=this.symbol("circle");e(a)&&(c=a.r,b=a.y,a=a.x);d.isCircle=!0;d.r=c;return d.attr({x:a,y:b})},g:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a});return this.createElement(Db).attr(b)},image:function(a,
b,c,d,e){var f=this.createElement("img").attr({src:a});1<arguments.length&&f.attr({x:b,y:c,width:d,height:e});return f},createElement:function(a){return"rect"===a?this.symbol(a):pb.prototype.createElement.call(this,a)},invertChild:function(a,b){var c=this,d=b.style,e="IMG"===a.tagName&&a.style;r(a,{flip:"x",left:g(d.width)-(e?g(e.top):1),top:g(d.height)-(e?g(e.left):1),rotation:-90});K(a.childNodes,function(b){c.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f=e.start,j=e.end,h=e.r||c||
d;c=e.innerR;d=Aa(f);var g=Va(f),k=Aa(j),l=Va(j);if(0===j-f)return["x"];f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*g,a+h*k,b+h*l];e.open&&!c&&f.push("e","M",a,b);f.push("at",a-c,b-c,a+c,b+c,a+c*k,b+c*l,a+c*d,b+c*g,"x","e");f.isArc=!0;return f},circle:function(a,b,c,d,e){e&&(c=d=2*e.r);e&&e.isCircle&&(a-=c/2,b-=d/2);return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){return pb.prototype.symbols[!l(e)||!e.r?"square":"callout"].call(0,a,b,c,d,e)}}},xa.VMLRenderer=cc=function(){this.init.apply(this,
arguments)},cc.prototype=b(pb.prototype,Ja),ja=cc);pb.prototype.measureSpanWidth=function(a,b){var c=M.createElement("span"),d;d=M.createTextNode(a);c.appendChild(d);r(c,b);this.box.appendChild(c);d=c.offsetWidth;V(c);return d};var jc;if(qa){xa.CanVGRenderer=Ja=function(){oa="http://www.w3.org/1999/xhtml"};Ja.prototype.symbols={};var Hb=function(){var a=ib.length,b;for(b=0;b<a;b++)ib[b]();ib=[]},ib=[];jc={push:function(a,b){0===ib.length&&tc(b,Hb);ib.push(a)}};ja=Ja}ca.prototype={addLabel:function(){var b=
this.axis,c=b.options,d=b.chart,e=b.horiz,f=b.categories,g=b.names,k=this.pos,m=c.labels,p=m.rotation,r=b.tickPositions,e=e&&f&&!m.step&&!m.staggerLines&&!m.rotation&&d.plotWidth/r.length||!e&&(d.margin[3]||0.33*d.chartWidth),s=k===r[0],q=k===r[r.length-1],t,g=f?n(f[k],g[k],k):k,f=this.label,z=r.info;b.isDatetimeAxis&&z&&(t=c.dateTimeLabelFormats[z.higherRanks[k]||z.unitName]);this.isFirst=s;this.isLast=q;c=b.labelFormatter.call({axis:b,chart:d,isFirst:s,isLast:q,dateTimeLabelFormat:t,value:b.isLog?
N(j(g)):g});k=e&&{width:Y(1,X(e-2*(m.padding||10)))+"px"};l(f)?f&&f.attr({text:c}).css(k):(t={align:b.labelAlign},h(p)&&(t.rotation=p),e&&m.ellipsis&&(k.HcHeight=b.len/r.length),this.label=f=l(c)&&m.enabled?d.renderer.text(c,0,0,m.useHTML).attr(t).css(a(k,m.style)).add(b.labelGroup):null,b.tickBaseline=d.renderer.fontMetrics(m.style.fontSize,f).b,p&&2===b.side&&(b.tickBaseline*=Aa(p*cb)));this.yOffset=f?n(m.y,b.tickBaseline+(2===b.side?8:-(f.getBBox().height/2))):0},getLabelSize:function(){var a=
this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?d.x-a*{left:0,center:0.5,right:1}[b.labelAlign]:0;return[b,c?a+b:a]},handleOverflow:function(a,b){var c=!0,d=this.axis,e=this.isFirst,f=this.isLast,j=d.horiz?b.x:b.y,h=d.reversed,g=d.tickPositions,k=this.getLabelSides(),l=k[0],k=k[1],n,m,p,r=this.label.line;n=r||0;m=d.labelEdge;p=d.justifyLabels&&(e||f);m[n]===
H||j+l>m[n]?m[n]=j+k:p||(c=!1);if(p){n=(m=d.justifyToPlot)?d.pos:0;m=m?n+d.len:d.chart.chartWidth;do a+=e?1:-1,p=d.ticks[g[a]];while(g[a]&&(!p||!p.label||p.label.line!==r));d=p&&p.label.xy&&p.label.xy.x+p.getLabelSides()[e?0:1];e&&!h||f&&h?j+l<n&&(j=n-l,p&&j+k>d&&(c=!1)):j+k>m&&(j=m-k,p&&j+l<d&&(c=!1));b.x=j}return c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,j=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||
f.chartWidth)-e.right-e.left:0),y:a?j-e.bottom+e.offset-(e.opposite?e.height:0):j-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,j,h){var g=this.axis,k=g.transA,l=g.reversed,n=g.staggerLines;a=a+e.x-(f&&d?f*k*(l?-1:1):0);b=b+this.yOffset-(f&&!d?f*k*(l?1:-1):0);n&&(c.line=j/(h||1)%n,b+=c.line*(g.labelOffset/n));return{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,
f=d.chart.renderer,j=d.horiz,h=this.type,g=this.label,k=this.pos,l=e.labels,m=this.gridLine,p=h?h+"Grid":"grid",r=h?h+"Tick":"tick",s=e[p+"LineWidth"],q=e[p+"LineColor"],t=e[p+"LineDashStyle"],z=e[r+"Length"],p=e[r+"Width"]||0,v=e[r+"Color"],y=e[r+"Position"],r=this.mark,w=l.step,A=!0,D=d.tickmarkOffset,B=this.getPosition(j,k,D,b),M=B.x,B=B.y,L=j&&M===d.pos+d.len||!j&&B===d.pos?-1:1;c=n(c,1);this.isActive=!0;if(s&&(k=d.getPlotLinePath(k+D,s*L,b,!0),m===H&&(m={stroke:q,"stroke-width":s},t&&(m.dashstyle=
t),h||(m.zIndex=1),b&&(m.opacity=0),this.gridLine=m=s?f.path(k).attr(m).add(d.gridGroup):null),!b&&m&&k))m[this.isNew?"attr":"animate"]({d:k,opacity:c});p&&z&&("inside"===y&&(z=-z),d.opposite&&(z=-z),h=this.getMarkPath(M,B,z,p*L,j,f),r?r.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:v,"stroke-width":p,opacity:c}).add(d.axisGroup));g&&!isNaN(M)&&(g.xy=B=this.getLabelPosition(M,B,g,j,l,D,a,w),this.isFirst&&!this.isLast&&!n(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!n(e.showLastLabel,
1)?A=!1:!d.isRadial&&!l.step&&!l.rotation&&!b&&0!==c&&(A=this.handleOverflow(a,B)),w&&a%w&&(A=!1),A&&!isNaN(B.y)?(B.opacity=c,g[this.isNew?"attr":"animate"](B),this.isNew=!1):g.attr("y",-9999))},destroy:function(){O(this,this.axis)}};xa.PlotLineOrBand=function(a,b){this.axis=a;b&&(this.options=b,this.id=b.id)};xa.PlotLineOrBand.prototype={render:function(){var a=this,c=a.axis,d=c.horiz,e=(c.pointRange||0)/2,j=a.options,h=j.label,g=a.label,k=j.width,n=j.to,m=j.from,p=l(m)&&l(n),r=j.value,s=j.dashStyle,
q=a.svgElem,t=[],z,v=j.color,y=j.zIndex,w=j.events,A={},D=c.chart.renderer;c.isLog&&(m=f(m),n=f(n),r=f(r));if(k){if(t=c.getPlotLinePath(r,k),A={stroke:v,"stroke-width":k},s)A.dashstyle=s}else if(p)m=Y(m,c.min-e),n=sa(n,c.max+e),t=c.getPlotBandPath(m,n,j),v&&(A.fill=v),j.borderWidth&&(A.stroke=j.borderColor,A["stroke-width"]=j.borderWidth);else return;l(y)&&(A.zIndex=y);if(q)if(t)q.animate({d:t},null,q.onGetPath);else{if(q.hide(),q.onGetPath=function(){q.show()},g)a.label=g=g.destroy()}else if(t&&
t.length&&(a.svgElem=q=D.path(t).attr(A).add(),w))for(z in e=function(b){q.on(b,function(c){w[b].apply(a,[c])})},w)e(z);h&&l(h.text)&&t&&t.length&&0<c.width&&0<c.height?(h=b({align:d&&p&&"center",x:d?!p&&4:10,verticalAlign:!d&&p&&"middle",y:d?p?16:10:p?6:-4,rotation:d&&!p&&90},h),g||(A={align:h.textAlign||h.align,rotation:h.rotation},l(y)&&(A.zIndex=y),a.label=g=D.text(h.text,0,0,h.useHTML).attr(A).css(h.style).add()),c=[t[1],t[4],p?t[6]:t[1]],p=[t[2],t[5],p?t[7]:t[2]],t=S(c),d=S(p),g.align(h,!1,
{x:t,y:d,width:J(c)-t,height:J(p)-d}),g.show()):g&&g.hide();return a},destroy:function(){k(this.axis.plotLinesAndBands,this);delete this.axis;O(this)}};R.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Ra,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",
minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return A(this.total,
-1)},style:Ra.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c;this.coll=(this.isXAxis=c)?"xAxis":"yAxis";this.opposite=b.opposite;this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(b);var d=
this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter;this.userOptions=b;this.minPixelPadding=0;this.chart=a;this.reversed=d.reversed;this.zoomEnabled=!1!==d.zoomEnabled;this.categories=d.categories||"category"===e;this.names=[];this.isLog="logarithmic"===e;this.isDatetimeAxis="datetime"===e;this.isLinked=l(d.linkedTo);this.tickmarkOffset=this.categories&&"between"===d.tickmarkPlacement&&1===n(d.tickInterval,1)?0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks=
{};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=d.minRange||d.maxZoom;this.range=d.range;this.offset=d.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=n(d.crosshair,m(a.options.tooltip.crosshairs)[c?0:1],!1);var h,d=this.options.events;-1===Jb(this,a.axes)&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,this):a.axes.push(this),a[this.coll].push(this));this.series=this.series||[];a.inverted&&(c&&this.reversed===H)&&
(this.reversed=!0);this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(h in d)Ia(this,h,d[h]);this.isLog&&(this.val2lin=f,this.lin2val=j)},setOptions:function(a){this.options=b(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],b(aa[this.coll],a))},defaultLabelFormatter:function(){var a=this.axis,b=this.value,c=a.categories,d=this.dateTimeLabelFormat,
e=aa.lang.numericSymbols,f=e&&e.length,j,h=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(h)j=D(h,this);else if(c)j=b;else if(d)j=L(d,b);else if(f&&1E3<=a)for(;f--&&j===H;)c=Math.pow(1E3,f+1),a>=c&&null!==e[f]&&(j=A(b/c,-1)+e[f]);j===H&&(j=1E4<=Ca(b)?A(b,0):A(b,-1,H,""));return j},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1;a.dataMin=a.dataMax=a.ignoreMinPadding=a.ignoreMaxPadding=null;a.buildStacks&&a.buildStacks();K(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d;
d=c.options.threshold;var e;a.hasVisibleSeries=!0;a.isLog&&0>=d&&(d=null);if(a.isXAxis){if(d=c.xData,d.length)a.dataMin=sa(n(a.dataMin,d[0]),S(d)),a.dataMax=Y(n(a.dataMax,d[0]),J(d))}else c.getExtremes(),e=c.dataMax,c=c.dataMin,l(c)&&l(e)&&(a.dataMin=sa(n(a.dataMin,c),c),a.dataMax=Y(n(a.dataMax,e),e)),l(d)&&(a.dataMin>=d?(a.dataMin=d,a.ignoreMinPadding=!0):a.dataMax<d&&(a.dataMax=d,a.ignoreMaxPadding=!0))}})},translate:function(a,b,c,d,e,f){var j=1,g=0,k=d?this.oldTransA:this.transA;d=d?this.oldMin:
this.min;var l=this.minPixelPadding;e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;k||(k=this.transA);c&&(j*=-1,g=this.len);this.reversed&&(j*=-1,g-=j*(this.sector||this.len));b?(a=a*j+g,a-=l,a=a/k+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),"between"===f&&(f=0.5),a=j*(a-d)*k+g+j*l+(h(f)?k*f*this.pointRange:0));return a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,
!0)},getPlotLinePath:function(a,b,c,d,e){var f=this.chart,j=this.left,h=this.top,g,k,l=c&&f.oldChartHeight||f.chartHeight,m=c&&f.oldChartWidth||f.chartWidth,p;g=this.transB;e=n(e,this.translate(a,null,null,c));a=c=X(e+g);g=k=X(l-e-g);if(isNaN(e))p=!0;else if(this.horiz){if(g=h,k=l-this.bottom,a<j||a>j+this.width)p=!0}else if(a=j,c=m-this.right,g<h||g>h+this.height)p=!0;return p&&!d?null:f.renderer.crispLine(["M",a,g,"L",c,k],b||1)},getLinearTickPositions:function(a,b,c){var d,e=N(ta(b/a)*a),f=N(q(c/
a)*a),j=[];if(b===c&&h(b))return[b];for(b=e;b<=f;){j.push(b);b=N(b+a);if(b===d)break;d=b}return j},getMinorTickPositions:function(){var a=this.options,b=this.tickPositions,c=this.minorTickInterval,d=[],e;if(this.isLog){e=b.length;for(a=1;a<e;a++)d=d.concat(this.getLogTickPositions(c,b[a-1],b[a],!0))}else if(this.isDatetimeAxis&&"auto"===a.minorTickInterval)d=d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c),this.min,this.max,a.startOfWeek)),d[0]<this.min&&d.shift();else for(b=this.min+
(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},adjustForMinRange:function(){var a=this.options,b=this.min,c=this.max,d,e=this.dataMax-this.dataMin>=this.minRange,f,j,h,g;this.isXAxis&&(this.minRange===H&&!this.isLog)&&(l(a.min)||l(a.max)?this.minRange=null:(K(this.series,function(a){g=a.xData;for(j=a.xIncrement?1:g.length-1;0<j;j--)if(h=g[j]-g[j-1],f===H||h<f)f=h}),this.minRange=sa(5*f,this.dataMax-this.dataMin)));if(c-b<this.minRange){var k=this.minRange;d=(k-c+b)/2;d=[b-d,n(a.min,b-d)];
e&&(d[2]=this.dataMin);b=J(d);c=[b+k,n(a.max,b+k)];e&&(c[2]=this.dataMax);c=S(c);c-b<k&&(d[0]=c-k,d[1]=n(a.min,c-k),b=J(d))}this.min=b;this.max=c},setAxisTranslation:function(a){var b=this,d=b.max-b.min,e=b.axisPointRange||0,f,j=0,h=0,g=b.linkedParent,k=!!b.categories,n=b.transA;if(b.isXAxis||k||e)g?(j=g.minPointOffset,h=g.pointRangePadding):K(b.series,function(a){var g=k?1:b.isXAxis?a.pointRange:b.axisPointRange||0,u=a.options.pointPlacement,n=a.closestPointRange;g>d&&(g=0);e=Y(e,g);j=Y(j,c(u)?0:
g/2);h=Y(h,"on"===u?0:g);!a.noSharedTooltip&&l(n)&&(f=l(f)?sa(f,n):n)}),g=b.ordinalSlope&&f?b.ordinalSlope/f:1,b.minPointOffset=j*=g,b.pointRangePadding=h*=g,b.pointRange=sa(e,d),b.closestPointRange=f;a&&(b.oldTransA=n);b.translationSlope=b.transA=n=b.len/(d+h||1);b.transB=b.horiz?b.left:b.bottom;b.minPixelPadding=n*j},setTickPositions:function(a){var b=this,c=b.chart,d=b.options,e=d.startOnTick,j=d.endOnTick,g=b.isLog,k=b.isDatetimeAxis,m=b.isXAxis,p=b.isLinked,r=b.options.tickPositioner,s=d.maxPadding,
q=d.minPadding,t=d.tickInterval,z=d.minTickInterval,v=d.tickPixelInterval,w,A=b.categories;p?(b.linkedParent=c[b.coll][d.linkedTo],c=b.linkedParent.getExtremes(),b.min=n(c.min,c.dataMin),b.max=n(c.max,c.dataMax),d.type!==b.linkedParent.options.type&&Ma(11,1)):(b.min=n(b.userMin,d.min,b.dataMin),b.max=n(b.userMax,d.max,b.dataMax));g&&(!a&&0>=sa(b.min,n(b.dataMin,b.min))&&Ma(10,1),b.min=N(f(b.min)),b.max=N(f(b.max)));b.range&&l(b.max)&&(b.userMin=b.min=Y(b.min,b.max-b.range),b.userMax=b.max,b.range=
null);b.beforePadding&&b.beforePadding();b.adjustForMinRange();if(!A&&!b.axisPointRange&&!b.usePercentage&&!p&&l(b.min)&&l(b.max)&&(c=b.max-b.min)){if(!l(d.min)&&!l(b.userMin)&&q&&(0>b.dataMin||!b.ignoreMinPadding))b.min-=c*q;if(!l(d.max)&&!l(b.userMax)&&s&&(0<b.dataMax||!b.ignoreMaxPadding))b.max+=c*s}h(d.floor)&&(b.min=Y(b.min,d.floor));h(d.ceiling)&&(b.max=sa(b.max,d.ceiling));b.min===b.max||void 0===b.min||void 0===b.max?b.tickInterval=1:p&&!t&&v===b.linkedParent.options.tickPixelInterval?b.tickInterval=
b.linkedParent.tickInterval:(b.tickInterval=n(t,A?1:(b.max-b.min)*v/Y(b.len,v)),!l(t)&&b.len<v&&!this.isRadial&&!this.isLog&&!A&&e&&j&&(w=!0,b.tickInterval/=4));m&&!a&&K(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)});b.setAxisTranslation(!0);b.beforeSetTickPositions&&b.beforeSetTickPositions();b.postProcessTickInterval&&(b.tickInterval=b.postProcessTickInterval(b.tickInterval));b.pointRange&&(b.tickInterval=Y(b.pointRange,b.tickInterval));!t&&b.tickInterval<z&&(b.tickInterval=
z);!k&&(!g&&!t)&&(b.tickInterval=B(b.tickInterval,null,y(b.tickInterval),n(d.allowDecimals,!(1<b.tickInterval&&5>b.tickInterval&&1E3<b.max&&9999>b.max))));b.minorTickInterval="auto"===d.minorTickInterval&&b.tickInterval?b.tickInterval/5:d.minorTickInterval;b.tickPositions=a=d.tickPositions?[].concat(d.tickPositions):r&&r.apply(b,[b.min,b.max]);a||(!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>Y(2*b.len,200)&&Ma(19,!0),a=k?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,d.units),b.min,
b.max,d.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):g?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),w&&a.splice(1,a.length-2),b.tickPositions=a);p||(d=a[0],g=a[a.length-1],k=b.minPointOffset||0,e?b.min=d:b.min-k>d&&a.shift(),j?b.max=g:b.max+k<g&&a.pop(),0===a.length&&l(d)&&a.push((g+d)/2),1===a.length&&(e=1E13<Ca(b.max)?1:0.001,b.min-=e,b.max+=e))},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=
[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&!1!==this.options.alignTicks)b[d]=c.length;a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&!1!==this.options.alignTicks&&this.min!==H){var d=this.tickAmount,e=b.length;this.tickAmount=a=c[a];if(e<a){for(;b.length<a;)b.push(N(b[b.length-1]+this.tickInterval));this.transA*=
(e-1)/(a-1);this.max=b[b.length-1]}l(d)&&a!==d&&(this.isDirty=!0)}},setScale:function(){var a=this.stacks,b,c,d,e;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();e=this.len!==this.oldAxisLength;K(this.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)d=!0});if(e||d||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(c in a[b])a[b][c].total=null,a[b][c].cum=0;this.forceRedraw=
!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis)for(b in this.oldStacks&&(a=this.stacks=this.oldStacks),a)for(c in a[b])a[b][c].cum=a[b][c].total;this.setMaxTicks()},setExtremes:function(b,c,d,e,f){var j=this,h=j.chart;d=n(d,!0);f=a(f,{min:b,max:c});Ua(j,"setExtremes",f,function(){j.userMin=b;j.userMax=c;j.eventArgs=f;j.isDirtyExtremes=
!0;d&&h.redraw(e)})},zoom:function(a,b){var c=this.dataMin,d=this.dataMax,e=this.options;this.allowZoomOutside||(l(c)&&a<=sa(c,n(e.min,c))&&(a=H),l(d)&&b>=Y(d,n(e.max,d))&&(b=H));this.displayBtn=a!==H||b!==H;this.setExtremes(a,b,!1,H,{trigger:"zoom"});return!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=this.horiz,e=n(b.width,a.plotWidth-c+(b.offsetRight||0)),f=n(b.height,a.plotHeight),j=n(b.top,a.plotTop),b=n(b.left,a.plotLeft+c),c=/%$/;c.test(f)&&(f=parseInt(f,10)/
100*a.plotHeight);c.test(j)&&(j=parseInt(j,10)/100*a.plotHeight+a.plotTop);this.left=b;this.top=j;this.width=e;this.height=f;this.bottom=a.chartHeight-f-j;this.right=a.chartWidth-e-b;this.len=Y(d?e:f,0);this.pos=d?b:j},getExtremes:function(){var a=this.isLog;return{min:a?N(j(this.min)):this.min,max:a?N(j(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?j(this.min):this.min,b=b?j(this.max):this.max;
c>a||null===a?a=c:b<a&&(a=b);return this.translate(a,0,1,0,1)},autoLabelAlign:function(a){a=(n(a,0)-90*this.side+720)%360;return 15<a&&165>a?"right":195<a&&345>a?"left":"center"},getOffset:function(){var a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,j=a.horiz,h=a.side,g=b.inverted?[1,0,3,2][h]:h,k,m,p=0,r,s=0,q=d.title,t=d.labels,z=0,v=b.axisOffset,b=b.clipOffset,y=[-1,1,1,-1][h],w,A=1,D=n(t.maxStaggerLines,5),B,M,L,F,V;a.hasData=k=a.hasVisibleSeries||l(a.min)&&l(a.max)&&!!e;
a.showAxis=m=k||n(d.showEmpty,!0);a.staggerLines=a.horiz&&t.staggerLines;a.axisGroup||(a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add(),a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||2}).add(),a.labelGroup=c.g("axis-labels").attr({zIndex:t.zIndex||7}).addClass("highcharts-"+a.coll.toLowerCase()+"-labels").add());if(k||a.isLinked){a.labelAlign=n(t.align||a.autoLabelAlign(t.rotation));K(e,function(b){f[b]?f[b].addLabel():f[b]=new ca(a,b)});if(a.horiz&&!a.staggerLines&&D&&!t.rotation){for(k=
a.reversed?[].concat(e).reverse():e;A<D;){B=[];M=!1;for(w=0;w<k.length;w++)L=k[w],F=(F=f[L].label&&f[L].label.getBBox())?F.width:0,V=w%A,F&&(L=a.translate(L),B[V]!==H&&L<B[V]&&(M=!0),B[V]=L+F);if(M)A++;else break}1<A&&(a.staggerLines=A)}K(e,function(b){if(0===h||2===h||{1:"left",3:"right"}[h]===a.labelAlign)z=Y(f[b].getLabelSize(),z)});a.staggerLines&&(z*=a.staggerLines,a.labelOffset=z)}else for(w in f)f[w].destroy(),delete f[w];q&&(q.text&&!1!==q.enabled)&&(a.axisTitle||(a.axisTitle=c.text(q.text,
0,0,q.useHTML).attr({zIndex:7,rotation:q.rotation||0,align:q.textAlign||{low:"left",middle:"center",high:"right"}[q.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(q.style).add(a.axisGroup),a.axisTitle.isNew=!0),m&&(p=a.axisTitle.getBBox()[j?"height":"width"],r=q.offset,s=l(r)?0:n(q.margin,j?5:10)),a.axisTitle[m?"show":"hide"]());a.offset=y*n(d.offset,v[h]);c=2===h?a.tickBaseline:0;j=z+s+(z&&y*(j?n(t.y,a.tickBaseline+8):t.x)-c);a.axisTitleMargin=n(r,j);v[h]=Y(v[h],a.axisTitleMargin+
p+y*a.offset,j);b[g]=Y(b[g],2*ta(d.lineWidth/2))},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;c&&(a*=-1);return b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,c=this.top,d=this.len,e=this.options.title,f=a?b:c,j=this.opposite,h=this.offset,k=g(e.style.fontSize||
12),d={low:f+(a?0:d),middle:f+d/2,high:f+(a?d:0)}[e.align],b=(a?c+this.height:b)+(a?1:-1)*(j?-1:1)*this.axisTitleMargin+(2===this.side?k:0);return{x:a?d:b+(j?this.width:0)+h+(e.x||0),y:a?b-(j?this.height:0)+h:d+(e.y||0)}},render:function(){var a=this,b=a.horiz,c=a.reversed,d=a.chart,e=d.renderer,f=a.options,h=a.isLog,g=a.isLinked,k=a.tickPositions,n,m=a.axisTitle,p=a.ticks,r=a.minorTicks,s=a.alternateBands,q=f.stackLabels,t=f.alternateGridColor,z=a.tickmarkOffset,v=f.lineWidth,y=d.hasRendered&&l(a.oldMin)&&
!isNaN(a.oldMin),w=a.hasData,A=a.showAxis,D,B=f.labels.overflow,M=a.justifyLabels=b&&!1!==B,L;a.labelEdge.length=0;a.justifyToPlot="justify"===B;K([p,r,s],function(a){for(var b in a)a[b].isActive=!1});if(w||g)if(a.minorTickInterval&&!a.categories&&K(a.getMinorTickPositions(),function(b){r[b]||(r[b]=new ca(a,b,"minor"));y&&r[b].isNew&&r[b].render(null,!0);r[b].render(null,!1,1)}),k.length&&(n=k.slice(),(b&&c||!b&&!c)&&n.reverse(),M&&(n=n.slice(1).concat([n[0]])),K(n,function(b,c){M&&(c=c===n.length-
1?0:c+1);if(!g||b>=a.min&&b<=a.max)p[b]||(p[b]=new ca(a,b)),y&&p[b].isNew&&p[b].render(c,!0,0.1),p[b].render(c)}),z&&0===a.min&&(p[-1]||(p[-1]=new ca(a,-1,null,!0)),p[-1].render(-1))),t&&K(k,function(b,c){0===c%2&&b<a.max&&(s[b]||(s[b]=new xa.PlotLineOrBand(a)),D=b+z,L=k[c+1]!==H?k[c+1]+z:a.max,s[b].options={from:h?j(D):D,to:h?j(L):L,color:t},s[b].render(),s[b].isActive=!0)}),!a._addedPlotLB)K((f.plotLines||[]).concat(f.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0;K([p,r,
s],function(a){var b,c,e=[],f=wa?wa.duration||500:0,j=function(){for(c=e.length;c--;)a[e[c]]&&!a[e[c]].isActive&&(a[e[c]].destroy(),delete a[e[c]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,e.push(b));a===s||!d.hasRendered||!f?j():f&&setTimeout(j,f)});v&&(b=a.getLinePath(v),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=e.path(b).attr({stroke:f.lineColor,"stroke-width":v,zIndex:7}).add(a.axisGroup),a.axisLine[A?"show":"hide"]());m&&A&&(m[m.isNew?"attr":"animate"](a.getTitlePosition()),
m.isNew=!1);q&&q.enabled&&a.renderStackTotals();a.isDirty=!1},redraw:function(){this.render();K(this.plotLinesAndBands,function(a){a.render()});K(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b=this,c=b.stacks,d,e=b.plotLinesAndBands;a||bb(b);for(d in c)O(c[d]),c[d]=null;K([b.ticks,b.minorTicks,b.alternateBands],function(a){O(a)});for(a=e.length;a--;)e[a].destroy();K("stackTotalGroup axisLine axisTitle axisGroup cross gridGroup labelGroup".split(" "),function(a){b[a]&&(b[a]=b[a].destroy())});
this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if(!1===(l(b)||!n(this.crosshair.snap,!0)))this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;n(d.snap,!0)?l(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos;c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:n(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c);if(null===c)this.hideCrosshair();else if(this.cross)this.cross.attr({visibility:"visible"})[e?
"animate":"attr"]({d:c},e);else e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2},d.dashStyle&&(e.dashstyle=d.dashStyle),this.cross=this.chart.renderer.path(c).attr(e).add()}},hideCrosshair:function(){this.cross&&this.cross.hide()}};a(R.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);d&&c?d.push(c[4],c[5],c[1],c[2]):d=null;return d},addPlotBand:function(a){return this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){return this.addPlotBandOrLine(a,
"plotLines")},addPlotBandOrLine:function(a,b){var c=(new xa.PlotLineOrBand(this,a)).render(),d=this.userOptions;c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c));return c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();K([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&k(b,b[e])})}});R.prototype.getTimeTicks=function(b,c,d,
e){var f=[],j={},h=aa.global.useUTC,g,k=new G(c-rb),m=b.unitRange,p=b.count;if(l(c)){m>=Ea.second&&(k.setMilliseconds(0),k.setSeconds(m>=Ea.minute?0:p*ta(k.getSeconds()/p)));if(m>=Ea.minute)k[qc](m>=Ea.hour?0:p*ta(k[eb]()/p));if(m>=Ea.hour)k[Bc](m>=Ea.day?0:p*ta(k[$a]()/p));if(m>=Ea.day)k[rc](m>=Ea.month?1:p*ta(k[lb]()/p));m>=Ea.month&&(k[Eb](m>=Ea.year?0:p*ta(k[zb]()/p)),g=k[ic]());m>=Ea.year&&(g-=g%p,k[Lb](g));if(m===Ea.week)k[rc](k[lb]()-k[ac]()+n(e,1));c=1;rb&&(k=new G(k.getTime()+rb));g=k[ic]();
e=k.getTime();for(var r=k[zb](),s=k[lb](),q=(Ea.day+(h?rb:6E4*k.getTimezoneOffset()))%Ea.day;e<d;)f.push(e),m===Ea.year?e=t(g+c*p,0):m===Ea.month?e=t(g,r+c*p):!h&&(m===Ea.day||m===Ea.week)?e=t(g,r,s+c*p*(m===Ea.day?1:7)):e+=m*p,c++;f.push(e);K(ob(f,function(a){return m<=Ea.hour&&a%Ea.day===q}),function(a){j[a]="day"})}f.info=a(b,{higherRanks:j,totalRange:m*p});return f};R.prototype.normalizeTimeTickInterval=function(a,b){var c=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,
15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],d=c[c.length-1],e=Ea[d[0]],f=d[1],j;for(j=0;j<c.length&&!(d=c[j],e=Ea[d[0]],f=d[1],c[j+1]&&a<=(e*f[f.length-1]+Ea[c[j+1][0]])/2);j++);e===Ea.year&&a<5*e&&(f=[1,2,5]);c=B(a/e,f,"year"===d[0]?Y(y(a/e),1):1);return{unitRange:e,count:c,unitName:d[0]}};R.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,h=this.len,g=[];d||(this._minorAutoInterval=null);if(0.5<=
a)a=X(a),g=this.getLinearTickPositions(a,b,c);else if(0.08<=a)for(var h=ta(b),k,l,m,p,r,e=0.3<a?[1,2,4]:0.15<a?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];h<c+1&&!r;h++){l=e.length;for(k=0;k<l&&!r;k++)m=f(j(h)*e[k]),m>b&&(!d||p<=c)&&p!==H&&g.push(p),p>c&&(r=!0),p=m}else if(b=j(b),c=j(c),a=e[d?"minorTickInterval":"tickInterval"],a=n("auto"===a?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?h/this.tickPositions.length:h)||1)),a=B(a,null,y(a)),g=hb(this.getLinearTickPositions(a,b,c),f),!d)this._minorAutoInterval=
a/5;d||(this.tickInterval=a);return g};var Ub=xa.Tooltip=function(){this.init.apply(this,arguments)};Ub.prototype={init:function(a,b){var c=b.borderWidth,d=b.style,e=g(d.padding);this.chart=a;this.options=b;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=a.renderer.label("",0,0,b.shape||"callout",null,null,b.useHTML,null,"tooltip").attr({padding:e,fill:b.backgroundColor,"stroke-width":c,r:b.borderRadius,zIndex:8}).css(d).css({padding:0}).add().attr({y:-9999});qa||this.label.shadow(b.shadow);
this.shared=b.shared},destroy:function(){this.label&&(this.label=this.label.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(b,c,d,e){var f=this,j=f.now,h=!1!==f.options.animation&&!f.isHidden&&(1<Ca(b-j.x)||1<Ca(c-j.y)),g=f.followPointer||1<f.len;a(j,{x:h?(2*j.x+b)/3:b,y:h?(j.y+c)/2:c,anchorX:g?H:h?(2*j.anchorX+d)/3:d,anchorY:g?H:h?(j.anchorY+e)/2:e});f.label.attr(j);h&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){f&&f.move(b,
c,d,e)},32))},hide:function(a){var b=this,c;clearTimeout(this.hideTimer);this.isHidden||(c=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){b.label.fadeOut();b.isHidden=!0},n(a,this.options.hideDelay,500)),c&&K(c,function(a){a.setState()}),this.chart.hoverPoints=null)},getAnchor:function(a,b){var c,d=this.chart,e=d.inverted,f=d.plotTop,j=0,h=0,g;a=m(a);c=a[0].tooltipPos;this.followPointer&&b&&(b.chartX===H&&(b=d.pointer.normalize(b)),c=[b.chartX-d.plotLeft,b.chartY-f]);c||(K(a,function(a){g=
a.series.yAxis;j+=a.plotX;h+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!e&&g?g.top-f:0)}),j/=a.length,h/=a.length,c=[e?d.plotWidth-h:j,this.shared&&!e&&1<a.length&&b?b.chartY-f:e?d.plotHeight-j:h]);return hb(c,X)},getPosition:function(a,b,c){var d=this.chart,e=this.distance,f={},j,h=["y",d.chartHeight,b,c.plotY+d.plotTop],g=["x",d.chartWidth,a,c.plotX+d.plotLeft],k=c.ttBelow||d.inverted&&!c.negative||!d.inverted&&c.negative,l=function(a,b,c,d){var j=c<d-e;b=d+e+c<b;c=d-e-c;d+=e;if(k&&b)f[a]=d;
else if(!k&&j)f[a]=c;else if(j)f[a]=c;else if(b)f[a]=d;else return!1},m=function(a,b,c,d){if(d<e||d>b-e)return!1;f[a]=d<c/2?1:d>b-c/2?b-c-2:d-c/2},n=function(a){var b=h;h=g;g=b;j=a},p=function(){!1!==l.apply(0,h)?!1===m.apply(0,g)&&!j&&(n(!0),p()):j?f.x=f.y=0:(n(!0),p())};(d.inverted||1<this.len)&&n();p();return f},defaultFormatter:function(a){var b=this.points||m(this),c=b[0].series,d;d=[a.tooltipHeaderFormatter(b[0])];K(b,function(a){c=a.series;d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||
a.point.tooltipFormatter(c.tooltipOptions.pointFormat))});d.push(a.options.footerFormat||"");return d.join("")},refresh:function(a,b){var c=this.chart,d=this.label,e=this.options,f,j,h={},g,k=[];g=e.formatter||this.defaultFormatter;var h=c.hoverPoints,l,p=this.shared;clearTimeout(this.hideTimer);this.followPointer=m(a)[0].series.tooltipOptions.followPointer;j=this.getAnchor(a,b);f=j[0];j=j[1];p&&(!a.series||!a.series.noSharedTooltip)?(c.hoverPoints=a,h&&K(h,function(a){a.setState()}),K(a,function(a){a.setState("hover");
k.push(a.getLabelConfig())}),h={x:a[0].category,y:a[0].y},h.points=k,this.len=k.length,a=a[0]):h=a.getLabelConfig();g=g.call(h,this);h=a.series;this.distance=n(h.tooltipOptions.distance,16);!1===g?this.hide():(this.isHidden&&(Qb(d),d.attr("opacity",1).show()),d.attr({text:g}),l=e.borderColor||a.color||h.color||"#606060",d.attr({stroke:l}),this.updatePosition({plotX:f,plotY:j,negative:a.negative,ttBelow:a.ttBelow}),this.isHidden=!1);Ua(c,"tooltipRefresh",{text:g,x:f+c.plotLeft,y:j+c.plotTop,borderColor:l})},
updatePosition:function(a){var b=this.chart,c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(X(c.x),X(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)},tooltipHeaderFormatter:function(a){var b=a.series,c=b.tooltipOptions,d=c.dateTimeLabelFormats,e=c.xDateFormat,f=b.xAxis,j=f&&"datetime"===f.options.type&&h(a.key),c=c.headerFormat,f=f&&f.closestPointRange,g;if(j&&!e){if(f)for(g in Ea){if(Ea[g]>=f||Ea[g]<=Ea.day&&0<a.key%Ea[g]){e=d[g];break}}else e=d.day;
e=e||d.year}j&&e&&(c=c.replace("{point.key}","{point.key:"+e+"}"));return D(c,{point:a,series:b})}};var Ab;Ka=M.documentElement.ontouchstart!==H;var Rb=xa.Pointer=function(a,b){this.init(a,b)};Rb.prototype={init:function(a,b){var c=b.chart,d=c.events,e=qa?"":c.zoomType,c=a.inverted,f;this.options=b;this.chart=a;this.zoomX=f=/x/.test(e);this.zoomY=e=/y/.test(e);this.zoomHor=f&&!c||e&&c;this.zoomVert=e&&!c||f&&c;this.hasZoom=f||e;this.runChartClick=d&&!!d.click;this.pinchDown=[];this.lastValidTouch=
{};xa.Tooltip&&b.tooltip.enabled&&(a.tooltip=new Ub(a,b.tooltip),this.followTouchMove=b.tooltip.followTouchMove);this.setDOMEvents()},normalize:function(b,c){var d,e;b=b||window.event;b=Cc(b);b.target||(b.target=b.srcElement);e=b.touches?b.touches.length?b.touches.item(0):b.changedTouches[0]:b;c||(this.chartPosition=c=bc(this.chart.container));e.pageX===H?(d=Y(b.x,b.clientX-c.left),e=b.y):(d=e.pageX-c.left,e=e.pageY-c.top);return a(b,{chartX:X(d),chartY:X(e)})},getCoordinates:function(a){var b={xAxis:[],
yAxis:[]};K(this.chart.axes,function(c){b[c.isXAxis?"xAxis":"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})});return b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b=this.chart,c=b.series,d=b.tooltip,e,f,j=b.hoverPoint,h=b.hoverSeries,g,k,l=b.chartWidth,m=this.getIndex(a);if(d&&this.options.tooltip.shared&&(!h||!h.noSharedTooltip)){f=[];g=c.length;for(k=0;k<g;k++)if(c[k].visible&&
!1!==c[k].options.enableMouseTracking&&!c[k].noSharedTooltip&&!0!==c[k].singularTooltips&&c[k].tooltipPoints.length&&(e=c[k].tooltipPoints[m])&&e.series)e._dist=Ca(m-e.clientX),l=sa(l,e._dist),f.push(e);for(g=f.length;g--;)f[g]._dist>l&&f.splice(g,1);f.length&&f[0].clientX!==this.hoverX&&(d.refresh(f,a),this.hoverX=f[0].clientX)}c=h&&h.tooltipOptions.followPointer;if(h&&h.tracker&&!c){if((e=h.tooltipPoints[m])&&e!==j)e.onMouseOver(a)}else d&&c&&!d.isHidden&&(h=d.getAnchor([{}],a),d.updatePosition({plotX:h[0],
plotY:h[1]}));d&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(a){if(pa[Ab])pa[Ab].pointer.onDocumentMouseMove(a)},Ia(M,"mousemove",this._onDocumentMouseMove));K(b.axes,function(b){b.drawCrosshair(a,n(e,j))})},reset:function(a,b){var c=this.chart,d=c.hoverSeries,e=c.hoverPoint,f=c.tooltip,j=f&&f.shared?c.hoverPoints:e;(a=a&&f&&j)&&m(j)[0].plotX===H&&(a=!1);if(a)f.refresh(j),e&&e.setState(e.state,!0);else{if(e)e.onMouseOut();if(d)d.onMouseOut();f&&f.hide(b);this._onDocumentMouseMove&&
(bb(M,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null);K(c.axes,function(a){a.hideCrosshair()});this.hoverX=null}},scaleGroups:function(a,b){var c=this.chart,d;K(c.series,function(e){d=a||e.getPlotBox();e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(d),e.markerGroup&&(e.markerGroup.attr(d),e.markerGroup.clip(b?c.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(d))});c.clipRect.attr(b||c.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type;b.cancelClick=
!1;b.mouseDownX=this.mouseDownX=a.chartX;b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var b=this.chart,c=b.options.chart,d=a.chartX,e=a.chartY,f=this.zoomHor,j=this.zoomVert,h=b.plotLeft,g=b.plotTop,k=b.plotWidth,l=b.plotHeight,m,n=this.mouseDownX,p=this.mouseDownY,r=c.panKey&&a[c.panKey+"Key"];d<h?d=h:d>h+k&&(d=h+k);e<g?e=g:e>g+l&&(e=g+l);this.hasDragged=Math.sqrt(Math.pow(n-d,2)+Math.pow(p-e,2));if(10<this.hasDragged){m=b.isInsidePlot(n-h,p-g);if(b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&
m&&!r&&!this.selectionMarker)this.selectionMarker=b.renderer.rect(h,g,f?1:k,j?1:l,0).attr({fill:c.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add();this.selectionMarker&&f&&(d-=n,this.selectionMarker.attr({width:Ca(d),x:(0<d?0:d)+n}));this.selectionMarker&&j&&(d=e-p,this.selectionMarker.attr({height:Ca(d),y:(0<d?0:d)+p}));m&&!this.selectionMarker&&c.panning&&b.pan(a,c.panning)}},drop:function(b){var c=this.chart,d=this.hasPinched;if(this.selectionMarker){var e={xAxis:[],yAxis:[],originalEvent:b.originalEvent||
b},f=this.selectionMarker,j=f.attr?f.attr("x"):f.x,h=f.attr?f.attr("y"):f.y,g=f.attr?f.attr("width"):f.width,k=f.attr?f.attr("height"):f.height,l;if(this.hasDragged||d)K(c.axes,function(a){if(a.zoomEnabled){var c=a.horiz,d="touchend"===b.type?a.minPixelPadding:0,f=a.toValue((c?j:h)+d),c=a.toValue((c?j+g:h+k)-d);!isNaN(f)&&!isNaN(c)&&(e[a.coll].push({axis:a,min:sa(f,c),max:Y(f,c)}),l=!0)}}),l&&Ua(c,"selection",e,function(b){c.zoom(a(b,d?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy();
d&&this.scaleGroups()}c&&(r(c.container,{cursor:c._cursor}),c.cancelClick=10<this.hasDragged,c.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a);a.preventDefault&&a.preventDefault();this.dragStart(a)},onDocumentMouseUp:function(a){pa[Ab]&&pa[Ab].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries;a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-
b.plotLeft,a.chartY-b.plotTop)&&this.reset()},onContainerMouseLeave:function(){var a=pa[Ab];a&&(a.pointer.reset(),a.pointer.chartPosition=null)},onContainerMouseMove:function(a){var b=this.chart;Ab=b.index;a=this.normalize(a);a.returnValue=!1;"mousedown"===b.mouseIsDown&&this.drag(a);(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=p(a,"class")){if(-1!==c.indexOf(b))return!0;
if(-1!==c.indexOf("highcharts-container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;if(b&&!b.options.stickyTracking&&!this.inClass(a,"highcharts-tooltip")&&c!==b)b.onMouseOut()},onContainerClick:function(b){var c=this.chart,d=c.hoverPoint,e=c.plotLeft,f=c.plotTop;b=this.normalize(b);b.cancelBubble=!0;c.cancelClick||(d&&this.inClass(b.target,"highcharts-tracker")?(Ua(d.series,"click",a(b,{point:d})),
c.hoverPoint&&d.firePointEvent("click",b)):(a(b,this.getCoordinates(b)),c.isInsidePlot(b.chartX-e,b.chartY-f)&&Ua(c,"click",b)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)};b.onmousemove=function(b){a.onContainerMouseMove(b)};b.onclick=function(b){a.onContainerClick(b)};Ia(b,"mouseleave",a.onContainerMouseLeave);1===Q&&Ia(M,"mouseup",a.onDocumentMouseUp);Ka&&(b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},
1===Q&&Ia(M,"touchend",a.onDocumentTouchEnd))},destroy:function(){var a;bb(this.chart.container,"mouseleave",this.onContainerMouseLeave);Q||(bb(M,"mouseup",this.onDocumentMouseUp),bb(M,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}};a(xa.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},
pinchTranslateDirection:function(a,b,c,d,e,f,j,h){var g=this.chart,k=a?"x":"y",l=a?"X":"Y",m="chart"+l,n=a?"width":"height",p=g["plot"+(a?"Left":"Top")],r,s,q=h||1,t=g.inverted,z=g.bounds[a?"h":"v"],v=1===b.length,y=b[0][m],w=c[0][m],A=!v&&b[1][m],D=!v&&c[1][m],B;c=function(){!v&&20<Ca(y-A)&&(q=h||Ca(w-D)/Ca(y-A));s=(p-w)/q+y;r=g["plot"+(a?"Width":"Height")]/q};c();b=s;b<z.min?(b=z.min,B=!0):b+r>z.max&&(b=z.max-r,B=!0);B?(w-=0.8*(w-j[k][0]),v||(D-=0.8*(D-j[k][1])),c()):j[k]=[w,D];t||(f[k]=s-p,f[n]=
r);f=t?1/q:q;e[n]=r;e[k]=b;d[t?a?"scaleY":"scaleX":"scale"+l]=q;d["translate"+l]=f*p+(w-f*y)},pinch:function(b){var c=this,d=c.chart,e=c.pinchDown,f=c.followTouchMove,j=b.touches,h=j.length,g=c.lastValidTouch,k=c.hasZoom,l=c.selectionMarker,m={},p=1===h&&(c.inClass(b.target,"highcharts-tracker")&&d.runTrackerClick||c.runChartClick),r={};(k||f)&&!p&&b.preventDefault();hb(j,function(a){return c.normalize(a)});"touchstart"===b.type?(K(j,function(a,b){e[b]={chartX:a.chartX,chartY:a.chartY}}),g.x=[e[0].chartX,
e[1]&&e[1].chartX],g.y=[e[0].chartY,e[1]&&e[1].chartY],K(d.axes,function(a){if(a.zoomEnabled){var b=d.bounds[a.horiz?"h":"v"],c=a.minPixelPadding,e=a.toPixels(n(a.options.min,a.dataMin)),f=a.toPixels(n(a.options.max,a.dataMax)),j=sa(e,f),e=Y(e,f);b.min=sa(a.pos,j-c);b.max=Y(a.pos+a.len,e+c)}}),c.res=!0):e.length&&(l||(c.selectionMarker=l=a({destroy:ya},d.plotBox)),c.pinchTranslate(e,j,m,l,r,g),c.hasPinched=k,c.scaleGroups(m,r),!k&&f&&1===h?this.runPointActions(c.normalize(b)):c.res&&(c.res=!1,this.reset(!1,
0)))},onContainerTouchStart:function(a){var b=this.chart;Ab=b.index;1===a.touches.length?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):2===a.touches.length&&this.pinch(a)},onContainerTouchMove:function(a){(1===a.touches.length||2===a.touches.length)&&this.pinch(a)},onDocumentTouchEnd:function(a){pa[Ab]&&pa[Ab].pointer.drop(a)}});if(F.PointerEvent||F.MSPointerEvent){var mb={},Ib=!!F.PointerEvent,gb=function(){var a,
b=[];b.item=function(a){return this[a]};for(a in mb)mb.hasOwnProperty(a)&&b.push({pageX:mb[a].pageX,pageY:mb[a].pageY,target:mb[a].target});return b},nb=function(a,b,c,d){a=a.originalEvent||a;if(("touch"===a.pointerType||a.pointerType===a.MSPOINTER_TYPE_TOUCH)&&pa[Ab])d(a),d=pa[Ab].pointer,d[b]({type:c,target:a.currentTarget,preventDefault:ya,touches:gb()})};a(Rb.prototype,{onContainerPointerDown:function(a){nb(a,"onContainerTouchStart","touchstart",function(a){mb[a.pointerId]={pageX:a.pageX,pageY:a.pageY,
target:a.currentTarget}})},onContainerPointerMove:function(a){nb(a,"onContainerTouchMove","touchmove",function(a){mb[a.pointerId]={pageX:a.pageX,pageY:a.pageY};mb[a.pointerId].target||(mb[a.pointerId].target=a.currentTarget)})},onDocumentPointerUp:function(a){nb(a,"onContainerTouchEnd","touchend",function(a){delete mb[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,Ib?"pointerdown":"MSPointerDown",this.onContainerPointerDown);a(this.chart.container,Ib?"pointermove":"MSPointerMove",
this.onContainerPointerMove);a(M,Ib?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});z(Rb.prototype,"init",function(a,b,c){a.call(this,b,c);(this.hasZoom||this.followTouchMove)&&r(b.container,{"-ms-touch-action":ha,"touch-action":ha})});z(Rb.prototype,"setDOMEvents",function(a){a.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Ia)});z(Rb.prototype,"destroy",function(a){this.batchMSEvents(bb);a.call(this)})}var Vb=xa.Legend=function(a,b){this.init(a,b)};Vb.prototype={init:function(a,
c){var d=this,e=c.itemStyle,f=n(c.padding,8),j=c.itemMarginTop||0;this.options=c;c.enabled&&(d.itemStyle=e,d.itemHiddenStyle=b(e,c.itemHiddenStyle),d.itemMarginTop=j,d.padding=f,d.initialItemX=f,d.initialItemY=f-5,d.maxItemWidth=0,d.chart=a,d.itemHeight=0,d.lastLineHeight=0,d.symbolWidth=n(c.symbolWidth,16),d.pages=[],d.render(),Ia(d.chart,"endResize",function(){d.positionCheckboxes()}))},colorizeItem:function(a,b){var c=this.options,d=a.legendItem,e=a.legendLine,f=a.legendSymbol,j=this.itemHiddenStyle.color,
c=b?c.itemStyle.color:j,h=b?a.legendColor||a.color||"#CCC":j,j=a.options&&a.options.marker,g={fill:h},k;d&&d.css({fill:c,color:c});e&&e.attr({stroke:h});if(f){if(j&&f.isMarker)for(k in g.stroke=h,j=a.convertAttribs(j),j)d=j[k],d!==H&&(g[k]=d);f.attr(g)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d);f&&(f.x=e,f.y=d)},destroyItem:function(a){var b=a.checkbox;
K(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())});b&&V(a.checkbox)},destroy:function(){var a=this.group,b=this.box;b&&(this.box=b.destroy());a&&(this.group=a.destroy())},positionCheckboxes:function(a){var b=this.group.alignAttr,c,d=this.clipHeight||this.legendHeight;b&&(c=b.translateY,K(this.allItems,function(e){var f=e.checkbox,j;f&&(j=c+f.y+(a||0)+3,r(f,{left:b.translateX+e.checkboxOffset+f.x-20+"px",top:j+"px",display:j>c-6&&j<c+d-6?"":ha}))}))},
renderTitle:function(){var a=this.padding,b=this.options.title,c=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group)),a=this.title.getBBox(),c=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:c}));this.titleHeight=c},renderItem:function(a){var c=this.chart,d=c.renderer,e=this.options,f="horizontal"===e.layout,j=this.symbolWidth,h=e.symbolPadding,g=this.itemStyle,k=this.itemHiddenStyle,
l=this.padding,m=f?n(e.itemDistance,20):0,p=!e.rtl,r=e.width,s=e.itemMarginBottom||0,q=this.itemMarginTop,t=this.initialItemX,z=a.legendItem,v=a.series&&a.series.drawLegendSymbol?a.series:a,y=v.options,y=this.createCheckboxForItem&&y&&y.showCheckbox,w=e.useHTML;z||(a.legendGroup=d.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),a.legendItem=z=d.text(e.labelFormat?D(e.labelFormat,a):e.labelFormatter.call(a),p?j+h:-h,this.baseline||0,w).css(b(a.visible?g:k)).attr({align:p?"left":"right",zIndex:2}).add(a.legendGroup),
this.baseline||(this.baseline=d.fontMetrics(g.fontSize,z).f+3+q,z.attr("y",this.baseline)),v.drawLegendSymbol(this,a),this.setItemEvents&&this.setItemEvents(a,z,w,g,k),this.colorizeItem(a,a.visible),y&&this.createCheckboxForItem(a));d=z.getBBox();j=a.checkboxOffset=e.itemWidth||a.legendItemWidth||j+h+d.width+m+(y?20:0);this.itemHeight=h=X(a.legendItemHeight||d.height);if(f&&this.itemX-t+j>(r||c.chartWidth-2*l-t-e.x))this.itemX=t,this.itemY+=q+this.lastLineHeight+s,this.lastLineHeight=0;this.maxItemWidth=
Y(this.maxItemWidth,j);this.lastItemY=q+this.itemY+s;this.lastLineHeight=Y(h,this.lastLineHeight);a._legendItemPos=[this.itemX,this.itemY];f?this.itemX+=j:(this.itemY+=q+h+s,this.lastLineHeight=h);this.offsetWidth=r||Y((f?this.itemX-t-m:j)+l,this.offsetWidth)},getAllItems:function(){var a=[];K(this.chart.series,function(b){var c=b.options;if(n(c.showInLegend,!l(c.linkedTo)?H:!1,!0))a=a.concat(b.legendItems||("point"===c.legendType?b.data:b))});return a},render:function(){var b=this,c=b.chart,d=c.renderer,
e=b.group,f,j,h,g,k=b.box,l=b.options,m=b.padding,n=l.borderWidth,p=l.backgroundColor;b.itemX=b.initialItemX;b.itemY=b.initialItemY;b.offsetWidth=0;b.lastItemY=0;e||(b.group=e=d.g("legend").attr({zIndex:7}).add(),b.contentGroup=d.g().attr({zIndex:1}).add(e),b.scrollGroup=d.g().add(b.contentGroup));b.renderTitle();f=b.getAllItems();I(f,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)});l.reversed&&f.reverse();b.allItems=f;b.display=j=!!f.length;K(f,function(a){b.renderItem(a)});
h=l.width||b.offsetWidth;g=b.lastItemY+b.lastLineHeight+b.titleHeight;g=b.handleOverflow(g);if(n||p)h+=m,g+=m,k?0<h&&0<g&&(k[k.isNew?"attr":"animate"](k.crisp({width:h,height:g})),k.isNew=!1):(b.box=k=d.rect(0,0,h,g,l.borderRadius,n||0).attr({stroke:l.borderColor,"stroke-width":n||0,fill:p||ha}).add(e).shadow(l.shadow),k.isNew=!0),k[j?"show":"hide"]();b.legendWidth=h;b.legendHeight=g;K(f,function(a){b.positionItem(a)});j&&e.align(a({width:h,height:g},l),!0,"spacingBox");c.isResizing||this.positionCheckboxes()},
handleOverflow:function(a){var b=this,c=this.chart,d=c.renderer,e=this.options,f=e.y,f=c.spacingBox.height+("top"===e.verticalAlign?-f:f)-this.padding,j=e.maxHeight,h,g=this.clipRect,k=e.navigation,l=n(k.animation,!0),m=k.arrowSize||12,p=this.nav,r=this.pages,s,q=this.allItems;"horizontal"===e.layout&&(f/=2);j&&(f=sa(f,j));r.length=0;a>f&&!e.useHTML?(this.clipHeight=h=Y(f-20-this.titleHeight-this.padding,0),this.currentPage=n(this.currentPage,1),this.fullHeight=a,K(q,function(a,b){var c=a._legendItemPos[1],
d=X(a.legendItem.getBBox().height),e=r.length;if(!e||c-r[e-1]>h&&(s||c)!==r[e-1])r.push(s||c),e++;b===q.length-1&&c+d-r[e-1]>h&&r.push(c);c!==s&&(s=c)}),g||(g=b.clipRect=d.clipRect(0,this.padding,9999,0),b.contentGroup.clip(g)),g.attr({height:h}),p||(this.nav=p=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,m,m).on("click",function(){b.scroll(-1,l)}).add(p),this.pager=d.text("",15,10).css(k.style).add(p),this.down=d.symbol("triangle-down",0,0,m,m).on("click",function(){b.scroll(1,
l)}).add(p)),b.scroll(0),a=f):p&&(g.attr({height:c.chartHeight}),p.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0);return a},scroll:function(a,b){var c=this.pages,d=c.length,e=this.currentPage+a,f=this.clipHeight,j=this.options.navigation,h=j.activeColor,j=j.inactiveColor,g=this.pager,k=this.padding;e>d&&(e=d);0<e&&(b!==H&&P(b,this.chart),this.nav.attr({translateX:k,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===e?j:h}).css({cursor:1===e?
"default":"pointer"}),g.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?j:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=e,this.positionCheckboxes(c))}};Ra=xa.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b=
this.options,c=b.marker,d;d=a.symbolWidth;var e=this.chart.renderer,f=this.legendGroup;a=a.baseline-X(0.3*e.fontMetrics(a.options.itemStyle.fontSize,this.legendItem).b);var j;b.lineWidth&&(j={"stroke-width":b.lineWidth},b.dashStyle&&(j.dashstyle=b.dashStyle),this.legendLine=e.path(["M",0,a,"L",d,a]).attr(j).add(f));c&&!1!==c.enabled&&(b=c.radius,this.legendSymbol=d=e.symbol(this.symbol,d/2-b,a-b,2*b,2*b).add(f),d.isMarker=!0)}};(/Trident\/7\.0/.test(Na)||ka)&&z(Vb.prototype,"positionItem",function(a,
b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d();setTimeout(d)});Z.prototype={init:function(a,c){var d,e=a.series;a.series=null;d=b(aa,a);d.series=a.series=e;this.userOptions=a;e=d.chart;this.margin=this.splashArray("margin",e);this.spacing=this.splashArray("spacing",e);var f=e.events;this.bounds={h:{},v:{}};this.callback=c;this.isResizing=0;this.options=d;this.axes=[];this.series=[];this.hasCartesianSeries=e.showAxes;var j=this,h;j.index=pa.length;pa.push(j);Q++;!1!==e.reflow&&Ia(j,
"load",function(){j.initReflow()});if(f)for(h in f)Ia(j,h,f[h]);j.xAxis=[];j.yAxis=[];j.animation=qa?!1:n(e.animation,!0);j.pointCount=j.colorCounter=j.symbolCounter=0;j.firstRender()},initSeries:function(a){var b=this.options.chart;(b=La[a.type||b.type||b.defaultSeriesType])||Ma(17,!0);b=new b;b.init(this,a);return b},isInsidePlot:function(a,b,c){var d=c?b:a;a=c?a:b;return 0<=d&&d<=this.plotWidth&&0<=a&&a<=this.plotHeight},adjustTickAmounts:function(){!1!==this.options.chart.alignTicks&&K(this.axes,
function(a){a.adjustTickAmount()});this.maxTicks=null},redraw:function(b){var c=this.axes,d=this.series,e=this.pointer,f=this.legend,j=this.isDirtyLegend,h,g,k=this.hasCartesianSeries,l=this.isDirtyBox,m=d.length,n=m,p=this.renderer,r=p.isHidden(),s=[];P(b,this);r&&this.cloneRenderTo();for(this.layOutTitles();n--;)if(b=d[n],b.options.stacking&&(h=!0,b.isDirty)){g=!0;break}if(g)for(n=m;n--;)if(b=d[n],b.options.stacking)b.isDirty=!0;K(d,function(a){a.isDirty&&"point"===a.options.legendType&&(j=!0)});
j&&f.options.enabled&&(f.render(),this.isDirtyLegend=!1);h&&this.getStacks();k&&(this.isResizing||(this.maxTicks=null,K(c,function(a){a.setScale()})),this.adjustTickAmounts());this.getMargins();k&&(K(c,function(a){a.isDirty&&(l=!0)}),K(c,function(b){b.isDirtyExtremes&&(b.isDirtyExtremes=!1,s.push(function(){Ua(b,"afterSetExtremes",a(b.eventArgs,b.getExtremes()));delete b.eventArgs}));(l||h)&&b.redraw()}));l&&this.drawChartBox();K(d,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});
e&&e.reset(!0);p.draw();Ua(this,"redraw");r&&this.cloneRenderTo(!0);K(s,function(a){a.call()})},get:function(a){var b=this.axes,c=this.series,d,e;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++){e=c[d].points||[];for(b=0;b<e.length;b++)if(e[b].id===a)return e[b]}return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=m(b.xAxis||{}),b=b.yAxis=m(b.yAxis||{});K(c,function(a,b){a.index=b;a.isX=!0});
K(b,function(a,b){a.index=b});c=c.concat(b);K(c,function(b){new R(a,b)});a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];K(this.series,function(b){a=a.concat(ob(b.points||[],function(a){return a.selected}))});return a},getSelectedSeries:function(){return ob(this.series,function(a){return a.selected})},getStacks:function(){var a=this;K(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)});K(a.series,function(b){if(b.options.stacking&&(!0===b.visible||!1===a.options.chart.ignoreHiddenSeries))b.stackKey=
b.type+n(b.options.stack,"")})},setTitle:function(a,c,d){var e=this,f=e.options,j;j=f.title=b(f.title,a);f=f.subtitle=b(f.subtitle,c);K([["title",a,j],["subtitle",c,f]],function(a){var b=a[0],c=e[b],d=a[1];a=a[2];c&&d&&(e[b]=c=c.destroy());a&&a.text&&!c&&(e[b]=e.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())});e.layOutTitles(d)},layOutTitles:function(b){var c=0,d=this.title,e=this.subtitle,f=this.options,j=f.title,f=f.subtitle,
h=this.renderer,g=this.spacingBox.width-44;if(d&&(d.css({width:(j.width||g)+"px"}).align(a({y:h.fontMetrics(j.style.fontSize,d).b-3},j),!1,"spacingBox"),!j.floating&&!j.verticalAlign))c=d.getBBox().height;e&&(e.css({width:(f.width||g)+"px"}).align(a({y:c+(j.margin-13)+h.fontMetrics(j.style.fontSize,e).b},f),!1,"spacingBox"),!f.floating&&!f.verticalAlign&&(c=q(c+e.getBBox().height)));d=this.titleOffset!==c;this.titleOffset=c;!this.isDirtyBox&&d&&(this.isDirtyBox=d,this.hasRendered&&n(b,!0)&&this.isDirtyBox&&
this.redraw())},getChartSize:function(){var a=this.options.chart,b=a.width,a=a.height,c=this.renderToClone||this.renderTo;l(b)||(this.containerWidth=Pb(c,"width"));l(a)||(this.containerHeight=Pb(c,"height"));this.chartWidth=Y(0,b||this.containerWidth||600);this.chartHeight=Y(0,n(a,19<this.containerHeight?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),V(b),delete this.renderToClone):(c&&c.parentNode===this.renderTo&&
this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),r(b,{position:"absolute",top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),M.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var b,d=this.options.chart,e,f,j;this.renderTo=b=d.renderTo;j="highcharts-"+Fa++;c(b)&&(this.renderTo=b=M.getElementById(b));b||Ma(13,!0);e=g(p(b,"data-highcharts-chart"));!isNaN(e)&&pa[e]&&pa[e].hasRendered&&pa[e].destroy();p(b,
"data-highcharts-chart",this.index);b.innerHTML="";!d.skipClone&&!b.offsetWidth&&this.cloneRenderTo();this.getChartSize();e=this.chartWidth;f=this.chartHeight;this.container=b=s(Db,{className:"highcharts-container"+(d.className?" "+d.className:""),id:j},a({position:"relative",overflow:"hidden",width:e+"px",height:f+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},d.style),this.renderToClone||b);this._cursor=b.style.cursor;this.renderer=d.forExport?
new pb(b,e,f,d.style,!0):new ja(b,e,f,d.style);qa&&this.renderer.create(this,b,e,f)},getMargins:function(){var a=this.spacing,b,c=this.legend,d=this.margin,e=this.options.legend,f=n(e.margin,20),j=e.x,h=e.y,g=e.align,k=e.verticalAlign,m=this.titleOffset;this.resetMargins();b=this.axisOffset;m&&!l(d[0])&&(this.plotTop=Y(this.plotTop,m+this.options.title.margin+a[0]));c.display&&!e.floating&&("right"===g?l(d[1])||(this.marginRight=Y(this.marginRight,c.legendWidth-j+f+a[1])):"left"===g?l(d[3])||(this.plotLeft=
Y(this.plotLeft,c.legendWidth+j+f+a[3])):"top"===k?l(d[0])||(this.plotTop=Y(this.plotTop,c.legendHeight+h+f+a[0])):"bottom"===k&&!l(d[2])&&(this.marginBottom=Y(this.marginBottom,c.legendHeight-h+f+a[2])));this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&K(this.axes,function(a){a.getOffset()});l(d[3])||(this.plotLeft+=b[3]);l(d[0])||(this.plotTop+=b[0]);l(d[2])||(this.marginBottom+=b[2]);l(d[1])||(this.marginRight+=
b[1]);this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||Pb(d,"width"),f=c.height||Pb(d,"height"),c=a?a.target:F,d=function(){b.container&&(b.setSize(e,f,!1),b.hasUserSize=null)};if(!b.hasUserSize&&e&&f&&(c===F||c===M)){if(e!==b.containerWidth||f!==b.containerHeight)clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d();b.containerWidth=e;b.containerHeight=f}},initReflow:function(){var a=this,b=function(b){a.reflow(b)};Ia(F,"resize",b);Ia(a,
"destroy",function(){bb(F,"resize",b)})},setSize:function(a,b,c){var d=this,e,f,j;d.isResizing+=1;j=function(){d&&Ua(d,"endResize",null,function(){d.isResizing-=1})};P(c,d);d.oldChartHeight=d.chartHeight;d.oldChartWidth=d.chartWidth;l(a)&&(d.chartWidth=e=Y(0,X(a)),d.hasUserSize=!!e);l(b)&&(d.chartHeight=f=Y(0,X(b)));(wa?Ya:r)(d.container,{width:e+"px",height:f+"px"},wa);d.setChartSize(!0);d.renderer.setSize(e,f,c);d.maxTicks=null;K(d.axes,function(a){a.isDirty=!0;a.setScale()});K(d.series,function(a){a.isDirty=
!0});d.isDirtyLegend=!0;d.isDirtyBox=!0;d.layOutTitles();d.getMargins();d.redraw(c);d.oldChartHeight=null;Ua(d,"resize");!1===wa?j():setTimeout(j,wa&&wa.duration||500)},setChartSize:function(a){var b=this.inverted,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.options.chart,j=this.spacing,h=this.clipOffset,g,k,l,m;this.plotLeft=g=X(this.plotLeft);this.plotTop=k=X(this.plotTop);this.plotWidth=l=Y(0,X(d-g-this.marginRight));this.plotHeight=m=Y(0,X(e-k-this.marginBottom));this.plotSizeX=
b?m:l;this.plotSizeY=b?l:m;this.plotBorderWidth=f.plotBorderWidth||0;this.spacingBox=c.spacingBox={x:j[3],y:j[0],width:d-j[3]-j[1],height:e-j[0]-j[2]};this.plotBox=c.plotBox={x:g,y:k,width:l,height:m};d=2*ta(this.plotBorderWidth/2);b=q(Y(d,h[3])/2);c=q(Y(d,h[0])/2);this.clipBox={x:b,y:c,width:ta(this.plotSizeX-Y(d,h[1])/2-b),height:Y(0,ta(this.plotSizeY-Y(d,h[2])/2-c))};a||K(this.axes,function(a){a.setAxisSize();a.setAxisTranslation()})},resetMargins:function(){var a=this.spacing,b=this.margin;this.plotTop=
n(b[0],a[0]);this.marginRight=n(b[1],a[1]);this.marginBottom=n(b[2],a[2]);this.plotLeft=n(b[3],a[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var a=this.options.chart,b=this.renderer,c=this.chartWidth,d=this.chartHeight,e=this.chartBackground,f=this.plotBackground,j=this.plotBorder,h=this.plotBGImage,g=a.borderWidth||0,k=a.backgroundColor,l=a.plotBackgroundColor,m=a.plotBackgroundImage,n=a.plotBorderWidth||0,p,r=this.plotLeft,s=this.plotTop,q=this.plotWidth,t=this.plotHeight,
z=this.plotBox,v=this.clipRect,y=this.clipBox;p=g+(a.shadow?8:0);if(g||k)e?e.animate(e.crisp({width:c-p,height:d-p})):(e={fill:k||ha},g&&(e.stroke=a.borderColor,e["stroke-width"]=g),this.chartBackground=b.rect(p/2,p/2,c-p,d-p,a.borderRadius,g).attr(e).addClass("highcharts-background").add().shadow(a.shadow));l&&(f?f.animate(z):this.plotBackground=b.rect(r,s,q,t,0).attr({fill:l}).add().shadow(a.plotShadow));m&&(h?h.animate(z):this.plotBGImage=b.image(m,r,s,q,t).add());v?v.animate({width:y.width,height:y.height}):
this.clipRect=b.clipRect(y);n&&(j?j.animate(j.crisp({x:r,y:s,width:q,height:t,strokeWidth:-n})):this.plotBorder=b.rect(r,s,q,t,0,-n).attr({stroke:a.plotBorderColor,"stroke-width":n,fill:ha,zIndex:1}).add());this.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,c,d=a.options.series,e,f;K(["inverted","angular","polar"],function(j){c=La[b.type||b.defaultSeriesType];f=a[j]||b[j]||c&&c.prototype[j];for(e=d&&d.length;!f&&e--;)(c=La[d[e].type])&&c.prototype[j]&&(f=!0);a[j]=f})},linkSeries:function(){var a=
this,b=a.series;K(b,function(a){a.linkedSeries.length=0});K(b,function(b){var d=b.options.linkedTo;if(c(d)&&(d=":previous"===d?a.series[b.index-1]:a.get(d)))d.linkedSeries.push(b),b.linkedParent=d})},renderSeries:function(){K(this.series,function(a){a.translate();a.setTooltipPoints&&a.setTooltipPoints();a.render()})},renderLabels:function(){var b=this,c=b.options.labels;c.items&&K(c.items,function(d){var e=a(c.style,d.style),f=g(e.left)+b.plotLeft,j=g(e.top)+b.plotTop+12;delete e.left;delete e.top;
b.renderer.text(d.html,f,j).attr({zIndex:2}).css(e).add()})},render:function(){var a=this.axes,b=this.renderer,c=this.options;this.setTitle();this.legend=new Vb(this,c.legend);this.getStacks();K(a,function(a){a.setScale()});this.getMargins();this.maxTicks=null;K(a,function(a){a.setTickPositions(!0);a.setMaxTicks()});this.adjustTickAmounts();this.getMargins();this.drawChartBox();this.hasCartesianSeries&&K(a,function(a){a.render()});this.seriesGroup||(this.seriesGroup=b.g("series-group").attr({zIndex:3}).add());
this.renderSeries();this.renderLabels();this.showCredits(c.credits);this.hasRendered=!0},showCredits:function(a){a.enabled&&!this.credits&&(this.credits=this.renderer.text(a.text,0,0).on("click",function(){a.href&&(location.href=a.href)}).attr({align:a.position.align,zIndex:8}).css(a.style).add().align(a.position))},destroy:function(){var a=this,b=a.axes,c=a.series,d=a.container,e,f=d&&d.parentNode;Ua(a,"destroy");pa[a.index]=H;Q--;a.renderTo.removeAttribute("data-highcharts-chart");bb(a);for(e=b.length;e--;)b[e]=
b[e].destroy();for(e=c.length;e--;)c[e]=c[e].destroy();K("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer scroller rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(b){var c=a[b];c&&c.destroy&&(a[b]=c.destroy())});d&&(d.innerHTML="",bb(d),f&&V(d));for(e in a)delete a[e]},isReadyToRender:function(){var a=this;return!T&&F==F.top&&"complete"!==M.readyState||qa&&!F.canvg?(qa?jc.push(function(){a.firstRender()},a.options.global.canvasToolsURL):
M.attachEvent("onreadystatechange",function(){M.detachEvent("onreadystatechange",a.firstRender);"complete"===M.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;a.isReadyToRender()&&(a.getContainer(),Ua(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),K(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),Ua(a,"beforeRender"),xa.Pointer&&(a.pointer=new Rb(a,b)),a.render(),a.renderer.draw(),c&&c.apply(a,[a]),K(a.callbacks,
function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),Ua(a,"load"))},splashArray:function(a,b){var c=b[a],c=e(c)?c:[c,c,c,c];return[n(b[a+"Top"],c[0]),n(b[a+"Right"],c[1]),n(b[a+"Bottom"],c[2]),n(b[a+"Left"],c[3])]}};Z.prototype.callbacks=[];Ja=xa.CenteredSeriesMixin={getCenter:function(){var a=this.options,b=this.chart,c=2*(a.slicedOffset||0),d,e=b.plotWidth-2*c,f=b.plotHeight-2*c,b=a.center,a=[n(b[0],"50%"),n(b[1],"50%"),a.size||"100%",a.innerSize||0],j=sa(e,f),h;return hb(a,function(a,b){h=/%$/.test(a);
d=2>b||2===b&&h;return(h?[e,f,j,j][b]*g(a)/100:a)+(d?c:0)})}};var Fb=function(){};Fb.prototype={init:function(a,b,c){this.series=a;this.applyOptions(b,c);this.pointAttr={};if(a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length))a.colorCounter=0;a.chart.pointCount++;return this},applyOptions:function(b,c){var d=this.series,e=d.options.pointValKey||d.pointValKey;b=Fb.prototype.optionsToObject.call(this,b);a(this,b);
this.options=this.options?a(this.options,b):b;e&&(this.y=this[e]);this.x===H&&d&&(this.x=c===H?d.autoIncrement():c);return this},optionsToObject:function(a){var b={},c=this.series,e=c.pointArrayMap||["y"],f=e.length,j=0,h=0;if("number"===typeof a||null===a)b[e[0]]=a;else if(d(a)){a.length>f&&(c=typeof a[0],"string"===c?b.name=a[0]:"number"===c&&(b.x=a[0]),j++);for(;h<f;)b[e[h++]]=a[j++]}else"object"===typeof a&&(b=a,a.dataLabels&&(c._hasPointLabels=!0),a.marker&&(c._hasPointMarkers=!0));return b},
destroy:function(){var a=this.series.chart,b=a.hoverPoints,c;a.pointCount--;if(b&&(this.setState(),k(b,this),!b.length))a.hoverPoints=null;if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)bb(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=null},destroyElements:function(){for(var a="graphic dataLabel dataLabelUpper group connector shadowGroup".split(" "),b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,
y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=n(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";K(b.pointArrayMap||["y"],function(b){b="{point."+b;if(e||f)a=a.replace(b+"}",e+b+"}"+f);a=a.replace(b+"}",b+":,."+d+"f}")});return D(a,{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||
d.options&&d.options.events&&d.options.events[a])&&this.importEvents();"click"===a&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});Ua(this,a,b,c)}};var Qa=function(){};Qa.prototype={isCartesian:!0,type:"line",pointClass:Fb,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(b,c){var d=this,e,f,j=b.series,h=function(a,
b){return n(a.options.index,a._i)-n(b.options.index,b._i)};d.chart=b;d.options=c=d.setOptions(c);d.linkedSeries=[];d.bindAxes();a(d,{name:c.name,state:"",pointAttr:{},visible:!1!==c.visible,selected:!0===c.selected});qa&&(c.animation=!1);f=c.events;for(e in f)Ia(d,e,f[e]);if(f&&f.click||c.point&&c.point.events&&c.point.events.click||c.allowPointSelect)b.runTrackerClick=!0;d.getColor();d.getSymbol();K(d.parallelArrays,function(a){d[a+"Data"]=[]});d.setData(c.data,!1);d.isCartesian&&(b.hasCartesianSeries=
!0);j.push(d);d._i=j.length-1;I(j,h);this.yAxis&&I(this.yAxis.series,h);K(j,function(a,b){a.index=b;a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a=this,b=a.options,c=a.chart,d;K(a.axisTypes||[],function(e){K(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]!==H&&b[e]===d.id||b[e]===H&&0===d.index)c.series.push(a),a[e]=c,c.isDirty=!0});!a[e]&&a.optionalAxis!==e&&Ma(18,!0)})},updateParallelArrays:function(a,b){var c=a.series,d=arguments;K(c.parallelArrays,"number"===typeof b?function(d){var e=
"y"===d&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=e}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=n(b,a.pointStart,0);this.pointInterval=n(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],c,d=this.points,e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)null===d[c].y&&d.splice(c,1);d.length&&(b=[d])}else K(d,function(c,
f){null===c.y?(f>a+1&&b.push(d.slice(a+1,f)),a=f):f===e-1&&b.push(d.slice(a+1,f+1))});this.segments=b},setOptions:function(a){var c=this.chart,d=c.options.plotOptions,c=c.userOptions||{},e=c.plotOptions||{},f=d[this.type];this.userOptions=a;d=b(f,d.series,a);this.tooltipOptions=b(aa.tooltip,aa.plotOptions[this.type].tooltip,c.tooltip,e.series&&e.series.tooltip,e[this.type]&&e[this.type].tooltip,a.tooltip);null===f.marker&&delete d.marker;return d},getCyclic:function(a,b,c){var d=this.userOptions,
e="_"+a+"Index",f=a+"Counter";b||(l(d[e])?b=d[e]:(d[e]=b=this.chart[f]%c.length,this.chart[f]+=1),b=c[b]);this[a]=b},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||ab[this.type].color,this.chart.options.colors)},getSymbol:function(){var a=this.options.marker;this.getCyclic("symbol",a.symbol,this.chart.options.symbols);/^url/.test(this.symbol)&&(a.radius=0)},drawLegendSymbol:Ra.drawLineMarker,setData:function(a,b,e,f){var j=this,g=j.points,k=g&&g.length||
0,l,m=j.options,p=j.chart,r=null,s=j.xAxis,q=s&&!!s.categories,t=j.tooltipPoints,z=m.turboThreshold,v=this.xData,y=this.yData,w=(l=j.pointArrayMap)&&l.length;a=a||[];l=a.length;b=n(b,!0);if(!1!==f&&l&&k===l&&!j.cropped&&!j.hasGroupedData)K(a,function(a,b){g[b].update(a,!1,null,!1)});else{j.xIncrement=null;j.pointRange=q?1:m.pointRange;j.colorCounter=0;K(this.parallelArrays,function(a){j[a+"Data"].length=0});if(z&&l>z){for(e=0;null===r&&e<l;)r=a[e],e++;if(h(r)){q=n(m.pointStart,0);m=n(m.pointInterval,
1);for(e=0;e<l;e++)v[e]=q,y[e]=a[e],q+=m;j.xIncrement=q}else if(d(r))if(w)for(e=0;e<l;e++)m=a[e],v[e]=m[0],y[e]=m.slice(1,w+1);else for(e=0;e<l;e++)m=a[e],v[e]=m[0],y[e]=m[1];else Ma(12)}else for(e=0;e<l;e++)if(a[e]!==H&&(m={series:j},j.pointClass.prototype.applyOptions.apply(m,[a[e]]),j.updateParallelArrays(m,e),q&&m.name))s.names[m.x]=m.name;c(y[0])&&Ma(14,!0);j.data=[];j.options.data=a;for(e=k;e--;)g[e]&&g[e].destroy&&g[e].destroy();t&&(t.length=0);s&&(s.minRange=s.userMinRange);j.isDirty=j.isDirtyData=
p.isDirtyBox=!0;e=!1}b&&p.redraw(e)},processData:function(a){var b=this.xData,c=this.yData,d=b.length,e;e=0;var f,j,h=this.xAxis,g,k=this.options;g=k.cropThreshold;var l=0,m=this.isCartesian,n,p;if(m&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!a)return!1;h&&(n=h.getExtremes(),p=n.min,n=n.max);if(m&&this.sorted&&(!g||d>g||this.forceCrop))if(b[d-1]<p||b[0]>n)b=[],c=[];else if(b[0]<p||b[d-1]>n)e=this.cropData(this.xData,this.yData,p,n),b=e.xData,c=e.yData,e=e.start,f=!0,l=b.length;for(g=b.length-
1;0<=g;g--)d=b[g]-b[g-1],!f&&b[g]>p&&b[g]<n&&l++,0<d&&(j===H||d<j)?j=d:0>d&&this.requireSorting&&Ma(15);this.cropped=f;this.cropStart=e;this.processedXData=b;this.processedYData=c;this.activePointCount=l;null===k.pointRange&&(this.pointRange=j||1);this.closestPointRange=j},cropData:function(a,b,c,d){var e=a.length,f=0,j=e,h=n(this.cropShoulder,1),g;for(g=0;g<e;g++)if(a[g]>=c){f=Y(0,g-h);break}for(;g<e;g++)if(a[g]>d){j=g+h;break}return{xData:a.slice(f,j),yData:b.slice(f,j),start:f,end:j}},generatePoints:function(){var a=
this.options.data,b=this.data,c,d=this.processedXData,e=this.processedYData,f=this.pointClass,j=d.length,h=this.cropStart||0,g,k=this.hasGroupedData,l,n=[],p;!b&&!k&&(b=[],b.length=a.length,b=this.data=b);for(p=0;p<j;p++)g=h+p,k?n[p]=(new f).init(this,[d[p]].concat(m(e[p]))):(b[g]?l=b[g]:a[g]!==H&&(b[g]=l=(new f).init(this,a[g],d[p])),n[p]=l),n[p].index=g;if(b&&(j!==(c=b.length)||k))for(p=0;p<c;p++)if(p===h&&!k&&(p+=j),b[p])b[p].destroyElements(),b[p].plotX=H;this.data=b;this.points=n},getExtremes:function(a){var b=
this.yAxis,c=this.processedXData,d,e=[],f=0;d=this.xAxis.getExtremes();var j=d.min,h=d.max,g,k,l,m;a=a||this.stackedYData||this.processedYData;d=a.length;for(m=0;m<d;m++)if(k=c[m],l=a[m],g=null!==l&&l!==H&&(!b.isLog||l.length||0<l),k=this.getExtremesFromAll||this.cropped||(c[m+1]||k)>=j&&(c[m-1]||k)<=h,g&&k)if(g=l.length)for(;g--;)null!==l[g]&&(e[f++]=l[g]);else e[f++]=l;this.dataMin=n(void 0,S(e));this.dataMax=n(void 0,J(e))},translate:function(){this.processedXData||this.processData();this.generatePoints();
for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,j=f.length,g=!!this.modifyValue,k=a.pointPlacement,m="between"===k||h(k),p=a.threshold,a=0;a<j;a++){var r=f[a],s=r.x,q=r.y,t=r.low,z=b&&e.stacks[(this.negStacks&&q<p?"-":"")+this.stackKey];e.isLog&&0>=q&&(r.y=q=null,Ma(10));r.plotX=c.translate(s,0,0,0,1,k,"flags"===this.type);b&&(this.visible&&z&&z[s])&&(z=z[s],q=z.points[this.index+","+a],t=q[0],q=q[1],0===t&&(t=n(p,e.min)),e.isLog&&0>=t&&(t=null),r.total=
r.stackTotal=z.total,r.percentage=z.total&&100*(r.y/z.total),r.stackY=q,z.setOffset(this.pointXOffset||0,this.barW||0));r.yBottom=l(t)?e.translate(t,0,1,0,1):null;g&&(q=this.modifyValue(q,r));r.plotY="number"===typeof q&&Infinity!==q?e.translate(q,0,1,0,1):H;r.clientX=m?c.translate(s,0,0,0,1):r.plotX;r.negative=r.y<(p||0);r.category=d&&d[r.x]!==H?d[r.x]:r.x}this.getSegments()},animate:function(b){var c=this.chart,d=c.renderer,f;f=this.options.animation;var j=this.clipBox||c.clipBox,h=c.inverted,g;
f&&!e(f)&&(f=ab[this.type].animation);g=["_sharedClip",f.duration,f.easing,j.height].join();b?(b=c[g],f=c[g+"m"],b||(c[g]=b=d.clipRect(a(j,{width:0})),c[g+"m"]=f=d.clipRect(-99,h?-c.plotLeft:-c.plotTop,99,h?c.chartWidth:c.chartHeight)),this.group.clip(b),this.markerGroup.clip(f),this.sharedClipKey=g):((b=c[g])&&b.animate({width:c.plotSizeX},f),c[g+"m"]&&c[g+"m"].animate({width:c.plotSizeX+99},f),this.animate=null)},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,c=this.group,d=this.clipBox;
if(c&&!1!==this.options.clip){if(!b||!d)c.clip(d?a.renderer.clipRect(d):a.clipRect);this.markerGroup.clip()}Ua(this,"afterAnimate");setTimeout(function(){b&&a[b]&&(d||(a[b]=a[b].destroy()),a[b+"m"]&&(a[b+"m"]=a[b+"m"].destroy()))},100)},drawPoints:function(){var b,c=this.points,d=this.chart,e,f,j,h,g,k,l,m,p=this.options.marker,r=this.pointAttr[""],s,q,t,z=this.markerGroup,v=n(p.enabled,!this.requireSorting||this.activePointCount<0.5*this.xAxis.len/p.radius);if(!1!==p.enabled||this._hasPointMarkers)for(j=
c.length;j--;)if(h=c[j],e=ta(h.plotX),f=h.plotY,m=h.graphic,s=h.marker||{},q=!!h.marker,b=v&&s.enabled===H||s.enabled,t=d.isInsidePlot(X(e),f,d.inverted),b&&f!==H&&!isNaN(f)&&null!==h.y)if(b=h.pointAttr[h.selected?"select":""]||r,g=b.r,k=n(s.symbol,this.symbol),l=0===k.indexOf("url"),m)m[t?"show":"hide"](!0).animate(a({x:e-g,y:f-g},m.symbolName?{width:2*g,height:2*g}:{}));else{if(t&&(0<g||l))h.graphic=d.renderer.symbol(k,e-g,f-g,2*g,2*g,q?s:p).attr(b).add(z)}else m&&(h.graphic=m.destroy())},convertAttribs:function(a,
b,c,d){var e=this.pointAttrToOptions,f,j,h={};a=a||{};b=b||{};c=c||{};d=d||{};for(f in e)j=e[f],h[f]=n(a[j],b[f],c[f],d[f]);return h},getAttribs:function(){var b=this,c=b.options,d=ab[b.type].marker?c.marker:c,e=d.states,f=e.hover,j,h=b.color;j={stroke:h,fill:h};var g=b.points||[],k,m=[],n,p=b.pointAttrToOptions;n=b.hasPointSpecificOptions;var r=c.negativeColor,s=d.lineColor,q=d.fillColor;k=c.turboThreshold;var t;c.marker?(f.radius=f.radius||d.radius+f.radiusPlus,f.lineWidth=f.lineWidth||d.lineWidth+
f.lineWidthPlus):f.color=f.color||xb(f.color||h).brighten(f.brightness).get();m[""]=b.convertAttribs(d,j);K(["hover","select"],function(a){m[a]=b.convertAttribs(e[a],m[""])});b.pointAttr=m;h=g.length;if(!k||h<k||n)for(;h--;){k=g[h];if((d=k.options&&k.options.marker||k.options)&&!1===d.enabled)d.radius=0;k.negative&&r&&(k.color=k.fillColor=r);n=c.colorByPoint||k.color;if(k.options)for(t in p)l(d[p[t]])&&(n=!0);n?(d=d||{},n=[],e=d.states||{},j=e.hover=e.hover||{},c.marker||(j.color=j.color||!k.options.color&&
f.color||xb(k.color).brighten(j.brightness||f.brightness).get()),j={color:k.color},q||(j.fillColor=k.color),s||(j.lineColor=k.color),n[""]=b.convertAttribs(a(j,d),m[""]),n.hover=b.convertAttribs(e.hover,m.hover,n[""]),n.select=b.convertAttribs(e.select,m.select,n[""])):n=m;k.pointAttr=n}},destroy:function(){var a=this,b=a.chart,c=/AppleWebKit\/533/.test(Na),d,e,f=a.data||[],j,h,g;Ua(a,"destroy");bb(a);K(a.axisTypes||[],function(b){if(g=a[b])k(g.series,a),g.isDirty=g.forceRedraw=!0});a.legendItem&&
a.chart.legend.destroyItem(a);for(e=f.length;e--;)(j=f[e])&&j.destroy&&j.destroy();a.points=null;clearTimeout(a.animationTimeout);K("area graph dataLabelsGroup group markerGroup tracker graphNeg areaNeg posClip negClip".split(" "),function(b){a[b]&&(d=c&&"group"===b?"hide":"destroy",a[b][d]())});b.hoverSeries===a&&(b.hoverSeries=null);k(b.series,a);for(h in a)delete a[h]},getSegmentPath:function(a){var b=this,c=[],d=b.options.step;K(a,function(e,f){var j=e.plotX,h=e.plotY,g;b.getPointSpline?c.push.apply(c,
b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),d&&f&&(g=a[f-1],"right"===d?c.push(g.plotX,h):"center"===d?c.push((g.plotX+j)/2,g.plotY,(g.plotX+j)/2,h):c.push(j,g.plotY)),c.push(e.plotX,e.plotY))});return c},getGraphPath:function(){var a=this,b=[],c,d=[];K(a.segments,function(e){c=a.getSegmentPath(e);1<e.length?b=b.concat(c):d.push(e[0])});a.singlePoints=d;return a.graphPath=b},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f="square"!==
b.linecap,j=this.getGraphPath(),h=b.negativeColor;h&&c.push(["graphNeg",h]);K(c,function(c,h){var g=c[0],k=a[g];k?(Qb(k),k.animate({d:j})):d&&j.length&&(k={stroke:c[1],"stroke-width":d,fill:ha,zIndex:1},e?k.dashstyle=e:f&&(k["stroke-linecap"]=k["stroke-linejoin"]="round"),a[g]=a.chart.renderer.path(j).attr(k).add(a.group).shadow(!h&&b.shadow))})},clipNeg:function(){var a=this.options,b=this.chart,c=b.renderer,d=a.negativeColor||a.negativeFillColor,e,f=this.graph,j=this.area,h=this.posClip,g=this.negClip;
e=b.chartWidth;var k=b.chartHeight,l=Y(e,k),m=this.yAxis;if(d&&(f||j))d=X(m.toPixels(a.threshold||0,!0)),0>d&&(l-=d),a={x:0,y:0,width:l,height:d},l={x:0,y:d,width:l,height:l},b.inverted&&(a.height=l.y=b.plotWidth-d,c.isVML&&(a={x:b.plotWidth-d-b.plotLeft,y:0,width:e,height:k},l={x:d+b.plotLeft-e,y:0,width:b.plotLeft+d,height:e})),m.reversed?(b=l,e=a):(b=a,e=l),h?(h.animate(b),g.animate(e)):(this.posClip=h=c.clipRect(b),this.negClip=g=c.clipRect(e),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(g)),
j&&(j.clip(h),this.areaNeg.clip(g)))},invertGroups:function(){function a(){var c={width:b.yAxis.len,height:b.xAxis.len};K(["group","markerGroup"],function(a){b[a]&&b[a].attr(c).invert()})}var b=this,c=b.chart;b.xAxis&&(Ia(c,"resize",a),Ia(b,"destroy",function(){bb(c,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,c,d,e){var f=this[a],j=!f;j&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||0.1}).add(e));f[j?"attr":"animate"](this.getPlotBox());return f},getPlotBox:function(){var a=
this.chart,b=this.xAxis,c=this.yAxis;a.inverted&&(b=c,c=this.xAxis);return{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a=this,b=a.chart,c,d=a.options,e=(c=d.animation)&&!!a.animate&&b.renderer.isSVG&&n(c.duration,500)||0,f=a.visible?"visible":"hidden",j=d.zIndex,h=a.hasRendered,g=b.seriesGroup;c=a.plotGroup("group","series",f,j,g);a.markerGroup=a.plotGroup("markerGroup","markers",f,j,g);e&&a.animate(!0);a.getAttribs();c.inverted=a.isCartesian?
b.inverted:!1;a.drawGraph&&(a.drawGraph(),a.clipNeg());K(a.points,function(a){a.redraw&&a.redraw()});a.drawDataLabels&&a.drawDataLabels();a.visible&&a.drawPoints();a.drawTracker&&!1!==a.options.enableMouseTracking&&a.drawTracker();b.inverted&&a.invertGroups();!1!==d.clip&&!a.sharedClipKey&&!h&&c.clip(b.clipRect);e&&a.animate();h||(e?a.animationTimeout=setTimeout(function(){a.afterAnimate()},e):a.afterAnimate());a.isDirty=a.isDirtyData=!1;a.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,
c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:n(d&&d.left,a.plotLeft),translateY:n(e&&e.top,a.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();b&&Ua(this,"updatedData")}};ea.prototype={destroy:function(){O(this,this.axis)},render:function(a){var b=this.options,c=b.format,c=c?D(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,
null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,j=c.translate(c.usePercentage?100:this.total,0,0,0,1),c=c.translate(0),c=Ca(j-c),h=d.xAxis[0].translate(this.x)+a,g=d.plotHeight,f={x:e?f?j:j-c:h,y:e?g-h-b:f?g-j-c:g-j,width:e?c:b,height:e?b:c};if(e=this.label)e.align(this.alignOptions,null,f),f=e.alignAttr,e[!1===this.options.crop||d.isInsidePlot(f.x,f.y)?"show":
"hide"](!0)}};R.prototype.buildStacks=function(){var a=this.series,b=n(this.options.reversedStacks,!0),c=a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}};R.prototype.renderStackTotals=function(){var a=this.chart,b=a.renderer,c=this.stacks,d,e,f=this.stackTotalGroup;f||(this.stackTotalGroup=f=b.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());f.translate(a.plotLeft,a.plotTop);
for(d in c)for(e in a=c[d],a)a[e].render(f)};Qa.prototype.setStackedPoints=function(){if(this.options.stacking&&!(!0!==this.visible&&!1!==this.chart.options.chart.ignoreHiddenSeries)){var a=this.processedXData,b=this.processedYData,c=[],d=b.length,e=this.options,f=e.threshold,j=e.stack,e=e.stacking,h=this.stackKey,g="-"+h,k=this.negStacks,l=this.yAxis,m=l.stacks,n=l.oldStacks,p,r,s,q,t,z;for(q=0;q<d;q++)t=a[q],z=b[q],s=this.index+","+q,r=(p=k&&z<f)?g:h,m[r]||(m[r]={}),m[r][t]||(n[r]&&n[r][t]?(m[r][t]=
n[r][t],m[r][t].total=null):m[r][t]=new ea(l,l.options.stackLabels,p,t,j)),r=m[r][t],r.points[s]=[r.cum||0],"percent"===e?(p=p?h:g,k&&m[p]&&m[p][t]?(p=m[p][t],r.total=p.total=Y(p.total,r.total)+Ca(z)||0):r.total=N(r.total+(Ca(z)||0))):r.total=N(r.total+(z||0)),r.cum=(r.cum||0)+(z||0),r.points[s].push(r.cum),c[q]=r.cum;"percent"===e&&(l.usePercentage=!0);this.stackedYData=c;l.oldStacks={}}};Qa.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;K([b,"-"+
b],function(b){for(var e,f=d.length,j,h;f--;)if(j=d[f],e=(h=c[b]&&c[b][j])&&h.points[a.index+","+f],j=e)h=h.total?100/h.total:0,j[0]=N(j[0]*h),j[1]=N(j[1]*h),a.stackedYData[f]=j[1]})};a(Z.prototype,{addSeries:function(a,b,c){var d,e=this;a&&(b=n(b,!0),Ua(e,"addSeries",{options:a},function(){d=e.initSeries(a);e.isDirtyLegend=!0;e.linkSeries();b&&e.redraw(c)}));return d},addAxis:function(a,c,d,e){var f=c?"xAxis":"yAxis",j=this.options;new R(this,b(a,{index:this[f].length,isX:c}));j[f]=m(j[f]||{});j[f].push(a);
n(d,!0)&&this.redraw(e)},showLoading:function(b){var c=this,d=c.options,e=c.loadingDiv,f=d.loading,j=function(){e&&r(e,{left:c.plotLeft+"px",top:c.plotTop+"px",width:c.plotWidth+"px",height:c.plotHeight+"px"})};e||(c.loadingDiv=e=s(Db,{className:"highcharts-loading"},a(f.style,{zIndex:10,display:ha}),c.container),c.loadingSpan=s("span",null,f.labelStyle,e),Ia(c,"redraw",j));c.loadingSpan.innerHTML=b||d.lang.loading;c.loadingShown||(r(e,{opacity:0,display:""}),Ya(e,{opacity:f.style.opacity},{duration:f.showDuration||
0}),c.loadingShown=!0);j()},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&Ya(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){r(b,{display:ha})}});this.loadingShown=!1}});a(Fb.prototype,{update:function(a,b,c,f){function j(){h.applyOptions(a);e(a)&&!d(a)&&(h.redraw=function(){k&&(a&&a.marker&&a.marker.symbol?h.graphic=k.destroy():k.attr(h.pointAttr[h.state||""]));a&&(a.dataLabels&&h.dataLabel)&&(h.dataLabel=h.dataLabel.destroy());h.redraw=null});l=h.index;g.updateParallelArrays(h,
l);p.data[l]=h.options;g.isDirty=g.isDirtyData=!0;!g.fixedBox&&g.hasCartesianSeries&&(m.isDirtyBox=!0);"point"===p.legendType&&m.legend.destroyItem(h);b&&m.redraw(c)}var h=this,g=h.series,k=h.graphic,l,m=g.chart,p=g.options;b=n(b,!0);!1===f?j():h.firePointEvent("update",{options:a},j)},remove:function(a,b){var c=this,d=c.series,e=d.points,f=d.chart,j,h=d.data;P(b,f);a=n(a,!0);c.firePointEvent("remove",null,function(){j=Jb(c,h);h.length===e.length&&e.splice(j,1);h.splice(j,1);d.options.data.splice(j,
1);d.updateParallelArrays(c,"splice",j,1);c.destroy();d.isDirty=!0;d.isDirtyData=!0;a&&f.redraw()})}});a(Qa.prototype,{addPoint:function(a,b,c,d){var e=this.options,f=this.data,j=this.graph,h=this.area,g=this.chart,k=this.xAxis&&this.xAxis.names,l=j&&j.shift||0,m=e.data,p,r=this.xData;P(d,g);c&&K([j,h,this.graphNeg,this.areaNeg],function(a){a&&(a.shift=l+1)});h&&(h.isArea=!0);b=n(b,!0);d={series:this};this.pointClass.prototype.applyOptions.apply(d,[a]);j=d.x;h=r.length;if(this.requireSorting&&j<r[h-
1])for(p=!0;h&&r[h-1]>j;)h--;this.updateParallelArrays(d,"splice",h,0,0);this.updateParallelArrays(d,h);k&&d.name&&(k[j]=d.name);m.splice(h,0,a);p&&(this.data.splice(h,0,null),this.processData());"point"===e.legendType&&this.generatePoints();c&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),this.updateParallelArrays(d,"shift"),m.shift()));this.isDirtyData=this.isDirty=!0;b&&(this.getAttribs(),g.redraw())},remove:function(a,b){var c=this,d=c.chart;a=n(a,!0);c.isRemoving||(c.isRemoving=!0,Ua(c,"remove",
null,function(){c.destroy();d.isDirtyLegend=d.isDirtyBox=!0;d.linkSeries();a&&d.redraw(b)}));c.isRemoving=!1},update:function(c,d){var e=this,f=this.chart,j=this.userOptions,h=this.type,g=La[h].prototype,k=["group","markerGroup","dataLabelsGroup"],l;K(k,function(a){k[a]=e[a];delete e[a]});c=b(j,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},c);this.remove(!1);for(l in g)g.hasOwnProperty(l)&&(this[l]=H);a(this,La[c.type||h].prototype);K(k,function(a){e[a]=k[a]});
this.init(f,c);f.linkSeries();n(d,!0)&&f.redraw(!1)}});a(R.prototype,{update:function(c,d){var e=this.chart;c=e.options[this.coll][this.options.index]=b(this.userOptions,c);this.destroy(!0);this._addedPlotLB=H;this.init(e,a(c,{events:H}));e.isDirtyBox=!0;n(d,!0)&&e.redraw()},remove:function(a){for(var b=this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);k(b.axes,this);k(b[c],this);b.options[c].splice(this.options.index,1);K(b[c],function(a,b){a.options.index=b});this.destroy();
b.isDirtyBox=!0;n(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});var Bb=v(Qa);La.line=Bb;ab.area=b(Wa,{threshold:0});var fb=v(Qa,{type:"area",getSegments:function(){var a=this,b=[],c=[],d=[],e=this.xAxis,f=this.yAxis,j=f.stacks[this.stackKey],h={},g,k,l=this.points,m=this.options.connectNulls,n,p;if(this.options.stacking&&!this.cropped){for(n=0;n<l.length;n++)h[l[n].x]=l[n];for(p in j)null!==j[p].total&&d.push(+p);d.sort(function(a,
b){return a-b});K(d,function(b){var d=0,l;if(!m||h[b]&&null!==h[b].y)if(h[b])c.push(h[b]);else{for(n=a.index;n<=f.series.length;n++)if(l=j[b].points[n+","+b]){d=l[1];break}g=e.translate(b);k=f.toPixels(d,!0);c.push({y:null,plotX:g,clientX:g,plotY:k,yBottom:k,onMouseOver:ya})}});c.length&&b.push(c)}else Qa.prototype.getSegments.call(this),b=this.segments;this.segments=b},getSegmentPath:function(a){var b=Qa.prototype.getSegmentPath.call(this,a),c=[].concat(b),d,e=this.options;d=b.length;var f=this.yAxis.getThreshold(e.threshold),
j;3===d&&c.push("L",b[1],b[2]);if(e.stacking&&!this.closedStacks)for(d=a.length-1;0<=d;d--)j=n(a[d].yBottom,f),d<a.length-1&&e.step&&c.push(a[d+1].plotX,j),c.push(a[d].plotX,j);else this.closeSegment(c,a,f);this.areaPath=this.areaPath.concat(c);return b},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[];Qa.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",
this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]);K(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:n(d[2],xb(d[1]).setOpacity(n(c.fillOpacity,0.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:Ra.drawRectangle});La.area=fb;ab.spline=b(Wa);Bb=v(Qa,{type:"spline",getPointSpline:function(a,b,c){var d=b.plotX,e=b.plotY,f=a[c-1],j=a[c+1],h,g,k,l;if(f&&j){a=f.plotY;k=j.plotX;var j=j.plotY,m;h=(1.5*d+f.plotX)/2.5;g=(1.5*e+a)/2.5;k=(1.5*d+k)/2.5;
l=(1.5*e+j)/2.5;m=(l-g)*(k-d)/(k-h)+e-l;g+=m;l+=m;g>a&&g>e?(g=Y(a,e),l=2*e-g):g<a&&g<e&&(g=sa(a,e),l=2*e-g);l>j&&l>e?(l=Y(j,e),g=2*e-l):l<j&&l<e&&(l=sa(j,e),g=2*e-l);b.rightContX=k;b.rightContY=l}c?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,h||d,g||e,d,e],f.rightContX=f.rightContY=null):b=["M",d,e];return b}});La.spline=Bb;ab.areaspline=b(ab.area);fb=fb.prototype;Bb=v(Bb,{type:"areaspline",closedStacks:!0,getSegmentPath:fb.getSegmentPath,closeSegment:fb.closeSegment,drawGraph:fb.drawGraph,
drawLegendSymbol:Ra.drawRectangle});La.areaspline=Bb;ab.column=b(Wa,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});Bb=v(Qa,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},
cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Qa.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&K(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=c.reversed,f,j={},h,g=0;!1===b.grouping?g=1:K(a.chart.series,function(b){var c=b.options,e=b.yAxis;b.type===a.type&&(b.visible&&d.len===e.len&&d.pos===e.pos)&&(c.stacking?(f=b.stackKey,j[f]===H&&(j[f]=g++),h=
j[f]):!1!==c.grouping&&(h=g++),b.columnIndex=h)});var c=sa(Ca(c.transA)*(c.ordinalSlope||b.pointRange||c.closestPointRange||c.tickInterval||1),c.len),k=c*b.groupPadding,m=(c-2*k)/g,p=b.pointWidth,b=l(p)?(m-p)/2:m*b.pointPadding,p=n(p,m-2*b);return a.columnMetrics={width:p,offset:b+(k+((e?g-(a.columnIndex||0):a.columnIndex)||0)*m-c/2)*(e?-1:1)}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=n(c.borderWidth,a.activePointCount>0.5*a.xAxis.len?0:1),e=a.yAxis,f=a.translatedThreshold=
e.getThreshold(c.threshold),j=n(c.minPointLength,5),h=a.getColumnMetrics(),g=h.width,k=a.barW=Y(g,1+2*d),l=a.pointXOffset=h.offset,m=-(d%2?0.5:0),p=d%2?0.5:1;b.renderer.isVML&&b.inverted&&(p+=1);c.pointPadding&&(k=q(k));Qa.prototype.translate.apply(a);K(a.points,function(c){var d=n(c.yBottom,f),h=sa(Y(-999-d,c.plotY),e.len+999+d),r=c.plotX+l,s=k,q=sa(h,d),t;t=Y(h,d)-q;Ca(t)<j&&j&&(t=j,q=X(Ca(q-f)>j?d-j:f-(e.translate(c.y,0,1,0,1)<=f?j:0)));c.barX=r;c.pointWidth=g;c.tooltipPos=b.inverted?[e.len-h,
a.xAxis.len-r-s/2]:[r+s/2,h+e.pos-b.plotTop];s=X(r+s)+m;r=X(r)+m;s-=r;d=0.5>Ca(q);t=X(q+t)+p;q=X(q)+p;t-=q;d&&(q-=1,t+=1);c.shapeType="rect";c.shapeArgs={x:r,y:q,width:s,height:t}})},getSymbol:ya,drawLegendSymbol:Ra.drawRectangle,drawGraph:ya,drawPoints:function(){var a=this,c=this.chart,d=a.options,e=c.renderer,f=d.animationLimit||250,j,h;K(a.points,function(g){var k=g.plotY,m=g.graphic;k!==H&&!isNaN(k)&&null!==g.y?(j=g.shapeArgs,k=l(a.borderWidth)?{"stroke-width":a.borderWidth}:{},h=g.pointAttr[g.selected?
"select":""]||a.pointAttr[""],m?(Qb(m),m.attr(k)[c.pointCount<f?"animate":"attr"](b(j))):g.graphic=e[g.shapeType](j).attr(h).attr(k).add(a.group).shadow(d.shadow,null,d.stacking&&!d.borderRadius)):m&&(g.graphic=m.destroy())})},animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};T&&(a?(e.scaleY=0.001,a=sa(b.pos+b.len,Y(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,
this.options.animation),this.animate=null))},remove:function(){var a=this,b=a.chart;b.hasRendered&&K(b.series,function(b){b.type===a.type&&(b.isDirty=!0)});Qa.prototype.remove.apply(a,arguments)}});La.column=Bb;ab.bar=b(ab.column);fb=v(Bb,{type:"bar",inverted:!0});La.bar=fb;ab.scatter=b(Wa,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">\u25cf</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});
fb=v(Qa,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&Qa.prototype.drawGraph.call(this)}});La.scatter=fb;ab.pie=b(Wa,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,
slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});Wa={type:"pie",isCartesian:!1,pointClass:v(Fb,{init:function(){Fb.prototype.init.apply(this,arguments);var b=this,c;0>b.y&&(b.y=null);a(b,{visible:!1!==b.visible,name:n(b.name,"Slice")});c=function(a){b.slice("select"===a.type)};Ia(b,"select",c);Ia(b,"unselect",c);return b},setVisible:function(a){var b=this,c=b.series,d=c.chart;b.visible=b.options.visible=a=a===H?!b.visible:a;c.options.data[Jb(b,
c.data)]=b.options;K(["graphic","dataLabel","connector","shadowGroup"],function(c){if(b[c])b[c][a?"show":"hide"](!0)});b.legendItem&&d.legend.colorizeItem(b,a);!c.isDirty&&c.options.ignoreHiddenPoint&&(c.isDirty=!0,d.redraw())},slice:function(a,b,c){var d=this.series;P(c,d.chart);n(b,!0);this.sliced=this.options.sliced=a=l(a)?a:!this.sliced;d.options.data[Jb(this,d.data)]=this.options;a=a?this.slicedTranslation:{translateX:0,translateY:0};this.graphic.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)},
haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:ya,animate:function(a){var b=this,c=b.points,d=b.startAngleRad;
a||(K(c,function(a){var c=a.graphic;a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null)},setData:function(a,b,c,d){Qa.prototype.setData.call(this,a,!1,c,d);this.processData();this.generatePoints();n(b,!0)&&this.chart.redraw(c)},generatePoints:function(){var a,b=0,c,d,e,f=this.options.ignoreHiddenPoint;Qa.prototype.generatePoints.call(this);c=this.points;d=c.length;for(a=0;a<d;a++)e=c[a],b+=f&&!e.visible?0:e.y;
this.total=b;for(a=0;a<d;a++)e=c[a],e.percentage=0<b?100*(e.y/b):0,e.total=b},translate:function(a){this.generatePoints();var b=0,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,f,j,h,g=c.startAngle||0,k=this.startAngleRad=za/180*(g-90),g=(this.endAngleRad=za/180*(n(c.endAngle,g+360)-90))-k,l=this.points,m=c.dataLabels.distance,c=c.ignoreHiddenPoint,p,r=l.length,s;a||(this.center=a=this.getCenter());this.getX=function(b,c){h=Ba.asin(sa((b-a[1])/(a[2]/2+m),1));return a[0]+(c?-1:1)*Aa(h)*(a[2]/2+
m)};for(p=0;p<r;p++){s=l[p];f=k+b*g;if(!c||s.visible)b+=s.percentage/100;j=k+b*g;s.shapeType="arc";s.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:X(1E3*f)/1E3,end:X(1E3*j)/1E3};h=(j+f)/2;h>1.5*za?h-=2*za:h<-za/2&&(h+=2*za);s.slicedTranslation={translateX:X(Aa(h)*d),translateY:X(Va(h)*d)};f=Aa(h)*a[2]/2;j=Va(h)*a[2]/2;s.tooltipPos=[a[0]+0.7*f,a[1]+0.7*j];s.half=h<-za/2||h>za/2?1:0;s.angle=h;e=sa(e,m/2);s.labelPos=[a[0]+f+Aa(h)*m,a[1]+j+Va(h)*m,a[0]+f+Aa(h)*e,a[1]+j+Va(h)*e,a[0]+f,a[1]+j,0>
m?"center":s.half?"right":"left",h]}},drawGraph:null,drawPoints:function(){var b=this,c=b.chart.renderer,d,e,f=b.options.shadow,j,h;f&&!b.shadowGroup&&(b.shadowGroup=c.g("shadow").add(b.group));K(b.points,function(g){e=g.graphic;h=g.shapeArgs;j=g.shadowGroup;f&&!j&&(j=g.shadowGroup=c.g("shadow").add(b.shadowGroup));d=g.sliced?g.slicedTranslation:{translateX:0,translateY:0};j&&j.attr(d);e?e.animate(a(h,d)):g.graphic=e=c[g.shapeType](h).setRadialReference(b.center).attr(g.pointAttr[g.selected?"select":
""]).attr({"stroke-linejoin":"round"}).attr(d).add(b.group).shadow(f,j);void 0!==g.visible&&g.setVisible(g.visible)})},sortByAngle:function(a,b){a.sort(function(a,c){return void 0!==a.angle&&(c.angle-a.angle)*b})},drawLegendSymbol:Ra.drawRectangle,getCenter:Ja.getCenter,getSymbol:ya};Wa=v(Qa,Wa);La.pie=Wa;Qa.prototype.drawDataLabels=function(){var c=this,d=c.options,e=d.cursor,f=d.dataLabels,j=c.points,h,g,k=c.hasRendered||0,m,p;if(f.enabled||c._hasPointLabels)c.dlProcessOptions&&c.dlProcessOptions(f),
p=c.plotGroup("dataLabelsGroup","data-labels",f.defer?"hidden":"visible",f.zIndex||6),n(f.defer,!0)&&(p.attr({opacity:+k}),k||Ia(c,"afterAnimate",function(){c.visible&&p.show();p[d.animation?"animate":"attr"]({opacity:1},{duration:200})})),g=f,K(j,function(d){var j,k=d.dataLabel,r,s,q=d.connector,t=!0;h=d.options&&d.options.dataLabels;j=n(h&&h.enabled,g.enabled);if(k&&!j)d.dataLabel=k.destroy();else if(j){f=b(g,h);j=f.rotation;r=d.getLabelConfig();m=f.format?D(f.format,r):f.formatter.call(r,f);f.style.color=
n(f.color,f.style.color,c.color,"black");if(k)if(l(m))k.attr({text:m}),t=!1;else{if(d.dataLabel=k=k.destroy(),q)d.connector=q.destroy()}else if(l(m)){k={fill:f.backgroundColor,stroke:f.borderColor,"stroke-width":f.borderWidth,r:f.borderRadius||0,rotation:j,padding:f.padding,zIndex:1};for(s in k)k[s]===H&&delete k[s];k=d.dataLabel=c.chart.renderer[j?"text":"label"](m,0,-999,null,null,null,f.useHTML).attr(k).css(a(f.style,e&&{cursor:e})).add(p).shadow(f.shadow)}k&&c.alignDataLabel(d,k,f,null,t)}})};
Qa.prototype.alignDataLabel=function(b,c,d,e,f){var j=this.chart,h=j.inverted,g=n(b.plotX,-999),k=n(b.plotY,-999),l=c.getBBox();if(b=this.visible&&(b.series.forceDL||j.isInsidePlot(g,X(k),h)||e&&j.isInsidePlot(g,h?e.x+1:e.y+e.height-1,h)))e=a({x:h?j.plotWidth-k:g,y:X(h?j.plotHeight-g:k),width:0,height:0},e),a(d,{width:l.width,height:l.height}),d.rotation?c[f?"attr":"animate"]({x:e.x+d.x+e.width/2,y:e.y+d.y+e.height/2}).attr({align:d.align}):(c.align(d,null,e),h=c.alignAttr,"justify"===n(d.overflow,
"justify")?this.justifyDataLabel(c,d,h,l,e,f):n(d.crop,!0)&&(b=j.isInsidePlot(h.x,h.y)&&j.isInsidePlot(h.x+l.width,h.y+l.height)));b||(c.attr({y:-999}),c.placed=!1)};Qa.prototype.justifyDataLabel=function(a,b,c,d,e,f){var j=this.chart,h=b.align,g=b.verticalAlign,k,l;k=c.x;0>k&&("right"===h?b.align="left":b.x=-k,l=!0);k=c.x+d.width;k>j.plotWidth&&("left"===h?b.align="right":b.x=j.plotWidth-k,l=!0);k=c.y;0>k&&("bottom"===g?b.verticalAlign="top":b.y=-k,l=!0);k=c.y+d.height;k>j.plotHeight&&("top"===g?
b.verticalAlign="bottom":b.y=j.plotHeight-k,l=!0);l&&(a.placed=!f,a.align(b,null,e))};La.pie&&(La.pie.prototype.drawDataLabels=function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=n(e.connectorPadding,10),j=n(e.connectorWidth,1),h=d.plotWidth,g=d.plotHeight,k,l,m=n(e.softConnector,!0),p=e.distance,r=a.center,s=r[2]/2,q=r[1],t=0<p,z,v,y,w=[[],[]],A,D,B,M,L,F=[0,0,0,0],V=function(a,b){return b.y-a.y};if(a.visible&&(e.enabled||a._hasPointLabels)){Qa.prototype.drawDataLabels.apply(a);K(b,
function(a){a.dataLabel&&a.visible&&w[a.half].push(a)});for(M=2;M--;){var E=[],Z=[],$a=w[M],H=$a.length,wa;if(H){a.sortByAngle($a,M-0.5);for(L=b=0;!b&&$a[L];)b=$a[L]&&$a[L].dataLabel&&($a[L].dataLabel.getBBox().height||21),L++;if(0<p){v=sa(q+s+p,d.plotHeight);for(L=Y(0,q-s-p);L<=v;L+=b)E.push(L);v=E.length;if(H>v){c=[].concat($a);c.sort(V);for(L=H;L--;)c[L].rank=L;for(L=H;L--;)$a[L].rank>=v&&$a.splice(L,1);H=$a.length}for(L=0;L<H;L++){c=$a[L];y=c.labelPos;c=9999;var N,zb;for(zb=0;zb<v;zb++)N=Ca(E[zb]-
y[1]),N<c&&(c=N,wa=zb);if(wa<L&&null!==E[L])wa=L;else for(v<H-L+wa&&null!==E[L]&&(wa=v-H+L);null===E[wa];)wa++;Z.push({i:wa,y:E[wa]});E[wa]=null}Z.sort(V)}for(L=0;L<H;L++){c=$a[L];y=c.labelPos;z=c.dataLabel;B=!1===c.visible?"hidden":"visible";c=y[1];if(0<p){if(v=Z.pop(),wa=v.i,D=v.y,c>D&&null!==E[wa+1]||c<D&&null!==E[wa-1])D=sa(Y(0,c),d.plotHeight)}else D=c;A=e.justify?r[0]+(M?-1:1)*(s+p):a.getX(D===q-s-p||D===q+s+p?c:D,M);z._attr={visibility:B,align:y[6]};z._pos={x:A+e.x+({left:f,right:-f}[y[6]]||
0),y:D+e.y-10};z.connX=A;z.connY=D;null===this.options.size&&(v=z.width,A-v<f?F[3]=Y(X(v-A+f),F[3]):A+v>h-f&&(F[1]=Y(X(A+v-h+f),F[1])),0>D-b/2?F[0]=Y(X(-D+b/2),F[0]):D+b/2>g&&(F[2]=Y(X(D+b/2-g),F[2])))}}}if(0===J(F)||this.verifyDataLabelOverflow(F))this.placeDataLabels(),t&&j&&K(this.points,function(b){k=b.connector;y=b.labelPos;(z=b.dataLabel)&&z._pos?(B=z._attr.visibility,A=z.connX,D=z.connY,l=m?["M",A+("left"===y[6]?5:-5),D,"C",A,D,2*y[2]-y[4],2*y[3]-y[5],y[2],y[3],"L",y[4],y[5]]:["M",A+("left"===
y[6]?5:-5),D,"L",y[2],y[3],"L",y[4],y[5]],k?(k.animate({d:l}),k.attr("visibility",B)):b.connector=k=a.chart.renderer.path(l).attr({"stroke-width":j,stroke:e.connectorColor||b.color||"#606060",visibility:B}).add(a.dataLabelsGroup)):k&&(b.connector=k.destroy())})}},La.pie.prototype.placeDataLabels=function(){K(this.points,function(a){a=a.dataLabel;var b;a&&((b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999}))})},La.pie.prototype.alignDataLabel=ya,La.pie.prototype.verifyDataLabelOverflow=
function(a){var b=this.center,c=this.options,d=c.center,e=c=c.minSize||80,f;null!==d[0]?e=Y(b[2]-Y(a[1],a[3]),c):(e=Y(b[2]-a[1]-a[3],c),b[0]+=(a[3]-a[1])/2);null!==d[1]?e=Y(sa(e,b[2]-Y(a[0],a[2])),c):(e=Y(sa(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2);e<b[2]?(b[2]=e,this.translate(b),K(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):f=!0;return f});La.column&&(La.column.prototype.alignDataLabel=function(a,c,d,e,f){var j=this.chart,h=j.inverted,
g=a.dlBox||a.shapeArgs,k=a.below||a.plotY>n(this.translatedThreshold,j.plotSizeY),l=n(d.inside,!!this.options.stacking);if(g&&(e=b(g),h&&(e={x:j.plotWidth-e.y-e.height,y:j.plotHeight-e.x-e.width,width:e.height,height:e.width}),!l))h?(e.x+=k?0:e.width,e.width=0):(e.y+=k?e.height:0,e.height=0);d.align=n(d.align,!h||l?"center":k?"right":"left");d.verticalAlign=n(d.verticalAlign,h||l?"middle":k?"top":"bottom");Qa.prototype.alignDataLabel.call(this,a,c,d,e,f)});var Sb=xa.TrackerMixin={drawTrackerPoint:function(){var a=
this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var d=c.target,e;if(b.hoverSeries!==a)a.onMouseOver();for(;d&&!e;)e=d.point,d=d.parentNode;if(e!==H&&e!==b.hoverPoint)e.onMouseOver(c)};K(a.points,function(a){a.graphic&&(a.graphic.element.point=a);a.dataLabel&&(a.dataLabel.element.point=a)});a._hasTracking||(K(a.trackerGroups,function(b){if(a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),Ka))a[b].on("touchstart",
f)}),a._hasTracking=!0)},drawTrackerGraph:function(){var a=this,b=a.options,c=b.trackByArea,d=[].concat(c?a.areaPath:a.graphPath),e=d.length,f=a.chart,j=f.pointer,h=f.renderer,g=f.options.tooltip.snap,k=a.tracker,l=b.cursor,m=l&&{cursor:l},l=a.singlePoints,n,p=function(){if(f.hoverSeries!==a)a.onMouseOver()},r="rgba(192,192,192,"+(T?1E-4:0.002)+")";if(e&&!c)for(n=e+1;n--;)"M"===d[n]&&d.splice(n+1,0,d[n+1]-g,d[n+2],"L"),(n&&"M"===d[n]||n===e)&&d.splice(n,0,"L",d[n-2]+g,d[n-1]);for(n=0;n<l.length;n++)e=
l[n],d.push("M",e.plotX-g,e.plotY,"L",e.plotX+g,e.plotY);k?k.attr({d:d}):(a.tracker=h.path(d).attr({"stroke-linejoin":"round",visibility:a.visible?"visible":"hidden",stroke:r,fill:c?r:ha,"stroke-width":b.lineWidth+(c?0:2*g),zIndex:2}).add(a.group),K([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(a){j.onTrackerMouseOut(a)}).css(m);if(Ka)a.on("touchstart",p)}))}};La.column&&(Bb.prototype.drawTracker=Sb.drawTrackerPoint);La.pie&&(La.pie.prototype.drawTracker=
Sb.drawTrackerPoint);La.scatter&&(fb.prototype.drawTracker=Sb.drawTrackerPoint);a(Vb.prototype,{setItemEvents:function(a,b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState("hover");b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e);a.setState()}).on("click",function(b){var c=function(){a.setVisible()};b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):Ua(a,"legendItemClick",b,c)})},createCheckboxForItem:function(a){a.checkbox=
s("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},this.options.itemCheckboxStyle,this.chart.container);Ia(a.checkbox,"click",function(b){Ua(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})}});aa.legend.itemStyle.cursor="pointer";a(Z.prototype,{showResetZoom:function(){var a=this,b=aa.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f="chart"===c.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},
d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;Ua(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c=this.pointer,d=!1,f;!a||a.resetSelection?K(this.axes,function(a){b=a.zoom()}):K(a.xAxis.concat(a.yAxis),function(a){var e=a.axis,f=e.isXAxis;if(c[f?"zoomX":"zoomY"]||c[f?"pinchX":"pinchY"])b=e.zoom(a.min,a.max),e.displayBtn&&(d=!0)});f=this.resetZoomButton;d&&!f?this.showResetZoom():!d&&
e(f)&&(this.resetZoomButton=f.destroy());b&&this.redraw(n(this.options.chart.animation,a&&a.animation,100>this.pointCount))},pan:function(a,b){var c=this,d=c.hoverPoints,e;d&&K(d,function(a){a.setState()});K("xy"===b?[1,0]:[1],function(b){var d=a[b?"chartX":"chartY"],f=c[b?"xAxis":"yAxis"][0],j=c[b?"mouseDownX":"mouseDownY"],h=(f.pointRange||0)/2,g=f.getExtremes(),k=f.toValue(j-d,!0)+h,j=f.toValue(j+c[b?"plotWidth":"plotHeight"]-d,!0)-h;f.series.length&&k>sa(g.dataMin,g.min)&&j<Y(g.dataMax,g.max)&&
(f.setExtremes(k,j,!1,!1,{trigger:"pan"}),e=!0);c[b?"mouseDownX":"mouseDownY"]=d});e&&c.redraw(!1);r(c.container,{cursor:"move"})}});a(Fb.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart;a=n(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a;d.options.data[Jb(c,d.data)]=c.options;c.setState(a&&"select");b||K(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=a.options.selected=!1,d.options.data[Jb(a,d.data)]=
a.options,a.setState(""),a.firePointEvent("unselect"))})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;if(e&&e!==this)e.onMouseOut();this.firePointEvent("mouseOver");d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a);this.setState("hover");c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;this.firePointEvent("mouseOut");if(!b||-1===Jb(this,b))this.setState(),a.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var a=
b(this.series.options.point,this.options).events,c;this.events=a;for(c in a)Ia(this,c,a[c]);this.hasImportedEvents=!0}},setState:function(c,d){var e=this.plotX,f=this.plotY,j=this.series,h=j.options.states,g=ab[j.type].marker&&j.options.marker,k=g&&!g.enabled,l=g&&g.states[c],m=l&&!1===l.enabled,n=j.stateMarkerGraphic,p=this.marker||{},r=j.chart,s=j.halo,q;c=c||"";q=this.pointAttr[c]||j.pointAttr[c];if(!(c===this.state&&!d||this.selected&&"select"!==c||h[c]&&!1===h[c].enabled||c&&(m||k&&!1===l.enabled)||
c&&p.states&&p.states[c]&&!1===p.states[c].enabled)){if(this.graphic)g=g&&this.graphic.symbolName&&q.r,this.graphic.attr(b(q,g?{x:e-g,y:f-g,width:2*g,height:2*g}:{})),n&&n.hide();else{if(c&&l)if(g=l.radius,p=p.symbol||j.symbol,n&&n.currentSymbol!==p&&(n=n.destroy()),n)n[d?"animate":"attr"]({x:e-g,y:f-g});else p&&(j.stateMarkerGraphic=n=r.renderer.symbol(p,e-g,f-g,2*g,2*g).attr(q).add(j.markerGroup),n.currentSymbol=p);if(n)n[c&&r.isInsidePlot(e,f,r.inverted)?"show":"hide"]()}(e=h[c]&&h[c].halo)&&e.size?
(s||(j.halo=s=r.renderer.path().add(j.seriesGroup)),s.attr(a({fill:xb(this.color||j.color).setOpacity(e.opacity).get()},e.attributes))[d?"animate":"attr"]({d:this.haloPath(e.size)})):s&&s.attr({d:[]});this.state=c}},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,2*a,2*a)}});a(Qa.prototype,{onMouseOver:function(){var a=this.chart,
b=a.hoverSeries;if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&Ua(this,"mouseOver");this.setState("hover");a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;if(d)d.onMouseOut();this&&a.events.mouseOut&&Ua(this,"mouseOut");c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide();this.setState();b.hoverSeries=null},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth;a=a||"";this.state!==
a&&(this.state=a,e[a]&&!1===e[a].enabled||(a&&(b=e[a].lineWidth||b+(e[a].lineWidthPlus||0)),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a))))},setVisible:function(a,b){var c=this,d=c.chart,e=c.legendItem,f,j=d.options.chart.ignoreHiddenSeries,h=c.visible;f=(c.visible=a=c.userOptions.visible=a===H?!h:a)?"show":"hide";K(["group","dataLabelsGroup","markerGroup","tracker"],function(a){if(c[a])c[a][f]()});if(d.hoverSeries===c)c.onMouseOut();e&&d.legend.colorizeItem(c,a);c.isDirty=!0;c.options.stacking&&
K(d.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)});K(c.linkedSeries,function(b){b.setVisible(a,!1)});j&&(d.isDirtyBox=!0);!1!==b&&d.redraw();Ua(c,f)},setTooltipPoints:function(a){var b=[],c,d,e=this.xAxis,f=e&&e.getExtremes(),j=e?e.tooltipLen||e.len:this.chart.plotSizeX,h,g,k=[];if(!(!1===this.options.enableMouseTracking||this.singularTooltips)){a&&(this.tooltipPoints=null);K(this.segments||this.points,function(a){b=b.concat(a)});e&&e.reversed&&(b=b.reverse());this.orderTooltipPoints&&
this.orderTooltipPoints(b);a=b.length;for(g=0;g<a;g++)if(e=b[g],c=e.x,c>=f.min&&c<=f.max){h=b[g+1];c=d===H?0:d+1;for(d=b[g+1]?sa(Y(0,ta((e.clientX+(h?h.wrappedClientX||h.clientX:j))/2)),j):j;0<=c&&c<=d;)k[c++]=e}this.tooltipPoints=k}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===H?!this.selected:a;this.checkbox&&(this.checkbox.checked=a);Ua(this,a?"select":"unselect")},drawTracker:Sb.drawTrackerGraph});z(Qa.prototype,"init",function(a){var b;
a.apply(this,Array.prototype.slice.call(arguments,1));(b=this.xAxis)&&b.options.ordinal&&Ia(this,"updatedData",function(){delete b.ordinalIndex})});z(R.prototype,"getTimeTicks",function(a,b,c,d,e,f,j,h){var g=0,k=0,m,n={},p,r,s,q=[],t=-Number.MAX_VALUE,z=this.options.tickPixelInterval;if(!this.options.ordinal||!f||3>f.length||c===H)return a.call(this,b,c,d,e);for(r=f.length;k<r;k++){s=k&&f[k-1]>d;f[k]<c&&(g=k);if(k===r-1||f[k+1]-f[k]>5*j||s){if(f[k]>t){for(m=a.call(this,b,f[g],f[k],e);m.length&&m[0]<=
t;)m.shift();m.length&&(t=m[m.length-1]);q=q.concat(m)}g=k+1}if(s)break}a=m.info;if(h&&a.unitRange<=Ea.hour){k=q.length-1;for(g=1;g<k;g++)(new G(q[g]-rb))[lb]()!==(new G(q[g-1]-rb))[lb]()&&(n[q[g]]="day",p=!0);p&&(n[q[0]]="day");a.higherRanks=n}q.info=a;if(h&&l(z)){h=a=q.length;var k=[],v;for(p=[];h--;)g=this.translate(q[h]),v&&(p[h]=v-g),k[h]=v=g;p.sort();p=p[ta(p.length/2)];p<0.6*z&&(p=null);h=q[a-1]>d?a-1:a;for(v=void 0;h--;)g=k[h],d=v-g,v&&d<0.8*z&&(null===p||d<0.8*p)?(n[q[h]]&&!n[q[h+1]]?(d=
h+1,v=g):d=h,q.splice(d,1)):v=g}return q});a(R.prototype,{beforeSetTickPositions:function(){var a,b=[],c=!1,d,e=this.getExtremes(),f=e.min,e=e.max,j;if(this.options.ordinal){K(this.series,function(c,d){if(!1!==c.visible&&!1!==c.takeOrdinalPosition&&(b=b.concat(c.processedXData),a=b.length,b.sort(function(a,b){return a-b}),a))for(d=a-1;d--;)b[d]===b[d+1]&&b.splice(d,1)});a=b.length;if(2<a){d=b[1]-b[0];for(j=a-1;j--&&!c;)b[j+1]-b[j]!==d&&(c=!0);if(!this.options.keepOrdinalPadding&&(b[0]-f>d||e-b[b.length-
1]>d))c=!0}c?(this.ordinalPositions=b,c=this.val2lin(Y(f,b[0]),!0),d=Y(this.val2lin(sa(e,b[b.length-1]),!0),1),this.ordinalSlope=e=(e-f)/(d-c),this.ordinalOffset=f-c*e):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=H}this.groupIntervalFactor=null},val2lin:function(a,b){var c=this.ordinalPositions;if(c){var d=c.length,e,f;for(e=d;e--;)if(c[e]===a){f=e;break}for(e=d-1;e--;)if(a>c[e]||0===e){c=(a-c[e])/(c[e+1]-c[e]);f=e+c;break}return b?f:this.ordinalSlope*(f||0)+this.ordinalOffset}return a},
lin2val:function(a,b){var c=this.ordinalPositions;if(c){var d=this.ordinalSlope,e=this.ordinalOffset,f=c.length-1,j,h;if(b)0>a?a=c[0]:a>f?a=c[f]:(f=ta(a),h=a-f);else for(;f--;)if(j=d*f+e,a>=j){d=d*(f+1)+e;h=(a-j)/(d-j);break}return h!==H&&c[f]!==H?c[f]+(h?h*(c[f+1]-c[f]):0):a}return a},getExtendedPositions:function(){var a=this.chart,b=this.series[0].currentDataGrouping,c=this.ordinalIndex,d=b?b.count+b.unitName:"raw",e=this.getExtremes(),f,j;c||(c=this.ordinalIndex={});c[d]||(f={series:[],getExtremes:function(){return{min:e.dataMin,
max:e.dataMax}},options:{ordinal:!0},val2lin:R.prototype.val2lin},K(this.series,function(c){j={xAxis:f,xData:c.xData,chart:a,destroyGroupedData:ya};j.options={dataGrouping:b?{enabled:!0,forced:!0,approximation:"open",units:[[b.unitName,[b.count]]]}:{enabled:!1}};c.processData.apply(j);f.series.push(j)}),this.beforeSetTickPositions.apply(f),c[d]=f.ordinalPositions);return c[d]},getGroupIntervalFactor:function(a,b,c){var d=0;c=c.processedXData;var e=c.length,f=[],j=this.groupIntervalFactor;if(!j){for(;d<
e-1;d++)f[d]=c[d+1]-c[d];f.sort(function(a,b){return a-b});d=f[ta(e/2)];a=Y(a,c[0]);b=sa(b,c[e-1]);this.groupIntervalFactor=j=e*d/(b-a)}return j},postProcessTickInterval:function(a){var b=this.ordinalSlope;return b?a/(b/this.closestPointRange):a}});z(Z.prototype,"pan",function(a,b){var c=this.xAxis[0],d=b.chartX,e=!1;if(c.options.ordinal&&c.series.length){var f=this.mouseDownX,j=c.getExtremes(),h=j.dataMax,g=j.min,k=j.max,l=this.hoverPoints,m=c.closestPointRange,f=(f-d)/(c.translationSlope*(c.ordinalSlope||
m)),n={ordinalPositions:c.getExtendedPositions()},m=c.lin2val,p=c.val2lin,s;n.ordinalPositions?1<Ca(f)&&(l&&K(l,function(a){a.setState()}),0>f?(l=n,s=c.ordinalPositions?c:n):(l=c.ordinalPositions?c:n,s=n),n=s.ordinalPositions,h>n[n.length-1]&&n.push(h),this.fixedRange=k-g,f=c.toFixedRange(null,null,m.apply(l,[p.apply(l,[g,!0])+f,!0]),m.apply(s,[p.apply(s,[k,!0])+f,!0])),f.min>=sa(j.dataMin,g)&&f.max<=Y(h,k)&&c.setExtremes(f.min,f.max,!0,!1,{trigger:"pan"}),this.mouseDownX=d,r(this.container,{cursor:"move"})):
e=!0}else e=!0;e&&a.apply(this,Array.prototype.slice.call(arguments,1))});z(Qa.prototype,"getSegments",function(a){var b,c=this.options.gapSize,d=this.xAxis;a.apply(this,Array.prototype.slice.call(arguments,1));c&&(b=this.segments,K(b,function(a,e){for(var f=a.length-1;f--;)a[f+1].x-a[f].x>d.closestPointRange*c&&b.splice(e+1,0,a.splice(f+1,a.length-f))}))});var Xa=Qa.prototype,Wa=Ub.prototype,Nc=Xa.processData,sc=Xa.generatePoints,Ec=Xa.destroy,Wc=Wa.tooltipHeaderFormatter,Za={approximation:"average",
groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},kc={line:{},spline:{},area:{},areaspline:{},
column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},Wb=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],Oa={sum:function(a){var b=a.length,
c;if(!b&&a.hasNulls)c=null;else if(b)for(c=0;b--;)c+=a[b];return c},average:function(a){var b=a.length;a=Oa.sum(a);"number"===typeof a&&b&&(a/=b);return a},open:function(a){return a.length?a[0]:a.hasNulls?null:H},high:function(a){return a.length?J(a):a.hasNulls?null:H},low:function(a){return a.length?S(a):a.hasNulls?null:H},close:function(a){return a.length?a[a.length-1]:a.hasNulls?null:H},ohlc:function(a,b,c,d){a=Oa.open(a);b=Oa.high(b);c=Oa.low(c);d=Oa.close(d);if("number"===typeof a||"number"===
typeof b||"number"===typeof c||"number"===typeof d)return[a,b,c,d]},range:function(a,b){a=Oa.low(a);b=Oa.high(b);if("number"===typeof a||"number"===typeof b)return[a,b]}};Xa.groupData=function(a,b,c,d){var e=this.data,f=this.options.data,j=[],h=[],g=a.length,k,l,m=!!b,n=[[],[],[],[]];d="function"===typeof d?d:Oa[d];var p=this.pointArrayMap,r=p&&p.length,s;for(s=0;s<=g&&!(a[s]>=c[0]);s++);for(;s<=g;s++){for(;(c[1]!==H&&a[s]>=c[1]||s===g)&&!(k=c.shift(),l=d.apply(0,n),l!==H&&(j.push(k),h.push(l)),n[0]=
[],n[1]=[],n[2]=[],n[3]=[],s===g););if(s===g)break;if(p){k=this.cropStart+s;k=e&&e[k]||this.pointClass.prototype.applyOptions.apply({series:this},[f[k]]);var q;for(l=0;l<r;l++)(q=k[p[l]],"number"===typeof q)?n[l].push(q):null===q&&(n[l].hasNulls=!0)}else(k=m?b[s]:null,"number"===typeof k)?n[0].push(k):null===k&&(n[0].hasNulls=!0)}return[j,h]};Xa.processData=function(){var a=this.chart,b=this.options,c=b.dataGrouping,d=!1!==this.allowDG&&c&&n(c.enabled,a.options._stock),e;this.forceCrop=d;this.groupPixelWidth=
null;this.hasProcessed=!0;if(!1!==Nc.apply(this,arguments)&&d){this.destroyGroupedData();var f=this.processedXData,j=this.processedYData,h=a.plotSizeX,a=this.xAxis,g=a.options.ordinal,k=this.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth(),d=this.pointRange;if(k){e=!0;this.points=null;var m=a.getExtremes(),d=m.min,m=m.max,g=g&&a.getGroupIntervalFactor(d,m,this)||1,h=k*(m-d)/h*g,k=a.getTimeTicks(a.normalizeTimeTickInterval(h,c.units||Wb),d,m,a.options.startOfWeek,f,this.closestPointRange),
j=Xa.groupData.apply(this,[f,j,k,c.approximation]),f=j[0],j=j[1];if(c.smoothed){c=f.length-1;for(f[c]=m;c--&&0<c;)f[c]+=h/2;f[0]=d}this.currentDataGrouping=k.info;null===b.pointRange&&(this.pointRange=k.info.totalRange);this.closestPointRange=k.info.totalRange;l(f[0])&&f[0]<a.dataMin&&(a.dataMin=f[0]);this.processedXData=f;this.processedYData=j}else this.currentDataGrouping=null,this.pointRange=d;this.hasGroupedData=e}};Xa.destroyGroupedData=function(){var a=this.groupedData;K(a||[],function(b,c){b&&
(a[c]=b.destroy?b.destroy():null)});this.groupedData=null};Xa.generatePoints=function(){sc.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};Wa.tooltipHeaderFormatter=function(a){var b=a.series,c=b.tooltipOptions,d=b.options.dataGrouping,e=c.xDateFormat,f,j=b.xAxis,g;if(j&&"datetime"===j.options.type&&d&&h(a.key)){b=b.currentDataGrouping;d=d.dateTimeLabelFormats;if(b)j=d[b.unitName],1===b.count?e=j[0]:(e=j[1],f=j[2]);else if(!e&&d)for(g in Ea)if(Ea[g]>=j.closestPointRange||
Ea[g]<=Ea.day&&0<a.key%Ea[g]){e=d[g][0];break}e=L(e,a.key);f&&(e+=L(f,a.key+b.totalRange-1));a=c.headerFormat.replace("{point.key}",e)}else a=Wc.call(this,a);return a};Xa.destroy=function(){for(var a=this.groupedData||[],b=a.length;b--;)a[b]&&a[b].destroy();Ec.apply(this)};z(Xa,"setOptions",function(a,c){var d=a.call(this,c),e=this.type,f=this.chart.options.plotOptions,j=ab[e].dataGrouping;kc[e]&&(j||(j=b(Za,kc[e])),d.dataGrouping=b(j,f.series&&f.series.dataGrouping,f[e].dataGrouping,c.dataGrouping));
this.chart.options._stock&&(this.requireSorting=!0);return d});z(R.prototype,"setScale",function(a){a.call(this);K(this.series,function(a){a.hasProcessed=!1})});R.prototype.getGroupPixelWidth=function(){var a=this.series,b=a.length,c,d=0,e=!1,f;for(c=b;c--;)(f=a[c].options.dataGrouping)&&(d=Y(d,f.groupPixelWidth));for(c=b;c--;)if((f=a[c].options.dataGrouping)&&a[c].hasProcessed)if(b=(a[c].processedXData||a[c].data).length,a[c].groupPixelWidth||b>this.chart.plotSizeX/d||b&&f.forced)e=!0;return e?d:
0};ab.ohlc=b(ab.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});Wa=v(La.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(a){return[a.open,a.high,a.low,a.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",
getAttribs:function(){La.column.prototype.getAttribs.apply(this,arguments);var a=this.options,c=a.states,a=a.upColor||this.color,d=b(this.pointAttr),e=this.upColorProp;d[""][e]=a;d.hover[e]=c.hover.upColor||a;d.select[e]=c.select.upColor||a;K(this.points,function(a){a.open<a.close&&(a.pointAttr=d)})},translate:function(){var a=this.yAxis;La.column.prototype.translate.apply(this);K(this.points,function(b){null!==b.open&&(b.plotOpen=a.translate(b.open,0,1,0,1));null!==b.close&&(b.plotClose=a.translate(b.close,
0,1,0,1))})},drawPoints:function(){var a=this,b=a.chart,c,d,e,f,j,h,g,k;K(a.points,function(l){l.plotY!==H&&(g=l.graphic,c=l.pointAttr[l.selected?"selected":""]||a.pointAttr[""],f=c["stroke-width"]%2/2,k=X(l.plotX)-f,j=X(l.shapeArgs.width/2),h=["M",k,X(l.yBottom),"L",k,X(l.plotY)],null!==l.open&&(d=X(l.plotOpen)+f,h.push("M",k,d,"L",k-j,d)),null!==l.close&&(e=X(l.plotClose)+f,h.push("M",k,e,"L",k+j,e)),g?g.animate({d:h}):l.graphic=b.renderer.path(h).attr(c).add(a.group))})},animate:null});La.ohlc=
Wa;ab.candlestick=b(ab.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:ab.ohlc.tooltip,threshold:null,upColor:"white"});Wa=v(Wa,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){La.ohlc.prototype.getAttribs.apply(this,arguments);var a=this.options,b=a.states,c=a.upLineColor||a.lineColor,d=b.hover.upLineColor||c,e=b.select.upLineColor||c;K(this.points,function(a){a.open<a.close&&(a.pointAttr[""].stroke=
c,a.pointAttr.hover.stroke=d,a.pointAttr.select.stroke=e)})},drawPoints:function(){var a=this,b=a.chart,c,d=a.pointAttr[""],e,f,j,h,g,k,l,m,n,p,r;K(a.points,function(s){n=s.graphic;s.plotY!==H&&(c=s.pointAttr[s.selected?"selected":""]||d,l=c["stroke-width"]%2/2,m=X(s.plotX)-l,e=s.plotOpen,f=s.plotClose,j=Ba.min(e,f),h=Ba.max(e,f),r=X(s.shapeArgs.width/2),g=X(j)!==X(s.plotY),k=h!==s.yBottom,j=X(j)+l,h=X(h)+l,p=["M",m-r,h,"L",m-r,j,"L",m+r,j,"L",m+r,h,"Z","M",m,j,"L",m,g?X(s.plotY):j,"M",m,h,"L",m,
k?X(s.yBottom):h],n?n.animate({d:p}):s.graphic=b.renderer.path(p).attr(c).add(a.group).shadow(a.options.shadow))})}});La.candlestick=Wa;var Da=pb.prototype.symbols;ab.flags=b(ab.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30});La.flags=v(La.column,{type:"flags",sorted:!1,noSharedTooltip:!0,
allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Qa.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){La.column.prototype.translate.apply(this);var a=this.chart,b=this.points,c=b.length-1,d,e,f=this.options.onSeries,f=(d=f&&a.get(f))&&d.options.step,j=d&&d.points,h=j&&j.length,g=this.xAxis,k=g.getExtremes(),l,m,n;if(d&&d.visible&&h){d=d.currentDataGrouping;m=j[h-1].x+(d?d.totalRange:0);for(b.sort(function(a,
b){return a.x-b.x});h--&&b[c];)if(d=b[c],l=j[h],l.x<=d.x&&l.plotY!==H)if(d.x<=m&&(d.plotY=l.plotY,l.x<d.x&&!f&&(n=j[h+1])&&n.plotY!==H&&(d.plotY+=(d.x-l.x)/(n.x-l.x)*(n.plotY-l.plotY))),c--,h++,0>c)break}K(b,function(c,d){c.plotY===H&&(c.x>=k.min&&c.x<=k.max?c.plotY=a.chartHeight-g.bottom-(g.opposite?g.height:0)+g.offset-a.plotTop:c.shapeArgs={});if((e=b[d-1])&&e.plotX===c.plotX)e.stackIndex===H&&(e.stackIndex=0),c.stackIndex=e.stackIndex+1})},drawPoints:function(){var a,c=this.pointAttr[""],d=this.points,
e=this.chart.renderer,f,j,h=this.options,g=h.y,k,l,m,n,p=h.lineWidth%2/2,r,s;for(l=d.length;l--;)(m=d[l],a=m.plotX>this.xAxis.len,f=m.plotX+(a?p:-p),n=m.stackIndex,k=m.options.shape||h.shape,j=m.plotY,j!==H&&(j=m.plotY+g+p-(n!==H&&n*h.stackDistance)),r=n?H:m.plotX+p,s=n?H:m.plotY,n=m.graphic,j!==H&&0<=f&&!a)?(a=m.pointAttr[m.selected?"select":""]||c,n?n.attr({x:f,y:j,r:a.r,anchorX:r,anchorY:s}):m.graphic=e.label(m.options.title||h.title||"A",f,j,k,r,s,h.useHTML).css(b(h.style,m.style)).attr(a).attr({align:"flag"===
k?"left":"center",width:h.width,height:h.height}).add(this.markerGroup).shadow(h.shadow),m.tooltipPos=[f,j]):n&&(m.graphic=n.destroy())},drawTracker:function(){var a=this.points;Sb.drawTrackerPoint.apply(this);K(a,function(b){var c=b.graphic;c&&Ia(c.element,"mouseover",function(){0<b.stackIndex&&!b.raised&&(b._y=c.y,c.attr({y:b._y-8}),b.raised=!0);K(a,function(a){a!==b&&(a.raised&&a.graphic)&&(a.graphic.attr({y:a._y}),a.raised=!1)})})})},animate:ya});Da.flag=function(a,b,c,d,e){var f=e&&e.anchorX||
a;e=e&&e.anchorY||b;return["M",f,e,"L",a,b+d,a,b,a+c,b,a+c,b+d,a,b+d,"M",f,e,"Z"]};K(["circle","square"],function(a){Da[a+"pin"]=function(b,c,d,e,f){var j=f&&f.anchorX;f=f&&f.anchorY;b=Da[a](b,c,d,e);j&&f&&b.push("M",j,c>f?c:c+e,"L",j,f);return b}});ja===xa.VMLRenderer&&K(["flag","circlepin","squarepin"],function(a){cc.prototype.symbols[a]=Da[a]});var Wa=[].concat(Wb),jb=function(a){return Math[a].apply(0,ob(arguments,function(a){return"number"===typeof a}))};Wa[4]=["day",[1,2,3,4]];Wa[5]=["week",
[1,2,3]];a(aa,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:La.areaspline===H?"line":"areaspline",color:"#4572A7",compare:null,fillOpacity:0.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:Wa},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,
shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:0.1,maxPadding:0.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:na?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",
buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:T&&!na}});la.prototype={drawHandle:function(a,b){var c=this.chart,d=c.renderer,e=this.elementsToDestroy,f=this.handles,j=this.navigatorOptions.handles,j={fill:j.backgroundColor,stroke:j.borderColor,"stroke-width":1},h;this.rendered||(f[b]=d.g("navigator-handle-"+["left","right"][b]).css({cursor:"e-resize"}).attr({zIndex:4-b}).add(),h=d.rect(-4.5,
0,9,16,0,1).attr(j).add(f[b]),e.push(h),h=d.path(["M",-1.5,4,"L",-1.5,12,"M",0.5,4,"L",0.5,12]).attr(j).add(f[b]),e.push(h));f[b][c.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(a,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(a){var b=this.chart.renderer,c=this.elementsToDestroy,d=this.scrollbarButtons,e=this.scrollbarHeight,f=this.scrollbarOptions,j;this.rendered||(d[a]=b.g().add(this.scrollbarGroup),j=b.rect(-0.5,-0.5,e+1,e+1,
f.buttonBorderRadius,f.buttonBorderWidth).attr({stroke:f.buttonBorderColor,"stroke-width":f.buttonBorderWidth,fill:f.buttonBackgroundColor}).add(d[a]),c.push(j),j=b.path(["M",e/2+(a?-1:1),e/2-3,"L",e/2+(a?-1:1),e/2+3,e/2+(a?2:-2),e/2]).attr({fill:f.buttonArrowColor}).add(d[a]),c.push(j));a&&d[a].attr({translateX:this.scrollerWidth-e})},render:function(a,b,c,d){var e=this.chart,f=e.renderer,j,h,g,k,l=this.scrollbarGroup,m=this.navigatorGroup,p=this.scrollbar,m=this.xAxis,r=this.scrollbarTrack,s=this.scrollbarHeight,
q=this.scrollbarEnabled,t=this.navigatorOptions,z=this.scrollbarOptions,v=z.minWidth,y=this.height,w=this.top,A=this.navigatorEnabled,D=t.outlineWidth,B=D/2,L=0,M=this.outlineHeight,F=z.barBorderRadius,V=z.barBorderWidth,E=w+B,Z;if(!isNaN(a)){this.navigatorLeft=j=n(m.left,e.plotLeft+s);this.navigatorWidth=h=n(m.len,e.plotWidth-2*s);this.scrollerLeft=g=j-s;this.scrollerWidth=k=k=h+2*s;m.getExtremes&&(Z=this.getUnionExtremes(!0))&&(Z.dataMin!==m.min||Z.dataMax!==m.max)&&m.setExtremes(Z.dataMin,Z.dataMax,
!0,!1);c=n(c,m.translate(a));d=n(d,m.translate(b));if(isNaN(c)||Infinity===Ca(c))c=0,d=k;if(!(m.translate(d,!0)-m.translate(c,!0)<e.xAxis[0].minRange)){this.zoomedMax=sa(Y(c,d),h);this.zoomedMin=Y(this.fixedWidth?this.zoomedMax-this.fixedWidth:sa(c,d),0);this.range=this.zoomedMax-this.zoomedMin;c=X(this.zoomedMax);b=X(this.zoomedMin);a=c-b;this.rendered||(A&&(this.navigatorGroup=m=f.g("navigator").attr({zIndex:3}).add(),this.leftShade=f.rect().attr({fill:t.maskFill}).add(m),t.maskInside||(this.rightShade=
f.rect().attr({fill:t.maskFill}).add(m)),this.outline=f.path().attr({"stroke-width":D,stroke:t.outlineColor}).add(m)),q&&(this.scrollbarGroup=l=f.g("scrollbar").add(),p=z.trackBorderWidth,this.scrollbarTrack=r=f.rect().attr({x:0,y:-p%2/2,fill:z.trackBackgroundColor,stroke:z.trackBorderColor,"stroke-width":p,r:z.trackBorderRadius||0,height:s}).add(l),this.scrollbar=p=f.rect().attr({y:-V%2/2,height:s,fill:z.barBackgroundColor,stroke:z.barBorderColor,"stroke-width":V,r:F}).add(l),this.scrollbarRifles=
f.path().attr({stroke:z.rifleColor,"stroke-width":1}).add(l)));e=e.isResizing?"animate":"attr";if(A){this.leftShade[e](t.maskInside?{x:j+b,y:w,width:c-b,height:y}:{x:j,y:w,width:b,height:y});if(this.rightShade)this.rightShade[e]({x:j+c,y:w,width:h-c,height:y});this.outline[e]({d:["M",g,E,"L",j+b+B,E,j+b+B,E+M,"L",j+c-B,E+M,"L",j+c-B,E,g+k,E].concat(t.maskInside?["M",j+b+B,E,"L",j+c-B,E]:[])});this.drawHandle(b+B,0);this.drawHandle(c+B,1)}q&&l&&(this.drawScrollbarButton(0),this.drawScrollbarButton(1),
l[e]({translateX:g,translateY:X(E+y)}),r[e]({width:k}),j=s+b,h=a-V,h<v&&(L=(v-h)/2,h=v,j-=L),this.scrollbarPad=L,p[e]({x:ta(j)+V%2/2,width:h}),v=s+b+a/2-0.5,this.scrollbarRifles.attr({visibility:12<a?"visible":"hidden"})[e]({d:["M",v-3,s/4,"L",v-3,2*s/3,"M",v,s/4,"L",v,2*s/3,"M",v+3,s/4,"L",v+3,2*s/3]}));this.scrollbarPad=L;this.rendered=!0}}},addEvents:function(){var a=this.chart.container,b=this.mouseDownHandler,c=this.mouseMoveHandler,d=this.mouseUpHandler,e;e=[[a,"mousedown",b],[a,"mousemove",
c],[document,"mouseup",d]];Ka&&e.push([a,"touchstart",b],[a,"touchmove",c],[document,"touchend",d]);K(e,function(a){Ia.apply(null,a)});this._events=e},removeEvents:function(){K(this._events,function(a){bb.apply(null,a)});this._events=H;this.navigatorEnabled&&this.baseSeries&&bb(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var a=this,c=a.chart,d,e,f=a.scrollbarHeight,j=a.navigatorOptions,h=a.height,g=a.top,k,l,m=document.body.style,p,r=a.baseSeries;a.mouseDownHandler=function(b){b=
c.pointer.normalize(b);var e=a.zoomedMin,f=a.zoomedMax,j=a.top,g=a.scrollbarHeight,l=a.scrollerLeft,n=a.scrollerWidth,r=a.navigatorLeft,s=a.navigatorWidth,q=a.scrollbarPad,t=a.range,z=b.chartX,v=b.chartY;b=c.xAxis[0];var y,w=na?10:7;v>j&&v<j+h+g&&((j=!a.scrollbarEnabled||v<j+h)&&Ba.abs(z-e-r)<w?(a.grabbedLeft=!0,a.otherHandlePos=f,a.fixedExtreme=b.max,c.fixedRange=null):j&&Ba.abs(z-f-r)<w?(a.grabbedRight=!0,a.otherHandlePos=e,a.fixedExtreme=b.min,c.fixedRange=null):z>r+e-q&&z<r+f+q?(a.grabbedCenter=
z,a.fixedWidth=t,c.renderer.isSVG&&(p=m.cursor,m.cursor="ew-resize"),k=z-e):z>l&&z<l+n&&(f=j?z-r-t/2:z<r?e-0.2*t:z>l+n-g?e+0.2*t:z<r+e?e-t:f,0>f?f=0:f+t>=s&&(f=s-t,y=d.dataMax),f!==e&&(a.fixedWidth=t,e=d.toFixedRange(f,f+t,null,y),b.setExtremes(e.min,e.max,!0,!1,{trigger:"navigator"}))))};a.mouseMoveHandler=function(b){var d=a.scrollbarHeight,e=a.navigatorLeft,f=a.navigatorWidth,j=a.scrollerLeft,h=a.scrollerWidth,g=a.range,m;0!==b.pageX&&(b=c.pointer.normalize(b),m=b.chartX,m<e?m=e:m>j+h-d&&(m=j+
h-d),a.grabbedLeft?(l=!0,a.render(0,0,m-e,a.otherHandlePos)):a.grabbedRight?(l=!0,a.render(0,0,a.otherHandlePos,m-e)):a.grabbedCenter&&(l=!0,m<k?m=k:m>f+k-g&&(m=f+k-g),a.render(0,0,m-k,m-k+g)),l&&a.scrollbarOptions.liveRedraw&&setTimeout(function(){a.mouseUpHandler(b)},0))};a.mouseUpHandler=function(b){var e,f;l&&(a.zoomedMin===a.otherHandlePos?e=a.fixedExtreme:a.zoomedMax===a.otherHandlePos&&(f=a.fixedExtreme),e=d.toFixedRange(a.zoomedMin,a.zoomedMax,e,f),c.xAxis[0].setExtremes(e.min,e.max,!0,!1,
{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:b}));"mousemove"!==b.type&&(a.grabbedLeft=a.grabbedRight=a.grabbedCenter=a.fixedWidth=a.fixedExtreme=a.otherHandlePos=l=k=null,m.cursor=p||"")};var s=c.xAxis.length,q=c.yAxis.length;c.extraBottomMargin=a.outlineHeight+j.margin;a.navigatorEnabled?(a.xAxis=d=new R(c,b({ordinal:r&&r.xAxis.options.ordinal},j.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:s,height:h,offset:0,offsetLeft:f,offsetRight:-f,keepOrdinalPadding:!0,startOnTick:!1,
endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),a.yAxis=e=new R(c,b(j.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:h,offset:0,index:q,zoomEnabled:!1})),r||j.series.data?a.addBaseSeries():0===c.series.length&&z(c,"redraw",function(b,d){0<c.series.length&&!a.series&&(a.setBaseSeries(),c.redraw=b);b.call(c,d)})):a.xAxis=d={translate:function(a,b){var d=c.xAxis[0],e=d.getExtremes(),j=c.plotWidth-2*f,h=jb("min",d.options.min,e.dataMin),d=jb("max",d.options.max,e.dataMax)-h;return b?a*d/j+
h:j*(a-h)/d},toFixedRange:R.prototype.toFixedRange};z(c,"getMargins",function(b){var c=this.legend,f=c.options;b.call(this);a.top=g=a.navigatorOptions.top||this.chartHeight-a.height-a.scrollbarHeight-this.spacing[2]-("bottom"===f.verticalAlign&&f.enabled&&!f.floating?c.legendHeight+n(f.margin,10):0);d&&e&&(d.options.top=e.options.top=g,d.setAxisSize(),e.setAxisSize())});a.addEvents()},getUnionExtremes:function(a){var b=this.chart.xAxis[0],c=this.xAxis,d=c.options,e=b.options;if(!a||null!==b.dataMin)return{dataMin:jb("min",
d&&d.min,e.min,b.dataMin,c.dataMin),dataMax:jb("max",d&&d.max,e.max,b.dataMax,c.dataMax)}},setBaseSeries:function(a){var b=this.chart;a=a||b.options.navigator.baseSeries;this.series&&this.series.remove();this.baseSeries=b.series[a]||"string"===typeof a&&b.get(a)||b.series[0];this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var c=this.baseSeries,d=c?c.options:{},e=d.data,f=this.navigatorOptions.series,j;j=f.data;this.hasNavigatorData=!!j;d=b(d,f,{enableMouseTracking:!1,group:"nav",padXAxis:!1,
xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0});d.data=j||e;this.series=this.chart.initSeries(d);c&&!1!==this.navigatorOptions.adaptToUpdatedData&&(Ia(c,"updatedData",this.updatedDataHandler),c.userOptions.events=a(c.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var a=this.chart.scroller,b=a.baseSeries,c=b.xAxis,d=c.getExtremes(),e=d.min,f=d.max,j=d.dataMin,d=d.dataMax,h=f-e,g,k,l,m,n,p=a.series;
g=p.xData;var r=!!c.setExtremes;k=f>=g[g.length-1]-(this.closestPointRange||0);g=e<=j;a.hasNavigatorData||(p.options.pointStart=b.xData[0],p.setData(b.options.data,!1),n=!0);g&&(m=j,l=m+h);k&&(l=d,g||(m=Y(l-h,p.xData[0])));r&&(g||k)?isNaN(m)||c.setExtremes(m,l,!0,!1,{trigger:"updatedData"}):(n&&this.chart.redraw(!1),a.render(Y(e,j),sa(f,d)))},destroy:function(){this.removeEvents();K([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,
this.scrollbar],function(a){a&&a.destroy&&a.destroy()});this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null;K([this.scrollbarButtons,this.handles,this.elementsToDestroy],function(a){O(a)})}};xa.Scroller=la;z(R.prototype,"zoom",function(a,b,c){var d=this.chart,e=d.options,f=e.chart.zoomType,j=e.navigator,e=e.rangeSelector,h;if(this.isXAxis&&(j&&j.enabled||e&&e.enabled))"x"===f?d.resetZoomButton="blocked":
"y"===f?h=!1:"xy"===f&&(d=this.previousZoom,l(b)?this.previousZoom=[this.min,this.max]:d&&(b=d[0],c=d[1],delete this.previousZoom));return h!==H?h:a.call(this,b,c)});z(Z.prototype,"init",function(a,b,c){Ia(this,"beforeRender",function(){var a=this.options;if(a.navigator.enabled||a.scrollbar.enabled)this.scroller=new la(this)});a.call(this,b,c)});z(Qa.prototype,"addPoint",function(a,b,c,f,j){var h=this.options.turboThreshold;h&&this.xData.length>h&&e(b)&&!d(b)&&this.chart.scroller&&Ma(20,!0);a.call(this,
b,c,f,j)});a(aa,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}});aa.lang=b(aa.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"});va.prototype={clickButton:function(a,c){var d=this,e=d.selected,f=d.chart,j=
d.buttons,h=d.buttonOptions[a],g=f.xAxis[0],k=f.scroller&&f.scroller.getUnionExtremes()||g||{},l=k.dataMin,m=k.dataMax,p,r=g&&X(sa(g.max,n(m,g.max))),s=new G(r),q=h.type,t=h.count,k=h._range,z;if(!(null===l||null===m||a===d.selected)){if("month"===q||"year"===q)p={month:"Month",year:"FullYear"}[q],s["set"+p](s["get"+p]()-t),p=s.getTime(),l=n(l,Number.MIN_VALUE),isNaN(p)||p<l?(p=l,r=sa(p+k,m)):k=r-p;else if(k)p=Y(r-k,l),r=sa(p+k,m);else if("ytd"===q)if(g)m===H&&(l=Number.MAX_VALUE,m=Number.MIN_VALUE,
K(f.series,function(a){a=a.xData;l=sa(a[0],l);m=Y(a[a.length-1],m)}),c=!1),r=new G(m),z=r.getFullYear(),p=z=Y(l||0,G.UTC(z,0,1)),r=r.getTime(),r=sa(m||r,r);else{Ia(f,"beforeRender",function(){d.clickButton(a)});return}else"all"===q&&g&&(p=l,r=m);j[e]&&j[e].setState(0);j[a]&&j[a].setState(2);f.fixedRange=k;g?g.setExtremes(p,r,n(c,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:h}):(e=f.options.xAxis,e[0]=b(e[0],{range:k,min:z}));d.setSelected(a)}},setSelected:function(a){this.selected=this.options.selected=
a},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(a){var b=this,c=a.options.rangeSelector,d=c.buttons||[].concat(b.defaultButtons),e=c.selected,f=b.blurInputs=function(){var a=b.minInput,c=b.maxInput;a&&a.blur&&Ua(a,"blur");c&&c.blur&&Ua(c,"blur")};b.chart=a;b.options=c;b.buttons=[];a.extraTopMargin=35;b.buttonOptions=d;Ia(a.container,"mousedown",
f);Ia(a,"resize",f);K(d,b.computeButtonRange);e!==H&&d[e]&&this.clickButton(e,!1);Ia(a,"load",function(){Ia(a.xAxis[0],"afterSetExtremes",function(){b.updateButtonStates(!0)})})},updateButtonStates:function(a){var b=this,c=this.chart,d=c.xAxis[0],e=c.scroller&&c.scroller.getUnionExtremes()||d,f=e.dataMin,j=e.dataMax,h=b.selected,g=b.options.allButtonsEnabled,k=b.buttons;a&&c.fixedRange!==X(d.max-d.min)&&(k[h]&&k[h].setState(0),b.setSelected(null));K(b.buttonOptions,function(a,c){var e=a._range,l=
e>j-f,m=e<d.minRange,n="all"===a.type&&d.max-d.min>=j-f&&2!==k[c].state,p="ytd"===a.type&&L("%Y",f)===L("%Y",j);e===X(d.max-d.min)&&c!==h?(b.setSelected(c),k[c].setState(2)):!g&&(l||m||n||p)?k[c].setState(3):3===k[c].state&&k[c].setState(0)})},computeButtonRange:function(a){var b=a.type,c=a.count||1,d={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5};if(d[b])a._range=d[b]*c;else if("month"===b||"year"===b)a._range=864E5*{month:30,year:365}[b]*c},setInputValue:function(a,b){var c=
this.chart.options.rangeSelector;l(b)&&(this[a+"Input"].HCTime=b);this[a+"Input"].value=L(c.inputEditDateFormat||"%Y-%m-%d",this[a+"Input"].HCTime);this[a+"DateBox"].attr({text:L(c.inputDateFormat||"%b %e, %Y",this[a+"Input"].HCTime)})},drawInput:function(c){var d=this,e=d.chart,f=e.renderer.style,j=e.renderer,h=e.options.rangeSelector,k=d.div,l="min"===c,m,n,p,q=this.inputGroup;this[c+"Label"]=n=j.label(aa.lang[l?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(b(f,
h.labelStyle)).add(q);q.offset+=n.width+5;this[c+"DateBox"]=p=j.label("",q.offset).attr({padding:2,width:h.inputBoxWidth||90,height:h.inputBoxHeight||17,stroke:h.inputBoxBorderColor||"silver","stroke-width":1}).css(b({textAlign:"center",color:"#444"},f,h.inputStyle)).on("click",function(){d[c+"Input"].focus()}).add(q);q.offset+=p.width+(l?10:0);this[c+"Input"]=m=s("input",{name:c,className:"highcharts-range-selector",type:"text"},a({position:"absolute",border:0,width:"1px",height:"1px",padding:0,
textAlign:"center",fontSize:f.fontSize,fontFamily:f.fontFamily,top:e.plotTop+"px"},h.inputStyle),k);m.onfocus=function(){r(this,{left:q.translateX+p.x+"px",top:q.translateY+"px",width:p.width-2+"px",height:p.height-2+"px",border:"2px solid silver"})};m.onblur=function(){r(this,{border:0,width:"1px",height:"1px"});d.setInputValue(c)};m.onchange=function(){var a=m.value,b=(h.inputDateParser||G.parse)(a),c=e.xAxis[0],f=c.dataMin,j=c.dataMax;isNaN(b)&&(b=a.split("-"),b=G.UTC(g(b[0]),g(b[1])-1,g(b[2])));
isNaN(b)||(aa.global.useUTC||(b+=6E4*(new G).getTimezoneOffset()),l?b>d.maxInput.HCTime?b=H:b<f&&(b=f):b<d.minInput.HCTime?b=H:b>j&&(b=j),b!==H&&e.xAxis[0].setExtremes(l?b:c.min,l?c.max:b,H,H,{trigger:"rangeSelectorInput"}))}},render:function(b,c){var d=this,e=d.chart,f=e.renderer,j=e.container,h=e.options,g=h.exporting&&h.navigation&&h.navigation.buttonOptions,k=h.rangeSelector,l=d.buttons,h=aa.lang,m=d.div,m=d.inputGroup,p=k.buttonTheme,r=!1!==k.inputEnabled,q=p&&p.states,t=e.plotLeft,z;if(!d.rendered&&
(d.zoomText=f.text(h.rangeSelectorZoom,t,e.plotTop-20).css(k.labelStyle).add(),z=t+d.zoomText.getBBox().width+5,K(d.buttonOptions,function(a,b){l[b]=f.button(a.text,z,e.plotTop-35,function(){d.clickButton(b);d.isActive=!0},p,q&&q.hover,q&&q.select).css({textAlign:"center"}).add();z+=l[b].width+n(k.buttonSpacing,5);d.selected===b&&l[b].setState(2)}),d.updateButtonStates(),r))d.div=m=s("div",null,{position:"relative",height:0,zIndex:1}),j.parentNode.insertBefore(m,j),d.inputGroup=m=f.g("input-group").add(),
m.offset=0,d.drawInput("min"),d.drawInput("max");r&&(j=e.plotTop-45,m.align(a({y:j,width:m.offset,x:g&&j<(g.y||0)+g.height-e.spacing[0]?-40:0},k.inputPosition),!0,e.spacingBox),d.setInputValue("min",b),d.setInputValue("max",c));d.rendered=!0},destroy:function(){var a=this.minInput,b=this.maxInput,c=this.chart,d=this.blurInputs,e;bb(c.container,"mousedown",d);bb(c,"resize",d);O(this.buttons);a&&(a.onfocus=a.onblur=a.onchange=null);b&&(b.onfocus=b.onblur=b.onchange=null);for(e in this)this[e]&&"chart"!==
e&&(this[e].destroy?this[e].destroy():this[e].nodeType&&V(this[e])),this[e]=null}};R.prototype.toFixedRange=function(a,b,c,d){var e=this.chart&&this.chart.fixedRange;a=n(c,this.translate(a,!0));b=n(d,this.translate(b,!0));c=e&&(b-a)/e;0.7<c&&1.3>c&&(d?a=b-e:b=a+e);return{min:a,max:b}};z(Z.prototype,"init",function(a,b,c){Ia(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new va(this))});a.call(this,b,c)});xa.RangeSelector=va;Z.prototype.callbacks.push(function(a){function b(){f=
a.xAxis[0].getExtremes();j.render(f.min,f.max)}function c(){f=a.xAxis[0].getExtremes();isNaN(f.min)||h.render(f.min,f.max)}function d(a){"navigator-drag"!==a.triggerOp&&j.render(a.min,a.max)}function e(a){h.render(a.min,a.max)}var f,j=a.scroller,h=a.rangeSelector;j&&(Ia(a.xAxis[0],"afterSetExtremes",d),z(a,"drawChartBox",function(a){var c=this.isDirtyBox;a.call(this);c&&b()}),b());h&&(Ia(a.xAxis[0],"afterSetExtremes",e),Ia(a,"resize",c),c());Ia(a,"destroy",function(){j&&bb(a.xAxis[0],"afterSetExtremes",
d);h&&(bb(a,"resize",c),bb(a.xAxis[0],"afterSetExtremes",e))})});xa.StockChart=function(a,c){var d=a.series,e,f=n(a.navigator&&a.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,j={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},h={shadow:!1,borderWidth:0};a.xAxis=hb(m(a.xAxis||{}),function(a){return b({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},a,{type:"datetime",categories:null},f)});a.yAxis=hb(m(a.yAxis||{}),function(a){e=
n(a.opposite,!0);return b({labels:{y:-2},opposite:e,showLastLabel:!1,title:{text:null}},a)});a.series=null;a=b({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:j,spline:j,area:j,areaspline:j,arearange:j,areasplinerange:j,column:h,columnrange:h,candlestick:h,ohlc:h}},a,{_stock:!0,chart:{inverted:!1}});a.series=d;return new Z(a,c)};
z(Rb.prototype,"init",function(a,b,c){var d=c.chart.pinchType||"";a.call(this,b,c);this.pinchX=this.pinchHor=-1!==d.indexOf("x");this.pinchY=this.pinchVert=-1!==d.indexOf("y");this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert});z(R.prototype,"autoLabelAlign",function(a){var b=this.chart,c=this.options,b=b._labelPanes=b._labelPanes||{},d=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&(c=c.top+","+c.height,!b[c]&&d.enabled)?(15===d.x&&(d.x=0),void 0===d.align&&(d.align=
"right"),b[c]=1,"right"):a.call(this,[].slice.call(arguments,1))});R.prototype.getPlotLinePath=function(a,b,c,d,e){var f=this,j=this.isLinked&&!this.series?this.linkedParent.series:this.series,h=f.chart,g=h.renderer,k=f.left,m=f.top,p,r,s,q,t=[],z,v;if("xAxis"===f.coll||"yAxis"===f.coll)z=f.isXAxis?l(f.options.yAxis)?[h.yAxis[f.options.yAxis]]:hb(j,function(a){return a.yAxis}):l(f.options.xAxis)?[h.xAxis[f.options.xAxis]]:hb(j,function(a){return a.xAxis});K(f.isXAxis?h.yAxis:h.xAxis,function(a){if(l(a.options.id)?
-1===a.options.id.indexOf("navigator"):1){var b=a.isXAxis?"yAxis":"xAxis",b=l(a.options[b])?h[b][a.options[b]]:h[b][0];f===b&&z.push(a)}});v=z.length?[]:[f];K(z,function(a){-1===Jb(a,v)&&v.push(a)});e=n(e,f.translate(a,null,null,c));isNaN(e)||(f.horiz?K(v,function(a){r=a.top;q=r+a.len;p=s=X(e+f.transB);(p>=k&&p<=k+f.width||d)&&t.push("M",p,r,"L",s,q)}):K(v,function(a){p=a.left;s=p+a.width;r=q=X(m+f.height-e);(r>=m&&r<=m+f.height||d)&&t.push("M",p,r,"L",s,q)}));if(0<t.length)return g.crispPolyLine(t,
b||1)};R.prototype.getPlotBandPath=function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a),e=[],f;if(d&&c)for(f=0;f<d.length;f+=6)e.push("M",d[f+1],d[f+2],"L",d[f+4],d[f+5],c[f+4],c[f+5],c[f+1],c[f+2]);else e=null;return e};pb.prototype.crispPolyLine=function(a,b){var c;for(c=0;c<a.length;c+=6)a[c+1]===a[c+4]&&(a[c+1]=a[c+4]=X(a[c+1])-b%2/2),a[c+2]===a[c+5]&&(a[c+2]=a[c+5]=X(a[c+2])+b%2/2);return a};ja===xa.VMLRenderer&&(cc.prototype.crispPolyLine=pb.prototype.crispPolyLine);z(R.prototype,
"hideCrosshair",function(a,b){a.call(this,b);l(this.crossLabelArray)&&(l(b)?this.crossLabelArray[b]&&this.crossLabelArray[b].hide():K(this.crossLabelArray,function(a){a.hide()}))});z(R.prototype,"drawCrosshair",function(b,c,d){var e,f;b.call(this,c,d);if(l(this.crosshair.label)&&this.crosshair.label.enabled&&l(d)){b=this.chart;var j=this.options.crosshair.label,h=this.isXAxis?"x":"y";c=this.horiz;var g=this.opposite,k=this.left,m=this.top,p=this.crossLabel,r,s,q=j.format,t="";p||(p=this.crossLabel=
b.renderer.label().attr({align:j.align||(c?"center":g?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:c?16:H,fill:j.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:n(j.padding,2),stroke:j.borderColor||null,"stroke-width":j.borderWidth||0}).css(a({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},j.style)).add());c?(r=d.plotX+k,s=m+(g?0:this.height)):(r=g?this.width+k:0,s=d.plotY+m);if(s<m||s>m+this.height)this.hideCrosshair();
else{!q&&!j.formatter&&(this.isDatetimeAxis&&(t="%b %d, %Y"),q="{value"+(t?":"+t:"")+"}");p.attr({text:q?D(q,{value:d[h]}):j.formatter.call(this,d[h]),x:r,y:s,visibility:"visible"});d=p.getBBox();if(c){if("inside"===this.options.tickPosition&&!g||"inside"!==this.options.tickPosition&&g)s=p.y-d.height}else s=p.y-d.height/2;c?(e=k-d.x,f=k+this.width-d.x):(e="left"===this.labelAlign?k:0,f="right"===this.labelAlign?k+this.width:b.chartWidth);p.translateX<e&&(r+=e-p.translateX);p.translateX+d.width>=f&&
(r-=p.translateX+d.width-f);p.attr({x:r,y:s,visibility:"visible"})}}});var Tb=Xa.init,Xc=Xa.processData,Xb=Fb.prototype.tooltipFormatter;Xa.init=function(){Tb.apply(this,arguments);this.setCompare(this.options.compare)};Xa.setCompare=function(a){this.modifyValue="value"===a||"percent"===a?function(b,c){var d=this.compareValue;if(b!==H&&(b="value"===a?b-d:b=100*(b/d)-100,c))c.change=b;return b}:null;this.chart.hasRendered&&(this.isDirty=!0)};Xa.processData=function(){var a=0,b,c,d;Xc.apply(this,arguments);
if(this.xAxis&&this.processedYData){b=this.processedXData;c=this.processedYData;for(d=c.length;a<d;a++)if("number"===typeof c[a]&&b[a]>=this.xAxis.min){this.compareValue=c[a];break}}};z(Xa,"getExtremes",function(a){a.apply(this,[].slice.call(arguments,1));this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))});R.prototype.setCompare=function(a,b){this.isXAxis||(K(this.series,function(b){b.setCompare(a)}),n(b,!0)&&this.chart.redraw())};Fb.prototype.tooltipFormatter=
function(a){a=a.replace("{point.change}",(0<this.change?"+":"")+A(this.change,n(this.series.tooltipOptions.changeDecimals,2)));return Xb.apply(this,[a])};z(Qa.prototype,"render",function(a){this.chart.options._stock&&(!this.clipBox&&this.animate&&-1!==this.animate.toString().indexOf("sharedClip")?(this.clipBox=b(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}));
a.call(this)});a(xa,{Axis:R,Chart:Z,Color:xb,Point:Fb,Tick:ca,Renderer:ja,Series:Qa,SVGElement:W,SVGRenderer:pb,arrayMin:S,arrayMax:J,charts:pa,dateFormat:L,format:D,pathAnim:E,getOptions:function(){return aa},hasBidiBug:ia,isTouchDevice:na,numberFormat:A,seriesTypes:La,setOptions:function(a){aa=b(!0,aa,a);U();return aa},addEvent:Ia,removeEvent:bb,createElement:s,discardElement:V,css:r,each:K,extend:a,map:hb,merge:b,pick:n,splat:m,extendClass:v,pInt:g,wrap:z,svg:T,canvas:qa,vml:!T&&!qa,product:"Highstock",
version:"2.0.4"})})();define("highcharts",["jquery"],function(a){return function(){return a.Highcharts}}(this));
define("views/card-asset-allocation-view",["jquery","views/base-view","util/constants","highcharts"],function(a,b){function g(b){if(!f){var c;c=b?b:13;b=a("<div>");c=a(Array(c)).map(function(b){return a("<div>").addClass("asset-allocation--chart-color").addClass("color-"+(1+b))[0]});b.append(c).appendTo(document.body);c=b.children().map(function(b,c){var d=a(c),e=b+1;d.addClass("color-"+e);var f=d.css("background-color");d.removeClass("color-"+e);d=f.replace(/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/g,
function(a,b,c,d){return"rgba("+b+","+c+","+d+",0.5)"}).replace(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/ig,function(a,b,c,d){return"rgba("+parseInt(b,16)+","+parseInt(c,16)+","+parseInt(d,16)+",0.5)"}).replace(/^#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/ig,function(a,b,c,d){return"rgba("+parseInt(b+b,16)+","+parseInt(c+c,16)+","+parseInt(d+d,16)+",0.5)"});return{originalColor:f,transparentColor:d}}).get();b.remove();f=c}return f}function c(b,c){var e=b.getDataTreeFromDom();if(e.flags.hasshort){var f=
g(),h=[],p=[];a(e.shortValues).each(function(a,b){0!=b.value&&h.push({name:j[b.typename],y:-b.value,x:k[b.typename],color:f[k[b.typename]].transparentColor})});a(e.longValues).each(function(a,b){0!=b.value&&h.push({name:j[b.typename],y:b.value,x:k[b.typename],color:f[k[b.typename]].transparentColor})});a(e.netValues).each(function(a,b){p.push({name:j[b.typename],y:b.value,x:k[b.typename],color:f[k[b.typename]].originalColor});h.push({name:j[b.typename],y:b.value,x:k[b.typename],color:f[k[b.typename]].originalColor})});
p.sort(function(a,b){return a.x-b.x});h.sort(function(a,b){return a.x-b.x});return{chart:{renderTo:c,type:"custombar",spacingTop:0,spacingLeft:0,spacingBottom:0,spacingRight:0,marginTop:15,events:{load:function(){this.shortLabel=this.shortLabel||this.renderer.label("SHORT",-2,-6).css({color:"#666666",fontSize:"11px",fontFamily:"helvetica"}).add();this.longLabel=this.longLabel||this.renderer.label("LONG",0,-6).css({color:"#666666",fontSize:"11px",fontFamily:"helvetica"}).add();this.longLabel.attr("translateX",
this.get().width-this.longLabel.width+2);d(this);a(l).each(function(a,b){"function"===typeof b&&b.call(this)})},redraw:function(){this.longLabel&&this.longLabel.attr("translateX",this.get().width-this.longLabel.width+2);a(l).each(function(a,b){"function"===typeof b&&b.call(this)})}}},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!1},title:{text:null},plotOptions:{bar:{borderWidth:0,enableMouseTracking:!1,point:{events:{legendItemClick:function(){return!1}}}},series:{stacking:"normal"}},
legend:{useHTML:!0,padding:0,borderWidth:0,align:"right",verticalAlign:"top",itemMarginBottom:10,itemMarginTop:2,symbolWidth:12,labelFormatter:function(){var a;a='<span class="asset-allocation--chart-container-legend-item">'+('<span class="asset-allocation--chart-container-legend-item-label">'+this.name+"</span>");a=0>100*this.y?a+('<span class="asset-allocation--chart-container-legend-item-value negative-value">('+-1*Math.round(100*this.y)+"%)</span>"):a+('<span class="asset-allocation--chart-container-legend-item-value">'+
Math.round(100*this.y)+"%</span>");return a+"</span>"},layout:"vertical"},xAxis:[{lineColor:"#dcdcdc",opposite:!0,tickWidth:0,labels:{enabled:!1}},{lineColor:"#dcdcdc",tickWidth:0,linkedTo:0,labels:{enabled:!1}}],yAxis:[{lineWidth:1,tickWidth:0,lineColor:"#dcdcdc",gridLineColor:"#dcdcdc",labels:{enabled:!1},title:{text:null},plotLines:[{color:"#333333",value:0,zIndex:1,width:1}]},{lineWidth:1,tickWidth:0,lineColor:"#dcdcdc",gridLineColor:"#dcdcdc",opposite:!0,labels:{enabled:!0},title:{text:null}}],
series:[{name:"Asset Allocation",data:h,showInLegend:!1},{visible:!1,type:"custombar",legendType:"point",name:"Asset Allocation1",data:p,showInLegend:!0}]}}var w=g(),z=[];a(e.netValues).each(function(a,b){z.push({name:j[b.typename],y:b.value,x:k[b.typename],color:w[k[b.typename]].originalColor,selected:!0})});z.sort(function(a,b){return a.x-b.x});return{chart:{renderTo:c,type:"custompie",spacingTop:0,spacingLeft:0,spacingBottom:0,spacingRight:0,events:{load:function(){d(this);a(l).each(function(a,
b){"function"===typeof b&&b.call(this)})},redraw:function(){a(l).each(function(a,b){"function"===typeof b&&b.call(this)})}}},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!1},title:{text:""},plotOptions:{pie:{slicedOffset:0,showInLegend:!0,dataLabels:{enabled:!1},point:{events:{legendItemClick:function(){return!1}}},enableMouseTracking:!1}},legend:{useHTML:!0,padding:0,borderWidth:0,borderRadius:0,align:"right",verticalAlign:"middle",itemMarginBottom:6,itemMarginTop:2,symbolWidth:12,
labelFormatter:function(){var a;a='<span class="asset-allocation--chart-container-legend-item">'+('<span class="asset-allocation--chart-container-legend-item-label">'+this.name+"</span>");a=0>100*this.y?a+('<span class="asset-allocation--chart-container-legend-item-value negative-value">('+-1*Math.round(100*this.y)+"%)</span>"):a+('<span class="asset-allocation--chart-container-legend-item-value">'+Math.round(100*this.y)+"%</span>");return a+"</span>"},layout:"vertical",width:175},series:[{name:"Allocation",
data:z,size:"100%",innerSize:"50%"}]}}function e(){h&&(clearTimeout(p),p=setTimeout(function(){d(h);p=null},200))}function d(b){var c=self.$(".asset-allocation--chart-container");if(0!==c.length){if("custombar"==b.options.chart.type)if(422>=a(window).width()){var c=182,d=389;b.options.legend.verticalAlign="bottom";b.options.legend.align="center";b.options.legend.margin=18;b.options.legend.x=-15}else d=208,c=373<c.width()?373:c.width(),b.options.legend.margin=39,b.options.legend.verticalAlign="top",
b.options.legend.align="right",b.options.legend.x=0;else 768>=a(window).width()?(d=144,c=303<c.width()?302:c.width(),b.options.legend.margin=24):(d=169,c=359<c.width()?359:c.width(),b.options.legend.margin=37);b.setSize(c,d,!1);b.redraw(!1)}}var h,f,j={FOREIGN_EQUITY:"Foreign Stock",DOMESTIC_EQUITY:"Domestic Stock",BOND:"Bonds",OTHER:"Other",UNKNOWN:"Unknown",CASH:"Short-Term"},k={FOREIGN_EQUITY:1,DOMESTIC_EQUITY:0,BOND:2,OTHER:5,UNKNOWN:4,CASH:3},l=[];Highcharts.seriesTypes.custompie=function(){};
Highcharts.seriesTypes.custompie.prototype=Highcharts.extend(Highcharts.seriesTypes.pie.prototype,{drawLegendSymbol:function(a,b){b.legendSymbol=this.chart.renderer.rect(0,a.baseline-11,a.options.symbolWidth,12,0).attr({zIndex:3}).add(b.legendGroup)},getCenter:function(){var a=this.options,b=this.chart,c=2*(a.slicedOffset||0),d,e=b.plotWidth-2*c,f=b.plotHeight-2*c,j=Math.min(e,f),b=160>j?"50%":j/2,h;return Highcharts.map([b,b,a.size||"100%",a.innerSize||0],function(a,b){h=/%$/.test(a);d=2>b||2===
b&&h;return(h?[e,f,j,j][b]*parseInt(a,10)/100:a)+(d?c:0)})}});Highcharts.seriesTypes.custombar=function(){};Highcharts.seriesTypes.custombar.prototype=Highcharts.extend(Highcharts.seriesTypes.bar.prototype,{setData:function(a,b){Highcharts.Series.prototype.setData.call(this,a,!1);this.processData();this.generatePoints();Highcharts.pick(b,!0)&&this.chart.redraw()},drawLegendSymbol:function(a,b){b.visible=!0;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-11,a.options.symbolWidth,12,0).attr({zIndex:3}).add(b.legendGroup)}});
a.fn.getDataTreeFromDom=function(){function b(c,d){return[a(d).getDataTreeFromDom()]}if(1<this.length)return this.map(b).get();var c=a.extend({},this.data());if("list"===c.Role)return this.children().map(b).get();this.find(">[data--datakey]").length&&this.find(">[data--datakey]").each(function(){var b=a(this).data();b&&(c[b.Datakey]=a(this).getDataTreeFromDom())});return c};var p;a(document).bind("CARD_LAYOUT_CHANGED",e);return b.extend({events:{},initialize:function(b){this.isNarrativeCard=b.isNarrativeCard;
var c=this;this.addChartRedrawHandler(function(){a(document).trigger("RELAYOUT_CARD_HEIGHT");if(0<c.$(".highcharts-container").length)c.$(".highcharts-container").on("click touchend",function(){FID.InfoFlyout.close()})});if(this.isNarrativeCard)a(window).on("resize.summaryCards",e)},_toggleLegalFootnote:function(b){b=a(b.currentTarget);var c=a(".asset-allocation--legal-footnote-content");b.hasClass("asset-allocation--legal-footnote-link-unselected")?(b.removeClass("asset-allocation--legal-footnote-link-unselected").addClass("asset-allocation--legal-footnote-link-selected"),
c.removeClass("asset-allocation--legal-footnote-content-hide").addClass("asset-allocation--legal-footnote-content-show")):(b.removeClass("asset-allocation--legal-footnote-link-selected").addClass("asset-allocation--legal-footnote-link-unselected"),c.removeClass("asset-allocation--legal-footnote-content-show").addClass("asset-allocation--legal-footnote-content-hide"))},addChartRedrawHandler:function(a){l.push(a)},removeChartRedrawHandler:function(a){for(var b=0;b<this.resizeHandlers;b++)if(this.resizeHandlers[b]===
a){l.splice(b,1);break}},setContent:function(b,d){this.selectedAccounts=d;var e=this,f="custompie";!1!==b&&a(".asset-allocation-card-container").html(b);var j=e.$(".js-aaTypeCode").data("aatypecode"),h="";e.isNarrativeCard&&("Aggressive Growth"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who seek aggressive growth and who can tolerate wide fluctuations in market values, especially over the short term.":"Balanced"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who want the potential for capital appreciation and some growth and who can withstand moderate fluctuations in market value.":
"Conservative"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who want to minimize the effect of market fluctuations by taking an income-oriented approach with some potential for capital appreciation.":"Growth"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who have a preference for growth and who can withstand significant fluctuations in market value.":"Short-Term"===j?h="This  <strong>Target Asset Mix</strong> may be appropriate for investors who want to preserve their capital and can accept the lowest returns in exchange for price stability.":
"Most Aggressive"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who seek very aggressive growth and who can tolerate very wide fluctuations in market values, especially over the short term.":"Moderate"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who want potential for capital appreciation and some growth and who can withstand moderate fluctuations in market value.":"Moderate With Income"===j?h="This <strong>Target Asset Mix</strong> may be appropriate for investors who want to generate income with potential for capital appreciation and some growth, and who can withstand moderate fluctuations in market value.":
"Growth With Income"===j&&(h="This <strong>Target Asset Mix</strong> may be appropriate for investors who want to generate income, have a preference for growth, and who can withstand moderate fluctuations in market value."));var g=e.$(".syn-description");if(0<g.length)if(0<e.$("#dataContainer").length){var k=g.html();if(k)if(e.isNarrativeCard&&g.prev()){k=k.replace(/~\(assetAllocationTargetAssetMix\)~/g,h);g.html(k);h=g.prev();if(k=h.html())k=k.replace(/~\(assetAllocationInvestmentMix\)~/g,j),h.html(a.trim(k));
a(".narrative-asset-type-code").html(h.html());h.remove();a(".narrative-asset-type-explanation").append(g.html());g.remove();j=e.$("#YourAssetAllocationNarrativeHybrid .syndicated-inline-footnotes");a(".narrative-disclaimer-on-asset-allocation").html(j.html());j.remove();j=e.$("#YourAssetAllocationNarrativeHybrid .syndicated-promo--link");g=0<j.length?j.html().trim():"";a(".narrative-learn-more-on-asset-allocation").html(g);j.remove()}else k=k.replace(/~\(assetAllocationInvestmentMix\)~/g,j),g.html(a.trim(k))}else g.text("Fidelity is currently unable to provide analysis information. We apologize for any inconvenience. Please try again later."),
e.$(".syn-data-container").remove(),e.$(".syndicated-promo--link").remove();var l=e.$("#dataContainer");if(l[0]&&e.$(".asset-allocation--chart-container")[0]){var p=c(l,e.$(".asset-allocation--chart-container")[0]),f=p.chart.type,B=function(){l.is(":visible")?e.drawChart(p):setTimeout(B,1E3)};B()}e.getAppContext().footNote.setChartType(f)},setAccounts:function(a){this.selectedAccounts=a;this._getAssetAllocationSnippet()},drawChart:function(a){h=new Highcharts.Chart(a)},_buildPara:function(){var b=
[];b.push("SNIPPET=positionsAssetAllocation");this.selectedAccounts.portfolio||a(this.selectedAccounts.accounts).each(function(a,c){b.push("ACCOUNTS="+c.acctNum)});return b.join("&")},_getAssetAllocationSnippet:function(){var b=this,d={url:"/ftgw/fbc/ofportfolio/mget",dataType:"html",type:"POST",xhrFields:{withCredentials:!0},data:b._buildPara(),success:function(d){a(".asset-allocation-card-container").html(d);d=b.$("#dataContainer");d[0]&&b.$(".asset-allocation--chart-container")[0]&&(d=c(d,b.$(".asset-allocation--chart-container")[0]),
b.drawChart(d))},error:function(){b.containerLoaded=!1},complete:function(){}};a.ajax(d)}})});
define("views/card-asset-allocation-ngapp-view",["jquery","backbone","views/base-view","util/progressbar","models/account-context-model"],function(a,b,g,c,e){return g.extend({isNarrativeCard:!1,tcmId:"",accounts:"",componentId:"",publicationId:"",templateId:"",cardStatus:"",hasPMC:!1,defaults:{appName:"AP115489-Asset-Allocation",basePath:envMap.DPCS_STATIC_URL+"assetallocation/",pathToBundles:"",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(a){this.options=a||{};this.options=_.extend({},
this.defaults,this.options);toggleMap.felixAssetAllocationEntitledFeature&&(this.options.basePath=envMap.DIGITAL_CONTENT_URL+"assetallocation/");this.isNarrativeCard=a.isNarrativeCard;this.$wrapperClass=this.$el;this.isNarrativeCard?0<this.$wrapperClass.find(".asset-allocation-card-container").length&&(this.aaContentApiWrapper=this.$wrapperClass.find(".asset-allocation-card-container").children()[0].outerHTML):this.aaContentApiWrapper=this.$wrapperClass.children()[0].outerHTML;this.$wrapperClass.empty().removeClass()},
destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(b,c,f){b=this.getInitData();window.toggleMap&&toggleMap.dpcsAssetAllocationCardAMCEnable&&(b.amc=e.get("AMC"));this.$wrapperClass.append('<div id="asset-allocation-assets" init-data="'+JSON.stringify(b).replace(/"/g,"'")+'"></div>');this.$wrapperClass.append('<div class="hidden" id="aaContentApiWrapper">'+this.aaContentApiWrapper+"</div>");a(c).attr("data-app-path",f);a(c).attr("data-injected",!0)},bootstrap:function(b,
c,e){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[e])})},getInitData:function(){return{isNarrativeCard:this.isNarrativeCard,hasPMC:this.hasPMC,accounts:this.accounts,tcmId:this.tcmId,componentId:this.componentId,publicationId:this.publicationId,templateId:this.templateId,cardStatus:this.cardStatus,pasProductName:this.options.pasProductName}},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName;this.insertMarkup(c,"#"+c,b,b+this.options.pathToBundles+
this.options.cssBundle);b=envMap.DPCS_URL_VALUE+"/ftgw/dpcs/assetallocation/home/";toggleMap.felixAssetAllocationEntitledFeature&&(b=envMap.DIGITAL_APP_URL+"assetallocation/home/");a.ajax({type:"GET",url:b,xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#asset-allocation-assets").html(b)})},refresh:function(){this.renderMicroApp();c.hideLoading()},setAccounts:function(b){this.accounts=b?"string"===typeof b&&"ALL"===b.toUpperCase()?"ALL":0<b.length?a(b).map(function(a,b){return b.acctNum}).get().join(","):
"":""},setCardStatuse:function(a){this.cardStatus=a},setCardTcmId:function(a){this.tcmId=a},setPublicationAndCompositeId:function(a,b){this.publicationId=a;b&&(this.componentId=b.split("-")[0],this.templateId=b.split("-")[1])},setHasPMC:function(a){this.hasPMC=a}})});
define("views/card-recent-activity-ngapp-view",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({isNarrativeCard:!1,tcmId:"",accounts:"",componentId:"",publicationId:"",templateId:"",cardStatus:"",isAllAccts:!1,defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(a){this.options=
a||{};this.options=_.extend({},this.defaults,this.options);this.isNarrativeCard=a.isNarrativeCard;this.isAllAccts=a.isAllAccts;this.$wrapperClass=this.$el},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){var a=this.options.basePath+this.options.pathToBundles+this.options.cssBundle;this.$wrapperClass.append((toggleMap.DPCSActivityDexResiliencyFeature?"":'<link href="'+a+'" rel="stylesheet">')+'<div id="acat-assets"></div><div id="'+(this.options.appName+
"Card")+'" ng-init="isNarrativeCard='+this.isNarrativeCard+";accounts='"+this.accounts+"';tcmId='"+this.tcmId+"';tmsId='"+this.tmsId+"';cardStatus='"+this.cardStatus+"';isAllAccts="+this.isAllAccts+'"><div ng-controller="activityCardCtrl"><activity-card-directive mashup="mashup"></activity-card-directive></div></div>')},showErrorMsg:function(){var a=self.$(".activity-card");0<a.length&&(a.find(".activity-card--message").remove(),a.find(".loading-activity-card").empty().after('<p class="activity-card--message js-pending-activity-error-message">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'),
self.$(".js-narrative-pending-activity").find(".narrative-summary-card-container").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">Your activity information is temporarily unavailable.</div><div class="narrative-summary-card--analysis_content clear-margin">We apologize for any inconvenience. Please try again later.</div></div>'))},postRender:function(){var a="#"+this.options.appName+"Card";this.$wrapperClass.removeClass().children().not(a).remove()},
bootstrap:function(b,c,h){var f=this;require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[h])},function(){f.showErrorMsg();var a=f.$(".activity-card .loading-activity-card");0<a.length&&a.addClass("inactive")})},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName,h=b+this.options.pathToBundles+this.options.jsBundle,f="#"+c+"Card";this.insertMarkup();a(document).unbind("activityCard.loaded").bind("activityCard.loaded",this.postRender.bind(this));
toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets").html(b)}):this.bootstrap(h,f,c);a(f).attr("data-app-path",b);a(f).attr("data-injected",!0)},refresh:function(){this.renderMicroApp();c.hideLoading()},setAccounts:function(b){this.accounts=b?"string"===typeof b&&"ALL"===b.toUpperCase()?"ALL":0<b.length?a(b).map(function(a,b){return b.acctNum}).get().join(","):
"":""},setCardStatuse:function(a){this.cardStatus=a},setCardTcmId:function(a){this.tcmId=a},setCardTmsId:function(a){this.tmsId=a},setPublicationAndCompositeId:function(a,b){this.publicationId=a;b&&(this.componentId=b.split("-")[0],this.templateId=b.split("-")[1])}})});
(function(a,b){function g(b){b=a(b);if(1!==b.length)throw"DOM Element does not exist";this._$DOMElement=b;this._contributionData={priorYear:{contributions:Number(this._$DOMElement.data("priorYearContributions")),limit:Number(this._$DOMElement.data("priorYearLimit")),year:Number(this._$DOMElement.data("priorYear"))},currentYear:{contributions:Number(this._$DOMElement.data("currentYearContributions")),limit:Number(this._$DOMElement.data("currentYearLimit")),year:Number(this._$DOMElement.data("currentYear"))}};
0===this._contributionData.currentYear.limit?this._$DOMElement.removeClass(g._ERROR_MESSAGE_CONTAINER_CLASS):(this._chartProperties=this.composeChartData(this._contributionData),this.buildChart(),this._chartProperties.chartType===g._CHART_TYPE.Horizontal&&this.buildChart("priorYear"),a(this._chartProperties.container).removeClass(g._HIDDEN_CLASS_NAME))}function c(b,c){a(".contributionchart--tooltip-container").addClass("top-aligned");b.addClass("invertedlabel--title-offset");c.addClass("invertedlabel--amount-offset");
this._$DOMElement.addClass("invertedlabel--margin-offset")}function e(a,b){var c,d;a===g._CHART_TYPE.Vertical?b?(c=g._TOOLTIP_POSITIONS.top,d=g._TOOLTIP_POSITIONS.bottom):(c=g._TOOLTIP_POSITIONS.bottom,d=g._TOOLTIP_POSITIONS.top):b?(c=g._TOOLTIP_POSITIONS.right,d=g._TOOLTIP_POSITIONS.left):(c=g._TOOLTIP_POSITIONS.left,d=g._TOOLTIP_POSITIONS.right);return{contributionAmount:c,contributionLimit:d}}function d(a){a=a.toString();var b=a.split(".")[0];a=(a.split(".")[1]||"")+"00";b=b.split("").reverse().join("").replace(/(\d{3}(?!$))/g,
"$1,").split("").reverse().join("");return"$"+b+"."+a.slice(0,2)}g._CHART_TYPE={Vertical:0,Horizontal:1};g._HIDDEN_CLASS_NAME="is-disabled";g._VERTICAL_CHART_CONTAINER_CLASS="contributionchart-vertical-container";g._HORIZONTAL_CHART_CONTAINER_CLASS="contributionchart-horizontal-container";g._ERROR_MESSAGE_CONTAINER_CLASS="contributionchart--not-available";g._PRIOR_YEAR_CONTAINER_CLASS="contributionchart-prior-year";g._CURRENT_YEAR_CONTAINER_CLASS="contributionchart-current-year";g._TOOLTIP_AMOUNT_SELECTOR=
".contributionchart--tooltip-amount";g._TOOLTIP_TITLE_SELECTOR=".contributionchart--tooltip-title";g._CHART_FILL_SELECTOR=".contributionchart-current";g._OUTER_CONTAINER=".contributionchart--outer-container";g._YEAR_LABEL_CONTAINER=".contributionchart--yearlabel";g._PROGRESS_INDICATORS={Filling:"contributionchart-filling",Empty:"contributionchart-empty",Over:"contributionchart-over"};g._TOOLTIP_POSITIONS={left:".contributionchart--tooltip-left",right:".contributionchart--tooltip-right",top:".contributionchart--tooltip-top",
bottom:".contributionchart--tooltip-bottom"};g.prototype.composeChartData=function(a){var b={chartType:"",container:"",priorYear:{yearLabel:a.priorYear.year,progressFill:null,fillPercentage:null,labelPosition:{contributionAmount:null,contributionLimit:null},labelClashRisk:!1},currentYear:{yearLabel:a.currentYear.year,progressFill:null,fillPercentage:null,labelPosition:{contributionAmount:null,contributionLimit:null},labelClashRisk:!1}};0!==a.priorYear.limit?(b.chartType=g._CHART_TYPE.Horizontal,b.container=
"."+g._HORIZONTAL_CHART_CONTAINER_CLASS,b.cssFillProperty="width"):(b.chartType=g._CHART_TYPE.Vertical,b.container="."+g._VERTICAL_CHART_CONTAINER_CLASS,b.cssFillProperty="height");for(var c in a)if(a.hasOwnProperty(c)){var d=b[c],l=a[c],p=void 0,p=l.contributions>l.limit?100*(l.limit/l.contributions):100*(l.contributions/l.limit);d.fillPercentage=87<p&&100!==p?87:p;b[c].labelClashRisk=80<b[c].fillPercentage&&a[c].contributions!==a[c].limit;a[c].contributions>a[c].limit&&(b[c].progressFill=g._PROGRESS_INDICATORS.Over,
b[c].labelPosition=e(b.chartType,!0));a[c].contributions<=a[c].limit&&(b[c].progressFill=g._PROGRESS_INDICATORS.Filling,b[c].labelPosition=e(b.chartType,!1));0===a[c].contributions&&(b[c].progressFill=g._PROGRESS_INDICATORS.Empty)}return b};g.prototype.buildChart=function(b){var e;e="priorYear"===b?g._PRIOR_YEAR_CONTAINER_CLASS:g._CURRENT_YEAR_CONTAINER_CLASS;var j=b||"currentYear";b=100*(this._contributionData.priorYear.limit/this._contributionData.currentYear.limit);"priorYear"===j&&a("."+e).css("width",
b+"%");b=this._chartProperties;var k=b[j].labelPosition,l=a(b.container).find("."+e),p=k.contributionAmount,m=k.contributionLimit,n=g._TOOLTIP_AMOUNT_SELECTOR,r=g._TOOLTIP_TITLE_SELECTOR,k=b[j].yearLabel,s=this._contributionData;e=l.find(p+" "+n);p=l.find(p+" "+r);n=l.find(m+" "+n);m=l.find(m+" "+r);l.find(g._YEAR_LABEL_CONTAINER).html(k);p.html("Your Contributions");e.html(d(s[j].contributions));m.html("Contribution Limit");n.html(d(s[j].limit));l.find(g._CHART_FILL_SELECTOR).css(b.cssFillProperty,
b[j].fillPercentage+"%");l=l.find(g._OUTER_CONTAINER);l.removeClass(g._PROGRESS_INDICATORS.Filling);l.addClass(b[j].progressFill);j="";l=" ("+k+")";b.chartType===g._CHART_TYPE.Vertical&&(s.currentYear.contributions===s.currentYear.limit&&(n.closest(".contributionchart--tooltip").addClass(g._HIDDEN_CLASS_NAME),j=" ("+k+")"),0===s.currentYear.contributions&&p.addClass("invert-label"),k=s.currentYear.contributions<s.currentYear.limit,b.currentYear.labelClashRisk&&!k&&c.call(this,p,e),b.currentYear.labelClashRisk&&
k&&c.call(this,m,n),a(this._$DOMElement).find(".contributionchart--tooltip-bottom").css("bottom",b.currentYear.fillPercentage+"%"),12>b.currentYear.fillPercentage&&a(".fid-card--footer").addClass("fid-card--footer-offset"),p.append(j),m.append(l))};(b.FID=b.FID||{}).IRAChart=g||{}})(jQuery,window);define("irachartjs",["jquery"],function(){});
define("views/card-ira-contributions-ytd-view","jquery views/base-view irachartjs util/progressbar models/account-context-model tasks/track-ira-contributions-task".split(" "),function(a,b,g,c,e,d){return b.extend({events:{"click .js-track-contributions-button":"getIRAContributionsData"},initialize:function(){},destroy:function(){this.accountNumberToGetIRA=null;this.$el.empty();this.undelegateEvents()},render:function(){var b=this.$el.find(".js-show-chart-btn");this.accountNumberToGetIRA=b.data("account-number");
this.showButton=b.data("show-button");this.$(".syn-data-container").empty().append(this.$(".js-show-chart-btn"));this.showButton||this.getIRAContributionsData();this.$(".syn-description p").each(function(){var b=a(this);b.text(b.text())});this.$(".syndicated-promo--link").css("padding-bottom",0);return this},getIRAContributionsData:function(){var b=this;0==b.accountNumberToGetIRA.length?b._errorHandler():(new d({data:{ACCOUNT:b.accountNumberToGetIRA},onPreExecute:function(){b.$(".js-track-contributions-button").addClass("is-hidden");
b.$(".js-hidden-expander").removeClass("collapsed").addClass("expanded");b.$(".js-track-ira-contributions-data-container").removeClass("collapsed").addClass("expanded");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},onSuccess:function(c){c=a(c);b.$(".syn-data-container").empty().append(c);new window.FID.IRAChart(c)},onError:function(){b._errorHandler()},onComplete:function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},_errorHandler:function(){this.$(".syn-data-container").empty().append(a(".js-ira-card-message-error"));
this.$(".js-ira-card-message-error").removeClass("display-none")}})});define("tasks/show-more-news",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofpositions/snippet/positionCards",type:"POST",buildParams:function(a){return"CARDS=positionsNews&ACCOUNTS="+$(a.accountsInfo.accounts).map(function(a,b){return b.acctNum}).get().join(",")+"&headlinesNumber="+("number"==typeof a.counts?a.counts:4)+"&storyId="+a.storyId}})});
define("views/card-positions-news-view",["jquery","views/base-view","tasks/show-more-news"],function(a,b,g){return b.extend({events:{"click .js-fid-card--news-show-more:not(.js-getting_processing)":"getMoreNews"},initialize:function(){},destroy:function(){this.accountsInfo=null;this.$el.empty();this.undelegateEvents()},setContent:function(b,e){a(".fid-card--viewports .fid-card--title--viewpoints").text("Insights From Fidelity");this.accountsInfo=e;!1!==b&&(this.clickNum=0,this.$el.html(b));var d=
"undefined"!=typeof this.$(".positions-ledger-card--data").data("totaldollarchgatclose")?this.$(".positions-ledger-card--data").data("totaldollarchgatclose"):"",h="undefined"!=typeof this.$(".positions-ledger-card--data").data("totalpercentchgatclose")?this.$(".positions-ledger-card--data").data("totalpercentchgatclose"):"";"$0.00"==d||""==h||""==d?a(".legal-footer--item.summary-tab.today-change-footer").addClass("display-none"):a(".legal-footer--item.summary-tab.today-change-footer").removeClass("display-none")},
getMoreNews:function(){var b=this;b.pageNum+=1;(new g({context:this,data:b.generateNewRequestData(),onPreExecute:function(){b.showSpinner();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},onSuccess:function(e){null!=e?(e=a("<div>").html(e).find(".fid-card--news"),0<e.length?b.$el.html(e):b.$el.html('<div class="news-card--container fid-card "><div class="fid-card--inset"><div class="fid-card--header clearfix"><h2 class="fid-card--title">News About Your Investments</h2></div><p class="fid-card--lede">News is temporarily unavailable. Please try again later.</p></div></div>')):
b.$el.html('<div class="news-card--container fid-card "><div class="fid-card--inset"><div class="fid-card--header clearfix"><h2 class="fid-card--title">News About Your Investments</h2></div><p class="fid-card--lede">News is temporarily unavailable. Please try again later.</p></div></div>')},onError:function(){b.$el.html('<div class="news-card--container fid-card "><div class="fid-card--inset"><div class="fid-card--header clearfix"><h2 class="fid-card--title">News About Your Investments</h2></div><p class="fid-card--lede">News is temporarily unavailable. Please try again later.</p></div></div>')},
onComplete:function(){b.hideSpinner();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},showSpinner:function(){this.$(".news-card--show-more-news").addClass("js-getting_processing");this.$(".news-card--loading-spinner").show();this.$(".news-card--list").hide()},hideSpinner:function(){this.$(".news-card--show-more-news").removeClass("js-getting_processing");this.$(".news-card--loading-spinner").hide();this.$(".news-card--list").show()},generateNewRequestData:function(){var a=
this.$(".js-fid-card--news-show-more").attr("data");"REVERT-TO-START"===a&&(a="");return{accountsInfo:this.accountsInfo,counts:4,storyId:a}}})});
define("views/card-performance-view",["jquery","views/base-view","util/constants"],function(a,b,g){function c(){clearTimeout(e);var b=a(".fid-card--performance");e=setTimeout(function(){b.removeClass("fid-card--performance-collapsed");a(".performance-card--left").offset()&&a(".performance-card--right").offset()&&a(".performance-card--left").offset().top!==a(".performance-card--right").offset().top&&b.addClass("fid-card--performance-collapsed");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},
200)}var e;a(document).bind("MAIN_WINDOW_RESIZE",c);a(document).on("click touchstart",function(b){b=a(b.target);0===b.closest(".performance-card--tooltip").length&&!b.hasClass("performance-card--question-icon")&&(b=a(".performance-card--tooltip"),0<b.length&&(b.BasePopup(),b.BasePopup("close"),b.removeClass("base-popup--visible")))});return b.extend({events:{"click .performance-card--question-icon":"tooltipBubbleFunctionality"},initialize:function(){this.clickflag=0;var b=this;a(document).bind(g.EVENTS.DOCUMENT_ON_CLICK,
function(a,c){b.hideSymbolInformantion(c)});setTimeout(function(){c()},300)},destroy:function(){this.selectedAccounts=null;this.$el.empty();this.undelegateEvents()},tooltipBubbleFunctionality:function(b){b=a(b.currentTarget);var c=b.closest(".fid-card").find(".popup--tooltip-bubble").BasePopup(),e=c.find(".popup--tooltip-bubble-pointer"),j=a(".performance-card--question-icon"),g=b.attr("data-tooltipsection");a(".performance-card--tooltip-section").removeClass("performance-card--tooltip-section-active");
c.find(".performance-card--tooltip-section-"+g).addClass("performance-card--tooltip-section-active");b.hasClass("performance-card--question-icon-active")?(c.BasePopup("close"),j.removeClass("performance-card--question-icon-active")):(c.BasePopup("open"),j.removeClass("performance-card--question-icon-active"),b.addClass("performance-card--question-icon-active"));c.offset({top:b.offset().top+30});e.css({left:b.offset().left-c.offset().left-6})},showSymbolInformation:function(b){b.preventDefault();b.stopPropagation();
var c=a(b.currentTarget);this._adjustIconPosition(c);c.hasClass("performance-card--help-active")?this.hideSymbolInformantion(b):(this.$(".performance-card--help-icon").removeClass("performance-card--help-active"),c.addClass("performance-card--help-active"))},_adjustIconPosition:function(a){var b=a.position(),c=a.find(".performance-card--tooltip-bubble");parseInt(c.css("top"));var e=c.width()-16,b=b.left-5>e?e:b.left-5;a.find(".performance-card--pointer-up").css("left",0<b?b:0);35<a.parent().height()?
c.addClass("extra-height"):c.removeClass("extra-height")},hideSymbolInformantion:function(b){b=a(b.target);b.hasClass("performance-card--question-icon")||0<b.closest(".performance-card--tooltip").length||(b=a(".fid-card--performance").find(".popup--tooltip-bubble"),b.length&&(b.BasePopup(),b.BasePopup("close"),a(".performance-card--question-icon").removeClass("performance-card--question-icon-active")))},setContent:function(b,c){!1!==b&&this.$el.html(b);this.accountsInfo=c;this._resetContentByRoR(c);
var e="";a.each(a(".more-tab--tab"),function(b,c){"Performance"==a(c).data("tab-name")&&(e=a(c).find(".tabs--tab-link").attr("href"))});this.$(".perf-footer-link").attr("href",e);!0===c.perfEnabled?this.getAppContext().footNote.isPerformanceAvailable(!0):this.getAppContext().footNote.isPerformanceAvailable(!1);if(this.$el.find(".js-pef-market-comparison")){var j=Math.abs(this.$el.find(".js-pef-market-comparison").data("pef-market-comparison")).toFixed(2);this.$el.find(".js-pef-market-comparison").text(j+
"%")}},_resetContentByRoR:function(b){var c=!0;if(null!=b&&void 0!=b){var e="",j=0,j="";null!=b.portfolio&&void 0!=b.portfolio?(e=this._getDisplayVal(b.portfolio.rorVal),j=b.portfolio.rorVal,j=this._getGLClassByDisplayVal(e,j),""==j&&(c=!1)):null!=b.accounts&&void 0!=b.accounts&&1==b.accounts.length?(b=b.accounts[0],e=this._getDisplayVal(b.rorVal),j=b.rorVal,j=this._getGLClassByDisplayVal(e,j),""==j&&(c=!1)):c=!1}else c=!1;if(c){if(c=a(".js-performance-card--watcher-value-change"))c.removeClass("color-positive color-negative"),
c.addClass(j),c.text(e),this.$(".ROR_available").show(),this.$(".ROR_unavailable").hide()}else this.$(".ROR_available").hide(),this.$(".ROR_unavailable").show()},_getDisplayVal:function(a){var b="";return b=isNaN(a)?"N/A":0<a?"+"+a+"%":0>a?a+"%":"0.00%"},_getGLClassByDisplayVal:function(a,b){var c="";if(a&&"N/A"!=a&&"--"!=a)if(0<b||"+"==a.charAt(0))c="color-positive";else if(0>b||"-"==a.charAt(0))c="color-negative";return c}})});
define("views/card-performance-two-view",["jquery","views/base-view","util/constants","highcharts"],function(a,b,g){function c(b,c,d){return{chart:{renderTo:d,marginLeft:0,events:{load:function(){a(document).trigger("RELAYOUT_CARD_HEIGHT")},click:function(){a(".performance-card-two--help-icon-active").trigger("click")}},type:"column"},title:{text:""},xAxis:{labels:{style:{fontFamily:"Helvetica",fontSize:"13px",color:"#000000",fontWeight:"bold"}},categories:b,lineColor:"#E5E5E5"},yAxis:{title:{text:""},
opposite:!0,labels:{useHTML:!0,formatter:function(){return 0===this.value?'<div style="font-weight:bold;">'+this.value+"%</div>":"<div>"+this.value+"%</div>"},style:{fontFamily:"Helvetica",fontSize:"10px",color:"#000000",top:0}},tickPixelInterval:40,lineColor:"#E5E5E5",gridLineColor:"#E5E5E5",plotLines:[{color:"#333333",width:1,value:0,zIndex:5}]},tooltip:{enabled:!1},plotOptions:{column:{enableMouseTracking:!1,pointPadding:0.17},series:{borderWidth:0,animation:!1,groupPadding:-0.04,dataLabels:{enabled:!0,
useHTML:!0,style:{fontFamily:"Helvetica",fontSize:"12px",fontWeight:"bold",color:"#000000"},overflow:"none",crop:!1,formatter:function(){var a=Math.round(100*this.y)/100,b="";return b="ROR"===this.series.name?0<a?'<div style="text-align:center;min-width: 25px;"><img height="25px" width="25px" src="'+h+'"/></br>+'+a+"%</div>":'<div style="text-align:center;margin-top:-3px;min-width:25px;"><span class="performance-ror-label-number">'+a+'%</span><div class="performance-ror-icon"><img height="25px" width="25px" src="'+
h+'"/></div></div>':0<a?"+"+a+"%":a+"%"}}}},credits:{enabled:!1},legend:{enabled:!1},series:c}}var e,d,h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABGdBTUEAALGPC/xhBQAABDpJREFUSA2lVl9oW1UY/76Te9OaNFDWlWmZMpgr4mAwESy2yYLdpgyc+NBNLQ6XZaLOgbC9qHsIw+GD+Ac2ZF2TiE5FShFfRCibtkk6ZGOy7WFhCk67VoUNw9yapEnO+fzOLTfc5t7bgl5Izjm/3/fnnPP9uRdhhceMv9oHsvGaJDkICF1AEAREYrUyEM2BwPE2UCOV3Cc3ljOFfmQgtn8nSZll4xEEvECI44EgTndKs1iumOEFY36TQtoKSM8A4QYh6KIRhOeqZ7K/etl0OVoXT7XPNmbyCmATgPhAFdJveik6sY7o3u55wNNIuI3xd1Uhc8TJ6/kSR6H+RE9V4BXGS6sUPXJrOnunVWG5tdGfjPIpJ4SAfH0q/SQuXrGl0nSkTzIjb8wS0RUqZJ9wGozHU0ZOzr4OQHv518v7K3GUvjODcLT6feZ3p2z4seSaiklFgXS2kc8O2VzTkTGQuKAQO1U+s8Em9bh6ZyJS+hu/JaCoE1+c4x2B4ulGfnTKybX3vbKuZtSvAYrDKj96XHNC/+nA65jo69Jr58NOTno70VIUUaS+Dm1L9Dh1qj+e/A2FeBFAvb9m++Gw5ixHVnZx4FtjYsb2bWYnLziNuOe0aqGKroSRudExLoXrNyulE5Yjq044hb2yiwifdxt2I7yZ3RzbZhhsCU75g6DA2qjQxajrxCadI5Ha7Fz7zgm6Q1sOrG3lG7nsBNeZNPpfigpd8boYW4UW19jhjbtRCTVPWT7EVSUCu4RuKwGB025VC/nDB3fB4aDwlOVD/MyJ8KDQvasTzaJLkwESeM4Ld2EIV0tnTt124RbA/ZDoPp11pHuXl1A7iS8Zr3hxSzFML107VoRBzu0aXx1WFtrmNzqo5rScP/UnF91bTcBrgvBTLHC/VZReNKF6gJvunD7RnFK03UtIYyqf/oh3844PfzkE4acmJ1MNH56TDh9WEi+xI51x3OqXeYQR+MKL5vYzcTd//KYXp7FUKsX2aX3QgM9EsG6MMtYbib+82k9BgbrXi+NC7R4aGgt4cRo7enbmEIfmn2oufd2qZiOWOC8V3qJCZoet1BE92F2G8m7u0sNssM/GXSPCX7ztr5DE5/VC+qKTFwOJ22Dg22oyc8Jy1Dawp7cORlGQiAuTSlLCMX5X7+C0NJyKK8/xGgp8T+bSGRFLjrD+EM+79Hup2Z9ENHmMQ3+IM6TG9xpZ2ai/BIEYZ9vPBmTbo/VzH1/Skk1HemEMJIscj4f0/H8+xFe5X06nM7Ydnd7N58jWtRsFwi9N4L9MkHsNBD50OtFmlpzItiu27DsNioZZxZO35dwjNtCkYflDdqyV8zUUGTzQValVv1FAj7MS7xLv8sjfclDlkW9C3cOpG+Z1iMcaV+aInMq84fwgcTrzdWQL6ReaOchfNzXaJRDXs+EeELSg2wp/Y1wOAnyq68SW9xv/BTxhm/LR6HwIAAAAAElFTkSuQmCC";
a(document).bind("CARD_LAYOUT_CHANGED",function(){e&&(clearTimeout(d),d=setTimeout(function(){var b=e,c=a(".performance-card-two--chart-container"),d=a(".performance-card-two--content"),h=360;0!==c.length&&(0!==d.length&&(d=d.width(),567<d?(a(".performance-card-two--label.first-index").width(227),a(".performance-card-two--label-text").removeClass("truncate")):567>=d&&510<d?(a(".performance-card-two--label.first-index").width(196),a(".performance-card-two--label-text").removeClass("truncate")):330>=
d?(a(".performance-card-two--label.first-index").width(d),a(".performance-card-two--label-text").addClass("truncate"),h=320):(a(".performance-card-two--label.first-index").width(d),a(".performance-card-two--label-text").removeClass("truncate"))),c=c.width(),b.setSize(c,h,!1),b.redraw(!1),0!==a(".performance-ror-icon").length&&(b=a(".performance-card-two--chart-container .highcharts-series-group .highcharts-series:eq(0) rect").attr("height"),h=a(".performance-ror-label-number").height(),b=-b-h-28,
a(".performance-ror-icon").css("marginTop",b+"px")));chartResizeTimeout=null},200))});return b.extend({events:{"click .performance-card-two--help-icon":"popupIndexInformation"},initialize:function(){var b=this;this.chartSeries();this._hideDescription();a(document).bind(g.EVENTS.DOCUMENT_ON_CLICK,function(a,c){b.hideIndexInformaction(c)})},chartSeries:function(){var a=[],b=[],d={color:"#597A1D",data:[]},e={color:"#1DADE2",data:[]},h={color:"#FFCD00",data:[]},g={name:"ROR",color:"#023C62",data:[]},
n=this.$(".performance-card-two--data-container"),r=!1;if(n.attr("data-sp-one-year")&&n.attr("data-lb-first-one-year")&&n.attr("data-lb-second-one-year")&&n.attr("data-per-one-year")){var r=+n.attr("data-per-one-year"),s=+n.attr("data-sp-one-year"),v=+n.attr("data-lb-first-one-year"),A=+n.attr("data-lb-second-one-year");g.data.push(r);e.data.push(v);d.data.push(s);h.data.push(A);a.push("1-Year");r=!0}n.data("sp-three-year")&&n.data("lb-first-three-year")&&n.data("lb-second-three-year")&&n.data("per-three-year");
n.data("sp-five-year")&&n.data("lb-first-five-year")&&n.data("lb-second-five-year")&&n.data("per-five-year");r?(b.push(g),b.push(e),b.push(d),b.push(h),this._drawerChart(c(a,b,this.$(".performance-card-two--chart-container")[0]))):this._errorHandler()},_hideDescription:function(){0<this.$(".performance-card-two-error-msg").length&&(this.$(".syn-description").remove(),this.$(".syndicated-promo--link").remove(),a(".performance-card-two--feedback-content").remove())},_errorHandler:function(){0>=this.$(".performance-card-two-error-msg").length&&
(this.$(".syn-description ").remove(),this.$(".performance-card-two--content").remove(),this.$(".syndicated-promo--link").remove(),a(".performance-card-two--feedback-content").remove(),this.$(".syn-data-container").html('<p class="fid-card--lede performance-card-two-error-msg">Your performance information cannot be displayed at this time.</p>'))},_drawerChart:function(b){e=new Highcharts.Chart(b);a(window).on("resize.summaryCards",function(){a(".performance-card-two--help-icon-active").trigger("click")})},
popupIndexInformation:function(b){b=a(b.currentTarget);var c=b.closest(".performance-card-two-container").find(".popup--tooltip-bubble").BasePopup(),d=c.find(".popup--tooltip-bubble-pointer"),e=a(".performance-card-two--help-icon"),h=".performance-card-two--tooltip-section-"+b.attr("data-index");a(".performance-card-two--tooltip-section").removeClass("performance-card-two--tooltip-section-active");c.find(h).addClass("performance-card-two--tooltip-section-active");b.hasClass("performance-card-two--help-icon-active")?
(c.BasePopup("close"),e.removeClass("performance-card-two--help-icon-active")):(c.BasePopup("open"),e.removeClass("performance-card-two--help-icon-active"),b.addClass("performance-card-two--help-icon-active"),e=a(".performance-card-two--content"),0!==e.length&&(e=e.width(),510<=e?".performance-card-two--tooltip-section-spindex"===h?(c.offset({top:b.offset().top+25,left:b.offset().left-38}),c.width(350),d.css({left:30,top:""})):(c.offset({top:b.offset().top+25,left:b.offset().left-c.width()+43}),c.width(350),
d.css({left:b.offset().left-c.offset().left-8,top:""})):(350<e&&510>e?(c.offset({top:b.offset().top+25,left:a(".performance-card-two--indicator").offset().left+30}),c.width(320)):(c.offset({top:b.offset().top+25,left:a(".performance-card-two--indicator").offset().left}),c.width(a(".performance-card-two--label").width())),d.css({left:b.offset().left-c.offset().left-8,top:""}))))},hideIndexInformaction:function(b){b&&(b=a(b.target),b.hasClass("performance-card-two--help-icon")||0<b.closest(".performance-card-two--tooltip").length||
(b=a(".performance-card-two-container").find(".popup--tooltip-bubble"),b.length&&(b.BasePopup(),b.BasePopup("close"),a(".performance-card-two--help-icon").removeClass("performance-card-two--help-icon-active"))))},destroy:function(){this.selectedAccounts=null;this.$el.empty();this.undelegateEvents()}})});
define("views/card-performance-ngapp-view",["jquery","backbone","views/base-view"],function(a,b,g){return g.extend({defaults:{appName:"AP129047-Performance-Card",basePath:envMap.DIGITAL_CONTENT_URL+"perf-card/",pathToBundles:"",jsBundle:"bundle.js",cssBundle:"bundle.css",acctNum:""},initialize:function(b){this.options=b||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty().removeClass();window.addEventListener("RELAYOUT_CARD_HEIGHT",function(){a(document).trigger("RELAYOUT_CARD_HEIGHT")})},
cardLayoutChange:function(){var b=a(".performance-card-ng-container");0<b.length&&b[0].dispatchEvent(new Event("CARD_LAYOUT_CHANGE"))},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},renderMicroApp:function(){var b=this.options.basePath,e=this;this.$wrapperClass.attr("data-app-id",this.options.appName).attr("data-app-path",b).attr("data-injected",!0);a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"perf-card/snippet?acctNum="+this.options.acctNum,xhrFields:{withCredentials:!0},
crossDomain:!0}).done(function(b){e.$wrapperClass.html(b);a(document).unbind("CARD_LAYOUT_CHANGED",e.cardLayoutChange).bind("CARD_LAYOUT_CHANGED",e.cardLayoutChange)})},refresh:function(){this.renderMicroApp()}})});define("tasks/chart-index-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/rest/marketIndex",dataType:"json",buildParams:function(){return encodeURI("update=0&symbols=.DJI:US,.SPX:US,.IXIC:US&enableCC=Y")}})});
define("views/card-top-movers-view",["jquery","views/base-view","tasks/chart-index-task"],function(a,b,g){return b.extend({events:{"click .top-movers--view-positions-link":"clickPositionsLink"},destroy:function(){this.accountsInfo=null;this.$el.empty();this.undelegateEvents()},initialize:function(){this.accountsInfo={};this._showProperEmptyMessage()},setContent:function(a,b){this.accountsInfo=b;!1!==a&&(this.$el.html(a),this._showProperEmptyMessage())},_showProperEmptyMessage:function(){this.accountsInfo.accounts&&
(1==this.accountsInfo.accounts.length?(this.$(".top-movers--message").removeClass("display-message"),this.$(".top-movers--message.single_account").addClass("display-message")):(this.$(".top-movers--message").removeClass("display-message"),this.$(".top-movers--message.mutiple_accounts").addClass("display-message")))},clickPositionsLink:function(){this.context.router.navigate("positions",{trigger:!0})},requestMarketData:function(){var a=this;(new g({context:this,onSuccess:function(b){a._parseMarketData(b)},
onError:function(){}})).run()},_parseMarketData:function(a){try{if(a.ChartResponse.CHART.remainedHours)if("true"===a.ChartResponse.CHART.isClosedInd){var b="",d="";if(a.ChartResponse.CHART.asOfTime)for(var b=a.ChartResponse.CHART.asOfTime.substr(a.ChartResponse.CHART.asOfTime.indexOf("/")-2,a.ChartResponse.CHART.asOfTime.length-9),h=0;h<a.ChartResponse.CHART.ChartData.length;h++)if(a.ChartResponse.CHART.ChartData[h].Date){d=a.ChartResponse.CHART.ChartData[h].Date;break}var f;f=""!==d&&""!==b&&b!==
d?"as of Market Close "+d:"Markets Closed"}else f="Markets close in "+a.ChartResponse.CHART.remainedHours;else f="Market close time not available";this.$(".js-narrative-market-time").length&&this.$(".js-narrative-market-time").html(f)}catch(j){}},displayNarrativeCardContent:function(){var a,b=this.$(".fid-card--grid.top-movers--grid").data("top"),d=this.$(".fid-card--grid.top-movers--grid").data("bottom");if(this.$(".fid-card--grid.top-movers--grid").data("singleMover"))""!=b?a="Today, in your portfolio, <span class='color-positive'>"+
b+"</span> is showing a gain.":""!=d&&(a="Today, in your portfolio, <span class='color-negative'>"+d+"</span> is showing a loss.");else if(!b&&!d){var h='<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">You have no top and bottom movers at this time.</div><div class="narrative-summary-card--analysis_content clear-margin js-narrative-market-time"></div></div>';this.$el.find(".narrative-summary-card-container").empty().html(h)}else""!=b&&""==
d?a="Today, in your portfolio, <span class='color-positive'>"+b+"</span> has shown the largest gain. You have no positions showing a loss.":""!=d&&""==b?a="Today, in your portfolio, <span class='color-negative'>"+d+"</span> has shown the biggest loss. You have no positions showing a gain.":""!=b&&""!=d&&(a="Today, in your portfolio, <span class='color-positive'>"+b+"</span> has shown the largest gain while <span class='color-negative'>"+d+"</span> has shown the biggest loss.");h||this.$(".js-narrative-movers-statement").html(a)}})});
define("views/card-most-actives-view","jquery views/base-view util/progressbar models/account-context-model util/progressbar-tabs models/ajax-object-model".split(" "),function(a,b,g,c,e,d){return b.extend({events:{},initialize:function(){this.groupname="MA";this.url="/ftgw/fbc/ofpositions/snippet/positionCards";this.clickflag=0},destroy:function(){this.selectedAccounts=[];this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(a){this.selectedAccounts=a},setContent:function(b,
c){this.accountsInfo=c;this.selectedAccounts=a(this.accountsInfo.accounts).map(function(a,b){return b.acctNum}).get().join(",");!1!==b&&this.$el.html(b)},refresh:function(){var b=this;e.showLoading("Loading...",!0,500);var f={group:this.groupname,CARDS:"marketMovers",FIRST_LOAD:"N"};null==c.get("selectedAccounts").portfolio&&(f.ACCOUNTS=this.selectedAccounts);f=a.ajax({url:this.url,type:"POST",data:f,dataType:"html",success:function(c){b.$el.empty().append(c);e.hideLoading();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},
complete:function(){e.hideLoading()}});d.addAjaxObjArray(f)}})});
define("views/card-gainers-losers-view","jquery views/base-view util/progressbar models/account-context-model util/progressbar-tabs models/ajax-object-model".split(" "),function(a,b,g,c,e,d){return b.extend({events:{},initialize:function(){this.groupname="GL";this.url="/ftgw/fbc/ofpositions/snippet/positionCards";this.clickflag=0},destroy:function(){this.selectedAccounts=[];this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(a){this.selectedAccounts=a},setContent:function(b,
c){this.accountsInfo=c;this.selectedAccounts=a(this.accountsInfo.accounts).map(function(a,b){return b.acctNum}).get().join(",");!1!==b&&this.$el.html(b)},refresh:function(){var b=this;e.showLoading("Loading...",!0,500);var f={group:this.groupname,CARDS:"marketMovers"};null==c.get("selectedAccounts").portfolio&&(f.ACCOUNTS=this.selectedAccounts);f=a.ajax({url:this.url,type:"POST",data:f,dataType:"html",success:function(c){b.$el.empty().append(c);e.hideLoading();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},
complete:function(){e.hideLoading()}});d.addAjaxObjArray(f)}})});
define("views/card-customer-orders-view","jquery views/base-view util/constants util/progressbar models/account-context-model util/progressbar-tabs models/ajax-object-model".split(" "),function(a,b,g,c,e,d,h){return b.extend({events:{"click .market-movers-card--help-icon":"showInformation"},initialize:function(){this.groupname="CO";this.url="/ftgw/fbc/ofpositions/snippet/positionCards";this.clickflag=0;var b=this;a(document).bind(g.EVENTS.DOCUMENT_ON_CLICK,function(a){b.hideInformantion(a)})},destroy:function(){this.selectedAccounts=
[];this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(a){this.selectedAccounts=a},setContent:function(b,c){this.accountsInfo=c;this.selectedAccounts=a(this.accountsInfo.accounts).map(function(a,b){return b.acctNum}).get().join(",");!1!==b&&this.$el.html(b)},showInformation:function(b){b.preventDefault();b.stopPropagation();var c=a(b.currentTarget);this._adjustIconPosition(c);c.hasClass("market-movers-card--help-active")?this.hideInformantion(b):(this.$(".market-movers-card--help-icon").removeClass("market-movers-card--help-active"),
c.addClass("market-movers-card--help-active"))},_adjustIconPosition:function(a){var b=a.position(),c=a.find(".market-movers-card--tooltip-bubble"),d=c.width()-16,d=b.left-5>d?d:b.left-5,b=b.top+25;a.find(".market-movers-card--pointer-up").css("left",0<d?d:0);a.find(".market-movers-card--tooltip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},hideInformantion:function(b){b=a(b.target);!b.closest(".market-movers-card--tooltip-bubble").length&&!b.hasClass(".market-movers-card--tooltip-bubble")&&
a(".market-movers-card--help-icon").removeClass("market-movers-card--help-active")},refresh:function(){var b=this;d.showLoading("Loading...",!0,500);var c={group:this.groupname,CARDS:"marketMovers"};null==e.get("selectedAccounts").portfolio&&(c.ACCOUNTS=this.selectedAccounts);c=a.ajax({url:this.url,type:"POST",data:c,dataType:"html",success:function(c){b.$el.empty().append(c);d.hideLoading();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},complete:function(){d.hideLoading()}});
h.addAjaxObjArray(c)}})});
define("views/card-market-movers-view","jquery views/composite-view components/fidtab views/card-most-actives-view views/card-gainers-losers-view views/card-customer-orders-view".split(" "),function(a,b,g,c,e,d){return b.extend({initialize:function(){this.initializeTabs();this.mostActivesCardView=new c({el:this.$(".market-movers-card--most-actives-container")});this.gainersLosersCardView=new e({el:this.$(".market-movers-card--gainers-losers-container")});this.customerOrdersCardView=new d({el:this.$(".market-movers-card--customer-orders-container")});
this.mostActivesCardView.setAccounts(this.selectedAccounts);this.gainersLosersCardView.setAccounts(this.selectedAccounts);this.customerOrdersCardView.setAccounts(this.selectedAccounts)},initializeTabs:function(){var b=this,c=a("#market-movers-card"),d=a(".market-movers-card--tabs--tab").index(a(".market-movers-card--tabs--selected"));-1==d&&(d=0);this.tabs=new g(c,{selected:d+1,ignoreHiddenTabs:!1,tabClassSelector:".market-movers-card--tabs--tab",containerClassSelector:".market-movers-card--tab-item-container",
selectedClassSelector:".market-movers-card--tabs--selected",navClassSelector:".market-movers-card--tabs-nav",tabLinkClassSelector:".market-movers-card--tabs--tab-link",extendedSelectedClass:"market-movers-card--tabs--selected"});c.on(g.Events.open,function(c){c.stopPropagation();var d=c.$tab.find("a").attr("href");"#market-movers-card--panel-most-actives"==d?b.mostActivesCardView.refresh(c):"#market-movers-card--panel-gainers-losers"==d?b.gainersLosersCardView.refresh(c):"#market-movers-card--panel-customer-orders"==
d&&b.customerOrdersCardView.refresh(c);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")})},destroy:function(){this.selectedAccounts=[];this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(a){this.selectedAccounts=a;this.refresh()},setContent:function(b,c){this.accountsInfo=c;this.selectedAccounts=a(this.accountsInfo.accounts).map(function(a,b){return b.acctNum}).get().join(",");!1!==b&&this.$el.html(b);this.mostActivesCardView.setAccounts(this.selectedAccounts);
this.gainersLosersCardView.setAccounts(this.selectedAccounts);this.customerOrdersCardView.setAccounts(this.selectedAccounts)},refresh:function(){}})});define("text!templates/oppfinder-earnings-dates.html",[],function(){return'<div class="oppfin-sc-card--earnings-post">\n        <table class="oppfin-sc-card--grid oppfin-sc-card--earnings-list">\n            <colgroup class="oppfin-sc-card--grid-col-symbol"></colgroup>\n            <colgroup class="oppfin-sc-card--grid-col-report-date"></colgroup>\n            <colgroup class="oppfin-sc-card--grid-col-price"></colgroup>\n            <colgroup class="oppfin-sc-card--grid-col-info-ess"></colgroup>\n            <thead>\n            <tr>\n                <th class="oppfin-sc-card--grid-col-text symbol">Symbol</th>\n                <th class="oppfin-sc-card--grid-col-text">\n                    <span class="oppfin-sc-card--grid-col-text-header-reportdate">Earnings</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-reportdate">Report</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-reportdate">Date</span>\n                </th>\n                <th class="oppfin-sc-card--grid-col-text lastpricechange">\n                    <span class="oppfin-sc-card--grid-col-text-header-lastprice">Last Price</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-percentchange">% Change</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-asofdate">AS OF <%= modelData.formatData.FormatDate(modelData.data.result[0].lastPriceDate) %></span>\n                </th>\n                <th class="oppfin-sc-card--grid-col-text ess">\n                    <span class="oppfin-sc-card--grid-col-text-header-ess">Equity</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-ess">Summary Score</span>\n                    <span class="oppfin-sc-card--grid-col-text-header-provider">Provided by <a href="<%=envMap.MODRESEARCH_URL_VALUE%>/fidelity/research/reports/release2/Research/StarMine.asp" class="oppfin-sc-card--grid-link" target="_top">StarMine</a></span>\n                    <span class="oppfin-sc-card--grid-col-text-header-asofdate">\n                        <% for(var i = 0; i < modelData.data.result.length; i++){ %>\n                        <%\n                        if(modelData.data.result[i].hasOwnProperty(\'summaryScoreDate\')) {\n                        %>\n                        AS OF <%= modelData.formatData.FormatReportDate(modelData.data.result[i].summaryScoreDate) %>\n                        <% break; %>\n                        <%\n                        } else {\n                        %>\n                        <% if((i!=0) && (modelData.data.result.length != 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% if((i==0) && (modelData.data.result.length == 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% } %>\n                        <% } %>\n                    </span>\n                </th>\n            </tr>\n            </thead>\n            <tbody>\n            <% _.each(modelData.data.result,function(i,key,list){ %>\n            <tr>\n                <td class="oppfin-sc-card--grid-col-text">\n                    <% if(i.days >= \'0\' && i.days <= \'3\'){ %>\n                    <div class="oppfin-sc-card-indicator"></div>\n                    <% } %>\n                    <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/snapshot.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                        <span class="oppfin-sc-card--grid-col-text symbol"><%= i.securityDetail.symbol %></span>\n                        <span class="oppfin-sc-card--grid-col-text-security" title="<%=i.securityDetail.secDesc%>"><%=i.securityDetail.secDesc%></span>\n                    </a>\n                </td>\n                <td class="oppfin-sc-card--grid-col-text date">\n                    <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/evaluate/fundamentals/earnings.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                            <% if(i.days == \'0\'){ %>\n                                <span class="oppfin-sc-card--grid-col-text-days-until">Today</span>\n                            <% } %>\n                            <% if(i.days == \'1\'){ %>\n                                <span class="oppfin-sc-card--grid-col-text-days-until">In <%= i.days %> Day</span>\n                            <% } %>\n                            <% if((i.days != \'0\') && (i.days != \'1\') && (i.days.toString().charAt(0) != \'-\')){ %>\n                                <span class="oppfin-sc-card--grid-col-text-days-until">In <%= i.days %> Days</span>\n                            <% } %>\n                            <% if((i.days != \'0\') && (i.days != \'1\') && (i.days.toString().charAt(0) == \'-\')){ %>\n                                <span class="oppfin-sc-card--grid-col-text-days-until"> <%= modelData.formatData.FormatDaysAgo(i.days) %> Days Ago</span>\n                            <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-date"><%= modelData.formatData.FormatReportDate(i.date) %></span>\n                    </a>\n                </td>\n                <td class="oppfin-sc-card--grid-col-text lastpricechange">\n                    <% if((i.changeSinceClosingPct.toString().charAt(0) != \'-\') && (i.changeSinceClosingPct != \'0.00\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-lastprice increasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                        <span class="oppfin-sc-card--grid-col-text-percentchange increasing">(+<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                    <% } %>\n                    <% if((i.changeSinceClosingPct.toString().charAt(0)) == \'-\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-lastprice decreasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                        <span class="oppfin-sc-card--grid-col-text-percentchange decreasing">(<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                    <% } %>\n                    <% if((i.changeSinceClosingPct == \'0.00\') || (i.changeSinceClosingPct == \'0\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-lastprice"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                        <span class="oppfin-sc-card--grid-col-text-percentchange">(0.00%)</span>\n                    <% } %>\n                </td>\n                <td class="oppfin-sc-card--grid-col-ess">\n                    <% if(i.hasOwnProperty(\'summaryRating\')){ %>\n                    <div class="oppfin-sc-card-esschip" title="click for equity summary score">\n                    <% if(i.summaryRating == \'Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-underperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-sell"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-outperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-buy"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Neutral\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-neutral"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-underlying">\n                            <% if(i.hasOwnProperty(\'buyCount\') && i.buyCount != 0){ %>\n                                <% for(var x=1;x<= i.buyCount;x++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-buy"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'outperformCount\') && i.outperformCount != 0){ %>\n                                <% for(var j=1;j<= i.outperformCount;j++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-outperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'neutralCount\') && i.neutralCount != 0){ %>\n                                <% for(var k=1;k<= i.neutralCount;k++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-neutral"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'underperformCount\') && i.underperformCount != 0){ %>\n                                <% for(var l=1;l<= i.underperformCount;l++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-underperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'sellCount\') && i.sellCount != 0){ %>\n                                <% for(var m=1;m<= i.sellCount;m++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-sell"></span>\n                                <% } %>\n                            <% } %>\n                        </span>\n                        <div class="oppfin-sc-card--esschip-bubble">\n                            <div class="oppfin-sc-card--esschip-wrapper">\n                                <div class="oppfin-sc-card--esschip-info">\n                                    <div class="oppfin-sc-modal-close-icon" role="button" tabindex="0">\n                                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAVdEVYdENyZWF0aW9uIFRpbWUANi8xMS8xMgh2CcgAAACkSURBVDiNrZO9EcMgDIU/sYBXyQiM4lRqGcWtqmQUj+BVvEEakfMlIHxxVOnQ+zmeQADMbAYWIKvqRlBmdgNWoKjqU5z88PkeiRzIkx/dkzvXmoDVgSMywJKA7M5dkQ55B7KMAN43Z6q6yQkXGmfvnOQw6Ikc6ytk+UQEIs0NpY7T6frfFS6FeGmNEbm6RJg0IgN4n2m82ASUiDwQKTWDmR+/8wt8nHU8re6bGQAAAABJRU5ErkJggg==" width="16" height="16"/>\n                                    </div>\n                                    <div class="oppfin-sc-modal-rating">\n                                        <% if(i.summaryRating == \'Bearish\'){ %>\n                                            <div class="tab color4">Bearish</div>\n                                        <% } %>\n                                        <% if(i.summaryRating == \'Very Bearish\'){ %>\n                                            <div class="tab color5">Very Bearish</div>\n                                        <% } %>\n                                        <% if(i.summaryRating == \'Bullish\'){ %>\n                                            <div class="tab color2">Bullish</div>\n                                        <% } %>\n                                        <% if(i.summaryRating == \'Very Bullish\'){ %>\n                                            <div class="tab color1">Very Bullish</div>\n                                        <% } %>\n                                        <% if(i.summaryRating == \'Neutral\'){ %>\n                                            <div class="tab color3">Neutral</div>\n                                        <% } %>\n                                            <div class="data"><%= i.summaryScore %></div>\n                                    </div>\n                                    <div class="oppfin-sc-modal-legend">\n                                        <div class="row_title">Underlying Analyst Opinions</div>\n                                        <div class="row">\n                                            <div class="num"><%= i.buyCount%></div>\n                                            <div class="oppfin-ess-bar">\n                                                <% for(var a=1;a<= i.buyCount;a++){ %>\n                                                    <div class="oppfin-ess-bar-buy"></div>\n                                                <% } %>\n                                            </div>\n                                            <div class="desc">Buy</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="num"><%= i.outperformCount%></div>\n                                            <div class="oppfin-ess-bar">\n                                                <% for(var b=1;b<= i.outperformCount;b++){ %>\n                                                    <div class="oppfin-ess-bar-outperform"></div>\n                                                <% } %>\n                                            </div>\n                                            <div class="desc">Outperform</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="num"><%= i.neutralCount%></div>\n                                            <div class="oppfin-ess-bar">\n                                                <% for(var c=1;c<= i.neutralCount;c++){ %>\n                                                    <div class="oppfin-ess-bar-neutral"></div>\n                                                <% } %>\n                                            </div>\n                                            <div class="desc">Neutral</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="num"><%= i.underperformCount%></div>\n                                            <div class="oppfin-ess-bar">\n                                                <% for(var d=1;d<= i.underperformCount;d++){ %>\n                                                    <div class="oppfin-ess-bar-underperform"></div>\n                                                <% } %>\n                                            </div>\n                                            <div class="desc">Underperform</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="num"><%= i.sellCount%></div>\n                                            <div class="oppfin-ess-bar">\n                                                <% for(var e=1;e<= i.sellCount;e++){ %>\n                                                    <div class="oppfin-ess-bar-sell"></div>\n                                                <% } %>\n                                            </div>\n                                            <div class="desc">Sell</div>\n                                        </div>\n                                        <div class="row_links"><a onclick="javascript:void(0);" href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" title="view details" target="_top">View details</a> | <a title="methodology" onclick="javascript:void(0);" href="javascript:popWinCustomAtPosition(\'https://scs.fidelity.com/help/research/learn_er_glossary_1.shtml#equitysummaryscore\',820,795,\'yes\',\'yes\')">Methodology</a></div>\n                                    </div>\n                                    <div class="oppfin-sc-card--esschip-pointer-up"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <% } %>\n                    <% if(!i.hasOwnProperty(\'summaryRating\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-ess-none">--</span>\n                    <% } %>\n                </td>\n            </tr>\n            <% }) %>\n            </tbody>\n        </table>\n        <div class="oppfin-sc-card--pagination">\n            <div id="oppfin-sc-card--pagination-bar">\n                <a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>\n                <% _.each(modelData.pages,function(i,key,list){ %>\n                <% if(i != \'...\'){ %>\n                <a id="oppfin-<%= i%>" class="oppfin-page">\n                    <span class="oppfin-sc-card--page-number"><%= i%></span>\n                </a>\n                <% } %>\n                <% if(i == \'...\'){ %>\n                <a id="oppfin-ellipsisPage" class="oppfin-page">\n                    <span class="oppfin-sc-card--page-number"><%= i%></span>\n                </a>\n                <% } %>\n                <% }) %>\n                <a id="oppfin-pageNext" class="oppfin-next">Next</a>\n                <div class="layout-clear-both"></div>\n            </div>\n        </div>\n        <p class="oppfin-sc-card--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/conferenceCalls.jhtml" target="_top">Explore a full list of stocks with upcoming earnings dates</a></p>\n</div>'});
define("models/oppfin-pagination-model",["jquery","backbone"],function(a,b){var g,c;return new (b.Model.extend({CreateEarningsMap:function(a,b){var c=function(a,b,c,d){for(var e=0,f=[];0<d&&b<a.opportunity.opportunityDetails.length;)f[e]=a.opportunity.opportunityDetails[b].earnings[c],f[e].date=a.opportunity.opportunityDetails[b].date,f[e].days=a.opportunity.opportunityDetails[b].days,e++,c==a.opportunity.opportunityDetails[b].earnings.length-1?(b++,c=0):c++,d--;return{index:b,subIndex:c,result:f}},
f=c(a,0,0,5),j=[];j.push(f);for(var g=1;g<b;g++)f=c(a,f.index,f.subIndex,5),j.push(f);return j},CreateDividendsMap:function(a,b){var c=function(a,b,c,d){for(var e=0,f=[];0<d&&b<a.opportunity.opportunityDetails.length;)f[e]=a.opportunity.opportunityDetails[b].dividends[c],f[e].date=a.opportunity.opportunityDetails[b].date,f[e].days=a.opportunity.opportunityDetails[b].days,e++,c==a.opportunity.opportunityDetails[b].dividends.length-1?(b++,c=0):c++,d--;return{index:b,subIndex:c,result:f}},f=c(a,0,0,
5),j=[];j.push(f);for(var g=1;g<b;g++)f=c(a,f.index,f.subIndex,5),j.push(f);return j},CreateESSchangeMap:function(a,b){var c=function(a,b,c,d){for(var e=0,f=[];0<d&&b<a.opportunity.opportunityDetails.length;)f[e]=a.opportunity.opportunityDetails[b].essChange[c],f[e].date=a.opportunity.opportunityDetails[b].date,f[e].days=a.opportunity.opportunityDetails[b].days,e++,c==a.opportunity.opportunityDetails[b].essChange.length-1?(b++,c=0):c++,d--;return{index:b,subIndex:c,result:f}},f=c(a,0,0,5),j=[];j.push(f);
for(var g=1;g<b;g++)f=c(a,f.index,f.subIndex,5),j.push(f);return j},CreateFiftyweekhighsMap:function(a,b){var c=function(a,b,c,d,e){var f=0,j=[];a=a.opportunity.opportunityDetails;for(e&&a.reverse();0<d&&b<a.length;)j[f]=a[b].fiftyTwoWeekHigh[c],j[f].date=a[b].date,j[f].days=a[b].days,f++,c==a[b].fiftyTwoWeekHigh.length-1?(b++,c=0):c++,d--;return{index:b,subIndex:c,result:j}},f=c(a,0,0,4,!0),j=[];j.push(f);for(var g=1;g<b;g++)f=c(a,f.index,f.subIndex,4,!1),j.push(f);return j},CreateFiftyweeklowsMap:function(a,
b){var c=function(a,b,c,d,e){var f=0,j=[];for(e&&a.opportunity.opportunityDetails.reverse();0<d&&b<a.opportunity.opportunityDetails.length;)j[f]=a.opportunity.opportunityDetails[b].fiftyTwoWeekLow[c],j[f].date=a.opportunity.opportunityDetails[b].date,j[f].days=a.opportunity.opportunityDetails[b].days,f++,c==a.opportunity.opportunityDetails[b].fiftyTwoWeekLow.length-1?(b++,c=0):c++,d--;return{index:b,subIndex:c,result:j}},f=c(a,0,0,4,!0),j=[];j.push(f);for(var g=1;g<b;g++)f=c(a,f.index,f.subIndex,
4,!1),j.push(f);return j},BuildPaginationBar:function(a){var b="";c='<div class="oppfin-sc-card--pagination"><div id="oppfin-sc-card--pagination-bar"><a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>';for(var h=1;h<=a;h++)b=b+"<a id=oppfin-"+h+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+h+"</span></a>";return g=c+b+'<a id="oppfin-pageNext" class="oppfin-next" >Next</a><div class="layout-clear-both"></div>'},RebuildPaginationBar:function(a,b,h){var f=parseInt(b),
j="";c='<div class="oppfin-sc-card--pagination"><div id="oppfin-sc-card--pagination-bar"><a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>';if(h&&a<b-3){for(h=a;h<=a+2;h++)j=j+"<a id=oppfin-"+h+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+h+"</span></a>";g=c+j+'<a id="oppfin-ellipsisPage" class="oppfin-page"><span class="oppfin-sc-card--page-number">...</span></a>'+("<a id=oppfin-"+b+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+b+"</span></a>")+
'<a id="oppfin-pageNext" class="oppfin-next" >Next</a><div class="layout-clear-both"></div>'}else h&&(a>=f-3&&a<=f)&&(g=c+("<a id=oppfin-"+(f-3)+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+(f-3)+"</span></a><a id=oppfin-"+(f-2)+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+(f-2)+"</span></a><a id=oppfin-"+(f-1)+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+(f-1)+"</span></a>")+("<a id=oppfin-"+f+' class="oppfin-page"><span class="oppfin-sc-card--page-number">'+
f+"</span></a>")+'<a id="oppfin-pageNext" class="oppfin-next" >Next</a><div class="layout-clear-both"></div>');return g},BuildBasicPaginationBar:function(a){for(var b=[],c=1;c<=a;c++)b.push(c);return b},BuildPaginationBarWithEllipsis:function(a,b,c){var f=parseInt(b),j=[];if(c&&a<b-3){for(c=a;c<=a+2;c++)j.push(c);j.push("...");j.push(b)}else c&&(a>=f-3&&a<=f)&&(j.push(f-3),j.push(f-2),j.push(f-1),j.push(f));return j}}))});
define("models/oppfin-data-model",["jquery","backbone"],function(a,b){var g=function(a){Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())};Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};return a.dst()?-4:-5};return new (b.Model.extend({FormatDate:function(a){a=new Date(a);var b=a.getTime()+6E4*a.getTimezoneOffset(),d=new Date(b+36E5*
g(a));a=d.getDate();10>a&&(a="0"+a);b=d.getMonth()+1;10>b&&(b="0"+b);var h=d.getFullYear();10>h&&(h="0"+h);var f=d.getHours(),d=d.getMinutes();10>d&&(d="0"+d);var j="AM";12<=f&&(j="PM",f-=12);0==f&&(f=12);return f+":"+d+" "+j+" ET "+b+"/"+a+"/"+h},FormatReportDate:function(a){a=new Date(a);var b=a.getTime()+6E4*a.getTimezoneOffset(),d=new Date(b+36E5*g(a));a=d.getDate();10>a&&(a="0"+a);b=d.getMonth()+1;10>b&&(b="0"+b);d=d.getFullYear();10>d&&(d="0"+d);return b+"/"+a+"/"+d},GetToday:function(){var a=
new Date,b=a.getTime()+6E4*a.getTimezoneOffset(),d=new Date(b+36E5*g(a)),a=d.getDate();10>a&&(a="0"+a);b=d.getMonth()+1;10>b&&(b="0"+b);d=d.getFullYear();10>d&&(d="0"+d);return b+"/"+a+"/"+d},FormatDaysAgo:function(a){return a.toString().substr(1)},FormatDecimal:function(a){return 6>=a.toString().length?a.toFixed(2):1>=a.toString().split(".")[1].length?a.toFixed(2):a},FormatESScoreDecimal:function(a){return 2>=a.toString().length?a.toFixed(1):a},CurrencyMap:{AFN:"&#x60b;",ALL:"&#76;&#101;&#107;",
ANG:"&#402;",ARS:"&#36;",AUD:"&#36;",AWG:"&#402;",AZN:"&#1084;&#1072;&#1085;",BAM:"&#75;&#77;",BBD:"&#36;",BEF:"&#8355;",BGN:"&#1083;&#1074;",BMD:"&#36;",BND:"&#36;",BOB:"&#36;&#98;",BRC:"&#8354;",BRL:"&#82;&#36;",BSD:"&#36;",BWP:"&#80;",BYR:"&#112;&#46;",BZD:"&#66;&#90;&#36;",CAD:"&#36;",CHF:"&#67;&#72;&#70;",CLP:"&#36;",CNY:"&#xa5;",COP:"&#36;",CRC:"&#8353;",CUP:"&#8369;",CYP:"&#163;",CZK:"&#75;&#269;",DKK:"&#107;&#114;",DOP:"&#82;&#68;&#36;",EEK:"&#107;&#114;",EGP:"&#163;",ESP:"&#8359;",EUR:"&#8364;",
FJD:"&#36;",FKP:"&#163;",FRF:"&#8355;",GBP:"&#163;",GGP:"&#163;",GHC:"&#162;",GIP:"&#163;",GRD:"&#8367;",GTQ:"&#81;",GYD:"&#36;",HKD:"&#20803;",HNL:"&#76;",HRK:"&#107;&#110;",HUF:"&#70;&#116;",IDR:"&#82;&#112;",IEP:"&#163;",ILS:"&#8362;",IMP:"&#163;",INR:"&#x20B9;",IRR:"&#65020;",ISK:"&#107;&#114;",ITL:"&#8356;",JEP:"&#163;",JMD:"&#74;&#36;",JPY:"&#xa5;",KGS:"&#1083;&#1074;",KHR:"&#6107;",KPW:"&#8361;",KRW:"&#8361;",KYD:"&#36;",KZT:"&#1083;&#1074;",LAK:"&#8365;",LBP:"&#163;",LKR:"&#8360;",LRD:"&#36;",
LTL:"&#76;&#116;",LUF:"&#8355;",LVL:"&#76;&#115;",MKD:"&#1076;&#1077;&#1085;",MNT:"&#8366;",MTL:"&#76;&#109;",MUR:"&#8360;",MXN:"&#36;",MYR:"&#82;&#77;",MZN:"&#77;&#84;",NAD:"&#36;",NGN:"&#8358;",NIO:"&#67;&#36;",NLG:"&#402;",NOK:"&#107;&#114;",NPR:"&#8360;",NZD:"&#36;",OMR:"&#65020;",PAB:"&#66;&#47;&#46;",PEN:"&#83;&#47;&#46;",PHP:"&#80;&#104;&#112;",PKR:"&#8360;",PLN:"&#122;&#322;",PYG:"&#71;&#115;",QAR:"&#65020;",RON:"&#108;&#101;&#105;",RSD:"&#1044;&#1080;&#1085;&#46;",RUB:"&#1088;&#1091;&#1073;",
SAR:"&#65020;",SBD:"&#36;",SCR:"&#8360;",SEK:"&#107;&#114;",SGD:"&#36;",SHP:"&#163;",SKK:"&#83;&#73;&#84;",SOS:"&#83;",SRD:"&#36;",SVC:"&#36;",SYP:"&#163;",THB:"&#3647;",TRL:"&#8356;",TRY:"&#89;&#84;&#76;",TTD:"&#84;&#84;&#36;",TVD:"&#36;",TWD:"&#78;&#84;&#36;",UAH:"&#8372;",USD:"&#36;",UYU:"&#36;&#85;",UZS:"&#1083;&#1074;",VAL:"&#8356;",VEB:"&#66;&#115;",VND:"&#8363;",XCD:"&#36;",XEU:"&#8352;",YER:"&#65020;",ZAR:"&#82;",ZWD:"&#90;&#3;"}}))});
define("views/card-oppfinder-earnings-dates-view","jquery underscore views/base-view text!../templates/oppfinder-earnings-dates.html util/constants models/ajax-object-model models/oppfin-pagination-model models/oppfin-data-model".split(" "),function(a,b,g,c,e,d,h,f){var j=0,k=0,l=1,p=!0,m={},n,r,s={},v,A,w;return g.extend({events:{"click .oppfin-next":"next_oppfin_page","click .oppfin-prev":"previous_oppfin_page","click .oppfin-sc-card--page-number":"oppfin_page","click .oppfin-sc-card-esschip":"showESSModal",
"click .oppfin-sc-modal-close-icon":"hideESSModal"},template:b.template('<div class="oppfin-sc-nosecuritiescard--earnings-post"> <p class="opp-finder--medium-message">None of your securities have an upcoming earnings report date.</p><p class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/conferenceCalls.jhtml?tab=earnings" target="_top">Explore a full list of securities with upcoming earnings dates</a></p> </div>'),initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";
this.clickflag=0;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")})},previous_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)-1;A(k,p);0!==l&&a(".oppfin-sc-card--upcoming-earnings-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");1===parseInt(l)&&(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",
0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},next_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)+1;A(k,p);l<=k&&a(".oppfin-sc-card--upcoming-earnings-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},
oppfin_page:function(b){var c=a(b.currentTarget).parent(".oppfin-page");b.preventDefault();l=c.find("span").text();l==k?(A(k,!0),a(".oppfin-sc-card--upcoming-earnings-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)):(p=!1,a(".oppfin-sc-card--upcoming-earnings-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),1===
parseInt(l)?(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0)):parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},showESSModal:function(b){b.stopPropagation();var c=a(b.currentTarget);this._adjustESSIconPosition(c);c.hasClass("oppfin-sc-card--esschip-active")?this.hideESSInformation(b):(this.$(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active"),c.addClass("oppfin-sc-card--esschip-active"))},
hideESSModal:function(b){b.stopPropagation();a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},_adjustESSIconPosition:function(a){var b=a.position(),c=a.find(".oppfin-sc-card--esschip-bubble"),d=c.width()-80,d=b.left-9>d?d:b.left-9,b=b.top+25;a.find(".oppfin-sc-card--esschip-pointer-up").css("left",0<d?d:0);a.find(".oppfin-sc-card--esschip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},hideESSInformation:function(b){b=
a(b.target);!b.closest(".oppfin-sc-card--esschip-bubble").length&&!b.hasClass(".oppfin-sc-card--esschip-bubble")&&a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){m={};k=j=0;n=[];l=1;s={};var e=this,g=a("#oppfin-positions").attr("data-oppfinPositions"),g=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"2.0",daysPast:"0",daysFuture:"365",
postTypes:"earnings",positions:g},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();a(".oppfin-sc-card--upcoming-earnings-container").empty();a(".oppfin-sc-card--dividend-distributions-container").empty();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty();a(".oppfin-sc-card--ess-change-container").empty()},success:function(d){if(jQuery.isEmptyObject(d.opportunity.opportunityDetails))d.opportunity.hasOwnProperty("sysMsgs")?
900===parseInt(d.opportunity.sysMsgs.sysMsg[0].code)?(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--upcoming-earnings-container").empty().append(e.template)):(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--upcoming-earnings-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')):(a(".oppfin-sc-card--help-icon").hide(),
a(".oppfin-sc-card--upcoming-earnings-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>'));else{for(var g=0,w=d.opportunity.opportunityDetails.length;g<w;g++)d.opportunity.opportunityDetails[g].hasOwnProperty("earnings")&&(j+=d.opportunity.opportunityDetails[g].earnings.length,k=Math.ceil(j/5));m.data=h.CreateEarningsMap(d,k);A=function(a,
b){2<=a&&4>=a?n=h.BuildBasicPaginationBar(a):5<=a&&(n=h.BuildPaginationBarWithEllipsis(l,a,b))};A(k,p);v=function(a){s={data:m.data[a-1],pages:n,formatData:f};return r=b.template(c,{modelData:s})};a(".oppfin-sc-card--upcoming-earnings-container").empty().append(v(l));1===parseInt(k)&&a(".oppfin-sc-card--pagination").hide();a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");a(".oppfin-prev").hide();a("#oppfin-1").css("padding-left",0);a(".oppfin-sc-card--help-icon").show()}},
error:function(){a(".oppfin-sc-card--help-icon").hide();a(".oppfin-sc-card--upcoming-earnings-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')},complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});d.addAjaxObjArray(g)}})});
define("text!templates/oppfinder-dividend-exdates.html",[],function(){return'<div class="oppfin-sc-card--dividends-post">\n    <table class="oppfin-sc-card--grid oppfin-sc-card--dividends-list">\n        <colgroup class="oppfin-sc-card--grid-col-symbol"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-report-date"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-price"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-info-ess"></colgroup>\n        <thead>\n        <tr>\n            <th class="oppfin-sc-card--grid-col-text symbol">Symbol</th>\n            <th class="oppfin-sc-card--grid-col-text">\n                <span class="oppfin-sc-card--grid-col-text-header-dividendexdate">Dividend</span>\n                <span class="oppfin-sc-card--grid-col-text-header-dividendexdate">Ex-Date</span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text lastpricechange">\n                <span class="oppfin-sc-card--grid-col-text-header-lastprice">Last Price</span>\n                <span class="oppfin-sc-card--grid-col-text-header-percentchange">% Change</span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">AS OF <%= modelData.formatData.FormatDate(modelData.data.result[0].lastPriceDate) %></span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text ess">\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Equity</span>\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Summary Score</span>\n                <span class="oppfin-sc-card--grid-col-text-header-provider">Provided by <a href="<%=envMap.MODRESEARCH_URL_VALUE%>/fidelity/research/reports/release2/Research/StarMine.asp" class="oppfin-sc-card--grid-link" target="_top">StarMine</a></span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">\n                        <% for(var i = 0; i < modelData.data.result.length; i++){ %>\n                        <%\n                        if(modelData.data.result[i].hasOwnProperty(\'summaryScoreDate\')) {\n                        %>\n                        AS OF <%= modelData.formatData.FormatReportDate(modelData.data.result[i].summaryScoreDate) %>\n                        <% break; %>\n                        <%\n                        } else {\n                        %>\n                        <% if((i!=0) && (modelData.data.result.length != 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% if((i==0) && (modelData.data.result.length == 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% } %>\n                        <% } %>\n                 </span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <% _.each(modelData.data.result,function(i,key,list){ %>\n        <tr>\n            <td class="oppfin-sc-card--grid-col-text">\n                <% if(i.days >= \'0\' && i.days <= \'3\'){ %>\n                    <div class="oppfin-sc-card-indicator"></div>\n                <% } %>\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/snapshot.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <span class="oppfin-sc-card--grid-col-text symbol"><%= i.securityDetail.symbol %></span>\n                    <span class="oppfin-sc-card--grid-col-text-security" title="<%=i.securityDetail.secDesc%>"><%=i.securityDetail.secDesc%></span>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-text date">\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/evaluate/fundamentals/dividends.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <% if(i.days == \'0\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-until">Today</span>\n                    <% } %>\n                    <% if(i.days == \'1\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-until">In <%= i.days %> Day</span>\n                    <% } %>\n                    <% if((i.days != \'0\') && (i.days != \'1\') && (i.days.toString().charAt(0) != \'-\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-until">In <%= i.days %> Days</span>\n                    <% } %>\n                    <% if((i.days != \'0\') && (i.days != \'1\') && (i.days.toString().charAt(0) == \'-\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-until"> <%= modelData.formatData.FormatDaysAgo(i.days) %> Days Ago</span>\n                    <% } %>\n                    <span class="oppfin-sc-card--grid-col-text-date"><%= modelData.formatData.FormatReportDate(i.date) %></span>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-text lastpricechange">\n                <% if((i.changeSinceClosingPct.toString().charAt(0) != \'-\') && (i.changeSinceClosingPct != \'0.00\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice increasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange increasing">(+<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct.toString().charAt(0)) == \'-\'){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice decreasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange decreasing">(<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct == \'0.00\') || (i.changeSinceClosingPct == \'0\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange">(0.00%)</span>\n                <% } %>\n            </td>\n            <td class="oppfin-sc-card--grid-col-ess">\n                <% if(i.hasOwnProperty(\'summaryRating\')){ %>\n                <div class="oppfin-sc-card-esschip" title="click for equity summary score">\n                    <% if(i.summaryRating == \'Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-underperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-sell"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-outperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-buy"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Neutral\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-neutral"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-underlying">\n                            <% if(i.hasOwnProperty(\'buyCount\') && i.buyCount != 0){ %>\n                                <% for(var x=1;x<= i.buyCount;x++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-buy"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'outperformCount\') && i.outperformCount != 0){ %>\n                                <% for(var j=1;j<= i.outperformCount;j++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-outperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'neutralCount\') && i.neutralCount != 0){ %>\n                                <% for(var k=1;k<= i.neutralCount;k++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-neutral"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'underperformCount\') && i.underperformCount != 0){ %>\n                                <% for(var l=1;l<= i.underperformCount;l++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-underperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'sellCount\') && i.sellCount != 0){ %>\n                                <% for(var m=1;m<= i.sellCount;m++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-sell"></span>\n                                <% } %>\n                            <% } %>\n                        </span>\n                    <div class="oppfin-sc-card--esschip-bubble">\n                        <div class="oppfin-sc-card--esschip-wrapper">\n                            <div class="oppfin-sc-card--esschip-info">\n                                <div class="oppfin-sc-modal-close-icon" role="button" tabindex="0">\n                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAVdEVYdENyZWF0aW9uIFRpbWUANi8xMS8xMgh2CcgAAACkSURBVDiNrZO9EcMgDIU/sYBXyQiM4lRqGcWtqmQUj+BVvEEakfMlIHxxVOnQ+zmeQADMbAYWIKvqRlBmdgNWoKjqU5z88PkeiRzIkx/dkzvXmoDVgSMywJKA7M5dkQ55B7KMAN43Z6q6yQkXGmfvnOQw6Ikc6ytk+UQEIs0NpY7T6frfFS6FeGmNEbm6RJg0IgN4n2m82ASUiDwQKTWDmR+/8wt8nHU8re6bGQAAAABJRU5ErkJggg==" width="16" height="16"/>\n                                </div>\n                                <div class="oppfin-sc-modal-rating">\n                                    <% if(i.summaryRating == \'Bearish\'){ %>\n                                        <div class="tab color4">Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                                        <div class="tab color5">Very Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Bullish\'){ %>\n                                        <div class="tab color2">Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                                        <div class="tab color1">Very Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Neutral\'){ %>\n                                        <div class="tab color3">Neutral</div>\n                                    <% } %>\n                                        <div class="data"><%= i.summaryScore %></div>\n                                </div>\n                                <div class="oppfin-sc-modal-legend">\n                                    <div class="row_title">Underlying Analyst Opinions</div>\n                                    <div class="row">\n                                        <div class="num"><%= i.buyCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var a=1;a<= i.buyCount;a++){ %>\n                                                <div class="oppfin-ess-bar-buy"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Buy</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.outperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var b=1;b<= i.outperformCount;b++){ %>\n                                                <div class="oppfin-ess-bar-outperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Outperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.neutralCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var c=1;c<= i.neutralCount;c++){ %>\n                                                <div class="oppfin-ess-bar-neutral"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Neutral</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.underperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var d=1;d<= i.underperformCount;d++){ %>\n                                                <div class="oppfin-ess-bar-underperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Underperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.sellCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var e=1;e<= i.sellCount;e++){ %>\n                                                <div class="oppfin-ess-bar-sell"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Sell</div>\n                                    </div>\n                                    <div class="row_links"><a onclick="javascript:void(0);" href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" title="view details" target="_top">View details</a> | <a title="methodology" onclick="javascript:void(0);" href="javascript:popWinCustomAtPosition(\'https://scs.fidelity.com/help/research/learn_er_glossary_1.shtml#equitysummaryscore\',820,795,\'yes\',\'yes\')">Methodology</a></div>\n                                </div>\n                                <div class="oppfin-sc-card--esschip-pointer-up"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <% } %>\n                <% if(!i.hasOwnProperty(\'summaryRating\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-ess-none">--</span>\n                <% } %>\n            </td>\n        </tr>\n        <% }) %>\n        </tbody>\n    </table>\n    <div class="oppfin-sc-card--pagination">\n        <div id="oppfin-sc-card--pagination-bar">\n            <a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>\n            <% _.each(modelData.pages,function(i,key,list){ %>\n            <% if(i != \'...\'){ %>\n            <a id="oppfin-<%= i%>" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% if(i == \'...\'){ %>\n            <a id="oppfin-ellipsisPage" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% }) %>\n            <a id="oppfin-pageNext" class="oppfin-next">Next</a>\n            <div class="layout-clear-both"></div>\n        </div>\n    </div>\n    <p class="oppfin-sc-card--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/conferenceCalls.jhtml?tab=dividends" target="_top">Explore a full list of upcoming dividend ex-dates</a>\n    </p></div>'});
define("views/card-oppfinder-dividends-exdates-view","jquery underscore views/base-view text!../templates/oppfinder-dividend-exdates.html util/constants models/ajax-object-model models/oppfin-pagination-model models/oppfin-data-model".split(" "),function(a,b,g,c,e,d,h,f){var j=0,k=0,l=1,p=!0,m={},n,r,s={},v,A,w;return g.extend({events:{"click .oppfin-next":"next_oppfin_page","click .oppfin-prev":"previous_oppfin_page","click .oppfin-sc-card--page-number":"oppfin_page","click .oppfin-sc-card-esschip":"showESSModal",
"click .oppfin-sc-modal-close-icon":"hideESSModal"},template:b.template('<div class="oppfin-sc-nosecuritiescard--dividends-post"> <p class="opp-finder--medium-message">None of your securities have an upcoming dividend ex-date.</p><p class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/conferenceCalls.jhtml?tab=dividends" target="_top">Explore a full list of upcoming dividend ex-dates</a></p></div>'),initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";
this.clickflag=0;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")})},previous_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)-1;A(k,p);0!==l&&a(".oppfin-sc-card--dividend-distributions-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");1===parseInt(l)&&(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",
0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},next_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)+1;A(k,p);l<=k&&a(".oppfin-sc-card--dividend-distributions-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},
oppfin_page:function(b){var c=a(b.currentTarget).parent(".oppfin-page");b.preventDefault();l=c.find("span").text();l==k?(A(k,!0),a(".oppfin-sc-card--dividend-distributions-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)):(p=!1,a(".oppfin-sc-card--dividend-distributions-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),
1===parseInt(l)?(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0)):parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},showESSModal:function(b){b.stopPropagation();var c=a(b.currentTarget);this._adjustESSIconPosition(c);c.hasClass("oppfin-sc-card--esschip-active")?this.hideESSInformation(b):(this.$(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active"),
c.addClass("oppfin-sc-card--esschip-active"))},hideESSModal:function(b){b.stopPropagation();a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},_adjustESSIconPosition:function(a){var b=a.position(),c=a.find(".oppfin-sc-card--esschip-bubble"),d=c.width()-80,d=b.left-9>d?d:b.left-9,b=b.top+25;a.find(".oppfin-sc-card--esschip-pointer-up").css("left",0<d?d:0);a.find(".oppfin-sc-card--esschip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},
hideESSInformation:function(b){b=a(b.target);!b.closest(".oppfin-sc-card--esschip-bubble").length&&!b.hasClass(".oppfin-sc-card--esschip-bubble")&&a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){m={};k=j=0;n=[];l=1;s={};var e=this,g=a("#oppfin-positions").attr("data-oppfinPositions"),g=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"2.0",
daysPast:"0",daysFuture:"365",postTypes:"dividends",positions:g},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();a(".oppfin-sc-card--upcoming-earnings-container").empty();a(".oppfin-sc-card--dividends-exdates-container").empty();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty();a(".oppfin-sc-card--ess-change-container").empty()},success:function(d){if(jQuery.isEmptyObject(d.opportunity.opportunityDetails))d.opportunity.hasOwnProperty("sysMsgs")?
900===parseInt(d.opportunity.sysMsgs.sysMsg[0].code)?(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--dividend-distributions-container").empty().append(e.template)):(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--dividend-distributions-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')):(a(".oppfin-sc-card--help-icon").hide(),
a(".oppfin-sc-card--dividend-distributions-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>'));else{for(var g=0,w=d.opportunity.opportunityDetails.length;g<w;g++)d.opportunity.opportunityDetails[g].hasOwnProperty("dividends")&&(j+=d.opportunity.opportunityDetails[g].dividends.length,k=Math.ceil(j/5));m.data=h.CreateDividendsMap(d,k);A=function(a,
b){2<=a&&4>=a?n=h.BuildBasicPaginationBar(a):5<=a&&(n=h.BuildPaginationBarWithEllipsis(l,a,b))};A(k,p);v=function(a){s={data:m.data[a-1],pages:n,formatData:f};return r=b.template(c,{modelData:s})};a(".oppfin-sc-card--dividend-distributions-container").empty().append(v(l));1===parseInt(k)&&a(".oppfin-sc-card--pagination").hide();a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");a(".oppfin-prev").hide();a("#oppfin-1").css("padding-left",0);a(".oppfin-sc-card--help-icon").show()}},
error:function(){a(".oppfin-sc-card--help-icon").hide();a(".oppfin-sc-card--dividend-distributions-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')},complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});d.addAjaxObjArray(g)}})});
define("text!templates/oppfinder-ess-change.html",[],function(){return'<div class="oppfin-sc-card--esschange-post">\n    <table class="oppfin-sc-card--grid oppfin-sc-card--esschange-list">\n        <colgroup class="oppfin-sc-card--grid-col-symbol"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-esschange"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-info-ess"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-price"></colgroup>\n        <thead>\n        <tr>\n            <th class="oppfin-sc-card--grid-col-text symbol">Symbol</th>\n            <th class="oppfin-sc-card--grid-col-text">\n                <span class="oppfin-sc-card--grid-col-text-header-esschange">Equity</span>\n                <span class="oppfin-sc-card--grid-col-text-header-esschange">Summary</span>\n                <span class="oppfin-sc-card--grid-col-text-header-esschange">Score 1-Month</span>\n                <span class="oppfin-sc-card--grid-col-text-header-esschange">Change</span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text ess">\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Equity</span>\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Summary Score</span>\n                <span class="oppfin-sc-card--grid-col-text-header-provider">Provided by <a href="<%=envMap.MODRESEARCH_URL_VALUE%>/fidelity/research/reports/release2/Research/StarMine.asp" class="oppfin-sc-card--grid-link" target="_top">StarMine</a></span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">\n                        <% for(var i = 0; i < modelData.data.result.length; i++){ %>\n                        <%\n                        if(modelData.data.result[i].hasOwnProperty(\'summaryScoreDate\')) {\n                        %>\n                        AS OF <%= modelData.formatData.FormatReportDate(modelData.data.result[i].summaryScoreDate) %>\n                        <% break; %>\n                        <%\n                        } else {\n                        %>\n                        <% if((i!=0) && (modelData.data.result.length != 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% if((i==0) && (modelData.data.result.length == 1)){ %>\n                        AS OF <%= modelData.formatData.GetToday() %>\n                        <% break; %>\n                        <% } %>\n                        <% } %>\n                        <% } %>\n                </span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text lastpricechange">\n                <span class="oppfin-sc-card--grid-col-text-header-lastprice">Last Price</span>\n                <span class="oppfin-sc-card--grid-col-text-header-percentchange">% Change</span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">AS OF  <%= modelData.formatData.FormatDate(modelData.data.result[0].lastPriceDate)%></span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <% _.each(modelData.data.result,function(i,key,list){ %>\n        <tr>\n            <td class="oppfin-sc-card--grid-col-text">\n                <% if(Math.abs(i.summaryScore1MChange) >= 2.0){ %>\n                <div class="oppfin-sc-card-indicator"></div>\n                <% } %>\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/snapshot.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <span class="oppfin-sc-card--grid-col-text symbol"><%= i.securityDetail.symbol %></span>\n                    <span class="oppfin-sc-card--grid-col-text-security" title="<%=i.securityDetail.secDesc%>"><%=i.securityDetail.secDesc%></span>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-text esschange">\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <% if((i.summaryScore1MChange.toString().charAt(0) != \'-\' && i.summaryScore1MChange != 0.0) || (i.summaryScore1MChange.toString().charAt(0) != \'-\' && i.summaryScore1MChange != 0)){ %>\n                        <span class="oppfin-sc-card--grid-col-text-indicator increasing">\n\t\t                <img src="data:image/gif;base64,R0lGODlhCQAKAJEAAAAAAP///wCAAP///yH5BAEAAAMALAAAAAAJAAoAAAIRnCenworcDJxvQkmPXRlfnRUAOw==" width="9" height="10" alt="down">+<%= modelData.formatData.FormatESScoreDecimal(i.summaryScore1MChange) %>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryScore1MChange.toString().charAt(0) == \'-\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-indicator decreasing">\n\t\t                <img src="data:image/gif;base64,R0lGODlhCQAKAJEAAAAAAP///8wAAP///yH5BAEAAAMALAAAAAAJAAoAAAIS3IRolrot1mkSMpimvbk6eUgFADs=" width="9" height="10" alt="down"><%= modelData.formatData.FormatESScoreDecimal(i.summaryScore1MChange) %>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryScore1MChange.toString() == \'0.0\' || i.summaryScore1MChange.toString() == \'0\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-indicator no-change"><%= modelData.formatData.FormatESScoreDecimal(i.summaryScore1MChange) %></span>\n                    <% } %>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-ess">\n                <% if(i.hasOwnProperty(\'summaryRating\')){ %>\n                <div class="oppfin-sc-card-esschip" title="click for equity summary score">\n                    <% if(i.summaryRating == \'Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-underperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-sell"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-outperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-buy"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Neutral\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-neutral"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-underlying">\n                            <% if(i.hasOwnProperty(\'buyCount\') && i.buyCount != 0){ %>\n                                <% for(var x=1;x<= i.buyCount;x++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-buy"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'outperformCount\') && i.outperformCount != 0){ %>\n                                <% for(var j=1;j<= i.outperformCount;j++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-outperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'neutralCount\') && i.neutralCount != 0){ %>\n                                <% for(var k=1;k<= i.neutralCount;k++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-neutral"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'underperformCount\') && i.underperformCount != 0){ %>\n                                <% for(var l=1;l<= i.underperformCount;l++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-underperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'sellCount\') && i.sellCount != 0){ %>\n                                <% for(var m=1;m<= i.sellCount;m++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-sell"></span>\n                                <% } %>\n                            <% } %>\n                        </span>\n                    <div class="oppfin-sc-card--esschip-bubble">\n                        <div class="oppfin-sc-card--esschip-wrapper">\n                            <div class="oppfin-sc-card--esschip-info">\n                                <div class="oppfin-sc-modal-close-icon" role="button" tabindex="0">\n                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAVdEVYdENyZWF0aW9uIFRpbWUANi8xMS8xMgh2CcgAAACkSURBVDiNrZO9EcMgDIU/sYBXyQiM4lRqGcWtqmQUj+BVvEEakfMlIHxxVOnQ+zmeQADMbAYWIKvqRlBmdgNWoKjqU5z88PkeiRzIkx/dkzvXmoDVgSMywJKA7M5dkQ55B7KMAN43Z6q6yQkXGmfvnOQw6Ikc6ytk+UQEIs0NpY7T6frfFS6FeGmNEbm6RJg0IgN4n2m82ASUiDwQKTWDmR+/8wt8nHU8re6bGQAAAABJRU5ErkJggg==" width="16" height="16"/>\n                                </div>\n                                <div class="oppfin-sc-modal-rating">\n                                    <% if(i.summaryRating == \'Bearish\'){ %>\n                                        <div class="tab color4">Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                                        <div class="tab color5">Very Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Bullish\'){ %>\n                                        <div class="tab color2">Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                                        <div class="tab color1">Very Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Neutral\'){ %>\n                                        <div class="tab color3">Neutral</div>\n                                    <% } %>\n                                        <div class="data"><%= i.summaryScore %></div>\n                                </div>\n                                <div class="oppfin-sc-modal-legend">\n                                    <div class="row_title">Underlying Analyst Opinions</div>\n                                    <div class="row">\n                                        <div class="num"><%= i.buyCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var a=1;a<= i.buyCount;a++){ %>\n                                                <div class="oppfin-ess-bar-buy"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Buy</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.outperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var b=1;b<= i.outperformCount;b++){ %>\n                                                <div class="oppfin-ess-bar-outperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Outperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.neutralCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var c=1;c<= i.neutralCount;c++){ %>\n                                                <div class="oppfin-ess-bar-neutral"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Neutral</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.underperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var d=1;d<= i.underperformCount;d++){ %>\n                                                <div class="oppfin-ess-bar-underperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Underperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.sellCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var e=1;e<= i.sellCount;e++){ %>\n                                                <div class="oppfin-ess-bar-sell"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Sell</div>\n                                    </div>\n                                    <div class="row_links"><a onclick="javascript:void(0);" href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" title="view details" target="_top">View details</a> | <a title="methodology" onclick="javascript:void(0);" href="javascript:popWinCustomAtPosition(\'https://scs.fidelity.com/help/research/learn_er_glossary_1.shtml#equitysummaryscore\',820,795,\'yes\',\'yes\')">Methodology</a></div>\n                                </div>\n                                <div class="oppfin-sc-card--esschip-pointer-up"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <% } %>\n                <% if(!i.hasOwnProperty(\'summaryRating\')){ %>\n                <span class="oppfin-sc-card--grid-col-text-ess-none">--</span>\n                <% } %>\n            </td>\n\n            <td class="oppfin-sc-card--grid-col-text lastpricechange">\n                <% if((i.changeSinceClosingPct.toString().charAt(0) != \'-\') && (i.changeSinceClosingPct != \'0.00\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice increasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange increasing">(+<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct.toString().charAt(0)) == \'-\'){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice decreasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange decreasing">(<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct == \'0.00\') || (i.changeSinceClosingPct == \'0\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange">(0.00%)</span>\n                <% } %>\n            </td>\n        </tr>\n        <% }) %>\n        </tbody>\n    </table>\n    <div class="oppfin-sc-card--pagination">\n        <div id="oppfin-sc-card--pagination-bar">\n            <a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>\n            <% _.each(modelData.pages,function(i,key,list){ %>\n            <% if(i != \'...\'){ %>\n            <a id="oppfin-<%= i%>" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% if(i == \'...\'){ %>\n            <a id="oppfin-ellipsisPage" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% }) %>\n            <a id="oppfin-pageNext" class="oppfin-next">Next</a>\n            <div class="layout-clear-both"></div>\n        </div>\n    </div>\n    <p class="oppfin-sc-card--viewmore"><a href="<%=envMap.MODRESEARCH_URL_VALUE%>/Screener?inputs=SSS_7C29AA884402D61185F03A36961406EC" target="_top">Explore a list of stocks sorted by their Equity Summary Score</a>\n    </p>\n</div>'});
define("views/card-oppfinder-ess-change-view","jquery underscore views/base-view text!../templates/oppfinder-ess-change.html util/constants models/ajax-object-model models/oppfin-pagination-model models/oppfin-data-model".split(" "),function(a,b,g,c,e,d,h,f){var j=0,k=0,l=1,p=!0,m={},n,r,s,v,A,w;return g.extend({events:{"click .oppfin-next":"next_oppfin_page","click .oppfin-prev":"previous_oppfin_page","click .oppfin-sc-card--page-number":"oppfin_page","click .oppfin-sc-card-esschip":"showESSModal",
"click .oppfin-sc-modal-close-icon":"hideESSModal"},template:b.template('<div class="oppfin-sc-nosecuritiescard--esschange-post"> <p class="opp-finder--medium-message">None of your stocks have an Equity Summary Score.</p><p class="opp-finder--medium-message">The Equity Summary Score (ESS) is a consolidated view of ratings from a number of independent research providers on Fidelity.com. A change in Equity Summary Score reflects how the current ratings for the stock may have shifted over the past month.</p> <p class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.MODRESEARCH_URL_VALUE%>/Screener?inputs=SSS_7C29AA884402D61185F03A36961406EC" target="_top">Explore a list of stocks sorted by their Equity Summary Score</a></p> </div>'),
initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";this.clickflag=0;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")})},previous_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)-1;A(k,p);0!==l&&a(".oppfin-sc-card--ess-change-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");1===parseInt(l)&&
(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},next_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)+1;A(k,p);l<=k&&a(".oppfin-sc-card--ess-change-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",
0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},oppfin_page:function(b){var c=a(b.currentTarget).parent(".oppfin-page");b.preventDefault();l=c.find("span").text();l==k?(A(k,!0),a(".oppfin-sc-card--ess-change-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)):(p=!1,a(".oppfin-sc-card--ess-change-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+
l).addClass("selected"),1===parseInt(l)?(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0)):parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},showESSModal:function(b){b.stopPropagation();var c=a(b.currentTarget);this._adjustESSIconPosition(c);c.hasClass("oppfin-sc-card--esschip-active")?this.hideESSInformation(b):(this.$(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active"),
c.addClass("oppfin-sc-card--esschip-active"))},hideESSModal:function(b){b.stopPropagation();a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},_adjustESSIconPosition:function(a){var b=a.position(),c=a.find(".oppfin-sc-card--esschip-bubble"),d=c.width()-200,d=b.left-9>d?d:b.left-9,b=b.top+25;a.find(".oppfin-sc-card--esschip-pointer-up").css("left",0<d?d:0);a.find(".oppfin-sc-card--esschip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},
hideESSInformation:function(b){b=a(b.target);!b.closest(".oppfin-sc-card--esschip-bubble").length&&!b.hasClass(".oppfin-sc-card--esschip-bubble")&&a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){m={};k=j=0;n=[];l=1;s={};var e=this,g=a("#oppfin-positions").attr("data-oppfinPositions"),g=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"0.0",
daysPast:"0",daysFuture:"0",postTypes:"essChange",positions:g},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();a(".oppfin-sc-card--upcoming-earnings-container").empty();a(".oppfin-sc-card--dividend-distributions-container").empty();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty();a(".oppfin-sc-card--ess-change-container").empty()},
success:function(d){if(jQuery.isEmptyObject(d.opportunity.opportunityDetails))d.opportunity.hasOwnProperty("sysMsgs")?900===parseInt(d.opportunity.sysMsgs.sysMsg[0].code)?(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--ess-change-container").empty().append(e.template)):(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--ess-change-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')):
(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--ess-change-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>'));else{for(var g=0,w=d.opportunity.opportunityDetails.length;g<w;g++)d.opportunity.opportunityDetails[g].hasOwnProperty("essChange")&&(j+=d.opportunity.opportunityDetails[g].essChange.length,k=Math.ceil(j/5));m.data=h.CreateESSchangeMap(d,
k);A=function(a,b){2<=a&&4>=a?n=h.BuildBasicPaginationBar(a):5<=a&&(n=h.BuildPaginationBarWithEllipsis(l,a,b))};A(k,p);v=function(a){s={data:m.data[a-1],pages:n,formatData:f};return r=b.template(c,{modelData:s})};a(".oppfin-sc-card--ess-change-container").empty().append(v(l));1===parseInt(k)&&a(".oppfin-sc-card--pagination").hide();a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");a(".oppfin-prev").hide();a("#oppfin-1").css("padding-left",0);a(".oppfin-sc-card--help-icon").show()}},
error:function(){a(".oppfin-sc-card--help-icon").hide();a(".oppfin-sc-card--ess-change-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')},complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});d.addAjaxObjArray(g)}})});
define("text!templates/oppfinder-fiftytwoweek-highs.html",[],function(){return'<div class="oppfin-sc-card--fiftytwoweek-post">\n    <table class="oppfin-sc-card--grid oppfin-sc-card--fiftytwoweek-list">\n        <colgroup class="oppfin-sc-card--grid-col-symbol"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-range"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-price"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-info-ess"></colgroup>\n        <thead>\n        <tr>\n            <th class="oppfin-sc-card--grid-col-text symbol">Symbol</th>\n            <th class="oppfin-sc-card--grid-col-text fiftytwoweek">52-Week Range</th>\n            <th class="oppfin-sc-card--grid-col-text lastpricechange">\n                <span class="oppfin-sc-card--grid-col-text-header-lastprice">Last Price</span>\n                <span class="oppfin-sc-card--grid-col-text-header-percentchange">% Change</span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">AS OF  <%= modelData.formatData.FormatDate(modelData.data.result[0].lastPriceDate) %></span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text ess">\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Equity</span>\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Summary Score</span>\n\t\t\t\t\t\t\t<span class="oppfin-sc-card--grid-col-text-header-provider">\n\t\t\t\t\t\t\t\tProvided by <a href="<%=envMap.MODRESEARCH_URL_VALUE%>/fidelity/research/reports/release2/Research/StarMine.asp" class="oppfin-sc-card--grid-link" target="_top">StarMine</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="oppfin-sc-card--grid-col-text-header-asofdate">\n                                <% for(var i = 0; i < modelData.data.result.length; i++){ %>\n                                <%\n                                if(modelData.data.result[i].hasOwnProperty(\'summaryScoreDate\')) {\n                                %>\n                                AS OF <%= modelData.formatData.FormatReportDate(modelData.data.result[i].summaryScoreDate) %>\n                                <% break; %>\n                                <%\n                                } else {\n                                %>\n                                <% if((i!=0) && (modelData.data.result.length != 1)){ %>\n                                AS OF <%= modelData.formatData.GetToday() %>\n                                <% break; %>\n                                <% } %>\n                                <% if((i==0) && (modelData.data.result.length == 1)){ %>\n                                 AS OF <%= modelData.formatData.GetToday() %>\n                                <% break; %>\n                                <% } %>\n                                <% } %>\n                                <% } %>\n\t\t\t\t\t\t\t</span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <% _.each(modelData.data.result,function(i,key,list){ %>\n        <tr>\n            <td class="oppfin-sc-card--grid-col-text">\n                <% if(i.days >= \'0\' && i.days <= \'3\'){ %>\n                    <div class="oppfin-sc-card-indicator-fiftyweek"></div>\n                <% } %>\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/snapshot.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <span class="oppfin-sc-card--grid-col-text symbol"><%= i.securityDetail.symbol %></span>\n                    <span class="oppfin-sc-card--grid-col-text-security" title="<%=i.securityDetail.secDesc%>"><%=i.securityDetail.secDesc%></span>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-barchart-horizontal">\n                <div class="highlowrange">\n                    <div class="highlowrange--bar">\n                        <div class="highlowrange--divider highlowrange--divider-quarter"></div>\n                        <div class="highlowrange--divider highlowrange--divider-half"></div>\n                        <div class="highlowrange--divider highlowrange--divider-three-quarter"></div>\n                    </div>\n                    <div class="highlowrange--marker-offset">\n                        <div class="highlowrange--marker" title="<%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %>" style="left:<%= i.highPct %>%">\n                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQYV2M0Cm/4z4AHMI4MBQBAcxBJ3UhjJQAAAABJRU5ErkJggg==" class="highlowrange--marker-forie" width="8" height="8">\n                        </div>\n                    </div>\n                    <div class="highlowrange--text">\n                        <div class="highlowrange--text-low"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.low) %></div>\n                        <div class="highlowrange--text-high"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.high) %></div>\n                    </div>\n                    <% if(i.days == \'0\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago">TODAY</span>\n                    <% } %>\n                    <% if(i.days == \'-1\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago"><%= modelData.formatData.FormatDaysAgo(i.days) %> DAY AGO</span>\n                    <% } %>\n                    <% if((i.days != \'0\') && (i.days != \'-1\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago"><%= modelData.formatData.FormatDaysAgo(i.days) %> DAYS AGO</span>\n                    <% } %>\n                </div>\n            </td>\n            <td class="oppfin-sc-card--grid-col-text lastpricechange">\n                <% if((i.changeSinceClosingPct.toString().charAt(0) != \'-\') && (i.changeSinceClosingPct != \'0.00\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice increasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange increasing">(+<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct.toString().charAt(0))==\'-\'){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice decreasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange decreasing">(<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct == \'0.00\') || (i.changeSinceClosingPct == \'0\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange">(0.00%)</span>\n                <% } %>\n            </td>\n            <td class="oppfin-sc-card--grid-col-ess">\n                <% if(i.hasOwnProperty(\'summaryRating\')){ %>\n                <div class="oppfin-sc-card-esschip" title="click for equity summary score">\n                    <% if(i.summaryRating == \'Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-underperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-sell"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-outperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-buy"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Neutral\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-neutral"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-underlying">\n                            <% if(i.hasOwnProperty(\'buyCount\') && i.buyCount != 0){ %>\n                                <% for(var x=1;x<= i.buyCount;x++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-buy"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'outperformCount\') && i.outperformCount != 0){ %>\n                                <% for(var j=1;j<= i.outperformCount;j++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-outperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'neutralCount\') && i.neutralCount != 0){ %>\n                                <% for(var k=1;k<= i.neutralCount;k++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-neutral"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'underperformCount\') && i.underperformCount != 0){ %>\n                                <% for(var l=1;l<= i.underperformCount;l++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-underperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'sellCount\') && i.sellCount != 0){ %>\n                                <% for(var m=1;m<= i.sellCount;m++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-sell"></span>\n                                <% } %>\n                            <% } %>\n                        </span>\n                    <div class="oppfin-sc-card--esschip-bubble">\n                        <div class="oppfin-sc-card--esschip-wrapper">\n                            <div class="oppfin-sc-card--esschip-info">\n                                <div class="oppfin-sc-modal-close-icon" role="button" tabindex="0">\n                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAVdEVYdENyZWF0aW9uIFRpbWUANi8xMS8xMgh2CcgAAACkSURBVDiNrZO9EcMgDIU/sYBXyQiM4lRqGcWtqmQUj+BVvEEakfMlIHxxVOnQ+zmeQADMbAYWIKvqRlBmdgNWoKjqU5z88PkeiRzIkx/dkzvXmoDVgSMywJKA7M5dkQ55B7KMAN43Z6q6yQkXGmfvnOQw6Ikc6ytk+UQEIs0NpY7T6frfFS6FeGmNEbm6RJg0IgN4n2m82ASUiDwQKTWDmR+/8wt8nHU8re6bGQAAAABJRU5ErkJggg==" width="16" height="16"/>\n                                </div>\n                                <div class="oppfin-sc-modal-rating">\n                                    <% if(i.summaryRating == \'Bearish\'){ %>\n                                        <div class="tab color4">Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                                        <div class="tab color5">Very Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Bullish\'){ %>\n                                        <div class="tab color2">Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                                        <div class="tab color1">Very Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Neutral\'){ %>\n                                        <div class="tab color3">Neutral</div>\n                                    <% } %>\n                                        <div class="data"><%= i.summaryScore %></div>\n                                </div>\n                                <div class="oppfin-sc-modal-legend">\n                                    <div class="row_title">Underlying Analyst Opinions</div>\n                                    <div class="row">\n                                        <div class="num"><%= i.buyCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var a=1;a<= i.buyCount;a++){ %>\n                                                <div class="oppfin-ess-bar-buy"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Buy</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.outperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var b=1;b<= i.outperformCount;b++){ %>\n                                                <div class="oppfin-ess-bar-outperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Outperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.neutralCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var c=1;c<= i.neutralCount;c++){ %>\n                                                <div class="oppfin-ess-bar-neutral"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Neutral</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.underperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var d=1;d<= i.underperformCount;d++){ %>\n                                                <div class="oppfin-ess-bar-underperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Underperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.sellCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var e=1;e<= i.sellCount;e++){ %>\n                                                <div class="oppfin-ess-bar-sell"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Sell</div>\n                                    </div>\n                                    <div class="row_links"><a onclick="javascript:void(0);" href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" title="view details" target="_top">View details</a> | <a title="methodology" onclick="javascript:void(0);" href="javascript:popWinCustomAtPosition(\'https://scs.fidelity.com/help/research/learn_er_glossary_1.shtml#equitysummaryscore\',820,795,\'yes\',\'yes\')">Methodology</a></div>\n                                </div>\n                                <div class="oppfin-sc-card--esschip-pointer-up"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <% } %>\n                <% if(!i.hasOwnProperty(\'summaryRating\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-ess-none">--</span>\n                <% } %>\n            </td>\n        </tr>\n        <% }) %>\n        </tbody>\n    </table>\n    <div class="oppfin-sc-card--pagination">\n        <div id="oppfin-sc-card--pagination-bar">\n            <a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>\n            <% _.each(modelData.pages,function(i,key,list){ %>\n            <% if(i != \'...\'){ %>\n            <a id="oppfin-<%= i%>" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% if(i == \'...\'){ %>\n            <a id="oppfin-ellipsisPage" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% }) %>\n            <a id="oppfin-pageNext" class="oppfin-next">Next</a>\n            <div class="layout-clear-both"></div>\n        </div>\n    </div>\n    <p class="oppfin-sc-card--viewmore">\n        <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/gotoBL/marketMovers.jhtml?indexId=0%2352WKHI_LPS%2C1%2352WKHI_LPS%2C2%2352WKHI_LPS" target="_top">Explore a full list of securities currently hitting 52-week highs</a>\n    </p>\n</div>'});
define("views/card-oppfinder-fiftytwoweek-highs-view","jquery underscore views/base-view text!../templates/oppfinder-fiftytwoweek-highs.html util/constants models/ajax-object-model models/oppfin-pagination-model models/oppfin-data-model".split(" "),function(a,b,g,c,e,d,h,f){var j=0,k=0,l=1,p=!0,m={},n,r,s,v,A,w;return g.extend({events:{"click .oppfin-next":"next_oppfin_page","click .oppfin-prev":"previous_oppfin_page","click .oppfin-sc-card--page-number":"oppfin_page","click .oppfin-sc-card-esschip":"showESSModal",
"click .oppfin-sc-modal-close-icon":"hideESSModal"},template:b.template('<div class="oppfin-sc-nosecuritiescard--fiftytwoweek-post"> <p class="opp-finder--medium-message">None of your securities have hit a 52-week high in the last 14 days.</p> <p class="opp-finder--medium-message">Learn more about 52-week highs and investing strategies: </p> <table class="fiftytwoweek-nosecurities--table"> <th class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.CORPORATEHOST_URL_VALUE%>/learning-center/trading-investing/trading/momentum-trading-strategies" target="_top">Understanding Momentum Trading</a></th> <td>Discover how momentum investors use 52-week highs to identify trends.</td> </table> <p class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/gotoBL/marketMovers.jhtml?indexId=0%2352WKHI_LPS%2C1%2352WKHI_LPS%2C2%2352WKHI_LPS" target="_top">Explore a full list of securities currently hitting 52-week highs</a></p> </div>'),
initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";this.clickflag=0;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")})},previous_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)-1;A(k,p);0!==l&&a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");
1===parseInt(l)&&(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},next_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)+1;A(k,p);l<=k&&a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",
0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},oppfin_page:function(b){var c=a(b.currentTarget).parent(".oppfin-page");b.preventDefault();l=c.find("span").text();l==k?(A(k,!0),a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)):(p=!1,a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+
l).addClass("selected"),1===parseInt(l)?(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0)):parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},showESSModal:function(b){b.stopPropagation();var c=a(b.currentTarget);this._adjustESSIconPosition(c);c.hasClass("oppfin-sc-card--esschip-active")?this.hideESSInformation(b):(this.$(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active"),
c.addClass("oppfin-sc-card--esschip-active"))},hideESSModal:function(b){b.stopPropagation();a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},_adjustESSIconPosition:function(a){var b=a.position(),c=a.find(".oppfin-sc-card--esschip-bubble"),d=c.width()-80,d=b.left-9>d?d:b.left-9,b=b.top+25;a.find(".oppfin-sc-card--esschip-pointer-up").css("left",0<d?d:0);a.find(".oppfin-sc-card--esschip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},
hideESSInformation:function(b){b=a(b.target);!b.closest(".oppfin-sc-card--esschip-bubble").length&&!b.hasClass(".oppfin-sc-card--esschip-bubble")&&a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){m={};k=j=0;n=[];l=1;var e=this,g=a("#oppfin-positions").attr("data-oppfinPositions"),g=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"2.0",daysPast:"14",
daysFuture:"0",postTypes:"52weekhigh",positions:g},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();a(".oppfin-sc-card--upcoming-earnings-container").empty();a(".oppfin-sc-card--dividend-distributions-container").empty();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty();a(".oppfin-sc-card--ess-change-container").empty()},success:function(d){if(jQuery.isEmptyObject(d.opportunity.opportunityDetails))d.opportunity.hasOwnProperty("sysMsgs")?
900===parseInt(d.opportunity.sysMsgs.sysMsg[0].code)?(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(e.template)):(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')):(a(".oppfin-sc-card--help-icon").hide(),
a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>'));else{for(var g=0,w=d.opportunity.opportunityDetails.length;g<w;g++)d.opportunity.opportunityDetails[g].hasOwnProperty("fiftyTwoWeekHigh")&&(j+=d.opportunity.opportunityDetails[g].fiftyTwoWeekHigh.length,k=Math.ceil(j/4));m.data=h.CreateFiftyweekhighsMap(d,
k);A=function(a,b){2<=a&&4>=a?n=h.BuildBasicPaginationBar(a):5<=a&&(n=h.BuildPaginationBarWithEllipsis(l,a,b))};A(k,p);v=function(a){s={data:m.data[a-1],pages:n,formatData:f};return r=b.template(c,{modelData:s})};a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append(v(l));1===parseInt(k)&&a(".oppfin-sc-card--pagination").hide();a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");a(".oppfin-prev").hide();a("#oppfin-1").css("padding-left",0);a(".oppfin-sc-card--help-icon").show()}},
error:function(){a(".oppfin-sc-card--help-icon").hide();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')},complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});d.addAjaxObjArray(g)}})});
define("text!templates/oppfinder-fiftytwoweek-lows.html",[],function(){return'<div class="oppfin-sc-card--fiftytwoweek-post">\n    <table class="oppfin-sc-card--grid oppfin-sc-card--fiftytwoweek-list">\n        <colgroup class="oppfin-sc-card--grid-col-symbol"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-range"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-price"></colgroup>\n        <colgroup class="oppfin-sc-card--grid-col-info-ess"></colgroup>\n        <thead>\n        <tr>\n            <th class="oppfin-sc-card--grid-col-text symbol">Symbol</th>\n            <th class="oppfin-sc-card--grid-col-text fiftytwoweek">52-Week Range</th>\n            <th class="oppfin-sc-card--grid-col-text lastpricechange">\n                <span class="oppfin-sc-card--grid-col-text-header-lastprice">Last Price</span>\n                <span class="oppfin-sc-card--grid-col-text-header-percentchange">% Change</span>\n                <span class="oppfin-sc-card--grid-col-text-header-asofdate">AS OF  <%= modelData.formatData.FormatDate(modelData.data.result[0].lastPriceDate) %></span>\n            </th>\n            <th class="oppfin-sc-card--grid-col-text ess">\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Equity</span>\n                <span class="oppfin-sc-card--grid-col-text-header-ess">Summary Score</span>\n\t\t\t\t\t\t\t<span class="oppfin-sc-card--grid-col-text-header-provider">\n\t\t\t\t\t\t\t\tProvided by <a href="<%=envMap.MODRESEARCH_URL_VALUE%>/fidelity/research/reports/release2/Research/StarMine.asp" class="oppfin-sc-card--grid-link" target="_top">StarMine</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="oppfin-sc-card--grid-col-text-header-asofdate">\n                                <% for(var i = 0; i < modelData.data.result.length; i++){ %>\n                                <%\n                                if(modelData.data.result[i].hasOwnProperty(\'summaryScoreDate\')) {\n                                %>\n                                AS OF <%= modelData.formatData.FormatReportDate(modelData.data.result[i].summaryScoreDate) %>\n                                <% break; %>\n                                <%\n                                } else {\n                                %>\n                                <% if((i!=0) && (modelData.data.result.length != 1)){ %>\n                                AS OF <%= modelData.formatData.GetToday() %>\n                                <% break; %>\n                                <% } %>\n                                <% if((i==0) && (modelData.data.result.length == 1)){ %>\n                                 AS OF <%= modelData.formatData.GetToday() %>\n                                <% break; %>\n                                <% } %>\n                                <% } %>\n                                <% } %>\n\t\t\t\t\t\t\t</span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <% _.each(modelData.data.result,function(i,key,list){ %>\n        <tr>\n            <td class="oppfin-sc-card--grid-col-text">\n                <% if(i.days >= \'0\' && i.days <= \'3\'){ %>\n                <div class="oppfin-sc-card-indicator-fiftyweek"></div>\n                <% } %>\n                <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/snapshot.jhtml?symbols=<%= i.securityDetail.symbol %>" class="oppfin-sc-card--grid-link" target="_top">\n                    <span class="oppfin-sc-card--grid-col-text symbol"><%= i.securityDetail.symbol %></span>\n                    <span class="oppfin-sc-card--grid-col-text-security" title="<%=i.securityDetail.secDesc%>"><%=i.securityDetail.secDesc%></span>\n                </a>\n            </td>\n            <td class="oppfin-sc-card--grid-col-barchart-horizontal">\n                <div class="highlowrange">\n                    <div class="highlowrange--bar">\n                        <div class="highlowrange--divider highlowrange--divider-quarter"></div>\n                        <div class="highlowrange--divider highlowrange--divider-half"></div>\n                        <div class="highlowrange--divider highlowrange--divider-three-quarter"></div>\n                    </div>\n                    <div class="highlowrange--marker-offset">\n                        <div class="highlowrange--marker" title="<%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %>" style="left:<%= i.highPct %>%">\n                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQYV2M0Cm/4z4AHMI4MBQBAcxBJ3UhjJQAAAABJRU5ErkJggg==" class="highlowrange--marker-forie" width="8" height="8">\n                        </div>\n                    </div>\n                    <div class="highlowrange--text">\n                        <div class="highlowrange--text-low"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.low) %></div>\n                        <div class="highlowrange--text-high"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.high) %></div>\n                    </div>\n                    <% if(i.days == \'0\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago">TODAY</span>\n                    <% } %>\n                    <% if(i.days == \'-1\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago"><%= modelData.formatData.FormatDaysAgo(i.days) %> DAY AGO</span>\n                    <% } %>\n                    <% if((i.days != \'0\') && (i.days != \'-1\')){ %>\n                        <span class="oppfin-sc-card--grid-col-text-days-ago"><%= modelData.formatData.FormatDaysAgo(i.days) %> DAYS AGO</span>\n                    <% } %>\n                </div>\n            </td>\n            <td class="oppfin-sc-card--grid-col-text lastpricechange">\n                <% if((i.changeSinceClosingPct.toString().charAt(0) != \'-\') && (i.changeSinceClosingPct != \'0.00\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice increasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange increasing">(+<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct.toString().charAt(0))==\'-\'){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice decreasing"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange decreasing">(<%= modelData.formatData.FormatDecimal(i.changeSinceClosingPct) %>%)</span>\n                <% } %>\n                <% if((i.changeSinceClosingPct == \'0.00\') || (i.changeSinceClosingPct == \'0\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-lastprice"><%= modelData.formatData.CurrencyMap[i.lastPriceCurrency] %><%= modelData.formatData.FormatDecimal(i.lastPrice) %></span>\n                    <span class="oppfin-sc-card--grid-col-text-percentchange">(0.00%)</span>\n                <% } %>\n            </td>\n            <td class="oppfin-sc-card--grid-col-ess">\n                <% if(i.hasOwnProperty(\'summaryRating\')){ %>\n                <div class="oppfin-sc-card-esschip" title="click for equity summary score">\n                    <% if(i.summaryRating == \'Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-underperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-sell"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-outperform"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-buy"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                    <% if(i.summaryRating == \'Neutral\'){ %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-score">\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-neutral"></span>\n                            <span class="oppfin-sc-card--grid-col-text-ess-score-data"><%= i.summaryScore %></span>\n                        </span>\n                    <% } %>\n                        <span class="oppfin-sc-card--grid-col-text-ess-underlying">\n                            <% if(i.hasOwnProperty(\'buyCount\') && i.buyCount != 0){ %>\n                                <% for(var x=1;x<= i.buyCount;x++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-buy"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'outperformCount\') && i.outperformCount != 0){ %>\n                                <% for(var j=1;j<= i.outperformCount;j++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-outperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'neutralCount\') && i.neutralCount != 0){ %>\n                                <% for(var k=1;k<= i.neutralCount;k++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-neutral"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'underperformCount\') && i.underperformCount != 0){ %>\n                                <% for(var l=1;l<= i.underperformCount;l++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-underperform"></span>\n                                <% } %>\n                            <% } %>\n                            <% if(i.hasOwnProperty(\'sellCount\') && i.sellCount != 0){ %>\n                                <% for(var m=1;m<= i.sellCount;m++){ %>\n                                    <span class="oppfin-sc-card--grid-col-text-ess-bar oppfin-sc-card--grid-col-text-ess-bar-sell"></span>\n                                <% } %>\n                            <% } %>\n                        </span>\n                    <div class="oppfin-sc-card--esschip-bubble">\n                        <div class="oppfin-sc-card--esschip-wrapper">\n                            <div class="oppfin-sc-card--esschip-info">\n                                <div class="oppfin-sc-modal-close-icon" role="button" tabindex="0">\n                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAVdEVYdENyZWF0aW9uIFRpbWUANi8xMS8xMgh2CcgAAACkSURBVDiNrZO9EcMgDIU/sYBXyQiM4lRqGcWtqmQUj+BVvEEakfMlIHxxVOnQ+zmeQADMbAYWIKvqRlBmdgNWoKjqU5z88PkeiRzIkx/dkzvXmoDVgSMywJKA7M5dkQ55B7KMAN43Z6q6yQkXGmfvnOQw6Ikc6ytk+UQEIs0NpY7T6frfFS6FeGmNEbm6RJg0IgN4n2m82ASUiDwQKTWDmR+/8wt8nHU8re6bGQAAAABJRU5ErkJggg==" width="16" height="16"/>\n                                </div>\n                                <div class="oppfin-sc-modal-rating">\n                                    <% if(i.summaryRating == \'Bearish\'){ %>\n                                        <div class="tab color4">Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bearish\'){ %>\n                                        <div class="tab color5">Very Bearish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Bullish\'){ %>\n                                        <div class="tab color2">Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Very Bullish\'){ %>\n                                        <div class="tab color1">Very Bullish</div>\n                                    <% } %>\n                                    <% if(i.summaryRating == \'Neutral\'){ %>\n                                        <div class="tab color3">Neutral</div>\n                                    <% } %>\n                                        <div class="data"><%= i.summaryScore %></div>\n                                </div>\n                                <div class="oppfin-sc-modal-legend">\n                                    <div class="row_title">Underlying Analyst Opinions</div>\n                                    <div class="row">\n                                        <div class="num"><%= i.buyCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var a=1;a<= i.buyCount;a++){ %>\n                                                <div class="oppfin-ess-bar-buy"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Buy</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.outperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var b=1;b<= i.outperformCount;b++){ %>\n                                                <div class="oppfin-ess-bar-outperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Outperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.neutralCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var c=1;c<= i.neutralCount;c++){ %>\n                                                <div class="oppfin-ess-bar-neutral"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Neutral</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.underperformCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var d=1;d<= i.underperformCount;d++){ %>\n                                                <div class="oppfin-ess-bar-underperform"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Underperform</div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="num"><%= i.sellCount%></div>\n                                        <div class="oppfin-ess-bar">\n                                            <% for(var e=1;e<= i.sellCount;e++){ %>\n                                                <div class="oppfin-ess-bar-sell"></div>\n                                            <% } %>\n                                        </div>\n                                        <div class="desc">Sell</div>\n                                    </div>\n                                    <div class="row_links"><a onclick="javascript:void(0);" href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/goto/evaluate/analystsOpinions.jhtml?symbols=<%= i.securityDetail.symbol %>" title="view details" target="_top">View details</a> | <a title="methodology" onclick="javascript:void(0);" href="javascript:popWinCustomAtPosition(\'https://scs.fidelity.com/help/research/learn_er_glossary_1.shtml#equitysummaryscore\',820,795,\'yes\',\'yes\')">Methodology</a></div>\n                                </div>\n                                <div class="oppfin-sc-card--esschip-pointer-up"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <% } %>\n                <% if(!i.hasOwnProperty(\'summaryRating\')){ %>\n                    <span class="oppfin-sc-card--grid-col-text-ess-none">--</span>\n                <% } %>\n            </td>\n        </tr>\n        <% }) %>\n        </tbody>\n    </table>\n    <div class="oppfin-sc-card--pagination">\n        <div id="oppfin-sc-card--pagination-bar">\n            <a id="oppfin-pagePrev" class="oppfin-prev" href="#">Previous</a>\n            <% _.each(modelData.pages,function(i,key,list){ %>\n            <% if(i != \'...\'){ %>\n            <a id="oppfin-<%= i%>" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% if(i == \'...\'){ %>\n            <a id="oppfin-ellipsisPage" class="oppfin-page">\n                <span class="oppfin-sc-card--page-number"><%= i%></span>\n            </a>\n            <% } %>\n            <% }) %>\n            <a id="oppfin-pageNext" class="oppfin-next">Next</a>\n            <div class="layout-clear-both"></div>\n        </div>\n    </div>\n    <p class="oppfin-sc-card--viewmore">\n        <a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/gotoBL/marketMovers.jhtml?indexId=0%2352WKLO_LPS%2C1%2352WKLO_LPS%2C2%2352WKLO_LPS" target="_top">Explore a full list of securities currently hitting 52-week lows</a>\n    </p>\n</div>'});
define("views/card-oppfinder-fiftytwoweek-lows-view","jquery underscore views/base-view text!../templates/oppfinder-fiftytwoweek-lows.html util/constants models/ajax-object-model models/oppfin-pagination-model models/oppfin-data-model".split(" "),function(a,b,g,c,e,d,h,f){var j=0,k=0,l=1,p=!0,m={},n,r,s,v,A,w;return g.extend({events:{"click .oppfin-next":"next_oppfin_page","click .oppfin-prev":"previous_oppfin_page","click .oppfin-sc-card--page-number":"oppfin_page","click .oppfin-sc-card-esschip":"showESSModal",
"click .oppfin-sc-modal-close-icon":"hideESSModal"},template:b.template('<div class="oppfin-sc-nosecuritiescard--fiftytwoweek-post"> <p class="opp-finder--medium-message">None of your securities have hit a 52-week low in the last 14 days.</p><p class="oppfin-sc-nosecuritiescard--viewmore"><a href="<%=envMap.ERESEARCH_URL_VALUE%>/eresearch/gotoBL/marketMovers.jhtml?indexId=0%2352WKLO_LPS%2C1%2352WKLO_LPS%2C2%2352WKLO_LPS" target="_top">Explore a full list of securities currently hitting 52-week lows</a></p> </div>'),
initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";this.clickflag=0;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")})},previous_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)-1;A(k,p);0!==l&&a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");
1===parseInt(l)&&(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},next_oppfin_page:function(b){b.preventDefault();p=!0;w=a("#oppfin-sc-card--pagination-bar a.selected").text();l=parseInt(w)+1;A(k,p);l<=k&&a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(v(l));a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",
0));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},oppfin_page:function(b){var c=a(b.currentTarget).parent(".oppfin-page");b.preventDefault();l=c.find("span").text();l==k?(A(k,!0),a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected"),a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)):(p=!1,a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(v(l)),a(".oppfin-sc-card--pagination").find("#oppfin-"+
l).addClass("selected"),1===parseInt(l)?(a(".oppfin-prev").hide(),a("#oppfin-1").css("padding-left",0)):parseInt(l)===parseInt(k)&&(a(".oppfin-next").hide(),a("#oppfin-"+parseInt(k)).css("border-right",0)));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},showESSModal:function(b){b.stopPropagation();var c=a(b.currentTarget);this._adjustESSIconPosition(c);c.hasClass("oppfin-sc-card--esschip-active")?this.hideESSInformation(b):(this.$(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active"),
c.addClass("oppfin-sc-card--esschip-active"))},hideESSModal:function(b){b.stopPropagation();a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},_adjustESSIconPosition:function(a){var b=a.position(),c=a.find(".oppfin-sc-card--esschip-bubble"),d=c.width()-80,d=b.left-9>d?d:b.left-9,b=b.top+25;a.find(".oppfin-sc-card--esschip-pointer-up").css("left",0<d?d:0);a.find(".oppfin-sc-card--esschip-bubble").css("top",b);20<a.parent().height()?c.addClass("extra-height"):c.removeClass("extra-height")},
hideESSInformation:function(b){b=a(b.target);!b.closest(".oppfin-sc-card--esschip-bubble").length&&!b.hasClass(".oppfin-sc-card--esschip-bubble")&&a(".oppfin-sc-card-esschip").removeClass("oppfin-sc-card--esschip-active")},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){m={};k=j=0;n=[];l=1;var e=this,g=a("#oppfin-positions").attr("data-oppfinPositions"),g=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"2.0",daysPast:"14",
daysFuture:"0",postTypes:"52weeklow",positions:g},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();a(".oppfin-sc-card--upcoming-earnings-container").empty();a(".oppfin-sc-card--dividend-distributions-container").empty();a(".oppfin-sc-card--fiftytwoweek-highs-container").empty();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty();a(".oppfin-sc-card--ess-change-container").empty()},success:function(d){if(jQuery.isEmptyObject(d.opportunity.opportunityDetails))d.opportunity.hasOwnProperty("sysMsgs")?
900===parseInt(d.opportunity.sysMsgs.sysMsg[0].code)?(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(e.template)):(a(".oppfin-sc-card--help-icon").hide(),a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')):(a(".oppfin-sc-card--help-icon").hide(),
a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>'));else{for(var g=0,w=d.opportunity.opportunityDetails.length;g<w;g++)d.opportunity.opportunityDetails[g].hasOwnProperty("fiftyTwoWeekLow")&&(j+=d.opportunity.opportunityDetails[g].fiftyTwoWeekLow.length,k=Math.ceil(j/4));m.data=h.CreateFiftyweeklowsMap(d,
k);A=function(a,b){2<=a&&4>=a?n=h.BuildBasicPaginationBar(a):5<=a&&(n=h.BuildPaginationBarWithEllipsis(l,a,b))};A(k,p);v=function(a){s={data:m.data[a-1],pages:n,formatData:f};return r=b.template(c,{modelData:s})};a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append(v(l));1===parseInt(k)&&a(".oppfin-sc-card--pagination").hide();a(".oppfin-sc-card--pagination").find("#oppfin-"+l).addClass("selected");a(".oppfin-prev").hide();a("#oppfin-1").css("padding-left",0);a(".oppfin-sc-card--help-icon").show()}},
error:function(){a(".oppfin-sc-card--help-icon").hide();a(".oppfin-sc-card--fiftytwoweek-lows-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">This content is temporarily unavailable. Please try again later.</p>')},complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});d.addAjaxObjArray(g)}})});
define("text!templates/oppfinder-event-summary.html",[],function(){return'<div class="oppfin-sc-card--divider"></div>\n<div class="oppfin-sc-card--event-summary">\n    <div id="oppfin-sc-card--earnings-tile" class="oppfin-sc-card--eventsummary-tile">\n        <div class="oppfin-sc-card--eventsummary-tileinner">\n            <a class="oppfin-sc-card--tile-link">\n                <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAjCAYAAAD8BaggAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAMBJREFUeNrsWEEKhDAMnCzetT/YX/nffcn+wPqCeFlBiqmpZWsKCQiCQ5xOJgxK4/yBUAy5CPrikh4vGKtBgQmH+6XiXUHTY7gYDQDEwnFq+7CFkVHJyELybMmc5I6pOWOFEcA3JRQbqxVLTU2txtTN2rMFQqYVogd5TPtWm1NIQ4h/19QA06dCj6e9tP6apL+Doe4UkkL2DWC9OHUt5pSQFLKrIoCrMW5qN7Wb2k3tpnZT/+FnAzXE+HdZfwptAwCUqUvOAKLlUwAAAABJRU5ErkJggg=="/></span>\n                <% if(( modelData.earningsData.total)!= 0 && ( modelData.earningsData.total)<= 9){ %>\n                <span class="oppfin-sc-card--earnings-alert single-digit"><%= modelData.earningsData.total %></span>\n                <%} %>\n                <% if(( modelData.earningsData.total)!= 0 && ( modelData.earningsData.total)>= 10 && ( modelData.earningsData.total)<= 99){ %>\n                <span class="oppfin-sc-card--earnings-alert double-digit"><%= modelData.earningsData.total %></span>\n                <%} %>\n                <% if(( modelData.earningsData.total)!= 0 && ( modelData.earningsData.total)>= 100 && ( modelData.earningsData.total)<= 999){ %>\n                <span class="oppfin-sc-card--earnings-alert triple-digit"><%= modelData.earningsData.total %></span>\n                <%} %>\n                <span class="oppfin-sc-card-tile-title1">Earnings</span>\n                <span class="oppfin-sc-card-tile-title2">Dates</span>\n            </a>\n            <% if((modelData.earningsData.total>3) && (modelData.earningsData.moreCount != 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.earningsData.tickers[0] %>, <%= modelData.earningsData.tickers[1] %>, <%= modelData.earningsData.tickers[2] %>, +<%= modelData.earningsData.moreCount %></span>\n            <% } %>\n            <% if(( modelData.earningsData.total == 1) && (modelData.earningsData.moreCount == -2)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.earningsData.tickers[0] %></span>\n            <% } %>\n            <% if(( modelData.earningsData.total == 2) && (modelData.earningsData.moreCount == -1)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.earningsData.tickers[0] %>, <%= modelData.earningsData.tickers[1] %></span>\n            <% } %>\n            <% if(( modelData.earningsData.total == 3) && (modelData.earningsData.moreCount == 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.earningsData.tickers[0] %>, <%= modelData.earningsData.tickers[1] %>, <%= modelData.earningsData.tickers[2] %></span>\n            <% } %>\n        </div>\n    </div>\n    <div id="oppfin-sc-card--dividends-tile" class="oppfin-sc-card--eventsummary-tile">\n        <div class="oppfin-sc-card--eventsummary-tileinner">\n            <a class="oppfin-sc-card--tile-link">\n                <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA4FJREFUeNrUmEtIVVEUhj+P2UARHzQQ0YQkMANtIKTmQOiFlBRWOM1BE5uUIYKODUSyUU4c6LSkKHqIiRChZuAgBW8RFFhBDiIT0YEmNfm3bC736to3ifrhsvddZ59/rbPPXq+TltP8kkAcBhqAY0AZUAxk6doq8Bl4B0wCI8B8CHma0aC9wGWgFagMfIBZoB8YAtZ3w6AmoA8o0f91YAwYB94AH4FlXcsBDgBHgOPAST0MwALQBjxI1aBsYABo1v9FoBcYBJaMu5MHtADtQIFkd4ErwEqiG6IkREXAtIzZBG4CpdqppYDXtaR7SsWxKc5p6TAZVARMAeXAV6Ae6ALWSB1r4qgXZ7l0FO1kUDYwKs/5ANQAE+weJsT5QTpGpTOpQQPezhzXQbTgmn4WLIjb7dRAskPdBNzXe64P3Jlfji/gnjrgBZAOXHDeF3lxpk/znkBjDiWZW15fj+Z9Ljw4gy4rziwC3UbCfOAhEPNkMcnyjRzd0lkiG7YMatXYa/SmPcBj4Byw4ck3JHusNRbv6/VtiJSbKhWBB41PdgmoBX4AVZ68SrJarbFgULorgcOREiVKB9agd0bjbWDOk89J5q+xBM8xzRsiZW2Um6zI1fgpwbXXGjMC+JzuY5FKCJQorXi/zS48B04AVwP4nO6ySBETZW0rhhR7LgK3EsSkceBbAJ/TXRx5xdVyAMEc0KF5myefAs6mkFKc7qzoD/JSL9AIvPJkNXL59lRJI5WdrrgKxRO5OF7EddG+IoDH6V6NVAOjSs+KfTq48bnrBjAseUsAn9P9OVJBjspOK+4odpxKcO2ZxoMBfE73u0jdASoJrHDp4miCa/s1/gjgc7onI7UqqCDPMxI81Xg97qxUSOavsdTdJzUfidQ3zSr9W9/7sFw8F5jx5DOSTWmNBS3SPQvMO7fv19gOZBpIfsrlH8WliAzJGrVmJ2R6IaLfLz+GVFoWqBi34DtwXmWoQ7lk340cXdK5IBu2DFr3Im6Hyksr3iaZW0pYP9qvxxf5D9TEpQP3vE7VguveYbagxNN11+9m4zvXbDVx5WpVQjqPEGPG1TzGgGq/i43PZSvAaUXvUnlL3S4aUyfOUuk4Hd9SJ0quX5SfYkChWpVuo/dt503d4ioUd610mXr7L9pK95479QrbAoKnC3pturfTOzPViYz57z7H/LMfrP7qJ73fAwDCNeNPdl55wQAAAABJRU5ErkJggg=="/></span>\n                <% if(( modelData.dividendsData.total)!= 0 && ( modelData.dividendsData.total)<= 9){ %>\n                <span class="oppfin-sc-card--dividends-alert single-digit"><%= modelData.dividendsData.total %></span>\n                <%} %>\n                <% if(( modelData.dividendsData.total)!= 0 && ( modelData.dividendsData.total)>= 10 && ( modelData.dividendsData.total)<= 99){ %>\n                <span class="oppfin-sc-card--dividends-alert double-digit"><%= modelData.dividendsData.total %></span>\n                <%} %>\n                <% if(( modelData.dividendsData.total)!= 0 && ( modelData.dividendsData.total)>= 100 && ( modelData.dividendsData.total)<= 999){ %>\n                <span class="oppfin-sc-card--dividends-alert triple-digit"><%= modelData.dividendsData.total %></span>\n                <%} %>\n                <span class="oppfin-sc-card-tile-title1">Dividend</span>\n                <span class="oppfin-sc-card-tile-title2">Ex-Dates</span>\n            </a>\n            <% if((modelData.dividendsData.total>3) && (modelData.dividendsData.moreCount != 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.dividendsData.tickers[0] %>, <%= modelData.dividendsData.tickers[1] %>, <%= modelData.dividendsData.tickers[2] %>, +<%= modelData.dividendsData.moreCount %></span>\n            <% } %>\n            <% if(( modelData.dividendsData.total == 1) && (modelData.dividendsData.moreCount == -2)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.dividendsData.tickers[0] %></span>\n            <% } %>\n            <% if(( modelData.dividendsData.total == 2) && (modelData.dividendsData.moreCount == -1)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.dividendsData.tickers[0] %>, <%= modelData.dividendsData.tickers[1] %></span>\n            <% } %>\n            <% if(( modelData.dividendsData.total == 3) && (modelData.dividendsData.moreCount == 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.dividendsData.tickers[0] %>, <%= modelData.dividendsData.tickers[1] %>, <%= modelData.dividendsData.tickers[2] %></span>\n            <% } %>\n        </div>\n    </div>\n    <div id="oppfin-sc-card--esschange-tile" class="oppfin-sc-card--eventsummary-tile no-right-tile">\n        <div class="oppfin-sc-card--eventsummary-tileinner">\n            <a class="oppfin-sc-card--tile-link">\n                <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAdCAYAAAAtt6XDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAARpJREFUeNrsl9ENgjAURS/Gf1NGgBHKCF0B3UBHgBFwBBhBR4Avv+0KjKBugD+3yQvBoAkkRNqkgbyXF07ubelrsDvcOixsbLDAsRXvagE8zz7Uy9vnodaw+zqv1JdKBQvg6fxC/3soRZ/788F8CuAu4jUALerLXl02pVKWG8HNkMAlgJaxmEAX1hQAjgAS5isRm80+QzBFmJawscjL50nATQKlezYUABqCGGFhDSBizVUo5izPfv1PjdmXDMQTfsgQ3BAsBnBmf6RpmSIgmJvFvpRAFeFCwkcEKQjibMuF6pMo9WlnZoTYu66RlloueEWbrcjbqaD0wIEdCjCXa6gMCFpwvbmRj1kHAIG4zfizz599vh1evVLvAQD1xkbfLL/qrQAAAABJRU5ErkJggg=="/></span>\n                <% if(( modelData.esschangeData.total)!= 0 && ( modelData.esschangeData.total)<= 9){ %>\n                <span class="oppfin-sc-card--esschange-alert single-digit"><%= modelData.esschangeData.total %></span>\n                <% } %>\n                <% if(( modelData.esschangeData.total)!= 0 && ( modelData.esschangeData.total)>= 10 && ( modelData.esschangeData.total)<= 99){ %>\n                <span class="oppfin-sc-card--esschange-alert double-digit"><%= modelData.esschangeData.total %></span>\n                <% } %>\n                <% if(( modelData.esschangeData.total)!= 0 && ( modelData.esschangeData.total)>= 100 && ( modelData.esschangeData.total)<= 999){ %>\n                <span class="oppfin-sc-card--esschange-alert triple-digit"><%= modelData.esschangeData.total %></span>\n                <% } %>\n                <span class="oppfin-sc-card-tile-title1">Equity Summary</span>\n                <span class="oppfin-sc-card-tile-title2">Score Change</span>\n            </a>\n            <% if((modelData.esschangeData.total>3) && (modelData.esschangeData.moreCount != 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.esschangeData.tickers[0] %>, <%= modelData.esschangeData.tickers[1] %>, <%= modelData.esschangeData.tickers[2] %>, +<%= modelData.esschangeData.moreCount %></span>\n            <% } %>\n            <% if(( modelData.esschangeData.total == 1) && (modelData.esschangeData.moreCount == -2)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.esschangeData.tickers[0] %></span>\n            <% } %>\n            <% if(( modelData.esschangeData.total == 2) && (modelData.esschangeData.moreCount == -1)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.esschangeData.tickers[0] %>, <%= modelData.esschangeData.tickers[1] %></span>\n            <% } %>\n            <% if(( modelData.esschangeData.total == 3) && (modelData.esschangeData.moreCount == 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.esschangeData.tickers[0] %>, <%= modelData.esschangeData.tickers[1] %>, <%= modelData.esschangeData.tickers[2] %></span>\n            <% } %>\n        </div>\n    </div>\n    <div id="oppfin-sc-card--fiftytwoweekhighs-tile" class="oppfin-sc-card--eventsummary-tile no-bottom-tile">\n        <div class="oppfin-sc-card--eventsummary-tileinner">\n            <a class="oppfin-sc-card--tile-link">\n                <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAR5JREFUeNrs1TFrwkAYxvG/Z3Bw8cMIwbF1KEWUogiCH65DJ4cIJWSQDipumf0a0iFLhhba5RGuwWgujdu9S8J77z0/SLik1VsccKwfXVsum4wjkpbcNwb1FBxavdAFMxWRDwWfrP7JBbsFdYF3BX4CQ2ttqF4I7DRbC+oCCfAAZMAIOFrrR/UyzSTXMHMDeVTQU8kjSrWWabYUuwR1gHUFpAxbK+Mq1AEi4BnIgZeKLzvVbK69UREzF5CJNoyBvcNR2WtProw/2BlqA6sCssW9tgVspWyMbt6AKfAFzGoiNjZT1lTZ7QB4BZZamAMb/l8bZUXK/jZqnJGY5iq2swNgYB3ApisG+gDBnQAKXxDn30Tt8pCHPOQhDzVYvwMAD29GiQ9ZVzUAAAAASUVORK5CYII="/></span>\n                <% if(( modelData.fiftyweekhighsData.total)!= 0 && ( modelData.fiftyweekhighsData.total)<= 9){ %>\n                <span class="oppfin-sc-card--fiftyweekhighs-alert single-digit"><%= modelData.fiftyweekhighsData.total %></span>\n                <% } %>\n                <% if(( modelData.fiftyweekhighsData.total)!= 0 && ( modelData.fiftyweekhighsData.total)>= 10 && ( modelData.fiftyweekhighsData.total)<= 99){ %>\n                <span class="oppfin-sc-card--fiftyweekhighs-alert double-digit"><%= modelData.fiftyweekhighsData.total %></span>\n                <% } %>\n                <% if(( modelData.fiftyweekhighsData.total)!= 0 && ( modelData.fiftyweekhighsData.total)>= 100 && ( modelData.fiftyweekhighsData.total)<= 999){ %>\n                <span class="oppfin-sc-card--fiftyweekhighs-alert triple-digit"><%= modelData.fiftyweekhighsData.total %></span>\n                <% } %>\n                <span class="oppfin-sc-card-tile-title1">52-Week</span>\n                <span class="oppfin-sc-card-tile-title2">Highs</span>\n            </a>\n            <% if((modelData.fiftyweekhighsData.total>3) && (modelData.fiftyweekhighsData.moreCount != 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftyweekhighsData.tickers[0] %>, <%= modelData.fiftyweekhighsData.tickers[1] %>, <%= modelData.fiftyweekhighsData.tickers[2] %>, +<%= modelData.fiftyweekhighsData.moreCount %></span>\n            <% } %>\n            <% if(( modelData.fiftyweekhighsData.total == 1) && (modelData.fiftyweekhighsData.moreCount == -2)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftyweekhighsData.tickers[0] %></span>\n            <% } %>\n            <% if(( modelData.fiftyweekhighsData.total == 2) && (modelData.fiftyweekhighsData.moreCount == -1)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftyweekhighsData.tickers[0] %>, <%= modelData.fiftyweekhighsData.tickers[1] %></span>\n            <% } %>\n            <% if(( modelData.fiftyweekhighsData.total == 3) && (modelData.fiftyweekhighsData.moreCount == 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftyweekhighsData.tickers[0] %>, <%= modelData.fiftyweekhighsData.tickers[1] %>, <%= modelData.fiftyweekhighsData.tickers[2] %></span>\n            <% } %>\n        </div>\n    </div>\n    <div id="oppfin-sc-card--fiftytwoweeklows-tile" class="oppfin-sc-card--eventsummary-tile nobottom-tile">\n        <div class="oppfin-sc-card--eventsummary-tileinner">\n            <a class="oppfin-sc-card--tile-link">\n                <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAS5JREFUeNrslbFqAkEQhj+PWFxjIPga1teaK4KFHIJCrCx8OKuQEAwSLFSs5CBVnsTGQjhi829Yj3ju6Zlqp9llZuf/OJj5r3b/vKZk/OislWkK+KfwIA/yIA/yoArjDmjp/n0jRst80Qb4ApIbQBJpbwLgBajrTCqG/GoHwBiYWLBOBZCOBZkA4wDIgBHwpsIrEF8BiaVRl+YIyMzUZcAQmAIh8HEhLFZvKK2htI/Gew8McrB2CUg7BxlI8889MrBPNbwDkQMk0ttQvUeQUwu7B/rAEmgA8zOwSG8a6unnIUXOsAO6DrA8pKveUhZkYCsJzSwXMRs/U21VBHHxuh3QA1LgAVhYtYVyKfBYBHE11S3wJMGmlW8q5zIszu69lWBq5Zwhl/wmohP3s3EYACSMRN9cKZArAAAAAElFTkSuQmCC"/></span>\n                <% if(( modelData.fiftytwoweeklowsData.total)!= 0 && ( modelData.fiftytwoweeklowsData.total)<= 9){ %>\n                <span class="oppfin-sc-card--fiftyweeklows-alert single-digit"><%= modelData.fiftytwoweeklowsData.total %></span>\n                <% } %>\n                <% if(( modelData.fiftytwoweeklowsData.total)!= 0 && ( modelData.fiftytwoweeklowsData.total)>= 10 && ( modelData.fiftytwoweeklowsData.total)<= 99){ %>\n                <span class="oppfin-sc-card--fiftyweeklows-alert double-digit"><%= modelData.fiftytwoweeklowsData.total %></span>\n                <% } %>\n                <% if(( modelData.fiftytwoweeklowsData.total)!= 0 && ( modelData.fiftytwoweeklowsData.total)>= 100 && ( modelData.fiftytwoweeklowsData.total)<= 999){ %>\n                <span class="oppfin-sc-card--fiftyweeklows-alert triple-digit"><%= modelData.fiftytwoweeklowsData.total %></span>\n                <% } %>\n                <span class="oppfin-sc-card-tile-title1">52-Week</span>\n                <span class="oppfin-sc-card-tile-title2">Lows</span>\n            </a>\n            <% if((modelData.fiftytwoweeklowsData.total>3) && (modelData.fiftytwoweeklowsData.moreCount != 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftytwoweeklowsData.tickers[0] %>, <%= modelData.fiftytwoweeklowsData.tickers[1] %>, <%= modelData.fiftytwoweeklowsData.tickers[2] %>, +<%= modelData.fiftytwoweeklowsData.moreCount %></span>\n            <% } %>\n            <% if(( modelData.fiftytwoweeklowsData.total == 1) && (modelData.fiftytwoweeklowsData.moreCount == -2)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftytwoweeklowsData.tickers[0] %></span>\n            <% } %>\n            <% if(( modelData.fiftytwoweeklowsData.total == 2) && (modelData.fiftytwoweeklowsData.moreCount == -1)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftytwoweeklowsData.tickers[0] %>, <%= modelData.fiftytwoweeklowsData.tickers[1] %></span>\n            <% } %>\n            <% if(( modelData.fiftytwoweeklowsData.total == 3) && (modelData.fiftytwoweeklowsData.moreCount == 0)){ %>\n            <span class="oppfin-sc-card-tile-symbols"><%= modelData.fiftytwoweeklowsData.tickers[0] %>, <%= modelData.fiftytwoweeklowsData.tickers[1] %>, <%= modelData.fiftytwoweeklowsData.tickers[2] %></span>\n            <% } %>\n        </div>\n    </div>\n</div>'});
define("views/card-oppfinder-event-summary-view","jquery underscore views/base-view views/card-oppfinder-earnings-dates-view views/card-oppfinder-dividends-exdates-view views/card-oppfinder-ess-change-view views/card-oppfinder-fiftytwoweek-highs-view views/card-oppfinder-fiftytwoweek-lows-view text!../templates/oppfinder-event-summary.html util/constants models/ajax-object-model".split(" "),function(a,b,g,c,e,d,h,f,j,k,l){return g.extend({initialize:function(){this.url="/ftgw/fbc/ofportfolio/oppFinder";
this.clickflag=0;this.earningsCardView=new c({el:this.$(".oppfin-sc-card--upcoming-earnings-container")});this.dividendsCardView=new e({el:this.$(".oppfin-sc-card--dividend-distributions-container")});this.esschangeCardView=new d({el:this.$(".oppfin-sc-card--ess-change-container")});this.fiftyweekhighsCardView=new h({el:this.$(".oppfin-sc-card--fiftytwoweek-highs-container")});this.fiftyweeklowsCardView=new f({el:this.$(".oppfin-sc-card--fiftytwoweek-lows-container")})},destroy:function(){this.$el.empty();
this.undelegateEvents()},render:function(){return this},initializeTiles:function(){var b=this;a("#oppfin-sc-card--earnings-tile").on("click",function(){a("#oppfin-sc-card-dropdown").val("EarningsDates");a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors view a company&#39;s earnings reports as a way to gain insight into the company&#39;s strategy and overall financial health. Below are some securities you hold that have an upcoming earnings announcement.</p><div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Activity happened today or is coming up in the next 3 days for this holding.</div></div>');
a(".oppfin-sc-card--event-summary-container").empty();b.earningsCardView.refresh();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});a("#oppfin-sc-card--dividends-tile").on("click",function(){a("#oppfin-sc-card-dropdown").val("DividendExDates");a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors use dividend-paying securities as a way to help boost their portfolio&#39;s total returns. Below are some securities you hold that have announced an upcoming dividend distribution.</p><div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Activity happened today or is coming up in the next 3 days for this holding.</div></div>');
a(".oppfin-sc-card--event-summary-container").empty();b.dividendsCardView.refresh();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});a("#oppfin-sc-card--esschange-tile").on("click",function(){a("#oppfin-sc-card-dropdown").val("ESSChange");a(".oppfin-sc-card--tooltip-content").empty().html('<p>The Equity Summary Score (ESS) is a consolidated view of ratings from a number of independent research providers on Fidelity.com. Below are some stocks you hold that have had the greatest Equity Summary Score change in the last month.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">ESS for this holding has moved by 2 or more points in the past month.</div></div>');
a(".oppfin-sc-card--event-summary-container").empty();b.esschangeCardView.refresh();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});a("#oppfin-sc-card--fiftytwoweekhighs-tile").on("click",function(){a("#oppfin-sc-card-dropdown").val("FiftyweekHighs");a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors consider a security reaching its 52-week high to be one way to identify a potential trend. Below are some securities you hold that have hit a 52-week high in the last 14 days.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Today this holding hit a 52-week high.</div></div>');
a(".oppfin-sc-card--event-summary-container").empty();b.fiftyweekhighsCardView.refresh();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});a("#oppfin-sc-card--fiftytwoweeklows-tile").on("click",function(){a("#oppfin-sc-card-dropdown").val("FiftyweekLows");a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors consider a security reaching its 52-week low to be one way to identify a potential trend. Below are some securities you hold that have hit a 52-week low in the last 14 days.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Today this holding hit a 52-week low.</div></div>');
a(".oppfin-sc-card--event-summary-container").empty();b.fiftyweeklowsCardView.refresh();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")})},refresh:function(){var c=this,d=a("#oppfin-positions").attr("data-oppfinPositions"),d=a.ajax({url:this.url,type:"post",data:{format:"json",CL:"1",esschangeF1:"2.0",daysPast:"0",daysFuture:"3",positions:d},dataType:"json",timeout:3E4,beforeSend:function(){a("#oppfin-loader").css("height","auto").html("<div class='fid-card--loading-indicator'>").show();
a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},success:function(d){if(d.opportunity.hasOwnProperty("opportunityDetails")){a(".oppfin-sc-card--help-icon").show();for(var e=0,f=0,h=0,g=0,k=0,l=[],m=[],y=[],B=[],I=[],S=d.opportunity.opportunityDetails.length,J=0;J<S;J++)if(d.opportunity.opportunityDetails[J].hasOwnProperty("earnings"))for(var e=e+d.opportunity.opportunityDetails[J].earnings.length,O=0;O<d.opportunity.opportunityDetails[J].earnings.length;O++)l.push(d.opportunity.opportunityDetails[J].earnings[O].securityDetail.symbol);
for(J=0;J<S;J++)if(d.opportunity.opportunityDetails[J].hasOwnProperty("dividends")){f+=d.opportunity.opportunityDetails[J].dividends.length;for(O=0;O<d.opportunity.opportunityDetails[J].dividends.length;O++)m.push(d.opportunity.opportunityDetails[J].dividends[O].securityDetail.symbol)}for(J=0;J<S;J++)if(d.opportunity.opportunityDetails[J].hasOwnProperty("essChange")){h+=d.opportunity.opportunityDetails[J].essChange.length;for(O=0;O<d.opportunity.opportunityDetails[J].essChange.length;O++)y.push(d.opportunity.opportunityDetails[J].essChange[O].securityDetail.symbol)}for(J=
0;J<S;J++)if(d.opportunity.opportunityDetails[J].hasOwnProperty("fiftyTwoWeekHigh")){g+=d.opportunity.opportunityDetails[J].fiftyTwoWeekHigh.length;for(O=0;O<d.opportunity.opportunityDetails[J].fiftyTwoWeekHigh.length;O++)B.push(d.opportunity.opportunityDetails[J].fiftyTwoWeekHigh[O].securityDetail.symbol)}for(J=0;J<S;J++)if(d.opportunity.opportunityDetails[J].hasOwnProperty("fiftyTwoWeekLow")){k+=d.opportunity.opportunityDetails[J].fiftyTwoWeekLow.length;for(O=0;O<d.opportunity.opportunityDetails[J].fiftyTwoWeekLow.length;O++)I.push(d.opportunity.opportunityDetails[J].fiftyTwoWeekLow[O].securityDetail.symbol)}d=
b.template(j,{modelData:{earningsData:{total:e,tickers:[l[0],l[1],l[2]],moreCount:e-3},dividendsData:{total:f,tickers:[m[0],m[1],m[2]],moreCount:f-3},esschangeData:{total:h,tickers:[y[0],y[1],y[2]],moreCount:h-3},fiftyweekhighsData:{total:g,tickers:[B[0],B[1],B[2]],moreCount:g-3},fiftytwoweeklowsData:{total:k,tickers:[I[0],I[1],I[2]],moreCount:k-3}}});a("#oppfin-sc-card--event-summary-container").empty().append(d);c.initializeTiles()}else d.opportunity.hasOwnProperty("sysMsgs")&&parseInt(d.opportunity.sysMsgs.sysMsg[0].code),
a(".oppfin-sc-card--help-icon").hide(),a("#oppfin-sc-card--event-summary-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">A technical error occurred while accessing the data. Please try again later.</p>')},error:function(){a(".oppfin-sc-card--help-icon").hide();a("#oppfin-sc-card--event-summary-container").empty().append('<p style="font-family:cambria;font-size:15px;line-height: 20px;color:#000000; margin-top: 15px;padding-left: 8px;">A technical error occurred while accessing the data. Please try again later.</p>')},
complete:function(){a("#oppfin-loader").hide();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}});l.addAjaxObjArray(d)}})});
define("views/card-oppfinder-main-view","jquery views/composite-view models/ajax-object-model util/constants views/card-oppfinder-event-summary-view views/card-oppfinder-earnings-dates-view views/card-oppfinder-dividends-exdates-view views/card-oppfinder-ess-change-view views/card-oppfinder-fiftytwoweek-highs-view views/card-oppfinder-fiftytwoweek-lows-view".split(" "),function(a,b,g,c,e,d,h,f,j,k){return b.extend({initialize:function(){this.earningsCardView=new d({el:this.$(".oppfin-sc-card--upcoming-earnings-container")});
this.dividendsCardView=new h({el:this.$(".oppfin-sc-card--dividend-distributions-container")});this.essChangeCardView=new f({el:this.$(".oppfin-sc-card--ess-change-container")});this.fiftytwoweekHighsCardView=new j({el:this.$(".oppfin-sc-card--fiftytwoweek-highs-container")});this.fiftytwoweekLowsCardView=new k({el:this.$(".oppfin-sc-card--fiftytwoweek-lows-container")});this.eventSummaryView=new e({el:this.$(".oppfin-sc-card--event-summary-container")});this.initializeDropdown();this.initializeHelpIcon();
a(document).bind(c.EVENTS.DOCUMENT_ON_CLICK,function(){a(".oppfin-sc-card--help-icon").removeClass("oppfin-sc-card--help-active")})},initializeDropdown:function(){var b=this;a("#oppfin-sc-card-dropdown").change(function(){"Earnings Dates"==a("#oppfin-sc-card-dropdown option:selected").text()||"EarningsDates"==a("#oppfin-sc-card-dropdown").val()?(g.abortPendingAjaxObj(),a(".oppfin-sc-card--event-summary-container").empty(),b.earningsCardView.refresh(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),
a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors view a company&#39;s earnings reports as a way to gain insight into the company&#39;s strategy and overall financial health. Below are some securities you hold that have an upcoming earnings announcement.</p><div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Activity happened today or is coming up in the next 3 days for this holding.</div></div>')):"Dividend Ex-Dates"==
a("#oppfin-sc-card-dropdown option:selected").text()?(g.abortPendingAjaxObj(),a(".oppfin-sc-card--event-summary-container").empty(),b.dividendsCardView.refresh(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors use dividend-paying securities as a way to help boost their portfolio&#39;s total returns. Below are some securities you hold that have announced an upcoming dividend distribution.</p><div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Activity happened today or is coming up in the next 3 days for this holding.</div></div>')):
"Equity Summary Score Change"==a("#oppfin-sc-card-dropdown option:selected").text()?(g.abortPendingAjaxObj(),a(".oppfin-sc-card--event-summary-container").empty(),b.essChangeCardView.refresh(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(".oppfin-sc-card--tooltip-content").empty().html('<p>The Equity Summary Score (ESS) is a consolidated view of ratings from a number of independent research providers on Fidelity.com. Below are some stocks you hold that have had the greatest Equity Summary Score change in the last month.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">ESS for this holding has moved by 2 or more points in the past month.</div></div>')):
"52-Week Highs"==a("#oppfin-sc-card-dropdown option:selected").text()?(g.abortPendingAjaxObj(),a(".oppfin-sc-card--event-summary-container").empty(),b.fiftytwoweekHighsCardView.refresh(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors consider a security reaching its 52-week high to be one way to identify a potential trend. Below are some securities you hold that have hit a 52-week high in the last 14 days.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Today this holding hit a 52-week high.</div></div>')):
"52-Week Lows"==a("#oppfin-sc-card-dropdown option:selected").text()?(g.abortPendingAjaxObj(),a(".oppfin-sc-card--event-summary-container").empty('<p>Many investors consider a security reaching its 52-week low to be one way to identify a potential trend. Below are some securities you hold that have hit a 52-week low in the last 14 days.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Today this holding hit a 52-week low.</div></div>'),
b.fiftytwoweekLowsCardView.refresh(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(".oppfin-sc-card--tooltip-content").empty().html('<p>Many investors consider a security reaching its 52-week low to be one way to identify a potential trend. Below are some securities you hold that have hit a 52-week low in the last 14 days.</p> <div style="padding-top:15px;"><div class="oppfin-sc-card-popup-square"></div><div class="oppfin-sc-card-popup-square-text">Today this holding hit a 52-week low.</div></div>')):
"Summary of Events"==a("#oppfin-sc-card-dropdown option:selected").text()&&(g.abortPendingAjaxObj(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"),a(".oppfin-sc-card--upcoming-earnings-container").empty(),a(".oppfin-sc-card--dividend-distributions-container").empty(),a(".oppfin-sc-card--ess-change-container").empty(),a(".oppfin-sc-card--fiftytwoweek-highs-container").empty(),a(".oppfin-sc-card--fiftytwoweek-lows-container").empty(),a("#oppfin-sc-card--event-summary-container").empty(),
b.eventSummaryView.refresh(),a(".oppfin-sc-card--tooltip-content").empty().html('<p>This card highlights what&#39;s happening with your holdings across these key events.</p> <p style="padding-top:9px;">The orange notifications alert you to the latest activity that&#39;s happened today or is coming up in the next 3 days.</p>'))})},initializeHelpIcon:function(){a(".oppfin-sc-card--help-icon").on("click",function(b){b.preventDefault();b.stopPropagation();var c=a(b.currentTarget),d=c.position(),e=c.find(".oppfin-sc-card--tooltip-bubble"),
f=e.width()-16,f=d.left-9>f?f:d.left-9,d=d.top+25;c.find(".oppfin-sc-card--pointer-up").css("left",0<f?f:0);c.find(".oppfin-sc-card--tooltip-bubble").css("top",d);20<c.parent().height()?e.addClass("extra-height"):e.removeClass("extra-height");c.hasClass("oppfin-sc-card--help-active")?(b=a(b.target),!b.closest(".oppfin-sc-card--tooltip-bubble").length&&!b.hasClass(".oppfin-sc-card--tooltip-bubble")&&a(".oppfin-sc-card--help-icon").removeClass("oppfin-sc-card--help-active")):(a(".oppfin-sc-card--help-icon").removeClass("oppfin-sc-card--help-active"),
c.addClass("oppfin-sc-card--help-active"))})},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){return this},refresh:function(){}})});
define("views/card-ma-gics-sector-view",["jquery","views/base-view"],function(a,b){function g(b){b.$anchor.attr("data-tooltipsection");a(".gics-sector-card--tooltip-section-").addClass(c)}var c="gics-sector-card--tooltip-section-active";return b.extend({events:{"click .syndicated-promo--link syn-ctac":"clickPerformanceLink"},destroy:function(){this.tooltip=null;this.$el.empty();this.undelegateEvents()},initialize:function(){var b=a(".base-popup.gics-sector-card--tooltip").BasePopup(),c=a(".fid-card.fid-card--gics-sector"),
h=a(".syn-icon--question-mark");h.on(FID.DynamicTooltip.event.anchorClicked,g);this.tooltip=new FID.DynamicTooltip(c,h,b);this.loadChart()},loadChart:function(){var b=a("#gicsResponseHidden").text(),c=a("#bmkResponseHidden").text();if("true"!=a("#maNoSectorData").text()){for(var b=JSON.parse(b).sectorClassification.sectorDetails.sectorDetail,c=JSON.parse(c).benchmarkSectorClassification.benchmarkSectorDetails.benchmarkSectorDetail[0].sectorDetails.sectorDetail,h=[],f=[],j=0;j<b.length;j++)h.push(b[j].sectorPct);
for(j=0;j<c.length;j++)f.push(c[j].sectorPct);h=0<h.length?Math.max.apply(Math,h):b.sectorPct;f=Math.max.apply(Math,f);h=h>f?h:f;j=Math.ceil(h%10);h=Math.ceil(h);f=0;f=100==h||100==h?h:h+10-j;a("#scaleMax").html(f+"%");var h=1,g,l,p;if(0<b.length)for(var m=0;m<b.length;m++){var n=b[m],j=n.sectorPct.toFixed(2);sectorName=n.sectorName;for(n=0;n<c.length;n++)if(g=c[n],g.sectorName==sectorName){p=g.sectorPct.toFixed(2);break}n=0.5*j/f;n=(100*n).toFixed(2)+"%";g=0.5*p/f;var r=(100*g).toFixed(2)+"%";g=
"#data-"+h;l="#line-"+h;a(g).css("width",n);a(g).show();a(l).css("margin-left",r);a(l).show();a("#dataPercent"+h).text(j+"%");a("#dataTTExp"+h).text(j+"%");a("#lineTTIndex"+h).text(p+"%");a("#ttDifference"+h).text((j-p).toFixed(2)+"%");a(g).css("width",n);a(l).css("margin-left",r);h++}else{j=b.sectorPct.toFixed(2);sectorName=b.sectorName;for(n=0;n<c.length;n++)g=c[n],g.sectorName==sectorName&&(p=g.sectorPct.toFixed(2));n=(100*(0.5*j/f)).toFixed(2)+"%";r=(100*(0.5*p/f)).toFixed(2)+"%";g="#data-"+h;
l="#line-"+h;a(g).css("width",n);a(g).show();a(l).css("margin-left",r);a(l).show();a("#dataPercent"+h).text(j+"%");a("#dataTTExp"+h).text(j+"%");a("#lineTTIndex"+h).text(p+"%");a("#ttDifference"+h).text((j-p).toFixed(2)+"%");a(g).css("width",n);a(l).css("margin-left",r)}}},clickPerformanceLink:function(){this.context.router.navigate("performance",{trigger:!0})},render:function(){return this}})});
define("tasks/top-headline-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/snippet/newsParseHeadline",dataType:"text",buildParams:function(){return encodeURI("headlinesNumber=3")}})});
define("views/card-market-index-view","jquery views/base-view tasks/chart-index-task tasks/top-headline-task util/constants highcharts".split(" "),function(a,b,g,c){function e(b){if(0!==self.$(".market-chart-card--chart-container").length){var c=a(self.$(".market-chart-card--chart-container")[0]).width(),d=a(self.$(".market-chart-card--chart-container")[0]).height();b.setSize(c,d,!1)}}var d,h,f,j;a(document).bind("MAIN_WINDOW_RESIZE",function(){clearTimeout(j);j=setTimeout(function(){d&&e(d);h&&e(h);
f&&e(f);j=null},200)});var k=function(b,c,d){var e=Highcharts.Chart;b={renderTo:b[0],margin:0,type:"series"};var f=[{data:c,name:"USD to EUR",type:"line"}],j=[{color:"#C3C3C3",width:1,value:d}],h=c.concat([d]),g=Infinity;a.each(h,function(a,b){var c=b-0.001*b;c<g&&(g=c)});h=g;c=c.concat([d]);var k=-Infinity;a.each(c,function(a,b){var c=b+0.001*b;c>k&&(k=c)});return new e({chart:b,credits:{enabled:!1},legend:{enabled:!1},plotOptions:{line:{lineWidth:1.5,color:"#316BC7",states:{hover:{enabled:!1}},
marker:{enabled:!1}},series:{fillOpacity:0}},series:f,title:{text:null},tooltip:{enabled:!1},xAxis:{gridLineWidth:0,labels:{enabled:!1,formatter:function(){}},lineWidth:0,max:130,maxPadding:0.5,tickWidth:0,title:{text:null},type:"datetime"},yAxis:{gridLineWidth:0,labels:{enabled:!1},plotLines:j,title:{text:null},min:h,max:k}})};return b.extend({events:{},initialize:function(){this.redirectURL=envMap.ERESEARCH_URL_VALUE+"/eresearch/goto/markets_sectors/landing.jhtml";this.remainHour="";this.symbols=
{".DJI":{name:"DJIA",chartContainer:".djia-chart-container",percentContainer:".djia-percent-change-container",lastPriceContainer:".djia-last-price-container",changeValueContainer:".djia-change-value-container",marketChangeContainer:".djia-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".SPX":{name:"S&P 500",chartContainer:".sp-500-chart-container",percentContainer:".sp-500-percent-change-container",lastPriceContainer:".sp-500-last-price-container",
changeValueContainer:".sp-500-change-value-container",marketChangeContainer:".sp-500-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".IXIC":{name:"NASDAQ",chartContainer:".nasdaq-chart-container",percentContainer:".nasdaq-percent-change-container",lastPriceContainer:".nasdaq-last-price-container",changeValueContainer:".nasdaq-change-value-container",marketChangeContainer:".nasdaq-market-change-container",percentChange:0,changeValue:0,
lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""}};this.error={occur:!1,errorMsg:""}},render:function(){return this},refresh:function(){},reload:function(){this._requestChartData()},_updateTopNews:function(){var b=this;(new c({context:this,onPreExecute:function(){},onSuccess:function(a){b._parseHeadlineData(a)},onError:function(){b.error.occur=!0;b.error.errorMsg="Your today's markets information is temporarily unavailable. Please try again later."},onComplete:function(){b.error.occur?b._handleError():
(a("#HeadLineDispRegion").html(b.newsLink),a("#HeadLineURL").val(b.urlLink),a("#HeadLineTopic").val(b.topName))}})).run()},_parseHeadlineData:function(a){this.newsLink=this.topName=this.urlLink="";if((a=/<div class="news-content">.*?<a.*?href=".*news\/article\/top-news\/(.+?)".*>(.+)<\/a>.*?<\/div>/gim.exec(a.replace(/[\r\n]/g,"")))&&2<a.length)this.newsLink=a[0],this.urlLink=a[1],this.topName=a[2]},_drawChart:function(){d=k(a(this.symbols[".DJI"].chartContainer),this.symbols[".DJI"].dataArray,this.symbols[".DJI"].prevClose);
h=k(a(this.symbols[".SPX"].chartContainer),this.symbols[".SPX"].dataArray,this.symbols[".SPX"].prevClose);f=k(a(this.symbols[".IXIC"].chartContainer),this.symbols[".IXIC"].dataArray,this.symbols[".IXIC"].prevClose);a(window).resize()},_setFlagsForMeasurement:function(a){a.data("todaysMarketsVersion",{oldVersion:!0,newVersion:{market:!1,premarket:!1}})},_updatePage:function(){this.$(this.symbols[".DJI"].percentContainer).html("("+this.symbols[".DJI"].percentChange+"%)");this.$(this.symbols[".DJI"].lastPriceContainer).html(this.symbols[".DJI"].lastPrice);
this.$(this.symbols[".DJI"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(this.symbols[".DJI"].type);this.$(this.symbols[".DJI"].changeValueContainer).html(this.symbols[".DJI"].changeValue);this.$(this.symbols[".SPX"].percentContainer).html("("+this.symbols[".SPX"].percentChange+"%)");this.$(this.symbols[".SPX"].lastPriceContainer).html(this.symbols[".SPX"].lastPrice);this.$(this.symbols[".SPX"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(this.symbols[".SPX"].type);
this.$(this.symbols[".SPX"].changeValueContainer).html(this.symbols[".SPX"].changeValue);this.$(this.symbols[".IXIC"].percentContainer).html("("+this.symbols[".IXIC"].percentChange+"%)");this.$(this.symbols[".IXIC"].lastPriceContainer).html(this.symbols[".IXIC"].lastPrice);this.$(this.symbols[".IXIC"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(this.symbols[".IXIC"].type);this.$(this.symbols[".IXIC"].changeValueContainer).html(this.symbols[".IXIC"].changeValue);
this.$(".market-remain-hour-container").html(this.remainHour);this.$(".market-index-redirect-URL").attr("href",this.redirectURL);var a=this.$el.parents(".card-layout--card-content");a.length&&this._setFlagsForMeasurement(a)},_requestChartData:function(){var b=this;(new g({context:this,onPreExecute:function(){},onSuccess:function(a){b._parseChartData(a)},onError:function(){b.error.occur=!0;b.error.errorMsg="Your today's markets information is temporarily unavailable. Please try again later."},onComplete:function(){b.error.occur?
b._handleError():(b._updatePage(),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"))}})).run()},_parseChartData:function(a){try{this._cleanData();for(var b=a.ChartResponse.CHART.QuoteData,c=0;c<b.length;c++){var d=b[c],e=+d.PC,f=this.symbols[d.Symbol];"undefined"!=typeof f&&(f.lastPrice=d.LP,f.changeValue=0<d.CV?"+"+d.CV:d.CV,0<e?(f.percentChange="+"+e,f.type="color-positive"):0>e?(f.percentChange=e,f.type="color-negative"):(f.percentChange=e,f.type=""))}if(a.ChartResponse.CHART.remainedHours)if("true"===
a.ChartResponse.CHART.isClosedInd){c=b="";if(a.ChartResponse.CHART.asOfTime){b=a.ChartResponse.CHART.asOfTime.substr(a.ChartResponse.CHART.asOfTime.indexOf("/")-2,a.ChartResponse.CHART.asOfTime.length);for(d=0;d<a.ChartResponse.CHART.ChartData.length;d++)if(a.ChartResponse.CHART.ChartData[d].Date){c=a.ChartResponse.CHART.ChartData[d].Date;break}}this.remainHour=""!==c&&""!==b&&b!==c?"as of Market Close "+c:"Markets Closed"}else this.remainHour="Markets close in "+a.ChartResponse.CHART.remainedHours;
else this.remainHour="Market close time not available"}catch(j){this.error.occur=!0,this.error.errorMsg="Your today's markets information is temporarily unavailable. Please try again later."}},_handleError:function(){this.$(".market-chart-card--error-text-container").text(this.error.errorMsg);this.$(".market-chart-list").addClass("display-none");this.$(".market-index-redirect-URL").addClass("display-none");this.$(".market-chart-card--error-section").removeClass("display-none")},_cleanData:function(){this.symbols[".DJI"].dataArray=
[];this.symbols[".DJI"].percentChange=0;this.symbols[".DJI"].changeValue=0;this.symbols[".DJI"].lastPrice=0;this.symbols[".DJI"].type="";this.symbols[".SPX"].dataArray=[];this.symbols[".SPX"].percentChange=0;this.symbols[".SPX"].changeValue=0;this.symbols[".SPX"].lastPrice=0;this.symbols[".SPX"].type="";this.symbols[".IXIC"].dataArray=[];this.symbols[".IXIC"].percentChange=0;this.symbols[".IXIC"].changeValue=0;this.symbols[".IXIC"].lastPrice=0;this.remainHour=this.symbols[".IXIC"].type="";f=h=d=null;
this.error.errorMsg="";this.error.occur=!1}})});
(function(a){"function"===typeof define&&define.amd?define("wookmark",["jquery"],a):a(jQuery)})(function(a){var b,g;g=function(a,b){return function(){return a.apply(b,arguments)}};b={align:"center",autoResize:!1,comparator:null,container:a("body"),ignoreInactiveItems:!0,itemWidth:0,fillEmptySpace:!1,flexibleWidth:0,direction:void 0,offset:2,onLayoutChanged:void 0,outerOffset:0,resizeDelay:50};var c=function(c,d){this.handler=c;this.columns=this.containerWidth=this.resizeTimer=null;this.activeItemCount=
0;this.itemHeightsDirty=!0;this.placeholders=[];a.extend(!0,this,b,d);this.update=g(this.update,this);this.onResize=g(this.onResize,this);this.onRefresh=g(this.onRefresh,this);this.getItemWidth=g(this.getItemWidth,this);this.layout=g(this.layout,this);this.layoutFull=g(this.layoutFull,this);this.layoutColumns=g(this.layoutColumns,this);this.filter=g(this.filter,this);this.clear=g(this.clear,this);this.getActiveItems=g(this.getActiveItems,this);this.refreshPlaceholders=g(this.refreshPlaceholders,this);
this.sortElements=g(this.sortElements,this);for(var h=0,f=0,j={},k,l,p;h<c.length;h++)if(l=c.eq(h),k=l.data("filterClass"),"object"==typeof k&&0<k.length)for(f=0;f<k.length;f++)p=a.trim(k[f]).toLowerCase(),p in j||(j[p]=[]),j[p].push(l[0]);this.filterClasses=j;this.autoResize&&a(window).bind("resize.wookmark",this.onResize);this.container.bind("refreshWookmark",this.onRefresh)};c.prototype.update=function(b){this.itemHeightsDirty=!0;a.extend(!0,this,b)};c.prototype.onResize=function(){clearTimeout(this.resizeTimer);
this.itemHeightsDirty=0!==this.flexibleWidth;this.resizeTimer=setTimeout(this.layout,this.resizeDelay)};c.prototype.onRefresh=function(){this.itemHeightsDirty=!0;this.layout()};c.prototype.filter=function(b,c){var h=[],f,j=a(),g,l,p;b=b||[];c=c||"or";if(b.length){for(g=0;g<b.length;g++)p=a.trim(b[g].toLowerCase()),p in this.filterClasses&&h.push(this.filterClasses[p]);f=h.length;if("or"==c||1==f)for(g=0;g<f;g++)j=j.add(h[g]);else if("and"==c){p=h[0];var m=!0,n,r,s;for(g=1;g<f;g++)h[g].length<p.length&&
(p=h[g]);for(g=0;g<p.length;g++){r=p[g];m=!0;for(f=0;f<h.length&&m;f++)if(s=h[f],p!=s){l=0;for(n=!1;l<s.length&&!n;l++)n=s[l]==r;m&=n}m&&j.push(p[g])}}this.handler.not(j).addClass("inactive")}else j=this.handler;j.removeClass("inactive");this.columns=null;this.layout()};c.prototype.refreshPlaceholders=function(b,c){for(var h=this.placeholders.length,f,j,g=this.columns.length,l,p,m=this.container.innerHeight();h<g;h++)f=a('<div class="wookmark-placeholder"/>').appendTo(this.container),this.placeholders.push(f);
p=this.offset+2*parseInt(this.placeholders[0].css("borderWidth"),10);for(h=0;h<this.placeholders.length;h++)if(f=this.placeholders[h],j=this.columns[h],h>=g||!j[j.length-1])f.css("display","none");else if(j=j[j.length-1])l=j.data("wookmark-top")+j.data("wookmark-height")+this.offset,j=m-l-p,f.css({position:"absolute",display:0<j?"block":"none",left:h*b+c,top:l,width:b-p,height:j})};c.prototype.getActiveItems=function(){return this.ignoreInactiveItems?this.handler.not(".inactive"):this.handler};c.prototype.getItemWidth=
function(){var a=this.itemWidth,b=this.container.width(),c=this.handler.eq(0),f=this.flexibleWidth;void 0===this.itemWidth||0===this.itemWidth&&!this.flexibleWidth?a=c.outerWidth():"string"==typeof this.itemWidth&&0<=this.itemWidth.indexOf("%")&&(a=parseFloat(this.itemWidth)/100*b);f&&("string"==typeof f&&0<=f.indexOf("%")&&(f=parseFloat(f)/100*b-c.outerWidth()+c.innerWidth()),c=~~(1+b/(f+this.offset)),a=Math.max(a,~~((b-(c-1)*this.offset)/c)),this.handler.css("width",a));return a};c.prototype.layout=
function(a){if(this.container.is(":visible")){var b=this.getItemWidth()+this.offset,c=this.container.width()-2*this.outerOffset,f=~~((c+this.offset)/b),j=0,g=0,j=0,g=this.getActiveItems(),l=g.length,p;if(this.itemHeightsDirty){for(;j<l;j++)p=g.eq(j),p.data("wookmark-height",p.outerHeight());this.itemHeightsDirty=!1}f=Math.max(1,Math.min(f,l));j=this.outerOffset;"center"==this.align&&(j+=~~(0.5+(c-(f*b-this.offset))>>1));this.direction=this.direction||("right"==this.align?"right":"left");g=!a&&null!==
this.columns&&this.columns.length==f&&this.activeItemCount==l?this.layoutColumns(b,j):this.layoutFull(b,f,j);this.activeItemCount=l;this.container.css("height",g);this.fillEmptySpace&&this.refreshPlaceholders(b,j);if(void 0!==this.onLayoutChanged&&"function"===typeof this.onLayoutChanged)this.onLayoutChanged()}};c.prototype.refreshHeightOnly=function(){this.itemHeightsDirty=!0;var a=this.onLayoutChanged;this.onLayoutChanged=null;this.layout.call(this,!0);this.onLayoutChanged=a};c.prototype.sortElements=
function(a){return"function"===typeof this.comparator?a.sort(this.comparator):a};c.prototype.layoutFull=function(b,c,h){var f,j=0,g=0,l=a.makeArray(this.getActiveItems()),p=l.length,m=null,n=null,r={position:"absolute"},s=[],v="left"==this.align?!0:!1;this.columns=[];for(l=this.sortElements(l);s.length<c;)s.push(this.outerOffset),this.columns.push([]);for(;j<p;j++){f=a(l[j]);m=s[0];for(g=n=0;g<c;g++)s[g]<m&&(m=s[g],n=g);g=h;if(0<n||!v)g+=n*b;r[this.direction]=g;r.top=m;f.css(r).data("wookmark-top",
m);s[n]+=f.data("wookmark-height")+this.offset;this.columns[n].push(f)}return Math.max.apply(Math,s)};c.prototype.layoutColumns=function(a,b){for(var c=[],f=0,j=0,g,l,p,m,n;f<this.columns.length;f++){c.push(this.outerOffset);l=this.columns[f];n=f*a+b;g=c[f];for(j=0;j<l.length;j++)p=l[j],m={top:g},m[this.direction]=n,p.css(m).data("wookmark-top",g),g+=p.data("wookmark-height")+this.offset;c[f]=g}return Math.max.apply(Math,c)};c.prototype.clear=function(){clearTimeout(this.resizeTimer);a(window).unbind("resize.wookmark",
this.onResize);this.container.unbind("refreshWookmark",this.onRefresh)};a.fn.wookmark=function(a){this.wookmarkInstance?this.wookmarkInstance.update(a||{}):this.wookmarkInstance=new c(this,a||{});this.wookmarkInstance.layout(!0);return this.show()}});
(function(a){function b(a,b){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(d)}}a.support.touch="ontouchend"in document;if(a.support.touch){var g=a.ui.mouse.prototype,c=g._mouseInit,e=g._mouseDestroy,d;g._touchStart=function(a){!d&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(d=!0,this._touchMoved=
!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))};g._touchMove=function(a){d&&(this._touchMoved=!0,b(a,"mousemove"))};g._touchEnd=function(a){d&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),d=!1)};g._mouseInit=function(){this.element.bind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,"_touchMove"),touchend:a.proxy(this,"_touchEnd")});c.call(this)};g._mouseDestroy=function(){this.element.unbind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,
"_touchMove"),touchend:a.proxy(this,"_touchEnd")});e.call(this)}}})(jQuery);define("lib/jquery-ui-touch",["jqueryui"],function(){});
(function(a){function b(b){this.$elem=a(b)}function g(a){this.container=a.container||a.root;this.root=a.root||a.container;this.options=a;this.delegateEvent();this.createLayoutItems()}b.prototype.prop=function(a){a&&("width"in a&&this.$elem.outerWidth(a.width),"height"in a&&this.$elem.outerHeight(a.height),"top"in a&&this.$elem.css("top",a.top),"left"in a&&this.$elem.css("left",a.left));return{width:this.$elem.outerWidth(),height:this.$elem.outerHeight(),top:this.$elem.css("top"),left:this.$elem.css("left")}};
b.prototype.isLocked=function(){return this.$elem.data("locked")};b.prototype.lockPosition=function(){return this.$elem.data("lock-position")};b.prototype.shadow=function(){if(this.shadowItem)return this.shadowItem;var a=this.shadowItem=new b(this.$elem);a.prop=function(){return b.prototype.prop.call(this)};return a};g.prototype.layoutIndex=function(a){if(!this.layoutItems)return-1;for(var b=0;b<this.layoutItems.length;b++)if(this.layoutItems[b].$elem[0]===a)return b;return-1};g.prototype.delegateEvent=
function(){this.unDelegateEvent();var b=this;a(this.container).on("mousemove.shipit",function(e){b.pageX=e.pageX;b.pageY=e.pageY;e=a(b.container).offset();b.indexAtAxis(b.pageX-e.left,b.pageY-e.top)})};g.prototype.destroy=function(){this.unDelegateEvent();a(this.root).removeData("shipit-instance");this.stopDragging();a(this.container).find(this.options.elemSelector).removeData("layout-item")};g.prototype.unDelegateEvent=function(){a(this.container).off(".shipit")};g.prototype.startDragging=function(){var b=
this;a(this.container).find(this.options.elemSelector).filter(function(b,c){return!a(c).data("locked")}).draggable({start:function(){},stop:function(e){setTimeout(function(){var d=a(b.container).offset(),d=b.indexAtAxis(b.pageX-d.left,b.pageY-d.top),h=a(e.target);0<=d&&(b.layoutItems=b.preMoveItem(b.itemIndex(h),d));b.layout()})},drag:function(e){var d=a(b.container).offset(),d=b.indexAtAxis(b.pageX-d.left,b.pageY-d.top);e=a(e.target);e=b.itemIndex(e);b.preMoveItem(e,d)}})};g.prototype.stopDragging=
function(){a(this.container).find(this.options.elemSelector).each(function(b,e){var d=a(e);d.hasClass("ui-draggable")&&d.draggable("destroy")})};g.prototype.updateDragging=function(){this.stopDragging();this.startDragging()};g.prototype.createLayoutItems=function(){return this.layoutItems=a(this.container).find(this.options.elemSelector).filter(function(b,e){return a(".js-centerWellCard-card-layout").data("is-sally-customer-flag")?a(e).data("oncheck")||"undefined"===typeof a(e).data("oncheck")||a(e).data("tcmid")==
a(".js-centerWellCard-card-layout").data("emoney-tcmid"):!a(e).data("layoutHidden")}).map(function(c,e){var d=a(e),h=d.data("layout-item");h||(h=new b(d),d.data("layout-item",h));return h}).get()};g.prototype.items=function(){return a(a.map(this.layoutItems,function(a){return a.$elem[0]}))};g.prototype.preMoveItem=function(b,e){var d=this.layoutItems.concat([]),d=a.map(d,function(a){return a.$elem.hasClass("ui-draggable-dragging")?a.shadow():a});if(b!=e){var h=d.splice(b,1);d.splice(e,0,h[0]);this.recalculateLockedCards(d)}this.layoutInternal(d);
return d};g.prototype.recalculateLockedCards=function(a){a||(a=this.layoutItems);for(var b=a.filter(function(a){return a.isLocked()}).sort(function(a,b){return a.lockPosition()>b.lockPosition()?1:-1}),d=0;d<b.length;d++)a.splice(a.indexOf(b[d]),1);for(d=0;d<b.length;d++)a.splice(b[d].lockPosition(),0,b[d])};g.prototype.itemIndex=function(b){b=b.data("layout-item");return a.inArray(b,this.layoutItems)};g.prototype.layout=function(){return this.layoutInternal(this.layoutItems)};g.prototype.layoutInternal=
function(b){for(var e=0,d=this.containerWidth=a(this.container).innerWidth(),h=this.itemTops=[],f=this.itemSequence=[],j=this.options.margin||0,g=this.columns="function"===typeof this.options.columns?this.options.columns():this.options.columns,l=0;l<g;l++)h[l]=[0];var p=(d+j)/g;a.each(b,function(b,c){var d=a.map(h,function(a){return a[a.length-1]});c.prop({width:p-j});var g=Math.min.apply(Math,d),k=a.inArray(g,d),l=c.prop({top:g,left:p*k}).height+j,d=d[k]+l;h[k].push(d);f.push([k,d]);e=Math.max(e,
g+l)});a(this.container).innerHeight(e)};g.prototype.indexAtAxis=function(b,e){for(var d=this.itemSequence,h=Math.floor(b*this.columns/this.containerWidth),f=0;f<d.length;f++){var j=d[f];if(h==j[0]&&j[1]>=e)if(d=a(this.container).find(this.options.elemSelector).eq(f),d.length&&d.data("locked"))break;else return f}return-1};a.fn.shipit=function(b){if("string"===typeof b){var e=this.data("shipit-instance");return e?g.prototype[b].apply(e,Array.prototype.slice.call(arguments,1)):this}e=new g(a.extend({root:this},
b));this.data("shipit-instance",e);return this};a.fn.shipit.LayoutItem=b})(jQuery);define("lib/masonry-layout-shipit",["lib/jquery-ui-touch"],function(){});
define("views/masonry-layout-view",["jquery","views/base-view","wookmark","lib/masonry-layout-shipit"],function(a,b){var g="not-initialized",c=[];return b.extend({initialize:function(b){this.init(b.view||"lagacy");var c=this;a(document).on("switch_masonry_layout",function(a,b){console.log(b);c.init(b||lagacy)});a(document).on("set_handler_for_lagacy_layout",function(b,e){"lagacy"===e&&c.setHandler(a(".card-layout--card-content"))})},init:function(b){b!==g&&(this.clear(),"moveit"===b?(a("body").addClass("card-layout--editable"),
a(document).on("this.context.constants.EVENTS.CARDS_LAYOUT.shipit",function(){a(".account-content").shipit("layout");a(document).trigger("CARD_LAYOUT_CHANGED")}),a(document).unbind("RELAYOUT_CARD_HEIGHT").bind("RELAYOUT_CARD_HEIGHT.summaryCards",function(){a(".account-content").shipit("layout")}),a(document).on("RELAYOUT_CARD_HEIGHT.shipit",function(){a(".account-content").shipit("layout")}),a(window).on("resize.shipit",function(){a(".account-content").shipit("layout")}),a(".account-content").shipit({columns:function(){return Math.min(Math.max(Math.ceil(a("#display-layout").innerWidth()/
660),1),3)},elemSelector:".card-layout--card-content",margin:17,container:"#card-layout--cards"})):this.setHandler(a(".card-layout--card-content")),g=b)},clear:function(){"moveit"===g?(a(window).off(".shipit"),a(document).off(".shipit"),a(".account-content").shipit("destroy")):(a.each(c,function(a,b){b&&b.clear&&b.clear()}),c=[])},setHandler:function(b){if("moveit"!==g){this.clear();this.handler=b;var d=this;b=a("#card-layout--cards");this.wookmarkInstance=this.handler.wookmark({autoResize:!0,container:b,
itemWidth:300,offset:17,flexibleWidth:660,onLayoutChanged:function(){a(document).trigger("CARD_LAYOUT_CHANGED")}}).wookmarkInstance;c.push(this.wookmarkInstance);a(document).unbind("this.context.constants.EVENTS.CARDS_LAYOUT").bind("this.context.constants.EVENTS.CARDS_LAYOUT.summaryCards",function(){d.refresh()});a(document).unbind("RELAYOUT_CARD_HEIGHT").bind("RELAYOUT_CARD_HEIGHT.summaryCards",function(){d.wookmarkInstance&&d.wookmarkInstance.refreshHeightOnly&&d.wookmarkInstance.refreshHeightOnly()})}},
refresh:function(){if("moveit"===g){a(".card-layout--card-content").each(function(b,c){a(".js-centerWellCard-card-layout").data("is-sally-customer-flag")?(a(c).data("oncheck")||a(c).data("tcmid")==a(".js-centerWellCard-card-layout").data("emoney-tcmid"))&&a(c).css({position:"absolute",display:"block"}):a(c).data("layoutHidden")||a(c).css({position:"absolute",display:"block"})});a(".account-content").shipit("createLayoutItems");a(".account-content").shipit("delegateEvent");a(".account-content").shipit("layout");
var b=0,c=setInterval(function(){a(document).trigger("CARD_LAYOUT_CHANGED");3<b++&&clearInterval(c)},1E3)}else return this.clear(),this.setHandler(this.handler),this}})});
define("views/card-active-trader-pro-view",["jquery","views/base-view"],function(a,b){return b.extend({events:{"click .active-trader-card--active-trader-link, a":"launchATP"},initialize:function(){},render:function(){return this},launchATP:function(a){var b;if(null==b||b.closed){b=Math.min(1206,screen.width-74);var e=Math.min(912,screen.height-112);b=window.open(envMap.SCS_URL_VALUE+"/customeronly/atbt/Atbt.shtml","","location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes,left=32,top=32,height="+
e+",width="+b)}b.focus();a.preventDefault();return!1}})});
define("views/balance-over-time-ngapp-view",["jquery","backbone","views/base-view","util/progressbar","models/account-context-model"],function(a,b,g,c,e){return g.extend({accounts:"",isNarrativeCard:!1,tcmId:"",portfolioFormattedBalance:"",NBRETAIL_URL_VALUE:"",cardStatus:"expand",isHaveWIAccounts:!1,totalAcctCountWithoutCreditCard:1,isEnabledSinceLastLogin:!1,totalTodayChangeValue:"",totalTodayChangePercent:"",rorVal:0,asOfTime:"",daysAndMonths:"",lastLoginTime:"",defaults:{appName:"ap115488AtBalanceOverTime",
basePath:envMap.DPCS_URL+"balances-overtime/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(b){this.options=b||{};this.defaults.basePath=envMap.DIGITAL_APP_URL+"balances-overtime/";this.defaults.pathToBundles="";this.options=_.extend({},this.defaults,this.options);this.isNarrativeCard=b.isNarrativeCard;this.$wrapperClass=this.$el;if(!0===this.isNarrativeCard)a(window).on("resize.summaryCards",function(){a(document).trigger("CARD_LAYOUT_CHANGED.summaryCards.botChartReflow")});
this.$wrapperClass.empty().removeClass()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(b,c,f){b=this.getInitData();window.toggleMap&&toggleMap.dpcsBalanceOverTimeAMCEnable&&(b.amc=e.get("AMC"));this.$wrapperClass.append('<div id="bot-assets" init-data="'+JSON.stringify(b).replace(/"/g,"'")+'"><h2 class="fid-card--title hidden">Your Balance History</h2></div>');a(c).attr("data-app-path",f)},bootstrap:function(b,c,e){require([b],function(){a(c).hasClass("ng-scope")||
angular.bootstrap(angular.element(c),[e])})},getInitData:function(){return{isNarrativeCard:this.isNarrativeCard,accounts:this.accounts,tcmId:this.tcmId,NBRETAIL_URL_VALUE:this.NBRETAIL_URL_VALUE,portfolioFormattedBalance:this.portfolioFormattedBalance,cardStatus:this.cardStatus,isHaveWIAccounts:this.isHaveWIAccounts,totalAcctCountWithoutCreditCard:this.totalAcctCountWithoutCreditCard,isEnabledSinceLastLogin:this.isEnabledSinceLastLogin,totalTodayChangeValue:this.totalTodayChangeValue,totalTodayChangePercent:this.totalTodayChangePercent,
asOfTime:this.asOfTime,rorVal:this.rorVal,daysAndMonths:this.daysAndMonths,lastLoginTime:this.lastLoginTime}},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName;this.insertMarkup(c,"#"+c,b,b+this.options.pathToBundles+this.options.cssBundle);a.ajax({type:"GET",url:b+"home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#bot-assets").html(b)})},refresh:function(){this.renderMicroApp();c.hideLoading()},setExternalCommonData:function(a,b,c){this.accounts=
a;this.NBRETAIL_URL_VALUE=b;this.isHaveWIAccounts=c},setExternalNarrativeData:function(a,b,c,e,g,l,p){this.tcmId=a;this.portfolioFormattedBalance=b.formattedBalance;this.cardStatus=c;this.totalAcctCountWithoutCreditCard=e;this.isEnabledSinceLastLogin=g;this.totalTodayChangeValue=b.totalTodayChangeValue;this.totalTodayChangePercent=b.totalTodayChangePercent;this.rorVal=b.rorVal&&!isNaN(b.rorVal)?b.rorVal:0;this.asOfTime=b.asOfTime;this.daysAndMonths=l||"";this.lastLoginTime=p||""}})});
define("tasks/activity-card-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/fcmaPendingTxns",type:"POST",buildParams:function(a){var c=b.get("AMC");a=this.$(a.accounts).map(function(a,b){return b.acctNum}).get();return 0<a.length?"ACCOUNTS="+a.join(",")+"&AMC="+c:"AMC="+c}})});
define("ngtimer",["jquery"],function(a){var b=0<window.location.search.indexOf("benchmark=Y"),g=function(){};return{startTimer:b?function(){this.timer={startTime:(new Date).getTime()};this.started=!0}:g,endTimer:b?function(b){this.started&&(this.started=!1,this.timer.endTime=(new Date).getTime(),this.timer.timerName=b||"default",console&&console.log(a.map(this.timer,function(a,b){return b+":"+a}).join()))}:g}});
(function(a){var b=window.FID=window.FID||{};b.Expander=function(b,c){var e=a(b),d=e.length,h=null,f=this,j=a(c),h=j.length;1<d&&(e=a(e[0]));1<h&&(j=a(j[0]));1>j.length&&(j=e.find(".expander--content"));h=e.find(".expander--title");1>h.length&&(h=e);this._$domElement=e;this._$container=j;this._$toggleTitle=h;this._isBrowserLessThanIE9=a("html").hasClass("lt-ie9");h.on("click",function(){f.Toggle.apply(f);f._isBrowserLessThanIE9&&(f._$toggleTitle.blur(),f._$toggleTitle.focus())});h.on("keydown",function(a){var b=
a.keyCode;if(13===b||32===b)a.preventDefault(),f.Toggle.apply(f,null)});e.on("focus",function(){e.attr("aria-selected","true")});e.on("blur",function(){e.attr("aria-selected","false")})};b.Expander.prototype.Toggle=function(){this._$domElement.hasClass("expanded")?this.close():this.open()};b.Expander.prototype.open=function(){var a=this._$domElement,b=this._$container;a.hasClass("expanded")||(a.removeClass("collapsed").addClass("expanded"),b&&b.removeClass("collapsed").addClass("expanded").attr("aria-expanded",
"true").attr("aria-hidden","false"))};b.Expander.prototype.close=function(){var a=this._$domElement,b=this._$container;a.hasClass("collapsed")||(a.removeClass("expanded").addClass("collapsed"),b&&b.removeClass("expanded").addClass("collapsed").attr("aria-expanded","false").attr("aria-hidden","true"))};b.Expander.prototype.isOpen=function(){return this._$domElement.hasClass("expanded")};return b.Expander})(jQuery);define("components/expander",function(){});
(function(a,b){var g="collapsed",c="expanded",e="aria-expanded",d="aria-hidden",h=b.FID=b.FID||{};h.Applications=h.Applications||{};var h=b.FID=b.FID||{},f=h.Expander,j=h.extend=h.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},f=h.Expander,k=function(b){var c=a(b.domElement),d=c.parents(".card-layout--card-content,.card-layout--welcome-card-content,.card-layout--narrative-card-content"),e=d.find(".fid-card"),
j=a(b.container),k=j.find(".fid-card--body"),v,A=j.find(".fid-card--header"),w=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1;if(1!==c.length)throw"Exception: Invalid DOM element.";j.parents(".card-layout-card-wrapper--work-around").length&&(k=j.parents(".card-layout--card-wrapper").next("div"),k.hasClass("card-layout--card-wrapper")&&(k=k.find(">*")));f.prototype.constructor.call(this,
c,j);"undefined"===typeof b.animate&&(v=!0);w&&(8>w&&"undefined"!==typeof h.MasonryLayout)&&(v=!1);this._$cardHeader=A;this._$cardBody=k;this._animate=v;this._$parentContainer=d;this._$fidCard=e;d.hasClass(g)?this.close(!0):this.open(!0)};h.CardCollapser=k;j(k,f);k.Events={CardCollapserCloseInitiated:"cardCollapserCloseInitiated",CardCollapserCloseComplete:"cardCollapserCloseComplete",CardCollapserOpenInitiated:"cardCollapserOpenInitiated",CardCollapserOpenComplete:"cardCollapserOpenComplete"};k.prototype.close=
function(b){function j(){r.removeClass(c).addClass(g);s.removeAttr(e).removeAttr(d);h.attr(e,"false").attr(d,"true")}var h=this._$cardBody;if(!h.hasClass("is-animating")){var n=this._animate,r=this._$parentContainer,s=this._$fidCard,v=this._$cardHeader,A=this._$domElement,w=a.Event(k.Events.CardCollapserCloseInitiated),z=a.Event(k.Events.CardCollapserCloseComplete,{animate:n,$container:this._$container});A.trigger(w);f.prototype.close.apply(this,arguments);!1===n||b?(h.hide(),j(),A.trigger(z)):h.addClass("is-animating").fadeTo("fast",
0,function(){setTimeout(function(){v.addClass("collapsed-header");h.slideUp("fast",function(){h.removeClass("is-animating");j();A.trigger(z)})},200)})}};k.prototype.open=function(b){function j(){r.removeClass(g).addClass(c);s.removeAttr(e).removeAttr(d);h.attr(e,"true").attr(d,"false")}var h=this._$cardBody;if(!h.hasClass("is-animating")){var n=this._animate,r=this._$parentContainer,s=this._$fidCard,v=this._$domElement,A=this._$cardHeader,w=a.Event(k.Events.CardCollapserOpenInitiated,{animate:n}),
z=a.Event(k.Events.CardCollapserOpenComplete,{animate:n,$container:this._$container});v.trigger(w);f.prototype.open.apply(this,arguments);A.removeClass("collapsed-header");!1===n||b?(h.show(),j(),v.trigger(z)):h.addClass("is-animating").slideDown("fast",function(){setTimeout(function(){h.fadeTo("fast",1,function(){h.removeClass("is-animating");j();v.trigger(z)})},200)})}};a.CardCollapser=a.extend(a.CardCollapser,a.Expander,{})})(jQuery,window);
define("components/card-collapser",["jquery","components/expander"],function(){});define("tasks/pending-transfer-card-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/pendingTransferCard",type:"POST",buildParams:function(a){var c=b.get("AMC");return{ACCOUNTS:this.$.map(a.accounts,function(a){return a.acctNum}).join(","),SortBy:a.sortBy||"",SortDir:a.sortDir||"",AMC:c,TimePeriod:"30"}}})});
define("tasks/recent-transactions-card-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/recentTransactionsCard",type:"POST",buildParams:function(a){var c=b.get("AMC");a=this.$(a.accounts).map(function(a,b){return b.acctNum}).get();return 0<a.length?"ACCOUNTS="+a.join(",")+"&AMC="+c:"AMC="+c}})});define("text!templates/fv-gtm-introtour.html",[],function(){return'\x3c!-- Intro Tour --\x3e\n<div class="base-popup base-modal--container base-modal--container-large introtour-modal gotomarket-modal base-popup--visible animation--visible" role="dialog" aria-label="New Accounts &amp; Trade tour" tabindex="-1">\n\n\t\x3c!-- Hidden for redundancy --\x3e\n\t<div class="base-popup--close-button gotomarket--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<ul class="gotomarket-modal--slide-content-container">\n\n\t\t\x3c!-- Intro Tour Content --\x3e\n\n\t\t<li class="gotomarket-modal--slide-content gotomarket-modal--slide-content-active clearfix" aria-live="polite">\n\n\t\t\t<div class="gotomarket-modal--slide-content-head">\n\t\t\t\t<h2 class="gotomarket-modal--container-header">New Feature:</h2>\n\t\t\t\t<h2 class="gotomarket-modal--container-header">View Your Non-Fidelity Accounts</h2>\n\t\t\t</div>\n\n\t\t\t<p class="gotomarket-modal--list-info">Your non-Fidelity accounts from Full View<sup>&reg;</sup> can now be included here, making it easy to monitor all of your accounts in one place.</p>\n\n\t\t\t<p class="gotomarket-modal--list-info">You can show or hide these accounts at any time using the Customize link above your account list.</p>\n\t\t</li>\n\n\t</ul>\n\t<div class="introtour-modal--actions">\n\t\t<div class="introtour-modal--action-container gotomarket-modal--action-container-first introtour-modal--action-container-active clearfix">\n\t\t\t<a class="gotomarket--no-thanks-button introtour-modal--close" href="javascript:void(0);">No, thanks</a>\n\t\t\t<button class="button-component button--secondary introtour-modal--close">Yes, show them now</button>\n\t\t</div>\n\t</div>\n</div>'});
define("views/fv-gtm-introtour-view","jquery views/base-view models/account-context-model IntroTour models/introtour-queue-model text!../templates/fv-gtm-introtour.html models/state-model util/eventhub-backbone util/progressbar".split(" "),function(a,b,g,c,e,d,h,f,j){var k=b.extend({initialize:function(){},showFVGTMIntroTour:function(){var b=this,c=_.template(d);a("#fv-gtm-intro-tour-wrapper").html(c);a("#ma-intro-tour-wrapper").empty();a("#intro-tour-wrapper").empty();a("#intro-tour-positions-wrapper").empty();
(new FID.Applications.IntroTour(a("#fv-gtm-intro-tour-wrapper"),".info-flyout")).open();b.trackanalyticsForGTM("GTM_PopUp");a(document).on(FID.Applications.IntroTour.events.IntroTourClosed+".fvgtmintrotour",function(c){a(document).off(FID.Applications.IntroTour.events.IntroTourClosed+".fvgtmintrotour");-1!=c.eventSource.className.indexOf("gotomarket--no-thanks-button")||-1!=c.eventSource.className.indexOf("gotomarket--close-button")?(-1!=c.eventSource.className.indexOf("gotomarket--no-thanks-button")?
b.trackanalyticsForGTM("GTM_NoThanks"):b.trackanalyticsForGTM("GTM_Close"),b.hideFVAccounts()):b.trackanalyticsForGTM("GTM_YesShow")})},saveFVCustomize:function(b){var c=!0,d=[];b.accountlist.accountList.accountHelper.forEach(function(a){a.asset.key&&d.push({accountName:a.escapedAccountName,accountNumber:a.displayAccountNumber,hideType:a.hideType,accountType:a.accountType,hidden:!0,accountGroupId:"FV",fvAccountId:a.asset.key.source.siteId})});b={csrfToken:b.accountlist.csrfToken,hideNbAccount:this.convertToBoolean(b.accountlist.nbBoxChecked),
showNbBox:this.convertToBoolean(b.accountlist.showNbBox),portfolioPrEligible:this.convertToBoolean(b.accountlist.portfolioPrEligible),hideBalances:this.convertToBoolean(b.accountlist.performanceHidden),updatedAccounts:d,updatedGroups:[],newGroups:[],deletedGroups:[]};a.ajax({url:"/ftgw/fbc/ofsummary/rest/customizeAccountsGroupSave",data:{customAccountsGroupData:JSON.stringify(b)},dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){"undefined"!=typeof a.accountsGroup.txnStatus.errorMsgs[0]&&
(c=!1)},error:function(){c=!1},complete:function(){j.hideLoading();c&&f.publishEvent("ACCOUNT_REFRESH",{rebuildCookie:!1})}})},hideFVAccounts:function(){var b=this;j.showLoading("Loading...",!0,500);a.ajax({url:"/ftgw/fbc/ofsummary/snippet/rest/customizeAccountsGroupEdit",dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(a){a.accountlist&&a.accountlist.accountList&&a.accountlist.accountList.accountHelper?b.saveFVCustomize(a):j.hideLoading()},error:function(){j.hideLoading()}})},
convertToBoolean:function(a){var b=!1;"true"===a&&(b=!0);return b},trackanalyticsForGTM:function(a){try{Bootstrapper._trackAnalytics({measID:a})}catch(b){}}});k.checkFVTourIndicator=function(){if(g.isFullViewEntitled()&&!a(".js-footer-entitlement-info").data("fvGTMIntroTour")){a(".js-footer-entitlement-info").data("fvGTMIntroTour",!0);var b=JSON.stringify({state:[{version:"1.0",path:"/user/oce/summary/introTour",entry:[{key:"fvGTMIntroTour"}]}]}),c=encodeURIComponent("/state");a.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+
c,data:b,contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(b){if(!(b&&"ERROR"==b.type)&&(b&&0==b.length)&&((new h("1.0","/user/oce/summary/introTour")).saveCardState("fvGTMIntroTour"),a(".js-has-fv-asset").data("has-fv-assets"))){var c=new k;e.addIntroTourObjQueue(function(){c.showFVGTMIntroTour()},"#fv-gtm-intro-tour-wrapper")}}})}};return k});define("text!templates/va-lazyload.html",[],function(){return'  <div id="va-lazy-load-container">\n    \x3c!-- Initialization Button --\x3e\n    <div id="va-open-button" class="va-minimized__container">\n        <button\n            #minimizedicon\n            id="va-minimized__icon"\n            class="va-minimized__icon">\n\n            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQ3cHgiIGhlaWdodD0iMzhweCIgdmlld0JveD0iMCAwIDQ3IDM4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MS4xICgzNTM3NikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+QXJ0Ym9hcmQgQ29weSAyMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZC1Db3B5LTIyIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOS4wMDAwMDAsIDMuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQuMDAwMDAwLCAwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJQYWdlLTEiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9IiNGRkZGRkYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuMTc1MjgwMzMsMzEuMDYxMDYzNiBMNC42NjUyNjg2LDI1LjI3NDQ1NjggQzIuMzMyNjcwOTUsMjUuMDc0NzUwNyA3LjMyOTk4MDE0ZS0wNSwyMy42MTIwOTQ3IDcuMzI5OTgwMTRlLTA1LDIxLjY4MzkyMTYgTDcuMzI5OTgwMTRlLTA1LDQuMzkwMjA2MDYgQzcuMzI5OTgwMTRlLTA1LDIuMjYxNjMxMDEgMi43ODU0OTcyMywwLjAwMDE1MDQ4Mjg5IDUuMjQ4MjQ4NTQsMC4wMDAxNTA0ODI4OSBMMzMuMDQ1NTQ1NiwwLjAwMDE1MDQ4Mjg5IEMzNS40NDMyMjAxLDAuMDAwMTUwNDgyODkgMzcuNzEwNzQwOSwyLjI2MTYzMTAxIDM3LjcxMDc0MDksNC4zOTAyMDYwNiBMMzcuNzEwNzQwOSw3LjY0ODgyNTU0IEwzNy43MTA3NDA5LDIxLjY4MzkyMTYgQzM3LjcxMDc0MDksMjMuODEyNDk2NyAzNS40NDMyMjAxLDI1LjM0MDU2MTcgMzMuMDQ1NTQ1NiwyNS4zNDA1NjE3IEwxMi42OTk1NDU2LDI1LjM0MDU2MTcgTDMuMTc1MjgwMzMsMzEuMDYxMDYzNiBaIiBpZD0iRmlsbC0xIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguOTQyMjM5OTIsMTIuMzA0OTcwNCBMOC45NDIyMzk5MiwxMi4zMDQ5NzA0IEM4Ljk0MjIzOTkyLDEzLjgzNTgxODggMTAuMTcxOTIwOSwxNS4wOTgwNzI4IDExLjY2MzI2NDksMTUuMDk4MDcyOCBDMTMuMTUzMjUzMiwxNS4wOTgwNzI4IDE0LjM4NDI4OTksMTMuODM1ODE4OCAxNC4zODQyODk5LDEyLjMwNDk3MDQgQzE0LjM4NDI4OTksMTAuNzc1NTEzNyAxMy4xNTMyNTMyLDkuNTExODY3OTkgMTEuNjYzMjY0OSw5LjUxMTg2Nzk5IEMxMC4xNzE5MjA5LDkuNTExODY3OTkgOC45NDIyMzk5MiwxMC43NzU1MTM3IDguOTQyMjM5OTIsMTIuMzA0OTcwNCIgaWQ9IkZpbGwtNiIgZmlsbD0iIzZFOTkxNSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuNjMyNzM2MywxNS4wOTgwNzI4IEMyMS4xMjQwODAzLDE1LjA5ODA3MjggMjIuMzUzNzYxMywxMy44MzU4MTg4IDIyLjM1Mzc2MTMsMTIuMzA0OTcwNCBDMjIuMzUzNzYxMywxMC43NzU1MTM3IDIxLjEyNDA4MDMsOS41MTE4Njc5OSAxOS42MzI3MzYzLDkuNTExODY3OTkgQzE4LjE0Mjc0OCw5LjUxMTg2Nzk5IDE2LjkxMTcxMTMsMTAuNzc1NTEzNyAxNi45MTE3MTEzLDEyLjMwNDk3MDQgQzE2LjkxMTcxMTMsMTMuODM1ODE4OCAxOC4xNDI3NDgsMTUuMDk4MDcyOCAxOS42MzI3MzYzLDE1LjA5ODA3MjggWiIgaWQ9IkZpbGwtOCIgZmlsbD0iIzZFOTkxNSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjcuMDg0MTY5LDE1LjA5ODA3MjggQzI4LjU3NTUxMywxNS4wOTgwNzI4IDI5LjgwNjU0OTcsMTMuODM1ODE4OCAyOS44MDY1NDk3LDEyLjMwNDk3MDQgQzI5LjgwNjU0OTcsMTAuNzc1NTEzNyAyOC41NzU1MTMsOS41MTE4Njc5OSAyNy4wODQxNjksOS41MTE4Njc5OSBDMjUuNTk0MTgwNyw5LjUxMTg2Nzk5IDI0LjM2MzE0NCwxMC43NzU1MTM3IDI0LjM2MzE0NCwxMi4zMDQ5NzA0IEMyNC4zNjMxNDQsMTMuODM1ODE4OCAyNS41OTQxODA3LDE1LjA5ODA3MjggMjcuMDg0MTY5LDE1LjA5ODA3MjggWiIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2RTk5MTUiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo="\n                alt="Restore Chat Window">\n        </button>\n    </div>\n\n    \x3c!-- VA --\x3e\n    <va-assistant-app hide-launcher="true" is-open="true"></va-assistant-app>\n  </div>'});
define("views/va-lazyload-view",["jquery","underscore","views/base-view","text!../templates/va-lazyload.html"],function(a,b,g,c){return g.extend({initialize:function(){var e=toggleMap.VA_PORTSUM,d=toggleMap.VAPModeEnabled,h=localStorage.getItem("VA_CLOSED");if(e&&!d&&!h){var f,j=this;try{Object.defineProperties(window,{isDockedEntitlementEnabled:{set:function(d){f=d;if("false"===f||!1===f)d=b.template(c),a(".page-content--portfolio-summary").append(d),j.initVA()},get:function(){return f}}})}catch(g){}}},
initVA:function(){var c=!1,d=document.querySelector("#va-lazy-load-container"),h=document.querySelector("#va-open-button"),f=document.querySelector(".va-minimized__container"),j=document.querySelector(".layout-footer"),g=function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);b.setAttribute("class","inserted-va-script");return b};h.addEventListener("click",function(){c||(h.classList.add("va-open-hidden"),setTimeout(function(){var b=envMap.CCP_URL;
a(d).append(g(b+"polyfills.ap119043-bundle.js"));a(d).append(g(b+"main.ap119043-bundle.js"));a(d).append(g(b+"runtime.ap119043-bundle.js"))},300),c=!0,a(window).off("scroll",this.elevateIconAboveLayoutFooter))});d.addEventListener("click",function(a){if("va-confirm-close"===a.target.id){a=document.querySelectorAll(".inserted-va-script");for(var b=0;b<a.length;b++)d.removeChild(a[b]);d.parentNode.removeChild(d);localStorage.setItem("VA_CLOSED",!0)}});a(window).on("scroll",b.throttle(function(){f.style.bottom=
a(window).scrollTop()+a(window).height()>a(document).height()-j.scrollHeight?j.scrollHeight+"px":0},100))}})});
define("views/dc-i-want-to-card-view",["views/base-view","../util/constants","jquery","models/account-context-model","underscore"],function(a,b,g,c,e){function d(a){var b=Array.prototype.slice.call(arguments,1,arguments.length);if(0===b.length)return a;for(;b.length;){var c;if(a){if((c=b.shift())in a)return b=[a[c]].concat(b),d.apply(null,b)}else return a}}var h=e.template('<li class="dc-i-want-to-card--link"><a href="<%=linkUrl%>"><%=linkDisplayName%></a></li>'),f=e.template('<li class="dc-i-want-to-card--link is-hidden-dc-i-want-to-card"><a href="<%=linkUrl%>"><%=linkDisplayName%></a></li>');
return a.extend({events:{"click .dc-i-want-to-card--links-toggle":"toggleIWantToCardLinks"},initialize:function(){var a=d(c.get("selectedAccounts"),"accounts")||[],e=a[0],l=d(e,"dcNavigationLinks")||[];1==a.length&&0<l.length?(e=e.getLinks(),a=g.map(e,function(a,c){return c<b.NUMBERS.DC_I_WANT_CARD_DEFAULT_LINKS?h(a):f(a)}).join(""),e.length<=b.NUMBERS.DC_I_WANT_CARD_DEFAULT_LINKS&&g(".dc-i-want-to-card--links-toggle").hide()):(a=h({linkDisplayName:"Go to NetBenefits",linkUrl:envMap.NETBENEFITS_URL}),
g(".dc-i-want-to-card--links-toggle").hide());this.$(".dc-i-want-to-card--links").html(a);g(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},toggleIWantToCardLinks:function(){"Show more actions"===g(".dc-i-want-to-card--links-toggle").text()?(g(".dc-i-want-to-card--links-toggle").text("Show less actions"),g(".is-hidden-dc-i-want-to-card").show()):(g(".dc-i-want-to-card--links-toggle").text("Show more actions"),g(".is-hidden-dc-i-want-to-card").hide());g(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})});
define("models/stacked-summary-state-model","jquery backbone underscore util/formats util/eventhub-backbone tasks/state-delete-task tasks/state-save-task".split(" "),function(a,b,g,c,e,d,h){var f={state:[]},j={path:"/user/oce/summary",version:"1.0",entry:[]},k={path:"/user/oce/summary",entry:[]};return b.Model.extend({initialize:function(a,b){a&&(j.version=a);b&&(j.path=b,k.path=b)},saveStackedSummaryState:function(a){void 0===a&&(a="current");j.entry.push({key:"stackedCards",value:a});f.state.push(j);
a=JSON.stringify(f);this.cleanRequestTempletes();(new h({context:this,data:a,onPreExecute:function(){},onSuccess:function(a){console_log(a)},onError:function(a){console_log(a)},onComplete:function(){}})).run()},deleteStackedSummaryState:function(){k.entry.push({key:"stackedCards"});f.state.push(k);var a=JSON.stringify(f);this.cleanRequestTempletes();(new d({context:this,data:a,onPreExecute:function(){},onSuccess:function(a){console_log(a)},onError:function(a){console_log(a)},onComplete:function(){}})).run()},
cleanRequestTempletes:function(){f.state=[];j.entry=[];k.entry=[]}})});var CacheContext=window.CacheContext={keyGenerators:[],addCache:function(a,b,g){a=this.data[a]=this.data[a]||{};g=g||{};g=g.then?g:Promise.resolve(g);a[b]=g},data:{},getCache:function(a,b){return(this.data[a]=this.data[a]||{})[b]}};define("models/cache-model",[],function(){return CacheContext});
define("views/card-dc-ledger-view","jquery views/base-view util/formats models/account-context-model util/eventhub-backbone models/cache-model".split(" "),function(a,b,g,c,e,d){return b.extend({initialize:function(a){this.isEii=a.isEii},refreshLedgerCard:function(){var b=c.get("selectedAccounts"),d=a(".js-footer-entitlement-info").data("is-ceentitlement"),e=b.accounts[0];this.noBalance=!0;c.isPerformanceHidden()||d&&b.portfolio&&"simplified"===a(".card-layout-toggle--selected").data("card-toggle-value")||
(this.noBalance=!1,this.$(".js-dc-balance").show(),this.$el.show());toggleMap.DCOneYearRoRInLedger&&(this.setDCRORContent(e),this.getAppContext().footNote.isPerformanceAvailable(!0));this.setDCBalanceContent(e);this.adjustCardSectionWidth()},setDCRORContent:function(b){function c(a){var b=a.perfDetails[0].cumulativePerfReturns[0].returns;a=b.filter(function(a){return"1Y"===a.timePeriodPerfReturn.timePeriod.period})[0].timePeriodPerfReturn.preTax.netReturn;b=b.filter(function(a){return"1Y"===a.timePeriodPerfReturn.timePeriod.period})[0].timePeriodPerfReturn.timePeriod.endDate;
g._fillRoRContent(a);g._fillAsOfTimeContent(b);g.$(".js-dc-one-year-ror").show();g.$el.show()}function e(){g.$("js-dc-one-year-ror").hide();g.noBalance&&g.$el.hide()}this.$(".js-dc-one-year-ror");var g=this,l=new a.Deferred,p=d.getCache("dcror",b.planId);p?p.then(c,e):(a.ajax({url:envMap.DIGITAL_APP_URL+"dcpror/api?planId="+b.planId+"&clientId="+b.clientId,dataType:"json",method:"GET",xhrFields:{withCredentials:!0},success:function(a){a&&a.perfDetails&&a.perfDetails[0].cumulativePerfReturns&&a.perfDetails[0].cumulativePerfReturns[0]&&
a.perfDetails[0].cumulativePerfReturns[0].returns?(c(a),l.resolve(a)):(e(a),l.reject(a))},error:function(a){e(a);l.reject(a)}}),d.addCache("dcror",b.planId,l.promise()))},_fillRoRContent:function(a){var b=this.$(".js-dc-one-year-ror").find(".js-dc-one-year-ror-value");isNaN(a)?(b.addClass("ytd-change"),b.text("--")):0<a?(b.addClass("color-positive"),b.text("+"+a.toFixed(2)+"%")):0>a?(b.addClass("ytd-change"),b.text(a.toFixed(2)+"%")):0==a?b.text("0.00%"):(b.addClass("ytd-change"),b.text("--"))},_fillAsOfTimeContent:function(a){this.$(".js-dc-one-year-ror").find(".js-dc-one-year-ror-as-of-date").text("AS OF "+
(new Date(1E3*a)).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}))},setDCBalanceContent:function(a){this.displayDCAccountBalance(a)},displayDCAccountBalance:function(a){a=Math.floor(100*a.totalBalance+1E-5)/100;var b=this.$(".js-dc-balance"),d=c.getAllAccounts().length-c.getCreditCardAccounts().length,d="Accounts ("+c.get("selectedAccounts").accounts.length+" of "+d+")";b.find(".js-dc-balance-value").html(g.formatPrice(g.getDefaultPriceFormatOptions(a)));b.find(".js-dc-balance-title").text(d)},
adjustCardSectionWidth:function(){this.$(".ledger--section").removeClass("fidgrid--col-third").removeClass("fidgrid--col-quarter");4===this.$(".ledger--section:visible").length?this.$(".ledger--section").addClass("fidgrid--col-quarter"):this.$(".ledger--section").addClass("fidgrid--col-third")}})});
(function(){function a(a){return a.replace(h,function(a){return"\\"+d[a]})}var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],g=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,e=[],d={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},h=/\\|'|\r|\n|\t|\u2028|\u2029/g;define("tpl",[],function(){var d,j,h;"undefined"!==typeof window&&window.navigator&&window.document?j=function(a,b){var c=d.createXhr();c.open("GET",
a,!0);c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)};c.send(null)}:"undefined"!==typeof process&&(process.versions&&process.versions.node)&&(h=require.nodeRequire("fs"),j=function(a,b){b(h.readFileSync(a,"utf8"))});return d={version:"0.24.0",strip:function(a){if(a){a=a.replace(g,"");var b=a.match(c);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"").replace(/[\t]/g,"").replace(/[\r]/g,
"")},createXhr:function(){var a,c,d;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;for(c=0;3>c;c++){d=b[c];try{a=new ActiveXObject(d)}catch(e){}if(a){b=[d];break}}if(!a)throw Error("require.getXhr(): XMLHttpRequest not available");return a},get:j,load:function(b,c,j,h){var g=!1,k=b.indexOf("."),v=b.substring(0,k),A=b.substring(k+1,b.length),k=A.indexOf("!");-1!==k&&(g=A.substring(k+1,A.length),g="strip"===g,A=A.substring(0,k));c="nameToUrl"in c?c.nameToUrl(v,"."+A):c.toUrl(v+"."+
A);d.get(c,function(c){for(var k=["var _resu_lt = [];\nwith(obj){"],p=0;p<c.length-1;){var s=c.indexOf("<%",p);if(0<=s){var v=c.substring(p,s);k.push("_resu_lt.push('"+a(v)+"');");v=c.indexOf("%>",s);if(0<=v){s=c.substring(s+2,v);p=v+2;0===s.indexOf("=")?k.push("_resu_lt.push("+s.substr(1)+");"):k.push(s);continue}}k.push("_resu_lt.push('"+a(c.substring(p))+"');");p=c.length}k.push('};\nreturn _resu_lt.join("");');c=k.join("");h.isBuild||(c=new Function("obj",c));c=g?d.strip(c):c;h.isBuild&&h.inlineText&&
(e[b]=c);j(c)})},write:function(a,b,c){b in e&&c("define('"+a+"!"+b+"', function() {return function(obj) { "+e[b]+"}});\n")}}})})();
define("tpl!templates/dc-account-other-provider-balance.html",function(){return function(a){var b=[];with(a)b.push('<div class="js-js-dc-other-provider-balance-section">\n \t<table class="fid-card--grid js-dc-other-provider-balance">\n         <tbody>         \n\t          <tr class="fid-card--total-fidelity-balance-summary">\n\t              <td class="fid-card--total-fidelity-balance-title js-dc-total-balance-title"  colspan="2">Other provider balances</td>\n\t          </tr>\t          \n\t          <tr class="js-dc-other-provider-balance">\n\t              <td class="dc-other-provider-balance-discloure" colspan="2">Not included in your All Accounts total, or any planning tools.</td>\n\t          </tr>\n\t\n\t\t\t  '),$.each(otherProviderBalance,
function(a,c){var e=!!c.outstandingLoanBalance;b.push('\n\t\t          <tr class="fid-card--dc-other-provider-balance');b.push(e?" fid-card--dc-other-provider-balance-has-loan":"");b.push('">\n\t\t              <td class="fid-card--other-provider-balance-description js-dc-other-provider-title">\n\t\t              \t  ');c.url?(b.push('\n\t\t\t              \t  <a class="js-dc-other-provider-link" target="_blank" href="'),b.push(c.url),b.push('" >'),b.push(c.institutionDetail.vendorName),b.push('\n\t\t\t                  <img class="dc-balance-card---popup-link" src="'),
b.push(envMap.SCS_URL_VALUE),b.push('/images/popup.gif" title="popup" alt="popup"></a>\n\t\t                  ')):(b.push("\n\t\t                  \t  "),b.push(c.institutionDetail.vendorName),b.push("\n\t\t                  "));b.push('\n\t\t                  <span class="as-of-time" style="display:inline-block"> AS OF ');b.push(c.asOfDisplayDate);b.push('</span>\n\t\t              </td>\n\t\t              <td class="fid-card--other-provider-balance-value js-dc-other-provider-balance-value">\n\t\t              \t');
b.push(c.marketValue);b.push("\n\t\t              </td>\n\t\t\t\t  </tr>\n\t\t\t\t");e&&(b.push('\n\t\t\t\t  <tr class="fid-card--dc-other-provider-loan-balance">\n\t\t              <td class="fid-card--other-provider-balance-loan-description ">\n\t\t              \t Outstanding Loan Balance\n\t\t              </td>\n\t\t              <td class="fid-card--other-provider-balance-loan-value">\n\t\t              \t'),b.push(c.outstandingLoanBalance),b.push("\n\t\t              </td>\n\t\t\t\t  </tr>\n\t\t\t\t"));
b.push("\n\t          ")}),b.push("\n         </tbody>\n     </table>\n</div>");return b.join("")}});
define("views/card-dc-balances-view","jquery views/base-view util/formats models/account-context-model util/eventhub-backbone tpl!../templates/dc-account-other-provider-balance.html".split(" "),function(a,b,g,c,e,d){function h(b){var c=b.$anchor.attr("data-tooltipsection");a(".dc-balance-card--tooltip-section").removeClass(f);a(".dc-balance-card--tooltip-section-"+c).addClass(f);if(567<a(document.body).width()){var c=b.$popup.offset(),d=b.$anchor.offset().left+b.$anchor.width()/2,d=Math.max(0,d-b.$popup.width()/
2)-c.left;b.$popup.offset({left:c.left+d});b.$popup.find(".popup--tooltip-bubble-pointer").offset({left:b.$popup.find(".popup--tooltip-bubble-pointer").offset().left-d})}else b.$container.css("left","")}var f="dc-balance-card--tooltip-section-active";return b.extend({events:{"click .js-dc-other-provider-link":"handleOutsideLink"},initialize:function(b){this.isEii=b.isEii;b=a(".base-popup.dc-balance-card--tooltip").BasePopup();var c=a(".js-dc-balances-card"),d=a(".dc-balance-card--question-icon");
d.on(FID.DynamicTooltip.event.anchorClicked,h);this.tooltip=new FID.DynamicTooltip(c,d,b);d=a(".dc-balance-card--question-icon-bottom");d.on(FID.DynamicTooltip.event.anchorClicked,h);this.tooltip=new FID.DynamicTooltip(c,d,b)},containsOtherProviderBalances:function(a){return 0<a.otherProviderBalance.length?!0:!1},refreshBalancesCard:function(){var a=c.get("selectedAccounts").accounts[0];this.setContent(a)},setContent:function(a){this.displayDCAccountBalances(a);this.displayOtherProviderBalances(a)},
displayDCAccountBalances:function(b){var d,e,f=[],h={};a.extend(h,b);h.totalBalance=Math.floor(100*b.totalBalance+1E-5)/100;f.push(h);a.each(b.dcBrokerageLinkAccounts,function(a,b){var j=c.getAccount(b);null!=j&&(f.push(j),-1!=j.acctName.indexOf("BROKERAGELINK ROTH")?d=j.formattedBalance:e=j.formattedBalance)});var n=this.$(".js-dc-total-balance");n.find(".js-dc-total-balance-value").html(this.calculateTotalBalance(f));var r=this.$(".js-dc-vested-balance");b.vestedBalance=b.vestedBalance||"";""!=
b.vestedBalance?(r.find(".js-dc-vested-balance-value").html(g.formatPrice(g.getDefaultPriceFormatOptions(b.vestedBalance))),r.show()):r.hide();var s=this.$(".js-dc-balance"),v=this.$(".js-dc-brokeragelink-balance"),A=this.$(".js-dc-brokeragelink-roth-balance"),w=this.$(".js-dc-balances-as-of-time"),z=this.$(".js-dc-balances-as-of-time-new"),D=!0,y=!1,B=!1;0<r.length&&(B=!0);s.find(".js-dc-balance-title").text(h.acctName);s.find(".js-dc-balance-value").html(g.formatPrice(g.getDefaultPriceFormatOptions(h.totalBalance)));
e=e||"";d=d||"";""!=e?(v.find(".js-dc-brokeragelink-balance-value").html(e),v.show(),B=!0,D=!1):(v.find(".js-dc-brokeragelink-balance-value").empty(),v.hide());""!=d?(A.find(".js-dc-brokeragelink-roth-balance-value").html(d),A.show(),B=!0,D=!1,y=!0):(A.find(".js-dc-brokeragelink-roth-balance-value").empty,A.hide());B?n.removeClass("display-none"):n.addClass("display-none");D||r.hide();(r=a(".js-portfolio-asOfTime").text())&&w.text(r);this.containsOtherProviderBalances(b)?z.text("FIDELITY DATA "+b.accountAsOfDate):
z.text(b.accountAsOfDate);(w=(w=b.getLink("dc.balances")||b.getLink("nb.dc.balances"))&&w.linkUrl)||(w=envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/Balances?plan="+b.acctNum);this.$(".js-dc-balances-call-to-action").prop("href",w);D?(n.find(".js-dc-total-balance-title").text(h.acctName),n.find(".js-dc-total-balance-value").html(g.formatPrice(g.getDefaultPriceFormatOptions(h.totalBalance))),this.$(".js-dc-balance-card").removeClass("js-dc-balance-card-container-dc-account js-dc-balance-card-container-dc-account-other-provider js-dc-balance-card-container-dc-account-brokelink js-dc-balance-card-container-dc-account-all js-dc-balance-card-container-dc-account-brokelink-withoutRoth"),
this.containsOtherProviderBalances(b)?(this.$(".js-dc-balance-card").addClass("js-dc-balance-card-container-dc-account-other-provider"),this.$(".js-dc-balances-as-of-time-new").addClass("display-none")):(this.$(".js-dc-balance-card").addClass("js-dc-balance-card-container-dc-account"),this.$(".js-dc-balances-as-of-time-new").removeClass("display-none"))):(this.$(".js-dc-balance-card").removeClass("js-dc-balance-card-container-dc-account js-dc-balance-card-container-dc-account-other-provider js-dc-balance-card-container-dc-account-brokelink js-dc-balance-card-container-dc-account-all js-dc-balance-card-container-dc-account-brokelink-withoutRoth"),
this.containsOtherProviderBalances(b)?this.$(".js-dc-balance-card").addClass(".js-dc-balance-card-container-dc-account-all"):(this.$(".js-dc-balance-card").addClass("js-dc-balance-card-container-dc-account-brokelink"),this.$(".js-dc-balance-fidelity").removeClass("dc-balance-card--question-icon"),y||this.$(".js-dc-balance-card").addClass("js-dc-balance-card-container-dc-account-brokelink-withoutRoth")),this.$(".js-dc-balances-as-of-time-new").addClass("display-none"))},calculateTotalBalance:function(b){if(0===
a.grep(b,function(a){return!isNaN(a.totalBalance)}).length)return!1;for(var c=0,d=0;d<b.length;d++)isNaN(b[d].totalBalance)||(c+=b[d].totalBalance);return g.formatPrice(g.getDefaultPriceFormatOptions(c))},displayOtherProviderBalances:function(b){var c=this.$(".js-dc-balance-other-providers");b=b.otherProviderBalance;0<b.length?(a.each(b,function(a,b){b.marketValue=g.formatPrice(g.getDefaultPriceFormatOptions(b.marketValue));b.outstandingLoanBalance&&+b.outstandingLoanBalance?b.outstandingLoanBalance=
g.formatPrice(g.getDefaultPriceFormatOptions(b.outstandingLoanBalance)):delete b.outstandingLoanBalance}),c.html(d({otherProviderBalance:b})),c.show()):c.hide()},handleOutsideLink:function(a){window.confirm("When you click OK, a second browser window will open and you will be taken to the website of a retirement plan provider that is unaffiliated with Fidelity.\n\nYour original browser window will remain open, displaying your current session.  If you do not return within a short time, your session will time out.\n\nFidelity Investments has not prepared or reviewed the information provided on these websites.  Information provided on these websites should not be considered as an offer or solicitation by Fidelity to sell or buy any security, product or service.")||
a.preventDefault()}})});
(function(a){a.makeProgressChart=function(b,g){var c=this,e=g.total.amount,d=g.current.amount,h=Number(e.replace(/[^0-9\.]+/g,"")),f=Number(d.replace(/[^0-9\.]+/g,"")),j=g.total.name,k=g.current.name;c.$el=a(b);c.init=function(){var b=c.$el,g,m;b.hasClass("progresschart")||b.addClass("progresschart");b.empty();f>h?(n=100*(h/f),barType="progresschart-exceeded"):(n=100*(f/h),0==f?barType="progresschart-empty":f<h?barType="progresschart-filling":f==h&&(barType="progresschart-full"));var n,r=100-n,s,
v;"progresschart-exceeded"===barType?(g="progresschart-outer-container progresschart-current "+barType,m="progresschart-inner-container progresschart-total"):(g="progresschart-outer-container progresschart-total "+barType,m="progresschart-inner-container progresschart-current");75<n&&h!==f?(v="top",r+="%",e>=d&&(s=" tooltip-current--high")):(v="bottom",r=n+"%",s="");g=a("<div/>",{"class":g});m=a("<div/>",{"class":m}).css("height",n+"%").html(a("<img/>",{"class":"progresschart--full-image",src:envMap.WWW_CDN_URL+
envMap.NG_CONTENT_URL+"/images/dev/blue-solid.jpg"}));var A=a("<div/>",{"class":"progresschart--tooltip"}),w=a("<span/>",{"class":"progresschart--tooltip-amount"}).html(e),z=a("<span/>",{"class":"progresschart--tooltip-title"}).html(j),D=a("<span/>",{"class":"progresschart--tooltip-amount"}).html(d),y=a("<span/>",{"class":"progresschart--tooltip-title"}).html(k);n=null;h!==f&&(n=A.clone().append(w).append(z).addClass("progresschart--tooltip-total"));s=A.clone().append(D).append(y).addClass("progresschart--tooltip-current"+
s);h>f?(n.css("bottom","100%"),s.css(v,r)):(s.css("bottom","100%"),n&&n.css(v,r));b.append(g.append(m)).append(n).append(s)};c.init()};a.makeHorizontalProgressChart=function(b,g){var c=this,e=g.total.amount,d=g.current.amount,h=Number(e.replace(/[^0-9\.]+/g,"")),f=Number(d.replace(/[^0-9\.]+/g,"")),j=g.total.name,k=g.current.name;c.$el=a(b);c.init=function(){var b=c.$el,g,m;b.hasClass("progresschart")||b.addClass("progresschart");b.empty();f>h?(n=100*(h/f),barType="progresschart-exceeded"):(n=100*
(f/h),0==f?barType="progresschart-empty":f<h?barType="progresschart-filling":f==h&&(barType="progresschart-full"));var n;"progresschart-exceeded"===barType?(g="progresschart-outer-container progresschart-current "+barType,m="progresschart-inner-container progresschart-total"):(g="progresschart-outer-container progresschart-total "+barType,m="progresschart-inner-container progresschart-current");g=a("<div/>",{"class":g});m=a("<div/>",{"class":m}).css("width",n+"%").html(a("<img/>",{"class":"progresschart--full-image",
src:envMap.WWW_CDN_URL+envMap.NG_CONTENT_URL+"/images/dev/blue-solid.jpg"}));var r=a("<div/>",{"class":"progresschart--tooltip"}),s=a("<span/>",{"class":"progresschart--tooltip-amount"}).html(e),v=a("<span/>",{"class":"progresschart--tooltip-title"}).html(j),A=a("<span/>",{"class":"progresschart--tooltip-amount"}).html(d),w=a("<span/>",{"class":"progresschart--tooltip-title"}).html(k);n=null;h>=f&&(n=r.clone().append(v).append(s).addClass("progresschart--tooltip-total"));r=r.clone().append(w).append(A).addClass("progresschart--tooltip-current");
h>=f?(n.css("bottom","100%"),r.css("left","0").css("margin-left","1px")):(b.css("margin-top","0"),r.addClass("tooltip-current--high"),n&&n.css("left","0"));b.append(g.append(m)).append(n).append(r)};c.init()};a.fn.makeProgressChart=function(b){if(1!==this.length)throw"exception: Invalid DOM Element.";return new a.makeProgressChart(this,b)};a.fn.makeHorizontalProgressChart=function(b){if(1!==this.length)throw"exception: Invalid DOM Element.";return new a.makeHorizontalProgressChart(this,b)}})(jQuery);
define("components/progresschart",function(){});
define("tpl!templates/moveit-more-cards.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup popup--tooltip-bubble animation--visible moveit-more-cards--popup">\n\t<div class="popup--tooltip-bubble-pointer">\n\t\t\x3c!-- ICON: icon-arrow-white-up --\x3e\n\t\t<img src="'),b.push(envMap.WWW_CDN_URL+envMap.NG_PG_CONTENT_URL),b.push('/images/icon-sg-arrow-pointer.png" width="26" height="14" alt="Arrow Pointer" onerror="this.style.display=\'none\'">\n\t</div>\n\t<div class="popup--tooltip-bubble-content" aria-label="More cards popup">\n\t\t<div class="base-popup--content-wrapper">\n\t\t\t<div class="base-popup--header">\n\t\t\t\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup">\n\t\t\t\t\t\x3c!-- ICON: icon-x-gray --\x3e\n\t\t\t\t\t<div class="close-icon-div"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="base-popup--content">\n\t\t\t\t<h2 class="add-card-popup--title">Add a Card</h2>\n\t\t\t\t<ul class="card-layout--hidden-card-dropdown-list">\n\t\t\t\t\t'),cards.each(function(a,
c){var e=$(c);b.push('\n\t\t\t\t\t\t<li class="card-layout--hidden-card-dropdown-list-item" data-tcmid="');b.push(e.data("tcmid"));b.push('">');b.push(e.find(".card-layout-card-wrapper--work-around+div").find(".syn-h3,.fid-card--title,.riv-card__title").html());b.push("</li>\n\t\t\t\t\t\t")}),b.push("\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>");return b.join("")}});
define("views/card-goal-summary-view",["jquery","views/base-view","models/account-context-model","util/formats"],function(a,b,g,c){return b.extend({el:".goal-summary-card-container",render:function(){var b=this,c=this._getGoalAccountsInfo();0<c.goalAccountCount&&(this.$("tbody").empty(),a.each(c.goalAccounts,function(a,c){if(5>a)b.$("tbody").append(_.template("<tr><td class='name'><a href='<%=goalAccount.goalPerfURL%>' data-pii='true'><%=goalAccount.goalName%></a></td><td class='balance' data-pii='true'><%=goalAccount.formattedBalance%></td></tr>")({goalAccount:c}));
else return!1}),this.$(".goal-summary--as-of").html("ASSIGNED TO "+c.goalAccountCount+(1===c.goalAccountCount?" GOAL":" GOALS")),this.$(".goal-summary--total").html(c.goalFormattedTotalBalance))},_getGoalAccountsInfo:function(){var a=this,b=this._getAllGoalAccounts(),h=this._getSelectedAccounts(),f=[],j=0;_.each(h.accounts,function(a){_.each(b,function(b){_.each(b.accountDetail,function(c){a.acctNum==c&&(c=_.filter(f,function(a){return a.goalId==b.goalId}),0<_.size(c)?(c=c[0],c.totalBalance+=a.totalBalance):
(c=b,c.totalBalance=a.totalBalance,f.push(c)))})})});0<_.size(f)&&(f=_.sortBy(f,"totalBalance").reverse(),_.each(f,function(b){j+=b.totalBalance;b.formattedBalance=c.formatPrice(c.getDefaultPriceFormatOptions(a._floorValue(b.totalBalance)))}));return{goalAccountCount:_.size(f),goalAccounts:f,goalFormattedTotalBalance:c.formatPrice(c.getDefaultPriceFormatOptions(this._floorValue(j)))+"*"}},_getAllGoalAccounts:function(){return this.$(".fid-card--goal-summary").data("goals-info")},_getSelectedAccounts:function(){return g.get("selectedAccounts")},
_floorValue:function(a){return Math.floor(100*a+1E-5)/100}})});
define("tpl!templates/moveit-intro-tour.html",function(){return function(a){var b=[];with(a)b.push('\x3c!-- Intro Tour --\x3e\n\t<div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-moveit-modal">\n\n\t\t\x3c!-- Hidden for redundancy --\x3e\n\t\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t\t<ul class="introtour-modal--slide-content-container" data-slide-count="3">\n\n\t\t\x3c!-- Intro Tour Content --\x3e\n\n\t\t\t<li class="introtour-modal--slide-content introtour-modal--slide-content-active clearfix">\n\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Create a Custom Summary</h2>\n\t\t\t\t</div>\n\n\t\t\t\t<p class="introtour-modal--list-info">In our continuing effort to improve your experience, we\'ve added the ability to add, remove and move the information provided on your Summary page.</p>\n\t\t\t\t<p class="introtour-modal--list-info">To make changes to your Summary, select Customize at the top right of the Summary.</p>\n\n\t\t\t\t<img class="introtour-modal--slide-image"  loop="infinite" data-imagesrc="'),b.push(envMap.WWW_CDN_URL),
b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/cards/customize-card-1.gif" alt="To make changes to your Summary, select Customize at the top right of the Summary.">\n\n\t\t\t</li>\n\n\t\t\t<li class="introtour-modal--slide-content clearfix">\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Change Card Positions</h2>\n\t\t\t\t</div>\n\n\t\t\t\t<p class="introtour-modal--list-info">To change the position of a card, hover over the card you would like to move and then drag it where you would like it to appear.</p>\n\n\t\t\t\t<img class="introtour-modal--slide-image"  loop="infinite" data-imagesrc="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/cards/customize-card-2.gif" alt="To change the position of a card, hover over the card you would like to move and then drag it where you would like it to appear.">\n\t\t\t</li>\n\n\t\t\t<li class="introtour-modal--slide-content clearfix">\n\t\t\t\t<div class="introtour-modal--slide-content-head">\n\t\t\t\t\t<h2 class="introtour-modal--container-header">Add and Remove Cards</h2>\n\t\t\t\t</div>\n\n\t\t\t\t<p class="introtour-modal--list-info">To remove a card, select the X at the top right corner of the card.</p>\n\t\t\t\t<p class="introtour-modal--list-info">To add a card, select Add Card and choose which card you\'d like to add. Any card you have previously removed from your Summary will be found here.</p>\n\t\t\t\t<p class="introtour-modal--list-info">Select Save to save any changes you\'ve made or select Cancel to keep everything the same as it was since you last saved your layout.</p>\n\n\t\t\t\t<img class="introtour-modal--slide-image" loop="infinite" data-imagesrc="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/cards/customize-card-3.gif" alt="To make changes to your Summary, select Customize at the top right of the Summary.">\n\n\t\t\t</li>\n\n\n\t\t\x3c!-- End Intro Tour Content --\x3e\n\n\t\t</ul>\n\n\t\t<div class="introtour-modal--actions">\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-first clearfix introtour-modal--action-container-active">\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--next">Start Here</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-middle clearfix">\n\t\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t\t</span>\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--next">Next</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="introtour-modal--action-container introtour-modal--action-container-last clearfix">\n\t\t\t\t<span class="glossy-button-gray-sm">\n\t\t\t\t\t<button class="introtour-modal--prev">Back</button>\n\t\t\t\t</span>\n\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t<button class="introtour-modal--close">Close</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t</div>\n\n\n\t\t<div class="introtour-modal--page-counter-container clearfix">\n\t\t\t<span class="introtour-modal--page-counter">\n\t\t\t\t<span class="introtour-modal--page-counter-current"></span> of <span class="introtour-modal--page-counter-max"></span>\n\t\t\t</span>\n\t\t</div>\n\n\t</div>\n\n\t\x3c!-- Help Instruction Bubble --\x3e\n\t<div class="infotour-modal--help-instruction-bubble-container" style="display:none;">\n\t\t<div class="infotour-modal--help-instruction-bubble">\n\t\t\t<p>Get help or give feedback here!</p>\n\t\t</div>\n\t</div>');
return b.join("")}});
define("views/moveit-intro-tour-view",["jquery","views/base-view","IntroTour","tpl!../templates/moveit-intro-tour.html"],function(a,b,g,c){return b.extend({initialize:function(){},showMoveitIntroTour:function(){var b=c({});a("#moveit-intro-tour-wrapper").html(b);a("#ma-intro-tour-wrapper").empty();a("#intro-tour-wrapper").empty();a("#intro-tour-positions-wrapper").empty();a("#fv-gtm-intro-tour-wrapper").empty();(new FID.Applications.IntroTour(a("#moveit-intro-tour-wrapper"),"")).open();a(document).on(FID.Applications.IntroTour.events.IntroTourClosed+
".shipit",function(b){a(document).off(FID.Applications.IntroTour.events.IntroTourClosed+".shipit");a(b.popup).hasClass("introtour-moveit-modal")&&a.get("/ftgw/fbc/ofoltxsvc/visitMoveitTour")})}})});
define("tpl!templates/timeline-intro-tour.html",function(){return function(a){var b=[];with(a)b.push('\x3c!-- Intro Tour --\x3e\n\t<div class="base-popup base-modal--container base-modal--container-largeX introtour-modal introtour-moveit-modal">\n\n\t\t\x3c!-- Hidden for redundancy --\x3e\n        <div class="base-popup--close-button" tabindex="0" role="button" \n            aria-label="Close Popup" style="position: relative; z-index: 99999"></div>\n\t\t<div class="timeline-content-wrapper">\n\t\t</div>\n\t</div>\n\n\t\x3c!-- Help Instruction Bubble --\x3e\n\t<div class="infotour-modal--help-instruction-bubble-container" style="display:none;">\n\t\t<div class="infotour-modal--help-instruction-bubble">\n\t\t\t<p>Get help or give feedback here!</p>\n\t\t</div>\n\t</div>');return b.join("")}});
define("views/timeline-intro-tour-view",["jquery","views/base-view","IntroTour","tpl!../templates/timeline-intro-tour.html"],function(a,b,g,c){return b.extend({initialize:function(){},showMoveitIntroTour:function(){var b=c({});a("#moveit-intro-tour-wrapper").html(b);a("#ma-intro-tour-wrapper").empty();a("#intro-tour-wrapper").empty();a("#intro-tour-positions-wrapper").empty();a("#fv-gtm-intro-tour-wrapper").empty();a.ajax({url:"/ftgw/digital/achieve-a-goal/timeline",dataType:"text",type:"GET",success:function(b){a(".timeline-content-wrapper").html(b);
(new FID.Applications.IntroTour(a("#moveit-intro-tour-wrapper"),"")).open();a(document).on(FID.Applications.IntroTour.events.IntroTourClosed+".shipit",function(){a(document).off(FID.Applications.IntroTour.events.IntroTourClosed+".shipit")})},error:function(a){console.log(a)}})}})});
define("views/explore2card-view",["jquery","views/base-view"],function(a,b){return b.extend({initialize:function(){this.logTrackId=this.$el.data("logTrackId");this.treatmentCode=this.$el.data("treatmentCode");this.topicId=this.$el.data("topicId")},serviceCall:function(b){a.ajax({url:"/ftgw/fbc/ofportfolio/rest/acceptNextBestTopic",data:{logTrackId:this.logTrackId,treatmentCode:this.treatmentCode,topicId:this.topicId},success:function(){b&&(document.location.href=b)},error:function(){b&&(document.location.href=
b)}})},render:function(){var b=this;b.$el.find(".syndicated-promo--link p > a, .syndicated-promo--link > a").each(function(){"ontouchstart"in window?(a(this).css("cursor","pointer"),a(this).on("touchstart click tap",function(a){a.preventDefault();b.serviceCall(this.href)})):(a(this).on("mousedown",function(c){1===c.which?(a(this).on("click",function(a){a.preventDefault()}),b.serviceCall(this.href)):(2===c.which||3===c.which)&&b.serviceCall("")}),a(this).on("keydown",function(a){13===a.keyCode&&(a.preventDefault(),
b.serviceCall(this.href))}))})}})});
define("views/card-market-index-view-new","jquery views/base-view tasks/chart-index-task tasks/top-headline-task util/constants highcharts".split(" "),function(a,b,g,c){function e(a,b,c){if("undefined"===typeof c||0===+c)return Math[a](b);b=+b;c=+c;if(isNaN(b)||!("number"===typeof c&&0===c%1))return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+c:c))}var d=!1,h=!1,f={css:function(a){if(!a||0===a.length)throw Error("chart load path is required !");
var b=document.createElement("link");b.href=a;b.rel="stylesheet";b.type="text/css";document.body.appendChild(b)},js:function(){if(0===!arguments.length)throw Error("chart loader path is required !");for(var a in arguments){var b=document.createElement("script");b.type="text/javascript";b.async=!1;b.src=arguments[a];document.body.appendChild(b)}}};Math.round10||(Math.round10=function(a,b){return e("round",a,b)});Math.floor10||(Math.floor10=function(a,b){return e("floor",a,b)});Math.ceil10||(Math.ceil10=
function(a,b){return e("ceil",a,b)});return b.extend({events:{},initialize:function(){this.featureToggle=a(this.el).find(".marketChart.snippet").data("featureToggle");"todaysMarketsCardDisplayPriorCloseDuringPreMarket"===this.featureToggle?(this.remainHour="",this.symbols={".DJI":{name:"DJIA",chartContainer:".djia-chart-container",percentContainer:".djia-percent-change-container",lastPriceContainer:".djia-last-price-container",changeValueContainer:".djia-change-value-container",marketChangeContainer:".djia-market-change-container",
percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".SPX":{name:"S&P 500",chartContainer:".sp-500-chart-container",percentContainer:".sp-500-percent-change-container",lastPriceContainer:".sp-500-last-price-container",changeValueContainer:".sp-500-change-value-container",marketChangeContainer:".sp-500-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".IXIC":{name:"NASDAQ",chartContainer:".nasdaq-chart-container",
percentContainer:".nasdaq-percent-change-container",lastPriceContainer:".nasdaq-last-price-container",changeValueContainer:".nasdaq-change-value-container",marketChangeContainer:".nasdaq-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"YM*.CBE":{name:"DJIA Futures",chartContainer:".djia-futures-chart-container",percentContainer:".djia-futures-percent-change-container",lastPriceContainer:".djia-futures-last-price-container",changeValueContainer:".djia-futures-change-value-container",
marketChangeContainer:".djia-futures-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"ES*.CMG":{name:"S&P 500 Futures",chartContainer:".sp-500-futures-chart-container",percentContainer:".sp-500-futures-percent-change-container",lastPriceContainer:".sp-500-futures-last-price-container",changeValueContainer:".sp-500-futures-change-value-container",marketChangeContainer:".sp-500-futures-market-change-container",percentChange:0,changeValue:0,
lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"NQ*.CMG":{name:"NASDAQ Futures",chartContainer:".nasdaq-futures-chart-container",percentContainer:".nasdaq-futures-percent-change-container",lastPriceContainer:".nasdaq-futures-last-price-container",changeValueContainer:".nasdaq-futures-change-value-container",marketChangeContainer:".nasdaq-futures-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"CL*.NX*":{name:"Crude Oil Futures",
chartContainer:".crude-oil-chart-container",percentContainer:".crude-oil-percent-change-container",lastPriceContainer:".crude-oil-last-price-container",changeValueContainer:".crude-oil-change-value-container",marketChangeContainer:".crude-oil-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"GC*.CX*":{name:"Gold Futures",chartContainer:".gold-chart-container",percentContainer:".gold-percent-change-container",lastPriceContainer:".gold-last-price-container",
changeValueContainer:".gold-change-value-container",marketChangeContainer:".gold-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".TNX":{name:"10-Yr Bond Futures",chartContainer:".ten-year-bond-chart-container",percentContainer:".ten-year-bond-percent-change-container",lastPriceContainer:".ten-year-bond-last-price-container",changeValueContainer:".ten-year-bond-change-value-container",marketChangeContainer:".ten-year-bond-market-change-container",
percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""}}):(this.remainHour="",this.symbols={".DJI":{name:"DJIA",chartContainer:".djia-chart-container",percentContainer:".djia-percent-change-container",lastPriceContainer:".djia-last-price-container",changeValueContainer:".djia-change-value-container",marketChangeContainer:".djia-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".SPX":{name:"S&P 500",chartContainer:".sp-500-chart-container",
percentContainer:".sp-500-percent-change-container",lastPriceContainer:".sp-500-last-price-container",changeValueContainer:".sp-500-change-value-container",marketChangeContainer:".sp-500-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".IXIC":{name:"NASDAQ",chartContainer:".nasdaq-chart-container",percentContainer:".nasdaq-percent-change-container",lastPriceContainer:".nasdaq-last-price-container",changeValueContainer:".nasdaq-change-value-container",
marketChangeContainer:".nasdaq-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"YM*.CBE":{name:"DJIA Futures",chartContainer:".djia-chart-container",percentContainer:".djia-percent-change-container",lastPriceContainer:".djia-last-price-container",changeValueContainer:".djia-change-value-container",marketChangeContainer:".djia-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},
"ES*.CMG":{name:"S&P 500 Futures",chartContainer:".sp-500-chart-container",percentContainer:".sp-500-percent-change-container",lastPriceContainer:".sp-500-last-price-container",changeValueContainer:".sp-500-change-value-container",marketChangeContainer:".sp-500-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"NQ*.CMG":{name:"NASDAQ Futures",chartContainer:".nasdaq-chart-container",percentContainer:".nasdaq-percent-change-container",
lastPriceContainer:".nasdaq-last-price-container",changeValueContainer:".nasdaq-change-value-container",marketChangeContainer:".nasdaq-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"CL*.NX*":{name:"Crude Oil Futures",chartContainer:".crude-oil-chart-container",percentContainer:".crude-oil-percent-change-container",lastPriceContainer:".crude-oil-last-price-container",changeValueContainer:".crude-oil-change-value-container",marketChangeContainer:".crude-oil-market-change-container",
percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},"GC*.CX*":{name:"Gold Futures",chartContainer:".gold-chart-container",percentContainer:".gold-percent-change-container",lastPriceContainer:".gold-last-price-container",changeValueContainer:".gold-change-value-container",marketChangeContainer:".gold-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""},".TNX":{name:"10-Yr Bond Futures",chartContainer:".ten-year-bond-chart-container",
percentContainer:".ten-year-bond-percent-change-container",lastPriceContainer:".ten-year-bond-last-price-container",changeValueContainer:".ten-year-bond-change-value-container",marketChangeContainer:".ten-year-bond-market-change-container",percentChange:0,changeValue:0,lastPrice:0,dataArray:[],prevClose:0,min:0,max:0,type:""}});this.timestamp="";this.redirectURL=envMap.ERESEARCH_URL_VALUE+"/eresearch/goto/markets_sectors/landing.jhtml";this.error={occur:!1,errorMsg:""}},render:function(){var b=this;
if(0<a(".fid-card--mini-chart-container").length){var c=envMap.CORPORATEHOST_URL_VALUE+"/webcontent/ap108513-html5chart";f.css(c+"/css/fmr.minichart.css");var d=Math.round((new Date).getTime()/1E3);f.js(c+"/scripts/minichartbootstrapper.js?_="+d,envMap.WWW_CDN_URL+envMap.NG_CONTENT_URL+"/js/views/card-market-index-chart.js")}var e=function(){b.refresh()},h;a(document).bind("CARD_LAYOUT_CHANGED.summaryCards.todaysMarketsCardReflow",function(){var a=this,b=arguments;clearTimeout(h);h=setTimeout(function(){h=
null;e.apply(a,b)},250)});a(window).on("resize.summaryCards",function(){a(document).trigger("CARD_LAYOUT_CHANGED.summaryCards.todaysMarketsCardReflow")});return b},refresh:function(){if("todaysMarketsCardDisplayPriorCloseDuringPreMarket"===this.featureToggle){var a=this,b=a.$el.find('.market-chart-list-indices [class$="-percent-change-container"]'),c=a.$el.find('.market-chart-list-futures [class$="-futures-percent-change-container"]'),d=a.$el.find(".fid-card--block-futures-title-label");a._equalizeLineWrapping(d);
a._equalizeLineWrapping(b);a._equalizeLineWrapping(c)}else a=this,b=a.$el.find('.market-chart-list-indices [class$="-percent-change-container"]'),d=a.$el.find(".fid-card--block-chart-title-label"),a._equalizeLineWrapping(d),a._equalizeLineWrapping(b)},reload:function(){this._updateTopNews();this._requestChartData()},_requestChartData:function(){var b=this;(new g({context:this,onPreExecute:function(){},onSuccess:function(a){b._parseChartData(a)},onError:function(){d=b.error.occur=!0;b.error.errorMsg=
"Market data is currently unavailable. Please try again later."},onComplete:function(){d?b._handleError():(b._updatePage(b.showIndices),a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"))}})).run()},_formatData:function(a,b){var c=a.replace(/,/g,""),c=Math.round10(c,-b),c=Number(c).toFixed(2),c=c.toString().split(".");c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return c=c.join(".")},_parseTimestamp:function(a,b){var c="";"p"===a?c="AS OF "+b+" ET <sup>##</sup>":"o"===a?c="AS OF "+
b+" ET \u2013 Oil, Gold, 10-Yr Bond Data Delayed by 10 Min <sup>##</sup>":"c"===a&&(c="AS OF "+b+" ET <sup>##</sup>");return c},_parseRemainingHours:function(a,b,c,d){var e="";if("true"===a){d=a="";if(b){a=b.substr(b.indexOf("/")-2,b.length);for(b=0;b<c.length;b++)if(c[b].Date){d=c[b].Date;break}}e=""!==d&&""!==a&&a!==d?"as of Market Close "+d:"Markets Closed"}else e="Markets close in "+d;return e},_parseChartData:function(b){try{this._cleanData();for(var c=b.ChartResponse.CHART.QuoteData,e=0;e<c.length;e++){var f=
c[e],h=f.PC,g,r=f.CV,s,v=this.symbols[f.Symbol];"undefined"!=typeof v&&(v.lastPrice=this._formatData(f.LP,2),g=this._formatData(h.toString(),2),s=this._formatData(r.toString(),2),0<h?(v.percentChange="+"+g,v.type="color-positive"):0>h?(v.percentChange=g,v.type="color-negative"):(v.percentChange=g,v.type=""),v.changeValue=0<r?"+"+s:s)}b.ChartResponse.CHART.disclosureFlag&&b.ChartResponse.CHART.DynaAsOfTime&&(this.timestamp=this._parseTimestamp(b.ChartResponse.CHART.disclosureFlag,b.ChartResponse.CHART.DynaAsOfTime),
"p"===b.ChartResponse.CHART.disclosureFlag?(a(".market-index-redirect-URL").addClass("market-index-redirect-pre-market"),a(".market-chart-timestamp-container").addClass("market-chart-timestamp-container--pre-market")):(a(".market-index-redirect-URL").addClass("market-index-redirect-non-pre-market"),a(".market-chart-timestamp-container").addClass("market-chart-timestamp-container--non-pre-market")));this.remainHour=b.ChartResponse.CHART.remainedHours?this._parseRemainingHours(b.ChartResponse.CHART.isClosedInd,
b.ChartResponse.CHART.DynaAsOfTime,b.ChartResponse.CHART.ChartData,b.ChartResponse.CHART.remainedHours):"Market close time not available";this.remainingTime=b.ChartResponse.CHART.DynaRemainedHours?b.ChartResponse.CHART.DynaRemainedHours:"Market status is not available";this.showIndices="true"===b.ChartResponse.CHART.isIndexShow?!0:!1;if(!this.showIndices&&6>c.length)throw Error("future service error");}catch(A){d=!0,this.error.occur=!0,this.error.errorMsg="Market data is currently unavailable. Please try again later."}},
_updateCardTitle:function(b,c){if("todaysMarketsCardDisplayPriorCloseDuringPreMarket"===this.featureToggle){var d=a(b),e=d.parents(".card-layout--card-wrapper").prev(".card-layout-card-wrapper--work-around").find(".fid-card--title"),d=d.find(".fid-card--header"),f=e.text(),h="";e.is(":visible")&&(h=d.find(".fid-card--title:first").text(),h!==f&&e.text(h))}else d=a(b),e=d.parents(".card-layout--card-wrapper").prev(".card-layout-card-wrapper--work-around").find(".fid-card--title"),f=e.text(),e.is(":visible")&&
(h=d.find(".js-pre-market-hours").length&&d.find(".js-market-hours").length?!1===c?d.find(".js-pre-market-hours .fid-card--title").text():d.find(".js-market-hours .fid-card--title").text():d.find(".fid-card--title:first").text(),h!==f&&e.text(h))},_addRemainingTimeToCardHeader:function(b){var c=a(b);b=c.parents(".card-layout--card-wrapper").prev(".card-layout-card-wrapper--work-around").find(".fid-card--header");c=c.find(".js-remaining-time");b.is(":visible")&&c.length&&(b=b.find(".fid-card--title"),
c.clone(!0).insertAfter(b))},_addFeedbackLinkToCardHeader:function(b){var c=a(b);b=c.parents(".card-layout--card-wrapper").prev(".card-layout-card-wrapper--work-around").find(".fid-card--header");var d=c.find(".js-feedback-link");b.is(":visible")&&d.length&&(c=b.find(".fid-card--controls"),d=d.clone(!0),c.length?d.insertBefore(c):d.appendTo(b))},_updateWorkAroundCardHeader:function(b,c){var d=a(b);this._updateCardTitle(d,c);this._addRemainingTimeToCardHeader(d);this._addFeedbackLinkToCardHeader(d)},
_equalizeLineWrapping:function(b){var c=a(b),d,e=[];c.css("display","inline");for(b=0;b<c.length;b++)d=c.eq(b),d=d.position(),d=d.top,e.push(d);e.reduce(function(a,b){return a===b?a:NaN})||c.css("display","block")},_setFlagsForMeasurement:function(b,c){var d={oldVersion:!1,newVersion:{market:null,premarket:null}};!0===b?(d.newVersion.market=!0,d.newVersion.premarket=!1):(d.newVersion.market=!1,d.newVersion.premarket=!0);a(c).data("todaysMarketsVersion",d)},_updatePage:function(a){if("todaysMarketsCardDisplayPriorCloseDuringPreMarket"===
this.featureToggle){var b=this,c=b.$el.find(".fid-card--market-chart"),d=b.$el.find('.market-chart-list-indices [class$="-percent-change-container"]'),e=b.$el.find('.market-chart-list-futures [class$="-futures-percent-change-container"]');b.$(".market-remain-hour-container").html(b.remainHour);b.$(".js-remaining-time").html(b.remainingTime);b._updateWorkAroundCardHeader(c,a);!1===a?(c=b.$el.find(".fid-card--block-futures-title-label"),b.$(b.symbols["YM*.CBE"].percentContainer).html("("+b.symbols["YM*.CBE"].percentChange+
"%)"),b.$(b.symbols["YM*.CBE"].lastPriceContainer).html(b.symbols["YM*.CBE"].lastPrice),b.$(b.symbols["YM*.CBE"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["YM*.CBE"].type),b.$(b.symbols["YM*.CBE"].changeValueContainer).html(b.symbols["YM*.CBE"].changeValue),b.$(b.symbols["ES*.CMG"].percentContainer).html("("+b.symbols["ES*.CMG"].percentChange+"%)"),b.$(b.symbols["ES*.CMG"].lastPriceContainer).html(b.symbols["ES*.CMG"].lastPrice),b.$(b.symbols["ES*.CMG"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["ES*.CMG"].type),
b.$(b.symbols["ES*.CMG"].changeValueContainer).html(b.symbols["ES*.CMG"].changeValue),b.$(b.symbols["NQ*.CMG"].percentContainer).html("("+b.symbols["NQ*.CMG"].percentChange+"%)"),b.$(b.symbols["NQ*.CMG"].lastPriceContainer).html(b.symbols["NQ*.CMG"].lastPrice),b.$(b.symbols["NQ*.CMG"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["NQ*.CMG"].type),b.$(b.symbols["NQ*.CMG"].changeValueContainer).html(b.symbols["NQ*.CMG"].changeValue),b.$(".js-market-hours").hide(),
b.$(".js-pre-market-hours").show(),b._equalizeLineWrapping(c)):(b.$(".js-pre-market-hours").hide(),b.$(".js-market-hours").show());b.$(b.symbols[".DJI"].percentContainer).html("("+b.symbols[".DJI"].percentChange+"%)");b.$(b.symbols[".DJI"].lastPriceContainer).html(b.symbols[".DJI"].lastPrice);b.$(b.symbols[".DJI"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".DJI"].type);b.$(b.symbols[".DJI"].changeValueContainer).html(b.symbols[".DJI"].changeValue);
b.$(b.symbols[".SPX"].percentContainer).html("("+b.symbols[".SPX"].percentChange+"%)");b.$(b.symbols[".SPX"].lastPriceContainer).html(b.symbols[".SPX"].lastPrice);b.$(b.symbols[".SPX"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".SPX"].type);b.$(b.symbols[".SPX"].changeValueContainer).html(b.symbols[".SPX"].changeValue);b.$(b.symbols[".IXIC"].percentContainer).html("("+b.symbols[".IXIC"].percentChange+"%)");b.$(b.symbols[".IXIC"].lastPriceContainer).html(b.symbols[".IXIC"].lastPrice);
b.$(b.symbols[".IXIC"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".IXIC"].type);b.$(b.symbols[".IXIC"].changeValueContainer).html(b.symbols[".IXIC"].changeValue);b._equalizeLineWrapping(d);b._equalizeLineWrapping(e)}else b=this,c=b.$el.find(".fid-card--market-chart"),d=b.$el.find('.market-chart-list-indices [class$="-percent-change-container"]'),b.$(".market-remain-hour-container").html(b.remainHour),b.$(".js-remaining-time").html(b.remainingTime),
b._updateWorkAroundCardHeader(c,a),!1===a?(c=b.$el.find(".fid-card--block-chart-title-label"),b.$(b.symbols["YM*.CBE"].percentContainer).html("("+b.symbols["YM*.CBE"].percentChange+"%)"),b.$(b.symbols["YM*.CBE"].lastPriceContainer).html(b.symbols["YM*.CBE"].lastPrice),b.$(b.symbols["YM*.CBE"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["YM*.CBE"].type),b.$(b.symbols["YM*.CBE"].changeValueContainer).html(b.symbols["YM*.CBE"].changeValue),
b.$(b.symbols["ES*.CMG"].percentContainer).html("("+b.symbols["ES*.CMG"].percentChange+"%)"),b.$(b.symbols["ES*.CMG"].lastPriceContainer).html(b.symbols["ES*.CMG"].lastPrice),b.$(b.symbols["ES*.CMG"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["ES*.CMG"].type),b.$(b.symbols["ES*.CMG"].changeValueContainer).html(b.symbols["ES*.CMG"].changeValue),b.$(b.symbols["NQ*.CMG"].percentContainer).html("("+b.symbols["NQ*.CMG"].percentChange+"%)"),b.$(b.symbols["NQ*.CMG"].lastPriceContainer).html(b.symbols["NQ*.CMG"].lastPrice),
b.$(b.symbols["NQ*.CMG"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["NQ*.CMG"].type),b.$(b.symbols["NQ*.CMG"].changeValueContainer).html(b.symbols["NQ*.CMG"].changeValue),b.$(".js-market-hours").hide(),b.$(".js-pre-market-hours").show(),b._equalizeLineWrapping(c)):(b.$(b.symbols[".DJI"].percentContainer).html("("+b.symbols[".DJI"].percentChange+"%)"),b.$(b.symbols[".DJI"].lastPriceContainer).html(b.symbols[".DJI"].lastPrice),b.$(b.symbols[".DJI"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".DJI"].type),
b.$(b.symbols[".DJI"].changeValueContainer).html(b.symbols[".DJI"].changeValue),b.$(b.symbols[".SPX"].percentContainer).html("("+b.symbols[".SPX"].percentChange+"%)"),b.$(b.symbols[".SPX"].lastPriceContainer).html(b.symbols[".SPX"].lastPrice),b.$(b.symbols[".SPX"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".SPX"].type),b.$(b.symbols[".SPX"].changeValueContainer).html(b.symbols[".SPX"].changeValue),b.$(b.symbols[".IXIC"].percentContainer).html("("+
b.symbols[".IXIC"].percentChange+"%)"),b.$(b.symbols[".IXIC"].lastPriceContainer).html(b.symbols[".IXIC"].lastPrice),b.$(b.symbols[".IXIC"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".IXIC"].type),b.$(b.symbols[".IXIC"].changeValueContainer).html(b.symbols[".IXIC"].changeValue),b.$(".js-pre-market-hours").hide(),b.$(".js-market-hours").show()),b._equalizeLineWrapping(d);b.$(b.symbols["CL*.NX*"].percentContainer).html(b.symbols["CL*.NX*"].percentChange+
"%");b.$(b.symbols["CL*.NX*"].lastPriceContainer).html(b.symbols["CL*.NX*"].lastPrice);b.$(b.symbols["CL*.NX*"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["CL*.NX*"].type);b.$(b.symbols["CL*.NX*"].changeValueContainer).html(b.symbols["CL*.NX*"].changeValue);b.$(b.symbols["GC*.CX*"].percentContainer).html(b.symbols["GC*.CX*"].percentChange+"%");b.$(b.symbols["GC*.CX*"].lastPriceContainer).html(b.symbols["GC*.CX*"].lastPrice);b.$(b.symbols["GC*.CX*"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols["GC*.CX*"].type);
b.$(b.symbols["GC*.CX*"].changeValueContainer).html(b.symbols["GC*.CX*"].changeValue);b.$(b.symbols[".TNX"].percentContainer).html(b.symbols[".TNX"].percentChange+"%");b.$(b.symbols[".TNX"].lastPriceContainer).html(b.symbols[".TNX"].lastPrice);b.$(b.symbols[".TNX"].marketChangeContainer).removeClass(".color-positive").removeClass(".color-negative").addClass(b.symbols[".TNX"].type);b.$(b.symbols[".TNX"].changeValueContainer).html(b.symbols[".TNX"].changeValue);b.$(".market-chart-timestamp").html(b.timestamp);
b.$(".market-index-redirect-URL").attr("href",b.redirectURL);d=b.$el.parents(".card-layout--card-content");d.length&&b._setFlagsForMeasurement(a,d)},_parseHeadlineData:function(b){try{var c=jQuery.parseJSON(b);if(1>c.headlineResults.length||1>c.headlineResults[0].headline.length)throw" news error";for(b=0;b<c.headlineResults[0].headline.length&&b<a(".news-card--content").length;b++){var d=c.headlineResults[0].headline[b],e=a(".fid-card--list-top-news .news-card--content:eq("+b+") a").attr("href").replace(/\/news\/.*/gim,
"/news/article/top-news/"+d.resId);a(".fid-card--list-top-news .news-card--content:eq("+b+") a").attr("href",e);a(".fid-card--list-top-news .news-card--content:eq("+b+") a").prop("innerHTML",d.text);var f=d.wirename,g=d.receivedDate;if(d.receivedDate&&8==d.receivedDate.length)var r=d.receivedDate.substr(0,4),s=d.receivedDate.substr(4,2),v=d.receivedDate.substr(6,2),g=s/1+"/"+v/1+"/"+r;var A=d.receivedTime;if(d.receivedTime&&3==d.receivedTime.split(":").length)var w=d.receivedTime.split(":")[0]/1,
z=d.receivedTime.split(":")[1],D=12<=w?"PM":"AM",y=w%12,w=0==y?"12":y,A=w+":"+z+" "+D;a(".fid-card--list-top-news .news-card--content:eq("+b+") p").text(f+" - "+A+" ET "+g)}}catch(B){h=!0,this.error.errorMsg="Market news is currently unavailable. Please try again later."}},_updateTopNews:function(){var b=this;(new c({context:this,onPreExecute:function(){},onSuccess:function(a){b._parseHeadlineData(a)},onError:function(){h=b.error.occur=!0;b.error.errorMsg="Market news is currently unavailable. Please try again later."},
onComplete:function(){h?b._handleError():(a("#HeadLineDispRegion").html(b.newsLink),a("#HeadLineURL").val(b.urlLink),a("#HeadLineTopic").val(b.topName));a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},_handleError:function(){this.$(".market-chart-list").addClass("display-none");this.$(".market-index-redirect-URL").addClass("display-none");d&&h?(this.$(".market-chart-card--error-section").removeClass("display-none"),this.$(".market-chart-card--error-section .market-chart-card--error-text-container").text("Market data and news are currently unavailable. Please try again later."),
a(".fid-card--block").css("display","none"),a(".market-chart-card--error-section").addClass("market-chart-card-index-error"),a(".fid-card--sub-title").parent().css("display","none")):d?(this.$(".market-chart-card--error-section").removeClass("display-none"),this.$(".market-chart-card--error-section .market-chart-card--error-text-container").text(this.error.errorMsg),a(".fid-card--block").css("display","none"),a(".market-chart-card--error-section").addClass("market-chart-card-index-error")):h&&(this.$(".market-chart-card--error-news").removeClass("display-none"),
this.$(".market-chart-card--error-news .market-chart-card--error-text-container").text(this.error.errorMsg),a(".fid-card--list-top-news").css("display","none"),a(".fid-card--market-chart .fid-card--footer").css("display","none"))},_cleanData:function(){this.remainHour="";this.symbols[".DJI"].dataArray=[];this.symbols[".DJI"].percentChange=0;this.symbols[".DJI"].changeValue=0;this.symbols[".DJI"].lastPrice=0;this.symbols[".DJI"].type="";this.symbols[".SPX"].dataArray=[];this.symbols[".SPX"].percentChange=
0;this.symbols[".SPX"].changeValue=0;this.symbols[".SPX"].lastPrice=0;this.symbols[".SPX"].type="";this.symbols[".IXIC"].dataArray=[];this.symbols[".IXIC"].percentChange=0;this.symbols[".IXIC"].changeValue=0;this.symbols[".IXIC"].lastPrice=0;this.symbols[".IXIC"].type="";this.symbols["YM*.CBE"].dataArray=[];this.symbols["YM*.CBE"].percentChange=0;this.symbols["YM*.CBE"].changeValue=0;this.symbols["YM*.CBE"].lastPrice=0;this.symbols["YM*.CBE"].type="";this.symbols["ES*.CMG"].dataArray=[];this.symbols["ES*.CMG"].percentChange=
0;this.symbols["ES*.CMG"].changeValue=0;this.symbols["ES*.CMG"].lastPrice=0;this.symbols["ES*.CMG"].type="";this.symbols["NQ*.CMG"].dataArray=[];this.symbols["NQ*.CMG"].percentChange=0;this.symbols["NQ*.CMG"].changeValue=0;this.symbols["NQ*.CMG"].lastPrice=0;this.symbols["NQ*.CMG"].type="";this.symbols["CL*.NX*"].dataArray=[];this.symbols["CL*.NX*"].percentChange=0;this.symbols["CL*.NX*"].changeValue=0;this.symbols["CL*.NX*"].lastPrice=0;this.symbols["CL*.NX*"].type="";this.symbols["GC*.CX*"].dataArray=
[];this.symbols["GC*.CX*"].percentChange=0;this.symbols["GC*.CX*"].changeValue=0;this.symbols["GC*.CX*"].lastPrice=0;this.symbols["GC*.CX*"].type="";this.symbols[".TNX"].dataArray=[];this.symbols[".TNX"].percentChange=0;this.symbols[".TNX"].changeValue=0;this.symbols[".TNX"].lastPrice=0;this.remainingTime=this.timestamp=this.symbols[".TNX"].type="";this.error.errorMsg="";this.error.occur=!1}})});
define("tpl!templates/retirement-limitations-assumptions-modal.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-medium retirement-limitations-assumptions-modal-container">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="retirement-limitations-assumptions-modal base-modal" role="dialog" aria-labelledby="retirement-limitations-assumptions-modal">\n\t\t<h3 class="textblock--h3-headline" tabindex="-1">Limitations and Assumptions</h3>\n\t\t<div class="retirement-limitations-assumptions-content">\n\t\t\t<div class="retirement-limitations-assumptions-body">\n\t\t\t\t<p>The hypothetical illustration does not predict future market conditions, or predict or project the performance of actual investments or actual holdings in your selected accounts. All calculations and results are hypothetical in nature and make a number of assumptions about future market returns, inflation, asset growth, tax assumptions, and certain assumptions about your personal situation. The illustration may understate the effect of taxation on asset and income amounts as a result of these assumptions. Please visit the Planning and Guidance Center for information concerning your personal situation.</p>\n\t\t\t\t<p>The illustration represents a hypothetical investor of your age retiring today and living until the age of 93 ("Time Horizon"). Only the balance of your selected IRA account is included in the hypothetical income illustration. The illustration does not consider your potentially consistent asset withdrawals for monthly retirement income, designed to fully deplete the asset balance, based on a series of annual rate of return estimates generated using multiple market simulations. A balanced asset allocation was used for modeling purposes only to illustrate growth of the hypothetical account balance through the Time Horizon. The hypothetical retirement withdrawal amounts are illustrated using a model balanced asset allocation, defined as 50% stock, 40% bonds and 10% short term allocations, and "conservative" market conditions based on historical returns and volatility, defined as estimates that may have been achieved in 9 out of 10 hypothetical market scenarios.  The illustration depends on a number of hypothetical assumptions, including starting balance, Time Horizon, and hypothetical market performance, and does not consider your investments, taxes, investment fees, or other factors specific to your individual situation. Neither the modeled asset allocation nor any other results are recommendations of any investment or investment strategy.</p>\n\t\t\t\t<p>Future dollars and current dollars (also known as "today\'s dollars") are different ways of viewing values over time. Future dollar values illustrate how a current expense would grow over time taking into account the effects of projected inflation. For example, if something costs $1,000 today, in 10 years the future dollar value is $1,280 ($1,000 plus 10 years of assumed inflation growth at 2.50%). This method is used to estimate the effects of inflation. While both ways are correct means of presenting values, the illustration uses <b>current dollars</b> or "today\'s dollars" for presenting all balances and cash flows. The illustration does not model the Internal Revenue Code or plan rules for qualified retirement accounts including any penalties or minimum required distribution (MRD). The illustration assumes no taxes, transaction costs or fees of any kind. It does not calculate actual tax liabilities or benefits and, therefore, should not be used for tax-planning or tax-reporting purposes. Consult your tax advisor regarding questions specific to your tax situation.</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<fieldset class="base-modal--actions">\n\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t<button type="button" role="button" class="action-button--secondary">Close</button>\n\t\t\t</p>\n\t\t</fieldset>\n\t</div>\n</div>\n');
return b.join("")}});
define("views/card-retirement-income-view",["jquery","views/base-view","components/modalpopup","tpl!../templates/retirement-limitations-assumptions-modal.html","highcharts"],function(a,b,g,c){function e(b){a.each(b.series[0].points,function(a,c){(1==a||3==a||5==a)&&b.renderer.circle(c.plotX+b.plotLeft,c.plotY+b.plotTop,n).attr({fill:Highcharts.getOptions().colors[0],opacity:0.3,"class":"haloPoint"}).add()})}function d(b){var c;a.each(b.series[0].points,function(a,d){if(1==a||3==a||5==a)c=1==a?A:1.1,
b.renderer.path(["M",d.plotX+b.plotLeft,d.plotY+b.plotTop-n,"L",d.plotX+b.plotLeft-m/2,d.plotY+b.plotTop-n-l,"L",d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/c+r,d.plotY+b.plotTop-n-l,"Q",d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l,d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l-r,"L",d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height+r,"Q",d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/
c,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height,d.plotX+b.plotLeft-d.dataLabel.box.getBBox().width/c+r,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height,"L",d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c-r,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height,"Q",d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height,d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l-d.dataLabel.box.getBBox().height+
r,"L",d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l-r,"Q",d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c,d.plotY+b.plotTop-n-l,d.plotX+b.plotLeft+d.dataLabel.box.getBBox().width/c-r,d.plotY+b.plotTop-n-l,"L",d.plotX+b.plotLeft+m/2,d.plotY+b.plotTop-n-l]).attr({fill:p[a-1],"class":"dataLabelCallOut"}).add()})}function h(b){a.each(b.series[0].points,function(a,c){1==a?b.renderer.text("TODAY",c.plotX-20+b.plotLeft,c.plotY+b.plotTop+s).attr({"class":"targetRetirementAge"}).css({color:"#000000",
fontSize:v,fontFamily:"Helvetica, Arial, sans-serif"}).add():3==a?(b.renderer.text("RETIRING",c.plotX-28+b.plotLeft,c.plotY+b.plotTop+s).attr({"class":"targetRetirementAge"}).css({color:"#000000",fontSize:v,fontFamily:"Helvetica, Arial, sans-serif"}).add(),b.renderer.text("EARLY",c.plotX+b.plotLeft-19,c.plotY+b.plotTop+s+14).attr({"class":"targetRetirementAge"}).css({color:"#000000",fontSize:v,fontFamily:"Helvetica, Arial, sans-serif"}).add()):5==a&&(b.renderer.text("PLANNED",c.plotX-28+b.plotLeft,
c.plotY+b.plotTop+s).attr({"class":"targetRetirementAge"}).css({color:"#000000",fontSize:v,fontFamily:"Helvetica, Arial, sans-serif"}).add(),b.renderer.text("RETIREMENT",c.plotX+b.plotLeft-38,c.plotY+b.plotTop+s+14).attr({"class":"targetRetirementAge"}).css({color:"#000000",fontSize:v,fontFamily:"Helvetica, Arial, sans-serif"}).add())})}function f(b){var c=a(b.options.viewObj),d=a(b.options.chartContainer);if(!(0===d.length||0===c.length)){v=325>=c.width()?"10px":"12px";var e=c.width()-16;d.css("width",
c.width()-16);b.setSize(e,95,!1);b.redraw(!1)}}var j,k,l=5,p=["rgba(19, 104, 136, 0.7)","rgba(19, 104, 136, 0.7)","rgba(24, 139, 181, 0.7)","rgba(24, 139, 181, 0.7)","rgba(76, 169, 229, 0.7)"],m=12,n=10,r=5,s=25,v="12px",A=1.1,w;a(document).bind("CARD_LAYOUT_CHANGED",function(){j&&(clearTimeout(w),w=setTimeout(function(){f(j);w=null},200))});return b.extend({events:{"click .js-limitations-assumptions-modal":"openLimitationsPopUp"},initialize:function(){k&&this.closeLimitationsPopUp();var b=a(".js-retirement-limitations-assumptions-modal-container").empty();
b.length||(b=a("<div>").addClass("js-retirement-limitations-assumptions-modal-container").appendTo(document.body));var d=c({});k=a(d);b.html(k);k.ModalPopup();b.find(".action-button--secondary").on("click",this.closeLimitationsPopUp)},createChartContent:function(){var b=[];b.push(e);b.push(d);b.push(h);var c=this.$el,j=this.$(".retirement-income--chart-container");if(j[0]&&c){var g=c.data("firstIncome");A=100>g?0.9:99<g&&1E3>g?1.5:1.8;j=j[0];g={chart:{renderTo:j,type:"line",margin:[0,0,0,0],spacing:[0,
0,0,0],events:{load:function(c){f(this);var d=c.currentTarget;a(b).each(function(a,b){"function"===typeof b&&b.call(this,d)})},redraw:function(c){a(".haloPoint").remove();a(".dataLabelCallOut").remove();a(".targetRetirementAge").remove();var d=c.currentTarget;a(b).each(function(a,b){"function"===typeof b&&b.call(this,d)})}}},title:{text:null},legend:{enabled:!1},credits:{enabled:!1},xAxis:{labels:{enabled:!1},gridLineWidth:0,minPadding:0,maxPadding:0},yAxis:{labels:{enabled:!1},gridLineWidth:0},tooltip:{enabled:!1},
plotOptions:{series:{fillOpacity:0,marker:{lineWidth:1,lineColor:"#FFFFFF",fillColor:"#4CA9E5"},enableMouseTracking:!1}},series:[{lineWidth:2,lineColor:"#83D4F4",data:[{z:" ",y:1,marker:{enabled:!1},dataLabels:{enabled:!1}},{z:g,y:1,dataLabels:{enabled:!0,borderWidth:1,borderRadius:5,padding:5,format:"${point.z:,.f}",y:-1*(l+n),color:"white",style:{fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"300",letterSpacing:".5px",opacity:1}}},{z:" ",y:1,marker:{enabled:!1},dataLabels:{enabled:!1}},
{z:"???",y:1,dataLabels:{enabled:!0,borderWidth:1,borderRadius:5,padding:5,format:"{point.z}",y:-1*(l+n),color:"white",style:{fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"300",letterSpacing:".5px",opacity:1}}},{z:" ",y:1,marker:{enabled:!1},dataLabels:{enabled:!1}},{z:"???",y:1,dataLabels:{enabled:!0,borderWidth:1,borderRadius:5,padding:5,format:"{point.z}",y:-1*(l+n),color:"white",style:{fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"300",letterSpacing:".5px",
opacity:1}}},{z:" ",y:1,marker:{enabled:!1},dataLabels:{enabled:!1}}]}]};g.viewObj=c;g.chartContainer=j;this.drawChart(g)}},drawChart:function(a){j=new Highcharts.Chart(a)},openLimitationsPopUp:function(){var b=0<(a(window).height()-k.height())/2?(a(window).height()-k.height())/2+"px":"5%";k.css("position","fixed").css("top",b);k.ModalPopup("open");k.css("top",k.offset().top+"px").css("position","absolute")},closeLimitationsPopUp:function(){k.ModalPopup("close")}})});
define("tpl!templates/memory-wall-tou.html",function(){return function(a){var b=[];with(a)b.push('<div id="memory-wall-tou__popup" class="base-popup base-modal--container base-modal--container-medium">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div>\n\t\t<div class="memory-wall-tou__title"><h3>Terms and Conditions</h3></div>\n\t\t<div class="memory-wall-tou__content">\n\t\t\t<div>By uploading a photo or image to your account as part of your voluntary participation in the Your Big Picture Card Program (the \u201cPhoto\u201d), you agree to the following terms and conditions regarding your use of the program offered by Fidelity Brokerage Services LLC (\u201cFidelity\u201d) entitled the Your Big Picture Card Program (the \u201cService\u201d).</div>\n\t\t\t<ul>\n\t\t\t\t<li>You represent and warrant that you are the sole owner or licensee of the Photo and have obtained all necessary permissions, as applicable, to upload the Photo to the Service.</li>\n\t\t\t\t<li>You agree to provide Fidelity and its affiliates with a limited, nonexclusive worldwide license to display your photo on or through Fidelity\u2019s websites (such as, but not limited to, www.fidelity.com) or other platforms on which the Service is offered.  Fidelity may store your photo for as long as necessary and appropriate under applicable laws and regulations. </li>\n\t\t\t\t<li>You release and waive all claims against Fidelity with respect to any intellectual property or other proprietary rights, rights of publicity and privacy, rights of attribution, or any other liability under the governing law of the United States and any applicable international law in connection with Fidelity\u2019s use of the Photo in   the Service.  </li>\n\t\t\t\t<li>You acknowledge that Fidelity does not consider uploaded photos as an indication of your investment goals.</li>\n\t\t\t\t<li>You agree that your use of the Service is subject to Fidelity\u2019s Privacy Policy and all agreements governing your relationship with Fidelity.</li>\n\t\t\t\t<li>You acknowledge that Fidelity may, in its sole discretion, remove the Photo for a variety of reasons and is under no obligation to use the Photo in connection with the Service.</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="lower-buttons">\n\t\t\t<a href="javascript:void(0)" class="memory-wall-tou__cancel">Cancel</a>\n\t\t\t<button class="momory-wall-tou__agree--btn button-component button--secondary">Agree</button>\n\t\t</div>\n\t</div>\n</div>');
return b.join("")}});
(function(){var a=function(a,b,c){var d=a,e=b||0,f=0;this.getRawData=function(){return d};"string"==typeof a&&(f=c||d.length,this.getByteAt=function(a){return d.charCodeAt(a+e)&255});this.getLength=function(){return f};this.getSByteAt=function(a){a=this.getByteAt(a);return 127<a?a-256:a};this.getShortAt=function(a,b){var c=b?(this.getByteAt(a)<<8)+this.getByteAt(a+1):(this.getByteAt(a+1)<<8)+this.getByteAt(a);0>c&&(c+=65536);return c};this.getSShortAt=function(a,b){var c=this.getShortAt(a,b);return 32767<
c?c-65536:c};this.getLongAt=function(a,b){var c=this.getByteAt(a),d=this.getByteAt(a+1),e=this.getByteAt(a+2),f=this.getByteAt(a+3),c=b?(((c<<8)+d<<8)+e<<8)+f:(((f<<8)+e<<8)+d<<8)+c;0>c&&(c+=4294967296);return c};this.getSLongAt=function(a,b){var c=this.getLongAt(a,b);return 2147483647<c?c-4294967296:c};this.getStringAt=function(a,b){for(var c=[],d=a,e=0;d<a+b;d++,e++)c[e]=String.fromCharCode(this.getByteAt(d));return c.join("")};this.getCharAt=function(a){return String.fromCharCode(this.getByteAt(a))};
this.toBase64=function(){return window.btoa(d)};this.fromBase64=function(a){d=window.atob(a)}},b,g=function(){var a=null;window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a},c=function(b,c,d,e,f,j){var h=g();if(h){var k=0;e&&!f&&(k=e[0]);var w=0;e&&(w=e[1]-e[0]+1);c&&("undefined"!=typeof h.onload?h.onload=function(){"200"==h.status||"206"==h.status||"0"==h.status?(this.binaryResponse=new a(this.responseText,k,w),this.fileSize=j||this.getResponseHeader("Content-Length"),
c(this)):d&&d();h=null}:h.onreadystatechange=function(){4==h.readyState&&("200"==h.status||"206"==h.status||"0"==h.status?(this.binaryResponse=new a(h.responseBody,k,w),this.fileSize=j||this.getResponseHeader("Content-Length"),c(this)):d&&d(),h=null)});h.open("GET",b,!0);h.overrideMimeType&&h.overrideMimeType("text/plain; charset=x-user-defined");e&&f&&h.setRequestHeader("Range","bytes="+e[0]+"-"+e[1]);h.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT");h.send(null)}else d&&d()};
b=function(a,b,d,e){if(e){var f=function(f){var j=parseInt(f.getResponseHeader("Content-Length"),10);f=f.getResponseHeader("Accept-Ranges");var h;h=e[0];0>e[0]&&(h+=j);c(a,b,d,[h,h+e[1]-1],"bytes"==f,j)},j=g();j&&(f&&("undefined"!=typeof j.onload?j.onload=function(){"200"==j.status&&f(this);j=null}:j.onreadystatechange=function(){4==j.readyState&&("200"==j.status&&f(this),j=null)}),j.open("HEAD",a,!0),j.send(null))}else c(a,b,d)};var e={},d=function(a){if(255!=a.getByteAt(0)||216!=a.getByteAt(1))return!1;
for(var b=2,c=a.getLength();b<c;){if(255!=a.getByteAt(b))return k&&console.log("Not a valid marker at offset "+b+", found: "+a.getByteAt(b)),!1;var d=a.getByteAt(b+1);if(22400==d||225==d)return k&&console.log("Found 0xFFE1 marker"),j(a,b+4,a.getShortAt(b+2,!0)-2);b+=2+a.getShortAt(b+2,!0)}},h=function(a,b,c,d,e){for(var j=a.getShortAt(c,e),h={},g=0;g<j;g++){var w=c+12*g+2,z=d[a.getShortAt(w,e)];!z&&k&&console.log("Unknown tag: "+a.getShortAt(w,e));h[z]=f(a,w,b,c,e)}return h},f=function(a,b,c,d,e){var f=
a.getShortAt(b+2,e);d=a.getLongAt(b+4,e);c=a.getLongAt(b+8,e)+c;switch(f){case 1:case 7:if(1==d)return a.getByteAt(b+8,e);c=4<d?c:b+8;b=[];for(f=0;f<d;f++)b[f]=a.getByteAt(c+f);return b;case 2:return a.getStringAt(4<d?c:b+8,d-1);case 3:if(1==d)return a.getShortAt(b+8,e);c=2<d?c:b+8;b=[];for(f=0;f<d;f++)b[f]=a.getShortAt(c+2*f,e);return b;case 4:if(1==d)return a.getLongAt(b+8,e);b=[];for(f=0;f<d;f++)b[f]=a.getLongAt(c+4*f,e);return b;case 5:if(1==d)return a.getLongAt(c,e)/a.getLongAt(c+4,e);b=[];for(f=
0;f<d;f++)b[f]=a.getLongAt(c+8*f,e)/a.getLongAt(c+4+8*f,e);return b;case 9:if(1==d)return a.getSLongAt(b+8,e);b=[];for(f=0;f<d;f++)b[f]=a.getSLongAt(c+4*f,e);return b;case 10:if(1==d)return a.getSLongAt(c,e)/a.getSLongAt(c+4,e);b=[];for(f=0;f<d;f++)b[f]=a.getSLongAt(c+8*f,e)/a.getSLongAt(c+4+8*f,e);return b}},j=function(a,b){if("Exif"!=a.getStringAt(b,4))return k&&console.log("Not valid EXIF data! "+a.getStringAt(b,4)),!1;var c,d=b+6;if(18761==a.getShortAt(d))c=!1;else if(19789==a.getShortAt(d))c=
!0;else return k&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;if(42!=a.getShortAt(d+2,c))return k&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(8!=a.getLongAt(d+4,c))return k&&console.log("Not valid TIFF data! (First offset not 8)",a.getShortAt(d+4,c)),!1;var f=h(a,d,d+8,e.TiffTags,c);if(f.ExifIFDPointer){var j=h(a,d,d+f.ExifIFDPointer,e.Tags,c),g;for(g in j){switch(g){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":j[g]=
e.StringValues[g][j[g]];break;case "ExifVersion":case "FlashpixVersion":j[g]=String.fromCharCode(j[g][0],j[g][1],j[g][2],j[g][3]);break;case "ComponentsConfiguration":j[g]=e.StringValues.Components[j[g][0]]+e.StringValues.Components[j[g][1]]+e.StringValues.Components[j[g][2]]+e.StringValues.Components[j[g][3]]}f[g]=j[g]}}if(f.GPSInfoIFDPointer)for(g in c=h(a,d,d+f.GPSInfoIFDPointer,e.GPSTags,c),c){switch(g){case "GPSVersionID":c[g]=c[g][0]+"."+c[g][1]+"."+c[g][2]+"."+c[g][3]}f[g]=c[g]}return f},k=
!1;e.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",
37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",
41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};e.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",
274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};
e.GPSTags={"0":"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",
26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};e.StringValues={ExposureProgram:{"0":"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{"0":"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{"0":"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",
4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{"0":"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",
13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",
73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",
3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{"0":"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{"0":"Normal process",1:"Custom process"},WhiteBalance:{"0":"Auto white balance",1:"Manual white balance"},GainControl:{"0":"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{"0":"Normal",
1:"Soft",2:"Hard"},Saturation:{"0":"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{"0":"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{"0":"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{"0":"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};e.getData=function(a,c){if(!a.complete)return!1;a.exifdata?c&&c():b(a.src,function(b){console.log("BINARY",b.binaryResponse);b=d(b.binaryResponse);a.exifdata=b||{};c&&c()});return!0};e.getDataFromDataURL=function(b,
c){if(!b.complete)return!1;if(b.exifdata)c&&c();else{var e=atob(b.src.split(",")[1]);if(e=new a(e,0,e.length))e=d(e),b.exifdata=e||{},c&&c()}return!0};e.getTag=function(a,b){if(a.exifdata)return a.exifdata[b]};e.getAllTags=function(a){if(!a.exifdata)return{};a=a.exifdata;var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};e.pretty=function(a){if(!a.exifdata)return"";a=a.exifdata;var b="",c;for(c in a)a.hasOwnProperty(c)&&(b="object"==typeof a[c]?b+(c+" : ["+a[c].length+" values]\r\n"):
b+(c+" : "+a[c]+"\r\n"));return b};e.readFromBinaryFile=function(a){return d(a)};jQuery(document).ready(function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)if("true"==a[b].getAttribute("exif"))if(a[b].complete)e.getData(a[b]);else{var c=a[b],d=function(){e.getData(this)};c.addEventListener?c.addEventListener("load",d,!1):c.attachEvent&&c.attachEvent("onload",d)}});jQuery.fn.exifLoad=function(a){return this.each(function(){e.getData(this,a)})};jQuery.fn.exifLoadFromDataURL=
function(a){return this.each(function(){e.getDataFromDataURL(this,a);return!0})};jQuery.fn.exif=function(a){var b=[];this.each(function(){b.push(e.getTag(this,a))});return b};jQuery.fn.exifAll=function(){var a=[];this.each(function(){a.push(e.getAllTags(this))});return a};jQuery.fn.exifPretty=function(){var a=[];this.each(function(){a.push(e.pretty(this))});return a}})();define("exif",function(){});
(function(a){function b(b,c){this.file=b;this.options=a.extend({},e,c);this._defaults=e;this._name=g;this.init()}var g="canvasResize",c={newsize:function(a,b,c,e,g){var l=g?"h":"";if(c&&a>c||e&&b>e)b=a/b,(1<=b||0===e)&&c&&!g?(a=c,b=c/b>>0):g&&b<=c/e?(a=c,b=c/b>>0,l="w"):(a=e*b>>0,b=e);return{width:a,height:b,cropped:l}},dataURLtoBlob:function(a){var b=a.split(",")[0].split(":")[1].split(";")[0],c=atob(a.split(",")[1]);a=new ArrayBuffer(c.length);for(var e=new Uint8Array(a),g=0;g<c.length;g++)e[g]=
c.charCodeAt(g);return(c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder)?(c=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder),c.append(a),c.getBlob(b)):c=new Blob([a],{type:b})},detectSubsampling:function(a){var b=a.width;if(1048576<b*a.height){var c=document.createElement("canvas");c.width=c.height=1;c=c.getContext("2d");c.drawImage(a,-b+1,0);return 0===c.getImageData(0,0,1,1).data[3]}return!1},rotate:function(a,b){var c={1:{90:6,180:3,270:8},2:{90:7,
180:4,270:5},3:{90:8,180:1,270:6},4:{90:5,180:2,270:7},5:{90:2,180:7,270:4},6:{90:3,180:8,270:1},7:{90:4,180:5,270:2},8:{90:1,180:6,270:3}};return c[a][b]?c[a][b]:a},transformCoordinate:function(a,b,c,e){switch(e){case 5:case 6:case 7:case 8:a.width=c;a.height=b;break;default:a.width=b,a.height=c}a=a.getContext("2d");switch(e){case 2:a.translate(b,0);a.scale(-1,1);break;case 3:a.translate(b,c);a.rotate(Math.PI);break;case 4:a.translate(0,c);a.scale(1,-1);break;case 5:a.rotate(0.5*Math.PI);a.scale(1,
-1);break;case 6:a.rotate(0.5*Math.PI);a.translate(0,-c);break;case 7:a.rotate(0.5*Math.PI);a.translate(b,-c);a.scale(-1,1);break;case 8:a.rotate(-0.5*Math.PI),a.translate(-b,0)}},detectVerticalSquash:function(a,b,c){b=document.createElement("canvas");b.width=1;b.height=c;b=b.getContext("2d");b.drawImage(a,0,0);a=b.getImageData(0,0,1,c).data;b=0;for(var e=c,g=c;g>b;)0===a[4*(g-1)+3]?e=g:b=g,g=e+b>>1;c=g/c;return 0===c?1:c},callback:function(a){return a}},e={width:300,height:0,crop:!1,quality:80,callback:c.callback};
b.prototype={init:function(){var b=this,e=this.file,f=new FileReader;f.onloadend=function(f){f=f.target.result;var g=new Image;g.onload=function(){a(g).exifLoadFromDataURL(function(){var f=a(g).exif("Orientation")[0]||1,f=c.rotate(f,b.options.rotate),j=5<=f&&8>=f?c.newsize(g.height,g.width,b.options.width,b.options.height,b.options.crop):c.newsize(g.width,g.height,b.options.width,b.options.height,b.options.crop),m=g.width,n=g.height,r=j.width,s=j.height,v=document.createElement("canvas"),A=v.getContext("2d");
A.save();c.transformCoordinate(v,r,s,f);c.detectSubsampling(g)&&(m/=2,n/=2);f=document.createElement("canvas");f.width=f.height=1024;for(var w=f.getContext("2d"),z=c.detectVerticalSquash(g,m,n),D=0;D<n;){for(var y=D+1024>n?n-D:1024,B=0;B<m;){var I=B+1024>m?m-B:1024;w.clearRect(0,0,1024,1024);w.drawImage(g,-B,-D);var S=Math.floor(B*r/m),J=Math.ceil(I*r/m),O=Math.floor(D*s/n/z),V=Math.ceil(y*s/n/z);A.drawImage(f,0,0,I,y,S,O,J,V);B+=1024}D+=1024}A.restore();m=document.createElement("canvas");m.width=
"h"===j.cropped?s:r;m.height="w"===j.cropped?r:s;n="h"===j.cropped?0.5*(s-r):0;j="w"===j.cropped?0.5*(r-s):0;newctx=m.getContext("2d");newctx.drawImage(v,n,j,r,s);v="image/png"===e.type?m.toDataURL(e.type):m.toDataURL("image/jpeg",0.01*b.options.quality);b.options.callback(v,r,s)})};g.src=f};f.readAsDataURL(e)}};a[g]=function(a,e){if("string"===typeof a)return c[a](e);new b(a,e)}})(jQuery);define("canvasResize",["jquery","exif"],function(){});
define("views/card-memory-wall-view","jquery views/base-view tasks/state-save-task tasks/state-delete-task tpl!templates/memory-wall-tou.html canvasResize".split(" "),function(a,b,g,c,e){return b.extend({events:{"click .memory-wall-icon-wrapper.delete":"deleteImg","click .memory-wall-icon-wrapper.upload":"replaceImg","click .memory-wall--box__choose":"replaceImg"},initialize:function(){var a=this;""!==this.$("#memory-wall-preview").attr("src")&&this.showPictureView();var b;b=document.createElement("div");
b=("draggable"in b||"ondragstart"in b&&"ondrop"in b)&&"FormData"in window&&"FileReader"in window;a.touAgreed="Y"===this.$(".memory-wall-card").data("tou-agreed")?!0:!1;var c=document.querySelectorAll(".memory-wall--box, .memory-wall-picture");if(c)for(var e=0;e<c.length;e++){var g=c[e],l=g.querySelector('input[type="file"]');g.querySelector("label");g.querySelector(".memory-wall--box__error span");a.compatibleWithIE8(l);l&&l.addEventListener("change",function(){a.showFiles(document.getElementById("file").files)});
b&&(a.compatibleWithIE8(g),g.classList.add("has-advanced-upload"),"drag dragstart dragend dragover dragenter dragleave drop".split(" ").forEach(function(a){g.addEventListener(a,function(a){a.preventDefault();a.stopPropagation()})}),["dragover","dragenter"].forEach(function(a){g.addEventListener(a,function(){g.classList.add("is-dragover")})}),["dragleave","dragend","drop"].forEach(function(a){g.addEventListener(a,function(){g.classList.remove("is-dragover")})}),g.addEventListener("drop",function(b){var c=
b.dataTransfer.files;a.showTOU(function(){a.showFiles(c)})}));l&&l.addEventListener("focus",function(){l.classList.add("has-focus")});l&&l.addEventListener("blur",function(){l.classList.remove("has-focus")})}},touAgreed:!1,showFiles:function(b){var c=this;a.canvasResize(b[0],{width:708,height:400,crop:!1,quality:80,callback:function(b){c.$("#memory-wall-preview").attr("src",b);c.showPictureView(function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});c.uploadImg(b)}})},deleteImg:function(){this.hidePictureView(function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});
this.$("#file").val("");(new c({context:this,data:JSON.stringify({state:[{path:"/user/oce/summary/some-day",version:"1.0",entry:[{key:"image"}]}]}),onPreExecute:function(){},onSuccess:function(){console.log("success")},onError:function(){console.log("error")},onComplete:function(){console.log("complete")}})).run()},uploadImg:function(a){(new g({context:this,data:JSON.stringify({state:[{path:"/user/oce/summary/some-day",version:"1.0",entry:[{key:"image",value:a}]}]}),onPreExecute:function(){},onSuccess:function(){console.log("success")},
onError:function(){console.log("error")},onComplete:function(){console.log("complete")}})).run()},destroy:function(){},replaceImg:function(){var a=this;this.showTOU(function(){a.$("#file").click()})},isCardEditding:function(){return 0<a(".card-layout--editing").length},showPictureView:function(a){this.$(".memory-wall--box").hide(400);this.$(".memory-wall-picture").show(400,a)},hidePictureView:function(a){this.$(".memory-wall-picture").hide(400);this.$(".memory-wall--box").show(400,a)},showTOU:function(b){function c(){n.ModalPopup("close");
k.touAgreed=!0;(new g({context:k,data:JSON.stringify({state:[{path:"/user/oce/summary/some-day",version:"1.0",entry:[{key:"touagreed",value:"Y"}]}]}),onPreExecute:function(){},onSuccess:function(){console.log("Agreed Term of Use.")},onError:function(){console.log("Agreed Term of Use. - failed")}})).run();b()}function f(){n.ModalPopup("close")}function j(){p.off("click",c);n.remove()}var k=this;if(k.touAgreed)b();else{var l=a(e({})),p=l.find(".momory-wall-tou__agree--btn"),m=l.find(".memory-wall-tou__cancel"),
n=l.ModalPopup();p.on("click",c);m.on("click",f);n.on("CloseDialog",j);a("body").append(l);n.ModalPopup("open")}},compatibleWithIE8:function(a){a&&!a.addEventListener&&(a.addEventListener=function(b,c){a.attachEvent&&a.attachEvent(b,c)})}})});
define("tpl!templates/ballot-box-modal.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large ballot-box-modal" role="dialog">\n    \x3c!-- Hidden for redundancy --\x3e\n    <div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n    <div class="base-popup--body">\n        <div class="ballot-box--header">\n            <h2 class="ballot-box--header-text">Fidelity Ballot Box</h2>\n        </div>\n\n        \x3c!-- ----------------------- START: "Opt-in" view ----------------------- --\x3e\n        <div id="ballot-opt-in">\n            <div class="ballot-box--flex-container">\n                <div class="ballot-opt-in--item ballot-opt-in--icon">\n                    <img src="'),b.push(envMap.WWW_CDN_URL),
b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/AnimatedBeaker.gif">\n                </div>\n                <div class="ballot-opt-in--item ballot-opt-in--content">\n                    <p class="ballot-box--content-text">The ballot box helps us gather customer input on which website features to build next.</p>\n                    <br/>\n                    <p class="ballot-box--content-text">The concepts presented here are draft ideas, and may not show up in your account.</p>\n                </div>\n            </div>\n            <div class="ballot-box--button-container">\n                <a class="ballot-box--button-exit">Exit</a>\n                <div class="glossy-button-sm">\n                    <button class="submit-opt-in">Proceed</button>\n                </div>\n            </div>\n        </div>\n        \x3c!-- ----------------------- END: "Opt-in" view ----------------------- --\x3e\n\n\n        \x3c!-- ----------------------- START: "Vote" view ----------------------- --\x3e\n        <div id="ballot-vote" class="ballot-box--features">\n            <div class="ballot-box--feature-container">\n                <div class="ballot-box--feature option-1-container">\n                    <div class="more-details ballot-box--detail-area" data-option="1">\n                        <img class="ballot-box--feature-image" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push(""),b.push(optionOne.standardImgPath),b.push('">\n                        <img class="ballot-box--zoom-details" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/magnifyingGlass2x.png">\n                    </div>\n                    <div class="ballot-box--desc desc-1">'),b.push(optionOne.description),b.push('</div>\n                    <a class="ballot-box--vote-option" data-option="1" data-feature="'),
b.push(optionOne.name),b.push('">\n                        <div class="radio-button">\n                            <div class="radio-button--container">\n                                <input class="radio-button--radio-element ballot-box--radio-element ballot-radio radio-1" type="radio" id="radio1" name="ballotVote">\n                                <label class="radio-button--radio-element-label ballot-box--radio-element-label" for="radio1">\n                                    <span class="vote-select ballot-not-selected unselected-text-1">Vote</span>\n                                    <span class="vote-select ballot-selected selected-text-1">Vote Selected</span>\n                                </label>\n                            </div>\n                        </div>\n                    </a>\n                </div>\n                <div class="ballot-box--feature option-2-container">\n                    <div class="more-details ballot-box--detail-area" data-option="2">\n                        <img class="ballot-box--feature-image" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push(""),b.push(optionTwo.standardImgPath),b.push('">\n                        <img class="ballot-box--zoom-details" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/magnifyingGlass2x.png">\n                    </div>\n                    <div class="ballot-box--desc desc-2">'),b.push(optionTwo.description),b.push('</div>\n                    <a class="ballot-box--vote-option" data-option="2" data-feature="'),
b.push(optionTwo.name),b.push('">\n                        <div class="radio-button">\n                            <div class="radio-button--container">\n                                <input class="radio-button--radio-element ballot-box--radio-element ballot-radio radio-2" type="radio" id="radio2" name="ballotVote">\n                                <label class="radio-button--radio-element-label ballot-box--radio-element-label" for="radio2">\n                                    <span class="vote-select ballot-not-selected unselected-text-2">Vote</span>\n                                    <span class="vote-select ballot-selected selected-text-2">Vote Selected</span>\n                                </label>\n                            </div>\n                        </div>\n                    </a>\n                </div>\n                <div class="ballot-box--feature option-3-container">\n                    <div class="more-details ballot-box--detail-area" data-option="3">\n                        <img class="ballot-box--feature-image" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push(""),b.push(optionThree.standardImgPath),b.push('">\n                        <img class="ballot-box--zoom-details" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/magnifyingGlass2x.png">\n                    </div>\n                    <div class="ballot-box--desc desc-3">'),b.push(optionThree.description),b.push('</div>\n                    <a class="ballot-box--vote-option" data-option="3" data-feature="'),
b.push(optionThree.name),b.push('">\n                        <div class="radio-button">\n                            <div class="radio-button--container">\n                                <input class="radio-button--radio-element ballot-box--radio-element ballot-radio radio-3" type="radio" id="radio3" name="ballotVote">\n                                <label class="radio-button--radio-element-label ballot-box--radio-element-label" for="radio3">\n                                    <span class="vote-select ballot-not-selected unselected-text-3">Vote</span>\n                                    <span class="vote-select ballot-selected selected-text-3">Vote Selected</span>\n                                </label>\n                            </div>\n                        </div>\n                    </a>\n                </div>\n            </div>\n            <div class="ballot-box--button-container">\n                <a class="ballot-box--button-exit">Cancel</a>\n                <div class="glossy-button-sm">\n                    <button class="submit-feature-vote" disabled>Submit</button>\n                </div>\n            </div>\n        </div>\n        \x3c!-- ----------------------- END: "Vote" view ----------------------- --\x3e\n\n        \x3c!-- ----------------------- START: "Thank You" view ----------------------- --\x3e\n        <div id="ballot-thank-you" class="ballot-thank-you">\n            <img class="ballot-box--thank-you-beaker" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/ThankYouBeaker2x.png">\n            <p class="ballot-box--thank-you-text">Thank you</p>\n            <p class="ballot-box--thank-you-subtext">Your input is appreciated and will help us decide what to build next.</p>\n            <div class="ballot-box--button-container">\n                <div class="finish-button glossy-button-sm">\n                    <button class="ballot-box-finish">Finish</button>\n                </div>\n            </div>\n        </div>\n        \x3c!-- ------------------------ END: "Thank You" View -------------------- --\x3e\n\n\n        \x3c!-- --------------- START: "More Details" view -------------- --\x3e\n        <div id="ballot-more-details" class="ballot-more-details">\n            <div class="ballot-box--options-container option-1-container-details">\n                <div class="ballot-box--feature-detail">\n                    <img src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push(""),b.push(optionOne.expandedImgPath),b.push('">\n                </div>\n                <div class="ballot-box--description-list">\n                    <ul class="ballot-box--description-list-container">\n                        <li><p>'),b.push(optionOne.bulletOne),b.push("</p></li>\n                        <li><p>"),b.push(optionOne.bulletTwo),b.push("</p></li>\n                        <li><p>"),b.push(optionOne.bulletThree),
b.push('</p></li>\n                    </ul>\n                </div>\n            </div>\n            <div class="ballot-box--options-container option-2-container-details">\n                <div class="ballot-box--feature-detail">\n                    <img src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push(""),b.push(optionTwo.expandedImgPath),b.push('">\n                </div>\n                <div class="ballot-box--description-list">\n                    <ul class="ballot-box--description-list-container">\n                        <li><p>'),
b.push(optionTwo.bulletOne),b.push("</p></li>\n                        <li><p>"),b.push(optionTwo.bulletTwo),b.push("</p></li>\n                        <li><p>"),b.push(optionTwo.bulletThree),b.push('</p></li>\n                    </ul>\n                </div>\n            </div>\n            <div class="ballot-box--options-container option-3-container-details">\n                <div class="ballot-box--feature-detail">\n                    <img src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),
b.push(""),b.push(optionThree.expandedImgPath),b.push('">\n                </div>\n                <div class="ballot-box--description-list">\n                    <ul class="ballot-box--description-list-container">\n                        <li><p>'),b.push(optionThree.bulletOne),b.push("</p></li>\n                        <li><p>"),b.push(optionThree.bulletTwo),b.push("</p></li>\n                        <li><p>"),b.push(optionThree.bulletThree),b.push('</p></li>\n                    </ul>\n                </div>\n            </div>\n            <br>\n            <div class="ballot-box--button-container">\n                <div class="glossy-button-sm back-button-container">\n                    <button class="less-details-link">Go Back</button>\n                </div>\n            </div>\n        </div>\n        \x3c!-- ----------------------- END: "More Details" view ----------------------- --\x3e\n    </div>\n</div>\n');
return b.join("")}});
define("models/ballotbox-vote-model","jquery backbone underscore util/formats util/eventhub-backbone tasks/state-save-task".split(" "),function(a,b,g,c,e,d){var h={state:[]},f={path:"/user/oce/summary/ballotbox",version:"1.0",entry:[]};return b.Model.extend({initialize:function(a,b){a&&(f.version=a);b&&(f.path=b)},savedCustomerVote:function(a,b){if(!(void 0===a||void 0===b)){f.entry.push({key:""+b,value:""+a});h.state.push(f);var c=JSON.stringify(h);this.cleanRequestTempletes();(new d({context:this,
data:c,onPreExecute:function(){},onSuccess:function(a){console_log(a)},onError:function(a){console_log(a)},onComplete:function(){}})).run()}},cleanRequestTempletes:function(){h.state=[]}})});
define("views/ballot-box-view",["jquery","views/base-view","tpl!../templates/ballot-box-modal.html","components/modalpopup","models/ballotbox-vote-model"],function(a,b,g,c,e){var d,h,f,j=!1,k={optIn:"opt-in",vote:"vote",thankYou:"thank-you",details:"more-details"};return b.extend({events:{"click .base-popup--close-button":"close","click .ballot-box--button-exit":"close","click .ballot-box--vote-option":"setSelectedOption","click .submit-feature-vote":"processVote","click .more-details":"showMoreDetails",
"click .submit-opt-in":"optedIn","click .ballot-box-finish":"finish","click .less-details-link":"goBackToFeatures"},initialize:function(b){this.data=b||{};h=b.ballotStateAPIName;f=b.ballotQuestion;b=a(".js-ballot-box-container").empty();b.length||(b=a("<div>").addClass(".js-ballot-box-container").appendTo(document.body));this.$el=b;this.$el.html(g(this.data));this.popup=this.$(".ballot-box-modal");this.popup.ModalPopup();this.setViewstate(k.optIn)},open:function(){this.popup.ModalPopup("open")},close:function(){j&&
0<a(".ballot-box").length&&a(".ballot-box").remove();this.popup.ModalPopup("close")},setSelectedOption:function(b){this.clearSelectedVote();var c=a(b.currentTarget).data("option");d=a(b.currentTarget).data("feature");this.$(".unselected-text-"+c).hide();this.$(".selected-text-"+c).show();this.$(".radio-"+c).prop("checked",!0);this.$(".submit-feature-vote").prop("disabled",!1)},clearSelectedVote:function(){this.$(".ballot-selected").hide();this.$(".ballot-not-selected").show();this.$(".ballot-radio").prop("checked",
!1)},showMoreDetails:function(b){b=a(b.currentTarget).data("option");this.$(".ballot-box--options-container").hide();this.$(".option-"+b+"-container-details").show();b=this.$(".desc-"+b).html();this.$(".ballot-box--header-text").html(b);this.setViewstate(k.detail)},optedIn:function(){this.setViewstate(k.vote)},processVote:function(){d&&(new e).savedCustomerVote(d,h);this.setViewstate(k.thankYou)},goBackToFeatures:function(){this.setViewstate(k.vote);this.$(".ballot-box--button-exit").show()},setViewstate:function(a){a===
k.optIn?this.toggleViews(this.$("#ballot-opt-in")):a===k.vote?(this.toggleViews(this.$("#ballot-vote")),this.$(".ballot-box--header-text").html(f)):a===k.thankYou?(this.toggleViews(this.$("#ballot-thank-you")),this.$(".ballot-box--header").hide(),this.$(".top-rule").hide()):this.toggleViews(this.$("#ballot-more-details"))},toggleViews:function(a){this.$("#ballot-opt-in").hide();this.$("#ballot-vote").hide();this.$("#ballot-thank-you").hide();this.$("#ballot-more-details").hide();j=-1!=a.attr("id").indexOf("thank-you");
a.show()},finish:function(){0<a(".ballot-box").length&&a(".ballot-box").remove();this.popup.ModalPopup("close")}})});
define("tpl!templates/routing-number-modal.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container routing-number-modal" role="dialog">\n    <div class="base-popup--close-button routing-number--button-exit" tabindex="0" role="button" aria-label="Close Popup"></div>\n    <div class="base-popup--body routing-number-modal--body">\n        <div>\n            <h2 class="routing-number-modal--header">Routing Number</h2>\n        </div>\n\n       <div>For direct deposits and direct debits* for your <span class="routing-number-modal--acctName" data-pii="true"></span> account, please use:</div>\n       \n       <div class="routing-number-modal--content">\n            <div class="routing-number-modal__centered-item">\n                <label class="routing-number-modal--label">Fidelity routing number:</label>\n                <span class="routing-number-modal--value routing-number-modal--routingNum" data-pii="true">101205681</span>\n            </div>\n           <div class="routing-number-modal__centered-item">\n               <label class="routing-number-modal--label">Account number:</label>\n               <span class="routing-number-modal--value routing-number-modal--acctNum routing-number-modal--bold" data-pii="true"></span>\n           </div>\n       </div>\n\n        <div class="routing-number-modal--footer">\n            <div class="routing-number-modal--footer-item">For more information on how these numbers were generated, visit <a href="https://www.fidelity.com/cash-management/deposit-money/determine-routing-and-account-number" target="_blank">Determine Your Routing and Account Numbers</a></div>\n            <div class="routing-number-modal--footer-item">If you\'re moving money by bank wire, please visit <a href="https://www.fidelity.com/cash-management/bank-wires" target="_blank">Bank Wires</a></div>\n            <div class="routing-number-modal--footer-item">*529 college savings plans, workplace savings plans, Portfolio Advisory Services accounts, health savings accounts, and retirement accounts are ineligible for direct debit transactions.</div>\n        </div>\n\n    </div>\n</div>\n');return b.join("")}});
define("views/routing-number-view",["jquery","views/base-view","tpl!../templates/routing-number-modal.html","components/modalpopup"],function(a,b,g){return b.extend({events:{"click .base-popup--close-button":"close","click .routing-number--button-exit":"close"},initialize:function(){var b=a(".js-routing-number-container").empty();b.length||(b=a("<div>").addClass("js-routing-number-container").appendTo(document.body));this.$el=b;this.$el.html(g);this.popup=this.$(".routing-number-modal");this.popup.ModalPopup()},
open:function(){var b=a(".account-selector--target-tab").data("acct-number"),e=a(".account-selector--target-tab").data("regisition-code"),b=this.calculateAccountNumber(b,e);a(".routing-number-modal--acctNum").text(b);a(".routing-number-modal--acctName").text(a(".account-selector--target-tab").data("acct-name"));b=a(".routing-number-modal").outerHeight();b=0.5*a("body").outerHeight()-0.5*b;a(".base-popup.base-modal--container.routing-number-modal").css("top",b);this.popup.ModalPopup("open");a(".modal-popup--overlay").removeClass("modal-popup--overlay-visible")},
close:function(){a(".routing-number-modal--acctNum").text("");this.popup.ModalPopup("close")},validateRegCode:function(a){var b=[],b="HSA IRA IRRL ROTH RTH RTHM ADM BK BUS CH COMP CP EXEC FIDU I IC J JTIC JTIE JTWROS LLC PA PC PR PT SP TIC TIE TODE TODI TODJ TRUA TRUI TRUW UA UF UGMA UTMA".split(" ");return 0<=b.indexOf(a)?!0:!1},calculateAccountNumber:function(a,b){console.log("regTypeCode",b);this.validateRegCode(b)&&isNaN(a)&&"X"==a.substring(0,1)?a="399000005"+a.substring(1,a.length):this.validateRegCode(b)&&
isNaN(a)&&"Y"==a.substring(0,1)?a="399000006"+a.substring(1,a.length):this.validateRegCode(b)&&isNaN(a)&&"Z"==a.substring(0,1)?a="399000007"+a.substring(1,a.length):this.validateRegCode(b)&&!isNaN(a)&&(a="39900001"+a);return a}})});define("tasks/state-get-task",["tasks/base-task"],function(a){var b=encodeURIComponent("/state");return a.extend({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+b,contentType:"application/json",dataType:"json",type:"POST"})});
define("tpl!templates/plan-guide-phase2-score.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-medium planning-guidance-phase2-rpm-modal-container">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="planning-guidance-phase2-rpm-modal base-modal" role="dialog" aria-labelledby="planning-guidance-phase2-rpm-modal">\n\t\t<h3 class="textblock--h3-headline" tabindex="-1">About Your Fidelity Retirement Score</h3>\n\t\t<p>Your Fidelity Retirement Score represents the percentage of your average estimated retirement expenses your plan could cover, assuming an underperforming market. It\'s based on information you provided the last time you used a Fidelity planning tool, including the accounts and income sources you assigned to your retirement plan, your current or modeled savings rate, your current or modeled asset mix, your retirement time horizon, and your estimated taxes and expenses. <a href="javascript:void(0);" class="about-your-score-pdf-link">Retirement Analysis Methodology (PDF)</a></p>\n\t\t<p class="go-to-planning-guidance-center">You can update your score in the <a href="'),
b.push(envMap.IGE_LINK_URL),b.push('?route=IRE">Planning & Guidance Center.</a></p>\n\t\t<fieldset class="base-modal--actions">\n\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t<button type="button" role="button" class="action-button--secondary">Close</button>\n\t\t\t</p>\n\t\t</fieldset>\n\t</div>\n</div>\n');return b.join("")}});
(function(a,b){function g(a,b,c){this.init.call(this,a,b,c)}var c=a.arrayMin,e=a.arrayMax,d=a.each,h=a.extend,f=a.merge,j=a.map,k=a.pick,l=a.pInt,p=a.getOptions().plotOptions,m=a.seriesTypes,n=a.extendClass,r=a.splat,s=a.wrap,v=a.Axis,A=a.Tick,w=a.Point,z=a.Pointer,D=a.CenteredSeriesMixin,y=a.TrackerMixin,B=a.Series,I=Math,S=I.round,J=I.floor,O=I.max,V=a.Color,N=function(){};h(g.prototype,{init:function(a,b,c){var e=this,j=e.defaultOptions;e.chart=b;b.angular&&(j.background={});e.options=a=f(j,a);
(a=a.background)&&d([].concat(r(a)).reverse(),function(a){var b=a.backgroundColor;a=f(e.defaultBackgroundOptions,a);b&&(a.backgroundColor=b);a.color=a.backgroundColor;c.options.plotBands.unshift(a)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});
var P=v.prototype,A=A.prototype,U={getOffset:N,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:N,setCategories:N,setTitle:N},W={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},
maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(a){a=this.options=f(this.defaultOptions,this.defaultRadialOptions,a);a.plotBands||(a.plotBands=[])},getOffset:function(){P.getOffset.call(this);this.chart.axisOffset[this.side]=0;this.center=this.pane.center=D.getCenter.call(this.pane)},getLinePath:function(a,b){var c=this.center;b=k(b,
c[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+c[0],this.top+c[1],b,b,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){P.setAxisTranslation.call(this);this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&
1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){P.setAxisSize.call(this);this.isRadial&&(this.center=this.pane.center=a.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*k(this.sector,1)/2)},getPosition:function(a,b){return this.postTranslate(this.isCircular?this.translate(a):0,k(this.isCircular?b:this.translate(a),this.center[2]/2)-this.offset)},postTranslate:function(a,
b){var c=this.chart,d=this.center;a=this.startAngleRad+a;return{x:c.plotLeft+d[0]+Math.cos(a)*b,y:c.plotTop+d[1]+Math.sin(a)*b}},getPlotBandPath:function(a,b,c){var d=this.center,e=this.startAngleRad,f=d[2]/2,g=[k(c.outerRadius,"100%"),c.innerRadius,k(c.thickness,10)],h=/%$/,m,n=this.isCircular;"polygon"===this.options.gridLineInterpolation?d=this.getPlotLinePath(a).concat(this.getPlotLinePath(b,!0)):(n||(g[0]=this.translate(a),g[1]=this.translate(b)),g=j(g,function(a){h.test(a)&&(a=l(a,10)*f/100);
return a}),"circle"===c.shape||!n?(a=-Math.PI/2,b=1.5*Math.PI,m=!0):(a=e+this.translate(a),b=e+this.translate(b)),d=this.chart.renderer.symbols.arc(this.left+d[0],this.top+d[1],g[0],g[0],{start:a,end:b,innerR:k(g[1],g[0]-g[2]),open:m}));return d},getPlotLinePath:function(a,b){var c=this,e=c.center,f=c.chart,j=c.getPosition(a),g,h,k;c.isCircular?k=["M",e[0]+f.plotLeft,e[1]+f.plotTop,"L",j.x,j.y]:"circle"===c.options.gridLineInterpolation?(a=c.translate(a))&&(k=c.getLinePath(0,a)):(d(f.xAxis,function(a){a.pane===
c.pane&&(g=a)}),k=[],a=c.translate(a),e=g.tickPositions,g.autoConnect&&(e=e.concat([e[0]])),b&&(e=[].concat(e).reverse()),d(e,function(b,c){h=g.getPosition(b,a);k.push(c?"L":"M",h.x,h.y)}));return k},getTitlePosition:function(){var a=this.center,b=this.chart,c=this.options.title;return{x:b.plotLeft+a[0]+(c.x||0),y:b.plotTop+a[1]-{high:0.5,middle:0.25,low:0}[c.align]*a[2]+(c.y||0)}}};s(P,"init",function(a,c,d){var e,j=c.angular,l=c.polar,m=d.isX,n=j&&m,p,s;s=c.options;var q=d.pane||0;if(j){if(h(this,
n?U:W),p=!m)this.defaultRadialOptions=this.defaultRadialGaugeOptions}else l&&(h(this,W),this.defaultRadialOptions=(p=m)?this.defaultRadialXOptions:f(this.defaultYAxisOptions,this.defaultRadialYOptions));a.call(this,c,d);if(!n&&(j||l))if(a=this.options,c.panes||(c.panes=[]),this.pane=(e=c.panes[q]=c.panes[q]||new g(r(s.pane)[q],c,this),q=e),q=q.options,c.inverted=!1,s.chart.zoomType=null,this.startAngleRad=c=(q.startAngle-90)*Math.PI/180,this.endAngleRad=s=(k(q.endAngle,q.startAngle+360)-90)*Math.PI/
180,this.offset=a.offset||0,(this.isCircular=p)&&d.max===b&&s-c===2*Math.PI)this.autoConnect=!0});s(A,"getPosition",function(a,b,c,d,e){var f=this.axis;return f.getPosition?f.getPosition(c):a.call(this,b,c,d,e)});s(A,"getLabelPosition",function(a,b,c,d,e,f,j,g,h){var l=this.axis,m=f.y,n=f.align,p=180*((l.translate(this.pos)+l.startAngleRad+Math.PI/2)/Math.PI)%360;l.isRadial?(a=l.getPosition(this.pos,l.center[2]/2+k(f.distance,-25)),"auto"===f.rotation?d.attr({rotation:p}):null===m&&(m=l.chart.renderer.fontMetrics(d.styles.fontSize).b-
d.getBBox().height/2),null===n&&(n=l.isCircular?20<p&&160>p?"left":200<p&&340>p?"right":"center":"center",d.attr({align:n})),a.x+=f.x,a.y+=m):a=a.call(this,b,c,d,e,f,j,g,h);return a});s(A,"getMarkPath",function(a,b,c,d,e,f,j){var g=this.axis;g.isRadial?(a=g.getPosition(this.pos,g.center[2]/2+d),b=["M",b,c,"L",a.x,a.y]):b=a.call(this,b,c,d,e,f,j);return b});p.arearange=f(p.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},
trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}});m.arearange=n(m.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(a){return[a.low,a.high]},pointValKey:"low",getSegments:function(){var a=this;d(a.points,function(b){!a.options.connectNulls&&(null===b.low||null===b.high)?b.y=null:null===b.low&&null!==b.high&&(b.y=b.high)});B.prototype.getSegments.call(this)},translate:function(){var a=this.yAxis;m.area.prototype.translate.apply(this);
d(this.points,function(b){var c=b.low,d=b.high,e=b.plotY;null===d&&null===c?b.y=null:null===c?(b.plotLow=b.plotY=null,b.plotHigh=a.translate(d,0,1,0,1)):null===d?(b.plotLow=e,b.plotHigh=null):(b.plotLow=e,b.plotHigh=a.translate(d,0,1,0,1))})},getSegmentPath:function(a){var b,c=[],d=a.length,e=B.prototype.getSegmentPath,f,j;j=this.options;var g=j.step;for(b=HighchartsAdapter.grep(a,function(a){return null!==a.plotLow});d--;)f=a[d],null!==f.plotHigh&&c.push({plotX:f.plotX,plotY:f.plotHigh});a=e.call(this,
b);g&&(!0===g&&(g="left"),j.step={left:"right",center:"center",right:"left"}[g]);c=e.call(this,c);j.step=g;j=[].concat(a,c);c[0]="L";this.areaPath=this.areaPath.concat(a,c);return j},drawDataLabels:function(){var a=this.data,b=a.length,c,d=[],e=B.prototype,f=this.options.dataLabels,j=f.align,g,h=this.chart.inverted;if(f.enabled||this._hasPointLabels){for(c=b;c--;)(g=a[c],g.y=g.high,g._plotY=g.plotY,g.plotY=g.plotHigh,d[c]=g.dataLabel,g.dataLabel=g.dataLabelUpper,g.below=!1,h)?(j||(f.align="left"),
f.x=f.xHigh):f.y=f.yHigh;e.drawDataLabels&&e.drawDataLabels.apply(this,arguments);for(c=b;c--;)(g=a[c],g.dataLabelUpper=g.dataLabel,g.dataLabel=d[c],g.y=g.low,g.plotY=g._plotY,g.below=!0,h)?(j||(f.align="right"),f.x=f.xLow):f.y=f.yLow;e.drawDataLabels&&e.drawDataLabels.apply(this,arguments)}f.align=j},alignDataLabel:function(){m.column.prototype.alignDataLabel.apply(this,arguments)},getSymbol:N,drawPoints:N});p.areasplinerange=f(p.arearange);m.areasplinerange=n(m.arearange,{type:"areasplinerange",
getPointSpline:m.spline.prototype.getPointSpline});var ca=m.column.prototype;p.columnrange=f(p.column,p.arearange,{lineWidth:1,pointRange:null});m.columnrange=n(m.arearange,{type:"columnrange",translate:function(){var a=this,b=a.yAxis,c;ca.translate.apply(a);d(a.points,function(d){var e=d.shapeArgs,f=a.options.minPointLength,j;d.tooltipPos=null;d.plotHigh=c=b.translate(d.high,0,1,0,1);d.plotLow=d.plotY;j=c;d=d.plotY-c;d<f&&(f-=d,d+=f,j-=f/2);e.height=d;e.y=j})},trackerGroups:["group","dataLabelsGroup"],
drawGraph:N,pointAttrToOptions:ca.pointAttrToOptions,drawPoints:ca.drawPoints,drawTracker:ca.drawTracker,animate:ca.animate,getColumnMetrics:ca.getColumnMetrics});p.gauge=f(p.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});y={type:"gauge",pointClass:n(w,{setState:function(a){this.state=a}}),angular:!0,drawGraph:N,fixedBox:!0,forceDL:!0,
trackerGroups:["group","dataLabelsGroup"],translate:function(){var a=this.yAxis,b=this.options,c=a.center;this.generatePoints();d(this.points,function(d){var e=f(b.dial,d.dial),j=l(k(e.radius,80))*c[2]/200,g=l(k(e.baseLength,70))*j/100,h=l(k(e.rearLength,10))*j/100,m=e.baseWidth||3,n=e.topWidth||1,p=b.overshoot,r=a.startAngleRad+a.translate(d.y,null,null,null,!0);p&&"number"===typeof p?(p=p/180*Math.PI,r=Math.max(a.startAngleRad-p,Math.min(a.endAngleRad+p,r))):!1===b.wrap&&(r=Math.max(a.startAngleRad,
Math.min(a.endAngleRad,r)));r=180*r/Math.PI;d.shapeType="path";d.shapeArgs={d:e.path||["M",-h,-m/2,"L",g,-m/2,j,-n/2,j,n/2,g,m/2,-h,m/2,"z"],translateX:c[0],translateY:c[1],rotation:r};d.plotX=c[0];d.plotY=c[1]})},drawPoints:function(){var a=this,b=a.yAxis.center,c=a.pivot,e=a.options,j=e.pivot,g=a.chart.renderer;d(a.points,function(b){var c=b.graphic,d=b.shapeArgs,j=d.d,h=f(e.dial,b.dial);c?(c.animate(d),d.d=j):b.graphic=g[b.shapeType](d).attr({stroke:h.borderColor||"none","stroke-width":h.borderWidth||
0,fill:h.backgroundColor||"black",rotation:d.rotation}).add(a.group)});c?c.animate({translateX:b[0],translateY:b[1]}):a.pivot=g.circle(0,0,k(j.radius,5)).attr({"stroke-width":j.borderWidth||0,stroke:j.borderColor||"silver",fill:j.backgroundColor||"black"}).translate(b[0],b[1]).add(a.group)},animate:function(a){var b=this;a||(d(b.points,function(a){var c=a.graphic;c&&(c.attr({rotation:180*b.yAxis.startAngleRad/Math.PI}),c.animate({rotation:a.shapeArgs.rotation},b.options.animation))}),b.animate=null)},
render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup);B.prototype.render.call(this);this.group.clip(this.chart.clipRect)},setData:function(a,b){B.prototype.setData.call(this,a,!1);this.processData();this.generatePoints();k(b,!0)&&this.chart.redraw()},drawTracker:y&&y.drawTrackerPoint};m.gauge=n(m.line,y);p.boxplot=f(p.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,
tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2});m.boxplot=n(m.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(a){return[a.low,a.q1,a.median,a.q3,a.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},
drawDataLabels:N,translate:function(){var a=this.yAxis,b=this.pointArrayMap;m.column.prototype.translate.apply(this);d(this.points,function(c){d(b,function(b){null!==c[b]&&(c[b+"Plot"]=a.translate(c[b],0,1,0,1))})})},drawPoints:function(){var a=this,c=a.points,e=a.options,f=a.chart.renderer,j,g,h,l,m,n,p,r,s,v,z,w,A,y,D,V,B,N,P,I,R,O,U=!1!==a.doQuartiles,ca=parseInt(a.options.whiskerLength,10)/100;d(c,function(c){s=c.graphic;R=c.shapeArgs;z={};y={};V={};O=c.color||a.color;c.plotY!==b&&((j=c.pointAttr[c.selected?
"selected":""],B=R.width,N=J(R.x),P=N+B,I=S(B/2),g=J(U?c.q1Plot:c.lowPlot),h=J(U?c.q3Plot:c.lowPlot),l=J(c.highPlot),m=J(c.lowPlot),z.stroke=c.stemColor||e.stemColor||O,z["stroke-width"]=k(c.stemWidth,e.stemWidth,e.lineWidth),z.dashstyle=c.stemDashStyle||e.stemDashStyle,y.stroke=c.whiskerColor||e.whiskerColor||O,y["stroke-width"]=k(c.whiskerWidth,e.whiskerWidth,e.lineWidth),V.stroke=c.medianColor||e.medianColor||O,V["stroke-width"]=k(c.medianWidth,e.medianWidth,e.lineWidth),V["stroke-linecap"]="round",
p=z["stroke-width"]%2/2,r=N+I+p,v=["M",r,h,"L",r,l,"M",r,g,"L",r,m],U&&(p=j["stroke-width"]%2/2,r=J(r)+p,g=J(g)+p,h=J(h)+p,N+=p,P+=p,w=["M",N,h,"L",N,g,"L",P,g,"L",P,h,"L",N,h,"z"]),ca&&(p=y["stroke-width"]%2/2,l+=p,m+=p,A=["M",r-I*ca,l,"L",r+I*ca,l,"M",r-I*ca,m,"L",r+I*ca,m]),p=V["stroke-width"]%2/2,n=S(c.medianPlot)+p,D=["M",N,n,"L",P,n],s)?(c.stem.animate({d:v}),ca&&c.whiskers.animate({d:A}),U&&c.box.animate({d:w}),c.medianShape.animate({d:D})):(c.graphic=s=f.g().add(a.group),c.stem=f.path(v).attr(z).add(s),
ca&&(c.whiskers=f.path(A).attr(y).add(s)),U&&(c.box=f.path(w).attr(j).add(s)),c.medianShape=f.path(D).attr(V).add(s)))})}});p.errorbar=f(p.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null});m.errorbar=n(m.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(a){return[a.low,a.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:m.arearange?
m.arearange.prototype.drawDataLabels:N,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||m.column.prototype.getColumnMetrics.call(this)}});p.waterfall=f(p.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",states:{hover:{lineWidthPlus:0}}});m.waterfall=n(m.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["low","y"],pointValKey:"y",init:function(a,b){b.stacking=!0;m.column.prototype.init.call(this,a,b)},translate:function(){var a=
this.yAxis,b,c,d,e,f,j,g,h,k,l;b=this.options.threshold;m.column.prototype.translate.apply(this);h=k=b;d=this.points;c=0;for(b=d.length;c<b;c++)e=d[c],f=e.shapeArgs,j=this.getStack(c),l=j.points[this.index+","+c],isNaN(e.y)&&(e.y=this.yData[c]),g=O(h,h+e.y)+l[0],f.y=a.translate(g,0,1),e.isSum?(f.y=a.translate(l[1],0,1),f.height=a.translate(l[0],0,1)-f.y):e.isIntermediateSum?(f.y=a.translate(l[1],0,1),f.height=a.translate(k,0,1)-f.y,k=l[1]):h+=j.total,0>f.height&&(f.y+=f.height,f.height*=-1),e.plotY=
f.y=S(f.y)-this.borderWidth%2/2,f.height=O(S(f.height),0.001),e.yBottom=f.y+f.height,f=e.plotY+(e.negative?f.height:0),this.chart.inverted?e.tooltipPos[0]=a.len-f:e.tooltipPos[1]=f},processData:function(a){var b=this.yData,c=this.points,d,e=b.length,f,j,g,h,k,l;j=f=g=h=this.options.threshold||0;for(l=0;l<e;l++)k=b[l],d=c&&c[l]?c[l]:{},"sum"===k||d.isSum?b[l]=j:"intermediateSum"===k||d.isIntermediateSum?b[l]=f:(j+=k,f+=k),g=Math.min(j,g),h=Math.max(j,h);B.prototype.processData.call(this,a);this.dataMin=
g;this.dataMax=h},toYData:function(a){return a.isSum?0===a.x?null:"sum":a.isIntermediateSum?0===a.x?null:"intermediateSum":a.y},getAttribs:function(){m.column.prototype.getAttribs.apply(this,arguments);var b=this.options,c=b.states,e=b.upColor||this.color,b=a.Color(e).brighten(0.1).get(),j=f(this.pointAttr),g=this.upColorProp;j[""][g]=e;j.hover[g]=c.hover.upColor||b;j.select[g]=c.select.upColor||e;d(this.points,function(a){0<a.y&&!a.color&&(a.pointAttr=j,a.color=e)})},getGraphPath:function(){var a=
this.data,b=a.length,c=S(this.options.lineWidth+this.borderWidth)%2/2,d=[],e,f,j;for(j=1;j<b;j++)f=a[j].shapeArgs,e=a[j-1].shapeArgs,f=["M",e.x+e.width,e.y+c,"L",f.x,e.y+c],0>a[j-1].y&&(f[2]+=e.height,f[5]+=e.height),d=d.concat(f);return d},getExtremes:N,getStack:function(a){var b=this.yAxis.stacks,c=this.stackKey;this.processedYData[a]<this.options.threshold&&(c="-"+c);return b[c][a]},drawGraph:B.prototype.drawGraph});p.bubble=f(p.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,
style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0});y=n(w,{haloPath:function(){return w.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)}});m.bubble=n(m.scatter,{type:"bubble",pointClass:y,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group",
"dataLabelsGroup"],bubblePadding:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(a){var b=this.options.marker,c=k(b.fillOpacity,0.5);a=a||b.fillColor||this.color;1!==c&&(a=V(a).setOpacity(c).get("rgba"));return a},convertAttribs:function(){var a=B.prototype.convertAttribs.apply(this,arguments);a.fill=this.applyOpacity(a.fill);return a},getRadii:function(a,b,c,d){var e,f,j,g=this.zData,h=[],k="width"!==this.options.sizeBy;f=0;for(e=g.length;f<
e;f++)j=b-a,j=0<j?(g[f]-a)/(b-a):0.5,k&&0<=j&&(j=Math.sqrt(j)),h.push(I.ceil(c+j*(d-c))/2);this.radii=h},animate:function(a){var b=this.options.animation;a||(d(this.points,function(a){var c=a.graphic;a=a.shapeArgs;c&&a&&(c.attr("r",1),c.animate({r:a.r},b))}),this.animate=null)},translate:function(){var a,c=this.data,d,e,f=this.radii;m.scatter.prototype.translate.call(this);for(a=c.length;a--;)d=c[a],e=f?f[a]:0,d.negative=d.z<(this.options.zThreshold||0),e>=this.minPxSize/2?(d.shapeType="circle",d.shapeArgs=
{x:d.plotX,y:d.plotY,r:e},d.dlBox={x:d.plotX-e,y:d.plotY-e,width:2*e,height:2*e}):d.shapeArgs=d.plotY=d.dlBox=b},drawLegendSymbol:function(a,b){var c=l(a.itemStyle.fontSize)/2;b.legendSymbol=this.chart.renderer.circle(c,a.baseline-c,c).attr({zIndex:3}).add(b.legendGroup);b.legendSymbol.isMarker=!0},drawPoints:m.column.prototype.drawPoints,alignDataLabel:m.column.prototype.alignDataLabel});v.prototype.beforePadding=function(){var a=this,f=this.len,j=this.chart,g=0,h=f,m=this.isXAxis,n=m?"xData":"yData",
p=this.min,r={},s=I.min(j.plotWidth,j.plotHeight),q=Number.MAX_VALUE,v=-Number.MAX_VALUE,z=this.max-p,w=f/z,A=[];this.tickPositions&&(d(this.series,function(b){var f=b.options;if(b.bubblePadding&&(b.visible||!j.options.chart.ignoreHiddenSeries))if(a.allowZoomOutside=!0,A.push(b),m)d(["minSize","maxSize"],function(a){var b=f[a],c=/%$/.test(b),b=l(b);r[a]=c?s*b/100:b}),b.minPxSize=r.minSize,b=b.zData,b.length&&(q=k(f.zMin,I.min(q,I.max(c(b),!1===f.displayNegative?f.zThreshold:-Number.MAX_VALUE))),v=
k(f.zMax,I.max(v,e(b))))}),d(A,function(a){var b=a[n],c=b.length,d;m&&a.getRadii(q,v,r.minSize,r.maxSize);if(0<z)for(;c--;)"number"===typeof b[c]&&(d=a.radii[c],g=Math.min((b[c]-p)*w-d,g),h=Math.max((b[c]-p)*w+d,h))}),A.length&&0<z&&k(this.options.min,this.userMin)===b&&k(this.options.max,this.userMax)===b&&(h-=f,w*=(f+g-h)/f,this.min+=g/w,this.max+=h/w))};var n=function(a,b,c){a.call(this,b,c);this.chart.polar&&(this.closeSegment=function(a){var b=this.xAxis.center;a.push("L",b[0],b[1])},this.closedStacks=
!0)},p=function(a,b){var c=this.chart,d=this.options.animation,e=this.group,f=this.markerGroup,j=this.xAxis.center,g=c.plotLeft,h=c.plotTop;c.polar?c.renderer.isSVG&&(!0===d&&(d={}),b?(c={translateX:j[0]+g,translateY:j[1]+h,scaleX:0.001,scaleY:0.001},e.attr(c),f&&f.attr(c)):(c={translateX:g,translateY:h,scaleX:1,scaleY:1},e.animate(c,d),f&&f.animate(c,d),this.animate=null)):a.call(this,b)},R=B.prototype,z=z.prototype;R.toXY=function(a){var b,c=this.chart,d=a.plotX;b=a.plotY;a.rectPlotX=d;a.rectPlotY=
b;d=(180*(d/Math.PI)+this.xAxis.pane.options.startAngle)%360;0>d&&(d+=360);a.clientX=d;b=this.xAxis.postTranslate(a.plotX,this.yAxis.len-b);a.plotX=a.polarPlotX=b.x-c.plotLeft;a.plotY=a.polarPlotY=b.y-c.plotTop};R.orderTooltipPoints=function(a){if(this.chart.polar&&(a.sort(function(a,b){return a.clientX-b.clientX}),a[0]))a[0].wrappedClientX=a[0].clientX+360,a.push(a[0])};m.area&&s(m.area.prototype,"init",n);m.areaspline&&s(m.areaspline.prototype,"init",n);m.spline&&s(m.spline.prototype,"getPointSpline",
function(a,b,c,d){var e,f,j,g,h,k,l;this.chart.polar?(e=c.plotX,f=c.plotY,a=b[d-1],j=b[d+1],this.connectEnds&&(a||(a=b[b.length-2]),j||(j=b[1])),a&&j&&(g=a.plotX,h=a.plotY,b=j.plotX,k=j.plotY,g=(1.5*e+g)/2.5,h=(1.5*f+h)/2.5,j=(1.5*e+b)/2.5,l=(1.5*f+k)/2.5,b=Math.sqrt(Math.pow(g-e,2)+Math.pow(h-f,2)),k=Math.sqrt(Math.pow(j-e,2)+Math.pow(l-f,2)),g=Math.atan2(h-f,g-e),h=Math.atan2(l-f,j-e),l=Math.PI/2+(g+h)/2,Math.abs(g-l)>Math.PI/2&&(l-=Math.PI),g=e+Math.cos(l)*b,h=f+Math.sin(l)*b,j=e+Math.cos(Math.PI+
l)*k,l=f+Math.sin(Math.PI+l)*k,c.rightContX=j,c.rightContY=l),d?(c=["C",a.rightContX||a.plotX,a.rightContY||a.plotY,g||e,h||f,e,f],a.rightContX=a.rightContY=null):c=["M",e,f]):c=a.call(this,b,c,d);return c});s(R,"translate",function(a){a.call(this);if(this.chart.polar&&!this.preventPostTranslate){a=this.points;for(var b=a.length;b--;)this.toXY(a[b])}});s(R,"getSegmentPath",function(a,b){var c=this.points;this.chart.polar&&(!1!==this.options.connectEnds&&b[b.length-1]===c[c.length-1]&&null!==c[0].y)&&
(this.connectEnds=!0,b=[].concat(b,[c[0]]));return a.call(this,b)});s(R,"animate",p);s(R,"setTooltipPoints",function(a,b){this.chart.polar&&h(this.xAxis,{tooltipLen:360});return a.call(this,b)});m.column&&(n=m.column.prototype,s(n,"animate",p),s(n,"translate",function(a){var b=this.xAxis,c=this.yAxis.len,d=b.center,e=b.startAngleRad,f=this.chart.renderer,j,g;this.preventPostTranslate=!0;a.call(this);if(b.isRadial){b=this.points;for(g=b.length;g--;)j=b[g],a=j.barX+e,j.shapeType="path",j.shapeArgs=
{d:f.symbols.arc(d[0],d[1],c-j.plotY,null,{start:a,end:a+j.pointWidth,innerR:c-k(j.yBottom,c)})},this.toXY(j),j.tooltipPos=[j.plotX,j.plotY],j.ttBelow=j.plotY>d[1]}}),s(n,"alignDataLabel",function(a,b,c,d,e,f){this.chart.polar?(a=180*(b.rectPlotX/Math.PI),null===d.align&&(d.align=20<a&&160>a?"left":200<a&&340>a?"right":"center"),null===d.verticalAlign&&(d.verticalAlign=45>a||315<a?"bottom":135<a&&225>a?"top":"middle"),R.alignDataLabel.call(this,b,c,d,e,f)):a.call(this,b,c,d,e,f)}));s(z,"getIndex",
function(a,b){var c,d=this.chart,e;d.polar?(e=d.xAxis[0].center,c=b.chartX-e[0]-d.plotLeft,d=b.chartY-e[1]-d.plotTop,c=180-Math.round(180*(Math.atan2(c,d)/Math.PI))):c=a.call(this,b);return c});s(z,"getCoordinates",function(a,b){var c=this.chart,e={xAxis:[],yAxis:[]};c.polar?d(c.axes,function(a){var d=a.isXAxis,f=a.center,j=b.chartX-f[0]-c.plotLeft,f=b.chartY-f[1]-c.plotTop;e[d?"xAxis":"yAxis"].push({axis:a,value:a.translate(d?Math.PI-Math.atan2(j,f):Math.sqrt(Math.pow(j,2)+Math.pow(f,2)),!0)})}):
e=a.call(this,b);return e})})(Highcharts);define("highchartsMore",["highcharts"],function(a){return function(){return a.HighchartsMore}}(this));
define("views/card-planning-guidance-phase2",["jquery","views/base-view","components/modalpopup","tpl!../templates/plan-guide-phase2-score.html","highchartsMore"],function(a,b,g,c){function e(a){var b=a.width(),c=b;a.hasClass("scl-narrative-card--graph")||(c=b-16);return 263>c?263:400<c?400:c}function d(a){return 263<a.width()&&400>a.width()?[0,0,0,(a.width()-263)/2]:[0,0,0,0]}function h(){k&&(clearTimeout(p),p=setTimeout(function(){var b=k,c=a(b.options.viewObj),j=a(b.options.chartContainer);if(!(0===
j.length||0===c.length)){c=e(c);j.css("width",c);var g=298>j.width()?200:400>j.width()?180:145;b.setSize(c,g,!1);b.margin=d(j);b.options.legend.align=400>j.width()?"center":"right";b.options.legend.verticalAlign=400>j.width()?"bottom":"middle";b.options.legend.y=400>j.width()?0:-15;b.options.legend.layout=400>j.width()?"horizontal":"vertical";b.isDirtyBox=!0;b.isDirtyLegend=!0;b.redraw(!1)}a(k.options.viewObj).find(".js-about-your-score").on("click",function(){f()});p=null},200))}function f(){var b=
0<(a(window).height()-l.height())/2?(a(window).height()-l.height())/2+"px":"5%";l.css("position","fixed").css("top",b);l.ModalPopup("open");l.css("top",l.offset().top+"px").css("position","absolute")}function j(){l.ModalPopup("close")}var k,l,p;a(document).bind("CARD_LAYOUT_CHANGED",h);return b.extend({events:{},initialize:function(b){var g=this;this.isNarrativeCard=b.isNarrativeCard;b=g.$(".rpm-score--chart-container").data("rpm");if(""===b)this.showErrorMessage();else{l&&j();var k=a(".js-planning-guidance-phase2-popup-container").empty();
k.length||(k=a("<div>").addClass("js-planning-guidance-phase2-popup-container").appendTo(document.body));var p=c({});l=a(p);k.html(l);l.ModalPopup();k.find(".action-button--secondary").on("click",j);k.find(".about-your-score-pdf-link").on("click",function(){g.openPdfTab()});var v=g.$(".rpm-score--chart-container").data("rpm--as-of-date"),k=this.isNarrativeCard?g.$(".scl-narrative-card--graph"):g.$el,p=g.$(".rpm-score--chart-container"),A="#666666";65<b&&80>=b?A="#FFC000":80<b&&95>=b?A="#BAD22E":95<
b&&(A="#41831D");b={chart:{renderTo:p[0],type:"gauge",height:298>p.width()?200:400>p.width()?180:145,width:e(k),plotBorderWidth:0,spacing:[0,0,0,0],margin:d(p)},title:{text:null},exporting:{enabled:!1},credits:{enabled:!1},tooltip:{enabled:!1},pane:[{startAngle:-90,endAngle:90,background:null,center:[125,115],size:230}],yAxis:[{min:0,max:150,minorTickPosition:"outside",minorTickLength:0,lineWidth:0,tickLength:0,tickPosition:"outside",labels:{enabled:!1},plotLines:[{color:"white",width:1,value:0,zIndex:3,
label:{text:0,align:"left",x:-10,y:0,style:{color:"#666666",fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif"}}},{color:"white",width:3,value:65,zIndex:3},{color:"white",width:3,value:80,zIndex:3},{color:"white",width:3,value:95,zIndex:3},{color:"white",width:1,value:150,zIndex:3,label:{text:150,align:"left",x:117,y:0,style:{color:"#666666",fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif"}}}],plotBands:[{id:"poorBand",from:0,to:65,thickness:60,color:"#F4453C"},{from:65,to:80,thickness:60,
color:"#FFC000"},{from:80,to:95,thickness:60,color:"#BAD22E"},{from:95,to:150,thickness:60,color:"#41831D"}],pane:0}],plotOptions:{gauge:{animation:!1,dataLabels:{color:A,align:"center",formatter:function(){var a=Math.round(this.y);151<=Math.round(this.y)&&(a="150+");return'<span class="dataLabel-rpm-score"><p>'+a+'</p><p class="rpm-score-description"><a href="javascript:void(0);" class="js-about-your-score">About your score</a></p><p class="rpm-score-as-of-date">AS OF '+v+"</p></span>"},borderWidth:0,
style:{textShadow:!1},y:58,zIndex:4,x:0,useHTML:!0},dial:{backgroundColor:"white",borderColor:"white",borderWidth:0,baseWidth:40,topWidth:1,baseLength:"0%",rearLength:"0%"},pivot:{radius:0}}},legend:{padding:0,borderWidth:0,align:400>p.width()?"center":"right",verticalAlign:400>p.width()?"bottom":"middle",floating:!0,y:400>p.width()?0:-15,itemDistance:8,itemMarginBottom:10,itemMarginTop:2,symbolWidth:12,layout:400>p.width()?"horizontal":"vertical",itemStyle:{color:"#000000",fontWeight:"bold",fontSize:"12px",
fontFamily:"Helvetica, Arial, sans-serif"}},series:[{data:[b],overshoot:-8},{showInLegend:!0,name:"On Target",events:{legendItemClick:function(){return!1}},marker:{symbol:"square",radius:6},color:"#41831D"},{showInLegend:!0,name:"Good",marker:{symbol:"square",radius:6},events:{legendItemClick:function(){return!1}},color:"#BAD22E"},{showInLegend:!0,name:"Fair",marker:{symbol:"square",radius:6},events:{legendItemClick:function(){return!1}},color:"#FFC000"},{showInLegend:!0,name:"Needs Attention",marker:{symbol:"square",
radius:6},events:{legendItemClick:function(){return!1}},color:"#F4453C"}]};b.viewObj=k;b.chartContainer=p;this.drawChart(b);this.$(".js-about-your-score").on("click",function(){f()});if(this.isNarrativeCard)a(window).on("resize.summaryCards",h)}},showErrorMessage:function(){this.isNarrativeCard?this.$el.find(".narrative-summary-card-container").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">Retirement Score <sup>&raquo;&raquo;</sup></div><div class="narrative-summary-card--analysis_content clear-margin">We\'re sorry, there was a temporary system error. Please try again later.</div></div>'):
(this.$el.parent().parent().find(".fid-card--title").html("Retirement Score <sup>&raquo;&raquo;</sup></div>"),this.$el.empty().html('<div class="fid-card--inset planning-guidance-phase2-error-message">We\'re sorry, there was a temporary system error. Please try again later.</div>'))},render:function(){return this},openPdfTab:function(){window.open(envMap.CORPORATEHOST_URL_VALUE+"/bin-public/060_Guidance_Pages/documents/IRE_METHODOLOGY.pdf").focus()},drawChart:function(a){k=new Highcharts.Chart(a)}})});
define("tpl!templates/beta-unblocker-modal.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large beta-unblocker-modal beta-unblocker-modal--infoBanner" role="dialog" aria-label="Info banner">\n    \x3c!-- Hidden for redundancy --\x3e\n    <div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n    <h2 class="base-popup--header"><span>You\'re enabling a feature that\'s still a progress</span></h2>\n\n    <div class="base-popup--body">\n\t\t<p>We\'re giving you the option to use our latest features because we want to know what you think. Keep in mind that this is still being developed, it may occasionally contain an error, and we\'ll be changing things on a regular basis. If that sounds good to you, hit that button below.</p>\n\t\t<br/>\n\t\t<p>By selecting Agree &amp; Continue below, you indicate that you have read and understood the <a class="legal-content-link" href="javascript:popWinCustom(\''),
b.push(envMap.CORPORATEHOST_URL_VALUE),b.push('/terms-of-use\',532,560);">Terms of Use</a></p>\n\n\t\t<div class="button-component--group">\n\t\t\t<a href="javascript:void(0)" class="beta-unblocker-modal--no-thanks">No Thanks</a>\n\t\t\t<button class="button-component button--primary beta-unblocker-modal--continue-button">\n\t\t\t\tAgree &amp; Continue\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n');return b.join("")}});
define("views/beta-unblocker-popup-view",["jquery","views/base-view","tpl!../templates/beta-unblocker-modal.html","components/modalpopup"],function(a,b,g){return b.extend({events:{"click .beta-unblocker-modal--no-thanks":"handleNoThanksLink","click .beta-unblocker-modal--continue-button":"agreeContinueModal"},initialize:function(a){this.data=a.data||{}},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){var a=this;a.$el.html(g(a.data));a.popup=a.$(".beta-unblocker-modal--infoBanner");
var b=a.popup,d=function(){a.adjustModalHeight()},h;window.addEventListener("resize",function(){var a=this,b=arguments;clearTimeout(h);h=setTimeout(function(){h=null;d.apply(a,b)},250)});b.ModalPopup()},adjustModalHeight:function(){var b=this.popup,e=b.outerHeight(!0),d=a(window).height();b.toggleClass("is-out-of-viewport",e>d)},handleNoThanksLink:function(a){a.preventDefault();this.close()},agreeContinueModal:function(){this.data.context.invokeStateForBetaUnblockers({state:[{path:"/user/oce/summary/betaUnblockerFeature",
version:"1.0",entry:[{key:this.data.betaUnblockerFeatureId+"_optin",value:"true"}]}]});this.close()},open:function(){this.popup.ModalPopup("open")},close:function(){this.popup.ModalPopup("close")}})});
define("views/dc-loan-card-view",["jquery","views/base-view","models/account-context-model"],function(a,b,g){return b.extend({events:{},initialize:function(){var b=g.get("selectedAccounts").accounts[0];if(b){var e=this.$el.data("navigation-key"),d=(b=e&&b.getLink(e))&&b.linkUrl;this.$el.find("a").each(function(b,c){var e=a(c);if(-1!==(e.attr("href")||"").indexOf("~(LOAN_URL)~"))d?e.attr("href",d):e.hide()});this.$el.data("loan-delinquent")?a(".dc-loan--alert-element").show():a(".dc-loan--alert-element").hide()}},
render:function(){return this}})});define("views/dc-contribution-card-view",["jquery","views/base-view","models/account-context-model"],function(a,b,g){return b.extend({events:{},initialize:function(){var b=g.get("selectedAccounts").accounts[0];if(b){var e=this.$el.data("navigation-key"),d=(b=e&&b.getLink(e))&&b.linkUrl;this.$el.find("a").each(function(b,c){var e=a(c);if(-1!==(e.attr("href")||"").indexOf("~(CONTRIBUTION_URL)~"))d?e.attr("href",d):e.hide()})}},render:function(){return this}})});
define("views/port-sum-cards-layout",["jquery","lib/masonry-layout-shipit"],function(a){var b=a.fn.shipit.LayoutItem,g=[];return window.PortSumCards={resetLoadingCards:function(){g=[]},hideCardAndStartLoading:function(b){b=a(b)[0];this.showLoadingCardBar();this.hideCard(b,!0);g.push(b)},completeCardLoading:function(b,e){var d=a(b)[0];e&&this.showCard(d);d=g.indexOf(d);-1!==d&&g.splice(d,1);0===g.length&&this.hideLoadingCardBar()},hideCard:function(b,e){var d=this.getInstance(),g=a(b);g.hide();g.data({layoutHidden:!0,
excludInHiddenList:!!e});d&&(d.layout(),a(document).trigger("CARD_LAYOUT_CHANGED"))},removeCard:function(b){var e=this.getInstance();b=a(b);var d=b.data("layout-item"),d=e.layoutItems.indexOf(d);-1!=d&&e.layoutItems.splice(d,1);b.remove();e.recalculateLockedCards();a(".account-content").addClass("card-layout--transition");e.layout();b.trigger("cardChanged");setTimeout(function(){a(".account-content").removeClass("card-layout--transition")},200);a(document).trigger("CARD_LAYOUT_CHANGED");return d},
showCard:function(c,e){var d=this.getInstance(),g=a(c);g.css({display:"block",position:"absolute"}).data({layoutHidden:!1,excludInHiddenList:!1});var f=g.data("layout-item");f||(f=new b(g),g.data("layout-item",f));"undefined"===typeof e&&(e=a(c).parents().children().get().indexOf(a(c)[0]),-1===e&&(e=0));-1===d.layoutItems.indexOf(f)&&d.layoutItems.splice(e||0,0,f);d.recalculateLockedCards();a(".account-content").addClass("card-layout--transition");setTimeout(function(){d.layout();g.trigger("cardChanged");
setTimeout(function(){a(".account-content").removeClass("card-layout--transition");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},200);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")},10)},getInstance:function(){return a(".account-content").data("shipit-instance")},showLoadingCardBar:function(){a(".card-layout--content").addClass("loading")},hideLoadingCardBar:function(){a(".card-layout--content").removeClass("loading")}}});
define("views/wi-messaging-card-view",["jquery","views/base-view","views/port-sum-cards-layout"],function(a,b,g){return b.extend({defaults:{appPath:envMap.DIGITAL_APP_URL+"wi-messaging"},initialize:function(){var b=this,e={};g.hideCardAndStartLoading(b.$el);a(".js-account[data-dc-plan-id]").each(function(){var b=a(this),c=b.data("dc-plan-id"),f=b.data("dc-enrollable-acct"),b=b.data("dc-acct-type-name");e[c]={isEnrollmentEligible:f,planTypeName:b}});this.$el.attr("data-plan-list",JSON.stringify(e));
this.$el.find(".syn-description").css("display","none");this.options=_.extend({},this.defaults,this.options);a.ajax({type:"GET",url:this.options.appPath+"/",xhrFields:{withCredentials:!0}}).done(function(a){b.$el.append(a)}).fail(function(){g.completeCardLoading(b.$el,!1)})},render:function(){return this}})});
define("views/card-performance-tlh-view",["jquery","underscore","views/base-view"],function(a,b,g){return g.extend({events:{"click #more-information-1":"showOrHiddeYTDPopUp","click #more-information-2":"showOrHiddePrevPopUp","click #tooltip-container--tax-loss-1 .tooltip-container--tax-loss--close":"showOrHiddeYTDPopUp","click #tooltip-container--tax-loss-2 .tooltip-container--tax-loss--close":"showOrHiddePrevPopUp"},destroy:function(){this.tooltip=null;this.$el.empty();this.undelegateEvents()},initialize:function(){var c=
this.$(".syn-tax-loss--group--currency").eq(0).text().trim();a.isNumeric(c)&&(c=parseFloat(c),this.$(".syn-tax-loss--group--currency").eq(0).prop("Counter",0).animate({Counter:c,number:c},{duration:1800,opacity:1,easing:"swing",step:function(b){a(this).text("$"+b.toFixed(0).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}}),this.$(".syn-tax-loss--group--currency").eq(0).wrap('<div class="animationStyles"></div>'),this.$(".syn-tax-loss--group--currency").eq(0).css("font-size","100%"),this.$(".syn-tax-loss--group--currency").eq(0).css("height",
"40px"),this.$(".animationStyles").css("font-size","28px"),this.$(".animationStyles").css("opacity","0"),this.$(".animationStyles").animate({opacity:1,fontSize:"33px"},1800));c=this.$(".syn-tax-loss--group--currency").eq(1).text().trim();a.isNumeric(c)&&(c=parseFloat(c),this.$(".syn-tax-loss--group--currency").eq(1).text("$"+c.toFixed(0).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")));c=a("#SyndicatedCard").attr("data-cardStatus");"0"==c?this.$(".syn-tax-loss--data-container").show():"1"==
c?this.$(".syn-tax-loss--featured-section").hide():(this.$(".syn-tax-loss--data-container").hide(),this.$(".syn-tax-loss--no-data").show());a(".syn-tax-loss--group--header").first().after(a("#tooltip-container--tax-loss-1"));a(".syn-tax-loss--group--header").last().after(a("#tooltip-container--tax-loss-2"));b.bindAll(this,"_onClickOutsideTooltip")},render:function(){return this},_onClickOutsideTooltip:function(b){b=b.target;b===this.$("#tooltip-container--tax-loss-1")[0]||0<a(this.$("#tooltip-container--tax-loss-1")[0]).has(b).length||
b===this.$("#tooltip-container--tax-loss-2")[0]||0<a(this.$("#tooltip-container--tax-loss-2")[0]).has(b).length||(this.$("#tooltip-container--tax-loss-1").hide(),this.$("#tooltip-container--tax-loss-2").hide(),a(document).off("touchstart click",this._onClickOutsideTooltip))},showOrHiddeYTDPopUp:function(b){var e=a("#more-information-1").position().left,d=a("#more-information-2").position().left;53>e?(a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").hide(),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").hide(),
a("#tooltip-container--tax-loss-1").css("left",0),a("#tooltip-container--tax-loss-2").css("left",0)):(a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").css("left",e-20),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").css("left",d-20),a("#tooltip-container--tax-loss-1").css("margin-top",12),a("#tooltip-container--tax-loss-2").css("margin-top",10),a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").show(),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").show());
"block"==this.$("#tooltip-container--tax-loss-1").css("display")?this.$("#tooltip-container--tax-loss-1").hide():(this.$("#tooltip-container--tax-loss-2").hide(),this.$("#tooltip-container--tax-loss-1").show());a(document).on("touchstart click",this._onClickOutsideTooltip);b.stopPropagation()},showOrHiddePrevPopUp:function(b){var e=a("#more-information-1").position().left,d=a("#more-information-2").position().left;53>e?(a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").hide(),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").hide(),
a("#tooltip-container--tax-loss-1").css("left",0),a("#tooltip-container--tax-loss-2").css("left",0)):(a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").css("left",e-20),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").css("left",d-20),a("#tooltip-container--tax-loss-1").css("margin-top",12),a("#tooltip-container--tax-loss-2").css("margin-top",10),a("#tooltip-container--tax-loss-1").find(".tooltip-pointer").show(),a("#tooltip-container--tax-loss-2").find(".tooltip-pointer").show());
"block"==this.$("#tooltip-container--tax-loss-2").css("display")?this.$("#tooltip-container--tax-loss-2").hide():(this.$("#tooltip-container--tax-loss-1").hide(),this.$("#tooltip-container--tax-loss-2").show());a(document).on("touchstart click",this._onClickOutsideTooltip);b.stopPropagation()}})});
define("tpl!templates/ma-risk-popup.html",function(){return function(a){var b=[];with(a)b.push('<div id="ma-risk_popup_container" class="trigger-popup base-popup base-modal--container base-modal--container-medium">\n\t<header style="margin-top: 1rem;">\n\t\t<div class="ma-risk_popup-header"><h2 class="ma-risk_popup-title">How we measure volatility</h2></div>\n\t\t<div class="ma-risk_popup-close base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t</header>\n\t<div class="ma-risk_popup_content">\n\t    In measuring volatility, we look at cumulative monthly returns over the time period. Greatest % Decrease is calculated as the largest decline in cumulative returns during the time period shown, from a high point to a subsequent low point. Similarly, Greatest % Increase is calculated as the largest increase in cumulative returns during the time period shown, from a low point to a subsequent high point.\n\t</div>\n\t<div class="modal-volatility-image"></div>\n\t<div class="ma-risk_popup-circle"></div>\n\t<p class="ma-risk_popup_content-p1" style="margin-top: 1rem;">Hypothetical Portfolio</p>\n\t<p class="ma-risk_popup_content-p2">* This is for illustrative purposes only and is used as a representation of your strategy. It does not represent your actual investments.</p>\n\t<p class="ma-risk_popup_content-p2">It is important to note that percentage changes are not necessarily equal to changes in dollar value.</p>\n</div>');return b.join("")}});
define("views/card-performance-risk-view",["jquery","underscore","views/base-view","tpl!templates/ma-risk-popup.html"],function(a,b,g,c){return g.extend({events:{"click #ma-risk_popup":"showPopUp"},destroy:function(){this.tooltip=null;this.$el.empty();this.undelegateEvents()},initialize:function(){},render:function(){return this},showPopUp:function(){0<a("#ma-risk_popup_container").length&&a("#ma-risk_popup_container").remove();var b=a(c({})),d=b.ModalPopup();a("body").append(b);d.ModalPopup("open")}})});
define("views/dc-personal-rate-of-return-ngapp-view",["jquery","backbone","views/base-view","util/progressbar","models/account-context-model"],function(a,b,g,c,e){return g.extend({defaults:{appName:"ap117871DcPrrCard",basePath:envMap.DIGITAL_URL+"dcpror/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(b){this.options=b||{};this.options=_.extend({},this.defaults,this.options);b=e.get("selectedAccounts");null!=b.accounts&&(1===b.accounts.length&&5==b.accounts[0].oltxType)&&
(b=b.accounts[0],this.$el.attr({clientid:b.clientId,planid:b.planId,nburl:envMap.NBRETAIL_URL_VALUE}),b=(b=e.get("dcNavigationInfo"))&&b.get()||[],this.$el.data("navigationInfo",b));this.$el.find(".syn-description").hide();this.$el.data("cardEventHandler",function(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")})},destroy:function(){this.undelegateEvents()},insertMarkup:function(a,b,c,e){this.$el.parent().append('<link href="'+e+'" rel="stylesheet">')},bootstrap:function(b,c,e){require([b],
function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[e])})},renderMicroApp:function(){var a=this.options.basePath,b=this.options.pathToBundles,c=this.options.appName,e=a+b+this.options.jsBundle,g="#"+c;this.insertMarkup(c,g,a,a+b+this.options.cssBundle);this.bootstrap(e,g,c)},refresh:function(){var b=this;toggleMap.DCPRORCrosFeature?a.ajax({url:envMap.DIGITAL_APP_URL+"dcpror/home",type:"GET",xhrFields:{withCredentials:!0},success:function(a){b.$el.parent().append(a)}}):this.renderMicroApp();
c.hideLoading()}})});define("tasks/retirement-income-phase-two-task",["tasks/base-task","models/account-context-model"],function(a){return a.extend({url:envMap.DIGITAL_URL+"retirementincome/snippet",type:"POST",dataType:"html",buildParams:function(a){return{accts:a.accts,filterInput:a.filterInput,IRA_GW_ToggleEnable:toggleMap&&toggleMap.retirementIncomeAPIGateServiceToggle?!0:!1}}})});
define("views/card-retirement-income-phase-two-view",["jquery","views/base-view","tasks/retirement-income-phase-two-task","models/account-context-model","util/constants"],function(a,b,g,c,e){var d;return b.extend({events:{"click .riv-card__info-icon":"showInformation","click .riv-card-filter-option":"getRivData"},initialize:function(b){var c=this;this.moveItEnabled=b.moveItEnabled;this.isRivHidden=b.isRivHidden;a(document).bind(e.EVENTS.DOCUMENT_ON_CLICK,function(a){c.hideInformantion(a)})},showInformation:function(b){b.preventDefault();
b.stopPropagation();var c=a(b.currentTarget);this._adjustIconPosition(c);c.hasClass("riv-card--help-active")?this.hideInformantion(b):(this.$(".riv-card__info-icon").removeClass("riv-card--help-active"),c.addClass("riv-card--help-active"))},_adjustIconPosition:function(a){var b=a.position(),c=a.find(".riv-card--tooltip-bubble"),d=c.width()-16,d=b.left-5>d?d:b.left-5,b=b.top+25;a.find(".riv-card--pointer-up").css("left",0<d?d:0);a.find(".riv-card--tooltip-bubble").css("top",b);20<a.parent().height()?
c.addClass("extra-height"):c.removeClass("extra-height")},hideInformantion:function(b){b=a(b.target);!b.closest(".riv-card--tooltip-bubble").length&&!b.hasClass(".riv-card--tooltip-bubble")&&a(".riv-card__info-icon").removeClass("riv-card--help-active")},getRivData:function(a){var b=this;d&&d.stop();var e=c.get("selectedAccounts"),e=b.getFilteredAccounts(e.accounts),k=b.$el.find("input[name=filter]:checked").val()||"month";d=new g({data:{accts:e,filterInput:k},onSuccess:function(c){b._renderRIVcontent(c,
a)},onError:function(){b._removeRIVCard()}});d.run()},_renderRIVcontent:function(b,c){var d=this;if(b&&b.length){var e=a("<div/>").html(b);if(0<e.find(".riv-card__total").length&&-1!=e.find(".riv-card__total").html().indexOf("$0.00"))d._removeRIVCard();else{var g=e.find(".riv-css-link");g.on("load",function(){if(0<e.find(".js-riv-header").length){var b=d.$(".riv-phase2-legacy-content").closest(".card-layout--card-content").find(".fid-card--header").find(".fid-card--title");b.addClass("riv-card__title");
b.html(e.find(".js-riv-header .js-riv-card--title").html());c||b.after(e.find(".js-riv-header-feedback"))}c?d.$(".riv-card-transaction-view").html(e.find(".riv-card-transaction-view")):d.$(".riv-phase2-legacy-content").html(e.find(".fid-card"));"undefined"!==typeof window.FidMsmt&&"function"==typeof window.FidMsmt.rePopQualtrics&&window.FidMsmt.rePopQualtrics();a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});g.on("error",function(){d._removeRIVCard()});0===a("head").find(".riv-css-link").length?
a("head").append(g):g.trigger("load");window.MutationObserver&&(this.moveItEnabled&&this.isRivHidden)&&d.checkDomIsPopulatedFromDPCS()}}else d._removeRIVCard()},_removeRIVCard:function(){this.$(".riv-phase2-legacy-content").closest(".card-layout--card-content").remove();this.moveItEnabled?a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT"):a(document).trigger("set_handler_for_lagacy_layout","lagacy")},checkDomIsPopulatedFromDPCS:function(){var b=this.$el.find(".riv-phase2-legacy-content")[0];
b&&(new MutationObserver(function(b){b.forEach(function(){a(document).trigger("add_riv_card_title")})})).observe(b,{childList:!0})},getFilteredAccounts:function(a){for(var b=[],c=0;c<a.length;c++)-1!==retirementRegCodes.indexOf(a[c].registrationCode)&&b.push({acctNum:a[c].acctNum,acctType:"BROKERAGE"});return b}})});var retirementRegCodes="I COMP TIC TIE J IRRL IRA IRGP ROTH ESP BVOL BEE BER BORP TODI TODJ IRAB RTHB KPSB KMPB KPS KMP KPV KMV UF IS SMPL".split(" ");
define("views/fic-card-view",["jquery","views/base-view"],function(a,b){return b.extend({initialize:function(){this.$el.find("a.list-card--headline.eii-card--headline").each(function(b,c){var e=a(c);e.attr("href",envMap.INVESTOR_COMMUNITY_URL+"?ficURL="+encodeURIComponent(e.attr("href")))})},render:function(){return this}})});
define("views/card-ppa-goals-view",["jquery","views/base-view"],function(a,b){return b.extend({initialize:function(){a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"ppa-goals-card/snippet",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#ppa-goals-summary-card").html(b)})}})});
define("views/card-ira-contributions",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"iraContributionsCard",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},postRender:function(){var a=
"#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){bootstrappedElement="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"ira-contributions/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a(bootstrappedElement).html(b);c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/card-social-security-reminder",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"socialSecurityReminderCard",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},
postRender:function(){var a="#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){var b="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"social-security-card/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(d){a(b).html(d);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/card-report-center",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"reportCardContainer",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},postRender:function(){var a=
"#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){var b="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"report-card/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(d){a(b).html(d);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/card-medicare-reminder",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"MedicareReminderCard",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},postRender:function(){var a=
"#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){var b="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"medicare-card/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(d){a(b).html(d);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/card-solver",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"SolverCard",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},postRender:function(){var a=
"#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){var b="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"solver-card/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(d){a(b).html(d);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/card-monthly-income",["jquery","backbone","views/base-view","util/progressbar"],function(a,b,g,c){return g.extend({bootstrapContainer:"MonthlyIncomeCard",initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.$wrapperClass.empty()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},insertMarkup:function(){this.$wrapperClass.append('<div id="'+this.bootstrapContainer+'"></div>')},postRender:function(){var a=
"#"+this.bootstrapContainer;this.$wrapperClass.removeClass().children().not(a).remove()},renderMicroApp:function(){var b="#"+this.bootstrapContainer;this.insertMarkup();a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"monthly-income-card/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(d){a(b).html(d);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");c.hideLoading()})},refresh:function(){this.renderMicroApp();c.hideLoading()}})});
define("views/pane-summary-view","jquery underscore views/composite-view models/account-context-model util/eventhub-backbone util/progressbar util/global-deferred views/card-welcome-view views/card-ira-contributions-view views/card-mrd-distributions-view views/card-ledger-view views/card-ledger-ngapp-view views/card-asset-allocation-view views/card-asset-allocation-ngapp-view views/card-recent-activity-ngapp-view views/card-ira-contributions-ytd-view views/card-positions-news-view views/card-performance-view views/card-performance-two-view views/card-performance-ngapp-view views/card-top-movers-view views/card-market-movers-view views/card-oppfinder-main-view views/card-ma-gics-sector-view views/card-market-index-view tasks/summary-cards-task views/masonry-layout-view views/card-active-trader-pro-view views/balance-over-time-ngapp-view tasks/activity-card-task util/progressbar-tabs models/ajax-object-model text!../templates/ma-introtour.html tasks/ma-tour-preference-task IntroTour ngtimer components/card-collapser tasks/pending-transfer-card-task tasks/recent-transactions-card-task models/state-model views/ma-introtour-view models/introtour-queue-model views/fv-gtm-introtour-view views/va-lazyload-view views/dc-i-want-to-card-view models/stacked-summary-state-model views/card-market-index-view views/card-dc-ledger-view views/card-dc-balances-view components/progresschart tpl!../templates/moveit-more-cards.html views/card-goal-summary-view views/moveit-intro-tour-view views/timeline-intro-tour-view views/explore2card-view views/card-market-index-view-new views/card-retirement-income-view views/card-memory-wall-view views/ballot-box-view views/routing-number-view tasks/state-get-task tasks/state-save-task views/card-planning-guidance-phase2 views/beta-unblocker-popup-view views/dc-loan-card-view views/dc-contribution-card-view views/wi-messaging-card-view views/card-performance-tlh-view views/card-performance-risk-view views/dc-personal-rate-of-return-ngapp-view views/card-retirement-income-phase-two-view views/fic-card-view views/card-ppa-goals-view views/card-ira-contributions views/card-social-security-reminder views/card-report-center views/card-medicare-reminder views/card-solver views/card-monthly-income components/moretab views/moretab-content-adapter views/port-sum-cards-layout".split(" "),
function(a,b,g,c,e,d,h,f,j,k,l,p,m,n,r,s,v,A,w,z,D,y,B,I,S,J,O,V,N,P,U,W,ca,R,Z,ea,la,va,H,M,F,Ba,X,ta,q,Y,sa,Ca,Aa,Va,za,cb,Na,tb,db,Sa,Ha,ka,na,oa,T,ia,qa,ja,Ka,ra,Fa,ma,aa,L,wa,E,Ea,Ma,ya,pa,Q,Db,ha,kb,qb){var G=!0;if(a(".js-find-routing-number"))a(".js-find-routing-number").on("click",function(a){a.preventDefault();(new oa).open()});return g.extend({events:{"click .fid-card-controls--collapse-expand":"handleCardCollapse","click .fid-card-controls--collapse-expand--narrative":"handleNarrativeCardCollapse",
"click .activity-new-card-tooltip-anchor":"togglePiceImprovementTooltip","click .activity-new-card-close-tooltip-popup":"closePiceImprovementTooltip","click .card-layout--edit-card-switch":"cardEditSwitch","click .card-layout--edit-card-save":"saveCardEdit","click .card-layout--edit-card-cancel":"cancelCardEdit","click .lock-card-div":"toggleLockCard","click .fid-card-controls--remove-card":"hideCard","click .card-layout--hidden-card-dropdown-list-item":"restoreCard","click .js-card-filling-cabinet-btn":"showFillingCabinet",
"click .cardl-layout--filling-cabinet-close":"closeVault","click .js-voteFeatures-opt-in":"showBallotBoxPopup","click .beta-unblocker--container-withboarder .js-beta-unblockers-feature-opt-in":"onefeatureInBetaUnblockersOptIn","click .js-beta-unblockers-feature-opt-out":"onefeatureInBetaUnblockersOptOut","click .beta-unblocker--container-withboarder .feature-icon--plus-minus":"collapsedExpandedBetaUnblockers","click .js-beta-unblockers-feature-close":"closeOnefeatureInBetaUnblockers","click .js-beta-unblockers-infobanner-close":"closeAllfeatureInBetaUnblockers",
"click .invitation--accept":"acceptCustomizeInvitation","click .invitation--reject":"rejectCustomizeInvitation","click .card-checkbox-div":"onCheckCard","cardChanged .card-layout--card-content":"refreshHiddenCardsCobinet","click .js-timeline-link":"timelineIntroTour","click .cta_make_contribution":"updateIRAContribState","click .cta_update_plan":"updateIRAContribState"},closeVault:function(b){a(b.currentTarget).closest(".card-layout--filling-cabinet-popup").hide()},toggleLockCard:function(b){b=a(b.currentTarget).closest(".card-layout--card-content");
if(b.data("locked"))b.removeClass("locked").data({locked:!1,"lock-position":-1});else{var c=a(".account-content").shipit("layoutIndex",b[0]);b.addClass("locked").data({locked:!0,"lock-position":c})}a(".account-content").shipit("updateDragging")},restoreCard:function(b){var c=a(b.currentTarget);this.$(".card-layout--card-content").filter(function(b,d){return a(d).data("tcmid")===c.data("tcmid")}).css({display:"block",position:"absolute"}).removeData("layoutHidden");a(".account-content").shipit("createLayoutItems");
a(".account-content").shipit("recalculateLockedCards");a(".account-content").shipit("layout");setTimeout(function(){a(document).trigger("CARD_LAYOUT_CHANGED")});c.remove();this.$(".moveit-more-cards--popup").BasePopup();this.$(".moveit-more-cards--popup").BasePopup("close");this.refreshHiddenCardsCobinet()},refreshHiddenCardsCobinet:function(){var b=this.getHiddenCards(),c=a(za({cards:b}));this.$(".moveit-more-cards--popup").length?this.$(".card-layout--hidden-cards-dropdown").find(".base-popup--content").empty().append(c.find(".base-popup--content").children()):
this.$(".card-layout--hidden-cards-dropdown").append(c);b.length?this.$(".card-layout--hidden-cards-dropdown-cabinet").removeClass("button--disabled").show().find(".moveit-hidden-card--count").html(" ("+b.length+")"):this.$(".card-layout--hidden-cards-dropdown-cabinet").addClass("button--disabled").hide().find(".moveit-hidden-card--count").html("")},showFillingCabinet:function(){this.$(".moveit-more-cards--popup").BasePopup();this.$(".moveit-more-cards--popup").BasePopup("open")},hideCard:function(b){b=
a(b.currentTarget).closest(".card-layout--card-content");b.removeClass("locked").data({locked:!1,"lock-position":-1});b.hide().data("layoutHidden",!0);a(".account-content").shipit("createLayoutItems");a(".account-content").shipit("layout");a(".account-content").shipit("updateDragging");a(document).trigger("CARD_LAYOUT_CHANGED");this.refreshHiddenCardsCobinet()},onCheckCard:function(b){a(b.currentTarget).closest(".card-layout--card-content").data("oncheck",b.target.checked)},sallyCardsProcess:function(){a(".card-layout--editable .sally-card-layout--editing").find(".new-customize").length||
a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content").append('<div class="new-customize"><label class="card-checkbox-label">Add</label><input type="checkbox" class="card-checkbox-div"/></div>');var b=a(".account-content").shipit("items"),c=this.cardsCheckedList();c.length&&a.each(b,function(b,d){var e=a(d),f=e.data("tcmid");a.each(c,function(a,b){b==f&&e.find(".card-checkbox-div").prop("checked",!0)})})},cardsCheckedList:function(){var b=a("#card-layout--cards").data("card-order")||
"-",c=b.split("-")[0].split(","),d=a(".js-centerWellCard-card-layout").data("customize-saved"),e=this.getEmoneyID();d||(c=[""],-1<b.indexOf(e)&&(c=[e]));return c},cardsUncheckedList:function(){return(a("#card-layout--cards").data("card-order")||"-").split("-")[1].split(",")},hideUncheckedCardsForSally:function(b){a.each(b,function(b,c){a(c).hide()})},showAllCardsForSally:function(){var b=a(".card-layout--card-content");b.css({display:"block",position:"absolute"}).removeData("oncheck");b.each(function(b,
c){a(c).appendTo(self.$("#card-layout--cards"))});a(".account-content").shipit("createLayoutItems");a(".account-content").shipit("layout");setTimeout(function(){a(document).trigger("CARD_LAYOUT_CHANGED")})},switchAlertWelcomeSectionForSally:function(b){b=!0===b?"block":"none";a(".js-dc-deminimis-alerts-info-banner-layout").css("display",b);a(".js-welcome-card-layout").css("display",b)},getCustomizedChangedCardsForSally:function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=0;e<b.length;e++){var f=
!1;if(a[d]==b[e]){f=!0;break}}f||c.push(a[d])}return c},getCustomizedUnchangedCardsForSally:function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=0;e<b.length;e++){var f=!1;if(a[d]==b[e]){f=!0;break}}f&&c.push(a[d])}return c},showStateOfCardsForSally:function(a,b){for(var c="",d=0;d<a.length;d++)c=c+a[d]+":"+b+"|";return c},cardEditSwitch:function(){var b=this;a(".account-content").shipit("startDragging");if(toggleMap.portSumSallyExperienceFeature&&b.isSallyCustomer()){if(b.saveCollapsedCards=
[],a(".card-layout--card-content.collapsed").each(function(c,d){b.saveCollapsedCards.push(a(d).data("tcmid"))}),this.stopSaveEventCollapseExpand=!0,b.$el.addClass("sally-card-layout--editing"),b.switchAlertWelcomeSectionForSally(!1),a(".more-tab--tab-container .card-layout--hidden-cards-container .card-layout--hidden-cards-dropdown-cabinet").hide(),b.showAllCardsForSally(),b.sallyCardsProcess(),"</div>",a(".card-layout--editable .sally-card-layout--editing").find(".customize-welcome").length||(a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options").after('<div class="customize-welcome"><p class="customize-welcome--title">Here\'s how to customize your experience</p><div class="customize-welcome--box"><div class="customize-welcome--left"><p class="customize-welcome--context">Now you can decide what you see when you log on to your Portfolio Summary page. Just choose from the various types of information below by clicking the appropriate "Add" box.</p><p class="customize-welcome--context">When you\'re done, select "Save."</p><p class="customize-welcome--context customize-welcome--footnote">Note that some information below must remain part of your summary. When you return, you\'ll see that information listed.</p></div><div class="customize-welcome--right"><div class="customize-welcome--img"></div></div></div>'),
a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options .customize-welcome .customize-welcome--content").addClass("customize-welcome--img")),Modernizr.touch&&(a(".card-layout--editable .sally-card-layout--editing #card-layout--cards").addClass("touch--cards"),a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .icon--plus-minus").addClass("touch--cards"),a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .fid-card-controls--remove-card").addClass("touch--cards")),
toggleMap.hideMinimizeIconFeature&&(a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .lock-card-div").addClass("hideMinimizeIcon"),a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .icon--plus-minus").hide()),a(".icon--plus-minus.fid-card-controls--collapse-expand.collapsed").click(),a(".sally-card-layout--editing").length)try{Bootstrapper._trackAnalytics({pt:"ss",action:"pageview",channel:"Fid.com web",pname:"Customize Cards",sec:"portfolio",
sec1:"Sally Experiment"})}catch(c){}}else b.$el.addClass("card-layout--editing"),Modernizr.touch&&(a(".card-layout--editable .card-layout--editing #card-layout--cards").addClass("touch--cards"),a(".card-layout--editable .card-layout--editing .card-layout--card-content .icon--plus-minus").addClass("touch--cards"),a(".card-layout--editable .card-layout--editing .card-layout--card-content .fid-card-controls--remove-card").addClass("touch--cards")),toggleMap.hideMinimizeIconFeature&&(a(".card-layout--editable .card-layout--editing .card-layout--card-content .lock-card-div").addClass("hideMinimizeIcon"),
a(".card-layout--editable .card-layout--editing .card-layout--card-content .icon--plus-minus").hide())},saveCardEdit:function(){var b=this,d=a(".account-content").shipit("items");if(toggleMap.portSumSallyExperienceFeature&&b.isSallyCustomer()){if(a(".error-message-no-cards-sally").length||a(".error-message-box-sally").length)a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options").removeClass("error-message-no-cards-sally"),a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options .error-message-no-cards-sally").remove(),
a(".port-content").removeClass("error-message-box-sally"),a(".port-content .error-message-box-sally").remove();var e=b.getEmoneyID(),f=d.filter(function(b,c){var d=a(c);return("undefined"!==typeof d.data("oncheck")&&!d.data("oncheck")||"undefined"===typeof d.data("oncheck")&&!a(c).find(".card-checkbox-div").is(":checked"))&&d.data("tcmid")!=e}),d=d.filter(function(b,c){var d=a(c);return d.data("oncheck")||a(c).find(".card-checkbox-div").is(":checked")||d.data("tcmid")==e}),j=f.map(function(b,c){return a(c).data("tcmid")}).get().join(","),
g=f.map(function(b,c){return a(c).find("[data-tmsid]").data("tmsid")}).get().join(",");if(!b.isAnyCardChecked()){!a(".error-message-no-cards-sally").length&&!a(".error-message-box-sally").length&&(a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options .card-layout--edit-control").append('<div class="error-message-no-cards-sally"><div class="error-message-text">Please select at least one card before proceeding.</div></div>'),a(".port-content .page-content-title").before('<div class="error-message-box-sally">Please select at least one card before proceeding.</div>'));
return}b.hideUncheckedCardsForSally(f);d.each(function(c,d){a(d).appendTo(b.$("#card-layout--cards"))});var f=c.get("selectedAccounts"),f=f.portfolio?"all-accounts":f.groupId?f.groupId:f.accounts[0].acctNum,h=d.map(function(b,c){return a(c).data("tcmid")}).get().join(","),d=d.map(function(b,c){return a(c).find("[data-tmsid]").data("tmsid")}).get().join(","),j=h+"-"+j,g=d+"|"+g;b.layoutCards(j);a(".account-content").shipit("createLayoutItems");a(".account-content").shipit("layout");a(".account-content").shipit("stopDragging");
setTimeout(function(){a(document).trigger("CARD_LAYOUT_CHANGED")});a.ajax({type:"GET",dataType:"json",url:"/ftgw/fbc/ofoltxsvc/saveCardOrderState?inputKey="+f+"&inputValue="+j+"&tmsidData="+g});a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize .card-checkbox-label").removeClass(".card-checkbox-label");a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize .card-checkbox-div").removeClass(".card-checkbox-div");a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content").removeClass(".customize-welcome");
a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .customize-welcome").remove();a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize").remove();a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .icon--plus-minus").show();a(".card-layout--editable .sally-card-layout--editing .icon--plus-minus").show();b.$el.removeClass("sally-card-layout--editing");this.updateSallyState({stateName:"customize_save_state",
stateVal:"customize"});a(".js-centerWellCard-card-layout").data("customize-saved","true");this.updateSallyState({stateName:"show_survey",stateVal:"true"});a(".card-layout").find(".banner-toggle-sally-feedback").hide();f=a(".page-content-title").siblings(".banner-toggle-sally-feedback");f.data("sally-survey-show-flag",!0);f.show();b.switchAlertWelcomeSectionForSally(!0);f=b.saveCollapsedCards;for(g=0;g<f.length;g++)a("[data-tcmid='"+f[g]+"']").find(".fid-card-controls--collapse-expand").click();b.stopSaveEventCollapseExpand=
!1;var d=j.split("-")[0].split(","),f=j.split("-")[1].split(","),h=this.cardsCheckedList(),g=this.cardsUncheckedList(),k=this.getCustomizedChangedCardsForSally(d,h),l=this.getCustomizedChangedCardsForSally(h,d),d=this.getCustomizedUnchangedCardsForSally(d,h),f=this.getCustomizedUnchangedCardsForSally(f,g),f=this.showStateOfCardsForSally(k,"added")+this.showStateOfCardsForSally(l,"removed")+this.showStateOfCardsForSally(d,"selected")+this.showStateOfCardsForSally(f,"unselected"),m=f.substring(0,f.length-
1);setTimeout(function(){try{Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Save",sec1:"Sally Experiment"});for(var a=0;a<k.length;a++)Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Added "+k[a],sec1:"Sally Experiment"});for(a=0;a<l.length;a++)Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Removed "+l[a],sec1:"Sally Experiment"});trackAnalyticsEvent({app:"sally_experiment",event:"Card Customization",context:m})}catch(b){}},0)}else j=d.map(function(b,
c){var d=a(c).data("tcmid"),e=a(c).data("locked")?"L":"";return d+e}).get().join(","),g=d.map(function(b,c){return a(c).find("[data-tmsid]").data("tmsid")}).get().join(","),d.each(function(c,d){a(d).appendTo(b.$("#card-layout--cards"))}),a(".account-content").shipit("createLayoutItems"),a(".account-content").shipit("layout"),a(".account-content").shipit("stopDragging"),f=c.get("selectedAccounts"),f=f.portfolio?"all-accounts":f.groupId?f.groupId:f.accounts[0].acctNum,h=this.getHiddenCards().map(function(b,
c){return a(c).data("tcmid")}).get().join(","),d=this.getHiddenCards().map(function(b,c){return a(c).find("[data-tmsid]").data("tmsid")}).get().join(","),j=j+"-"+h,a.ajax({type:"GET",dataType:"json",url:"/ftgw/fbc/ofoltxsvc/saveCardOrderState?inputKey="+f+"&inputValue="+j+"&tmsidData="+(g+"|"+d)}),toggleMap.hideMinimizeIconFeature&&a(".card-layout--editable .card-layout--editing .lock-card-div").removeClass("hideMinimizeIcon"),a(".card-layout--editable .card-layout--editing .icon--plus-minus").show(),
b.$el.removeClass("card-layout--editing");b.$("#card-layout--cards").data("card-order",j)},getHiddenCards:function(){return this.$(".card-layout--card-content").filter(function(b,c){var d=a(c);return d.data("layoutHidden")&&!d.data("excludInHiddenList")})},cancelCardEdit:function(){if(toggleMap.portSumSallyExperienceFeature&&this.isSallyCustomer()){a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize .card-checkbox-label").removeClass(".card-checkbox-label");
a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize .card-checkbox-div").removeClass(".card-checkbox-div");a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .new-customize").remove();a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content").removeClass(".customize-welcome");a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .customize-welcome").remove();
a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options").removeClass("error-message-no-cards-sally");a(".card-layout--editable .sally-card-layout--editing .card-layout .card-layout--content .card-layout--layout-options .error-message-no-cards-sally").remove();a(".port-content").removeClass("error-message-box-sally");a(".port-content .error-message-box-sally").remove();this.$(".card-layout--card-content").show().removeData("oncheck");toggleMap.hideMinimizeIconFeature&&
a(".card-layout--editable .card-layout--editing .card-layout--card-content .lock-card-div").removeClass("hideMinimizeIcon");Modernizr.touch&&(a(".card-layout--editable .card-layout--editing #card-layout--cards").removeClass("touch--cards"),a(".card-layout--editable .card-layout--editing .card-layout--card-content .icon--plus-minus").removeClass("touch--cards"),a(".card-layout--editable .card-layout--editing .card-layout--card-content .fid-card-controls--remove-card").removeClass("touch--cards"));
a(".card-layout--editable .sally-card-layout--editing .card-layout--card-content .icon--plus-minus").show();this.$el.removeClass("sally-card-layout--editing");this.updateSallyState({stateName:"customize_cancel_state",stateVal:"cancel"});this.switchAlertWelcomeSectionForSally(!0);for(var b=this.saveCollapsedCards,c=0;c<b.length;c++)a("[data-tcmid='"+b[c]+"']").find(".fid-card-controls--collapse-expand").click();this.stopSaveEventCollapseExpand=!1;try{Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",
intname:"Cancel",sec1:"Sally Experiment"})}catch(d){}}else this.$(".card-layout--card-content").show().removeData("layoutHidden"),this.$(".card-layout--card-content").removeClass("locked"),this.$(".card-layout--card-content").removeData("locked"),this.$(".card-layout--card-content").removeData("lock-position"),toggleMap.hideMinimizeIconFeature&&a(".card-layout--editable .card-layout--editing .card-layout--card-content .lock-card-div").removeClass("hideMinimizeIcon"),Modernizr.touch&&(a(".card-layout--editable .card-layout--editing #card-layout--cards").removeClass("touch--cards"),
a(".card-layout--editable .card-layout--editing .card-layout--card-content .icon--plus-minus").removeClass("touch--cards"),a(".card-layout--editable .card-layout--editing .card-layout--card-content .fid-card-controls--remove-card").removeClass("touch--cards")),a(".card-layout--editable .card-layout--editing .card-layout--card-content .icon--plus-minus").show(),this.$el.removeClass("card-layout--editing");this.layoutCards();a(".account-content").shipit("createLayoutItems");a(".account-content").shipit("layout");
a(".account-content").shipit("stopDragging");setTimeout(function(){a(document).trigger("CARD_LAYOUT_CHANGED")})},isNarrativeCard:function(){var b=a(".js-footer-entitlement-info").data("is-ceentitlement");return c.get("selectedAccounts").portfolio&&b&&"simplified"==this.$(".card-layout-toggle--selected").data("card-toggle-value")},isEii:function(){return a(".js-centerWellCard-card-layout").data("is-eii")},isCdEntitlement:function(){return a(".js-centerWellCard-card-layout").data("is-cd-entitlement")},
isSallyCustomer:function(){return a(".js-centerWellCard-card-layout").data("is-sally-customer-flag")},isShowCustomize:function(){return a(".js-centerWellCard-card-layout").data("show-customize")},isAnyCardChecked:function(){return a(".card-checkbox-div:checkbox:checked").length},showNewIRAContributionsCard:function(){return a(".js-centerWellCard-card-layout").data("show-new-ira-contribution-card")},_getCurrentTabName:function(){return"Feature"===a(".more-tab--tab.tabs--selected").data("tab-name")?
"Summary":a(".more-tab--tab.tabs--selected").data("tab-name")},initialize:function(){e.unsubscribeEvent({subject:"LEDGER_CARD_REFRESH"});e.subscribeEvent("LEDGER_CARD_REFRESH",b.bind(this.refreshLedgerCard,this));e.unsubscribeEvent({subject:"STACKEDCARDS_STATE_UPDATE"});e.subscribeEvent("STACKEDCARDS_STATE_UPDATE",b.bind(this.handleStackedSummaryState,this));this.stateModel=new M;this.fvFinsihRefreshedHandler();this.vaLazyLoadView=new ta;!this.masonryLayoutView&&!this.isNarrativeCard()&&(this.masonryLayoutView=
new O({el:this.$(".card-layout"),view:"moveit"}));this.isNarrativeCard()&&(this.stackedSummaryStateModel=new Y)},handleTooltipPopup:function(){var b=this.$(".base-popup.mrd-distributions-card--tooltip-new").BasePopup(),c=a(".js-fid-card--mrd-distributions-new"),d=a(".mrd-distributions-card--question-icon-new");d.on(FID.DynamicTooltip.event.anchorClicked,function(a){console.log(a)});this.tooltip=new FID.DynamicTooltip(c,d,b)},render:function(){return this},refreshLedgerCard:function(){if("Summary"==
this._getCurrentTabName()){var b=c.get("selectedAccounts");if(null!=b.accounts&&1===b.accounts.length&&5==b.accounts[0].oltxType){b=b=void 0;if(!this.isEii()){var b=a(".js-dc-ledger-card"),d=b.data("dc-ledger-card-instance");d||(d=(new Ca({el:b,isEii:this.isEii()})).render(),b.data("dc-ledger-card-instance",d));d.refreshLedgerCard()}c.isPerformanceHidden()?this.$(".card-layout .js-dc-balances-card").closest(".card-layout--card-content").remove():0<this.$(".card-layout .js-dc-balances-card").length&&
(b=this.$(".card-layout .js-dc-balances-card").closest(".card-layout--card-content"),d=b.data("dc-balances-card-instance"),d||(d=(new Aa({el:b,isEii:this.isEii()})).render(),b.data("dc-balances-card-instance",d)),d.refreshBalancesCard())}else{var e=c.get("selectedAccounts"),f,j,g,h,k,m,n,r,s,q=!1;if(this.isEii()||this.isCdEntitlement()||!e.portfolio&&!e.groupId&&window.toggleMap&&window.toggleMap.MAAccruedInterestForAllToggle||!e.portfolio&&!e.groupId&&e.accounts[0].pasProductName.match(/^(TASMA|SMAFIM|IBSMA)$/)&&
window.toggleMap&&window.toggleMap.MAAccruedInterestToggleForCommonDe)q=!0;e.portfolio?(b="all-accounts",k=e.portfolio.formattedBalance,m=e.portfolio.fidelityBalance,n=e.portfolio.totalAcctValChg,r=e.portfolio.totalTodayChangePercent):e.groupId?(b="group",j=e.groupId,h=e.groupTotal):(b="single-account",f=e.accounts[0].acctNum,g=e.accounts[0].oltxType,s=e.accounts[0].formattedBalance,n=e.accounts[0].totalAcctValChg,r=e.accounts[0].accountTodayChangePercent);if(0===g||6===g)d="Brokerage";else if(14===
g||-1===g||13===g)d="External";if(toggleMap.dpcsBalanceCardFeatureToggle&&!0===q&&void 0!==d&&("Brokerage"===d||"External"===d)){g=void 0;if(this.isEii()||this.isCdEntitlement()||window.toggleMap&&window.toggleMap.MAAccruedInterestForAllToggle||e.accounts[0].pasProductName.match(/^(TASMA|SMAFIM|IBSMA)$/)&&window.toggleMap&&window.toggleMap.MAAccruedInterestToggleForCommonDe)g=this.$(".card-layout .eii-ledger-card-container");e=g?g.data("ledger-card-instance"):null;e||(e=new p({el:g}),g.data("ledger-card-instance",
e));e.setAccounts(f);e.setAcctType(d);e.setSelectionType(b);e.setIndividualBalance(s);e.setPortfolioTotalGainLoss(n);e.setPortfolioTotalChangeAmt(r);e.refresh()}else if(toggleMap.dpcsMultiAcctBalanceCardFeatureToggle&&!0===q&&("group"===b||"all-accounts"===b)){g=void 0;if(this.isEii()||this.isCdEntitlement())g=this.$(".card-layout .eii-ledger-card-container");e=g?g.data("ledger-card-instance"):null;e||(e=new p({el:g}),g.data("ledger-card-instance",e));e.setAccounts(f);e.setAcctType(d);e.setGroupId(j);
e.setSelectionType(b);e.setGroupTotalAcctVal(h);e.setPortfolioTotalAcctVal(k);e.setFidelityAcctVal(m);e.setPortfolioTotalGainLoss(n);e.setPortfolioTotalChangeAmt(r);e.refresh()}else g=this.isEii()||this.isCdEntitlement()?this.$(".card-layout .js-eii-ledger-card").closest(".card-layout--card-content"):a(".js-ledger-card"),d=g.data("ledger-card-instance"),d||(d=(new l({el:g,isEii:this.isEii()||this.isCdEntitlement(),selection:b})).render(),g.data("ledger-card-instance",d)),d.refreshLedgerCard()}}},
refresh:function(){if(this.accountsInfo)if(this.modifyMATourPreference(),this.domLoaded){var b=!1;a(".positions-mini-context").val()&&"undefined"!=a(".positions-mini-context").val()&&(b=!0);this.renderSnippet(b)}else{if(G||0==this.$(".card-layout--card-content").length&&0==this.$(".card-wrapper").length)0<this.$(".card-layout").find(".card-layout--content").length&&this.$(".card-layout").find(".card-layout--content").remove(),this.$(".card-layout").append('<div class="card-layout--content js-centerWellCard-card-layout" role="main"><div id="card-layout--cards"><div class="card-layout--card-content card-layout--card-content-empty card-layout--card-content-empty1"></div><div class="card-layout--card-content card-layout--card-content-empty card-layout--card-content-empty2"></div><div class="card-layout--card-content card-layout--card-content-empty card-layout--card-content-empty3"></div><div class="card-layout--card-content card-layout--card-content-empty card-layout--card-content-empty4"></div></div></div>'),
0<this.$(".narrative-summary-layout").find(".card-wrapper").length&&this.$(".narrative-summary-layout").find(".card-wrapper").remove(),this.$(".narrative-card--layout").append('<div class="narrative-summary-layout js-narrative-summary-layout clearfix"><div class="card-wrapper"><div class="narrative-summary-card"></div></div><div class="card-wrapper"><div class="narrative-summary-card"></div></div><div class="card-wrapper"><div class="narrative-summary-card"></div></div><div class="card-wrapper"><div class="narrative-summary-card"></div></div><div class="card-wrapper"><div class="narrative-summary-card"></div></div></div>'),
G=!1,this.isNarrativeCard()?(this.$(".card-layout").addClass("display-none"),this.$(".narrative-card--layout").removeClass("display-none")):(this.$(".card-layout").removeClass("display-none"),this.$(".narrative-card--layout").addClass("display-none"));this.masonryLayoutView&&(this.masonryLayoutView.setHandler(this.$(".card-layout--card-content")),this.masonryLayoutView.refresh());var d=this;W.abortPendingAjaxObj();b=!1;a(".positions-mini-context").val()&&"undefined"!=a(".positions-mini-context").val()&&
(b=!0);var e=new J({stackedCards:d.$(".card-layout-toggle--selected").data("card-toggle-value"),data:this.accountsInfo,onPreExecute:function(){U.showLoading("Loading...",!0,500)},onError:function(a){var b=!1;0===a.status&&"abort"===a.statusText&&(b=!0);!0!==b&&(d.$(".summary-cards-error-message").removeClass("display-none"),d.$(".card-layout").addClass("display-none"),d.$(".narrative-card--layout").addClass("display-none"))},onSuccess:function(c){console_log(c);F7.EventBus.trigger("allCards:destroy");
var e=a("<div>"+c+"</div>");c=e.filter("script");var f=e.find(".js-style-region");0<f.length&&(0<a(".js-pzn-style").length&&a(".js-pzn-style").remove(),f=f.find("style").addClass("js-pzn-style"),a("head").append(f));d.$el.find(".js-dc-deminimis-alerts-info-banner-layout").remove();f=e.find(".js-dc-deminimis-alerts-info-banner-layout");d.$el.find(".narrative-card--layout").before(f);d.$el.find(".js-welcome-card-layout").remove();f=e.find(".js-welcome-card-layout");d.$el.find(".narrative-card--layout").before(f);
d.$el.find(".js-narrative-summary-layout").remove();f=e.find(".js-narrative-summary-layout");d.$el.find(".narrative-card--layout").append(f);d.$el.find(".js-centerWellCard-card-layout").remove();f=e.find(".js-card-layout");d.$el.find(".card-layout").append(f.html());d.$el.find(".js-mobile-email-region").remove();f=e.find(".js-mobile-email-region").remove();d.$el.find(".card-layout").append(f);d.$el.find(".js-ledger-region-totalCashAvailableToWithdraw").remove();f=e.find(".js-ledger-region-totalCashAvailableToWithdraw").remove();
d.$el.find(".card-layout").append(f);if(d.isSallyCustomer()){f=d.$el.find(".card-layout");d.$el.find(".js-invitation").remove();var j=e.find(".js-invitation").remove();0<j.length&&(f.append(j),setTimeout(function(){try{Bootstrapper._trackAnalytics({pt:"ss",action:"pageview",channel:"Fid.com web",pname:"Invitation",sec:"portfolio",sec1:"Sally Experiment"})}catch(a){}},0));f.find(".banner-toggle-sally-feedback").remove();j=e.find(".banner-toggle-sally-feedback").remove();f.append(j)}d.renderSnippet(b);
e=e.find(".js-disclosures");0<e.length&&(a("#legal-footer--accounts").find("p.js-pzn-discloser").remove(),e.find("p").addClass("js-pzn-discloser"),a("#legal-footer--accounts").append(e.html()));d.$el.append(c);if("function"===typeof window.onContentMeasurementLoaded)window.onContentMeasurementLoaded()},onComplete:function(){U.hideLoading()}});!toggleMap.experienceConfigratorFeature||!c.get("selectedAccounts").portfolio?e.run():cardListGlobal&&0<cardListGlobal.length?d.goToSummaryCardView(cardListGlobal,
e):h.adobeTargetDeferred.promise().then(function(a){d.goToSummaryCardView(a,e)},function(){e.run()})}},goToSummaryCardView:function(a,b){var c=this.processCardList(a);c&&c.cardList&&(b.cardList=c.cardList,b.url="/ftgw/fbc/ofportfolio/summaryCardsExperience");b.run()},processCardList:function(a){if(a){var b={},c=[];for(i=0;i<a.length;i++){var d=a[i];if(d.cardId){d=d.cardId.replace("tcm:","").split("-");if(3==d.length)var e={componentId:d[1],templateId:d[2],publicationId:d[0]};c.push(e)}}if(0<c.length)return b.cardList=
{componentPresentation:{components:{component:c}}},b}},handleCardCollapse:function(b){if(!this.stopSaveEventCollapseExpand){b=a(b.currentTarget).closest(".card-layout--card-content,.card-layout--welcome-card-content,.card-layout--narrative-card-content");var c=b.data("tcmid");this.isNarrativeCard()?(b.hasClass("collapsed")?this.stateModel.saveCardState(c):this.stateModel.deleteCardState(c),a(window).trigger("resize.summaryCards")):b.hasClass("expanded")?this.stateModel.deleteCardState(c):this.stateModel.saveCardState(c)}},
handleStackedSummaryState:function(a){void 0===a&&(a=this.$(".card-layout-toggle--selected").data("card-toggle-value"));(new Y).saveStackedSummaryState(a)},layoutCards:function(b){var d=this,e=d.$(".card-layout--card-content"),f=e.map(function(b,c){return a(c).data("tcmid")});b=b?(b||"").split("-"):(a("#card-layout--cards").data("card-order")||"").split("-");if(d.isCdEntitlement()&&!a("#card-layout--cards").data("card-order")){var j=e.filter(function(b,d){return"Messaging.messagingandoffer"==a(d).data("model-provider")||
c.get("selectedAccounts").portfolio&&"positionsNewsCard.positionsNews"==a(d).data("model-provider")||"explore2card.explore2card"==a(d).data("model-provider")||"performancecard.performanceCard"==a(d).data("model-provider")}).map(function(b,c){return a(c).data("tcmid")}).get().join(",");b.push(j)}var g={},h=a.map(b?b[0].split(","):[],function(a,b){var c=a.split(/(?=L)/),d=+c[0];g[d]={};switch(c[1]){case "L":g[d].lockedPosition=b}return d}),k=a.map(b&&b[1]?b[1].split(","):[],function(a){return+a}),l=
e.get().sort(function(b,c){var d=a(b).data("tcmid"),e=a(c).data("tcmid"),j=a.inArray(d,h),g=a.inArray(e,h);-1==j&&(j=a.inArray(d,f)+0.1);-1==g&&(g=a.inArray(e,f)+0.1);return j>g?1:-1});toggleMap.lockCardFeature&&l.filter(function(b){var c=a(b).data("tcmid"),c=g[c]&&g[c].lockedPosition;0<=c&&a(b).data({locked:!0,"lock-position":c}).addClass("locked");return"number"===typeof c&&0<=c}).sort(function(b,c){var d=a(b).data("lock-position"),e=a(c).data("lock-position");return d>e?1:-1}).forEach(function(b){var c=
l.indexOf(b),d=a(b).data("lock-position");c!=d&&(l.splice(c,1),l.splice(d,0,b))});d.isSallyCustomer()?a(l).each(function(b,c){-1!=a.inArray(a(c).data("tcmid"),k)&&a(c).hide().data("oncheck",!1);a(c).appendTo(d.$("#card-layout--cards"))}):a(l).each(function(b,c){-1!=a.inArray(a(c).data("tcmid"),k)&&a(c).hide().data("layoutHidden",!0);a(c).appendTo(d.$("#card-layout--cards"))});this.refreshHiddenCardsCobinet()},handleDCWelcomeCard:function(){function b(){if(a.contains(document.documentElement,c)){var d=
a(c.childNodes[0]),e=a(c.childNodes[1]),f=d.height(),j=e.height();f>j?(d.css("margin-top",0),e.css("margin-top",(f-j)/2)):(e.css("margin-top",0),d.css("margin-top",(j-f)/2))}else a(window).off("resize.dcWelcomeCard")}var c=this.$("#ModalDCWelcomeBanner .syn-description-text p")[0];if(c){a(c.childNodes).filter(function(a,b){return 3===b.nodeType}).wrap('<span class="dc-welcome-banner-text">');var d=this.$("#ModalDCWelcomeBanner .syndicated-promo--link").children().get().slice(0,3);a(d[0]).is("a")&&
(a(d[1]).is("br")&&a(d[2]).is("br"))&&(a(c).find(".dc-welcome-banner-text").append("<span> </span>").append(d[0]),a(d[1]).remove(),a(d[2]).remove())}b();a(window).off("resize.dcWelcomeCard").on("resize.dcWelcomeCard",b)},getMidFromNewIRAContribServer:function(){return a.ajax({async:!0,type:"GET",url:envMap.DIGITAL_APP_URL+"ira-contributions/iracontribution/",xhrFields:{withCredentials:!0},crossDomain:!0})},renderSnippet:function(b){function d(){a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");
R++;100<=R&&(clearInterval(P),R=0)}function g(a){return"$"+(+a).toFixed(2).replace(/(?!^)(\d{3})(?=(?:\d{3})*(?:\.|$))/g,",$1")}this.handleTooltipPopup();var h=this;try{this.handleDCWelcomeCard()}catch(l){}if(0<this.$(".card-layout--content").length||0<this.$(".js-narrative-toggle-layout").length){this.$(".summary-cards-error-message").addClass("display-none");var p=this.$("#card-layout--cards").data("moveit-enabled"),r=this.$("#card-layout--cards").data("moveit-entitled"),B=this.$("#card-layout--cards").data("moveit-tour-visited");
r&&!B&&this.moveitIntroTour();this.isNarrativeCard()?(this.$(".card-layout").addClass("display-none"),this.$(".narrative-card--layout").removeClass("display-none")):(this.$(".card-layout").removeClass("display-none"),this.$(".narrative-card--layout").addClass("display-none"));!0===h.$(".card-layout-toggle--selected").data("narrativeDefaulted")&&e.publishEvent("STACKEDCARDS_STATE_UPDATE");a(".card-layout--card-content, .card-layout--welcome-card-content").each(function(b,c){var d=a(c);if(d.data("init-work-around")){var e=
d.find(".card-layout-card-wrapper--work-around .fid-card--title"),d=d.find(".card-layout-card-wrapper--work-around+div").find(".syn-h3,.fid-card--title");e.html(d.html())}}).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(a){a.stopPropagation()});toggleMap.lockCardFeature&&a("<div>").addClass("lock-card-div").insertBefore(".card-layout--card-content .fid-card-controls--collapse-expand");h=this;h.refreshLedgerCard();h.displayActiveTraderCard();B=h.$(".card-layout");
a(".fid-card-controls--collapse-expand").each(function(b,c){var d=a(c).parents(".fid-card");new FID.CardCollapser({domElement:c,container:d})});var r=a(".js-mobile-email-region").data("mobile-email-skip-number"),F=a(".js-mobile-email-region").data("pop-email-phone-interstitial"),M=a(".js-mobile-email-region").data("bad-email"),J=5;""!==r&&!isNaN(r)?J=5<=r?0:5-r:r=0;console.log("The countdown number is "+J);F&&0<J&&(a.ajax({type:"GET",dataType:"json",url:"/ftgw/fbc/ofoltxsvc/saveMobileEmailSkipNumber?inputKey=skipNumber&inputValue="+
(r+1)}),a(document).trigger("OPEN_COLLECT_MOBILE_POPUP",{mobile:!0,email:M,remainTime:J-1}));X.checkFVTourIndicator();a(document).trigger("POPUP_BROWSER_MEGING_INTERSTITIAL");var P,R=0;a(window).on("cardCollapserOpenInitiated.summaryCards",function(b){b=a(b.target).closest(".card-layout--card-content,.card-layout--welcome-card-content,.card-layout--narrative-card-content");b.find(".fid-card--block-chart").css("visiblity","hidden");b.addClass("expanded").removeClass("collapsed");clearInterval(P);R=
0;P=setInterval(d,25)});a(window).on("cardCollapserOpenComplete.summaryCards",function(){clearInterval(P);R=0});a(window).on("cardCollapserCloseInitiated.summaryCards",function(b){b=a(b.target).closest(".card-layout--card-content,.card-layout--welcome-card-content,.card-layout--narrative-card-content");h.isNarrativeCard()?b.addClass("collapsed"):b.removeClass("expanded").addClass("collapsed")});a(window).on("cardCollapserCloseComplete.summaryCards",function(b){h.isNarrativeCard()&&a(b.target).closest(".card-layout--narrative-card-content").removeClass("expanded")});
a(window).on("cardCollapserCloseComplete.summaryCards cardCollapserOpenComplete.summaryCards",function(b){var c=b.$container&&b.$container.find(".fid-card--block-chart");b.$container.parents(".card-layout--card-wrapper").next(".card-layout--card-wrapper").find(">*").css("overflow","");setTimeout(function(){c.css("visiblity","visible")},100);a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")});F=0<B.find(".fid-card--news").length?B.find(".fid-card--news"):a('<div class="news-card--container fid-card "><div class="fid-card--inset"><div class="fid-card--header clearfix"><h2 class="fid-card--title">News About Your Investments</h2></div><p class="fid-card--lede">News is temporarily unavailable. Please try again later.</p></div></div>');
0<B.find(".asset-allocation--block").length?B.find(".asset-allocation--block"):a('<div class="asset-allocation--block"><div class="fid-card--header clearfix fid-card--header-overwrite"><h2 class="fid-card--title fid-card--title-overwrite">Your Asset Allocation<sup>&#dagger;</sup></h2></div><p class="asset-allocation--description">Fidelity is currently unable to provide analysis information. We apologize for any inconvenience. Please try again later.</p></div>');r=0<B.find(".top-movers--block").length?
B.find(".top-movers--block"):a('<div class="top-movers--block"><h3 class="top-movers--title">Your Top & Bottom Performers</h3><p class="top-movers--message display-message">Top mover is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p></div>');B=0<B.find(".market-movers-card").length?B.find(".market-movers-card"):a('<div class="market-movers-card"><h3 class="market-movers-card--title">Market Movers</h3><p class="top-movers-card-message">Market movers is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p></div>');
c.isPerformanceHidden()||(!h.performanceCardView&&0<this.$(".performance-card-container").length&&(h.performanceCardView=new A({el:this.$(".performance-card-container")})),h.performanceCardView&&(0<this.$(".performance-card-container .fid-card--performance").length||this.$(".performance-card-container").html('<div class="fid-card fid-card--performance"><div class="fid-card--inset"><div class="fid-card--header clearfix"><h2 class="fid-card--title">Compare Your Returns to the Market</h2></div><p class="fid-card--lede">Your performance information cannot be displayed at this time.</p></div></div>'),
h.performanceCardView.setElement(this.$(".performance-card-container")),h.performanceCardView.setContent(!1,h.accountsInfo)));h.welcomeCardView||(h.welcomeCardView=new f({el:this.$(".card-layout--welcome-card-content")}),window.fang&&fang.EventBus&&(fang.EventBus.subscribe("SUPPRESS_WELCOME_CARD",h.welcomeCardView.removeNHHWelcomeCard.bind(h.welcomeCardView)),fang.EventBus.subscribe("dcWelcomeVideoWatch",h.welcomeCardView.showDCWelcomeVideo.bind(h.welcomeCardView)),fang.EventBus.subscribe("dcWelcomeBannerRemove",
h.welcomeCardView.removeDCWelcomeBannerCard.bind(h.welcomeCardView)),fang.EventBus.subscribe("dcWelcomeShareFeedback",h.welcomeCardView.showDCWelcomeFeedback.bind(h.welcomeCardView))));h.trackMRDDistributionsView||(h.trackMRDDistributionsView=new k({el:this.$(".track-mrd-distributions-card-container")}));h.trackMRDDistributionsView.setAccounts(h.accountsInfo);h.trackIRAContributionsView||(h.trackIRAContributionsView=new j({el:this.$(".track-ira-contributions-card-container")}));h.trackIRAContributionsView.setAccounts(h.accountsInfo);
h.memoryWallView||(h.memoryWallView=new ka({el:this.$(".memory-wall-card-container")}));!h.newsCardView&&0<this.$(".news-card-container").length&&(h.newsCardView=new v({el:this.$(".fid-card--news").parent()}));h.newsCardView&&(h.newsCardView.setElement(F),h.newsCardView.setContent(!1,h.accountsInfo));!h.dcProrView&&0<this.$(".dc-ror-container").length&&(h.dcProrView=new L({el:this.$(".dc-ror-container")}),h.dcProrView.refresh());toggleMap.showSocialSecurityReminderCard&&h._lazyloadSocialSecurityReminderCard();
toggleMap.PlanSummary_ReportCard_Toggle&&h._lazyLoadReportCenterCard();if(toggleMap.PortSum_showRetirementIncomeCard_Toggle&&!h.rivPhaseTwo&&0<this.$(".riv-phase-two-card-container").length){if(F=h._isRIVHidden(p))a(document).one("add_riv_card_title",function(){h.refreshHiddenCardsCobinet()});h.rivPhaseTwo=new wa({el:this.$(".riv-phase-two-card-container"),moveItEnabled:p,isRivHidden:F})}h.rivPhaseTwo&&h.rivPhaseTwo.getRivData();if(window.envMap&&window.envMap.DPCS_ASSET_ALLOCATION_ENABLE&&0<this.$(".asset-allocation-card-container").length&&
!1==this.$(".asset-allocation-card-container").data("highcash-indicator")){var p=this.isNarrativeCard(),F=!p?this.$(".asset-allocation-card-container"):this.$(".asset-allocation-card-container").parents(".card-layout--narrative-card-content"),M=p?F.hasClass("collapsed")?"collapse":"expand":"",J=this.$(".asset-allocation-card-container").data("publicationId"),H=this.$(".asset-allocation-card-container").data("composite-id");h.assetAllocationCardView||(h.assetAllocationCardView=new n({el:F,isNarrativeCard:p,
pasProductName:1==this.accountsInfo.accounts.length?this.accountsInfo.accounts[0].pasProductName:""}));p&&(h.assetAllocationCardView.setCardStatuse(M),h.assetAllocationCardView.setCardTcmId(F.data("tcmid")));h.assetAllocationCardView.setPublicationAndCompositeId(J,H);h.assetAllocationCardView.setHasPMC(b);b=c.get("selectedAccounts").accounts;c.getAllAccounts()===b&&(b="ALL");h.assetAllocationCardView.setAccounts(b);h.assetAllocationCardView.refresh()}else!h.assetAllocationCardView&&0<this.$(".asset-allocation-card-container").length&&
(h.assetAllocationCardView=new m({el:this.$(".asset-allocation-card-container"),isNarrativeCard:this.isNarrativeCard()})),h.assetAllocationCardView&&(h.assetAllocationCardView.setElement(this.$(".asset-allocation-card-container")),h.assetAllocationCardView.setContent(!1,h.accountsInfo));window.toggleMap&&window.toggleMap.nodePerformanceCardFeature?h.accountsInfo&&(h.accountsInfo.accounts&&h.accountsInfo.accounts[0]&&h.accountsInfo.accounts[0].acctNum&&0<this.$(".performance-card-node-container").length)&&
(h.performanceCardNodeView&&h.performanceCardNodeView.destroy(),h.performanceCardNodeView=new z({el:this.$(".performance-card-node-container"),acctNum:h.accountsInfo.accounts[0].acctNum}),h.performanceCardNodeView.refresh()):(!h.performanceCardTwoView&&0<this.$(".performance-card-two-container").length&&(h.performanceCardTwoView=new w({el:this.$(".performance-card-two-container")})),h.performanceCardTwoView&&0<this.$(".performance-card-two-container").length&&h.performanceCardTwoView.setElement(this.$(".performance-card-two-container")));
toggleMap.showNewIRAContributionCard&&h.showNewIRAContributionsCard()?h.getMidFromNewIRAContribServer().done(function(b){b.data&&0!==b.data.length?0<h.$(".card-layout .fid-card--ira-contribution").length&&(h._lazyloadIRAContributionsCard(),a(".ira-contributions-card-ytd-container").parent().parent().remove()):!h.cardIraContributionsYtdView&&0<a(".ira-contributions-card-ytd-container").length&&(h.cardIraContributionsYtdView=(new s({el:a(".ira-contributions-card-ytd-container")})).render(),h.$(".card-layout .fid-card--ira-contribution").parent().parent().remove());
a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}).fail(function(){!h.cardIraContributionsYtdView&&0<a(".ira-contributions-card-ytd-container").length&&(h.cardIraContributionsYtdView=(new s({el:a(".ira-contributions-card-ytd-container")})).render(),h.$(".card-layout .fid-card--ira-contribution").parent().parent().remove());a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}):h.cardIraContributionsYtdView||(0<a(".ira-contributions-card-ytd-container").length&&(h.cardIraContributionsYtdView=
(new s({el:a(".ira-contributions-card-ytd-container")})).render()),h.$(".card-layout .fid-card--ira-contribution").parent().parent().remove());!h.topMoversCardView&&0<this.$(".top-movers-card-container").length&&(h.topMoversCardView=new D({el:this.$(".top-movers-card-container")}));h.topMoversCardView&&(h.topMoversCardView.setElement(r),h.topMoversCardView.setContent(!1,h.accountsInfo));!h.topMoversNarrativeCardView&&0<this.$(".js-narrative-top-movers").length&&(h.topMoversNarrativeCardView=new D({el:this.$(".js-narrative-top-movers")}));
h.topMoversNarrativeCardView&&(h.topMoversNarrativeCardView.setContent(!1,h.accountsInfo),h.isNarrativeCard()&&(h.topMoversNarrativeCardView.displayNarrativeCardContent(),h.topMoversNarrativeCardView.requestMarketData()));!h.marketMoversCardView&&0<this.$(".market-mover-card-container").length&&(h.marketMoversCardView=new y({el:this.$(".market-mover-card-container")}));h.marketMoversCardView&&(h.marketMoversCardView.setElement(B),h.marketMoversCardView.setContent(!1,h.accountsInfo));!h.activeTraderProView&&
0<h.$(".active-trader-pro-card-container").length&&(h.activeTraderProView=(new V({el:this.$(".active-trader-pro-card-container")})).render());h.activeTraderProView&&h.activeTraderProView.setElement(h.$(".active-trader-pro-card-container"));!h.marketChartView&&0<h.$(".market-chart-card-container").length&&(b=a(".fid-card--market-chart"),h.marketChartView=b.length&&b.hasClass("js-market-chart-new")?(new Sa({el:this.$(".market-chart-card-container")})).render():(new S({el:this.$(".market-chart-card-container")})).render());
h.marketChartView&&(h.marketChartView.setElement(h.$(".market-chart-card-container")),h.marketChartView.chartContainer=h.$(".market-chart--chart-display-area"),h.marketChartView.reload());!h.gicsSectorCardView&&0<h.$(".card-layout .fid-card--gics-sector").length&&(h.gicsSectorCardView=new I({el:this.$("fid-card--gics-sector")}));h.gicsSectorCardView&&h.gicsSectorCardView.loadChart();0<h.$(cb.prototype.el).length&&(h.goalSummaryCardView||(h.goalSummaryCardView=new cb),h.goalSummaryCardView.render());
b=h.$(".card-layout .syn-tax-loss");!h.PerformanceTLHCardView&&0<b.length&&(h.PerformanceTLHCardView=new ma({el:b}));b=h.$(".card-layout .risk-metric");!h.PerformanceRiskCardView&&0<b.length&&(h.PerformanceRiskCardView=new aa({el:b}));b=h.$(".dc-loan-card--container");0<b.length&&!h.dcLoanCardView&&(h.dcLoanCardView=new Ka({el:b}));b=h.$(".dc-contribution-card--container");0<b.length&&!h.dcContributionCardView&&(h.dcContributionCardView=new ra({el:b}));b=h.$('[data-model-provider="crossover.employerMessagesHybrid"]');
0<b.length&&!h.wiMessagingCard&&(h.wiMessagingCard=new Fa({el:b}));var G=h.$(".dc-contribution-card-ngapp--container");if(0<G.length){if(b=c.get("selectedAccounts").accounts[0]){var O=(b=b.getLink("nb.dc.Deductions"))&&b.linkUrl;G.find("a").each(function(b,c){var d=a(c);if(-1!==(d.attr("href")||"").indexOf("~(CONTRIBUTION_URL)~"))O?(d.attr("href",O),d.attr("data-default-url",O),d.addClass("dc-contribution-link")):d.hide()})}a.ajax({url:envMap.DIGITAL_CONTENT_URL+"dc-contribution/home",type:"GET",
xhrFields:{withCredentials:!0},success:function(a){G.append(a)}})}if(c.isPerformanceHidden())h.$(".card-layout .fid-card--balance-over-time").closest(".card-layout--card-content").remove(),h.$(".narrative-summary-layout .fid-card--balance-over-time").closest(".card-layout--narrative-card-content").find(".narrative-summary-card").remove();else if(0<h.$(".card-layout .fid-card--balance-over-time").length||0<h.$(".narrative-summary-layout .fid-card--balance-over-time").length){p=0<h.$(".narrative-summary-layout .fid-card--balance-over-time").length&&
this.isNarrativeCard();b=!p?this.$(".fid-card--balance-over-time"):this.$(".fid-card--balance-over-time").parents(".card-layout--narrative-card-content");r=p?b.hasClass("collapsed")?"collapse":"expand":"";B=p?b.data("tcmid"):"";F=p?h.$(".fid-card--balance-over-time .narrative-summary-card--chart--header").data("isEnabled"):!1;M=p?h.$(".fid-card--balance-over-time .narrative-summary-card--chart--header").data("daysAndMonths"):"";J=p?h.$(".fid-card--balance-over-time .narrative-summary-card--chart--header").data("lastLogin"):
"";h.balanceOverTimeView||(h.balanceOverTimeView=new N({el:b,isNarrativeCard:p}));var ha=!1;b=a(c.get("selectedAccounts").accounts).filter(function(a,b){5===b.oltxType&&(ha=!0);return 0===b.oltxType&&!b.isIWSAcct||6===b.oltxType||5===b.oltxType}).map(function(a,b){return b.acctNum}).get().join(",");h.balanceOverTimeView.setExternalCommonData(b,window.envMap.NBRETAIL_URL_VALUE,ha);p&&h.balanceOverTimeView.setExternalNarrativeData(B,c.get("selectedAccounts").portfolio,r,c.getAllAccounts().length-c.getCreditCardAccounts().length,
F,M,J);h.balanceOverTimeView.refresh()}!h.retirementIncomeCardView&&0<h.$(".retirement-income--container").length&&(h.retirementIncomeCardView=new Ha({el:this.$(".retirement-income--container")}));h.retirementIncomeCardView&&h.retirementIncomeCardView.createChartContent();a("#legal-footer--retiree").hide();a(".legal-footer--retiree-card-link").hide();var U=a("div[data-model-provider='planningANDguidance.surplusShortfallRetiree']");0<U.length&&(U.hide(),require([window.location.origin+"/ftgw/digital/planprogress/retireeCard/card-retiree-surplus-shortfall.js"],
function(a){h.SurplusShortfallRetireeCardView=new a({el:U});h.showRetireAnalysis(h.SurplusShortfallRetireeCardView);U.show()}));var ca=a("div[data-model-provider='planningANDguidance.scenarioAnalysis']");0<ca.length&&(ca.css("display","none"),a("#ScenarioAnalysis").css("display","none"),require([window.location.origin+"/ftgw/digital/planprogress/scenario-analysis-card/chart-scenario-analysis-card.js"],function(a){h.ScenarioAnalysisCardVew=new a({el:ca});h.showRetireAnalysis(h.ScenarioAnalysisCardVew)}));
var W=a("div[data-model-provider='planningANDguidance.profile']");0<W.length&&(W.hide(),require([window.location.origin+"/ftgw/digital/planprogress/profileCard/card-profile.js"],function(a){h.ProfileCardView=new a({el:W});W.show()}));if(toggleMap.PGC_RPMSCORE_CRAD_NEW_APP_SWITCH){var Q=a("div[data-model-provider='PlanGuideEngagerPhase2.RPMscore']");0<Q.length&&(Q.hide(),a("div[data-model-provider='PlanGuideEngagerPhase2.RPMscore'] #RPMScorecardNAPreRetiree").prepend('<div class="fid-card plan-guide-phase2-card--container"></div>'),
require([window.location.origin+"/ftgw/digital/planprogress/rpmscore-card/rpmscore-card.js"],function(b){h.planGuideEngagerPhase2CardView=new b({el:Q});Q.show();a(".legal-footer--rpm-link").show();a(".rpm-link").trigger("click")}))}else!h.planGuideEngagerPhase2CardView&&0<h.$(".plan-guide-phase2-card--container").length&&(h.planGuideEngagerPhase2CardView=new qa({el:this.$(".plan-guide-phase2-card--container"),isNarrativeCard:this.isNarrativeCard()})),h.planGuideEngagerPhase2CardView?(a(".legal-footer--rpm-link").show(),
a(".rpm-link").trigger("click")):(a("#legal-footer--rpm").hide(),a(".legal-footer--rpm-link").hide());h.masonryLayoutView&&(toggleMap.portSumSallyExperienceFeature&&h.isSallyCustomer()?(h.showAllCardsForSally(),h.layoutCards(h.$("#card-layout--cards").data("card-order"))):h.layoutCards(),h.masonryLayoutView.init("moveit"),h.masonryLayoutView.refresh());"Y"==envMap.PI_PHASE_4_ENABLED_URL&&0<h.$(".card-layout,.narrative-summary-layout").find(".activity-card").length?toggleMap.DPCSActivityCardEntitledFeature?
h._lazyloadDPCSRecentActivityCard():h._lazyloadRecentActivityCard():0<h.$(".card-layout,.narrative-summary-layout").find(".activity-card").length&&h._lazyloadActivityCard();0<h.$(".card-layout .pending-transfer-card").length&&h._lazyloadPendingTransferCard();0<h.$(".card-layout .recent-transactions-card").length&&h._lazyloadRecentTransactionsCard();0<h.$(".card-layout .oppfin-sc-card").length&&h._lazyloadOppFinCard();0<h.$(".card-layout .fid-card--medicare-reminder").length&&h._lazyloadMedicareReminderCard();
0<h.$(".card-layout .fid-card--solver").length&&h._lazyloadSolverCard();0<h.$(".card-layout .fid-card--monthly-income").length&&h._lazyloadMonthlyIncomeCard();if(0<h.$("div[id^='ExploreCard']").length&&(b=h.$("div[id^='ExploreCard']").parent()))h.explore2CardView=new db({el:b}),h.explore2CardView.render();b=h.$(".mrd-required-repeater--chart.progresschart-horizontal");b.length&&(p=b.data("withdraw"),r=b.data("total"),B=b.data("year"),p={current:{amount:g(p)+"*",name:"So far, you\u2019ve withdrawn"},
total:{amount:g(r)+"*",name:'Your <span class="mrd-estimate--year">'+B+"</span> estimated RMDs"}},b.makeHorizontalProgressChart(p));b=h.$(".card-layout .fid-card--dc-i-want-to");0<b.length&&!h.dcIWantToCardView&&(h.dcIWantToCardView=new q({el:b}));toggleMap.FICCardEnableSSOFeature&&(b=h.$(".list-card.eii-card.fic-card-container"),0<b.length&&!h.ficCardView&&(this.hasCommunityCard=!0,h.ficCardView=new E({el:b})));0<h.$(".emoney-advisor-card-container").length&&(this.hasAdvisorCard=!0);0<h.$("#RewardsCardWealthRewardsEligibleEnrolled").length&&
(this.hasRewardCard=!0);b=a(".tabs--nav-content")[0];F=0;!0==this.hasCommunityCard&&F++;!0==this.hasRewardCard&&F++;!0==this.hasAdvisorCard&&F++;if(toggleMap.NewTabFromCardsFeature&&b&&0<F&&!this.hasAddTab){p=a(".more-tab--tab.tabs--tab");r=b.childElementCount-2;B=b.childElementCount-1;F=b.childElementCount+F;b.className="tabs--nav-content tabs--tab-count-"+(F-1);this.hasCommunityCard&&!this.hasTab(p,"Community")&&(r++,a('<li class="more-tab--tab tabs--tab more-tab--tab-'+r+'" data-tab-name="Community" style="display: block;"><a  href="'+
envMap.COMMUNITY_TAB_URL+'" class="tabs--tab-link" tabindex="-1" role="tab" id="tab-'+r+'" aria-controls="tab-'+r+'" aria-selected="false" >Investor Community</a></li>').insertBefore(".more-tab--tab-"+B+".tabs--last"),this.hasCommunityTab=!0);this.hasRewardCard&&!this.hasTab(p,"Rewards")&&(r++,a('<li class="more-tab--tab tabs--tab more-tab--tab-'+r+'" data-tab-name="Rewards" style="display: block;"><a  href="'+envMap.REWARDS_TAB_URL+'" class="tabs--tab-link" tabindex="-1" role="tab" id="tab-'+r+'" aria-controls="tab-'+
r+'" aria-selected="false" >Rewards</a></li>').insertBefore(".more-tab--tab-"+B+".tabs--last"),this.hasRewardTab=!0);this.hasAdvisorCard&&!this.hasTab(p,"Advisor")&&(r++,a('<li class="more-tab--tab tabs--tab more-tab--tab-'+r+'" data-tab-name="Advisor" style="display: block;"><a  href="'+envMap.EMONEY_ADVISOR_TAB_URL+'" class="tabs--tab-link" tabindex="-1" role="tab" id="tab-'+r+'" aria-controls="tab-'+r+'" aria-selected="false" >eMoney Advisor</a></li>').insertBefore(".more-tab--tab-"+B+".tabs--last"),
this.hasAdvisorTab=!0);b=a(".tabs--last");b[0].className="more-tab--tab tabs--tab more-tab--tab-"+(F-1)+" tabs--last";b[0].children[0].id="tab-"+(F-1);b[0].children[0].attributes.getNamedItem("aria-controls").value="tab-"+(F-1);b[1].children[0].id="tab-"+F;b[1].children[0].attributes.getNamedItem("aria-controls").value="tab-"+F;this.moretabAdapter=new qb;var K=a("#moretab-area");this.tabs&&this.destoryTabs();b=a(".more-tab--tab.tabs--selected").index()+1;b=1<b?b:1;K.removeClass("hidden");a(".more-tab--tab").off("click");
this.tabs=new kb(K,{ignoreHiddenTabs:!1,tabClassSelector:".more-tab--tab",containerClassSelector:".more-tab--tab-container",selected:b});this.moretabAdapter.setMoreTabInstance(this.tabs);this.moretabAdapter.setAccountsInfo(this.accountsInfo);var Y=K.find(".tabs--tab-link");this.tabs.updateTabLinkTarget=function(){K.find("."+this._moreListAClass).each(function(a,b){if(Y[a+1]){var c=Y[a+1].href||"";-1!=c.indexOf("#")&&(c=c.substr(c.lastIndexOf("#")));b.href=c}})};this.tabs.updateTabLinkTarget();this.tabs._createDynamicTabs=
function(){this.updateTabLinkTarget()};window.hasAddTab=!0}setTimeout(function(){var b=[];a.each(Highcharts.charts,function(c,d){d&&a.contains(document,d.container)&&b.push(d)});b.unshift(Highcharts.charts.length);b.unshift(0);Array.prototype.splice.apply(Highcharts.charts,b)},1E3);ea.endTimer("summary-timer");!h.ppaGoalsCardView&&0<h.$("#ppa-goals-summary-card").length&&(h.ppaGoalsCardView=new Ea);if(toggleMap.portSumSallyExperienceFeature&&(b=h.isSallyCustomer(),a("body").data("sally-experience-entered",
b),a("div.error-message-no-cards-sally, div.error-message-box-sally").remove(),a(".page-content-title").siblings(".banner-toggle-sally-feedback").remove(),b)){if((b=a(".js-invitation"))&&0<b.length&&b.is(":visible"))h.switchAlertWelcomeSectionForSally(!1),b.on("INVITATION_RESIZE",h.extendInvitationHeight),a(window).resize(h.extendInvitationHeight),h.extendInvitationHeight();(0<a(".sally-card-layout--editing").length||h.isShowCustomize())&&a(".js-centerWellCard-card-layout .card-layout--edit-card-switch").trigger("click");
"undefined"!==typeof window.FidMsmt&&"function"==typeof window.FidMsmt.rePopQualtrics&&window.FidMsmt.rePopQualtrics();b=h.$el.find(".card-layout .banner-toggle-sally-feedback").remove();a(".page-content-title").before(b);a("body").hasClass("summary")&&b.data("sally-survey-show-flag")&&b.show()}}else this.$(".summary-cards-error-message").removeClass("display-none")},hasTab:function(b,c){var d=!1;a.each(b,function(a,b){b.dataset.tabName===c&&(d=!0)});return d},onSelectedAccountChange:function(a){this.accountsInfo=
a},displayActiveTraderCard:function(){try{new ActiveXObject("AgControl.AgControl")}catch(a){}},_isRIVHidden:function(b){var c=!1;if(b&&a("#card-layout--cards").data("cardOrder")){b=a("#card-layout--cards").data("cardOrder").split("-")[1];var d=a(".riv-phase-two-card-container").closest(".card-layout--card-content").data("tcmid");b&&(d&&-1!=b.indexOf(d))&&(c=!0)}return c},_lazyloadRecentActivityCard:function(){var b=this;(new P({data:this.accountsInfo,onSuccess:function(c){var d=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");
0<d.length&&(0<a(c).find(".js-activity-card-main-wrap").length?d.find(".loading-activity-card").after(a(c).find(".js-activity-card-main-wrap")):0<a(c).find(".activity-card--message").length?(d.find(".loading-activity-card").parent().find(".activity-card--message").remove(),d.find(".loading-activity-card").after(a(c).find(".activity-card--message"))):d.find(".activity-card").empty().append('<p class="activity-card--message js-pending-activity-error-message">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'),
0<a(c).find(".js-activity-card-price-improvement").length?0<a(c).find(".js-activity-card-main-wrap").length?(d.find(".js-activity-card-main-wrap").after(a(c).find(".js-activity-card-price-improvement")),b.isNarrativeCard()||d.find(".js-activity-card-price-improvement").after('<a href="javascript:void(0)" class="activity-card--view-all-recent-activity-link">View activity for your Fidelity accounts.</a>')):d.find(".activity-card--message").after(a(c).find(".js-activity-card-price-improvement")):0<a(c).find(".js-activity-card-main-wrap").length&&
!b.isNarrativeCard()&&d.find(".js-activity-card-main-wrap").after('<a href="javascript:void(0)" class="activity-card--view-all-recent-activity-link">View activity for your Fidelity accounts.</a>'))},onError:function(){var a=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");0<a.length&&(a.find(".activity-card--message").remove(),a.find(".loading-activity-card").empty().after('<p class="activity-card--message js-pending-activity-error-message">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},
onComplete:function(){var c=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");if(b.isNarrativeCard()&&0<c.length)if(0<c.find(".js-pending-activity-error-message").length)b.$(".js-narrative-pending-activity").find(".narrative-summary-card-container").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">Your activity information is temporarily unavailable.</div><div class="narrative-summary-card--analysis_content clear-margin">We apologize for any inconvenience. Please try again later.</div></div>');
else{var d=c.find(".activity-card--table-content").length,e="";0==d?0<c.find(".js-activity-card-price-improvement").length?(e="You currently have 0 pending items.",b.$(".js-narrative-activity-error-message").empty().html("There are no Pending Activity and Order Details for this time period.")):(b.$(".js-narrative-pending-activity").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">You currently have 0 pending items.</div><div class="narrative-summary-card--analysis_content clear-margin">There are no Pending Activity and Order Details for this time period.</div></div>'),
b.$(".js-narrative-pending-activity").parent(".card-layout--narrative-card-content").hide()):(e=1==d?"You currently have <strong>1 pending item.</strong>":"You currently have <strong>"+d+" pending items.</strong>",b.$(".narrative-summary-card--left--viewlink").html('<a href="javascript:void(0)" class="activity-narrative-card--view-all-activity-link">View activity for your Fidelity accounts</a>'));b.$(".js-narrative-activity-current-item").empty().html(e)}c=b.$(".card-layout,.narrative-summary-layout").find(".activity-card .loading-activity-card");
0<c.length&&c.addClass("inactive");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");b.tooltipDynamic()}})).run()},_lazyloadDPCSRecentActivityCard:function(){if(0<this.$(".card-layout,.narrative-summary-layout").find(".activity-card").length){var b=this.$(".pending-activity-card-container").data("tmsid"),d=this.isNarrativeCard(),e=!d?this.$(".pending-activity-card-container"):this.$(".pending-activity-card-container").parents(".card-layout--narrative-card-content"),f=d?e.hasClass("collapsed")?
"collapsed":"expanded":"",j=e.data("tcmid"),h=!1,g=c.get("selectedAccounts");void 0!=g&&null!=g?(g=g.portfolio,void 0!=g&&null!=g&&(h=!0)):h=!0;this.recentActivityCardView||(this.recentActivityCardView=new r({el:e,isNarrativeCard:d,isAllAccts:h}));this.recentActivityCardView.setCardTmsId(b);d&&(this.recentActivityCardView.setCardStatuse(f),this.recentActivityCardView.setCardTcmId(j));a(document).unbind("activityCard.exeTooltipDynamic").bind("activityCard.exeTooltipDynamic",this.tooltipDynamic);b=
c.get("selectedAccounts").accounts;this.recentActivityCardView.setAccounts(b);this.recentActivityCardView.refresh()}},_lazyloadActivityCard:function(){var b=this;(new P({data:this.accountsInfo,onSuccess:function(c){var d=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");0<d.length&&(0<a(c).find("table").length?(d.find(".loading-activity-card").after(a(c).find("table")),b.isNarrativeCard()||d.find("table").after('<a href="javascript:void(0)" class="activity-card--view-all-activity-link">View activity for your Fidelity accounts.</a>')):
0<a(c).find(".activity-card--message").length?(d.find(".loading-activity-card").parent().find(".activity-card--message").remove(),d.find(".loading-activity-card").after(a(c).find(".activity-card--message"))):d.find(".activity-card").empty().append('<p class="activity-card--message js-pending-activity-error-message">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},onError:function(){var a=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");
0<a.length&&(a.find(".activity-card--message").remove(),a.find(".loading-activity-card").empty().after('<p class="activity-card--message js-pending-activity-error-message">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},onComplete:function(){var c=b.$(".card-layout,.narrative-summary-layout").find(".activity-card");if(b.isNarrativeCard()&&0<c.length)if(0<c.find(".js-pending-activity-error-message").length)b.$(".js-narrative-pending-activity").find(".narrative-summary-card-container").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">Your activity information is temporarily unavailable.</div><div class="narrative-summary-card--analysis_content clear-margin">We apologize for any inconvenience. Please try again later.</div></div>');
else{var d=c.find(".activity-card--table-content").length,e="";if(0==d)b.$(".js-narrative-pending-activity").empty().html('<div class="narrative-summary-card--double-width"><div class="narrative-summary-card--conclusion_statement">You currently have 0 pending items.</div><div class="narrative-summary-card--analysis_content clear-margin">There are no Pending Activity and Order Details for this time period.</div></div>'),b.$(".js-narrative-pending-activity").parent(".card-layout--narrative-card-content").hide();
else{var e=c.find(".js-pending-acitivity-card--timestamp"),f='<tfoot><tr class="fid-card--footer-attribution"><td class="activity-card-td-no-border" colspan="4"><span class="fid-card-attribution--text pending-activity-card--timestamp">'+e.text()+"</span></td></tr></tfoot>";c.find("tbody").after(f);e.remove();e=1==d?"You currently have <strong>1 pending item.</strong>":"You currently have <strong>"+d+" pending items.</strong>";b.$(".narrative-summary-card--left--viewlink").html('<a href="javascript:void(0)" class="activity-narrative-card--view-all-activity-link">View activity for your Fidelity accounts</a>')}b.$(".js-narrative-activity-current-item").empty().html(e)}c=
b.$(".card-layout,.narrative-summary-layout").find(".activity-card .loading-activity-card");0<c.length&&c.addClass("inactive");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},_addRemovePositiveNegativeClasses:function(b){var c=a(b),d,e,f;if(c.length){c.removeClass("color-positive color-negative");for(b=0;b<c.length;b++)d=c.eq(b),e=d.text(),f=Number(e.replace(/[^0-9\.-]+/g,"")),e.length&&(0<f?d.addClass("color-positive"):0>f&&d.addClass("color-negative"))}},_lazyloadPendingTransferCard:function(){var b=
this;(new va({data:this.accountsInfo,onSuccess:function(c){var d=b.$(".card-layout .pending-transfer-card");0<d.length&&(0<a(c).find("table").length?(d.find(".loading-transfer-card").after(a(c).find("table")),d.find("table").after(a(c).find(".fid-card--footer"))):0<a(c).find(".fid-card--error-message").length?(d.find(".loading-transfer-card").parent().find(".fid-card--error-message").remove(),d.find(".loading-transfer-card").after(a(c).find(".fid-card--error-message"))):d.find(".loading-transfer-card").after('<p class="activity-card--message">Your Pending Transfers & Bill Payments information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},
onError:function(){var a=b.$(".card-layout .pending-transfer-card");0<a.length&&(a.find(".fid-card--error-message").remove(),a.find(".loading-transfer-card").after('<p class="activity-card--message">Your Pending Transfers & Bill Payments information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},onComplete:function(){b.$(".card-layout .pending-transfer-card .js-transaction-amount");var c=b.$(".card-layout .pending-transfer-card .loading-transfer-card");
0<c.length&&c.addClass("inactive");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT")}})).run()},_lazyloadRecentTransactionsCard:function(){var b=this;(new H({data:this.accountsInfo,onSuccess:function(c){var d=b.$(".card-layout .recent-transactions-card");0<d.length&&(0<a(c).find("table").length?(d.find(".loading-transactions-card").after(a(c).find("table")),d.find("table").after(a(c).find(".fid-card--footer"))):0<a(c).find(".fid-card--error-message").length?(d.find(".loading-transactions-card").parent().find(".fid-card--error-message").remove(),
d.find(".loading-transactions-card").after(a(c).find(".fid-card--error-message"))):d.find(".loading-transactions-card").after('<p class="activity-card--message">Your Recent Transactions information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},onError:function(){var a=b.$(".card-layout .recent-transactions-card");0<a.length&&(a.find(".fid-card--error-message").remove(),a.find(".loading-transactions-card").after('<p class="activity-card--message">Your Recent Transactions information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</p>'))},
onComplete:function(){var c=b.$(".card-layout .recent-transactions-card .js-transaction-amount"),d=b.$(".card-layout .recent-transactions-card .loading-transactions-card");0<d.length&&d.addClass("inactive");a(document).trigger("this.context.constants.EVENTS.CARDS_LAYOUT");b._addRemovePositiveNegativeClasses(c)}})).run()},_lazyloadOppFinCard:function(){var b=new B({el:this.$(".oppfin-sc-card")});a(".oppfin-sc-card--tooltip-content").empty().html('<p>This card highlights what&#39;s happening with your holdings across these key events.</p> <p style="padding-top:9px;">The orange notifications alert you to the latest activity that&#39;s happened today or is coming up in the next 3 days.</p>');
b.eventSummaryView.refresh()},_lazyloadIRAContributionsCard:function(){var a=this.$(".card-layout").find("#iraContributionsCard"),b=this.$(".ira-contributions-container");"undefined"!==typeof a&&0<a.length&&(this.iraContributionsCardView||(this.iraContributionsCardView=new Ma({el:b})),this.iraContributionsCardView.refresh())},_lazyloadMedicareReminderCard:function(){var b=this.$(".card-layout").find("#medicareReminderCard"),c=this.$(".medicare-reminder-container");a("div.card-layout--card-content.expanded").filter('[data-model-provider="planningANDguidance.medicarereminder"]').find("h2.fid-card--title").html(a(".medicarereminder-title").html());
"undefined"!==typeof b&&0<b.length&&(this.medicareReminderCardView||(this.medicareReminderCardView=new Q({el:c})),this.medicareReminderCardView.refresh())},_lazyloadSolverCard:function(){var a=this.$(".card-layout").find("#solverCard"),b=this.$(".solver-container");"undefined"!==typeof a&&0<a.length&&(this.solverCardView||(this.solverCardView=new Db({el:b})),this.solverCardView.refresh())},_lazyloadMonthlyIncomeCard:function(){var a=this.$(".card-layout").find("#monthlyIncomeCard"),b=this.$(".monthly-income-container");
"undefined"!==typeof a&&0<a.length&&(this.monthlyIncomeCardView||(this.monthlyIncomeCardView=new ha({el:b})),this.monthlyIncomeCardView.refresh())},_lazyloadSocialSecurityReminderCard:function(){var b=this.$(".card-layout").find("#socialSecurityReminderCard"),c=this.$(".social-security-reminder-container");a("div.card-layout--card-content.expanded").filter('[data-model-provider="planningANDguidance.socialsecurityreminder"]').find("h2.fid-card--title").html(a(".ssreminder-title").html());"undefined"!==
typeof b&&0<b.length&&(this.socialSecurityReminderCardView||(this.socialSecurityReminderCardView=new ya({el:c})),this.socialSecurityReminderCardView.refresh())},_lazyLoadReportCenterCard:function(){var a=this.$(".card-layout").find("#reportCenterCard"),b=this.$(".report-center-container");"undefined"!==typeof a&&0<a.length&&(this.reportCenterView||(this.reportCenterView=new pa({el:b})),this.reportCenterView.refresh())},fvFinsihRefreshedHandler:function(){e.unsubscribeEvent({subject:"FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY"});
e.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_SUMMARY",function(b){b.isAllAccSelected&&"true"==b.isSummaryTabSelected&&a(".js-portfolio").trigger("click")})},refreshFvSummary:function(){this.refresh(!0)},togglePiceImprovementTooltip:function(){this.tooltipDynamic();a(".activity-card--tooltip").hasClass(".base-popup--visible")?(alert("Inside if"),a(".activity-card--tooltip").removeClass("base-popup--visible").removeClass("animation--visible")):a(".activity-card--tooltip").addClass("base-popup--visible").addClass("animation--visible")},
closePiceImprovementTooltip:function(){a(".activity-card--tooltip").removeClass("base-popup--visible").removeClass("animation--visible")},tooltipDynamic:function(){function b(c){c=c.$anchor.attr("data-tooltipsection");a(".activity-card--tooltip-section").removeClass(h);a(".activity-card--tooltip-section-"+c).addClass(h);a(".activity-card--tooltip").css("margin-top","-40px");a(".activity-card--question-icon").focus()}a(window).load(function(){a(".base-popup.activity-card--tooltip").BasePopup()});for(var c=
a(".fid-card--activity"),d=c.closest(".card-layout--card-content,.narrative-summary-card")||c,e=c.find(".activity-card--question-icon"),f=e.length,j=[],c=c.find(".popup--tooltip-bubble"),h="activity-card--tooltip-section-active",g,k=0;k<f;k++)g=a(e[k]).on(FID.DynamicTooltip.event.anchorClicked,b),j.push(new FID.DynamicTooltip(d,g,c))},modifyMATourPreference:function(){var b=this.accountsInfo;a("body").data("allAcct",!1);if(void 0!=b&&null!=b){var c=b.portfolio;if(void 0!=c&&null!=c){a("body").data("allAcct",
!0);return}var d=c="",e="";if(null!=b.groupId)if(1==b.accounts.length){if(c=b.accounts[0].acctType,d=b.accounts[0].isPWM,e=b.accounts[0].isDMA,d||e)c=""}else{for(var f=b.accounts.length,j=0,h=0;h<f;h++)c=b.accounts[h].acctType,d=b.accounts[h].isPWM,e=b.accounts[h].isDMA,"Advisor Managed Brokerage"==c&&(!d&&!e)&&(j+=1);j!=f?(c="",a("body").data("allMAAcct",!1)):a("body").data("allMAAcct",!0)}else if(1===b.accounts.length&&(c=b.accounts[0].acctType,d=b.accounts[0].isPWM,e=b.accounts[0].isDMA,d||e))c=
"";if("Advisor Managed Brokerage"!=c)return}"Advisor Managed Brokerage"==c&&(void 0!=a("body").data("firstLoad")&&!a("body").data("firstLoad"))&&a("body").data("allMAAcct",!0);if(a("body").data("allMAAcct")&&(""===AT_MA_Welcome_tour_indicator||"Y"===AT_MA_Welcome_tour_indicator)){var g=new F;Ba.addIntroTourObjQueue(function(){g.showMaIntroTour()},"#ma-intro-tour-wrapper")}},invokeStateForBetaUnblockers:function(a){(new ia({context:this,data:JSON.stringify(a),onPreExecute:function(){},onSuccess:function(){console.log("success!")},
onError:function(){console.log("error!")}})).run();Backbone.history.loadUrl(Backbone.history.getFragment())},collapsedExpandedBetaUnblockers:function(b){b.preventDefault();b=a(".beta-unblocker--container-withboarder");var c=b.find(".feature-icon--plus-minus");c.hasClass("expanded")?(b.find(".features-content").hide(),c.removeClass("expanded"),c.addClass("collapsed"),b.find(".beta-unblocker--content-noboarder").removeClass("expanded").addClass("collapsed")):(c.removeClass("collapsed"),c.addClass("expanded"),
b.find(".beta-unblocker--content-noboarder").removeClass("collapsed").addClass("expanded"),b.find(".features-content").show())},closeOnefeatureInBetaUnblockers:function(b){b={state:[{path:"/user/oce/summary/betaUnblockerFeature",version:"1.0",entry:[{key:a(b.currentTarget).closest(".beta-unblocker-feature").data("beta-unblocker-feature-id")+"_close",value:"true"}]}]};this.invokeStateForBetaUnblockers(b)},closeAllfeatureInBetaUnblockers:function(){var b=[];a.each(a.find(".beta-unblocker-feature"),
function(c,d){var e={key:a(d).data("beta-unblocker-feature-id")+"_close",value:"true"};b.push(e)});0<b.length&&this.invokeStateForBetaUnblockers({state:[{path:"/user/oce/summary/betaUnblockerFeature",version:"1.0",entry:b}]})},onefeatureInBetaUnblockersOptIn:function(b){b=a(b.currentTarget).closest(".beta-unblocker-feature").data("beta-unblocker-feature-id");var c=a(".js-beta-unblocker-modal--container").empty();c.length||(c=a("<div>").addClass("js-beta-unblocker-modal--container").appendTo(document.body));
b=new ja({el:c,data:{context:this,betaUnblockerFeatureId:b}});b.render();b.open()},onefeatureInBetaUnblockersOptOut:function(b){b={state:[{path:"/user/oce/summary/betaUnblockerFeature",version:"1.0",entry:[{key:a(b.currentTarget).closest(".beta-unblocker-feature").data("beta-unblocker-feature-id")+"_optin",value:"false"}]}]};this.invokeStateForBetaUnblockers(b)},moveitIntroTour:function(){var a=new Na;Ba.addIntroTourObjQueue(function(){a.showMoveitIntroTour()},"#moveit-intro-tour-wrapper")},timelineIntroTour:function(){(new tb).showMoveitIntroTour()},
handleNarrativeCardCollapse:function(b){a(b.currentTarget);a(b.currentTarget).parents(".card-layout--narrative-card-content").find(".fid-card-controls--collapse-expand").trigger("click")},showBallotBoxPopup:function(a){a.preventDefault();a={ballotStateAPIName:"votedFeature",ballotQuestion:"On this summary page, I would like to...",optionOne:{name:"Feature one name",description:"Drag and drop the cards into the custom layout you want",standardImgPath:"/images/Drag_Zoomed.png",expandedImgPath:"/images/Drag_Full_View.png",
bulletOne:"Using your mouse, drag and drop the cards into the order you prefer.",bulletTwo:"Your custom card order will appear every time you login to Fidelity.",bulletThree:"Reorder your careds any time by simply dragging them to new positions."},optionTwo:{name:"Feature 2 name",description:"Favorite certain cards so they always appear at the top of your page",standardImgPath:"/images/Hearts_Zoomed.png",expandedImgPath:"/images/Hearts_Full_View.png",bulletOne:"Click the green heart to favorite your most useful cards.",
bulletTwo:"Your favorite cards will always appear at the top of your page.",bulletThree:"Click to unfavorite a card and move it back down the page."},optionThree:{name:"Feature 3 name",description:"Assign a 1-5 star rating to help us order your information better",standardImgPath:"/images/Favorites_Zoomed.png",expandedImgPath:"/images/Favorites_Full_View.png",bulletOne:"Rate each card 1-5 stars based on how useful the information is.",bulletTwo:"Highly rated cards will appear towards the top of the page.",
bulletThree:"Lower rated cards will appear towards the bottom of the page."}};this.YourBallotBoxName||(this.YourBallotBoxName=new na(a));this.YourBallotBoxName.open()},extendInvitationHeight:function(){a(".card-layout").css("min-height","");var b=a(".account-selector-wrapper").height()-a(".card-layout").get(0).offsetTop;a(".card-layout").css("min-height",700>b?700:b)},acceptCustomizeInvitation:function(){a(".card-layout").css("min-height","");this.updateSallyState({stateName:"invitation_state",stateVal:"accept"});
this.cardEditSwitch();this.$(".js-invitation").remove();try{Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Accept Invitation",sec1:"Sally Experiment"})}catch(b){}},rejectCustomizeInvitation:function(){a(".card-layout").css("min-height","");this.updateSallyState({stateName:"invitation_state",stateVal:"reject"});this.$(".js-invitation").remove();this.switchAlertWelcomeSectionForSally(!0);try{Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Decline Invitation",
sec1:"Sally Experiment"})}catch(b){}},updateSallyState:function(a){this.updateState({state:[{path:"/user/oce/summary/customize/invitation",version:"1.0",entry:[{key:a.stateName,value:a.stateVal}]}]})},updateIRAContribState:function(){toggleMap.showNewIRAContributionCard&&this.updateState({state:[{path:"/user/oce/summary/newIraContributionCard",version:"1.0",entry:[{key:"isCTAClicked",value:"true"}]}]})},updateState:function(a){(new ia({context:this,data:JSON.stringify(a)})).run()},showRetireAnalysis:function(b){b&&
a(".legal-footer--retiree-card-link").is(":hidden")&&(a(".legal-footer--retiree-card-link").show(),a(".retiree-link").trigger("click"))},getEmoneyID:function(){return a(".js-centerWellCard-card-layout").data("emoney-tcmid")},destoryTabs:function(){this.tabs&&(this.tabs.$el.off().find(".tabs--tab-link,.tabs--link,.tabs--tab,.tabs--nav,.tabs--container").off(),this.tabs=null)}})});
define("views/tab-content-manager-summary",["jquery","views/tab-content-manager","views/pane-summary-view"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{timeout:3E4,loadTabContent:function(b){this.previousView&&this.previousView.destory&&this.previousView.destory();b=b||this.context;var c=b.accountsInfo;this.view&&this.view.undelegateEvents&&this.view.undelegateEvents();
var d=this.view=new g({el:a(".pane.summary-tab-content"),data:c});d.onSelectedAccountChange(c);d.domLoaded=!!b.domLoaded;d.render();d.refresh();this.previousView=d}});return c});
define("views/pane-feed-view",["views/base-view"],function(a){return a.extend({defaults:{appName:"feed",basePath:envMap.FEED_URL_VALUE+"/",pathToBundles:envMap.FEED_URL_VALUE+"/dist/",jsBundle:"bundle.js",cssBundle:"bundle.css",wrapperSelector:".feed-angular-container"},initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el.find(this.options.wrapperSelector);this.renderMicroApp()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},
insertMarkup:function(a,g,c,e){this.$wrapperClass.append('<link href="'+e+'" rel="stylesheet" type="text/css" />\t\t\t<div id="feedTabContent">\t\t\t<feed id="'+a+'"  class="'+a+'"></feed>\t\t\t</div>');$(g).attr("data-app-path",c);$(g).attr("data-injected",!0)},bootstrap:function(a,g,c){require([a],function(){$(g).hasClass("ng-scope")||angular.bootstrap(angular.element(g),[c])})},renderMicroApp:function(){var a=this.options.pathToBundles,g=this.options.appName,c=a+this.options.jsBundle,e="#"+g;this.insertMarkup(g,
e,this.options.basePath,a+this.options.cssBundle);this.bootstrap(c,e,g)}})});
define("views/tab-content-manager-feed",["jquery","views/tab-content-manager","views/pane-feed-view"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{timeout:0,loadTabContent:function(){this.previousView&&this.previousView.destory&&this.previousView.destory();new g({el:"#feedTabContent"})}});return c});
define("models/performance-redesign-state-model",["jquery","backbone","underscore","tasks/state-save-task"],function(a,b,g,c){var e={state:[]},d={path:"/user/oce/summary/perf",version:"1.0",entry:[]};return b.Model.extend({initialize:function(a,b){a&&(d.version=a);b&&(d.path=b)},savePerfRedesignStateModel:function(a,b,j,g){void 0!==a&&(void 0===j&&(j="perfRedesignKey"),d.entry.push({key:""+j,value:a}),g&&0<g.length&&(d.entry=d.entry.concat(g)),e.state.push(d),a=JSON.stringify(e),this.cleanRequestTempletes(),
(new c({context:this,data:a,onPreExecute:function(){},onSuccess:function(){b&&(document.location.href=b)},onError:function(){b&&(document.location.href=b)},onComplete:function(){}})).run())},cleanRequestTempletes:function(){e.state=[];d.entry=[]}})});
define("tpl!templates/performance-welcome-statement.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large performance-welcome-intro-modal performance-welcome-intro-modal-dialog">\n\t<div role="dialog" aria-labelledby="performance-welcome-intro-modal">\n\t\t<div class="performance-welcome-intro-modal-dialog__header">\n\t\t\t<div class="performance-welcome-intro-modal-dialog__header__title" tabindex="-1">Join Us</div>\n\t\t\t<div class="performance-welcome-intro-modal-dialog__header__close-icon">\n\t\t\t\t<div class="base-popup--close-button" data-item="x-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<form role="form">\n\t\t\t<div class="performance-welcome-intro-modal-dialog__body">\n\t\t\t\t<p>We\'re building a new Performance page that has more capabilities and is more aligned with your needs. We\'ll be rolling out new enhancements in stages, before the page is completed, so we can incorporate your feedback. Thank you for sharing your thoughts with us.</p>\n\t\t\t\t<p>To go back to the current Performance page, select "No Thanks".</p>\n\t\t\t</div>\n\t\t\t<fieldset class="performance-welcome-intro-modal-dialog__footer">\n\t\t\t\t<button class="performance-welcome-intro-modal-dialog__footer__ok button-component scale medium primary-action performance-show">Try it Out</button>\n\t\t\t\t<div class="performance-welcome-intro-modal-dialog__footer__cancel"><a href="javascript:void(0)" class="performance-modal-close-button"  data-item="no-thanks">No Thanks</a></div>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>');return b.join("")}});
define("views/pane-performance-view","views/composite-view underscore util/progressbar models/performance-redesign-state-model util/eventhub-backbone tpl!../templates/performance-welcome-statement.html models/account-context-model".split(" "),function(a,b,g,c,e,d,h){return a.extend({events:{"click .switchback-to-current-exp":"handlePerfStateSaveTask","click .base-popup--close-button":"closePerformanceWelcomePage","click .performance-modal-close-button":"closePerformanceWelcomePage","click .performance-show":"showPerformanceRedesignPage"},
initialize:function(a){this.options=a||{};this.accountInfo=this.options.data;this.perfRedesignStateModel=new c},render:function(){return this},refresh:function(){this.$el.data("welcome-join-us")?this.bootstrap():this.showPerformanceWelcomePage()},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents()},onSelectedAccountChange:function(a){this.accountsInfo=a},bootstrap:function(){var a=this;$.post("/ftgw/digital/performanceredesign/index",a.constructBootstrapData(),function(b){a.$el.empty();
a.$el.html(b)})},constructBootstrapData:function(){var a="",b="",c="",d=b="";!this.accountInfo.portfolio&&!this.accountInfo.groupId&&(a=this.accountInfo.accounts[0].acctNum,c=this.accountInfo.accounts[0].pasProductName,(b=this.accountInfo.accounts[0].isPWM)&&(c="PWM"),-1!=[2,3,4].indexOf(this.accountInfo.accounts[0].oltxType)&&(d="true"));b="undefined"!==typeof USER_MID?USER_MID:"";return{userId:b,acctNum:a,pasProductName:c,isFILI:d}},showPerformanceWelcomePage:function(){var a=this.$(".performance-welcome-intro-modal");
0<a.length?a.ModalPopup("open"):(a=d({}),$(a).appendTo(this.$el),this.$(".performance-welcome-intro-modal").ModalPopup().ModalPopup("open"))},closePerformanceWelcomePage:function(a){a=$(a.currentTarget).data("item");window.trackAnalyticsEvent=window.trackAnalyticsEvent||function(){};a&&"no-thanks"==a?trackAnalyticsEvent({app:"oce-perf-redesign",event:"join-us-no-thanks-clicked",context:""}):a&&"x-button"==a&&trackAnalyticsEvent({app:"oce-perf-redesign",event:"join-us-x-button-clicked",context:""});
a="/ftgw/fbc/ofperformance/perfOverview";h.get("selectedAccounts").accounts&&1===h.get("selectedAccounts").accounts.length&&(a="/ftgw/fbc/ofperformance/perfAcctOverview?Ref_at=ng&ACCOUNT="+h.get("selectedAccounts").accounts[0].acctNum);this.perfRedesignStateModel.savePerfRedesignStateModel("legacy",a)},showPerformanceRedesignPage:function(a){a.preventDefault();window.trackAnalyticsEvent=window.trackAnalyticsEvent||function(){};trackAnalyticsEvent({app:"oce-perf-redesign",event:"join-us-try-it-out-clicked",
context:""});this.perfRedesignStateModel.savePerfRedesignStateModel("Y",void 0,"perfRedesignWelcomeKey");this.bootstrap();this.$(".performance-welcome-intro-modal").ModalPopup("close")},handlePerfStateSaveTask:function(a){var b=$(a.currentTarget).data("switchback");a.preventDefault();a=$(a.currentTarget).attr("href");this.perfRedesignStateModel.savePerfRedesignStateModel(b,a,void 0,[{key:"perfRedesignWelcomeKey",value:"N"}])}})});
define("views/tab-content-manager-performance",["jquery","views/tab-content-manager","views/pane-performance-view"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{timeout:3E4,loadTabContent:function(b){this.previousView&&this.previousView.destory&&this.previousView.destory();b=b||this.context;var c=b.accountsInfo;this.view&&this.view.undelegateEvents&&
this.view.undelegateEvents();var d=this.view=new g({el:a(".performance-container"),data:c});d.onSelectedAccountChange(c);d.domLoaded=!!b.domLoaded;d.render();d.refresh();this.previousView=d}});return c});define("tasks/core-position-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofacda/snippet/ChangeCorePositionsAllowed",type:"POST",dataType:"json",buildParams:function(a){return{acctNum:a}}})});
(function(a){define("util/mobiledevices",[],function(){return a.MobileDevices={isAndroid:function(){return navigator.userAgent.match(/Android/i)},isBlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},isIOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},isOperaMini:function(){return navigator.userAgent.match(/Opera Mini/i)},isIEMobile:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return MobileDevices.isAndroid()||MobileDevices.isBlackBerry()||
MobileDevices.isIOS()||MobileDevices.isOperaMini()||MobileDevices.isIEMobile()}}})})(this);
define("views/position-drawer-my-research-cards-view",["jquery","views/base-view","util/constants","util/mobiledevices","components/basepopup"],function(a,b,g,c){var e={addQuoteScript:function(b){console_log("addQuoteScript");console_log(b);var c=a.trim(b.$el.find(".slide_module.positions--myresearch-bricklet-qu").find("#latestQuoteTimeStampSpan").text());if(c=c.toUpperCase())b.$el.find(".slide_module.positions--myresearch-bricklet-qu").find("h2").after('<div class="positions--drawer-aot-row"><span class="positions--drawer-as-of-time"></span></div>'),b.$el.find(".slide_module.positions--myresearch-bricklet-qu").find(".positions--drawer-as-of-time").text(c);
var c=b.$el.find(".slide_module.positions--myresearch-bricklet-qu").data("account-type"),d=b.$el.find(".slide_module.positions--myresearch-bricklet-qu").data("security-type");if(5==c&&"MUTUALFUND"==d&&(c=b.$el.find(".slide_module.positions--myresearch-bricklet-qu").find(".quote-data-tbl>a"),d=c.attr("href"))){var e=/&fundnbr=([^&"']*)/;if(e.test(d)&&(e=e.exec(d),2==e.length&&(e=e[1],null==e||""==e)))b=b.$el.find(".slide_module.positions--myresearch-bricklet-qu").data("fund-number"),d=d.replace("&fundnbr=",
"&fundnbr="+b),c.attr("href",d)}},addChartScript:function(a){console_log("addChartScript");c&&c.any&&(c.any()?a.$el.find(".slide_module.positions--myresearch-bricklet-ch").find("#chart_bricklet_bottem_link").text("Snapshot Chart"):a.$el.find(".slide_module.positions--myresearch-bricklet-ch").find("#chart_bricklet_bottem_link").text("Advanced Chart"))},addDetailsScript:function(){console_log("addDetailsScript")},addPerformanceScript:function(){console_log("addPerformanceScript")},addDistributionsScript:function(a){console_log("addDistributionsScript");
a.$("#mf-distribution-capital").hide();a.$("#mf-dividend-tab-link").click(function(b){b.preventDefault();a.$("#mf-distribution-capital").hide();a.$("#mf-distribution-dividend").show()});a.$("#mf-capital-tab-link").click(function(b){b.preventDefault();a.$("#mf-distribution-capital").show();a.$("#mf-distribution-dividend").hide()});a.$("#mf-dividend-help-link").click(function(a){showModalOverlay(a.originalEvent,"#mf-dividend-help-popup")});a.$("#mf-capital-help-link").click(function(a){showModalOverlay(a.originalEvent,
"#mf-capital-help-popup")})},addExpenseFeesScript:function(a){console_log("addExpenseFeesScript");a.$("#SBFEE").html('<a href="#" onclick="showModalOverlay(event,\'#mfExpensefeesHelp_SBFEE\');">'+a.$("#SBFEE").html()+"</a>");a.$("#EXPXCPDTD").html('<a href="#" onclick="showModalOverlay(event,\'#mfExpensefeesHelp_EXPXCPDTD\');">'+a.$("#EXPXCPDTD").html()+"</a>")},addETFScript:function(b){0<b.$("#etf-analystrating-help-popup .modal-win-body p span").length&&a(b.$("#etf-analystrating-help-popup .modal-win-body p span")[0]).css("font-weight",
"bold")}},d=a(".positions-myresearch-glossary-popup").BasePopup();window.getOverlayContent=function(b,c){var e=a(c.target||c.srcElement).closest(".js-drawer-slide-bricklet").find(b+"_content"),g=a("<div>").append(e.html()),e="#mfcategoryRiskHelp"===b?"Category Risk":g.find("h3:eq(0)").remove().text(),g=g.find(".modal-win-body").html();d.find(".positions--drawer-research-glossary-title").html(e);d.find(".base-popup--content").html(g)};window.showModalOverlay=function(b,c){var e=b.target||b.srcElement;
b.stopPropgation&&b.stopPropgation();b.preventDefault&&b.preventDefault();b.returnValue=!1;b.cancelBubble=!0;var g=a(e).closest(".js-drawer-slide-bricklet");if(0<g.length){d.css("cssText","");console_log("showModalOverlay - length of popup view = "+g.find(c).length);var l=g.find(c),g=l.hasClass("sml")?"PoinerLayer":"NonMoveLayer";d.removeClass("positions-myresearch-non-move-layer positions-myresearch-glossary");e=a(e);0<e.find(".help").length&&(e=e.find(".help"));var p=a.trim(l.find(".modal-win-title h2").text());
if((l=l.find(".modal-win-body").html())&&p)d.find(".positions--drawer-research-glossary-title").html(p),d.find(".base-popup--content").html(l);l=null;"PoinerLayer"===g?(d.addClass("positions-myresearch-glossary"),l="positions-myresearch-glossary",p=e.offset(),g=p.top+e.height(),e=p.left-d.width()/2+e.width()/2,d.css({top:g,left:e})):(d.addClass("positions-myresearch-non-move-layer"),l="positions-myresearch-non-move-layer",g=d.height()>0.9*document.body.offsetHeight?(document.body.scrollTop||document.documentElement.scrollTop)+
0.05*document.body.offsetHeight:(document.body.scrollTop||document.documentElement.scrollTop)+document.body.offsetHeight/2-d.height()/2,d.css({top:g}));d.BasePopup("open",{initiator:l});a(".js-positions-myresearch-glossary-popup .base-popup--content").scrollTop(0)}};window.changeStyleMapTypeDiv=function(b,c){var d=a(c&&(c.target||c.srcElement)).closest(".js-positions--myresearch-bricklet");0===d.length&&(d=a(document));1==b?(d.find("#equity-style-map").show(),d.find("#fixedIncome-style-map").hide(),
d.find("#equity_fbVcText").hide(),d.find("#equity_fbVcText").show()):0==b&&(d.find("#equity-style-map").hide(),d.find("#fixedIncome-style-map").show(),d.find("#fixedIncome_fbVcText").hide(),d.find("#fixedIncome_fbVcText").show())};a(document).on("click",function(b){0<a(b.target).closest(".positions-myresearch-glossary-popup").length||a(".positions-myresearch-glossary-popup").BasePopup("close")});return b.extend({events:{"click a[proxied-function-call=true]":"proxyFuncCallForAnchor"},initialize:function(){},
render:function(){return this},destory:function(){this.undelegateEvents()},setCardContent:function(b,c){b=b.replace(/getOverlayContent\((.+?)\)/g,"getOverlayContent($1, event)");var d=this;if("SM"==c){var g=[];b=b.replace(/<script>([\w\W]*?)<\/script>/g,function(a,b){g.push(b);return""});b=b.replace(/javascript\:changeStyleMapTypeDiv\((.+?)\)/g,"changeStyleMapTypeDiv($1, event)");this.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()).html(a(b).addClass("js-drawer-slide-bricklet")).find(".help").parent().css({padding:10,
margin:-10});(function(a){for(var b=0;b<g.length;b++)with(a)eval(g[b])})({$:function(){return a.fn.find.apply(d.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()),arguments)}})}else if("DT"==c)g=[],b=b.replace(/<script>([\w\W]*?)<\/script>/g,function(a,b){g.push(b);return""}),this.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()).html(a(b).addClass("js-drawer-slide-bricklet")).find(".help").parent().css({padding:10,margin:-10}),function(a){for(var b=
0;b<g.length;b++)with(a)eval(g[b])}({$:function(){return a.fn.find.apply(d.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()),arguments)}});else if("MS"==c)g=[],b=b.replace(/<script>([\w\W]*?)<\/script>/g,function(a,b){g.push(b);return""}),this.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()).html(a(b).addClass("js-drawer-slide-bricklet")).find(".help").parent().css({padding:10,margin:-10}),function(){openPopup=d.proxiedFuncCall_openPopup;for(var a=
0;a<g.length;a++)eval(g[a]);if(!window.popWinEncode&&"function"==typeof popWinEncode){var b=popWinEncode.toString(),a=b.substring(b.indexOf("(")+1,b.indexOf(")")),b=b.substring(b.indexOf("{")+1,b.length-1);window.popWinEncode=new Function(a,b)}}();else{if("BF"==c){var l=[];b=b.replace(/<script>[\s]*(sendAnalyticsTag\([\w\W]*?\);)[\s]*<\/script>/g,function(a,b){l.push(b);return""});b=b.replace(/<script>[\w\W]*?<\/script>/g,"");b=b.replace(/showModal\([\w\W]*?\)[;]?/g,"");this.$el.find(".slide_module.positions--myresearch-bricklet-"+
c.toLowerCase()).html(a(b).addClass("js-drawer-slide-bricklet")).find(".help").parent().css({padding:10,margin:-10});sendAnalyticsTag=d.sendTags;for(var p=0;p<l.length;p++){var m=Function(l[p]);m&&m()}}else{l=[];b=b.replace(/<script>[\s]*(sendAnalyticsTag\([\w\W]*?\);)[\s]*<\/script>/g,function(a,b){l.push(b);return""});b=b.replace(/<script>[\w\W]*?<\/script>/g,"");this.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()).html(a(b).addClass("js-drawer-slide-bricklet")).find(".help").parent().css({padding:10,
margin:-10});"QU"==c&&0<this.$(".quote-data-tbl.js-drawer-slide-bricklet").length?e.addQuoteScript(this):"CH"==c&&0<this.$(".chart-bricklet.js-drawer-slide-bricklet").length?e.addChartScript(this):"DT"==c&&0<this.$(".details.js-drawer-slide-bricklet").length?e.addDetailsScript(this):"PM"==c&&0<this.$(".performance.js-drawer-slide-bricklet").length?e.addPerformanceScript(this):"DI"==c&&0<this.$(".mf-distribution-data-tbl.js-drawer-slide-bricklet").length?e.addDistributionsScript(this):"EF"==c&&0<this.$(".expensefees.js-drawer-slide-bricklet").length?
e.addExpenseFeesScript(this):"TP"==c&&0<this.$(".topHoldings.js-drawer-slide-bricklet").length||"FC"==c&&0<this.$(".mf-fi-data-tbl.js-drawer-slide-bricklet").length||"AR"==c&&0<this.$(".analyst-data-tbl.js-drawer-slide-bricklet").length&&e.addETFScript(this);sendAnalyticsTag=d.sendTags;for(p=0;p<l.length;p++)(m=Function(l[p]))&&m()}l=[]}this.$("#chartImage").load(function(){a(this).trigger("updateSizes")});this.$el.find(".slide_module.positions--myresearch-bricklet-"+c.toLowerCase()+" a").each(function(b,
c){var e=a(c),f=e.attr("href");(f=d._getFunctionCallFromJavascriptProtocol(f))&&0<f.length&&e.attr("proxied-function-call","true")})},_getFunctionCallFromJavascriptProtocol:function(b){if(0===b.indexOf("javascript:"))return a.trim(b.substring(11)).split(";").filter(function(a){return""!=a&&0!==a.indexOf("void(")})},proxyFuncCallForAnchor:function(b){var c=this,d=a(b.currentTarget);c._getFunctionCallFromJavascriptProtocol(d.attr("href")).forEach(function(a){var e=a.substring(0,a.indexOf("("));if("sendAnalyticsTag"===
e||"window.sendTimeframeAnalyticsTag"===e)(e=Function(a))&&e();else if(c["proxiedFuncCall_"+e]&&e.match(/^\s*[$_A-Za-z][$_A-Za-z0-9]*\s*$/)){b.preventDefault();a="(function(){return Array.prototype.slice.call(arguments, 0)})"+a.substring(a.indexOf("("));a=eval(a);if(""===a[0]){var g=d.closest(".drawer_content").data("eresearch-security-type");0!==g.length&&"MUTUALFUND"===g&&(g=envMap.FUNDRESEARCH_URL+"/mutual-funds/summary/"+d.closest(".content-row").prev().data("cusip"),a[0]=g)}c["proxiedFuncCall_"+
e]&&c["proxiedFuncCall_"+e].apply(c,a)}})},proxiedFuncCall_changeTimeframe:function(b){var c=this;if(!window.sendTimeframeAnalyticsTag||"function"!==typeof window.sendTimeframeAnalyticsTag)window.sendTimeframeAnalyticsTag=c.sendTags;this.$("#chartTimeFrame li").each(function(){var d=a(this);d.attr("label")==b?(d.html("<strong>"+b+"</strong>"),c.$("#chartImage").attr("src",d.attr("src")),c.$("#chartImage").attr("alt",d.attr("altValue")),c.$("#chartImage").attr("title",d.attr("altValue"))):d.html('<a proxied-function-call="true" href="javascript:changeTimeframe(\''+
d.attr("label")+"');window.sendTimeframeAnalyticsTag('click', 'timeframe"+d.attr("label")+"');\">"+d.attr("label")+"</a>")})},proxiedFuncCall_showPageInParentWindow:function(a){document.location.href=a},proxiedFuncCall_openPopup:function(a){var b=455,c=250,d=20,e=40,g="scrollbars=yes";5==arguments.length&&(c=arguments[1],b=arguments[2],d=arguments[3],e=arguments[4],g="scrollbars=no",800>=screen.width&&(e=19,d=309));3==arguments.length&&(c=arguments[1],b=arguments[2]);window.open(a,"infowindow","width="+
c+",height="+b+",left="+d+",top="+e+",location=no,resizable=yes,menubar=no,status=no,toolbar=no,"+g)},proxiedFuncCall_showAdditionalImpInfo:function(){this.$el.closest(".magicgrid--drawer-content-wrapper").find(".additional-info-button").trigger("click")},proxiedFuncCall_showAdvancedChartPage:function(a,b){c.any()?this.proxiedFuncCall_showPageInParentWindow(b):this.proxiedFuncCall_showPageInParentWindow(a)},sendTags:function(a,b){if(window.trackAnalyticsEvent&&"function"===typeof window.trackAnalyticsEvent){var c=
{app:"Positions-Drawer"};c.event=a;c.context=b;window.trackAnalyticsEvent(c)}}})});
define("views/position-drawer-detail-view",["jquery","views/base-view","views/position-drawer-my-research-cards-view"],function(a,b,g){return b.extend({remove:function(){this.$el.children().remove();b.remove.call(this)},destroy:function(){this.remove();this.undelegateEvents()},initialize:function(b){var e={},e="";this.drawerContainer=(b||{}).drawerContainer;var d=this;a(this.drawerContainer).find(".magicgrid--drawer-carousel-content");b=a(this.drawerContainer).find("td.magicgrid--drawer");0<b.length&&
(e=b.data("json-views"),b.data("json-trade"),e=e.researchCards);if(e){var h=e.split(",");b=this.$(".magicgrid--drawer-carousel-content");var f=new g({el:b});this.drawerContainer.on("carouselitemvisibilitychanged",function(b){var c=b=b.items;c.removeClass("last-show").last().addClass("last-show");c.find(".slide_module").removeClass("first-module").eq(0).addClass("first-module");var c=c.add(b.parent().children().last()),c=c.add(b.next().last()),e=[];c.each(function(b,c){a(c).find(".slide_module");var d=
a(c).data("card-url"),g=a(c).data("card-name");a(c).data("loaded")||(a(c).data("loaded",!0),e.push(a.ajax({type:"GET",url:d,dataType:"text",success:function(a){f.setCardContent(a,g)}})))});a.when.apply(a,e).always(function(){d.$el.trigger(a.Event("ViewDataLoaded",{view:d,viewName:"position-drawer-detail-view",drawerContainer:d.drawerContainer}));d.drawerContainer.find(".magicgrid--carousel-min-height").removeClass("magicgrid--carousel-min-height");a(document).trigger("redrawPositions")});b.length<=
h.length?b.addClass("limit-width"):b.removeClass("limit-width")})}else a(document).trigger("redrawPositions")}})});
define("views/position-drawer-lots-view",["jquery","views/base-view"],function(a,b){return b.extend({events:{"click .position--help-icon":"showSymbolInformation","click .lots-pagination--next":"showPaginationLots","click .lots-pagination--previous":"showPaginationLots"},remove:function(){this.$el.children().remove();b.remove.call(this)},destroy:function(){this.remove();this.undelegateEvents()},initialize:function(a){this.drawerContainer=(a||{}).drawerContainer},showSymbolInformation:function(b){b.preventDefault();
b.stopPropagation();var c=a(b.currentTarget);this._adjustIconPosition(c);c.hasClass("position--help-active")?this.hideSymbolInformantion(b):(this.$(".position--help-icon").removeClass("position--help-active"),c.addClass("position--help-active"))},showPaginationLots:function(b){b.preventDefault();var c=a(b.currentTarget).closest(".content-row"),e=a(b.currentTarget).hasClass("lots-pagination--next");b=a(b.currentTarget).hasClass("lots-pagination--previous");var d=a(".lots-pagination",c),h=a(".lots-pagination--next",
d).data("next-page"),d=a(".lots-pagination--previous",d).data("prev-page");this.getLots(c,{isPagination:!0,isNextPage:e,isPervPage:b,nextPage:h,prevPage:d});c[0].scrollIntoView()},_adjustIconPosition:function(a){var b=a.position(),e=a.find(".position--tooltip-bubble");parseInt(e.css("top"));var d=e.width()-16,d=b.left-5>d?d:b.left-5;a.find(".position--pointer-up").css("left",0<d?d:0);e.css({top:b.top+26})},hideSymbolInformantion:function(b){b=a(b.target);!b.closest(".position--tooltip-bubble").length&&
!b.hasClass(".position--tooltip-bubble")&&a(".position--help-icon").removeClass("position--help-active")},getLots:function(b,c){var e=this,d="",h={},d=a(".magicgrid--drawer-content-wrapper",b);c=c||{};var f=c.isPagination,j=c.isNextPage,k=c.isPervPage,l=c.nextPage,p=c.prevPage;a("#positions-tabs-panel-research",d).removeClass("tabs--container-visible");a("#positions-tabs-panel-lots",d).addClass("tabs--container-visible");var m=a(".positions--lots>.positions--lots-content",d),d=a(this.drawerContainer).find("td.magicgrid--drawer");
0<d.length&&(h=d.data("json-views"));d=h.lotsURL1;(h.accLinked2StockPlans||h.isAnnuityPlanLots)&&0<d.length&&m.find(".positions--lots-viewLotsInClassic a").attr("href",h.lotsURL1);if(!(0<m.text().replace(/\s/g,"").length)||f)0<d.length?(m.html("Loading..."),h=a(".drawer",b).height(),b.hasClass("content-row")?b.find(".content-anchor").height(h):b.hasClass("drawer_row")&&b.find(".drawer_anchor").height(h+18),h="/ftgw/fbc/ofpositions/snippet/paginateOpenLots?"+d,a.ajax({url:j?h+("&ITEM="+l):k?h+("&ITEM="+
p):h+"&ITEM=1",dataType:"html",type:"GET",xhrFields:{withCredentials:!0},data:{},success:function(c){""==c&&(c="Fidelity is unable to provide the information requested at this time.");m.html(c);e.$el.trigger(a.Event("ViewDataLoaded",{view:e,viewName:"drawer-detail-quote-view",drawerContainer:b}))},error:function(){m.html("Fidelity is unable to provide the information requested at this time.")},complete:function(){a(document).trigger("redrawPositions")}})):(m.html("Fidelity is unable to provide the information requested at this time."),
a(document).trigger("redrawPositions"))}})});
define("views/position-drawer-notification-view",["jquery","views/base-view","components/fidtab"],function(a,b){return b.extend({events:{"open .simple-tabs--wrapper":"openNotificationTab"},initialize:function(){},openNotificationTab:function(b){if(0<b.$tab.find("#positions-tabs-notifications").length){var c=this.$(".js-htb-notification-list-item");c.data("loaded")?a(document).trigger("redrawPositions"):(c.data("loaded",!0),b=c.data("service-url"),a.ajax({type:"GET",url:b,dataType:"text",success:function(b){b&&
(0<=b.indexOf("This position is considered hard to borrow.")?(b=a.trim(b),c.find(".js-htb-text").text(b)):c.find(".js-htb-text").text(""))},error:function(){c.find(".js-htb-text").text("")},complete:function(){a(document).trigger("redrawPositions")}}))}}})});
define("views/legal-footnote-view",["jquery","views/base-view","util/constants"],function(a,b){return b.extend({events:{"click .additional-info-link":"popTradeAdditionalInfo","click .additional-info-close":"hideTradeAdditionalInfo","click .drwer_additional_info_close":"hideAdditionalInfo","click .additional_link":"toggleFootNote"},destory:function(){this.undelegateEvents()},toggleFootNote:function(){a(".additional_info_content",this.$el).is(":visible")?(a(".additional_info_content",this.$el).hide(),
a(".click_symbol",this.$el).text("+")):(a(".additional_info_content",this.$el).show(),a(".click_symbol",this.$el).text("-"))},hideAdditionalInfo:function(b){a(b.currentTarget).closest(".magicgrid--drawer").find(".drwer_additional_info").hide();b.preventDefault();a(".click_symbol",this.$el).text("+");return!1},popTradeAdditionalInfo:function(b){var c="";switch(a(b.currentTarget).data("order-type")){case "E":c="/ftgw/fbc/oftrade/snippet/quickTradeStockAdditionalInfo";break;case "M":c="/ftgw/fbc/oftrade/snippet/quickTradeMFAdditionalInfo";
break;case "O":c="/ftgw/fbc/oftrade/snippet/quickTradeOptionAdditionalInfo";break;default:c="/ftgw/fbc/oftrade/snippet/quickTradeStockAdditionalInfo"}window.open(c,"AdditionalInformation","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable=yes,left=10,top=10,height=480,width=450,fullscreen=no")},hideTradeAdditionalInfo:function(b){var c=a(".additional-info-popup");c.hide();c.find(".additional-info-cotent").hide();a(".unfold-symbol",this.$el).removeClass("expand-status");b&&b.preventDefault&&
b.preventDefault();return!1}})});
(function(a){"function"===typeof define&&define.amd&&define.amd.jQuery?define("jqueryTouchSwipe",["jquery"],a):a(jQuery)})(function(a){function b(b){if(b&&void 0===b.allowPageScroll&&(void 0!==b.swipe||void 0!==b.swipeStatus))b.allowPageScroll=k;void 0!==b.click&&void 0===b.tap&&(b.tap=b.click);b||(b={});b=a.extend({},a.fn.swipe.defaults,b);return this.each(function(){var c=a(this),d=c.data(J);d||(d=new g(this,b),c.data(J,d))})}function g(b,g){function N(b){if(!0!==ma.data(J+"_intouch")&&!(0<a(b.target).closest(g.excludedElements,
ma).length)){var f=b.originalEvent?b.originalEvent:b,j,k=S?f.touches[0]:f;aa=D;S?L=f.touches.length:b.preventDefault();na=0;ra=oa=null;qa=ia=T=0;ja=1;Ka=0;b=[];for(var l=0;5>=l;l++)b.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});wa=b;b={};b[c]=Va(c);b[e]=Va(e);b[d]=Va(d);b[h]=Va(h);Fa=b;ya=Ma=0;if(!S||L===g.fingers||g.fingers===w||F()){if(sa(0,k),E=cb(),2==L&&(sa(1,f.touches[1]),ia=qa=za(wa[0].start,wa[1].start)),g.swipeStatus||g.pinchStatus)j=ea(f,aa)}else j=!1;if(!1===j)return aa=I,ea(f,aa),
j;Y(!0);return null}}function P(b){var m,n,p,r=b.originalEvent?b.originalEvent:b;if(!(aa===B||aa===I||q())){var s,z=Ca(S?r.touches[0]:r);Ea=cb();S&&(L=r.touches.length);aa=y;2==L&&(0==ia?(sa(1,r.touches[1]),ia=qa=za(wa[0].start,wa[1].start)):(Ca(r.touches[1]),qa=za(wa[0].end,wa[1].end),ra=1>ja?j:f),ja=(1*(qa/ia)).toFixed(2),Ka=Math.abs(ia-qa));if(L===g.fingers||g.fingers===w||!S||F()){m=z.start;n=z.end;m=Math.atan2(n.y-m.y,m.x-n.x);m=Math.round(180*m/Math.PI);0>m&&(m=360-Math.abs(m));m=oa=45>=m&&
0<=m?c:360>=m&&315<=m?c:135<=m&&225>=m?e:45<m&&135>m?h:d;if(g.allowPageScroll===k||F())b.preventDefault();else switch(n=g.allowPageScroll===l,m){case c:(g.swipeLeft&&n||!n&&g.allowPageScroll!=v)&&b.preventDefault();break;case e:(g.swipeRight&&n||!n&&g.allowPageScroll!=v)&&b.preventDefault();break;case d:(g.swipeUp&&n||!n&&g.allowPageScroll!=A)&&b.preventDefault();break;case h:(g.swipeDown&&n||!n&&g.allowPageScroll!=A)&&b.preventDefault()}na=Math.round(Math.sqrt(Math.pow(z.end.x-z.start.x,2)+Math.pow(z.end.y-
z.start.y,2)));T=Ea-E;b=oa;m=na;m=Math.max(m,Aa(b));Fa[b].distance=m;if(g.swipeStatus||g.pinchStatus)s=ea(r,aa);if(!g.triggerOnTouchEnd||g.triggerOnTouchLeave){b=!0;if(g.triggerOnTouchLeave){p=a(this);var D=p.offset();b=D.left;m=D.left+p.outerWidth();n=D.top;p=D.top+p.outerHeight();b=z.end.x>b&&z.end.x<m&&z.end.y>n&&z.end.y<p}!g.triggerOnTouchEnd&&b?aa=Z(y):g.triggerOnTouchLeave&&!b&&(aa=Z(B));(aa==I||aa==B)&&ea(r,aa)}}else aa=I,ea(r,aa);!1===s&&(aa=I,ea(r,aa))}}function U(a){var b=a.originalEvent;
if(S&&0<b.touches.length)return Ma=cb(),ya=event.touches.length+1,!0;q()&&(L=ya);a.preventDefault();Ea=cb();T=Ea-E;H()?(aa=I,ea(b,aa)):g.triggerOnTouchEnd||!1==g.triggerOnTouchEnd&&aa===y?(aa=B,ea(b,aa)):!g.triggerOnTouchEnd&&g.tap?(aa=B,la(b,aa,n)):aa===y&&(aa=I,ea(b,aa));Y(!1);return null}function W(){qa=ia=E=Ea=L=0;ja=1;ya=Ma=0;Y(!1)}function ca(a){a=a.originalEvent;g.triggerOnTouchLeave&&(aa=Z(B),ea(a,aa))}function R(){ma.unbind(tb,N);ma.unbind(ka,W);ma.unbind(db,P);ma.unbind(Sa,U);Ha&&ma.unbind(Ha,
ca);Y(!1)}function Z(a){var b=a,c=g.maxTimeThreshold?T>=g.maxTimeThreshold?!1:!0:!0,d=va(),e=H();!c||e?b=I:d&&a==y&&(!g.triggerOnTouchEnd||g.triggerOnTouchLeave)?b=B:!d&&(a==B&&g.triggerOnTouchLeave)&&(b=I);return b}function ea(a,b){var c=void 0;if(Ba()&&X()||X())c=la(a,b,p);else if((M()&&F()||F())&&!1!==c)c=la(a,b,m);ta()&&g.doubleTap&&!1!==c?c=la(a,b,r):T>g.longTapThreshold&&na<z&&g.longTap&&!1!==c?c=la(a,b,s):(1===L||!S)&&(isNaN(na)||0===na)&&g.tap&&!1!==c&&(c=la(a,b,n));b===I&&W(a);b===B&&(S?
0==a.touches.length&&W(a):W(a));return c}function la(b,k,l){var q=void 0;if(l==p){ma.trigger("swipeStatus",[k,oa||null,na||0,T||0,L]);if(g.swipeStatus&&(q=g.swipeStatus.call(ma,b,k,oa||null,na||0,T||0,L),!1===q))return!1;if(k==B&&Ba()){ma.trigger("swipe",[oa,na,T,L]);if(g.swipe&&(q=g.swipe.call(ma,b,oa,na,T,L),!1===q))return!1;switch(oa){case c:ma.trigger("swipeLeft",[oa,na,T,L]);g.swipeLeft&&(q=g.swipeLeft.call(ma,b,oa,na,T,L));break;case e:ma.trigger("swipeRight",[oa,na,T,L]);g.swipeRight&&(q=g.swipeRight.call(ma,
b,oa,na,T,L));break;case d:ma.trigger("swipeUp",[oa,na,T,L]);g.swipeUp&&(q=g.swipeUp.call(ma,b,oa,na,T,L));break;case h:ma.trigger("swipeDown",[oa,na,T,L]),g.swipeDown&&(q=g.swipeDown.call(ma,b,oa,na,T,L))}}}if(l==m){ma.trigger("pinchStatus",[k,ra||null,Ka||0,T||0,L,ja]);if(g.pinchStatus&&(q=g.pinchStatus.call(ma,b,k,ra||null,Ka||0,T||0,L,ja),!1===q))return!1;if(k==B&&M())switch(ra){case f:ma.trigger("pinchIn",[ra||null,Ka||0,T||0,L,ja]);g.pinchIn&&(q=g.pinchIn.call(ma,b,ra||null,Ka||0,T||0,L,ja));
break;case j:ma.trigger("pinchOut",[ra||null,Ka||0,T||0,L,ja]),g.pinchOut&&(q=g.pinchOut.call(ma,b,ra||null,Ka||0,T||0,L,ja))}}if(l==n){if(k===I||k===B)clearTimeout(Q),g.doubleTap&&!ta()?(pa=cb(),Q=setTimeout(a.proxy(function(){pa=null;ma.trigger("tap",[b.target]);g.tap&&(q=g.tap.call(ma,b,b.target))},this),g.doubleTapThreshold)):(pa=null,ma.trigger("tap",[b.target]),g.tap&&(q=g.tap.call(ma,b,b.target)))}else if(l==r){if(k===I||k===B)clearTimeout(Q),pa=null,ma.trigger("doubletap",[b.target]),g.doubleTap&&
(q=g.doubleTap.call(ma,b,b.target))}else if(l==s&&(k===I||k===B))clearTimeout(Q),pa=null,ma.trigger("longtap",[b.target]),g.longTap&&(q=g.longTap.call(ma,b,b.target));return q}function va(){var a=!0;null!==g.threshold&&(a=na>=g.threshold);return a}function H(){var a=!1;null!==g.cancelThreshold&&null!==oa&&(a=Aa(oa)-na>=g.cancelThreshold);return a}function M(){var a=L===g.fingers||g.fingers===w||!S,b=0!==wa[0].end.x,c;c=null!==g.pinchThreshold?Ka>=g.pinchThreshold:!0;return a&&b&&c}function F(){return!(!g.pinchStatus&&
!g.pinchIn&&!g.pinchOut)}function Ba(){var a=g.maxTimeThreshold?T>=g.maxTimeThreshold?!1:!0:!0,b=va(),c=L===g.fingers||g.fingers===w||!S,d=0!==wa[0].end.x;return!H()&&d&&c&&b&&a}function X(){return!(!g.swipe&&!g.swipeStatus&&!g.swipeLeft&&!g.swipeRight&&!g.swipeUp&&!g.swipeDown)}function ta(){if(null==pa)return!1;var a=cb();return!!g.doubleTap&&a-pa<=g.doubleTapThreshold}function q(){var a=!1;Ma&&cb()-Ma<=g.fingerReleaseThreshold&&(a=!0);return a}function Y(a){!0===a?(ma.bind(db,P),ma.bind(Sa,U),
Ha&&ma.bind(Ha,ca)):(ma.unbind(db,P,!1),ma.unbind(Sa,U,!1),Ha&&ma.unbind(Ha,ca,!1));ma.data(J+"_intouch",!0===a)}function sa(a,b){wa[a].identifier=void 0!==b.identifier?b.identifier:0;wa[a].start.x=wa[a].end.x=b.pageX||b.clientX;wa[a].start.y=wa[a].end.y=b.pageY||b.clientY;return wa[a]}function Ca(a){var b=void 0!==a.identifier?a.identifier:0;a:{for(var c=0;c<wa.length;c++)if(wa[c].identifier==b){b=wa[c];break a}b=void 0}b.end.x=a.pageX||a.clientX;b.end.y=a.pageY||a.clientY;return b}function Aa(a){if(Fa[a])return Fa[a].distance}
function Va(a){return{direction:a,distance:0}}function za(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function cb(){return(new Date).getTime()}var Na=S||!g.fallbackToMouseEvents,tb=Na?"touchstart":"mousedown",db=Na?"touchmove":"mousemove",Sa=Na?"touchend":"mouseup",Ha=Na?null:"mouseleave",ka="touchcancel",na=0,oa=null,T=0,ia=0,qa=0,ja=1,Ka=0,ra=0,Fa=null,ma=a(b),aa="start",L=0,wa=null,E=0,Ea=0,Ma=0,ya=0,pa=0,Q=null;try{ma.bind(tb,N),ma.bind(ka,W)}catch(Db){a.error("events not supported "+
tb+","+ka+" on jQuery.swipe")}this.enable=function(){ma.bind(tb,N);ma.bind(ka,W);return ma};this.disable=function(){R();return ma};this.destroy=function(){R();ma.data(J,null);return ma};this.option=function(b,c){if(void 0!==g[b]){if(void 0===c)return g[b];g[b]=c}else a.error("Option "+b+" does not exist on jQuery.swipe.options");return null}}var c="left",e="right",d="up",h="down",f="in",j="out",k="none",l="auto",p="swipe",m="pinch",n="tap",r="doubletap",s="longtap",v="horizontal",A="vertical",w="all",
z=10,D="start",y="move",B="end",I="cancel",S="ontouchstart"in window,J="TouchSwipe";a.fn.swipe=function(c){var d=a(this),e=d.data(J);if(e&&"string"===typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!e&&("object"===typeof c||!c))return b.apply(this,arguments);return d};a.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,
doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};a.fn.swipe.phases={PHASE_START:D,PHASE_MOVE:y,PHASE_END:B,PHASE_CANCEL:I};a.fn.swipe.directions={LEFT:c,RIGHT:e,UP:d,DOWN:h,IN:f,OUT:j};
a.fn.swipe.pageScroll={NONE:k,HORIZONTAL:v,VERTICAL:A,AUTO:l};a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:w}});
(function(a){function b(b){var c=b||window.event,g=[].slice.call(arguments,1),f=0,j=0,k=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(f=c.wheelDelta/120),c.detail&&(f=-c.detail/3),k=f,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(k=0,j=-1*f),void 0!==c.wheelDeltaY&&(k=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(j=-1*c.wheelDeltaX/120),g.unshift(b,f,j,k),(a.event.dispatch||a.event.handle).apply(this,g)}var g=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=g.length;c;)a.event.fixHooks[g[--c]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=g.length;a;)this.addEventListener(g[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=g.length;a;)this.removeEventListener(g[--a],b,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
define("mousewheel",function(){});
(function(a){function b(a,b,c){"transition"==c.transition&&"swing"==b&&(b="ease");return{anims:[],duration:a,orgDuration:a,easing:b,startTime:Fa()}}function g(a,b){for(var c=0,d=a.anims.length;c<d;c++){var e=a.anims[c];if(e)e[0][b.transition](e[1],a.duration,a.easing,e[2])}}function c(a,b){ja(b)||(b=!0);oa(a.pre)&&c(a.pre,b);for(var d=0,e=a.anims.length;d<e;d++){var f=a.anims[d];f[0].stop(!0);if(b&&(f[0].css(f[1]),qa(f[2])))f[2]()}oa(a.post)&&c(a.post,b)}function e(a,b,c){b&&b.remove();switch(c.fx){case "fade":case "crossfade":case "cover-fade":case "uncover-fade":a.css("opacity",
1),a.css("filter","")}}function d(a,b,c,d,e){b[c]&&b[c].call(a,d);if(e[c].length){b=0;for(var f=e[c].length;b<f;b++)e[c][b].call(a,d)}return[]}function h(a,b,c){b.length&&(a.trigger(F(b[0][0],c),b[0][1]),b.shift());return b}function f(b){b.each(function(){var b=a(this);b.data("_cfs_isHidden",b.is(":hidden")).hide()})}function j(b){b&&b.each(function(){var b=a(this);b.data("_cfs_isHidden")||b.show()})}function k(a){a.auto&&clearTimeout(a.auto);a.progress&&clearInterval(a.progress);return a}function l(a,
b,c,d,e,f,g){return{width:g.width,height:g.height,items:{old:a,skipped:b,visible:c},scroll:{items:d,direction:e,duration:f}}}function p(a,b,c,d){var e=a.duration;if("none"==a.fx)return 0;"auto"==e?e=b.scroll.duration/b.scroll.items*c:10>e&&(e=d/e);if(1>e)return 0;"fade"==a.fx&&(e/=2);return Math.round(e)}function m(a,b,c){var d=T(a.items.minimum)?a.items.minimum:a.items.visible+1;"show"==b||"hide"==b||(d>b?(aa(c,"Not enough items ("+b+" total, "+d+" needed): Hiding navigation."),b="hide"):b="show");
d="show"==b?"removeClass":"addClass";c=Ba("hidden",c);if(a.auto.button)a.auto.button[b]()[d](c);if(a.prev.button)a.prev.button[b]()[d](c);if(a.next.button)a.next.button[b]()[d](c);if(a.pagination.container)a.pagination.container[b]()[d](c)}function n(a,b,c){if(!a.circular&&!a.infinite){var d="removeClass"==b||"addClass"==b?b:!1;c=Ba("disabled",c);if(a.auto.button&&d)a.auto.button[d](c);if(a.prev.button)a.prev.button[d||0==b?"addClass":"removeClass"](c);a.next.button&&(b=d||b==a.items.visible?"addClass":
"removeClass",a.next.button[b](c))}}function r(a,b){qa(b)?b=b.call(a):Ha(b)&&(b={});return b}function s(b,c){c=r(b,c);if(ia(c)){var d=za(c);c=-1==d?a(c):d}return c}function v(a,b){b=s(a,b);na(b)?b={button:b}:T(b)&&(b={key:b});return b}function A(b,c){qa(c.button)&&(c.button=c.button.call(b));ia(c.button)&&(c.button=a(c.button));ia(c.key)&&(c.key=za(c.key));return c}function w(b,c,d,e,f){ia(b)&&(b=a(b,f));oa(b)&&(b=a(b,f));na(b)?(b=f.children().index(b),ja(d)||(d=!1)):ja(d)||(d=!0);T(b)||(b=0);T(c)||
(c=0);d&&(b+=e.first);b+=c;if(0<e.total){for(;b>=e.total;)b-=e.total;for(;0>b;)b+=e.total}return b}function z(a,b,c){for(var d=0,e=0;0<=c;c--){var f=a.eq(c),d=d+(f.is(":visible")?f[b.d.outerWidth](!0):0);if(d>b.maxDimension)return e;0==c&&(c=a.length);e++}}function D(a,b,c,d){for(var e=0,f=0,g=a.length;0<=d;d--){f++;if(f==g||a.eq(d).is(b)&&(e++,e==c))return f;0==d&&(d=g)}}function y(a,b){return b.items.visibleConf.org||a.children().slice(0,b.items.visible).filter(b.items.filter).length}function B(a,
b,c){for(var d=0,e=0,f=a.length-1;c<=f;c++){var g=a.eq(c),d=d+(g.is(":visible")?g[b.d.outerWidth](!0):0);if(d>b.maxDimension)return e;e++;if(e==f+1)return e;c==f&&(c=-1)}}function I(a,b,c,d){a=B(a,b,c);b.circular||c+a>d&&(a=d-c);return a}function S(a,b,c){return J(a,b.items.filter,b.items.visibleConf.org,c,b.circular)}function J(a,b,c,d){for(var e=0,f=0,g=a.length-1;d<=g;d++){f++;if(f>=g||a.eq(d).is(b)&&(e++,e==c))return f;d==g&&(d=-1)}}function O(a,b){return a.slice(0,b.items.visible)}function V(b,
c,d){c.usePadding&&(ia(d)||(d="_cfs_origCssMargin"),b.each(function(){var b=a(this),e=parseInt(b.css(c.d.marginRight),10);T(e)||(e=0);b.data(d,e)}))}function N(b,c,d){if(c.usePadding){var e=ja(d)?d:!1;T(d)||(d=0);V(b,c,"_cfs_tempCssMargin");b.each(function(){var b=a(this);b.css(c.d.marginRight,e?b.data("_cfs_tempCssMargin"):d+b.data("_cfs_origCssMargin"))})}}function P(b){b.each(function(){var b=a(this);b.data("_cfs_origCss",b.attr("style")||"")})}function U(b){b.each(function(){var b=a(this);b.attr("style",
b.data("_cfs_origCss")||"")})}function W(b,c){var d=b.items[b.d.width],e=b[b.d.height],f=ra(e);1>d||c.each(function(){var c=a(this),g=d-(c[b.d.outerWidth](!0)-c[b.d.width]());c[b.d.width](g);if(f)c[b.d.height](M(g,e))})}function ca(a,b){var c=a.parent(),d=a.children(),e=O(d,b),f=X(R(e,b,!0),b,!1),g=c.is(":visible");if(1>f.width||1>f.height)return f;c.css(f);if(b.usePadding){var j=b.padding,h=j[b.d[1]];b.align&&0>h&&(h=0);var k=e.last();k.css(b.d.marginRight,k.data("_cfs_origCssMargin")+h);a.css(b.d.top,
j[b.d[0]]);a.css(b.d.left,j[b.d[3]])}a.css(b.d.width,f[b.d.width]+2*la(d,b,"width"));a.css(b.d.height,Z(d,b,"height"));!g&&c.is(":visible")&&(f=X(R(e,b,!0),b,!1),c.css(f));return f}function R(a,b,c){return[la(a,b,"width",c),Z(a,b,"height",c)]}function Z(a,b,c,d){ja(d)||(d=!1);if(T(b[b.d[c]])&&d)return b[b.d[c]];if(T(b.items[b.d[c]]))return b.items[b.d[c]];c=-1<c.toLowerCase().indexOf("width")?"outerWidth":"outerHeight";return ea(a,b,c)}function ea(a,b,c){for(var d=0,e=0,f=a.length;e<f;e++){var g=
a.eq(e),g=g.is(":visible")?g[b.d[c]](!0):0;d<g&&(d=g)}return d}function la(a,b,c,d){ja(d)||(d=!1);if(T(b[b.d[c]])&&d)return b[b.d[c]];if(T(b.items[b.d[c]]))return b.items[b.d[c]]*a.length;c=-1<c.toLowerCase().indexOf("width")?"outerWidth":"outerHeight";for(var e=d=0,f=a.length;e<f;e++){var g=a.eq(e);d+=g.is(":visible")?g[b.d[c]](!0):0}return d}function va(a,b,c){var d=a.is(":visible");d&&a.hide();b=a.parent()[b.d[c]]();d&&a.show();return b}function H(a,b,c){for(var d=!1,e=!1,f=0,g=a.length;f<g;f++){var j=
a.eq(f),j=j.is(":visible")?j[b.d[c]](!0):0;!1===d?d=j:d!=j&&(e=!0);0==d&&(e=!0)}return e}function M(a,b){if(ra(b)){b=parseInt(b.slice(0,-1),10);if(!T(b))return a;a*=b/100}return a}function F(a,b,c,d,e){e=!1;ja(c)||(c=!0);ja(d)||(d=!0);ja(e)||(e=!1);c&&(a=b.events.prefix+a);d&&(a=a+"."+b.events.namespace);d&&e&&(a+=b.serialNumber);return a}function Ba(a,b){return ia(b.classnames[a])?b.classnames[a]:a}function X(a,b,c){ja(c)||(c=!0);c=b.usePadding&&c?b.padding:[0,0,0,0];var d={};d[b.d.width]=a[0]+c[1]+
c[3];d[b.d.height]=a[1]+c[0]+c[2];return d}function ta(a,b){for(var c=[],d=0,e=a.length;d<e;d++)for(var f=0,g=b.length;f<g;f++)if(-1<b[f].indexOf(typeof a[d])&&Ha(c[f])){c[f]=a[d];break}return c}function q(a){if(Ha(a))return[0,0,0,0];if(T(a))return[a,a,a,a];ia(a)&&(a=a.split("px").join("").split("em").join("").split(" "));if(!ka(a))return[0,0,0,0];for(var b=0;4>b;b++)a[b]=parseInt(a[b],10);switch(a.length){case 0:return[0,0,0,0];case 1:return[a[0],a[0],a[0],a[0]];case 2:return[a[0],a[1],a[0],a[1]];
case 3:return[a[0],a[1],a[2],a[1]];default:return[a[0],a[1],a[2],a[3]]}}function Y(a,b){var c=T(b[b.d.width])?Math.ceil(b[b.d.width]-la(a,b,"width")):0;switch(b.align){case "left":return[0,c];case "right":return[c,0];default:return[Math.ceil(c/2),Math.floor(c/2)]}}function sa(a,b,c,d){b=a;if(qa(c))b=c.call(d,b);else if(ia(c)){b=c.split("+");var e=c.split("-");e.length>b.length?(c=!0,d=e[0],e=e[1]):(c=!1,d=b[0],e=b[1]);switch(d){case "even":b=1==a%2?a-1:a;break;case "odd":b=0==a%2?a-1:a;break;default:b=
a}e=parseInt(e,10);T(e)&&(c&&(e=-e),b+=e)}if(!T(b)||1>b)b=1;return b}function Ca(a,b,c,d){return Aa(sa(a,b,c,d),b.items.visibleConf)}function Aa(a,b){T(b.min)&&a<b.min&&(a=b.min);T(b.max)&&a>b.max&&(a=b.max);1>a&&(a=1);return a}function Va(b){ka(b)||(b=[[b]]);ka(b[0])||(b=[b]);for(var c=0,d=b.length;c<d;c++)ia(b[c][0])&&(b[c][0]=a(b[c][0])),ja(b[c][1])||(b[c][1]=!0),ja(b[c][2])||(b[c][2]=!0),T(b[c][3])||(b[c][3]=0);return b}function za(a){return"right"==a?39:"left"==a?37:"up"==a?38:"down"==a?40:-1}
function cb(b,c,d){b&&(c=c.triggerHandler(F("currentPosition",d)),a.fn.carouFredSel.cookie.set(b,c))}function Na(b){b=a.fn.carouFredSel.cookie.get(b);return""==b?0:b}function tb(a,b){var c=Y(O(b,a),a);a.padding[a.d[1]]=c[1];a.padding[a.d[3]]=c[0];return a}function db(a,b){var c=Aa(Math.floor(a[a.d.width]/a.items[a.d.width]),a.items.visibleConf);c>b.length&&(c=b.length);var d=Math.floor(a[a.d.width]/c);a.items.visible=c;a.items[a.d.width]=d;a[a.d.width]=c*d;return a}function Sa(a){if(ia(a)){var b=
-1<a.indexOf("immediate")?!0:!1;a=-1<a.indexOf("resume")?!0:!1}else b=a=!1;return[b,a]}function Ha(a){return null===a||"undefined"==typeof a||""===a||"undefined"===a}function ka(a){return a instanceof Array}function na(a){return a instanceof jQuery}function oa(a){return(a instanceof Object||"object"==typeof a)&&null!==a&&!na(a)&&!ka(a)&&!qa(a)}function T(a){return(a instanceof Number||"number"==typeof a)&&!isNaN(a)}function ia(a){return(a instanceof String||"string"==typeof a)&&!Ha(a)&&!Ka(a)&&!(!1===
a||"false"===a)}function qa(a){return a instanceof Function||"function"==typeof a}function ja(a){return a instanceof Boolean||"boolean"==typeof a||Ka(a)||!1===a||"false"===a}function Ka(a){return!0===a||"true"===a}function ra(a){return ia(a)&&"%"==a.slice(-1)}function Fa(){return(new Date).getTime()}function ma(a,b){aa(!0,a+" is DEPRECATED, support for it will be removed. Use "+b+" instead.")}function aa(a,b){if(!Ha(window.console)&&!Ha(window.console.log)){if(oa(a)){var c=" ("+a.selector+")";a=a.debug}else c=
"";if(!a)return!1;b=ia(b)?"carouFredSel"+c+": "+b:["carouFredSel"+c+":",b];window.console.log(b)}return!1}a.fn.carouFredSel||(a.fn.caroufredsel=a.fn.carouFredSel=function(L,za){if(0==this.length)return aa(!0,'No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){a(this).carouFredSel(L,za)});var E=this,Z=this[0],Ma=!1;E.data("_cfs_isCarousel")&&(Ma=E.triggerHandler("_cfs_triggerEvent","currentPosition"),E.trigger("_cfs_triggerEvent",["destroy",!0]));var ya={_init:function(b,
c,d){var e=b=r(Z,b),f=b.items,f=r(Z,f);T(f)?f={visible:f}:"variable"==f?f={visible:f,width:f,height:f}:oa(f)||(f={});e.items=f;e=b;f=b.scroll;f=r(Z,f);T(f)?f=50>=f?{items:f}:{duration:f}:ia(f)?f={easing:f}:oa(f)||(f={});e.scroll=f;e=b;f=b.auto;f=s(Z,f);na(f)?f={button:f}:ja(f)?f={play:f}:T(f)&&(f={timeoutDuration:f});if(f.progress&&(ia(f.progress)||na(f.progress)))f.progress={bar:f.progress};e.auto=f;b.prev=v(Z,b.prev);b.next=v(Z,b.next);e=b;f=b.pagination;f=s(Z,f);na(f)?f={container:f}:ja(f)&&(f=
{keys:f});e.pagination=f;e=b;f=b.swipe;qa(f)&&(f=f.call(Z));Ha(f)&&(f={onTouch:!1});Ka(f)?f={onTouch:f}:T(f)&&(f={items:f});e.swipe=f;e=b;f=b.mousewheel;qa(f)&&(f=f.call(Z));Ka(f)?f={}:T(f)?f={items:f}:Ha(f)&&(f=!1);e.mousewheel=f;c&&(rb=a.extend(!0,{},a.fn.carouFredSel.defaults,b));b=t=a.extend(!0,{},a.fn.carouFredSel.defaults,b);c=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth",
"outerWidth","top","left","marginBottom",3,2,1,0]];for(var e=c[0].length,f="right"==t.direction||"left"==t.direction?0:1,g={},j=0;j<e;j++)g[c[0][j]]=c[f][j];b.d=g;pa.direction="up"==t.direction||"left"==t.direction?"next":"prev";b=E.children();c=va(eb,t,"width");Ka(t.cookie)&&(t.cookie="caroufredsel_cookie_"+G.serialNumber);t.maxDimension=T(t[t.d.width])?t[t.d.width]:c;e=t;f=t.items;g=t;oa(f.visibleConf)||(f.visibleConf={});oa(f.sizesConf)||(f.sizesConf={});0==f.start&&T(d)&&(f.start=d);oa(f.visible)?
(f.visibleConf.min=f.visible.min,f.visibleConf.max=f.visible.max,f.visible=!1):ia(f.visible)?("variable"==f.visible?f.visibleConf.variable=!0:f.visibleConf.adjust=f.visible,f.visible=!1):qa(f.visible)&&(f.visibleConf.adjust=f.visible,f.visible=!1);ia(f.filter)||(f.filter=0<b.filter(":hidden").length?":visible":"*");f[g.d.width]||(g.responsive?(aa(!0,"Set a "+g.d.width+" for the items!"),f[g.d.width]=ea(b,g,"outerWidth")):f[g.d.width]=H(b,g,"outerWidth")?"variable":b[g.d.outerWidth](!0));f[g.d.height]||
(f[g.d.height]=H(b,g,"outerHeight")?"variable":b[g.d.outerHeight](!0));f.sizesConf.width=f.width;f.sizesConf.height=f.height;e.items=f;d=t;e=t.d.width;f=t[t.d.width];"auto"==f&&(f=ea(b,t,"outerWidth"));d[e]=f;d=t;e=t.d.height;f=t[t.d.height];g=t;"auto"==f&&(f=ea(b,g,"outerHeight"));f||(f=g.items[g.d.height]);d[e]=f;t.responsive&&(ra(t[t.d.width])||(t[t.d.width]="100%"));ra(t[t.d.width])&&(pa.upDateOnWindowResize=!0,pa.primarySizePercentage=t[t.d.width],t[t.d.width]=M(c,pa.primarySizePercentage),t.items.visible||
(t.items.visibleConf.variable=!0));if(t.responsive)t.usePadding=!1,t.padding=[0,0,0,0],t.align=!1,t.items.visibleConf.variable=!1;else{if(!t.items.visible){d=t;"variable"==d.items[d.d.width]&&(d.items.visibleConf.variable=!0);if(!d.items.visibleConf.variable&&(T(d[d.d.width])?d.items.visible=Math.floor(d[d.d.width]/d.items[d.d.width]):(d.items.visible=Math.floor(c/d.items[d.d.width]),d[d.d.width]=d.items.visible*d.items[d.d.width],d.items.visibleConf.adjust||(d.align=!1)),"Infinity"==d.items.visible||
1>d.items.visible))aa(!0,'Not a valid number of visible items: Set to "variable".'),d.items.visibleConf.variable=!0;t=d}t[t.d.width]||(!t.items.visibleConf.variable&&T(t.items[t.d.width])&&"*"==t.items.filter?(t[t.d.width]=t.items.visible*t.items[t.d.width],t.align=!1):t[t.d.width]="variable");Ha(t.align)&&(t.align=T(t[t.d.width])?"center":!1);t.items.visibleConf.variable&&(t.items.visible=B(b,t,0))}"*"!=t.items.filter&&!t.items.visibleConf.variable&&(t.items.visibleConf.org=t.items.visible,t.items.visible=
S(b,t,0));t.items.visible=Ca(t.items.visible,t,t.items.visibleConf.adjust,Z);t.items.visibleConf.old=t.items.visible;if(t.responsive)t.items.visibleConf.min||(t.items.visibleConf.min=t.items.visible),t.items.visibleConf.max||(t.items.visibleConf.max=t.items.visible),t=db(t,b,c);else switch(t.padding=q(t.padding),"top"==t.align?t.align="left":"bottom"==t.align&&(t.align="right"),t.align){case "center":case "left":case "right":"variable"!=t[t.d.width]&&(t=tb(t,b),t.usePadding=!0);break;default:t.align=
!1,t.usePadding=0==t.padding[0]&&0==t.padding[1]&&0==t.padding[2]&&0==t.padding[3]?!1:!0}T(t.scroll.duration)||(t.scroll.duration=500);Ha(t.scroll.items)&&(t.scroll.items=t.responsive||t.items.visibleConf.variable||"*"!=t.items.filter?"visible":t.items.visible);t.auto=a.extend(!0,{},t.scroll,t.auto);t.prev=a.extend(!0,{},t.scroll,t.prev);t.next=a.extend(!0,{},t.scroll,t.next);t.pagination=a.extend(!0,{},t.scroll,t.pagination);d=t;b=t.auto;qa(b.button)&&(b.button=b.button.call(Z));ia(b.button)&&(b.button=
a(b.button));ja(b.play)||(b.play=!0);T(b.delay)||(b.delay=0);Ha(b.pauseOnEvent)&&(b.pauseOnEvent=!0);ja(b.pauseOnResize)||(b.pauseOnResize=!0);T(b.timeoutDuration)||(b.timeoutDuration=10>b.duration?2500:5*b.duration);b.progress&&(qa(b.progress.bar)&&(b.progress.bar=b.progress.bar.call(Z)),ia(b.progress.bar)&&(b.progress.bar=a(b.progress.bar)),b.progress.bar?(qa(b.progress.updater)||(b.progress.updater=a.fn.carouFredSel.progressbarUpdater),T(b.progress.interval)||(b.progress.interval=50)):b.progress=
!1);d.auto=b;t.prev=A(Z,t.prev);t.next=A(Z,t.next);d=t;b=t.pagination;qa(b.container)&&(b.container=b.container.call(Z));ia(b.container)&&(b.container=a(b.container));T(b.items)||(b.items=!1);ja(b.keys)||(b.keys=!1);if(!qa(b.anchorBuilder)&&!(!1===b.anchorBuilder||"false"===b.anchorBuilder))b.anchorBuilder=a.fn.carouFredSel.pageAnchorBuilder;T(b.deviation)||(b.deviation=0);d.pagination=b;d=t;b=t.swipe;ja(b.onTouch)||(b.onTouch=!0);ja(b.onMouse)||(b.onMouse=!1);oa(b.options)||(b.options={});ja(b.options.triggerOnTouchEnd)||
(b.options.triggerOnTouchEnd=!1);d.swipe=b;t.mousewheel=t.mousewheel;t.synchronise&&(t.synchronise=Va(t.synchronise));t.auto.onPauseStart&&(t.auto.onTimeoutStart=t.auto.onPauseStart,ma("auto.onPauseStart","auto.onTimeoutStart"));t.auto.onPausePause&&(t.auto.onTimeoutPause=t.auto.onPausePause,ma("auto.onPausePause","auto.onTimeoutPause"));t.auto.onPauseEnd&&(t.auto.onTimeoutEnd=t.auto.onPauseEnd,ma("auto.onPauseEnd","auto.onTimeoutEnd"));t.auto.pauseDuration&&(t.auto.timeoutDuration=t.auto.pauseDuration,
ma("auto.pauseDuration","auto.timeoutDuration"))},_build:function(){E.data("_cfs_isCarousel",!0);for(var a=E.children(),b="textAlign float position top right bottom left zIndex width height marginTop marginRight marginBottom marginLeft".split(" "),c={},d=0,e=b.length;d<e;d++)c[b[d]]=E.css(b[d]);b="relative";switch(c.position){case "absolute":case "fixed":b=c.position}"parent"==G.wrapper?P(eb):eb.css(c);eb.css({overflow:"hidden",position:b});P(E);E.data("_cfs_origCssZindex",c.zIndex);E.css({textAlign:"left",
"float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});V(a,t);P(a);t.responsive&&W(t,a)},_bind_events:function(){ya._unbind_events();E.bind(F("stop",G),function(a,b){a.stopPropagation();pa.isStopped||t.auto.button&&t.auto.button.addClass(Ba("stopped",G));pa.isStopped=!0;t.auto.play&&(t.auto.play=!1,E.trigger(F("pause",G),b));return!0});E.bind(F("finish",G),function(a){a.stopPropagation();pa.isScrolling&&c(ha);return!0});E.bind(F("pause",
G),function(a,b,d){a.stopPropagation();Aa=k(Aa);b&&pa.isScrolling&&(ha.isStopped=!0,a=Fa()-ha.startTime,ha.duration-=a,ha.pre&&(ha.pre.duration-=a),ha.post&&(ha.post.duration-=a),c(ha,!1));!pa.isPaused&&!pa.isScrolling&&d&&(Aa.timePassed+=Fa()-Aa.startTime);pa.isPaused||t.auto.button&&t.auto.button.addClass(Ba("paused",G));pa.isPaused=!0;t.auto.onTimeoutPause&&(d=t.auto.timeoutDuration-Aa.timePassed,a=100-Math.ceil(100*d/t.auto.timeoutDuration),t.auto.onTimeoutPause.call(Z,a,d));return!0});E.bind(F("play",
G),function(a,b,c,d){a.stopPropagation();Aa=k(Aa);d=ta([b,c,d],["string","number","boolean"]);b=d[0];c=d[1];d=d[2];"prev"!=b&&"next"!=b&&(b=pa.direction);T(c)||(c=0);ja(d)||(d=!1);d&&(pa.isStopped=!1,t.auto.play=!0);if(!t.auto.play)return a.stopImmediatePropagation(),aa(G,"Carousel stopped: Not scrolling.");pa.isPaused&&t.auto.button&&(t.auto.button.removeClass(Ba("stopped",G)),t.auto.button.removeClass(Ba("paused",G)));pa.isPaused=!1;Aa.startTime=Fa();var e=t.auto.timeoutDuration+c;dur2=e-Aa.timePassed;
perc=100-Math.ceil(100*dur2/e);t.auto.progress&&(Aa.progress=setInterval(function(){var a=Fa()-Aa.startTime+Aa.timePassed,a=Math.ceil(100*a/e);t.auto.progress.updater.call(t.auto.progress.bar[0],a)},t.auto.progress.interval));Aa.auto=setTimeout(function(){t.auto.progress&&t.auto.progress.updater.call(t.auto.progress.bar[0],100);t.auto.onTimeoutEnd&&t.auto.onTimeoutEnd.call(Z,perc,dur2);pa.isScrolling?E.trigger(F("play",G),b):E.trigger(F(b,G),t.auto)},dur2);t.auto.onTimeoutStart&&t.auto.onTimeoutStart.call(Z,
perc,dur2);return!0});E.bind(F("resume",G),function(a){a.stopPropagation();ha.isStopped?(ha.isStopped=!1,pa.isPaused=!1,pa.isScrolling=!0,ha.startTime=Fa(),g(ha,G)):E.trigger(F("play",G));return!0});E.bind(F("prev",G)+" "+F("next",G),function(b,c,d,e,f){b.stopPropagation();if(pa.isStopped||E.is(":hidden"))return b.stopImmediatePropagation(),aa(G,"Carousel stopped or hidden: Not scrolling.");var g=T(t.items.minimum)?t.items.minimum:t.items.visible+1;if(g>Q.total)return b.stopImmediatePropagation(),
aa(G,"Not enough items ("+Q.total+" total, "+g+" needed): Not scrolling.");var j=ta([c,d,e,f],["object","number/string","function","boolean"]);c=j[0];d=j[1];e=j[2];f=j[3];g=b.type.slice(G.events.prefix.length);oa(c)||(c={});qa(e)&&(c.onAfter=e);ja(f)&&(c.queue=f);c=a.extend(!0,{},t[g],c);if(c.conditions&&!c.conditions.call(Z,g))return b.stopImmediatePropagation(),aa(G,'Callback "conditions" returned false.');if(!T(d)){if("*"!=t.items.filter)d="visible";else{var h=[d,c.items,t[g].items],j=0;for(f=
h.length;j<f;j++)if(T(h[j])||"page"==h[j]||"visible"==h[j]){d=h[j];break}}switch(d){case "page":return b.stopImmediatePropagation(),E.triggerHandler(F(g+"Page",G),[c,e]);case "visible":!t.items.visibleConf.variable&&"*"==t.items.filter&&(d=t.items.visible)}}if(ha.isStopped)return E.trigger(F("resume",G)),E.trigger(F("queue",G),[g,[c,d,e]]),b.stopImmediatePropagation(),aa(G,"Carousel resumed scrolling.");if(0<c.duration&&pa.isScrolling)return c.queue&&("last"==c.queue&&(qb=[]),("first"!=c.queue||0==
qb.length)&&E.trigger(F("queue",G),[g,[c,d,e]])),b.stopImmediatePropagation(),aa(G,"Carousel currently scrolling.");Aa.timePassed=0;E.trigger(F("slide_"+g,G),[c,d]);if(t.synchronise){b=t.synchronise;c=[c,d];e=0;for(f=b.length;e<f;e++)j=g,b[e][2]||(j="prev"==j?"next":"prev"),b[e][1]||(c[0]=b[e][0].triggerHandler("_cfs_triggerEvent",["configuration",j])),c[1]=d+b[e][3],b[e][0].trigger("_cfs_triggerEvent",["slide_"+j,c])}return!0});E.bind(F("slide_prev",G),function(c,m,r){c.stopPropagation();var s=E.children();
if(!t.circular&&0==Q.first)return t.infinite&&E.trigger(F("next",G),Q.total-1),c.stopImmediatePropagation();N(s,t);if(!T(r)){if(t.items.visibleConf.variable)r=z(s,t,Q.total-1);else if("*"!=t.items.filter){var q=T(m.items)?m.items:y(E,t);r=D(s,t.items.filter,q,Q.total-1)}else r=t.items.visible;r=sa(r,t,m.items,Z)}t.circular||Q.total-r<Q.first&&(r=Q.total-Q.first);t.items.visibleConf.old=t.items.visible;t.items.visibleConf.variable?(q=Ca(B(s,t,Q.total-r),t,t.items.visibleConf.adjust,Z),t.items.visible+
r<=q&&r<Q.total&&(r++,q=Ca(B(s,t,Q.total-r),t,t.items.visibleConf.adjust,Z)),t.items.visible=q):"*"!=t.items.filter&&(q=S(s,t,Q.total-r),t.items.visible=Ca(q,t,t.items.visibleConf.adjust,Z));N(s,t,!0);if(0==r)return c.stopImmediatePropagation(),aa(G,"0 items to scroll: Not scrolling.");aa(G,"Scrolling "+r+" items backward.");for(Q.first+=r;Q.first>=Q.total;)Q.first-=Q.total;t.circular||(0==Q.first&&m.onEnd&&m.onEnd.call(Z,"prev"),t.infinite||n(t,Q.first,G));E.children().slice(Q.total-r,Q.total).prependTo(E);
Q.total<t.items.visible+r&&E.children().slice(0,t.items.visible+r-Q.total).clone(!0).appendTo(E);var s=E.children(),v=s.slice(r,t.items.visibleConf.old+r);c=s.slice(0,t.items.visible);var w=s.eq(r-1),A=v.last(),V=c.last();N(s,t);var M=q=0;t.align&&(M=Y(c,t),q=M[0],M=M[1]);var J=0>q?t.padding[t.d[3]]:0,P=!1,I=a();if(t.items.visible<r&&(I=s.slice(t.items.visibleConf.old,r),"directscroll"==m.fx)){var H=t.items[t.d.width],P=I,w=V;f(P);t.items[t.d.width]="variable"}var O=!1,L=la(s.slice(0,r),t,"width"),
U=X(R(c,t,!0),t,!t.usePadding),ca=0,W={},za={},va={},Ba={},ea={},ta={},wa={},ma=p(m,t,r,L);switch(m.fx){case "cover":case "cover-fade":ca=la(s.slice(0,t.items.visible),t,"width")}P&&(t.items[t.d.width]=H);N(s,t,!0);0<=M&&N(A,t,t.padding[t.d[1]]);0<=q&&N(w,t,t.padding[t.d[3]]);t.align&&(t.padding[t.d[1]]=M,t.padding[t.d[3]]=q);ta[t.d.left]=-(L-J);wa[t.d.left]=-(ca-J);za[t.d.left]=U[t.d.width];var Na=function(){},s=function(){},ja=function(){},H=function(){},ka=function(){},J=function(){},oa=function(){},
L=function(){},Fa=function(){},ia=function(){},na=function(){};switch(m.fx){case "crossfade":case "cover":case "cover-fade":case "uncover":case "uncover-fade":O=E.clone(!0).appendTo(eb)}switch(m.fx){case "crossfade":case "uncover":case "uncover-fade":O.children().slice(0,r).remove();O.children().slice(t.items.visibleConf.old).remove();break;case "cover":case "cover-fade":O.children().slice(t.items.visible).remove(),O.css(wa)}E.css(ta);ha=b(ma,m.easing,G);W[t.d.left]=t.usePadding?t.padding[t.d[3]]:
0;if("variable"==t[t.d.width]||"variable"==t[t.d.height])Na=function(){eb.css(U)},s=function(){ha.anims.push([eb,U])};if(t.usePadding){V.not(w).length&&(va[t.d.marginRight]=w.data("_cfs_origCssMargin"),0>q?w.css(va):(oa=function(){w.css(va)},L=function(){ha.anims.push([w,va])}));switch(m.fx){case "cover":case "cover-fade":O.children().eq(r-1).css(va)}V.not(A).length&&(Ba[t.d.marginRight]=A.data("_cfs_origCssMargin"),ja=function(){A.css(Ba)},H=function(){ha.anims.push([A,Ba])});0<=M&&(ea[t.d.marginRight]=
V.data("_cfs_origCssMargin")+t.padding[t.d[1]],ka=function(){V.css(ea)},J=function(){ha.anims.push([V,ea])})}var na=function(){E.css(W)},qa=t.items.visible+r-Q.total,ia=function(){0<qa&&(E.children().slice(Q.total).remove(),v=a(E.children().slice(Q.total-(t.items.visible-qa)).get().concat(E.children().slice(0,qa).get())));j(P);if(t.usePadding){var b=E.children().eq(t.items.visible+r-1);b.css(t.d.marginRight,b.data("_cfs_origCssMargin"))}},ra=l(v,I,c,r,"prev",ma,U),Fa=function(){e(E,O,m);pa.isScrolling=
!1;kb.onAfter=d(Z,m,"onAfter",ra,kb);qb=h(E,qb,G);pa.isPaused||E.trigger(F("play",G))};pa.isScrolling=!0;Aa=k(Aa);kb.onBefore=d(Z,m,"onBefore",ra,kb);switch(m.fx){case "none":E.css(W);Na();ja();ka();oa();na();ia();Fa();break;case "fade":ha.anims.push([E,{opacity:0},function(){Na();ja();ka();oa();na();ia();ha=b(ma,m.easing,G);ha.anims.push([E,{opacity:1},Fa]);g(ha,G)}]);break;case "crossfade":E.css({opacity:0});ha.anims.push([O,{opacity:0}]);ha.anims.push([E,{opacity:1},Fa]);s();ja();ka();oa();na();
ia();break;case "cover":ha.anims.push([O,W,function(){ja();ka();oa();na();ia();Fa()}]);s();break;case "cover-fade":ha.anims.push([E,{opacity:0}]);ha.anims.push([O,W,function(){ja();ka();oa();na();ia();Fa()}]);s();break;case "uncover":ha.anims.push([O,za,Fa]);s();ja();ka();oa();na();ia();break;case "uncover-fade":E.css({opacity:0});ha.anims.push([E,{opacity:1}]);ha.anims.push([O,za,Fa]);s();ja();ka();oa();na();ia();break;default:ha.anims.push([E,W,function(){ia();Fa()}]),s(),H(),J(),L()}g(ha,G);cb(t.cookie,
E,G);E.trigger(F("updatePageStatus",G),[!1,U]);return!0});E.bind(F("slide_next",G),function(c,m,r){c.stopPropagation();var s=E.children();if(!t.circular&&Q.first==t.items.visible)return t.infinite&&E.trigger(F("prev",G),Q.total-1),c.stopImmediatePropagation();N(s,t);if(!T(r)){if("*"!=t.items.filter){var q=T(m.items)?m.items:y(E,t);r=J(s,t.items.filter,q+1,0,t.circular)-1}else r=t.items.visible;r=sa(r,t,m.items,Z)}var v=0==Q.first?Q.total:Q.first;if(!t.circular){if(t.items.visibleConf.variable)var w=
B(s,t,r),q=z(s,t,v-1);else q=w=t.items.visible;r+w>v&&(r=v-q)}t.items.visibleConf.old=t.items.visible;if(t.items.visibleConf.variable){for(w=Ca(I(s,t,r,v),t,t.items.visibleConf.adjust,Z);t.items.visible-r>=w&&r<Q.total;)r++,w=Ca(I(s,t,r,v),t,t.items.visibleConf.adjust,Z);t.items.visible=w}else"*"!=t.items.filter&&(w=S(s,t,r),t.items.visible=Ca(w,t,t.items.visibleConf.adjust,Z));N(s,t,!0);if(0==r)return c.stopImmediatePropagation(),aa(G,"0 items to scroll: Not scrolling.");aa(G,"Scrolling "+r+" items forward.");
for(Q.first-=r;0>Q.first;)Q.first+=Q.total;t.circular||(Q.first==t.items.visible&&m.onEnd&&m.onEnd.call(Z,"next"),t.infinite||n(t,Q.first,G));Q.total<t.items.visible+r&&E.children().slice(0,t.items.visible+r-Q.total).clone(!0).appendTo(E);s=E.children();c=s.slice(0,t.items.visibleConf.old);var A=s.slice(r,t.items.visible+r),D=s.eq(r-1),V=c.last(),v=A.last();N(s,t);var M=q=0;t.align&&(w=Y(A,t),q=w[0],M=w[1]);var P=!1,w=a();if(t.items.visibleConf.old<r&&(w=s.slice(t.items.visibleConf.old,r),"directscroll"==
m.fx)){var H=t.items[t.d.width],P=w,D=V;f(P);t.items[t.d.width]="variable"}var L=!1,U=la(s.slice(0,r),t,"width"),ca=X(R(A,t,!0),t,!t.usePadding),W=0,va={},za={},Ba={},ea={},ta={},ma=p(m,t,r,U);switch(m.fx){case "uncover":case "uncover-fade":W=la(s.slice(0,t.items.visibleConf.old),t,"width")}P&&(t.items[t.d.width]=H);t.align&&0>t.padding[t.d[1]]&&(t.padding[t.d[1]]=0);N(s,t,!0);N(V,t,t.padding[t.d[1]]);t.align&&(t.padding[t.d[1]]=M,t.padding[t.d[3]]=q);ta[t.d.left]=t.usePadding?t.padding[t.d[3]]:0;
var wa=function(){},H=function(){},Na=function(){},ja=function(){},ka=function(){},oa=function(){},Fa=function(){},ia=function(){},na=function(){};switch(m.fx){case "crossfade":case "cover":case "cover-fade":case "uncover":case "uncover-fade":L=E.clone(!0).appendTo(eb),L.children().slice(t.items.visibleConf.old).remove()}switch(m.fx){case "crossfade":case "cover":case "cover-fade":E.css("zIndex",1),L.css("zIndex",0)}ha=b(ma,m.easing,G);va[t.d.left]=-U;za[t.d.left]=-W;0>q&&(va[t.d.left]+=q);if("variable"==
t[t.d.width]||"variable"==t[t.d.height])wa=function(){eb.css(ca)},H=function(){ha.anims.push([eb,ca])};t.usePadding&&(U=v.data("_cfs_origCssMargin"),0<=M&&(U+=t.padding[t.d[1]]),v.css(t.d.marginRight,U),D.not(V).length&&(ea[t.d.marginRight]=V.data("_cfs_origCssMargin")),Na=function(){V.css(ea)},ja=function(){ha.anims.push([V,ea])},v=D.data("_cfs_origCssMargin"),0<q&&(v+=t.padding[t.d[3]]),Ba[t.d.marginRight]=v,ka=function(){D.css(Ba)},oa=function(){ha.anims.push([D,Ba])});var na=function(){E.css(ta)},
qa=t.items.visible+r-Q.total,ia=function(){0<qa&&E.children().slice(Q.total).remove();var a=E.children().slice(0,r).appendTo(E).last();0<qa&&(A=O(s,t));j(P);if(t.usePadding){if(Q.total<t.items.visible+r){var b=E.children().eq(t.items.visible-1);b.css(t.d.marginRight,b.data("_cfs_origCssMargin")+t.padding[t.d[1]])}a.css(t.d.marginRight,a.data("_cfs_origCssMargin"))}},ra=l(c,w,A,r,"next",ma,ca),Fa=function(){E.css("zIndex",E.data("_cfs_origCssZindex"));e(E,L,m);pa.isScrolling=!1;kb.onAfter=d(Z,m,"onAfter",
ra,kb);qb=h(E,qb,G);pa.isPaused||E.trigger(F("play",G))};pa.isScrolling=!0;Aa=k(Aa);kb.onBefore=d(Z,m,"onBefore",ra,kb);switch(m.fx){case "none":E.css(va);wa();Na();ka();na();ia();Fa();break;case "fade":ha.anims.push([E,{opacity:0},function(){wa();Na();ka();na();ia();ha=b(ma,m.easing,G);ha.anims.push([E,{opacity:1},Fa]);g(ha,G)}]);break;case "crossfade":E.css({opacity:0});ha.anims.push([L,{opacity:0}]);ha.anims.push([E,{opacity:1},Fa]);H();Na();ka();na();ia();break;case "cover":E.css(t.d.left,eb[t.d.width]());
ha.anims.push([E,ta,Fa]);H();Na();ka();ia();break;case "cover-fade":E.css(t.d.left,eb[t.d.width]());ha.anims.push([L,{opacity:0}]);ha.anims.push([E,ta,Fa]);H();Na();ka();ia();break;case "uncover":ha.anims.push([L,za,Fa]);H();Na();ka();na();ia();break;case "uncover-fade":E.css({opacity:0});ha.anims.push([E,{opacity:1}]);ha.anims.push([L,za,Fa]);H();Na();ka();na();ia();break;default:ha.anims.push([E,va,function(){na();ia();Fa()}]),H(),ja(),oa()}g(ha,G);cb(t.cookie,E,G);E.trigger(F("updatePageStatus",
G),[!1,ca]);return!0});E.bind(F("slideTo",G),function(a,b,c,d,e,f,g){a.stopPropagation();a=ta([b,c,d,e,f,g],"string/number/object number boolean object string function".split(" "));e=a[3];f=a[4];g=a[5];b=w(a[0],a[1],a[2],Q,E);if(0==b)return!1;oa(e)||(e=!1);"prev"!=f&&"next"!=f&&(f=t.circular?b<=Q.total/2?"next":"prev":0==Q.first||Q.first>b?"next":"prev");"prev"==f&&(b=Q.total-b);E.trigger(F(f,G),[e,b,g]);return!0});E.bind(F("prevPage",G),function(a,b,c){a.stopPropagation();a=E.triggerHandler(F("currentPage",
G));return E.triggerHandler(F("slideToPage",G),[a-1,b,"prev",c])});E.bind(F("nextPage",G),function(a,b,c){a.stopPropagation();a=E.triggerHandler(F("currentPage",G));return E.triggerHandler(F("slideToPage",G),[a+1,b,"next",c])});E.bind(F("slideToPage",G),function(a,b,c,d,e){a.stopPropagation();T(b)||(b=E.triggerHandler(F("currentPage",G)));a=t.pagination.items||t.items.visible;var f=Math.ceil(Q.total/a)-1;0>b&&(b=f);b>f&&(b=0);return E.triggerHandler(F("slideTo",G),[b*a,0,!0,c,d,e])});E.bind(F("jumpToStart",
G),function(a,b){a.stopPropagation();b=b?w(b,0,!0,Q,E):0;b+=Q.first;if(0!=b){if(0<Q.total)for(;b>Q.total;)b-=Q.total;E.prepend(E.children().slice(b,Q.total))}return!0});E.bind(F("synchronise",G),function(a,b){a.stopPropagation();if(b)b=Va(b);else if(t.synchronise)b=t.synchronise;else return aa(G,"No carousel to synchronise.");for(var c=E.triggerHandler(F("currentPosition",G)),d=!0,e=0,f=b.length;e<f;e++)b[e][0].triggerHandler(F("slideTo",G),[c,b[e][3],!0])||(d=!1);return d});E.bind(F("queue",G),function(a,
b,c){a.stopPropagation();qa(b)?b.call(Z,qb):ka(b)?qb=b:Ha(b)||qb.push([b,c]);return qb});E.bind(F("insertItem",G),function(b,c,d,e,f){b.stopPropagation();f=ta([c,d,e,f],["string/object","string/number/object","boolean","number"]);c=f[0];d=f[1];e=f[2];f=f[3];oa(c)&&!na(c)?c=a(c):ia(c)&&(c=a(c));if(!na(c)||0==c.length)return aa(G,"Not a valid object.");Ha(d)&&(d="end");V(c,t);P(c);b=d;var g="before";"end"==d?e?(0==Q.first?(d=Q.total-1,g="after"):(d=Q.first,Q.first+=c.length),0>d&&(d=0)):(d=Q.total-
1,g="after"):d=w(d,f,e,Q,E);f=E.children().eq(d);if(f.length)f[g](c);else aa(G,"Correct insert-position not found! Appending item to the end."),E.append(c);"end"!=b&&!e&&d<Q.first&&(Q.first+=c.length);Q.total=E.children().length;Q.first>=Q.total&&(Q.first-=Q.total);E.trigger(F("updateSizes",G));E.trigger(F("linkAnchors",G));return!0});E.bind(F("removeItem",G),function(b,c,d,e){b.stopPropagation();b=ta([c,d,e],["string/number/object","boolean","number"]);c=b[0];d=b[1];e=b[2];if(c instanceof a&&1<c.length)return f=
a(),c.each(function(){var b=E.trigger(F("removeItem",G),[a(this),d,e]);b&&(f=f.add(b))}),f;if(Ha(c)||"end"==c)f=E.children().last();else{c=w(c,e,d,Q,E);var f=E.children().eq(c);f.length&&c<Q.first&&(Q.first-=f.length)}f&&f.length&&(f.detach(),Q.total=E.children().length,E.trigger(F("updateSizes",G)));return f});E.bind(F("onBefore",G)+" "+F("onAfter",G),function(a,b){a.stopPropagation();var c=a.type.slice(G.events.prefix.length);ka(b)&&(kb[c]=b);qa(b)&&kb[c].push(b);return kb[c]});E.bind(F("currentPosition",
G),function(a,b){a.stopPropagation();var c=0==Q.first?0:Q.total-Q.first;qa(b)&&b.call(Z,c);return c});E.bind(F("currentPage",G),function(a,b){a.stopPropagation();var c=t.pagination.items||t.items.visible,d=Math.ceil(Q.total/c-1),c=0==Q.first?0:Q.first<Q.total%c?0:Q.first==c&&!t.circular?d:Math.round((Q.total-Q.first)/c);0>c&&(c=0);c>d&&(c=d);qa(b)&&b.call(Z,c);return c});E.bind(F("currentVisible",G),function(a,b){a.stopPropagation();var c=O(E.children(),t);qa(b)&&b.call(Z,c);return c});E.bind(F("slice",
G),function(b,c,d,e){b.stopPropagation();if(0==Q.total)return!1;e=ta([c,d,e],["number","number","function"]);c=T(e[0])?e[0]:0;d=T(e[1])?e[1]:Q.total;e=e[2];c+=Q.first;d+=Q.first;if(0<items.total){for(;c>Q.total;)c-=Q.total;for(;d>Q.total;)d-=Q.total;for(;0>c;)c+=Q.total;for(;0>d;)d+=Q.total}b=E.children();c=d>c?b.slice(c,d):a(b.slice(c,Q.total).get().concat(b.slice(0,d).get()));qa(e)&&e.call(Z,c);return c});E.bind(F("isPaused",G)+" "+F("isStopped",G)+" "+F("isScrolling",G),function(a,b){a.stopPropagation();
var c=a.type.slice(G.events.prefix.length),c=pa[c];qa(b)&&b.call(Z,c);return c});E.bind(F("configuration",G),function(b,c,d,e){b.stopPropagation();b=!1;if(qa(c))c.call(Z,t);else if(oa(c))rb=a.extend(!0,{},rb,c),!1!==d?b=!0:t=a.extend(!0,{},t,c);else if(!Ha(c))if(qa(d))c=eval("opts."+c),Ha(c)&&(c=""),d.call(Z,c);else{if(Ha(d))return eval("opts."+c);"boolean"!==typeof e&&(e=!0);eval("opts_orig."+c+" = b");!1!==e?b=!0:eval("opts."+c+" = b")}b&&(N(E.children(),t),ya._init(rb),ya._bind_buttons(),d=ca(E,
t),E.trigger(F("updatePageStatus",G),[!0,d]));return t});E.bind(F("linkAnchors",G),function(b,c,d){b.stopPropagation();Ha(c)?c=a("body"):ia(c)&&(c=a(c));if(!na(c)||0==c.length)return aa(G,"Not a valid object.");ia(d)||(d="a.caroufredsel");c.find(d).each(function(){var b=this.hash||"";0<b.length&&-1!=E.children().index(a(b))&&a(this).unbind("click").click(function(a){a.preventDefault();E.trigger(F("slideTo",G),b)})});return!0});E.bind(F("updatePageStatus",G),function(b,c){b.stopPropagation();if(t.pagination.container){var d=
t.pagination.items||t.items.visible,e=Math.ceil(Q.total/d);c&&(t.pagination.anchorBuilder&&(t.pagination.container.children().remove(),t.pagination.container.each(function(){for(var b=0;b<e;b++){var c=E.children().eq(w(b*d,0,!0,Q,E));a(this).append(t.pagination.anchorBuilder.call(c[0],b+1))}})),t.pagination.container.each(function(){a(this).children().unbind(t.pagination.event).each(function(b){a(this).bind(t.pagination.event,function(a){a.preventDefault();E.trigger(F("slideTo",G),[b*d,-t.pagination.deviation,
!0,t.pagination])})})}));var f=E.triggerHandler(F("currentPage",G))+t.pagination.deviation;f>=e&&(f=0);0>f&&(f=e-1);t.pagination.container.each(function(){a(this).children().removeClass(Ba("selected",G)).eq(f).addClass(Ba("selected",G))});return!0}});E.bind(F("updateSizes",G),function(){var a=t.items.visible,b=E.children(),c=va(eb,t,"width");Q.total=b.length;pa.primarySizePercentage?(t.maxDimension=c,t[t.d.width]=M(c,pa.primarySizePercentage)):t.maxDimension=T(t[t.d.width])?t[t.d.width]:c;t.responsive?
(t.items.width=t.items.sizesConf.width,t.items.height=t.items.sizesConf.height,t=db(t,b,c),a=t.items.visible,W(t,b)):t.items.visibleConf.variable?a=B(b,t,0):"*"!=t.items.filter&&(a=S(b,t,0));!t.circular&&(0!=Q.first&&a>Q.first)&&(c=t.items.visibleConf.variable?z(b,t,Q.first)-Q.first:"*"!=t.items.filter?D(b,t.items.filter,t.items.visibleConf.org,Q.first)-Q.first:t.items.visible-Q.first,aa(G,"Preventing non-circular: sliding "+c+" items backward."),E.trigger(F("prev",G),c));t.items.visible=Ca(a,t,t.items.visibleConf.adjust,
Z);t.items.visibleConf.old=t.items.visible;t=tb(t,b);a=ca(E,t);E.trigger(F("updatePageStatus",G),[!0,a]);m(t,Q.total,G);n(t,Q.first,G);return a});E.bind(F("destroy",G),function(a,b){a.stopPropagation();Aa=k(Aa);E.data("_cfs_isCarousel",!1);E.trigger(F("finish",G));b&&E.trigger(F("jumpToStart",G));U(E.children());U(E);ya._unbind_events();ya._unbind_buttons();"parent"==G.wrapper?U(eb):eb.replaceWith(E);return!0});E.bind(F("debug",G),function(){aa(G,"Carousel width: "+t.width);aa(G,"Carousel height: "+
t.height);aa(G,"Item widths: "+t.items.width);aa(G,"Item heights: "+t.items.height);aa(G,"Number of items visible: "+t.items.visible);t.auto.play&&aa(G,"Number of items scrolled automatically: "+t.auto.items);t.prev.button&&aa(G,"Number of items scrolled backward: "+t.prev.items);t.next.button&&aa(G,"Number of items scrolled forward: "+t.next.items);return G.debug});E.bind("_cfs_triggerEvent",function(a,b,c){a.stopPropagation();return E.triggerHandler(F(b,G),c)})},_unbind_events:function(){E.unbind(F("",
G));E.unbind(F("",G,!1));E.unbind("_cfs_triggerEvent")},_bind_buttons:function(){ya._unbind_buttons();m(t,Q.total,G);n(t,Q.first,G);if(t.auto.pauseOnHover){var b=Sa(t.auto.pauseOnHover);eb.bind(F("mouseenter",G,!1),function(){E.trigger(F("pause",G),b)}).bind(F("mouseleave",G,!1),function(){E.trigger(F("resume",G))})}t.auto.button&&t.auto.button.bind(F(t.auto.event,G,!1),function(a){a.preventDefault();a=!1;var b=null;pa.isPaused?a="play":t.auto.pauseOnEvent&&(a="pause",b=Sa(t.auto.pauseOnEvent));a&&
E.trigger(F(a,G),b)});t.prev.button&&(t.prev.button.bind(F(t.prev.event,G,!1),function(a){a.preventDefault();E.trigger(F("prev",G))}),t.prev.pauseOnHover&&(b=Sa(t.prev.pauseOnHover),t.prev.button.bind(F("mouseenter",G,!1),function(){E.trigger(F("pause",G),b)}).bind(F("mouseleave",G,!1),function(){E.trigger(F("resume",G))})));t.next.button&&(t.next.button.bind(F(t.next.event,G,!1),function(a){a.preventDefault();E.trigger(F("next",G))}),t.next.pauseOnHover&&(b=Sa(t.next.pauseOnHover),t.next.button.bind(F("mouseenter",
G,!1),function(){E.trigger(F("pause",G),b)}).bind(F("mouseleave",G,!1),function(){E.trigger(F("resume",G))})));t.pagination.container&&t.pagination.pauseOnHover&&(b=Sa(t.pagination.pauseOnHover),t.pagination.container.bind(F("mouseenter",G,!1),function(){E.trigger(F("pause",G),b)}).bind(F("mouseleave",G,!1),function(){E.trigger(F("resume",G))}));(t.prev.key||t.next.key)&&a(document).bind(F("keyup",G,!1,!0,!0),function(a){var b=a.keyCode;b==t.next.key&&(a.preventDefault(),E.trigger(F("next",G)));b==
t.prev.key&&(a.preventDefault(),E.trigger(F("prev",G)))});t.pagination.keys&&a(document).bind(F("keyup",G,!1,!0,!0),function(a){var b=a.keyCode;49<=b&&58>b&&(b=(b-49)*t.items.visible,b<=Q.total&&(a.preventDefault(),E.trigger(F("slideTo",G),[b,0,!0,t.pagination])))});if(a.fn.swipe){var c="ontouchstart"in window;if(c&&t.swipe.onTouch||!c&&t.swipe.onMouse){var d=a.extend(!0,{},t.prev,t.swipe),e=a.extend(!0,{},t.next,t.swipe),c=function(){E.trigger(F("prev",G),[d])},f=function(){E.trigger(F("next",G),
[e])};switch(t.direction){case "up":case "down":t.swipe.options.swipeUp=f;t.swipe.options.swipeDown=c;break;default:t.swipe.options.swipeLeft=f,t.swipe.options.swipeRight=c}pa.swipe&&E.swipe("destroy");eb.swipe(t.swipe.options);pa.swipe=!0}}if(a.fn.mousewheel&&t.mousewheel){var g=a.extend(!0,{},t.prev,t.mousewheel),j=a.extend(!0,{},t.next,t.mousewheel);pa.mousewheel&&eb.unbind(F("mousewheel",G,!1));eb.bind(F("mousewheel",G,!1),function(a,b){a.preventDefault();0<b?E.trigger(F("prev",G),[g]):E.trigger(F("next",
G),[j])});pa.mousewheel=!0}t.auto.play&&E.trigger(F("play",G),t.auto.delay);if(pa.upDateOnWindowResize){var h=function(){E.trigger(F("finish",G));t.auto.pauseOnResize&&!pa.isPaused&&E.trigger(F("play",G));N(E.children(),t);E.trigger(F("updateSizes",G))},k=a(window),c=null;if(a.debounce&&"debounce"==G.onWindowResize)c=a.debounce(200,h);else if(a.throttle&&"throttle"==G.onWindowResize)c=a.throttle(300,h);else var l=0,p=0,c=function(){var a=k.width(),b=k.height();if(a!=l||b!=p)h(),l=a,p=b};k.bind(F("resize",
G,!1,!0,!0),c)}},_unbind_buttons:function(){F("",G);var b=F("",G,!1);ns3=F("",G,!1,!0,!0);a(document).unbind(ns3);a(window).unbind(ns3);eb.unbind(b);t.auto.button&&t.auto.button.unbind(b);t.prev.button&&t.prev.button.unbind(b);t.next.button&&t.next.button.unbind(b);t.pagination.container&&(t.pagination.container.unbind(b),t.pagination.anchorBuilder&&t.pagination.container.children().remove());pa.swipe&&(E.swipe("destroy"),pa.swipe=!1);pa.mousewheel&&(pa.mousewheel=!1);m(t,"hide",G);n(t,"removeClass",
G)}};ja(za)&&(za={debug:za});var pa={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},Q={total:E.children().length,first:0},Aa={auto:null,progress:null,startTime:Fa(),timePassed:0},ha={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},kb={onBefore:[],onAfter:[]},qb=[],G=a.extend(!0,{},a.fn.carouFredSel.configs,za),t={},rb=a.extend(!0,{},L),eb="parent"==G.wrapper?E.parent():E.wrap("<"+G.wrapper.element+' class="'+G.wrapper.classname+'" />').parent();G.selector=
E.selector;G.serialNumber=a.fn.carouFredSel.serialNumber++;G.transition=G.transition&&a.fn.transition?"transition":"animate";ya._init(rb,!0,Ma);ya._build();ya._bind_events();ya._bind_buttons();ka(t.items.start)?Ma=t.items.start:(Ma=[],0!=t.items.start&&Ma.push(t.items.start));t.cookie&&Ma.unshift(parseInt(Na(t.cookie),10));if(0<Ma.length)for(var $a=0,ac=Ma.length;$a<ac;$a++){var lb=Ma[$a];if(0!=lb){if(!0===lb){if(lb=window.location.hash,1>lb.length)continue}else"random"===lb&&(lb=Math.floor(Math.random()*
Q.total));if(E.triggerHandler(F("slideTo",G),[lb,0,!0,{fx:"none"}]))break}}Ma=ca(E,t);$a=O(E.children(),t);t.onCreate&&t.onCreate.call(Z,{width:Ma.width,height:Ma.height,items:$a});E.trigger(F("updatePageStatus",G),[!0,Ma]);E.trigger(F("linkAnchors",G));G.debug&&E.trigger(F("debug",G));return E},a.fn.carouFredSel.serialNumber=1,a.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",
queue:!1}},a.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},a.fn.carouFredSel.pageAnchorBuilder=function(a){return'<a href="#"><span>'+a+"</span></a>"},a.fn.carouFredSel.progressbarUpdater=function(b){a(this).css("width",b+"%")},a.fn.carouFredSel.cookie={get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;c<d;c++){for(var e=b[c];" "==e.charAt(0);)e=
e.slice(1);if(0==e.indexOf(a))return e.slice(a.length)}return 0},set:function(a,b,c){var d="";c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString());document.cookie=a+"="+b+d+"; path=/"},remove:function(b){a.fn.carouFredSel.cookie.set(b,"",-1)}},a.extend(a.easing,{quadratic:function(a){var b=a*a;return a*(-b*a+4*b-6*a+4)},cubic:function(a){return a*(4*a*a-9*a+6)},elastic:function(a){var b=a*a;return a*(33*b*b-106*b*a+126*b-67*a+15)}}))})(jQuery);
define("carouFredSel",["jquery","jqueryui","jqueryTouchSwipe","mousewheel"],function(){});define("tasks/preferences-modification-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofpositions/snippet/preferencesModification",type:"POST",isNotCancelable:!0})});
(function(a,b){var g=b.document,c=a(b),e;e=b.FID=b.FID||{};var d=a,h=b,f=function(a,b,e){function p(a){a=a.target;d(".coreposition-tooltip-close-button");(a===z[0]||0<d(z[0]).has(a).length)&&"tooltip-close-button--img"!==a.className||r()}function m(){return h.matchMedia?h.matchMedia("(orientation: portrait)").matches:!0}function n(){0<=y&&clearTimeout(y);y=setTimeout(function(){var a=m();D!=a?(D=m(),v._tooltipSetup(w,z,A)):(r(),c.off("resize",n),y=-1)},100)}function r(){z.attr("style","").BasePopup("close");
s.off("touchstart click",p)}var s=d(g),v=this,A=d(a),w=d(b),z=d(e).BasePopup();a=z.find(".popup--tooltip-bubble-pointer");b=z.find(".arrow-img");this.$arrow=a;this.$arrowImage=b;this.CENTER_WINDOW_WIDTH=568;var D=m(),y=-1;w.on("click",function(a){a.stopPropagation();s.on("touchstart click",p);c.on("resize",n);v._tooltipSetup(w,z,A);a=d.Event(f.event.anchorClicked,{popupInstance:v,$container:A,$anchor:w,$popup:z});w.trigger(a)})};e=h.FID=h.FID||{};f.event={anchorClicked:"anchorClicked"};f.prototype._tooltipSetup=
function(a,b,e){if(b.is(":visible"))b.attr("style","").BasePopup("close");else if(c.width()<=this.CENTER_WINDOW_WIDTH)b.css({top:h.innerHeight/2,"margin-top":-(b.height()/2),position:"fixed"}),b.BasePopup("open");else{var f=a.offset().top+a.outerHeight()+this.$arrowImage.outerHeight()-d(".magicgrid--wrapper").offset().top,g=0;"relative"===e.css("position")&&(g=parseInt(e.css("margin-left")));g=a.offset().left+a.outerWidth()/2-b.outerWidth()/2-g;b.BasePopup("open");b.css({top:f});if("true"!==b.attr("data-dtfullwidth")){g<
e.offset().left?a.offset():g+b.outerWidth()>e.offset().left+e.outerWidth()&&(a.offset(),a.outerWidth(),b.outerWidth());f=a.offset().left;e=e.offset().left;var g=a.outerWidth(),n=c.width(),r=b.outerWidth();400>=f?d(".account-selector-wrapper").hasClass("account-selector--hide")&&200<=f?b.css({left:f+16-(e+g/2),"margin-left":0}):b.css({left:0,"margin-left":0}):n<f+r?b.css({left:f-(e+(f+r-n)+16+20),"margin-left":0}):b.css({left:f+16-(e+g/2),"margin-left":0})}else{var f=e.offset().left-a.offset().left,
g=e.offset().left-b.offset().left,n=e.offset().left-a.parent().offset().left,r=d(h).width()-(a.offset().left+a.outerWidth()),s=d(h).width()-(b.offset().left+b.outerWidth()),v=e.width()-a.parent().width()+n;f>g&&b.css({left:-n,marginLeft:0});r<s&&b.css({left:e.outerWidth()-b.outerWidth()-v,marginLeft:0})}e=this.$arrow;e.css({left:a.offset().left+a.outerWidth()/2-b.offset().left-this.$arrowImage.outerWidth()/2,right:a.offset().left+a.outerWidth()/2-b.offset().left-this.$arrowImage.outerWidth()/2});
0>e.position().left?b.addClass("reduced-top-left-rounded-corner"):b.removeClass("reduced-top-left-rounded-corner");setTimeout(void 0,0)}};d.fn.CorePositionTooltip=function(){var a=arguments[0],b=arguments;if(methods[a])a=methods[a],b=Array.prototype.slice.call(arguments,1);else if("object"==typeof a||!a)a=methods.init;else return d.error("Method "+a+" does not exist on jQuery.pluginName"),this;return a.apply(this,b)};d.CorePositionTooltip=d.extend(d.CorePositionTooltip,d.BasePopup,{});e.CorePositionTooltip=
f})(jQuery,window);define("components/corepositiontooltip",["components/basepopup"],function(){});
define("views/position-drawer-view","jquery views/base-view views/position-drawer-detail-view views/position-drawer-lots-view views/position-drawer-notification-view views/legal-footnote-view util/constants carouFredSel require tasks/preferences-modification-task components/corepositiontooltip".split(" "),function(a,b,g,c,e,d,h,f,j,k){function l(a,b,c){window.open(a,"infowindowlargemenubar","width="+(void 0!=b?b:1024)+",height="+(void 0!=c?c:768)+",left=080,top=080,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no").focus()}
return b.extend({events:{"click .normal_row .symbol_wrapper .expcon":"toggleDrawerButton","click .indicator-htb":"clickHTBIndicator","click .view-fdic-program-banks-link":"clickViewFdicProgramBanksLink","click .view-htb-link":"clickHTBLink","click .prev":"clickPreviousCarousel","click .next":"clickNextCarousel","click .fdic_content .view-fdic-link":"clickViewFDICBankLink","click .distribution-help-link":"clickDistributionHelpLink","click #positions-tabs-lots":"clickLotsButton","click #positions-tabs-research":"clickDetailsButton",
"click #positions-tabs-notifications":"clickNotificationButton","click #short-term-share-view-detail-link":"clickShortTermShareViewDetailLink","click .loan-link":"clickLoanLink","click .js-action-button--trade":"clickTradeButton","click .js-action-button--trade-armor":"clickTradeArmorButton","click .js-action-button--exchange":"clickExchangeButton","click .More-on-pricing":"clickMoreOnPricing","click .positions--drawer-view-research-link":"clickNBResearchLink","click .additional-info-button":"popAdditionalInfo",
"click .terms-link":"popupTerms",ViewDataLoaded:"updateCarouselSize","click .positions--annuity-view-detail>a":"viewAnnuityDetailFromDrawerLink","click .js-income-payout-annuity-detail-link":"viewIncomePayoutAnnuityDetailLink"},remove:function(){this.$el.children().remove();b.remove.call(this)},destroy:function(){this.remove();this.undelegateEvents()},initialize:function(){try{j(["text!/myresearch/xhr/additionalImpInfo.jhtml"])}catch(a){j(["text!/myresearch/xhr/additionalImpInfo.jhtml"])}},updateCarouselSize:function(a){(a=
a.drawerContainer)&&a.find(".magicgrid--drawer-carousel-content").trigger("updateSizes")},clickHTBIndicator:function(b){var c=a(b.currentTarget).data("url");l(c,840,355);b.preventDefault();return!1},clickViewFDICBankLink:function(b){var c=a(b.currentTarget).data("url");l(c,518,488);b.preventDefault();return!1},clickHTBLink:function(b){var c=a(b.currentTarget).data("url");l(c,840,355);b.preventDefault();return!1},clickPreviousCarousel:function(){window.trackAnalyticsEvent&&"function"===typeof window.trackAnalyticsEvent&&
window.trackAnalyticsEvent({app:"Positions-Drawer",event:"click",context:"previousButton"})},clickNextCarousel:function(){window.trackAnalyticsEvent&&"function"===typeof window.trackAnalyticsEvent&&window.trackAnalyticsEvent({app:"Positions-Drawer",event:"click",context:"nextButton"})},clickDistributionHelpLink:function(b){var c=a(b.currentTarget).data("url");l(c,800,540);b.preventDefault();return!1},toggleDrawerButton:function(b){var c=a(b.currentTarget).closest(".normal_row"),d=c.next(".drawer_row, .content-row"),
e=d.find("input.quoteable").val(),f=d.find("input.lotAble").val(),g=!!d.find(".drawer_content").data("eresearch-cards"),j=!!d.data("has-notification");g||"true"==f?d.is(":visible")?this._closeDrawer(d):(this.showLotsDetail(d,e+"",f),g?this._openDrawer(c,d):this.openDrawerForLotsOnly(d)):j&&(d.is(":visible")?this._closeDrawer(d):this.openDrawerForNotificationOnly(d));b.preventDefault();return!1},_initializeCoreTooltip:function(b){var c=b.find(".open-core-position-tooltip");c.addClass("initCoreTooltip");
if(0<c.length){b=a(".core-change-tooltip-container");var d=b.find(".popup--tooltip-bubble"),c=a(c).on(FID.CorePositionTooltip.event.anchorClicked,this._onAnchorClicked);[].push(new FID.CorePositionTooltip(b,c,d))}},openDrawerForNotificationOnly:function(){},_closeDrawer:function(a){a.hide();a.addClass("display-none");a.prev().removeClass("row_selected").removeClass("row_hover");a.prev().find("span.expcon").removeClass("collapse")},_openDrawer:function(a){var b=a.find("#positions-tabs-panel-research");
this.drawerDetailView=new g({el:b,drawerContainer:a});0<a.find(".chart").length&&a.find(".chart").attr("src",a.find(".chart").attr("realSrc"));a.find(".magicgrid--drawer-carousel-content").trigger("updateSizes");new e({el:a})},openDrawerForLotsOnly:function(a){var b=a.find(".positions--lots>.positions--lots-content");this.drawerLotsView=new c({el:b,drawerContainer:a});this.drawerLotsView.getLots(a)},showLotsDetail:function(b,c,d){b.find(".detail-or-lots span.notification").hasClass("visited")||("true"==
c&&"true"==d?(a(".detail-or-lots span.detail",b).addClass("show").addClass("visited"),a(".detail-or-lots span.lots",b).addClass("show"),a(".detail-or-lots span.lots").removeClass("visited"),a(".detail-or-lots span.detail").removeClass("to-be-visited")):"true"==c?(a(".detail-or-lots span.detail",b).addClass("show").addClass("visited"),a("div.drawer-content-wrapper div.drawer_content_slide").css({margin:""}),a("div.drawer_header").css({"border-bottom":"1px dotted #dbdbdb"})):"true"==d&&(a(".detail-or-lots span.lots",
b).addClass("show").addClass("visited").addClass("no-border"),a("div.drawer-content-wrapper div.drawer_content_slide").css({padding:"9px 9px"}),a("div.drawer_header").css({"border-bottom":"1px dotted #ffffff"}),a(".lots_content div.fid-datagrid-content").addClass("font-size")))},clickLotsButton:function(b){var d=a(b.currentTarget).closest(".content-row"),e=d.find(".positions--lots>.positions--lots-content");this.drawerLotsView=new c({el:e,drawerContainer:d});this.drawerLotsView.getLots(d);this.saveDefaultDrawerView("lots");
b.preventDefault();return!1},clickDetailsButton:function(b){a(b.currentTarget).closest(".content-row").find(".magicgrid--drawer-carousel-content").trigger("updateSizes");$target=a(b.target);var c=$target.closest(".simple-tabs--wrapper");c.find(".magicgrid--drawer-carousel-content").trigger("currentVisible",function(b){c.trigger(a.Event("carouselitemvisibilitychanged",{items:b}))});this.saveDefaultDrawerView("research")},saveDefaultDrawerView:function(a){var b=this.$("#positions-tabs-research"),c=
this.$("#positions-tabs-lots");0<b.length&&0<c.length&&(FID.Applications.Positions.defaultDrawerView=a,(new k({data:{level:"session",node:"POSITION",key:"drawerView",value:a}})).run())},clickNotificationButton:function(b){var c=a(b.currentTarget).closest(".content-row");c.find(".detail-or-lots .notification").removeClass("to-be-visited").addClass("visited");c.find(".detail-or-lots .lots").removeClass("visited").addClass("to-be-visited");c.find(".detail-or-lots .detail").removeClass("visited").addClass("to-be-visited");
c.find(".notification-content").removeClass("display-none");c.find(".details_content").addClass("display-none");c.find(".lots_content").addClass("display-none");b.preventDefault();return!1},clickLoanLink:function(b){var c=a(b.currentTarget).attr("src");window.open(c,"infowindow","toolbar=yes, location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes, resizable=yes");b.preventDefault();return!1},clickTradeButton:function(b){var c=a(b.currentTarget),d=c.data("security-id"),
e=c.data("order-type"),f=c.data("trade-url");if("E"==e||"M"==e||"O"==e||void 0==f||null==f||""==f){var f=c.attr("data-account-number"),g=c.data("brk-account-type"),c={securityId:d,orderType:e,accountNumber:f,brkAccountType:g,accountType:g,orderAction:c.data("order-action")},d={top:a(document).scrollTop()+50};a(document).trigger(this.constants.EVENTS.QUICK_TRADE,{security:c,location:d})}else window.location.href=f;b.preventDefault();return!1},clickTradeArmorButton:function(b){void 0!==window.trackAnalyticsEvent&&
window.trackAnalyticsEvent({app:"Positions-Drawer",event:"Click-Set-Exit-Plan"});setTimeout(function(){var c=a(b.currentTarget);window.location.href=c.data("trade-url")},400)},clickExchangeButton:function(b){var c=a(b.currentTarget),d=c.data("account-number"),c=c.data("exchange-url");window.location.href=c+"?plan="+d+"&option=dcInvestments";b.preventDefault()},clickMoreOnPricing:function(b){b=a(b.currentTarget).attr("href");(b=window.open(b,"infowindowlarge","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"))&&
b.focus();return!1},popAdditionalInfo:function(b){var c=a(b.currentTarget).closest(".magicgrid--drawer").find(".drwer_additional_info");if(c.is(":visible"))this.legalFootNote&&(this.legalFootNote.destory(),this.legalFootNote=null),c.hide();else{if(!this.legalFootNote){var e=j("text!"+h.URLS.MYRESEARCH_DRAWER_ADDITIONAL_IMP_INFO)||"<p>This feature is temporarily unavailable.</p>";c.find(".drwer_additional_info_cotent .modal-win-body").html(e);this.legalFootNote=new d({el:c})}c.show()}b.preventDefault();
return!1},popupTerms:function(){window.open(envMap.CORPORATEHOST_URL_VALUE+"/terms-of-use","infowindow","width=500,height=400,left=20,top=40,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes")},clickNBResearchLink:function(b){var c=a(b.currentTarget).data("wps-research-url"),c=window.open(c,"infowindowlarge","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes");null!=c&&c.focus();b.preventDefault()},clickViewFdicProgramBanksLink:function(b){var c=
a(b.currentTarget).data("url");l(c,488,518);b.preventDefault();return!1},clickShortTermShareViewDetailLink:function(b){var c=a(b.currentTarget).data("url");l(c,505,380);b.preventDefault();return!1},viewAnnuityDetailFromDrawerLink:function(b){b="/ftgw/fbc/ofpositions/annuityQuickPositions?ACCOUNT="+a(b.currentTarget).data("account-num");window.open(b,"infowindowViewDetails","width=390,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes").focus()},viewIncomePayoutAnnuityDetailLink:function(b){b=
a(b.currentTarget).data("url");window.open(b,"infowindowViewDetails","width=390,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes").focus()},_onAnchorClicked:function(a){a.$anchor.attr("data-tooltipsection")}})});
define("tpl!templates/positions-drawer-snippet.html",function(){return function(a){var b=[];with(a){b.push('<div class="magicgrid--drawer-content-wrapper clearfix">\n\t\x3c!-- ICON: icon-arrow-pointer-fill --\x3e\n\t<img class="magicgrid--drawer-content-pointer" src="');b.push(envMap.WWW_CDN_URL);b.push("");b.push(envMap.NG_CONTENT_URL);b.push('/images/icon-arrow-pointer-fill.png" onerror="this.style.display=\'none\'">\n\t<a href="#" class="magicgrid--drawer-close-button">\n\t\t\x3c!-- ICON: icon-x-gray --\x3e\n\t\t<div class="close-icon-div"></div>\n\t</a>\n\n\t<a class="positions--drawer-in-link ');
"true"===$(".magicgrid--table").data("json-global").isRep?b.push(" positions--drawer-in-link-inactive "):b.push(" in-widget ");b.push('" note-symbol="');b.push(trade.securityId);b.push('" ');"true"===$(".magicgrid--table").data("json-global").isRep&&b.push('  title="Customer reps do not have access to customers\u2019 notes." ');b.push('><span>Notes</span></a>\n\n\t<div class="magicgrid--drawer-shelf-container">\n\t\t');if(shelf.showGrant)b.push('\n\t\t<table class="magicgrid--drawer-shelf">\n\t\t\t<tbody>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-change-purchase">\n\t\t\t\t\t<td>Dividend Quantity</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span>'),
b.push(shelf.dividendQuantity),b.push('</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-current-value">\n\t\t\t\t\t<td>Grant ID</td>\n\t\t\t\t\t<td>'),b.push(shelf.grantID),b.push('</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-quantity">\n\t\t\t\t\t<td>Quantity</td>\n\t\t\t\t\t<td>'),b.push(shelf.quantity),b.push('</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-cost-basis">\n\t\t\t\t\t<td>Grant Price</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span>'),
b.push(shelf.grantPrice),b.push('</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-52weeks">\n\t\t\t\t\t<td>52-Week High/Low</td>\n\t\t\t\t\t<td class="barchart-horizontal">\n\t\t\t\t\t\t<span class="${shelf.noDataDisplayHiddenClass}">'),b.push(shelf.highlowVal),b.push('</span>\n\t\t\t\t\t\t<div class="highlowrange '),b.push(shelf.highlowBarDisplayHiddenClass),b.push('">\n\t\t\t\t\t\t\t<div class="highlowrange--bar">\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-quarter"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-half"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-three-quarter"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--marker-offset">\n\t\t\t\t\t\t\t\t<div class="highlowrange--marker" title="'),
b.push(shelf.highlowLastTradeVal),b.push('" style="left:'),b.push(shelf.dotToLeftPercentageDistance),b.push('"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--text">\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-low">'),b.push(shelf.low52weekval),b.push('</div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-high">'),b.push(shelf.high52weekval),b.push("</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t");else if(shelf.showSpp)b.push('\n\t\t<table class="magicgrid--drawer-shelf">\n\t\t\t<tbody>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-change-purchase">\n\t\t\t\t\t<td>Offering Period Begins</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span>'),
b.push(shelf.offeringBegins),b.push('</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-current-value">\n\t\t\t\t\t<td>Total Balances</td>\n\t\t\t\t\t<td>'),b.push(shelf.totalBalances),b.push('</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-cost-basis">\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-52weeks">\n\t\t\t\t\t<td>52-Week High/Low</td>\n\t\t\t\t\t<td class="barchart-horizontal">\n\t\t\t\t\t\t<span class="${shelf.noDataDisplayHiddenClass}">'),
b.push(shelf.highlowVal),b.push('</span>\n\t\t\t\t\t\t<div class="highlowrange '),b.push(shelf.highlowBarDisplayHiddenClass),b.push('">\n\t\t\t\t\t\t\t<div class="highlowrange--bar">\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-quarter"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-half"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-three-quarter"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--marker-offset">\n\t\t\t\t\t\t\t\t<div class="highlowrange--marker" title="'),
b.push(shelf.highlowLastTradeVal),b.push('" style="left:'),b.push(shelf.dotToLeftPercentageDistance),b.push('"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--text">\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-low">'),b.push(shelf.low52weekval),b.push('</div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-high">'),b.push(shelf.high52weekval),b.push("</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t");else{b.push('\n\t\t<table class="magicgrid--drawer-shelf">\n\t\t\t<tbody>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-change-purchase">\n\t\t\t\t\t<td>Total Gain/Loss</td>\n\t\t\t\t\t<td class="');
b.push(shelf.chgPurchaseColorClass);b.push('">\n\t\t\t\t\t\t<div class="magicgrid--stacked-data-container">\n\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value-container clearfix">\n\t\t\t\t\t\t\t\t<span class="magicgrid--stacked-data-value">');b.push(shelf.chgPurchaseDollarDisplayVal);b.push('</span>\n\t\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value">\n\t\t\t\t\t\t\t\t\t<span>');b.push(shelf.chgPurchasePercentDisplayVal);b.push('</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-current-value">\n\t\t\t\t\t<td>Current Value</td>\n\t\t\t\t\t<td>');
b.push(shelf.currentVal);b.push('</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-quantity">\n\t\t\t\t\t<td>Quantity</td>\n\t\t\t\t\t<td>');b.push(shelf.quantityVal);b.push("\n\t\t\t\t\t\t");if(null!=base.acctType&&""!=base.acctType&&("Margin"==base.acctType||"Short"==base.acctType))b.push("\n\t\t\t\t\t\t<br/>("),b.push(base.acctType),b.push(")\n\t\t\t\t\t\t");b.push('\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-cost-basis">\n\t\t\t\t\t<td>');
2!=shelf.accountType&&3!=shelf.accountType&&4!=shelf.accountType?b.push("\n\t\t\t\t\t\t\t\tCost Basis\n\t\t\t\t\t\t"):b.push("\n\t\t\t\t\t\t\t\tCost\n\t\t\t\t\t\t");b.push('\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="magicgrid--stacked-data-container">\n\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value-container clearfix">\n\t\t\t\t\t\t\t\t<span class="magicgrid--stacked-data-value">');b.push(shelf.costBasisPerShareVal);b.push('<span class="magicgrid--cost-basis-share">');b.push(shelf.perShareText);
b.push('</span></span>\n\t\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value">\n\t\t\t\t\t\t\t\t\t<span>');b.push(shelf.costBasisTotalVal);b.push("<sup>");b.push(shelf.costBasisSupScript);b.push("</sup></span>\n\t\t\t\t\t\t\t\t\t");"true"==view.washSaleInd&&("Y"==view.excludeWashSale?(b.push('\n\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<img src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/icon-wash-exclude.png" alt="wash sale indicator" title="Wash sale notification" onerror="this.style.display=\'none\'" />\n\n\t\t\t\t\t\t\t\t\t')):
(b.push('\n\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<img src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/icon-wash.png" alt="wash sale indicator" title="Wash sale notification" onerror="this.style.display=\'none\'" />\n\t\t\t\t\t\t\t\t\t')));b.push('\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-52weeks">\n\t\t\t\t\t<td>52-Week High/Low</td>\n\t\t\t\t\t<td class="barchart-horizontal">\n\t\t\t\t\t\t<span class="${shelf.noDataDisplayHiddenClass}">');
b.push(shelf.highlowVal);b.push('</span>\n\t\t\t\t\t\t<div class="highlowrange ');b.push(shelf.highlowBarDisplayHiddenClass);b.push('">\n\t\t\t\t\t\t\t<div class="highlowrange--bar">\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-quarter"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-half"></div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--divider highlowrange--divider-three-quarter"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--marker-offset">\n\t\t\t\t\t\t\t\t<div class="highlowrange--marker" title="');
b.push(shelf.highlowLastTradeVal);b.push('" style="left:');b.push(shelf.dotToLeftPercentageDistance);b.push('"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="highlowrange--text">\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-low">');b.push(shelf.low52weekval);b.push('</div>\n\t\t\t\t\t\t\t\t<div class="highlowrange--text-high">');b.push(shelf.high52weekval);b.push("</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t");if(!shelf.isSingleAccountSeleted&&
!(1==base.layoutType||2==base.layoutType))b.push('\n\t\t\t\t<tr class="magicgrid--drawer-shelf-row-account">\n\t\t\t\t\t<td>Account</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="magicgrid--stacked-data-container">\n\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value-container clearfix">\n\t\t\t\t\t\t\t\t<span class="magicgrid--stacked-data-value" data-pii="true">'),b.push(shelf.accountName),b.push('</span>\n\t\t\t\t\t\t\t\t<div class="magicgrid--stacked-data-value">\n\t\t\t\t\t\t\t\t\t<span data-pii="true">'),
b.push(shelf.accountNumber),b.push("</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t");b.push("\n\t\t\t</tbody>\n\t\t</table>\n\t\t")}b.push("\n\t</div>\n\t");if(base.displayDrawer){b.push('\n\t\x3c!-- additional info popup --\x3e\n\t<div class="drwer_additional_info">\n\t\t<div class="drwer_additional_info_block">\n\t\t\t<h3>Additional Important Information</h3>\n\t\t\t<div class="drwer_additional_info_close"></div>\n\t\t\t<div class="drwer_additional_info_cotent">\n\t\t\t\t<div class="modal-win-body"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="positions--drawer-content-header-container clearfix">\n\t\t<div class="positions--drawer-content-header-text clearfix">\n\t\t\t<div class="left">\n\t\t\t\t');
"true"!=base.isFCASH&&(b.push('\n\t\t\t\t\t<span class="positions--drawer-content-security-text">'),b.push(base.title),b.push("</span>\n\t\t\t\t"));b.push('\n\t\t\t\t<div class="positions--drawer-content-security-types">\n\t\t\t\t\t\x3c!-- <span class="positions--drawer-content-security-link"><a href="#">Basket</a></span> --\x3e\n\t\t\t\t\t');a="";!base.isFDICPosition&&"Cash"!=base.acctType&&(a=base.acctType,"Financing"==a&&(a="Loan link"));null!=a&&(""!=a&&2!=shelf.accountType&&3!=shelf.accountType&&
4!=shelf.accountType)&&(b.push('\n\t\t\t\t\t<span class="positions--drawer-content-account-type">('),b.push(a),b.push(")</span>\n\t\t       \t\t"));base.posTypeDisplay&&(b.push('\n\t\t\t\t\t<span class="positions--drawer-content-account-type">'),b.push(base.posTypeDisplay),b.push("</span>\n\t\t\t\t\t"));b.push("\n\t\t\t\t\t<span>\n\t\t\t\t\t\t");base.loanedSecInd&&(b.push('\n\t\t\t            \t<a href="#" class="js-loaned" data-loaned-url="'),b.push(base.loanedUrl),b.push('"  title="Loaned Securities. Opens in a new Window.">\n\t\t\t                \tLoaned\n\t\t\t                    \x3c!-- ICON: icon-popup-1x --\x3e\n\t\t\t                    <img class="positions--drawer-content-popup-link-icon" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" width="12" height="12" alt="icon-indicator-popup" title="Loaned Securities. Opens in a new Window." onerror="this.style.display=\'none\'" viewBox="0 0 12 12" />\n\t\t\t            </a>\n\t\t\t            '));b.push("\n\t\t\t            ");base.monthlyPayPerShare&&(b.push('\n\t\t\t            \t<a href="'),b.push(base.monthlyPayUrl),b.push('" class="js-monthlyPay">Monthly Payments</a>\n\t\t\t            '));
b.push("\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t");"true"==base.mmrEnable&&(b.push("\n\t\t\t\t\t"),"true"==shelf.changeCoreAuthorized&&(b.push("\n\t\t\t\t\t\t"),("true"==base.isMmrCorePosition||"true"==shelf.isUnfundedCorePostion)&&("1"==base.isChangeCorePositionAllowed&&"normal"==base.mmrActionType)&&b.push('\n\t\t\t\t\t\t\t<div class="positions--drawer-buy-sell-buttons">\n\t\t\t\t\t            <button class="action-button--trade open-core-change-button" id="open-core-change-button-id" role="button" type="submit">Change Core Position</button>\n\t\t\t\t\t            <a class="open-core-position-tooltip">How Your Core Position Works</a>\n\t\t\t\t        \t</div>\n\t\t\t\t        '),
b.push("\n\t\t\t\t        "),(base.mmrUnavailable||"error"==base.mmrActionType)&&b.push('\n\t\t\t\t\t        <div class="positions--drawer-core-change-note core-change-note-not-available">\n\t\t\t\t\t\t\t\t<div class="bold">Note: Online Core Change is currently unavailable</div>\n\t\t\t    \t\t\t\t<div>Please check back shortly or call a representative at <span class="bold">800&#8209;544&#8209;6666</span>.<br/><a class="open-core-position-tooltip">How Your Core Position Works</a></div>\n\t\t\t   \t\t\t\t</div>\n\t\t   \t\t\t\t'),
b.push("\n\t\t   \t\t\t\t"),"1"==base.isChangeCorePositionAllowed&&"pending"==base.mmrActionType&&b.push('\n\t\t\t   \t\t\t\t<div class="positions--drawer-core-change-note core-change-note-pending">\n\t\t\t\t\t\t\t\t<div class="bold">Note: A Change to your Core Position Is Pending</div>\n\t\t\t\t\t\t\t\t<div>You have already submitted a request to change your core position. Please allow one business day for us to make the update. You may also call a representative <span class="bold">800&#8209;544&#8209;6666</span> for immediate assistance. | <a class="open-core-position-tooltip">How Your Core Position Works</a></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'),
b.push("\n\t\t\t\t\t\t"),"true"==shelf.isUnfundedCorePostion&&"1"==base.isChangeCorePositionAllowed&&b.push('\n\t\t\t\t\t\t\t<div class="positions--drawer-core-change-note positions--drawer-core-change-unfunded-note">\n\t\t                        <div><span class="bold">Note:</span> Your account has an unfunded core position</div>\n\t\t                    </div>\n\t\t\t\t\t\t'),b.push("\n\t\t\t\t\t")),b.push("\n\t\t\t\t"));b.push("\n\t\t\t</div>\n\t\t</div>\n\t\t");trade.hasTradeAction?"5"==shelf.accountType?
b.push('\n\t\t\t\t<div class="positions--drawer-trade-button">\n\t\t'):"2"==shelf.accountType||"3"==shelf.accountType||"4"==shelf.accountType?b.push('\n\t\t\t\t\t <div class="positions--drawer-trade-button">\n\t\t\t\t'):view.isFixedIncome?b.push('\n\t\t\t\t\t<div class="positions--drawer-trade-button">\n\t\t\t\t'):view.isStockETFShortPosition?b.push('\n\t\t\t\t\t\t<div class="positions--drawer-buy-sell-buttons">\n\t\t\t\t\t\t'):b.push('\n\t\t\t\t\t\t\t<div class="positions--drawer-trade-button">\n\t\t\t\t\t\t'):
b.push('\n\t\t\t\t\t<div class="positions--drawer-trade-button">\n\t\t\t\t');b.push("\n\t\t");if(trade.hasTradeAction)if("5"==shelf.accountType)b.push('\n\t\t\t<button class="action-button--trade js-action-button--exchange"\n            \tdata-account-number="'),b.push(trade.accountNumber),b.push('"\n            \tdata-exchange-url="'),b.push(trade.wpsExchangeUrlNb),b.push('"\n\t\t\t\trole="button" type="submit">Exchange</button>\n\t\t');else{b.push('\n\t\t\t<button class="action-button--trade js-action-button--trade"\n\t\t\t\tdata-security-id="');
b.push(trade.securityId);b.push('"\n            \tdata-order-type="');b.push(trade.orderType);b.push('"\n            \tdata-account-number="');b.push(trade.accountNumber);b.push('"\n\n\n\t\t\t\t');if("2"==shelf.accountType||"3"==shelf.accountType||"4"==shelf.accountType)b.push('\n\t\t\t\t\tdata-brk-account-type="'),b.push(trade.brkAcctType),b.push('" data-trade-url="'),b.push(trade.classicTradeUrl),b.push('" role="button" type="submit">Exchange\n\t\t\t\t');else if(view.isFixedIncome)b.push('\n\t\t\t\t\tdata-brk-account-type="'),
b.push(trade.brkAcctType),b.push('" data-trade-url="'),b.push(trade.classicTradeUrl),b.push('" role="button" type="submit">Buy</button>\n\t\t\t\t\t<button class="action-button--trade js-action-button--trade"\n\t\t\t\t\t\t\tdata-security-id="'),b.push(trade.securityId),b.push('"\n\t\t\t\t\t\t\tdata-order-type="'),b.push(trade.orderType),b.push('"\n\t\t\t\t\t\t\tdata-account-number="'),b.push(trade.accountNumber),b.push('"\n\t\t\t\t\t\t\tdata-brk-account-type="'),b.push(trade.brkAcctType),b.push('" data-trade-url="'),
b.push(trade.classicTradeUrl2),b.push('"\n\t\t\t\t\t\t\trole="button" type="submit">\n\t\t\t\t\t\t\tSell\n\t\t\t\t');else if(view.isStockETFShortPosition?(b.push('\n\t\t\t\t\t\tdata-brk-account-type="'),b.push(trade.positionTypeCodeToSeed),b.push('" data-trade-url="'),b.push(trade.classicTradeUrl),b.push('&ORDER_ACTION=B" data-order-action="B" role="button" type="submit">Buy</button>\n\t\t\t\t\t\t<button class="action-button--trade js-action-button--trade"\n\t\t\t\t\t\t\tdata-security-id="'),b.push(trade.securityId),
b.push('"\n\t\t\t\t\t\t\tdata-order-type="'),b.push(trade.orderType),b.push('"\n\t\t\t\t\t\t\tdata-account-number="'),b.push(trade.accountNumber),b.push('"\n\t\t\t\t\t\t\tdata-brk-account-type="'),b.push(trade.positionTypeCodeToSeed),b.push('"\n\t\t\t\t\t\t\tdata-trade-url="'),b.push(trade.classicTradeUrl),b.push('&ORDER_ACTION=S"\n\t\t\t\t\t\t\tdata-order-action="S"\trole="button" type="submit">\n\t\t\t\t\t\t\tSell\n\t\t\t\t\t\t')):(b.push('\n\t\t\t\t\t\t\tdata-brk-account-type="'),b.push(trade.brkAcctType),
b.push('" data-trade-url="'),b.push(trade.classicTradeUrl),b.push('" role="button" type="submit">Trade\n\t\t\t\t\t\t')),trade.isStockETF&&(1==trade.positionAcctType||2==trade.positionAcctType||3==trade.positionAcctType)||base.loanedSecInd)b.push('<button class="action-button--secondary trade-armor-new js-action-button--trade-armor"\n\t\t\t\t\t\t\t\t\t  data-trade-url="'),b.push(trade.tradeArmorUrl),b.push('"\n\t\t\t\t\t\t\t\t\t  role="button" type="submit">\n\t\t\t\t\t\t\t          <span class="button--trade-armor-new">Set Exit Plan</span></button>');
b.push("</button>\n\t\t")}b.push("\n\t\t</div>\n\t</div>\n\t");if("true"!=base.isFCASH&&"true"!=shelf.isUnfundedCorePostion){b.push('\n\t\t<div class="simple-tabs--wrapper">\n\t\t\t');if(base.displayNBResearchLink||base.quoteable||base.lotAble||0<base.notificationCount||""!=base.fdicProgramBanksUrlVal||""!=base.fdicBankBalUrlVal||""!=base.fdicBankTBSUrlVal||view.isFixedIncome||shelf.showGrant||shelf.showSpp||null!=base.incomePayoutAnnuityLink&&""!=base.incomePayoutAnnuityLink){b.push('\n\t\t\t<ul class="tabs--nav simple-tabs clearfix" role="tablist">\n\t\t\t\t');
if(base.quoteable||base.displayNBResearchLink||view.isFixedIncome||shelf.showGrant||shelf.showSpp)a=(a=!base.lotAble&&0>=base.notificationCount&&!view.hasOptionChain)?" last":"",b.push('\n\t\t\t\t<li class="tabs--tab simple-tabs--element-container tabs--selected'),b.push(a),b.push('">\n\t\t\t\t\t<a class="tabs--tab-link simple-tabs--element" href="#positions-tabs-panel-research" id="positions-tabs-research" tabindex="0" role="tab" aria-selected="true">Research</a>\n\t\t\t\t</li>\n\t\t\t\t');base.lotAble&&
(a=(a=0>=base.notificationCount&&!view.hasOptionChain)?" last":"",b.push('\n\t\t\t\t<li class="tabs--tab tabs--tab simple-tabs--element-container tabs--shadow'),b.push(a),b.push('">\n\t\t\t\t\t<a class="tabs--tab-link simple-tabs--element" href="#positions-tabs-panel-lots" id="positions-tabs-lots" tabindex="-1" role="tab" aria-selected="false">Purchase History / Lots</a>\n\t\t\t\t</li>\n\t\t\t\t'));view.hasOptionChain&&(a=(a=0>=base.notificationCount)?" last":"",b.push('\n\t\t\t\t<li class="tabs--tab tabs--tab simple-tabs--element-container tabs--shadow'),
b.push(a),b.push('">\n\t\t\t\t\t<a class="tabs--tab-link simple-tabs--element" href="'),b.push(view.optionChainUrl),b.push('" class="positions-drawer-optionChain" id="positions-tabs-optionChain" tabindex="-1" role="tab" aria-selected="false">Option Chain</a>\n\t\t\t\t</li>\n\t\t\t\t'));0<base.notificationCount&&(b.push('\n\t\t\t\t<li class="tabs--tab tabs--tab simple-tabs--element-container last">\n\t\t\t\t\t<a class="tabs--tab-link simple-tabs--element" href="#positions-tabs-panel-notifications" id="positions-tabs-notifications" tabindex="-1" role="tab" aria-selected="false">\n\t\t\t\t\t\t<span class="simple-tabs--element">Notifications</span>\n\t\t\t\t\t\t<span class="simple-tabs--element">&nbsp;('),
b.push(base.notificationCount),b.push(")</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t"));b.push('\n\t\t\t</ul>\n\n\t\t\t<div class="tabs--tab-item-container-wrapper">\n\t\t\t\t');if(base.quoteable||view.isFixedIncome||shelf.showGrant||shelf.showSpp){b.push('\n\t\t\t\t<div class="tabs--container simple-tabs--content-container tabs--container-visible" id="positions-tabs-panel-research" role="tabpanel" aria-labelledby="positions-tabs-research">\n\t\t\t\t\t');if(view.isFixedIncome){a=base.title;var g=
/(.*)\s\d*\.?\d*%.*/.exec(a);g&&2==g.length&&(a=g[1]);b.push('\n\t\t\t\t\t<a class="positions--bond-links" href="');b.push(base.fiResearchUrl);b.push('">View details for ');b.push(a);b.push('.</a>\n\t                <a class="positions--bond-links positions--bond-links-last" href="');b.push(base.fiAnalysis);b.push('">View fixed income analysis for your bond holdings.</a>\n\t\t\t\t\t')}else b.push('\n\t\t\t\t\t\x3c!-- CAROUSEL COMPONENT BEGIN --\x3e\n\t\t\t\t\t<div class="simple-tabs--content-container-table">\n\t\t\t\t\t\t<div class="simple-tabs--content-container-table-row">\n\t\t\t\t\t\t\t<div class="simple-tabs--content-container-table-cell">\n\t\t\t\t\t\t\t\t<div class="carousel magicgrid--carousel-min-height">\n\t\t\t\t\t\t\t\t\t<ul class="magicgrid--drawer-carousel-content">\n\t\t\t\t\t\t\t\t\t\t'),
a=view.researchCards?view.researchCards.split(","):[],$.each(a,function(a,e){var d=view.researchSecType,g=view.cusip,f=trade.securityId,g="MUTUALFUND"===d||"MONEYMARKET"===d?"/myresearch/xhr/stocks/bricklet.jhtml?symbol="+f+"&brickletType="+e+"&securityType="+d+"&cusip="+g:"/myresearch/xhr/stocks/bricklet.jhtml?symbol="+f+"&brickletType="+e+"&securityType="+d;"5"===shelf.accountType&&"MUTUALFUND"===d&&(g+="&fundNumber="+view.fundNumber+"&accountID="+trade.accountNumber+"&watchlistType=NETBENEFITS");
b.push('\n\t\t\t\t\t\t\t\t\t\t\t<li data-loaded="false" data-card-url="');b.push(g);b.push('" data-card-name="');b.push(e);b.push("\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='slide_module js-positions--myresearch-bricklet positions--myresearch-bricklet-");b.push(e.toLowerCase());b.push("' data-account-type=\"");b.push(shelf.accountType);b.push('" data-security-type="');b.push(d);b.push('" data-fund-number="');b.push(view.fundNumber);b.push("\"><div style='height:14px;'>Loading...</div></div>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t")}),
b.push('\n\t\t\t\t\t\t\t\t\t</ul>\n\n\n\t\t\t\t\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t\t\t\t\t\t\t<a class="prev" href="#"><span>prev</span></a>\n\t\t\t\t\t\t\t\t\t\t<a class="next" href="#"><span>next</span></a>\n\t\t\t\t\t\t\t\t\t\t<div class="pagination"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="legal-footer">\n\t\t\t\t\t\t\t\t\tContent and data provided by various third parties and Fidelity &ndash;\n\t\t\t\t\t\t\t\t\t<span class="legal-footer--link-group">\n\t\t\t\t\t\t\t\t\t\t<a class="terms-link">Terms of Use</a><span class="drawer--bottom-seperateline">|</span><a class="additional-info-button">Additional Information</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t');
b.push("\n\t\t\t\t</div>\n\t\t\t\t")}base.displayNBResearchLink&&(b.push('\n\t\t\t\t<div class="tabs--container simple-tabs--content-container tabs--container-visible" id="positions-tabs-panel-research" role="tabpanel" aria-labelledby="positions-tabs-research">\n\t\t\t\t\t<a href="javascript:void(0)" class="positions--drawer-view-research-link" data-wps-research-url="'),b.push(base.wpsResearchUrlNB),b.push("?option=DcFundDetail&amp;plan="),b.push(trade.accountNumber),b.push("&amp;fundnbr="),b.push(view.fundNumber),
b.push('&amp;returnPage=/transfer/portfolio/investments">View detailed research for this position at NetBenefits.com</a>\n\t\t\t\t</div>\n\t\t\t\t'));if(base.lotAble){b.push('\n\t\t\t\t<div class="tabs--container simple-tabs--content-container" id="positions-tabs-panel-lots" role="tabpanel" aria-labelledby="positions-tabs-lots">\n\t\t\t\t\t\x3c!-- LOTS COMPONENT BEGIN --\x3e\n\n\t\t\t\t\t');view.factorEnable&&(b.push('\n\n\t\t\t\t\t<div class="positions--bond-wrapper">\n\t\t\t\t\t    <table class="positions--bond-position-table">\n\t\t\t\t\t        <thead>\n\t\t\t\t\t            <tr>\n\t\t\t\t\t                <th>Quantity</th>\n\t\t\t\t\t                <th></th>\n\t\t\t\t\t                <th>'),
view.inflationEnable&&b.push(" Inflation &nbsp;"),b.push("Factor</th>\n\t\t\t\t\t                <th></th>\n\t\t\t\t\t                <th>Last Price</th>\n\t\t\t\t\t            </tr>\n\t\t\t\t\t        </thead>\n\t\t\t\t\t        <tbody>\n\t\t\t\t\t            <tr>\n\t\t\t\t\t                <td>"),b.push(view.quantityVal),b.push("</td>\n\t\t\t\t\t                <td>X</td>\n\t\t\t\t\t                <td>"),b.push(view.factorAmount),b.push("</td>\n\t\t\t\t\t                <td>X</td>\n\t\t\t\t\t                <td>"),
b.push(view.displayPriceVal),b.push(""),view.isMultiCurrency&&b.push("  USD"),b.push("</td>\n\t\t\t\t\t            </tr>\n\t\t\t\t\t            "),view.inflationProtected||b.push('\n\t\t\t\t\t\t            <tr>\n\t\t\t\t\t\t                <td colspan="6"><div class="positions--bond-position-total">100</div></td>\n\t\t\t\t\t\t            </tr>\n\t\t\t\t\t            '),b.push('\n\t\t\t\t\t        </tbody>\n\t\t\t\t\t    </table>\n\t\t\t\t\t    <div class="positions--bond-position-total-wrapper">\n\t\t\t\t\t        <span class="positions--bond-position-current-value-equal">=</span>\n\t\t\t\t\t        <span class="positions--bond-position-current-value-head">Current Value</span>\n\t\t\t\t\t        <span class="positions--bond-position-current-value-text" colspan="8">\n\t\t\t\t\t        \t'),
b.push(view.currentVal),b.push(" "),view.isMultiCurrency&&b.push("  USD"),b.push("\n\t\t\t\t\t        </span>\n\t\t\t\t\t    </div>\n\t\t\t\t\t</div>\n\t\t\t\t"));b.push('\n\t\t\t\t\t<div class="simple-tabs--content-container-table positions--lots-table">\n\t\t\t\t\t\t<div class="simple-tabs--content-container-table-row">\n\t\t\t\t\t\t\t<div class="simple-tabs--content-container-table-cell">\n\t\t\t\t\t\t\t\t');if(base.addPopupLinkWrapper||"true"==view.internationalSecurities)b.push('\n\t\t\t\t\t\t\t\t\t<div class="positions--drawer-content-popup-link">\n\t\t\t\t\t\t\t\t\t\t'),
"true"!=view.internationalSecurities&&(b.push('\n\t\t\t\t\t\t\t\t\t\t\t<div class="positions--drawer-preface">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="'),b.push(base.editCostBasisUrl),b.push('" target="_self">'),b.push(base.editCostBasisDisplay),b.push("</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t")),b.push("\n\t\t\t\t\t\t\t\t");b.push("\n\t\t\t\t\t\t\t\t\x3c!-- Add Purchase RecentTransactionCard / Lots link for international securities  --\x3e\n\t\t\t\t\t\t\t\t");"true"==view.internationalSecurities&&
(b.push('\n\t\t\t\t\t\t\t\t\t<div class="positions--lots-viewLotsInClassic">\n\t\t\t\t\t\t\t\t        <a href="'),b.push(view.internationalViewLotsUrl),b.push('">View lots for '),b.push(base.title),b.push(".</a>\n\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t\t"));b.push("\n\t\t\t\t\t\t\t\t");"true"!=view.internationalSecurities&&(b.push('\n\t\t\t\t\t\t\t\t\t<div class="positions--lots">\n\t\t\t\t\t\t\t\t\t'),base.hasMFShortTermNote&&(b.push('\n\t\t\t\t\t\t\t\t\t\t<p class="positions--lots-note"><strong>Note: </strong>'),
b.push(base.shortTermShares),b.push(' of the shares you hold in this position may be subject to a redemption fee if you sell them before the end of the holding period defined by the fund.\n\t\t                                    <span class="view-details">\n\t\t\t                                    <a href="javascript:void(0)" id="short-term-share-view-detail-link" data-url="'),b.push(base.mfShortTermShareDetailUrl),b.push('">\n\t\t\t\t                                    View Details.\n\t\t\t\t                                    \x3c!-- ICON: icon-popup-1x --\x3e\n\t\t\t\t                                    <img class="positions--drawer-content-popup-link-icon" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t\t\t                                    </a>\n\t\t                                \t</span>\n\t\t                                </p>\n\n\t\t\t\t\t\t\t\t\t')),b.push('\n\t\t\t\t\t\t\t\t\t\t<div class="positions--lots-content">\n\t\t\t\t\t\t\t\t\t'),view.accLinked2StockPlans&&(b.push('\n\t\t\t\t\t\t\t\t\t\t<div class="positions--lots-viewLotsInClassic">\n\t\t\t\t\t\t\t\t\t        <a href="javascript:void(0)">\n\t\t\t\t\t\t\t\t\t            View lots for this position.\n\t\t\t\t\t\t\t\t\t            \x3c!-- ICON: icon-popup-1x --\x3e\n\t\t\t\t\t\t\t\t\t            <img class="positions--drawer-content-popup-link-icon" src="'),
b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t\t\t\t\t\t\t\t\t        </a>\n\t\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t\t\t')),b.push("\n\t\t\t\t\t\t\t\t\t"),view.isAnnuityPlanLots&&(b.push('\n\t\t\t\t\t\t\t\t\t\t<div class="positions--lots-viewLotsInClassic">\n\t\t\t\t\t\t\t\t\t        <a href="javascript:void(0)">View lots for '),b.push(base.title),b.push(".</a>\n\t\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t\t\t")),
view.showViewDetailsLinkForFILIPosition&&(b.push('\n\t\t\t\t\t\t\t\t\t\t<div class="positions--annuity-view-detail">\n\t\t\t\t\t\t\t\t\t        <a href="javascript:void(0)" data-account-num="'),b.push(shelf.accountNumber),b.push('">View Details\n\t\t\t\t\t\t\t\t\t\t         \x3c!-- ICON: icon-popup-1x --\x3e\n\t\t\t\t\t\t\t\t\t            <img class="positions--drawer-content-popup-link-icon" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t\t\t\t\t\t\t\t\t        </a>\n\t\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t\t\t')),
b.push("\n\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"));b.push("\n\t\t\t\t\t\t\t\t");(base.addPopupLinkWrapper||"true"==view.internationalSecurities)&&b.push("\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t");b.push("\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t")}0<base.notificationCount&&(b.push('\n\t\t\t\t<div class="tabs--container simple-tabs--content-container" id="positions-tabs-panel-notifications" role="tabpanel" aria-labelledby="positions-tabs-notifications">\n\t\t\t\t\t\x3c!-- NOTIFICATION COMPONENT BEGIN --\x3e\n\t\t\t\t\t<div class="simple-tabs--content-container-table">\n\t\t\t\t\t\t<div class="simple-tabs--content-container-table-row">\n\t\t\t\t\t\t\t<div class="simple-tabs--content-container-table-cell">\n\t\t\t\t\t\t\t\t<ol class="positions--notifications-content">\n\t\t\t\t\t\t\t\t\t'),
view.showNotificationMsg&&(b.push("\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t"),b.push(view.displayDistributionText),b.push('\n\t\t\t\t\t\t\t\t\t<a class="distribution-help-link" data-url="'),b.push(view.distributionHelpLink),b.push('" href="javascript:void(0);">Important information about how distributions are calculated and posted to your account.</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t')),b.push("\n\t\t\t\t\t\t\t\t\t"),view.showHtbNotificationMsg&&(b.push('\n\t\t\t\t\t\t\t\t\t<li class="js-htb-notification-list-item" data-service-url="'),
b.push(base.htbSnippetUrl),b.push('"><span class="js-htb-text">Loading...</span>\n\t                                    <a href="javascript:void(0)" data-url="'),b.push(base.htbPageUrl),b.push('" class="view-htb-link">\n\t                                        View Hard to Borrow details for this account.\n\t                                        \x3c!-- ICON: icon-popup-1x --\x3e\n\t                                        <img class="positions--drawer-content-popup-link-icon" src="'),b.push(envMap.WWW_CDN_URL),
b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" width="12" height="12" alt="icon-indicator-popup" title="Opens in a new window." onerror="this.style.display=\'none\'">\n\t                                    </a>\n\t                                </li>\n\t\t\t\t\t\t\t\t\t')),b.push("\n\t\t\t\t\t\t\t\t\t"),view.showExcludeWashSaleNotificationMsg&&b.push("\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\tUnadjusted cost basis has not been enabled for this account. If you'd like to view the unadjusted cost basis for this account, please call Fidelity at 800-544-6666.\n\t                                </li>\n\t\t\t\t\t\t\t\t\t"),
b.push("\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- NOTIFICATION COMPONENT END --\x3e\n\t\t\t\t</div>\n\t\t\t\t"));b.push("\n\t\t\t</div>\n\t\t\t");null!=base.fdicProgramBanksUrlVal&&""!=base.fdicProgramBanksUrlVal||null!=base.fdicBankBalUrlVal&&""!=base.fdicBankBalUrlVal||null!=base.fdicBankTBSUrlVal&&""!=base.fdicBankTBSUrlVal?(b.push('\n\t\t\t<div class="positions--drawer-content-popup-link">\n\t\t        <a href="javascript:void(0)" class="view-fdic-program-banks-link" data-url="'),
b.push(base.programBanksURL),b.push('">\n\t\t            View FDIC program banks.\n\t\t            \x3c!-- ICON: icon-popup-1x --\x3e\n\t\t            <img class="positions--drawer-content-popup-link-icon" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t\t        </a>\n\t\t    </div>\n\t\t\t')):null!=base.incomePayoutAnnuityLink&&""!=base.incomePayoutAnnuityLink&&(b.push('\n\t\t\t\t\t\t<div class="positions--drawer-content-popup-link">\n\t\t\t\t\t\t\t<a href="javascript:void(0)" class="js-income-payout-annuity-detail-link" data-url="'),
b.push(base.incomePayoutAnnuityLink),b.push('">\n\t\t\t\t\t\t\t\tView Details\n\t\t\t\t\t\t\t\t\x3c!-- ICON: icon-popup-1x --\x3e\n\t\t\t\t\t\t\t\t<img class="positions--drawer-content-popup-link-icon" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/dev/popup_blue.gif" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t'));b.push("\n\t\t\t")}b.push("\n\t\t</div>\n\t")}b.push("\n\t")}b.push('\n</div>\n\n<div class="core-change-tooltip-container">\n\t<div class="base-popup popup--tooltip-bubble dynamic-tooltip animation--visible core-change-tooltip hidden" tabindex="-1">\n\t    <div class="popup--tooltip-bubble-pointer">\n\t        \x3c!-- ICON: icon-arrow-white-up --\x3e\n\t        \x3c!--[if lte IE 8]>\n\t        <img class="arrow-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAOCAMAAAACJixMAAAAP1BMVEUAAACIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIj///+IiIienp74+PiRkZHT09O1tbXp6enAwMDx8fGtra3J4eYIAAAACnRSTlMA7EDGYKBwENkwUBvfEQAAAHBJREFUGNNtzkEOgzAMBVFoAzYeSKBw/7O2RJFDCn9lPW+muyyo+N04vJ98AhgefU0Q/l2U2ewDr7svZrbC1DwG4m6/LTO9tL5Z3h7R6iMkK9suaeF0X4KxhlbPaaH4Yc2OnCb9GeoraUinRHcPiOgXwzgH3SvWGJgAAAAASUVORK5CYII=" alt="Arrow Pointer" width="26" />\n\t        <![endif]--\x3e\n\t        <img class="arrow-img" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAxNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMTQiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMS45IDEuNmwtMTAuMiAxMi40aDIwLjdsLTEwLjUtMTIuNHoiLz48cGF0aCBmaWxsPSIjODg4IiBkPSJNMTIuMiAwbC0xMi4yIDE0aDIuN2w5LjQtMTAuOCA5IDEwLjhoMi45bC0xMS44LTE0eiIvPjwvc3ZnPg==" width="26" height="14" alt="Arrow Pointer" onerror="this.style.display=\'none\'">\n\t    </div>\n\t    <div class="popup--tooltip-bubble-content" aria-label="performance popup">\n\t        <div class="base-popup--content-wrapper">\n\t            <a class="coreposition-tooltip-close-button">\n\t                \x3c!-- ICON: icon-x-gray --\x3e\n\t                \x3c!--[if lte IE 8]>\n\t                <img class="tooltip-close-button--img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUAAACZmZmZmZmZmZnk5WrOAAAAA3RSTlMAMGBogpN1AAAAP0lEQVQI1x2MMQ0AIBADjwkZKMADstheGhYQ8+tTki5Nml6PCZuz2kO3i8hRjIqkS5cmLYjC4erBiGHfLLDqA1WpIk2xx7fUAAAAAElFTkSuQmCC" alt="Close Popup" height="16" width="16">\n\t                <![endif]--\x3e\n\t                <img class="tooltip-close-button--img" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzk4OTg5OCIgZD0iTTAgMTMuNmwyLjQgMi40IDUuNi01LjYgNS42IDUuNiAyLjQtMi40LTUuNi01LjYgNS42LTUuNi0yLjQtMi40LTUuNiA1LjYtNS42LTUuNi0yLjQgMi40IDUuNiA1LjZ6Ii8+PC9zdmc+" onerror="this.style.display=\'none\'" alt="Close Popup">\n\t            </a>\n\t            <div class="base-popup--header">\n\t            </div>\n\t            <div class="base-popup--content">\n\t                <div class="dynamic-tooltip-section dynamic-tooltip-section-spindex">\n\t                    <h3>How Your Core Position Works</h3>\n\t                    <p class="core-change-tooltip-subtext">A core position is automatically established when you open a Fidelity account. It\'s primarily used for processing cash transactions and for holding uninvested cash. When you sell a security, the proceeds are deposited in your core position. When you buy a security, cash in your core position is used to pay for the trade.\n\t                    \t<a class="core-change-tooltip--video-link"  onclick="window.open(\'https://www.fidelity.com/learning-center/media/core-position-video\' ,\'infowindow\', \'height=795, width=810, toolbar=yes, menubar=no,scrollbars=yes,screenX=20,screenY=20,top=80,left=80, resizable=yes\')">Watch this video to learn more <span class="unfold-symbol" aria-label="Opens in a new window"> </span>\n\t                    \t</a>\n\t                    </p>\n\t                    <p class="core-change-tooltip-subtext core-change-tooltip-image-description">Your core position is also used for processing:</p>\n\t                    <div class="change-core-image-container">\n\t                        <img class="change-core-image" src="');
b.push(envMap.WWW_CDN_URL);b.push("");b.push(envMap.NG_CONTENT_URL);b.push('/images/Core-Position.png" alt="About Core Accounts"/>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    </div>\n\t</div> \x3c!-- core-change-tooltip --\x3e\n</div> \x3c!-- tooltip container --\x3e\n')}return b.join("")}});
define("tpl!templates/pg2-welcome-statement.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large pg2-welcome-intro-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="base-modal" role="dialog" aria-labelledby="pg2-welcome-intro-modal">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">You\'re switching to a page that\'s still in progress</h3>\n\t\t\t<p class="pg2-welcome-intro-content">We\'re inviting you to test out our latest updates because we want your feedback. \n\t\t\t   Keep in mind that not everything you\'re used to seeing will be part of the page and we\'ll be making updates on a regular basis. \n\t\t\t   If you\'re interested in helping shape the future of our site, select Continue below.\n\t\t\t</p>\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="submit" role="button" class="action-button--generic action-button--small action-button--standard-size pg2-show">Continue</button>\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal pg2-modal-close-button">No, thanks</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>');return b.join("")}});
define("tpl!templates/pgx-welcome-statement.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large pgx-welcome-intro-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="base-modal" role="dialog" aria-labelledby="pgx-welcome-intro-modal">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Join Us</h3>\n\t\t\t<p class="pgx-welcome-intro-content">\n\t\t\t\tWe&#8217;re building a powerful new Positions page that has more capabilities and is more aligned with your needs. We&#8217;ll be rolling out new enhancements in stages, before the page is completed, so we can incorporate your feedback. Thank you for sharing your thoughts with us.\n\t\t\t</p>\n\t\t\t<p class="pgx-welcome-intro-content">  \n\t\t\t   To go back to the current Positions page, select "Exit Preview".\n\t\t\t </p>\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="submit" role="button" class="action-button--generic action-button--small action-button--standard-size pgx-show">Try it Out</button>\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal pgx-modal-close-button">No Thanks</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>');
return b.join("")}});define("text!templates/core-position-list-error.html",[],function(){return'<div class="draggable-popup--wrapper change-core-popup--wrapper"\n\taria-labelledby="change-core-title" role="dialog">\n\t<div\n\t\tclass="base-popup--header draggable-popup--title-bar-container clearfix">\n\t\t<h2 id="change-core-title" class="base-popup--header--title ">Change Core Position</h2>\n\t\t<div class="base-popup--close-button" tabindex="0" role="button"\n\t\t\taria-label="Close change-core"></div>\n\t</div>\n\t<div class="base-popup">\n\t\t<div class="base-popup--content-wrapper change-core--content">\n\t\t\t<div\n\t\t\t\tclass="change-core-section change-core--choose-core-position change-core-section--active"\n\t\t\t\tid="change-core-form-container">\n\t\t\t\t<div class="change-core--section-header-container" style="border-bottom:0;margin-bottom:0">\n\t\t\t\t\t<img class="change-core--confirm-warning-icon"\n\t\t\t\t\t\tsrc="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/icon-exclamation-yellow-triangle-2x.png" /> <span\n\t\t\t\t\t\tclass="change-core--section-header change-core--section-header-warning">\n\t\t\t\t\t\tNote: Online Core Change is currently unavailable. </span>\n\t\t\t\t\t<div class="change-core--confirm-message ">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tPlease check back shortly or call a representative at <span class="bold">800-544-6666.</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="change-core--form-row change-core--form-action-row">\n\t\t\t\t\t\t<span class="glossy-button-sm">\n\t\t\t\t\t\t\t<button class="change-core--form-submit-and-close" type="submit">\n\t\t\t\t\t\t\t\tClose</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'});
define("tasks/positions-tour-preference-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/snippet/modifyPortfolioPreference",type:"POST",buildParams:function(a){return{prefName:"POSITIONS_TOUR_IND",prefValue:a.tourInd}},isNotCancelable:!0})});define("text!templates/positionstour.html",[],function(){return'    \x3c!-- Positions Tour --\x3e\n    <div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-positions-modal" role="dialog" aria-label="Positions tour">\n        \x3c!-- Hidden for redundancy --\x3e\n        <div class="base-popup--close-button introtour-orders-base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n        <ul class="introtour-modal--slide-content-container introtour-orders-modal--slide-content-container">\n            \x3c!-- Orders Intro Tour Content --\x3e\n            <li class="introtour-modal--slide-content introtour-modal--slide-content-active clearfix" aria-live="polite">\n                <div class="introtour-orders-container clearfix">\n                    <h2 class="introtour-orders-modal--container-header">Using the New Positions Page</h2>\n\n                    <div class="introtour-orders-label">Click on one of your positions to expand the row to view research, view purchase history/lots, or place a trade.</div>\n                </div>\n\n                <div class="introtour-orders-video-layout-container">\n                    <span class="introtour-orders-video-layout">\n                        <video class="introtour-video introtour-orders-video" width="650" height="380" alt="Each position row can be selected for more information, such as news, analyst opinions, and charting." preload controls>\n                            <source class="introtour-orders-video-src" src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/tour-videos/NewPositionsTour.mp4" type="video/mp4" />\n                            <source src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/tour-videos/NewPositionsTour.webm" type="video/webm" />\n                        </video>\n                        \x3c!--[if ie 8]>\n                        <div class="introtour-orders-video-layout">\n                            <object class="introtour-orders-video" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="650" height="380" align="middle">\n                                <param name="movie" value="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/tour-videos/NewPositionsTour.swf" />\n                                <param name="bgcolor" value="#ffffff" />\n                                <param name="scale" value="showall" />\n                                <param name="menu" value="true" />\n                            </object>\n                        </div>\n                        <![endif]--\x3e\n                    </span>\n                </div>\n\n                <div class="introtour-orders-video-layout-shell"></div>\n            </li>\n            \x3c!-- End Orders Intro Tour Content --\x3e\n        </ul>\n\n        <div class="introtour-modal--actions">\n            <div class="introtour-modal--action-container introtour-modal--action-container-first clearfix introtour-modal--action-container-active">\n                <span class="glossy-button-sm">\n                    <button class="introtour-modal--close">Thanks! I\'ve got it</button>\n                </span>\n            </div>\n        </div>\n\n        <div class="introtour-modal--classic-note-container">\n            \x3c!-- Intro Tour Pre-Switch Note --\x3e\n            <div class="introtour-modal--classic-note introtour-modal--classic-note-active">\n            </div>\n            \x3c!-- Intro Tour Pre-Switch Note --\x3e\n            \x3c!-- Intro Tour Post-Switch Note --\x3e\n            <div class="introtour-modal--classic-note">\n                <img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/icon-i-bluecircle-2x.png" height="15" width="15" alt="Note">\n                <p class="introtour-modal--classic-note-comment"><strong>Note:</strong> Our classic experience is no longer available to you. Please be sure to let us know how we can improve the new experience.</p>\n            </div>\n            \x3c!-- Intro Tour Post-Switch Note --\x3e\n        </div>\n\n        <div class="introtour-modal--page-counter-container clearfix">\n            <span class="introtour-modal--page-counter">\n                <span class="introtour-modal--page-counter-current"></span> of <span class="introtour-modal--page-counter-max"></span>\n            </span>\n        </div>\n    </div>'});
define("tasks/preference-session-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/snippet/modifyPortfolioSessionPreference",type:"POST",buildParams:function(a){return{prefName:a.prefName,prefValue:a.prefValue}},isNotCancelable:!0})});
(function(a,b){function g(a){function g(b){var c=this,e=a(b.helpBubble),f=a(b.destination),h=a(e.parents(".help-bubble--wrapper")),n=a(b.anchor);if(1!==e.length)throw"Exception: Invalid DOM element: helpBubble.";if(!e.hasClass("help-bubble"))throw"Exception: Invalid DOM element: Needs class `help-bubble`.";if(1!==f.length)throw"Exception: Invalid DOM element: destination.";if(1!==n.length)throw"Exception: Invalid DOM element: anchor.";if(1!==h.length)throw"Exception: Invalid DOM element: Help Bubble Container.";
b="undefined"===typeof b.localStorageKey?"hasViewedHelpBubble":b.localStorageKey;this._$helpBubbleContainer=h;this._$anchor=n;this._localStorageKey=b;this._helpBubbleIsOpen=!1;this._onCloseHelpBubble=function(){c.closeHelpBubble()};c._relocatePopup(f)}e=b.FID=b.FID||{};g.prototype._relocatePopup=function(a){var b=this._$helpBubbleContainer.detach();a.append(b)};g.prototype.openHelpBubble=function(){var c=this,e=c._$anchor,f=0,g=0,h=0,n=c._$helpBubbleContainer,r=c._localStorageKey;if(!c._helpBubbleIsOpen){a(b).on("resize",
c._onCloseHelpBubble);0<e.length&&e.is(":visible")&&(f=e.position().left,g=e.position().top);if(a.browser.msie&&("8.0"===a.browser.version||"9.0"===a.browser.version))h=3E3;a("html.lt-ie9").length&&(g-=17);e=f+e.outerWidth(!0)+5;n.css({left:e,top:g}).fadeIn(function(){c._helpBubbleIsOpen=!0}).transit({x:25},800,"easeInOutCubic").transit({x:0},800,"easeInOutCubic").transit({x:25},800,"easeInOutCubic").transit({x:-0},800,"easeInOutCubic").transit({x:25},800,"easeInOutCubic").transit({x:0},800,"easeInOutCubic").delay(h).fadeOut(300,
function(){c.closeHelpBubble()});"undefined"!==typeof Storage&&localStorage.setItem(r,!0)}};g.prototype.closeHelpBubble=function(){this._helpBubbleIsOpen&&this._$helpBubbleContainer.hide();a(b).off("resize",this._onCloseHelpBubble);this._helpBubbleIsOpen=!1};e[c]=g;var f={data:{_pluginInstances:[]}};a.fn[c]=function(){var b=arguments[0],c=arguments;if(f[b])b=f[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||!b)b=f.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),
this;return b.apply(this,c)};return a.fn[c]}var c="HelpBubble",e;"function"===typeof define&&define.amd?define(c,["jquery","jqueryTransmit"],function(a){return g(a)}):(e=b.FID=b.FID||{},g(a))})(jQuery,window);define("HelpBubble",["jquery"],function(a){return function(){return a.HelpBubble}}(this));
define("tasks/popup-core-position-list-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofacda/snippet/listCorePosition",type:"POST",buildParams:function(a){return{AcctNum:a.accountNumber,isCashAccount:a.isCashAccount,registrationType:a.registrationType}}})});define("text!templates/positions-popup-snippet.html",[],function(){return'<% \n\tvar changeInPricedSign = "";\n\tvar changeInPricedClass = "";\n\tif(totalDollarChgAtCloseIntradayRp < 0)\n\t{\n\t\tchangeInPricedSign = "";\n\t\tchangeInPricedClass = "currency color-negative";\n\t}\n\telse if(totalDollarChgAtCloseIntradayRp > 0)\n\t{\n\t\tchangeInPricedSign = "+";\n\t\tchangeInPricedClass = "currency color-positive";\n\t}\n\telse\n\t{\n\t\tchangeInPricedSign = "";\n\t\tchangeInPricedClass = "currency";\n\t}\n\tvar changeInNotPricedSign = "";\n\tvar changeInNotPricedClass = "";\n\tif(totalDollarChgAtCloseRp < 0)\n\t{\n\t\tchangeInNotPricedSign = "";\n\t\tchangeInNotPricedClass = "currency color-negative";\n\t}\n\telse if(totalDollarChgAtCloseRp > 0)\n\t{\n\t\tchangeInNotPricedSign = "+";\n\t\tchangeInNotPricedClass = "currency color-positive";\n\t}\n\telse\n\t{\n\t\tchangeInNotPricedSign = "";\n\t\tchangeInNotPricedClass = "currency";\n\t}\n\t\n\tvar changeSinceLastCloseSign = "";\n\tvar changeSinceLastCloseValueClass = "";\n\tif(displayAsSubTotalGroupByAccts)\n\t{\n\t\tif(grandTotalDollarChgAtCloseRp < 0)\n\t\t{\n\t\t\tchangeSinceLastCloseValueClass = "color-negative";\n\t\t}\n\t\telse if(grandTotalDollarChgAtCloseRp > 0)\n\t\t{\n\t\t\tchangeSinceLastCloseSign = "+";\n\t\t\tchangeSinceLastCloseValueClass = "color-positive";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchangeSinceLastCloseValueClass = "";\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(grandTotalDollarChgAtCloseTxn < 0)\n\t\t{\n\t\t\tchangeSinceLastCloseValueClass = "color-negative";\n\t\t}\n\t\telse if(grandTotalDollarChgAtCloseTxn > 0)\n\t\t{\n\t\t\tchangeSinceLastCloseSign = "+";\n\t\t\tchangeSinceLastCloseValueClass = "color-positive";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchangeSinceLastCloseValueClass = "";\n\t\t}\n\t}\n\t\n%>\n<div class="popup--tooltip-bubble-pointer">\n\t\x3c!-- ICON: icon-arrow-white-up --\x3e\n\t<img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/icon-sg-arrow-pointer.png" width="26" height="14" alt="Arrow Pointer" onerror="this.style.display=\'none\'" />\n</div>\n<div class="popup--tooltip-bubble-content magicgrid--subtotal-popup" aria-label="subtotal popup">\n\t<div class="base-popup--content-wrapper">\n\t\t<div class="base-popup--header">\n\t\t\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup">\n\t\t\t\t\x3c!-- ICON: icon-x-gray --\x3e\n\t\t\t\t<div class="close-icon-div"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="base-popup--content">\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="col-left">Change in Securities Priced Today</td>\n\t\t\t\t\t\t<td class="col-right <%= changeInPricedClass %>"><%= changeInPricedSign %><%= displayTotalDollarChgAtCloseIntradayRp %></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="col-left">Change in Securities Not Priced Today</td>\n\t\t\t\t\t\t<td class="col-right <%= changeInNotPricedClass %>"><%= changeInNotPricedSign %><%= displayTotalDollarChgAtCloseRp %></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t\t<tfoot>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="col-left">Total</td>\n\t\t\t\t\t\t<td class="col-right <%= changeSinceLastCloseValueClass %>">\n\t\t\t\t\t\t\t<%= changeSinceLastCloseSign %>\n\t\t\t\t\t\t\t<%\n\t\t\t\t\t\t\t\tif(displayAsSubTotalGroupByAccts)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<%= displayGrandTotalDollarChgAtCloseRp %> \x3c!-- display as sub total for every account when group by accounts. --\x3e\n\t\t\t\t\t\t\t<% \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<%= displayGrandTotalDollarChgAtCloseTxn %> \x3c!-- group by no grouping. --\x3e\n\t\t\t\t\t\t\t<% \n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n</div>'});
(function(a,b){function g(a){function g(b,c){function e(a){l._onClick.apply(l,arguments)}var f=a(b),j=a(c),h=f.prev(J),k=f.find(U),l=this;this._ltie9=w&&0<=w.indexOf("lt-ie9");this._isLimitedRow=h.hasClass("limited-row");this.$contentRow=f;this.$parentRow=h;this._$header=j;this._isContentRowVisible=f.hasClass(P)&&f.is(":visible");h.on("keydown",function(a){32===a.keyCode&&h.trigger("click")});h.on("click",e);k.on("keydown",function(a){32===a.keyCode&&k.trigger("click")});k.on("click",e)}function f(b,
c,e){b=a.Event(ea.ContentRowVisibilityToggled,{isContentRowVisible:b,drawerInstance:c,instance:e});c.trigger(b)}function j(c){a(b);c=a(c);var e=a(c.children("thead")[0]).find("tr");e.find("th");var f=a(c[0].outerHTML.replace(/ jQuery\d+="(?:null|\d+)"/g,""));f.find("thead tr th");f.addClass(I).css({position:"fixed","overflow-y":"visible",top:"0",display:"none"});this._$magicGridHeadersRow=e;f.find("tbody").first().empty();c.before(f);k();l()}function k(){a(".magicgrid--wrapper").each(function(c,e){var f=
a(e).find(B);if(!(2>f.length)){var g=a(b),j=f.eq(1);a(j.children("thead")[0]).find("tr").find("th");f=f.eq(0);f.find("thead tr th");var h=j.height(),k=j.find("thead tr").height(),m=j.offset().top,h=m+h-k,n=g.scrollTop(),p=f.is(":visible"),r=!1;0<n-m&&n<h-k?p?f.width(j.width()):(g.scrollTop(n),f.show(),l(),r=!0):p&&(f.hide(),r=!0);r&&(g=a.Event(ea.HeaderVisibilityChanged,{headerIsVisible:!p}),j.trigger(g))}})}function l(){a(".magicgrid--wrapper").each(function(c,e){a(b);for(var f=a(e).find(B).eq(1),
g=a(f.children("thead")[0]).find("tr").find("th"),j=g.length,h=a(e).find(B).eq(0),k=h.find("thead tr th"),l=0;l<j;l++)a(k[l]).width(Math.floor(a(g[l]).width()));h.width(f.width())})}function p(b,c){function e(){f.hasClass(N)?(h.show(),f.attr(z,"true")):(h.hide(),f.attr(z,"false"))}var f=a(b);if(!(1>c.length||1!=f.length)){var g=f.find(".magicgrid--sleeve-expander-icon"),j=f.find(".magicgrid--sleeve-expander-text"),h=this;this._$sleeveRow=f;this._sleeveChildren=c;f.hasClass(P)?h.show():h.hide();f.on("keydown",
function(a){32===a.keyCode&&f.trigger("click")});g.on("click",e);j.on("click",e)}}function m(c){a(b);c=a(c);var e=c.find("tr.magicgrid--sleeve-row");c.find("tr"+V);for(var f=e.length,g=[],j,h,k=0;k<f;k++)j=a(e[k]),h=j.data("sleeve-row-children-name"),h=c.find("tr."+h),g.push(new p(j,h))}function n(b){b=a(b);b.removeClass(ca);var c=b.find(".security-notification");1>c.length&&(c=null);this._$tableCell=b;this._$parentTableRow=b.parent("tr");this._$heatmap=b.find(".heatmap");this._$flagElement=c;this._rowHeight=
-1;this.isVisible=!1;this._$colspanValue=b.attr("colspan")}function r(b){b=a(b).find(W);var c=b.length;if(!(1>c)){for(var e=[],f=0;f<c;f++)e.push(new n(b[f]));this._symbols=e;this._symbolsLength=c;this.isVisible=!1}}function s(c,e){function f(a){T&&(l(),p(),a.isContentRowVisible?a.instance._isLimitedRow&&a.drawerInstance.is(":hidden")?a.instance.close():(ia&&ia.close(),ia=a.instance):a.instance._isLimitedRow?ia&&ia._isLimitedRow&&(ia=null):ia=null)}function k(){db=Math.ceil(la.offset().top);Sa=Math.ceil(a(b).height()-
(db-la.parent().offset().top))}function l(){T=[];T.getRowPositionFromPixelHeight=function(a){if(1>this.averageHeight)return-1;var b=Math.ceil(a/this.averageHeight);if(0>=b)return 0;var c=this.length-1;b>c&&(b=c);for(var d=this[b];0<=b&&0>=d;)d=this[--b];if(d<a){for(;b<=c&&d<a;)d=this[++b];b>c&&(b=c)}else for(;0<=b&&(0>=d||d>a);)d=this[--b];0>b&&(b=0);return b};for(var b=null,c=0;c<W;c++)b=a(ca[c]),b.hasClass(O)&&!b.is(":visible")?T.push(0):T.push(b.offset().top);T.averageHeight=Math.ceil(ca.height())}
function n(b,c){for(var e,f=b;f<=c;f++)e=a(ca[f]),e.addClass(R),e.hasClass(S)&&e.find(Ha).attr("colspan",ka);na=0;oa=-1}function p(){var c=a(b).scrollTop(),e,f,g,j,h;c<db&&(c=db);g=na;j=oa;h=T.getRowPositionFromPixelHeight(c);c=T.getRowPositionFromPixelHeight(c+Sa)+6;c>W&&(c=W);0<h&&(h--,0<h&&h--);if(!(g==h&&j==c)&&(h<j&&g<c&&(h>g?j=h-1:g=c+1),e=na,f=oa,n(g,j),!(6>c))){h<f&&e<c?h>e?(na=h,0<f&&f<c&&(h=f+1),oa=c):(oa=c,c=e-1,na=h):(na=h,oa=c);for(j=h;j<=c;j++)g=a(ca[j]),g.removeClass(R),g.hasClass(S)&&
g.find(Ha).removeAttr("colspan")}}var s=[],v,z,N,P,I,U;if(c){v=a(c);v.hasClass(D)||(v=v.find(y));z=v.find(B);N=z.find("thead > tr").first();I=!w||0>w.indexOf("lt-ie10")&&0>w.indexOf("lt-ie9")?new j(z):null;P=new m(z);U=new r(z);this._$magicGridWrapper=v;this._$magicGrid=z;this._sleeves=P;this._fixedHeadersInstance=I;this._fullStockNameSymbols=U;this._isGreyScrollEnabled=!1;v=z.find("tr"+V);P=v.length;for(U=0;U<P;U++)s.push(new g(v[U],N));this.redraw=function(){I&&I.refreshWidths();T&&(k(),n(),l(),
p())};var ca=z.find("tbody:first > tr"+J),W=N=ca.length,la=z.find("tbody"),db,Sa,Ha="td:first",ka=ca.find(Ha).eq(0).attr("colspan"),na=0,oa=-1,T=null,ia=null;this.contentRows=s;this.$normalRows=ca;this._colspanValue=ka;if(119<N&&e&&e.grayscroll){var qa=function(){ra=null;p()},ja=function(){ra&&clearTimeout(ra);ra=setTimeout(qa,Ka)};a("body").addClass(Z);this._isGreyScrollEnabled=!0;s=[];for(v=0;v<W;v++)z=a(ca[v]),N=a(ca[v]).next(),0<N.length&&N.hasClass(O)&&(ca.splice(++v,0,N[0]),W++,N.on(ea.ContentRowVisibilityToggled,
f)),s.push(z.find(Ha));this._$firstColumnCells=s;k();l();var Ka=400,ra=null;A.on("scroll",ja);A.on("resize",function(){ra&&clearTimeout(ra);ra=setTimeout(function(){k();ja()},500)});ja()}}}function v(b){return a(b).data("magicgrid-instance")}e=b.FID=b.FID||{};var A=a(b),w=a("html").attr("class"),z="aria-expanded",D="magicgrid--wrapper",y="."+D,B=".magicgrid--table",I="magic-grid--fixed-headers",S="normal-row",J="."+S,O="content-row",V="."+O,N="collapsed",P="expanded",U=".magicgrid--drawer-close-button",
W=".magic-grid--full-stock-name",ca="full-stock-name-enabled",R="grayscroll--hidden-row",Z="magic-grid--partial-print",ea={ContentRowVisibilityToggled:"ContentRowVisibilityToggled",ContentRowOpeningComplete:"ContentRowOpeningComplete",ContentRowClosingComplete:"ContentRowClosingComplete",HeaderVisibilityChanged:"HeaderVisibilityChanged",PendingActivityVisibilityToggled:"PendingActivityVisibilityToggled"};g.prototype._onClick=function(b){a(b.currentTarget);var c=this.$contentRow;c.find(".magicgrid--drawer").data("json-trade");
if(!this._ltie9||!this._isLimitedRow)c.hasClass(P)&&c.is(":visible")?this.close():this.open();b.preventDefault()};g.prototype.open=function(){function b(){e=A.height()-A.scrollTop();j=c.height()+c.offset().top;g=l._$header.height();h=c.offset().top-g-l.$parentRow.height();if(e<j&&h>g){var f=!1;a("html, body").animate({scrollTop:h},{duration:550,complete:function(){f||(c.trigger(m),f=!0)}})}else c.trigger(m)}var c=this.$contentRow,e,g,j,h;if(!this._isContentRowVisible){var k=this.$parentRow,l=this;
this._isContentRowVisible=!0;var m=a.Event(ea.ContentRowOpeningComplete,{isContentRowVisible:this._isContentRowVisible,drawerInstance:c});c.addClass(P);c.attr("aria-hidden","false");k.attr(z,"true");f(!0,c,l);this.openDefr?(this.openDefr.done(b),delete this.openDefr):setTimeout(b,50)}};g.prototype.close=function(){if(this._isContentRowVisible){var b=this.$contentRow,c=this.$parentRow,e=a.Event(ea.ContentRowClosingComplete);this._isContentRowVisible=!1;b.removeClass(P);b.attr("aria-hidden","true");
c.attr(z,"false");f(!1,b,this);b.trigger(e)}};j.prototype.refreshWidths=l;A.on("scroll",_.debounce(k,50));A.on("resize",l);A.on("orientationchange",function(){l()});j.prototype.height=function(){return this._$magicGridHeadersRow.height()};p.prototype.show=function(){this._$sleeveRow.removeClass(N).addClass(P);this._sleeveChildren.removeClass("hidden")};p.prototype.hide=function(){this._$sleeveRow.removeClass(P).addClass(N);for(var b=this._sleeveChildren.length,c,e=0;e<b;e++)c=a(this._sleeveChildren[e]),
c.addClass("hidden").removeClass(P),"false"==c.attr("aria-hidden")&&c.attr("aria-hidden","true")};n.prototype.show=function(){var a=this;if(!a.isVisible){a.isVisible=!0;a._$tableCell.addClass(ca).css("height","auto!important");var b=a._$parentTableRow.hasClass(R);b&&(a._$parentTableRow.removeClass(R),a._$tableCell.removeAttr("colspan"));setTimeout(function(){var c=a._$parentTableRow.height();a._rowHeight=c;a._$parentTableRow.css("height",c+"px");a._$heatmap.css("height",c-3+"px");(c=a._$flagElement)&&
c.css("margin-top",(c.parent().height()-c.height())/2+"px");b&&(a._$parentTableRow.addClass(R),a._$tableCell.attr("colspan",a._$colspanValue))},0)}};n.prototype.hide=function(){if(this.isVisible){this.isVisible=!1;this._$tableCell.removeClass(ca);this._$parentTableRow.css("height","");this._$heatmap.css("height","");var a=this._$flagElement;a&&a.css("margin-top","")}};r.prototype.show=function(){if(!this.isVisible){this.isVisible=!0;for(var a=this._symbolsLength,b=this._symbols,c=0;c<a;c++)b[c].show()}};
r.prototype.hide=function(){if(this.isVisible){this.isVisible=!1;for(var a=this._symbolsLength,b=this._symbols,c=0;c<a;c++)b[c].hide()}};s.prototype.isEqual=function(a){return!a?!1:this._$magicGridWrapper[0]===a[0]};s.prototype.showFullStockNames=function(){this._fullStockNameSymbols.show();this.redraw()};s.prototype.hideFullStockNames=function(){this._fullStockNameSymbols.hide();this.redraw()};s.prototype.print=function(){if(this._isGreyScrollEnabled){var c=this._colspanValue,e=this._$firstColumnCells,
f=e.length,g=a("body");g.removeClass(Z);this.$normalRows.removeClass(R);for(var j,h=0;h<f;h++)j=e[h],j.removeAttr("colspan");b.print();g.addClass(Z);this.$normalRows.addClass(R);for(h=0;h<f;h++)j=e[h],j.attr("colspan",c);this.redraw()}else b.print()};s.prototype.openCorePositionDrawer=function(){a.each(this.contentRows,function(a,b){var c=b.$contentRow.find(".magicgrid--drawer"),d=c.data("json-base"),c=c.data("json-shelf");if(d&&"true"==d.isMmrCorePosition||c&&"true"==c.isUnfundedCorePostion)return b.open(),
!1})};s.Events=ea;e[c]=s;var la={data:{},init:function(b){return this.each(function(c,e){a(e).data("magicgrid-instance",new s(this,b))})},redraw:function(){v(this).redraw()},showFullStockNames:function(){v(this).showFullStockNames()},hideFullStockNames:function(){v(this).hideFullStockNames()},print:function(){v(this).print()},openCorePositionDrawer:function(){v(this).openCorePositionDrawer()}};a.fn[c]=function(){var b=arguments[0],c=arguments;if(la[b])b=la[b],c=Array.prototype.slice.call(arguments,
1);else if("object"==typeof b||!b)b=la.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};return a.fn[c]}var c="MagicGrid",e;"function"===typeof define&&define.amd?define("components/magicgrid",["jquery"],function(a){return g(a)}):(e=b.FID=b.FID||{},g(a))})(jQuery,window);
(function(a,b){var g=0;a.fn.getPercentage=function(){return this.attr("style").match(/margin\-left:(.*[0-9])/i)&&parseInt(RegExp.$1)};a.fn.adjRounding=function(b){var e=a(this);b=e.find(b);e=e.parent().width()-b.eq(0).width();if(0!==e){b.css("position","relative");for(var d=0;d<b.length;d++)b.eq(d).css("left",e*d+"px")}return this};a.fn.carousel=function(c){if(!this.data("carousel-initialized")){this.data("carousel-initialized",!0);var e=a.extend({slider:".slider",slide:".slide",prevSlide:null,nextSlide:null,
slideHed:null,addPagination:!1,addNav:c!=b&&(c.prevSlide||c.nextSlide)?!1:!0,namespace:"carousel",speed:300},c),d=this,h=document.body||document.documentElement,f={init:function(){g++;d.each(function(b){var c=a(this),d=c.find(e.slider),h=c.find(e.slide),m=h.length,n="margin-left "+e.speed/1E3+"s ease",r="carousel-"+g+"-"+b;1>=h.length||(c.css({overflow:"hidden",width:"100%"}).attr("role","application"),d.attr("id",d[0].id||"carousel-"+g+"-"+b).css({marginLeft:"0px","float":"left",width:100*m+"%",
"-webkit-transition":n,"-moz-transition":n,"-ms-transition":n,"-o-transition":n,transition:n}).bind("carouselmove",f.move).bind("nextprev",f.nextPrev).bind("navstate",f.navState),h.css({"float":"left",width:100/m+"%"}).each(function(b){var c=a(this);c.attr({role:"tabpanel document",id:r+"-slide"+b});e.addPagination&&c.attr("aria-labelledby",r+"-tab"+b)}),e.addPagination&&f.addPagination(),e.addNav&&f.addNav(),d.trigger("navstate",{current:0}))})},addNav:function(){d.each(function(){var b=a(this),
c=b.find(e.slider)[0].id,c=['<ul class="slidecontrols" role="navigation">','\t<li role="presentation"><a href="#'+c+'" class="'+e.namespace+'-next">Next</a></li>','\t<li role="presentation"><a href="#'+c+'" class="'+e.namespace+'-prev">Prev</a></li>',"</ul>"].join("");e=a.extend(e,{nextSlide:"."+e.namespace+"-next",prevSlide:"."+e.namespace+"-prev"});b.prepend(c)})},addPagination:function(){d.each(function(b){var c=a(this),d=a('<ol class="'+e.namespace+'-tabs" role="tablist navigation" />');c.find(e.slider);
var f=c.find(e.slide);slideNum=f.length;for(associated="carousel-"+g+"-"+b;slideNum--;)b=f.eq(slideNum).find(e.slideHed).text()||"Page "+(slideNum+1),b=['<li role="presentation">','<a href="#'+associated+"-slide"+slideNum+'"',' aria-controls="'+associated+"-slide"+slideNum+'"',' id="'+associated+"-tab"+slideNum+'" role="tab">'+b+"</a>","</li>"].join(""),d.prepend(b);d.appendTo(c).find("li").keydown(function(b){var c=a(this),d=c.prev().find("a"),c=c.next().find("a");switch(b.which){case 37:case 38:d.length&&
d.trigger("click").focus();b.preventDefault();break;case 39:case 40:c.length&&c.trigger("click").focus(),b.preventDefault()}}).find("a").click(function(b){var d=a(this);"false"==d.attr("aria-selected")&&(d=-(100*d.parent().index()),c.find(e.slider).trigger("carouselmove",{moveTo:d}));b.preventDefault()})})},roundDown:function(a){a=parseInt(a,10);return 100*Math.ceil((a-a%100)/100)},navState:function(b,c){var d=a(this),f=d.find(e.slide),g=-(c.current/100),h=f.eq(g);d.attr("aria-activedescendant",h[0].id);
h.addClass(e.namespace+"-active-slide").attr("aria-hidden",!1).siblings().removeClass(e.namespace+"-active-slide").attr("aria-hidden",!0);if(e.prevSlide||e.nextSlide)d=a('[href*="#'+this.id+'"]'),d.removeClass(e.namespace+"-disabled"),0==g?d.filter(e.prevSlide).addClass(e.namespace+"-disabled"):g==f.length-1&&d.filter(e.nextSlide).addClass(e.namespace+"-disabled");e.addPagination&&(f=h.attr("aria-labelledby"),f=a("#"+f),f.parent().addClass(e.namespace+"-active-tab").siblings().removeClass(e.namespace+
"-active-tab").find("a").attr({"aria-selected":!1,tabindex:-1}),f.attr({"aria-selected":!0,tabindex:0}))},move:function(b,c){var d=a(this);d.trigger(e.namespace+"-beforemove").trigger("navstate",{current:c.moveTo});h.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");if(h.style.transition||h.style.webkitTransition||h.style.msTransition||h.style.OTransition||h.style.MozTransition)d.adjRounding(e.slide).css("marginLeft",c.moveTo+"%").one("transitionend webkitTransitionEnd OTransitionEnd",
function(){a(this).trigger(e.namespace+"-aftermove")});else d.adjRounding(e.slide).animate({marginLeft:c.moveTo+"%"},{duration:e.speed,queue:!1},function(){a(this).trigger(e.namespace+"-aftermove")})},nextPrev:function(b,c){var d=a(this),g=d?d.getPercentage():0,h=d.find(e.slide),n="prev"===c.dir?0!=g:-g<100*(h.length-1),r=a('[href="#'+this.id+'"]');if(!d.is(":animated")&&n)switch(g="prev"===c.dir?0!=g%100?f.roundDown(g):g+100:0!=g%100?f.roundDown(g)-100:g-100,d.trigger("carouselmove",{moveTo:g}),
r.removeClass(e.namespace+"-disabled").removeAttr("aria-disabled"),g){case 100*-(h.length-1):r.filter(e.nextSlide).addClass(e.namespace+"-disabled").attr("aria-disabled",!0);break;case 0:r.filter(e.prevSlide).addClass(e.namespace+"-disabled").attr("aria-disabled",!0)}else g=f.roundDown(g),d.trigger("carouselmove",{moveTo:g})}};f.init(this);a(e.nextSlide+","+e.prevSlide).bind("click",function(b){var c=a(this),d=this.hash,f=c.is(e.prevSlide)?"prev":"next",d=a(d);if(c.is("."+e.namespace+"-disabled"))return!1;
d.trigger("nextprev",{dir:f});b.preventDefault()}).bind("keydown",function(b){a(this);var c=this.hash;switch(b.which){case 37:case 38:a("#"+c).trigger("nextprev",{dir:"next"});b.preventDefault();break;case 39:case 40:a("#"+c).trigger("nextprev",{dir:"prev"}),b.preventDefault()}});d.bind("dragSnap",{wrap:this,slider:e.slider},function(b,c){a(this).find(e.slider).trigger("nextprev",{dir:"left"===c.direction?"next":"prev"})});d.filter("[data-autorotate]").each(function(){var b,c=a(this),d=c.attr("data-autorotate"),
f=c.find(e.slide).length,g=function(){var h=c.find(e.slider);switch(-(a(e.slider).getPercentage()/100)+1){case f:clearInterval(b);b=setInterval(function(){g();h.trigger("nextprev",{dir:"prev"})},d);break;case 1:clearInterval(b),b=setInterval(function(){g();h.trigger("nextprev",{dir:"next"})},d)}};b=setInterval(g,d);c.attr("aria-live","polite").bind("mouseenter click touchstart",function(){clearInterval(b)})});return this}};a.event.special.dragSnap={setup:function(c){var e=a(this),d=function(a,b){var c=
b?"margin-left 0.3s ease":"none";a.css({"-webkit-transition":c,"-moz-transition":c,"-ms-transition":c,"-o-transition":c,transition:c})},g=function(a){a=parseInt(a,10);return 100*Math.ceil((a-a%100)/100)};e.bind("snapback",function(a,c){var e=c.target,l=e.attr("style")!=b?e.getPercentage():0,l=!1===c.left?g(l)-100:g(l),p=document.body;d(e,!0);p.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");p.style.transition||p.style.webkitTransition||p.style.MozTransition?
e.css("marginLeft",l+"%"):e.animate({marginLeft:l+"%"},opt.speed)}).bind("touchstart",function(f){function g(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;p={time:+new Date,coords:[b.pageX,b.pageY]};deltaX=Math.abs(l.coords[0]-b.pageX);deltaY=Math.abs(l.coords[1]-b.pageY);if(l&&!(deltaX<deltaY||55>deltaX)&&55<=deltaX)l.interacting=!0,m.css({"margin-left":n+100*((p.coords[0]-l.coords[0])/l.origin.width())+"%"}),a.preventDefault()}var h=f.originalEvent.touches?f.originalEvent.touches[0]:
f;f=a(f.target);var l={time:+new Date,coords:[h.pageX,h.pageY],origin:f.closest(c.wrap),interacting:!1},p,m=f.closest(c.slider),n=m.attr("style")!=b?m.getPercentage():0;d(m,!1);e.bind("gesturestart",function(){e.unbind("touchmove",g).unbind("touchend",g)}).bind("touchmove",g).one("touchend",function(a){e.unbind("touchmove",g);d(m,!0);if(l&&p){var c=Math.abs(l.coords[0]-p.coords[0]),f=Math.abs(l.coords[1]-p.coords[1]),h=l.coords[0]>p.coords[0];if(20<c&&c>f)a.preventDefault();else{l.interacting&&e.trigger("snapback",
{target:m,left:h});return}a=l.origin.width()/4;-c>a||c>a?l.origin.trigger("dragSnap",{direction:h?"left":"right"}):e.trigger("snapback",{target:m,left:h})}l=p=b})})}}})(jQuery);define("carousel",["jquery"],function(a){return function(){return a.$.fn.carousel}}(this));
(function(a,b){function g(a){function f(d,g,l){function p(b){b=b.target;b===z[0]||0<a(z[0]).has(b).length||r()}function m(){return b.matchMedia?b.matchMedia("(orientation: portrait)").matches:!0}function n(){0<=y&&clearTimeout(y);y=setTimeout(function(){var a=m();D!=a?(D=m(),v._tooltipSetup(w,z,A)):(r(),e.off("resize",n),y=-1)},100)}function r(){z.attr("style","").BasePopup("close");s.off("touchstart click",p)}var s=a(c),v=this,A=a(d),w=a(g),z=a(l).BasePopup();d=z.find(".popup--tooltip-bubble-pointer");
g=z.find(".arrow-img");this.$arrow=d;this.$arrowImage=g;this.CENTER_WINDOW_WIDTH=568;var D=m(),y=-1;w.on("click",function(b){b.stopPropagation();s.on("touchstart click",p);e.on("resize",n);v._tooltipSetup(w,z,A);b=a.Event(f.event.anchorClicked,{popupInstance:v,$container:A,$anchor:w,$popup:z});w.trigger(b)})}d=b.FID=b.FID||{};f.event={anchorClicked:"anchorClicked"};f.prototype._tooltipSetup=function(c,d,f){if(e.width()<=this.CENTER_WINDOW_WIDTH)d.css({top:b.innerHeight/2,"margin-top":-(d.height()/
2),position:"fixed"}),d.BasePopup("open");else{var g=c.offset().top+c.outerHeight()+this.$arrowImage.height()-f.offset().top,m=0;"relative"===f.css("position")&&(m=parseInt(f.css("margin-left")));var n=c.offset().left+c.outerWidth()/2-d.outerWidth()/2-m;d.BasePopup("open");d.css({top:g});if("true"!==d.attr("data-dtfullwidth"))n<f.offset().left?n=c.offset().left-m-m:n+d.outerWidth()>f.offset().left+f.outerWidth()&&(n=c.offset().left+c.outerWidth()-d.outerWidth()-m-m),d.css({"margin-left":0}),d.offset({left:n});
else{var g=f.offset().left-c.offset().left,m=f.offset().left-d.offset().left,n=f.offset().left-c.parent().offset().left,r=a(b).width()-(c.offset().left+c.outerWidth()),s=a(b).width()-(d.offset().left+d.outerWidth()),v=f.width()-c.parent().width()+n;g>m&&d.css({left:-n,marginLeft:0});r<s&&d.css({left:f.outerWidth()-d.outerWidth()-v,marginLeft:0})}f=this.$arrow;f.css({left:c.offset().left+c.outerWidth()/2-d.offset().left-this.$arrowImage.outerWidth()/2});0>f.position().left?d.addClass("reduced-top-left-rounded-corner"):
d.removeClass("reduced-top-left-rounded-corner");setTimeout(void 0,0)}};return d.DynamicTooltip=f}var c=b.document,e=a(b),d;"function"===typeof define&&define.amd?define("components/dynamic-tooltip",["jquery","jqueryui"],function(a){return g(a)}):(d=b.FID=b.FID||{},g(a))})(jQuery,window);
(function(a,b,g){function c(a,c){function e(f,g){function k(){z.trigger("currentVisible",function(b){f.trigger(a.Event("carouselitemvisibilitychanged",{items:b}))})}var l={responsive:!0,width:"100%",auto:!1,prev:{button:function(){return a(this).parent().siblings(".prev")},key:"left",onAfter:k},next:{button:function(){return a(this).parent().siblings(".next")},key:"right",onAfter:k},onCreate:k,pagination:function(){return a(this).parent().siblings(".pagination")},mousewheel:!1,swipe:{onMouse:!0,onTouch:!0},
scroll:1,items:{width:235,height:"variable",visible:{min:1,max:50}}},m=a(f),n=m.closest(v),p=m.closest(j),z=m.find(r);new c.Tabs(m,g);z.find("li").css(A);z.carouFredSel(l).parent().css("margin","");p.on(c.MagicGrid.Events.ContentRowVisibilityToggled,function(a){a.target===n[0]&&(a.isContentRowVisible&&z.trigger("updateSizes"),p.MagicGrid("redraw"))});l=_.debounce(k,250);a(b).off(".researchTab");a(b).on("resize.researchTab",l);m.on(c.Tabs.Events.tabclicked,function(b){1==a(b.tabContainer).find(s).length&&
(setTimeout(k),z.trigger("updateSizes"))})}for(var j=".magicgrid--wrapper",k=".magicgrid--total-pending-activity-link-cell",l=".magicgrid--pending-activity-row",p="rowsclassname",m={},n,r=".magicgrid--drawer-carousel-content",s=".carousel",v=".content-row",A={display:"table-cell","float":"none"},w=a(".simple-tabs--wrapper"),z=w.length,D=[],y=0;y<z;y++)D.push(new e(w[y]));c.Applications=c.Applications||{};m=c.Applications.Positions||{};m.initialize=function(){function b(c){0===a(c.target).closest(".magicgrid--header-sort-popup").length&&
r.BasePopup("close")}function e(b){b.preventDefault();b=a(this).closest(".magicgrid--total-row "+k);var c;c=b.parent().hasClass("magicgrid--pending-activity-row-alt")?b.parent().prev().find(k):b.parent().next().find(k);var f=b.data(p),f=b.parent("tr").siblings(l+"."+f);1>f.length||(f.toggleClass("hidden"),b.toggleClass("hide"),c.toggleClass("hide"))}0<a("html.lt-ie9").length&&(a(".stock-name").on("mouseenter mouseleave",function(){a(this).attr("title",a(this).data("stock-description"))}),a(".stock-third-row").on("mouseenter mouseleave",
function(){a(this).attr("title",a(this).data("coupon-rate"))}));for(var f=a(".magicgrid--header-sort-popup"),r=f.BasePopup({group:"positions"}).detach(),s=a(".magicgrid--sleeve-question-mark"),v=s.closest(".magicgrid--wrapper"),z=[],w=s.length,A,y,D=0;D<w;D++)A=a(s[D]),y=A.siblings(".dynamic-tooltip"),a(A.parent()).on("keydown",function(b){32===b.keyCode&&(b.stopPropagation(),a(b.target).find(".magicgrid--sleeve-question-mark").trigger("click"))}),y.on("click",function(a){a.stopPropagation()}),z.push(new c.DynamicTooltip(v,
A,y));s=!1;0<a(".js-gray-scroll-enabled").length&&(s=!0);n=a(j).MagicGrid({grayscroll:s});n.siblings(".positions--above-table-section-container").find(".positions--print-positions").on("click",function(){n.MagicGrid("print")});a.BasePopup.setDisplayMode(a.BasePopup.DisplayMode.NonBlocking);n.on("click",".magicgrid--subtotal-popup-link",function(b){b.preventDefault();var c=a(this);b=c.parent().find(".base-popup");if(!(1>b.length)){if(1>b.find(".base-popup--close-button").length){var c={totalDollarChgAtCloseIntradayRp:c.data("regularpositiongroup-totaldollarchgatcloseintraday"),
totalDollarChgAtCloseRp:c.data("regularpositiongroup-totaldollarchgatclose"),displayAsSubTotalGroupByAccts:c.data("displayassubtotalgroupbyaccts"),grandTotalDollarChgAtCloseRp:c.data("regularpositiongroup-grandtotaldollarchgatclose"),grandTotalDollarChgAtCloseTxn:c.data("txndata-grandtotaldollarchgatclose"),displayTotalDollarChgAtCloseIntradayRp:c.data("regularpositiongroup-displaytotaldollarchgatcloseintraday"),displayTotalDollarChgAtCloseRp:c.data("regularpositiongroup-displaytotaldollarchgatclose"),
displayGrandTotalDollarChgAtCloseRp:c.data("regularpositiongroup-displaygrandtotaldollarchgatclose"),displayGrandTotalDollarChgAtCloseTxn:c.data("txndata-displaygrandtotaldollarchgatclose")},e=require("text!templates/positions-popup-snippet.html"),c=_.template(e)(c);b.html(c);b.BasePopup({group:"positions"})}b.BasePopup("toggle")}});n.on("click",".positions--drawer-in-link-inactive",function(b){alert(a(b.currentTarget).attr("title"))});a(".magicgrid--stacked-data-header.fid-datagrid--sortable .magicgrid--stacked-data-title.fid-datagrid--sortable-name ").on("click",
function(e){e.preventDefault();e.stopPropagation();c.InfoFlyout!=g&&c.InfoFlyout.close();e=a(e.currentTarget);e.closest("th").find(".magicgrid--stacked-data-value-container").is(":visible")||(r.BasePopup("isOpen")||(f.detach(),e.parent().find(".magicgrid--header-sort-wrapper").append(f)),r.BasePopup("toggle"),a(document).on("touchstart click keyup",b))});n.on(c.MagicGrid.Events.HeaderVisibilityChanged,function(){r.BasePopup("close")});n.on("click",".magicgrid--total-row "+k+" .magicgrid--total-pending-activity-link",
function(a){e.apply(this,arguments)});m.redraw=function(){n.MagicGrid("redraw")}};m.getMagicGridInstance=function(){return n};m.initializeDrawer=function(a,b){return new e(a.find(".simple-tabs--wrapper"),b)};m.defaultDrawerView="research";m.openCorePositionDrawer=function(){n.MagicGrid("openCorePositionDrawer")};return c.Applications.Positions=m}if("function"===typeof define&&define.amd)define("components/positions",["jquery","components/magicgrid","carousel","components/fidtab","components/dynamic-tooltip"],
function(a){var e=b.FID=b.FID||{};return c(a,e)});else{var e=b.FID=b.FID||{};c(a,e)}})(jQuery,window);
(function(a,b){function g(g){var n=a(b);g=a(g);var p=a(".sorting-popup"),s=a(".lockedheadergrid"),v=g.attr("class"),A=g.closest(j),w=s.find("thead").clone(),v=a("<table/>").addClass(v+" fixed-table-header "+k).prepend(w).appendTo(A),A=a(".total_chg_since_close"),w=v.height(),z=g.find("th"),D=z.length,y=v.find("th"),B=g.find(".normal-row"),I=g.find(".headcol"),S=g.find(".heatmap"),J=parseFloat(I.css("maxWidth")),O=new l.MultiAccordion(a(".pending-activity--toggle"),a(".pending-activity--content"));
this.$fidDataGrid=g;this.$fixedHeaderHeight=w;this.$fixedHeaderTable=v;this.$flexgridHeadcol=I;this.$flexgridHeatmap=S;this.$fixedheaderth=y;this.$fiddatagridth=z;this.$sortPopup=p;this.$lockedHeaderGrid=s;this.tableColumnCount=D;this.$fidDataGridRows=B;this.$totalChgSinceClose=A;this._headcolOriginalWidth=J;this._pendingActivityToggle=O;this.setFixedHeaderState();var V=this;this._onWindowScroll=function(a){c.call(V,a)};n.on("scroll",this._onWindowScroll);this._onResizeWindow=function(a){e.call(V,
a)};n.on("resize",this._onResizeWindow);B.on("click",d);g.find("thead tr th").on("click",h);v.find("thead tr th").on("click",h);A.on("click",f);this.updateFilterPopupPosition()}function c(a){this.calculateFGPosition();this.setFixedHeaderState();this.updateFilterPopupPosition(a)}function e(a){this.calculateFGPosition();this.setFixedHeaderWidths();this.setFixedHeaderState();this.setSymbolColumnWidth();this.updateFilterPopupPosition(a)}function d(c){c.preventDefault();var d=a(c.target).closest("tr");
c=a(c.target).closest(".normal-row");d=d.next(".content-row");d.toggleClass("content-row-hidden");var e=d.find(".drawer").toggleClass("drawer-before-open-animation");setTimeout(function(){e.toggleClass("drawer-before-open-animation").toggleClass("drawer-open-animation")},25);d=a(b);d=a(this).closest(".flexgrid").offset().top-d.scrollTop();c=c.offset().top;var f=a(".fixed-table-header").height();d<=f&&!a(this).next().hasClass("content-row-hidden")&&a("html, body").animate({scrollTop:c-f},800,function(){})}
function h(b){b.preventDefault();var c=a.Event(p.columnClick,{column:b.currentTarget});a(b.currentTarget).trigger(c)}function f(b){b.preventDefault();var c=a.Event(p.totalChgClick,{totalChg:b.currentTarget});a(b.currentTarget).trigger(c)}var j=".fixed-table-header--wrapper",k="fixed-table-header--hidden",l=b.FID=b.FID||{},p={columnClick:"columnClick",totalChgClick:"totalChgClick"};g.prototype.destroy=function(){a(b).off("scroll",this._onWindowScroll).off("resize",this._onResizeWindow);this.$fidDataGridRows.off("click");
this.$fidDataGrid.find("thead tr th").off("click");this.$fixedHeaderTable.find("thead tr th").off("click");this.$totalChgSinceClose.off("click");this._pendingActivityToggle=this.$totalChgSinceClose=this.$fidDataGridRows=this.tableColumnCount=this.$sortPopup=this.$fiddatagridth=this.$fixedheaderth=this.$flexgridHeatmap=this.$flexgridHeadcol=this.$fixedHeaderTable=this.$fixedHeaderHeight=this.$fidDataGrid=null};g.prototype.setSymbolColumnWidth=function(){var b=a(".flexgrid-wrapper").width(),c=a(".flexgrid").width(),
b=b-c,c=a("th.headcol").width();0<b?300<c+b?a(".headcol").css("maxWidth","300px"):a(".headcol").css("maxWidth",c+b+"px"):a(".headcol").css("maxWidth",this._headcolOriginalWidth+"px")};g.prototype.setFixedHeaderState=function(){var c=a(b),d=this.$fixedHeaderTable,e=c.scrollLeft(),f=this.$fidDataGrid.offset(),c=f.top;d.css("left",f.left-e+"px");0>this.fgPositionTop?(d.removeClass(k),this.setFixedHeaderWidths(),d.css("top","0px"),e=this.$fidDataGrid.height(),c+=e,e=a(b).scrollTop(),f=this.$fixedHeaderHeight,
e>=c-f&&d.css("top",-Math.abs(e-c-f)-f+"px")):d.addClass(k)};g.prototype.calculateFGPosition=function(){var c=a(b),d=this.$fidDataGrid.offset().top,e=this.$flexgridHeadcol.width(),c=c.scrollTop();this.totalHeadcolWidth=e+this.$flexgridHeatmap.width();this.fgPositionTop=d-c};g.prototype.setFixedHeaderWidths=function(){var b=this.$fixedHeaderTable,c=this.$fidDataGrid.width(),d=this.tableColumnCount;b.width(c);for(b=0;b<d;b++){var c=a(this.$fixedheaderth[b]),e=a(this.$fiddatagridth[b]);c.css("width",
e.css("width"));e.css("width",e.css("width"))}};g.prototype.updateFilterPopupPosition=function(a){var c=this.$lockedHeaderGrid.offset().left,d="undefined"!==typeof b.FID.$selectedHeaderFilter?d=l.$selectedHeaderFilter.offset().left:0,c=d-c;if(0>this.fgPositionTop){var d=this.$fixedHeaderTable.offset().top,e=this.$fidDataGrid.offset().top;this.$sortPopup.css("top",d-e)}else this.$sortPopup.css("top","auto");"undefined"!==typeof a&&"scroll"!==a.type&&this.$sortPopup.css("left",c)};g.prototype._onFlexgridRowClick=
d;g.prototype._onColumnHeaderClick=h;g.prototype._onTotalChgClick=f;g.Events=p;l.FixedTableHeader=g})(jQuery,window);define("components/fixed-table-header",["jquery"],function(a){return function(){return a.FID.FixedTableHeader}}(this));
(function(a){var b=window.FID=window.FID||{};b.Applications=b.Applications||{};b.Applications.Positions=b.Applications.Positions||{};b.Applications.Positions.Controls={initialize:function(){function g(b){b.preventDefault();j.ModalPopup("toggle");m.appendTo("#popup-positions-radio").show();m.addClass("positions--display-inline");n.removeClass("positions--display-inline").addClass("positions--display-none");r.addClass("positions--fid-select-bordernone");s.addClass("positions--fid-select-bb");A.appendTo("#popup-positions-check").show();
A.addClass("positions--display-inline");w.removeClass("positions--display-inline").addClass("positions--display-none");z.addClass("positions--fid-select-bordernone");D.addClass("positions--fid-select-bb");U?(S=[],a("input[name=REQUESTED_SHOW_TYPE_IND]:checked").each(function(){S.push(a(this).attr("id"))})):a("input[name=REQUESTED_SHOW_TYPE_IND]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),O))});W?(J=[],a("input[name=radioGroupTopGrid]:checked").each(function(){J.push(a(this).attr("id"))})):
a("input[name=radioGroupTopGrid]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),V))});0<a("#radioAccounts").length&&a("#radioAccounts").focus()}function c(b){b.preventDefault();k.BasePopup("toggle");k.addClass("positions--dropdown-position");m.appendTo("#positions--dropdown-groupby").show();m.addClass("positions--display-inline");n.addClass("positions--display-inline");r.removeClass("positions--fid-select-bordernone").addClass("positions--fid-select-border");(N=!N)?s.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb"):
s.removeClass("positions--fid-select-bb").addClass("positions--fid-select-bbnone");D.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");P=!0;0<a("#radioAccounts").length&&a("#radioAccounts").focus();W?(J=[],a("input[name=radioGroupTopGrid]:checked").each(function(){J.push(a(this).attr("id"))})):a("input[name=radioGroupTopGrid]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),V))})}function e(){l.BasePopup("toggle");l.addClass("positions--dropdown-position");
A.appendTo("#positions--dropdown-show").show();A.addClass("positions--display-inline");w.addClass("positions--display-inline");z.removeClass("positions--fid-select-bordernone").addClass("positions--fid-select-border");(P=!P)?D.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb"):D.removeClass("positions--fid-select-bb").addClass("positions--fid-select-bbnone");s.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");N=!0;0<a("#cbAllPositions").length&&
a("#cbAllPositions").focus();U?(S=[],a("input[name=REQUESTED_SHOW_TYPE_IND]:checked").each(function(){S.push(a(this).attr("id"))})):a("input[name=REQUESTED_SHOW_TYPE_IND]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),O))})}function d(){S=[];S=O.slice();U=!1;a("input[name=REQUESTED_SHOW_TYPE_IND], input[name=CBSFSN_INPUT], input[name=CBSWS_INPUT], input[name=CBSFC_INPUT]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),O))})}function h(){J=[];J=
V.slice();W=!1;a("input[name=radioGroupTopGrid]").each(function(){a(this).prop("checked",-1!=a.inArray(a(this).attr("id"),V))})}function f(){s.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");N=!0;D.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");P=!0}a(window).off(".position-controls");a(document).off(".position-controls");var j=a("#positions--modal").ModalPopup(),k=a("#positions--dropdown-groupby");0<k.length&&k.BasePopup();var l=
a("#positions--dropdown-show").BasePopup(),p=(b.Accessibility=b.Accessibility||{}).BaseRole,m=a(".positions--dropdown-groupby-content"),n=a(".positions--dropdown-groupby-content-footer"),r=a(".positions--dropdown-groupby-select-content"),s=a(".positions--fid-select-dropdown-groupby"),v=a("#positions--dropdown-groupby-select"),A=a(".positions--dropdown-show-content"),w=a(".positions--dropdown-show-content-footer"),z=a(".positions--dropdown-show-select-content"),D=a(".positions--fid-select-dropdown-show"),
y=a("#positions--dropdown-show-select"),B=a(".positions--customize-positions"),I=a(".checkbox-component--checkbox-element:not(.cbSWS,.cbSFSN,.cbSFC)"),S=[],J=[],O=[];a("input[name=REQUESTED_SHOW_TYPE_IND_LAST_TIME]:checked").each(function(){O.push(a(this).data("chked-id"))});var V=[a("#js-selected-radioId").val()],N=!0,P=!0,U=!0,W=!0;a.BasePopup.setDisplayMode(a.BasePopup.DisplayMode.NonBlocking);a(".modal-popup--overlay")&&a(".base-modal--positions-container").each(function(){a(".base-modal--positions-container").insertAfter(".modal-popup--overlay")});
"true"===a("#institutionalMMKTFundExistInd").val()?a(".PositionsFootnoteThree").removeClass("hidden"):a(".PositionsFootnoteThree").addClass("hidden");a("#cbAllPositions").click(function(){I.attr("checked",this.checked)});I.click(function(){I.length-1==a(".checkbox-component--checkbox-element:not(.cbSWS,.cbSFSN,.cbSFC):checked:not(#cbAllPositions)").length?a("#cbAllPositions").attr("checked","checked"):a("#cbAllPositions").removeAttr("checked")});B.on("click",g);v.on("click",c);y.on("click",e);a(".positions--dropdown-groupby-button").on("click",
function(b){b.preventDefault();J=[];a("input[name=radioGroupTopGrid]:checked").each(function(){J.push(a(this).attr("id"))});V=[];V=J.slice();k.BasePopup("close");s.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");W=N=!0;a(".positions--dropdown-groupby-button").trigger("evt-position-groupby-apply")});a(".positions-modal-window-container .positions-modal-window-button").on("click",function(){a(".positions-modal-window").ModalPopup("close")});a(".positions--dropdown-show-button").on("click",
function(b){b.preventDefault();S=[];a("input[name=REQUESTED_SHOW_TYPE_IND]:checked, input[name=CBSFSN_INPUT]:checked, input[name=CBSWS_INPUT]:checked, input[name=CBSFC_INPUT]:checked").each(function(){S.push(a(this).attr("id"))});O=[];O=S.slice();l.BasePopup("close");D.removeClass("positions--fid-select-bbnone").addClass("positions--fid-select-bb");U=P=!0;a(".positions--dropdown-show-button").trigger("evt-position-popup-apply")});a(".positions--popup-apply-button").on("click",function(a){a.preventDefault();
j.ModalPopup("close")});a(".positions--popup-cancel-link").on("click",function(a){a.preventDefault();j.ModalPopup("close")});var ca=j.find(".base-popup--close-button");if(0<ca.length)ca.on("click",function(a){a.preventDefault();j.ModalPopup("close")});v.click(function(a){a.stopPropagation()});a("#positions--dropdown-groupby").click(function(a){a.stopPropagation()});y.click(function(a){a.stopPropagation()});a("#positions--dropdown-show").click(function(a){a.stopPropagation()});a("#popup-positions-radio").click(function(a){a.stopPropagation()});
a("#popup-positions-check").click(function(a){a.stopPropagation()});a(document).on("click.position-controls",function(){h();d();0<k.length&&k.BasePopup("close");l.BasePopup("close");f()});a(window).on("resize.position-controls",function(){});"function"===typeof ButtonRole&&new ButtonRole(ca);j.on(a.ModalPopup.Events.CloseDialog,function(){0<B.length&&B.focus()});a(document).on("keydown.position-controls",function(a){a=a.keyCode;if(a===p.KeyCode.Esc||a===p.KeyCode.Space)j.ModalPopup("close"),k.BasePopup("close"),
l.BasePopup("close"),f(),h(),d()});B.on("keydown",function(a){var b=a.keyCode;(b===p.KeyCode.Enter||b===p.KeyCode.Space)&&g(a)});v.on("keydown",function(a){var b=a.keyCode;(b===p.KeyCode.Enter||b===p.KeyCode.Space)&&c(a)});y.on("keydown",function(a){var b=a.keyCode;(b===p.KeyCode.Enter||b===p.KeyCode.Space)&&e(a)})}}})(jQuery);define("components/positions-controls",["jquery","components/accessibility"],function(){});
(function(a,b){var g;g=b.FID=b.FID||{};var c=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},e=g.DraggablePopup,d=g.ChangeCorePopup=function(b,c,d){c||(2>arguments.length?[].push.call(arguments,"coreChangeGroup"):arguments[1]="coreChangeGroup",c="coreChangeGroup");d||(3>arguments.length?[].push.call(arguments,"document"):arguments[2]="document");a.DraggablePopup.setDisplayMode(a.DraggablePopup.DisplayMode.NonBlocking,
c);e.prototype.constructor.apply(this,arguments)};c(d,e);var h=a.DraggablePopup.extend({defaults:{containment:"document",group:"coreChangeGroup"},init:function(b){var c=this,e;return this.each(function(){var g=a.extend({},h.defaults,b),g=a.extend({},g,c.data("plugin-options"));e=new d(this,g.group,g.containment);a(this).data("basepopup-instance",e)})}});a.fn.ChangeCorePopup=function(){var b=arguments[0],c=arguments;if(h[b])b=h[b],c=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||
!b)b=h.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,c)};a.ChangeCorePopup=a.extend(a.ChangeCorePopup,a.DraggablePopup,{})})(jQuery,window);define("components/changecorepopup",["components/draggablepopup"],function(){});
(function(a,b){var g;g=b.FID=b.FID||{};var c=a,e=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},d=g.ChangeCorePopup,h=g.ChangeCore=function(a,b,e){function f(a,b){var d=c(this),e=d.find("img").attr("src"),g=e.indexOf("images/"),e=e.substring(0,g),g=d.find(".change-core--faq-content"),h=d.prop("shown");b&&(h=!0);h?(d.find(".change-core--faq-collapse-icon").replaceWith('<img class="change-core--faq-expand-icon" src="'+
e+'images/legal-mobile-expand-2x.png" />'),g.removeClass("change-core--faq-content-expanded"),d.prop("shown",!1),a&&(A=!1)):(d.find(".change-core--faq-expand-icon").replaceWith('<img class="change-core--faq-collapse-icon" src="'+e+'images/legal-mobile-collapse-2x.png" />'),g.addClass("change-core--faq-content-expanded"),e=c(".change-core--section-header-faq").offset().top,e=d.offset().top-e,c(".change-core--faq-scrollable").animate({scrollTop:e},300),d.prop("shown",!0),a&&(A=!0))}d.prototype.constructor.apply(this,
arguments);var g=this._$DOMElement,h=c(".set-new-core-position"),r=c(".view-fdic-disclosure"),s=c(".display-fcash-desc"),v=c(".view-fund-prospectus"),A=!1;this._group="coreChangeGroup";-1!=navigator.appVersion.indexOf("Win")&&c(g).addClass("win-style");c(".change-core--faq .change-core--faq-item-wrapper").on("click",function(a){f.call(a.currentTarget)});c(".change-core--review-and-submit .change-core--faq-item-wrapper").on("click",function(a){f.call(a.currentTarget,!0)});c(".change-core--confirmation .change-core--faq-item-wrapper").on("click",
function(a){f.call(a.currentTarget,!0)});c(".change-core--preview-order").on("click",function(){c(".change-core--section-header").focus();c(".change-core--choose-core-position").removeClass("change-core-section--active");c(".change-core--review-and-submit").addClass("change-core-section--active");var a=c('input[name="core-select"]:checked').data("core-position-type"),b=c('input[name="core-select"]:checked').next().html();h.html(b);"FDIC"==a?r.removeClass("hidden"):"FCASH"==a?s.removeClass("hidden"):
v.removeClass("hidden");c(".view-fund-prospectus").is(":visible")?(c(".change-core--review-submit-text").removeClass("hidden"),c(".change-core--review-submit-text--fcash-fdic").addClass("hidden")):(c(".change-core--review-submit-text").addClass("hidden"),c(".change-core--review-submit-text--fcash-fdic").removeClass("hidden"))});c(".change-core--form-submit-change-core").on("click",function(a){c(".change-core--section-header").focus();if(c(a.currentTarget).data("rep-indicator"))alert("Rep Web View does not allow access to this function on Fidelity.com.");
else{a=c(a.currentTarget).data("acctnum");var b=c('input[name="core-select"]:checked').val(),d=c('input[name="csrfToken"]').val();c.ajax({url:"/ftgw/fbc/ofacda/snippet/updateCorePosition",data:{acctNum:a,symbol:b,csrfToken:d},dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){if(a.success){c(".change-core--review-and-submit").removeClass("change-core-section--active");c(".change-core--confirmation").addClass("change-core-section--active");a=c('input[name="core-select"]:checked').data("core-position-type");
var b=c('input[name="core-select"]:checked').next().html();h.html(b);"FDIC"==a?r.removeClass("hidden"):"FCASH"==a?s.removeClass("hidden"):v.removeClass("hidden");c(".change-core--confirmation").data("showenable","true")}else c(".change-core--review-and-submit").removeClass("change-core-section--active"),c(".change-core--general-exception-message").addClass("change-core-section--active"),c(".change-core--disclosure").addClass("hidden"),c(".change-core--faq").addClass("hidden")},error:function(){c(".change-core--review-and-submit").removeClass("change-core-section--active");
c(".change-core--general-exception-message").addClass("change-core-section--active");c(".change-core--disclosure").addClass("hidden");c(".change-core--faq").addClass("hidden")}})}});c(".change-core--footer-option-add-bank").on("click",function(){c(".change-core-section--active").addClass("change-core-section--previous");c(".change-core--choose-core-position").removeClass("change-core-section--active");c(".change-core--review-and-submit").removeClass("change-core-section--active");c(".change-core--confirmation").removeClass("change-core-section--active");
c(".change-core--faq").removeClass("change-core-section--active");c(".change-core--disclosure").addClass("change-core-section--active");c(".base-popup--close-button").addClass("hidden")});c(".change-core--footer-option-more").on("click",function(){c(".change-core-section--active").addClass("change-core-section--previous");c(".change-core--choose-core-position").removeClass("change-core-section--active");c(".change-core--review-and-submit").removeClass("change-core-section--active");c(".change-core--confirmation").removeClass("change-core-section--active");
c(".change-core--disclosure").removeClass("change-core-section--active");c(".change-core--faq").addClass("change-core-section--active");c(".change-core--faq .change-core--faq-item-wrapper").each(function(){f.call(this,!1,!0)});c(".base-popup--close-button").addClass("hidden")});c(".change-core--back-button").on("click",function(){c(".change-core--disclosure").removeClass("change-core-section--active");c(".change-core--faq").removeClass("change-core-section--active");c(".change-core-section--previous").addClass("change-core-section--active");
c(".change-core-section--active").removeClass("change-core-section--previous");c(".base-popup--close-button").removeClass("hidden")});c(".change-core--edit").on("click",function(){c(".change-core--review-and-submit").removeClass("change-core-section--active");c(".change-core--choose-core-position").addClass("change-core-section--active");s.addClass("hidden");v.addClass("hidden");A&&f.call(c(".change-core--review-and-submit .change-core--faq-item-wrapper").get(0),!0)});c(".change-core--show-more").on("click",
function(){var a=c(this).closest(".change-core--show-more"),b=a.closest(".change-core--less-content");a.addClass("hidden");b.addClass("hidden");a=b.siblings(".change-core--show-less");b=b.siblings(".change-core--more-content");a.removeClass("hidden");b.removeClass("hidden")});c(".view-fund-prospectus").on("click",function(a){a.preventDefault();var b=c('input[name="core-select"]:checked').val();a=c(a.currentTarget).data("href");(b=parent.window.open(a+"&securityId="+b,"prospectusWindow","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"))&&
b.focus()});c(".view-fdic-disclosure").on("click",function(a){a.preventDefault();a=c(a.currentTarget).data("href");(a=parent.window.open(a,"prospectusWindow","width=817,height=480,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"))&&a.focus()});c(".change-core--show-less").on("click",function(){var a=c(this).closest(".change-core--show-less"),b=a.siblings(".change-core--more-content");a.addClass("hidden");b.addClass("hidden");a=b.siblings(".change-core--less-content");
a.children(".change-core--show-more").removeClass("hidden");a.removeClass("hidden")})};e(h,d);h.prototype.open=function(){var a=this;c(".change-core--choose-core-position").addClass("change-core-section--active");c(".change-core--review-and-submit").removeClass("change-core-section--active");c(".change-core--faq").removeClass("change-core-section--active");c(".change-core--confirmation").removeClass("change-core-section--active");c(".change-core--disclosure").removeClass("change-core-section--active");
c(".change-core--form-submit-and-close").click(function(){a.close()});d.prototype.open.apply(this,arguments)};h.prototype.close=function(){d.prototype.close.apply(this,arguments)};h.prototype._setToggleVisibility=function(){this._$popupTab.addClass(HIDDEN_CLASS_NAME)};var f=c.ChangeCorePopup.extend({defaults:{},init:function(a){var b=this,d;return this.each(function(){var e=c.extend({},f.defaults,a),e=c.extend({},e,b.data("plugin-options"));d=new h(this,e.group,e.containment);c(this).data("basepopup-instance",
d)})}});c.fn.ChangeCore=function(){var a=arguments[0],b=arguments;if(f[a])a=f[a],b=Array.prototype.slice.call(arguments,1);else if("object"==typeof a||!a)a=f.init;else return c.error("Method "+a+" does not exist on jQuery.pluginName"),this;return a.apply(this,b)};c.ChangeCore=c.extend(c.ChangeCore,c.ChangeCorePopup,{Events:h.Events})})(jQuery,window);define("components/change-core",["components/changecorepopup"],function(){});
define("views/pane-positions-view","jquery tasks/core-position-task views/base-view util/eventhub-backbone models/account-context-model util/pg2 views/position-drawer-view views/fv-gtm-introtour-view util/progressbar components/basepopup util/json2 tpl!../templates/positions-drawer-snippet.html tpl!../templates/pg2-welcome-statement.html tpl!../templates/pgx-welcome-statement.html models/ajax-object-model text!../templates/core-position-list-error.html tasks/positions-tour-preference-task text!../templates/positionstour.html ngtimer util/account-utils tasks/preference-session-task HelpBubble tasks/popup-core-position-list-task tasks/state-save-task text!../templates/positions-popup-snippet.html components/magicgrid components/positions components/fixed-table-header components/positions-controls util/account-utils components/change-core".split(" "),function(a,
b,g,c,e,d,h,f,j,k,l,p,m,n,r,s,v,A,w,z,D,y,B){function I(b){return a('form.positions-filter-form > input[name="'+b+'"]:first')}var S=null,J=!1;window.pg1Perf={timeToCallBackend:new Date,backEndTime:null,renderTime:null};window.getPG1PerformanceNumbers=function(){console.log("PG1 Performance Test: \n-> Time to calll Backend: "+window.pg1Perf.timeToCallBackend+" ms\n-> Time to get Data back from backed: "+window.pg1Perf.backEndTime+" ms\n-> Time to render: "+window.pg1Perf.renderTime+" ms")};var O=g.extend({events:{"click .positions-filter .drop_link":"togglePositionsType",
"change .positions-filter .drop_container input[type='checkbox']":"checkPositionsType","click .SID-open-positions-apply-button":"submitFilterForm","click .positions--download-positions":"downloadPositions","click .SID-closed-positions-link":"submitClosedAction","click .positions--refresh-pipe":"refreshPositions","click .p-symbol":"sortBySymbol","click .p-account":"sortByAccount","click .p-quantity":"sortByQuantity","click .p-current-value":"sortByCurrentValue","click .last-price-content .price":"sortByLastPrice",
"click .last-price-content .change":"sortByLastPriceChange","click .todays-change-content .dollar":"sortByChangeSinceCloseVal","click .todays-change-content .percentage":"sortByChangeSinceClosePct","click .change-since-purchase-content .dollar":"sortByChangeSincePurchaseVal","click .change-since-purchase-content .percentage":"sortByChangeSincePurchasePct","click .p-costBasisTotal":"sortByCostBasisTotal","click .p-costBasisPerShare":"sortByCostBasisPerShare","change .positions--related-links-select":"openRelatedLinksPopup",
"click .js-loaned":"openLoanedPopup","click .js-positions-fixed-income-popup":"openFixedIncomePopup","click .pending-acitviy-sub-total":"popUpWindow","click a[href=#], a.row-control":"preventDefaultBehavior","click .open-core-change-button":"popupHappyPath","CloseDialog .change-core-popup--wrapper":"closeConfirmationPopUpWindow","click .option-summary-grid":"renderOptionSummaryGrid","click .pgx-modal-close-button":"closePGXWelcomePage","click .pgx-show":"showPositionsXGrid","click .js-positions-pgxgrid-demo":"showPGXWelcomePage"},
displayUCBIPopup:!1,initialize:function(){this.accountsInfo=this.options.data;this.fvFinsihRefreshedHandler();this.isFVRequestToRefresh=!1;var b=this;a(window).off("ContentRowOpeningComplete");a(window).on("ContentRowOpeningComplete",function(a){b.onOpeningDrawer(a);b.triggerChangeCorePositionBtn(a)});a(window).off("ContentRowClosingComplete");a(window).on("ContentRowClosingComplete",function(a){b.onClosingDrawer(a)});this.openCore=this.options.openCore;this.acctNoneOrHidden=this.options.acctNoneOrHidden;
if(this.openCore&&!this.acctNoneOrHidden){var c=this.accountsInfo,c=(c=(c=c?c.accounts:null)?c[0]:null)?c.acctNum:null;Backbone.history.navigate("positions"+(c?"/"+c:""),{trigger:!1})}},onOpeningDrawer:function(b){if(!window.matchMedia("(max-width: 759px)").matches){var c=b.drawerInstance,d=a(c.find(".js-action-button--trade-armor"));b.isContentRowVisible&&d.length&&(this.positionIndicators()&O.TRADE_ARMOR_IND)===O.TRADE_ARMOR_IND&&(this.positionIndicators(this.positionIndicators()&~O.TRADE_ARMOR_IND),
b=a(c.find(".positions--drawer-content-header-container")),d={helpBubble:a(".help-bubble--trade-armor"),destination:b,anchor:d},S=new FID.HelpBubble(d),S.openHelpBubble())}},triggerChangeCorePositionBtn:function(a){var b=a.drawerInstance;this.openCore&&(!this.acctNoneOrHidden&&a.isContentRowVisible)&&(a=b.find(".open-core-change-button"),a.length&&a.trigger("click"))},onClosingDrawer:function(){null!==S&&(S.closeHelpBubble(),S=null)},destroy:function(){a(".positions-content").empty();this.undelegateEvents()},
preventDefaultBehavior:function(a){a&&a.preventDefault()},render:function(){return this},applyFilter:function(a){I("ACTION").val("FILTERING");this.submitFilterForm(a)},applyGroupBy:function(a){I("ACTION").val("GROUPING");this.submitFilterForm(a)},applyCustomize:function(a){I("ACTION").val("GROUPING,FILTERING");this.submitFilterForm(a)},refreshPositions:function(){I("REFRESH_DATA").val("Y");I("REPRICE_FROM_CACHE").val("N");this._submit=!0;this.refresh(!0)},downloadPositions:function(){var a="iPad"===
navigator.platform||"iPhone"===navigator.platform||"iPod"===navigator.platform;this.$(".txn-sort-order").val(this.$(".group-by").val());this.$(".positions-filter-form").find("input[name='CSV']").val("Y");this._submit=!0;var b=this._buildRequestParams();a?(a=this.$(".positions-filter-form"),a.attr("action","/ftgw/fbc/ofpositions/snippet/portfolioPositions?"+b),a.submit()):this.downloadFromUrl("/ftgw/fbc/ofpositions/snippet/portfolioPositions?"+b);this.$(".positions-filter-form").find("input[name='CSV']").val("N")},
downloadFromUrl:function(a){var b=document.getElementById("hiddenDownloader");null===b&&(b=document.createElement("iframe"),b.id="hiddenDownloader",b.style.display="none",document.body.appendChild(b));b.src=a},submitClosedAction:function(a){a.preventDefault();a="";var b=this.accountsInfo;if(void 0!=b&&null!=b){var c=b.portfolio,b=b.accounts;if(void 0!=c&&null!=c)a="ALL_ACCTS=Y";else if(void 0!=b&&null!=b&&0<b.length){for(c=0;c<b.length;c++){var d=b[c];void 0!=d&&null!=d&&(a+="ACCOUNTS="+d.acctNum+
"&")}a+="ALL_ACCTS=N"}}else a="ALL_ACCTS=Y";b=this.$(".positions-filter-form");this.$(".txn-sort-order").val(this.$(".group-by").val());b.attr("action","/ftgw/fbc/ofaccounts/closedPositions?"+a);b.find(".print-format").val("N");b.find("input[name='CSV']").val("");a=b.find("input[name='group-by']").val();b.find("input[name='TXN_SORT_ORDER']").val(a);b.find("input[name='SAVE_SETTINGS']").val("N");b.find("input[name='pf']").val("N");b.submit()},getCheckedValue:function(a){if(!a)return"";var b=a.length;
if(void 0==b)return a.checked?a.value:"";for(var c=0;c<b;c++)if(a[c].checked)return a[c].value;return""},buildCostBasisFootnote:function(){var b=this.$(".positionBasisFootNote"),c="";0<b.length&&a.each(b,function(){var b=a(this).data("positionbasisfootnote");""!==b&&void 0!==b&&(c+=b)});0<=c.indexOf("a")?a(".acscFootnotes-costBasis-footnote").show():a(".acscFootnotes-costBasis-footnote").hide();0<=c.indexOf("c")?a(".footnoteIndicatorC-costBasis-footnote").show():a(".footnoteIndicatorC-costBasis-footnote").hide();
0<=c.indexOf("e")?a(".footnoteIndicatorE-costBasis-footnote").show():a(".footnoteIndicatorE-costBasis-footnote").hide();a(".footnoteIndicatorI-costBasis-footnote").show();0<=c.indexOf("t")?a(".footnoteIndicatorT-costBasis-footnote").show():a(".footnoteIndicatorT-costBasis-footnote").hide();0<=c.indexOf("d")?a(".PortfoliofiCostBasisAdjFootnote-costBasis-footnote").show():a(".PortfoliofiCostBasisAdjFootnote-costBasis-footnote").hide()},fvFinsihRefreshedHandler:function(){var a=this;this.isFVRequestToRefresh=
!0;console.log("subscribeEvent FV_ACCOUNTS_REFRESH_FINISHED...");c.unsubscribeEvent({subject:"FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION"});c.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION",function(b){b.isAllAccSelected&&"true"==b.isPositionTabSelected&&a.refreshFvPositions()})},refreshFvPositions:function(){this.refresh(!0)},tooltipOnElipses:function(b){b=a(b.currentTarget);var c=b.attr("title");c?this.offsetWidth>=this.scrollWidth&&c==b.text()&&b.removeAttr("title"):this.offsetWidth<
this.scrollWidth&&b.attr("title",b.text())},openPositionDrawer:function(c,d){var e=this,f=d.openDefr=a.Deferred();if(0<c.length&&!c.data("drawerView")){var g=new h({el:c});c.data("drawerView",g);var j=c.find("td.magicgrid--drawer");if(0<j.length){var k=j.data("json-shelf"),l=j.data("json-base");j.data("json-views");j.data("json-trade");l.quoteable=l.quoteable&&!advisor_indicator;("true"==l.isMmrCorePosition||"true"==k.isUnfundedCorePostion)&&"true"==k.changeCoreAuthorized&&"true"==l.mmrEnable?(new b({data:k.accountNumber,
onSuccess:function(a){l.mmrActionType=a.status;"error"!=a.status&&(l.isChangeCorePositionAllowed=a.isEligible)},onError:function(){l.mmrUnavailable=!0},onComplete:function(){e.displayDrawerPage(c,d,g,f)}})).run():this.displayDrawerPage(c,d,g,f)}}},displayDrawerPage:function(a,b,c,d){var e=a.find("td.magicgrid--drawer"),f=e.data("json-shelf"),g=e.data("json-base"),h=e.data("json-views"),j=e.data("json-trade"),h={shelf:f,base:g,view:h,trade:j},j="",j=h.base.fdicProgramBanksUrlVal?h.base.fdicProgramBanksUrlVal:
h.base.fdicBankBalUrlVal?h.base.fdicBankBalUrlVal:h.base.fdicBankTBSUrlVal;h.base.programBanksURL=j;h=p.call(this,h);e.html(h);h=a.find(".magicgrid--drawer-close-button");if(0<h.length)h.on("click",function(){b.close()});h=a.find(".open-core-position-tooltip");j=a.find(".initCoreTooltip");0<h.length&&!(0<j.length)&&c._initializeCoreTooltip(a);h=g.quoteable;j=g.lotAble;0<g.notificationCount?c._openDrawer(a):h||j?(c.showLotsDetail(a,h,j),h?c._openDrawer(a):c.openDrawerForLotsOnly(a)):(f.showGrant||
f.showSpp)&&c._openDrawer(a);var f=e.find(".tabs--nav .tabs--tab-link"),g=e.find("#positions-tabs-notifications"),k;0<g.length?(c=f.index(g),0<c&&(k={selected:c+1})):"research"==FID.Applications.Positions.defaultDrawerView?(e=e.find("#positions-tabs-research"),e=f.index(e),0<e&&(k={selected:e+1})):"lots"==FID.Applications.Positions.defaultDrawerView&&(e=e.find("#positions-tabs-lots"),e=f.index(e),0<e&&(k={selected:e+1},c.openDrawerForLotsOnly(a)));k=FID.Applications.Positions.initializeDrawer(a,k);
a.data("drawer-control",k);d&&d.resolve()},submitFilterForm:function(b){var c=!1;if(b&&("evt-position-groupby-apply"==b.type||"js-customizeApply"==b.currentTarget.id))c=!0;this.$(".drop_container").hide();c&&(b=a(".positions--radio input[type=radio]:checked").val(),this.$(".txn-sort-order").val(b),this.$(".group-by").val(b),this.setGroupBySelectedDropDown(b),I("TABLE_SORT_ORDER").val(""),I("TABLE_SORT_DIRECTION").val(""));if(0<this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").length||
0<a(".base-popup.base-modal--positions-container").find("input[id='cbSWS']").length)b=this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").attr("checked"),c=a(".base-popup.base-modal--positions-container").find("input[id='cbSWS']").attr("checked"),"checked"==b||"checked"==c?(0==this.$("input[data-chked-id='cbSWS']:checked").length&&(this.displayUCBIPopup=!0),this.$(".positions-filter-form").find("input[name='EXCLUDE_WASH_SALE_IND']").val("Y")):this.$(".positions-filter-form").find("input[name='EXCLUDE_WASH_SALE_IND']").val("N");
b=this.$(".positions--dropdown-show-content").find("input[id='cbSFC']").is(":checked");c=a(".base-popup.base-modal--positions-container").find("input[id='cbSFC']").is(":checked");b||c?this.$(".positions-filter-form").find("input[name='SHOW_FOREIGN_CURRENCY']").val("Y"):this.$(".positions-filter-form").find("input[name='SHOW_FOREIGN_CURRENCY']").val("N");this.$(".positions-filter-form").find("input[name='CSV']").val("N");(b=a(".positions--dropdown-show-content").find("input[id='cbSFSN']"))&&0<b.length&&
(b.prop("checked")?this.$(".positions-filter-form").find("input[name='SHOW_FULL_SECURITY_NAME']").val("Y"):this.$(".positions-filter-form").find("input[name='SHOW_FULL_SECURITY_NAME']").val("N"));this._submit=!0;this.refresh(!0)},togglePositionsType:function(a){var b=this.$(".drop_link_container");b.toggleClass("selected");b.hasClass("selected")?(this.sortPopup&&this.sortPopup.BasePopup("close"),this.chgPopup&&this.chgPopup.BasePopup("close"),this._showOverlay()):this._hideOverlay();a.preventDefault();
return!1},_showOverlay:function(){this.$(".overlay").show()},_hideOverlay:function(){this.$(".overlay").hide()},checkPositionsType:function(b){b=a(b.currentTarget);"All"==b.val()&&(b.attr("checked")?this.$(".drop_container input[type='checkbox'][value!='All']").each(function(){a(this).attr("checked",!0)}):this.$(".drop_container input[type='checkbox'][value!='All']").each(function(){a(this).attr("checked",!1)}));this.setPositionsTypeFlyout()},setPositionsTypeFlyout:function(){var b=this.$(".drop_container input[type='checkbox'][value!='All']").length,
c=[];this.$(".drop_container input[type='checkbox'][value!='All']:checked").each(function(){c.push(a(this).val())});var d=c+"";b==c.length?(d="Open Positions",this.$(".all-pos").val("Y"),this.$(".drop_container input[type='checkbox'][value='All']").attr("checked",!0)):(this.$(".all-pos").val("N"),this.$(".drop_container input[type='checkbox'][value='All']").attr("checked",!1));d=d.replace(/,/g,", ");0==d.length&&(d=" ");this.$(".drop_link span").text(d)},_buildRequestParams:function(){var b="",c=
!1,d=!1,e=this.$(".positions-filter-form"),f=a(".positions--dropdown-show-content");e.find(".print-format").val("N");var g=this.accountsInfo;if(void 0!=g&&null!=g){var h=g.portfolio,g=g.accounts;if(void 0!=h&&null!=h)b="ALL_ACCTS=Y",c=!0;else if(void 0!=g&&null!=g&&0<g.length){for(h=0;h<g.length;h++){var j=g[h];void 0!=j&&null!=j&&(b+="ACCOUNTS="+j.acctNum+"&",13===j.oltxType&&(d=!0))}b+="ALL_ACCTS=N"}}else b="ALL_ACCTS=Y";this._submit?(g=f.find(".checkbox-component--checkbox-element:checked:not(#cbAllPositions):not(.cbSWS,.cbSFSN,.cbSFC)"),
h=f.find(".checkbox-component--checkbox-element:not(.cbSWS,.cbSFSN,.cbSFC)"),j=f.find(".checkbox-component--checkbox-element:checked:not(.cbSWS,.cbSFSN,.cbSFC)"),h.length-1==g.length||0==g.length||0==j.length?e.find(".all-pos").val("Y"):e.find(".all-pos").val("N"),b+="&"+e.serialize()+"&"+f.serialize()):b+="&TXN_SORT_ORDER=0&NEXTGEN=Y";if(window.toggleMap&&window.toggleMap.emoneyFeature&&(e=a("div[data-external-customer-id]"))&&(e.data()&&""!==e.data().externalCustomerId)&&(c||d))b+="&EXTERNAL_CUSTOMER_ID="+
e.data().externalCustomerId;return b},refresh:function(b){try{Bootstrapper._trackAnalytics({measID:"NG_Positions"})}catch(c){}for(var d=e.getSelectedAccountInfo().accounts,g=!0,h=0;h<d.length;h++)if("FV Bank Account"!=d[h].acctType){g=!1;break}if(1==d.length&&"FV Bank Account"==d[0].acctType||g)a(".positions-content").html("<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We do not currently display positions information for non-Fidelity bank accounts.</b></div></div>"),
j.hideLoading(500);else{var k=this;f.checkFVTourIndicator();!b&&this.domLoaded?b=(new a.Deferred).resolve({domLoaded:!0}):(d=this._buildRequestParams(),k=this,b||r.abortPendingAjaxObj(),this.isFVRequestToRefresh||j.showLoading("Loading Positions...",!0,500),window.pg1Perf.backEndTime=new Date,window.pg1Perf.timeToCallBackend=window.pg1Perf.backEndTime-window.pg1Perf.timeToCallBackend,b=a.ajax({url:"/ftgw/fbc/ofpositions/snippet/portfolioPositions",dataType:"html",type:"POST",xhrFields:{withCredentials:!0},
data:d}),r.addAjaxObjArray(b));b.done(function(b){window.pg1Perf.backEndTime=new Date-window.pg1Perf.backEndTime;window.pg1Perf.renderTime=new Date;k.renderPositions(b);k.buildCostBasisFootnote();k.$("style#position-defer-display-style").remove();j.hideLoading(500);console.log("Finished rendering");window.pg1Perf.renderTime=new Date-window.pg1Perf.renderTime;b=window.toggleMap.pgxEntitledCustomerFeature;var c=window.toggleMap.pgxEntitledFeature,d=!0,f=!0,g=0;e.getAllAccounts().forEach(function(a){10!==
a.subAcctTypeCode&&(d=!1);var b=a.acctTypeCode;2!==b&&(3!==b&&4!==b)&&(f=!1);a.positionCount&&(g+=a.positionCount)});(b&&!c&&30<g||d||f)&&a(".positions--pg2-toggle").hide()}).fail(function(a,b){"abort"!==b&&k.renderPositions({errorText:"We're sorry, Positions information is temporarily unavailable. We know how important access to your position data is, so we're working hard to get this page back up and running. In the interim, you can continue to visit other areas of the site."});j.hideLoading(500)}).always(function(){w.endTimer("positions-timer")})}},
updateAccountBalances:function(){var b="Y"==I("ALL_POS").val(),d=this.$(".js-total-item");if(d&&0<d.length&&b){var f=[];d.each(function(b,c){var d=a(c),e=d.data("acct-type");"13"!=e&&("14"!=e&&"23"!=e)&&f.push({acctNum:""+d.data("acct-num"),todayChange:d.data("today-gain-loss-total-val"),todayChangePct:d.data("today-gain-loss-total-pct"),currentVal:d.data("total-current-val"),recentMarketVal:d.data("total-recent-mkt-val")})});e.updateAccountBalances(f);(b=this.$(".js-positions--as-of-time").text())&&
c.publishEvent("ASOFTIME_UPDATED",b)}},renderPositions:function(b){a(window).off(".researchTab");var c=this;if(!b||b.errorText)this.$(".positions-unavailabel-error-message").removeClass("display-none"),this.$(".positions-unavailabel-error-message").html(b.errorText),this.getAppContext().footNote.setPositionWatchListStatus(!1),this.displayUCBIPopup=!1;else{this.$(".positions-unavailabel-error-message").addClass("display-none");!0!==b.domLoaded&&this.$(".positions-content").html(b);this.noGrayScroll();
a("body>.base-modal--positions-container").remove();var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;setTimeout(function(){d?d(function(){c.lazyLoadPositions()}):c.lazyLoadPositions()},300);0<this.$(".magicgrid--wrapper").length&&this.updateAccountBalances()}},renderOptionSummaryGrid:function(){var b=document.querySelector(".positions-content");"Y"===envMap.OPTION_SUMMARY_GRID_TOGGLE&&
require([envMap.WWW_CDN_URL+envMap.NG_CONTENT_URL+"/js/option-summary-app.js"],function(){a(".positions-content").empty();0==a("#positions-grid").length?(a(".positions-content").append('<div id="positions-grid" ng-controller="positionsController" class="ng-scope">'),a("#positions-grid").append("<div dir-positions-controls></div>"),a("#positions-grid").append('<div dpcs-virtual-grid preview="true" no-content-msg="You do not hold any option positions in this account." class="clearfix">'),a("#positions-grid").append('<div id="positionsGridLegend" grid-legend></div>'),
angular.bootstrap(angular.element(b),["dashboardPage"]),J=!0):J?window.fang&&fang.EventBus&&fang.EventBus.publish("loadPositions",{}):(angular.bootstrap(angular.element(b),["dashboardPage"]),J=!0)})},noGrayScroll:function(){if(0<this.$(".js-gray-scroll-enabled").length)for(var b=this.$(".magicgrid--wrapper"),c=0,d=b.length;c<d;c++){var e=b.eq(c).find("tbody:first > tr.normal-row");119>=e.length?(e.removeClass("grayscroll--hidden-row"),e.find("td:first").removeAttr("colspan"),a("body").removeClass("magic-grid--partial-print")):
this.shouldGrayScroll=!0}},lazyLoadPositions:function(){var b=!1,c=this;0<this.$(".positions-snippet").length&&(FID.Applications.Positions.defaultDrawerView=this.$(".positions-snippet").data("default-drawer-view"));var d=this.$(".magicgrid--wrapper");0<this.$(".positions--above-table-section-container").length&&(FID.Applications.Positions.Controls.initialize(),a(".positions--dropdown-show-button:not(.positions--singleacct-error-apply)").on("evt-position-popup-apply",function(a){I("ACTION").val("FILTERING");
c.submitFilterForm(a)}),a(".positions--dropdown-groupby-button").on("evt-position-groupby-apply",function(a){I("ACTION").val("GROUPING");c.submitFilterForm(a)}),a(".base-modal--positions-container").on("click",".positions--popup-apply-button:not(.positions--singleacct-error-apply)",function(a){I("ACTION").val("GROUPING,FILTERING");c.submitFilterForm(a)}),this.displayUCBIPopup&&("Y"==this.$(".positions-filter-form").find("input[name='UNADJUSTED_COST_BASIS_INFORMATION']").val()&&"checked"==this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").attr("checked"))&&
a(".positions-modal-window").ModalPopup().ModalPopup("toggle"));this.displayUCBIPopup=!1;if(0<d.length){var e=this.$(".p-positions-tbody");0<e.length&&e.data("show-fv-positions-footnote")&&(b=!0);FID.Applications.Positions.initialize();a(document).off("redrawPositions");a(document).on("redrawPositions",function(){c.shouldGrayScroll&&FID.Applications.Positions.redraw()});d.on(FID.MagicGrid.Events.ContentRowVisibilityToggled,function(a){a.isContentRowVisible&&c.openPositionDrawer(a.drawerInstance,a.instance)});
d=FID.Applications.Positions.getMagicGridInstance();if((e=a("#cbSFSN"))&&0<e.length)if(e.prop("checked")){a(document).trigger("redrawPositions");for(var e=0,f=d.length;e<f;e++)d.eq(e).MagicGrid("showFullStockNames")}else{e=0;for(f=d.length;e<f;e++)d.eq(e).MagicGrid("hideFullStockNames")}this.openCore&&!this.acctNoneOrHidden&&FID.Applications.Positions.openCorePositionDrawer()}else this.getAppContext().footNote.setPositionWatchListStatus(!1);this.getAppContext().footNote.displayFVPositionDisclosure(b)},
sortBySymbol:function(a){this.sortTable(this.getGroupName(a),"0")},sortByAccount:function(a){this.sortTable(this.getGroupName(a),"1")},sortByLastPrice:function(a){this.sortTable(this.getGroupName(a),"2")},sortByLastPriceChange:function(a){this.sortTable(this.getGroupName(a),"3")},sortByQuantity:function(a){this.sortTable(this.getGroupName(a),"4")},sortByCurrentValue:function(a){this.sortTable(this.getGroupName(a),"5")},sortByChangeSinceCloseVal:function(a){this.sortTable(this.getGroupName(a),"6")},
sortByChangeSinceClosePct:function(a){this.sortTable(this.getGroupName(a),"7")},sortByChangeSincePurchaseVal:function(a){this.sortTable(this.getGroupName(a),"8")},sortByChangeSincePurchasePct:function(a){this.sortTable(this.getGroupName(a),"9")},sortByCostBasisTotal:function(a){this.sortTable(this.getGroupName(a),"10")},sortByCostBasisPerShare:function(a){this.sortTable(this.getGroupName(a),"11")},getGroupName:function(b){return a(b.currentTarget).closest("input.group-name").val()},popWinCustom:function(a,
b,c,d){var e="no";d&&"yes"==d&&(e="yes");this.wCustom&&this.wCustom.close();setTimeout(function(){this.wCustom=window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+e+",left=10,top=10,height="+b+",width="+c+",fullscreen=no");null==this.wCustom||"undefined"==typeof this.wCustom?-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(window.location.href=a+"&showCloseWindow=N"):this.wCustom.focus()},100)},openRelatedLinksPopup:function(b){var c=
a(b.currentTarget).find(":selected").text(),d=a(b.currentTarget).val();a(b.currentTarget).find("option:first-child").attr("selected","selected");"Margin Calculator"===c?(this.wMarginCalc&&this.wMarginCalc.close(),setTimeout(function(){this.wMarginCalc=window.open(d,"infowindowMarginCalc","width=1024,height=680,left=80,top=80,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no");null==this.wMarginCalc||"undefined"==typeof this.wMarginCalc?-1!=navigator.userAgent.indexOf("Safari")&&
-1==navigator.userAgent.indexOf("Chrome")&&(window.location.href=d+"&showCloseWindow=N"):this.wMarginCalc.focus()},100)):"Loaned Securities"===c?this.popWinCustom(d,618,608):"Hard to Borrow"===c?this.popWinCustom(d,355,840):"Option Summary"===c?window.location.href=d:"529 Performance"===c&&(window.location.href=d)},openLoanedPopup:function(b){b=a(b.currentTarget).data("loaned-url");this.popWinCustom(b,618,608)},sortTable:function(a,b){if(!(0<this.$(".positions--singleacct-error-display").length)){var c=
"sort_"+b+"_"+a;I("ACTION").val("SORTING");I("SORT_COL_IND").val(c);if(b==I("TABLE_SORT_ORDER").val())"A"==I("TABLE_SORT_DIRECTION").val()?I("TABLE_SORT_DIRECTION").val("D"):I("TABLE_SORT_DIRECTION").val("A");else{c="D";if("0"==b||"1"==b)c=this.accountsInfo.accounts,c="0"==b&&null!=c&&1==c.length&&"19"==I("TABLE_SORT_ORDER").val()?"D":"A";I("TABLE_SORT_DIRECTION").val(c);I("TABLE_SORT_ORDER").val(b)}this.submitFilterForm()}},popUpWindow:function(b){var c=a(b.currentTarget).data("url"),d=617,e=380;
window.open(c,"infowindowlargemenubar","width="+(void 0!=d?d:1024)+",height="+(void 0!=e?e:768)+",left=080,top=080,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no").focus();b.preventDefault();return!1},setGroupBySelectedDropDown:function(b){"-1"==b?a(".js-positions--dropdown-groupby").text("No Grouping"):"0"==b?a(".js-positions--dropdown-groupby").text("Account"):"1"==b&&a(".js-positions--dropdown-groupby").text("Symbol")},openFixedIncomePopup:function(b){b.preventDefault();
b=a(b.currentTarget).attr("href");(b=window.open(b,"infowindowlarge","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"))&&b.focus()},positionIndicators:function(a){if(null!=a)this._updatePositionIndicators(a);else return a=O.POSITION_TOUR_IND|O.TRADE_ARMOR_IND,null!=AT_position_tour_indicator&&!isNaN(AT_position_tour_indicator)&&(a=parseInt(AT_position_tour_indicator)),a},_updatePositionIndicators:function(a){null!=a&&!isNaN(a)&&(AT_position_tour_indicator=
a,(new v({data:{tourInd:a}})).run())},showPositionsXGrid:function(b){b.preventDefault();b=this.$(".pgx-welcome-intro-modal");0<b.length&&b.ModalPopup("close");a(document).trigger("CHANGE_POSITIONS_VIEW","PGX")},showPGXWelcomePage:function(){var b=this.$(".pgx-welcome-intro-modal");0<b.length?b.ModalPopup("open"):(b=n({}),a(b).appendTo(this.$el),this.$(".pgx-welcome-intro-modal").ModalPopup().ModalPopup("open"))},popupHappyPath:function(b){var c=a(b.target).closest("td").data("json-shelf");(new B({data:{accountNumber:c.accountNumber,
isCashAccount:c.isCashAccount,registrationType:c.registrationType},onSuccess:function(d){var e=a(".tabs--container-content-wrapper");d=a(d);var f=c.accountName,g=a(b.target).offset(),h=e.offset(),j;console.log("the top offset being set is: "+g.top);e.css("position","relative").find(".change-core-popup--wrapper").remove().end().prepend(d);e=a(".change-core-popup--wrapper").css({"z-index":9999999,position:"absolute"});j=e.height();e.offset({top:g.top-h.top-j/2});e.find(".change-core--account-name-and-number").prepend(f);
d.ChangeCore().ChangeCore("open")},onError:function(){var c=a(".tabs--container-content-wrapper"),d=a(_.template(s)()),e=a(b.target).offset(),f=c.offset(),g;c.css("position","relative").find(".change-core-popup--wrapper").remove().end().prepend(d);c=a(".change-core-popup--wrapper").css({"z-index":9999999,position:"absolute"});g=c.height();c.offset({top:e.top-f.top-g/2});d.ChangeCore().ChangeCore("open")}})).run()},closeConfirmationPopUpWindow:function(){"true"==a(".change-core--confirmation").data("showenable")&&
(this.refreshPositions(),a(".change-core--confirmation").data("showenable","false"))},closePGXWelcomePage:function(){this.$(".pgx-welcome-intro-modal").ModalPopup("close")}});O.POSITION_TOUR_IND=1;O.TRADE_ARMOR_IND=2;return O});
define("views/pane-positions-pg2-view","jquery views/base-view util/eventhub-backbone models/account-context-model views/position-drawer-view views/fv-gtm-introtour-view util/progressbar components/basepopup util/json2 tpl!../templates/positions-drawer-snippet.html models/ajax-object-model tasks/positions-tour-preference-task text!../templates/positionstour.html ngtimer util/account-utils tasks/preference-session-task text!../templates/positions-popup-snippet.html components/magicgrid components/positions components/fixed-table-header components/positions-controls util/account-utils".split(" "),function(a,
b,g,c,e,d,h,f,j,k,l,p,m,n,r,s){function v(b){return a('form.positions-filter-form > input[name="'+b+'"]:first')}var A=!1,w=b.extend({events:{"click .positions-filter .drop_link":"togglePositionsType","change .positions-filter .drop_container input[type='checkbox']":"checkPositionsType","click .SID-open-positions-apply-button":"submitFilterForm","click .positions--download-positions":"downloadPositions","click .SID-closed-positions-link":"submitClosedAction","click .positions--refresh-pipe":"refreshPositions",
"click .p-symbol":"sortBySymbol","click .p-account":"sortByAccount","click .p-quantity":"sortByQuantity","click .p-current-value":"sortByCurrentValue","click .last-price-content .price":"sortByLastPrice","click .last-price-content .change":"sortByLastPriceChange","click .todays-change-content .dollar":"sortByChangeSinceCloseVal","click .todays-change-content .percentage":"sortByChangeSinceClosePct","click .change-since-purchase-content .dollar":"sortByChangeSincePurchaseVal","click .change-since-purchase-content .percentage":"sortByChangeSincePurchasePct",
"click .p-costBasisTotal":"sortByCostBasisTotal","click .p-costBasisPerShare":"sortByCostBasisPerShare","change .positions--related-links-select":"openRelatedLinksPopup","click .js-loaned":"openLoanedPopup","click .js-positions-fixed-income-popup":"openFixedIncomePopup","click .pending-acitviy-sub-total":"popUpWindow","click a[href=#], a.row-control":"preventDefaultBehavior","click .js-positions-grid-demo":"showPositionsGrid"},displayUCBIPopup:!1,initialize:function(){this.accountsInfo=this.options.data;
this.fvFinsihRefreshedHandler();this.isFVRequestToRefresh=!1},destroy:function(){a("body>.base-modal--positions-container").remove();this.undelegateEvents()},preventDefaultBehavior:function(a){a&&a.preventDefault()},render:function(){return this},applyFilter:function(a){v("ACTION").val("FILTERING");this.submitFilterForm(a)},applyGroupBy:function(a){v("ACTION").val("GROUPING");this.submitFilterForm(a)},applyCustomize:function(a){v("ACTION").val("GROUPING,FILTERING");this.submitFilterForm(a)},refreshPositions:function(){v("REFRESH_DATA").val("Y");
v("REPRICE_FROM_CACHE").val("N");this._submit=!0;this.refresh(!0)},downloadPositions:function(){var a="iPad"===navigator.platform||"iPhone"===navigator.platform||"iPod"===navigator.platform;this.$(".txn-sort-order").val(this.$(".group-by").val());this.$(".positions-filter-form").find("input[name='CSV']").val("Y");this._submit=!0;var b=this._buildRequestParams();a?(a=this.$(".positions-filter-form"),a.attr("action","/ftgw/fbc/ofpositions/snippet/portfolioPositions?"+b),a.submit()):this.downloadFromUrl("/ftgw/fbc/ofpositions/snippet/portfolioPositions?"+
b);this.$(".positions-filter-form").find("input[name='CSV']").val("N")},downloadFromUrl:function(a){var b=document.getElementById("hiddenDownloader");null===b&&(b=document.createElement("iframe"),b.id="hiddenDownloader",b.style.display="none",document.body.appendChild(b));b.src=a},submitClosedAction:function(a){a.preventDefault();a="";var b=this.accountsInfo;if(void 0!=b&&null!=b){var c=b.portfolio,b=b.accounts;if(void 0!=c&&null!=c)a="ALL_ACCTS=Y";else if(void 0!=b&&null!=b&&0<b.length){for(c=0;c<
b.length;c++){var d=b[c];void 0!=d&&null!=d&&(a+="ACCOUNTS="+d.acctNum+"&")}a+="ALL_ACCTS=N"}}else a="ALL_ACCTS=Y";b=this.$(".positions-filter-form");this.$(".txn-sort-order").val(this.$(".group-by").val());b.attr("action","/ftgw/fbc/ofaccounts/closedPositions?"+a);b.find(".print-format").val("N");b.find("input[name='CSV']").val("");a=b.find("input[name='group-by']").val();b.find("input[name='TXN_SORT_ORDER']").val(a);b.find("input[name='SAVE_SETTINGS']").val("N");b.find("input[name='pf']").val("N");
b.submit()},getCheckedValue:function(a){if(!a)return"";var b=a.length;if(void 0==b)return a.checked?a.value:"";for(var c=0;c<b;c++)if(a[c].checked)return a[c].value;return""},buildCostBasisFootnote:function(){var b=this.$(".positionBasisFootNote"),c="";0<b.length&&a.each(b,function(){var b=a(this).data("positionbasisfootnote");""!==b&&void 0!==b&&(c+=b)});0<=c.indexOf("a")?a(".acscFootnotes-costBasis-footnote").show():a(".acscFootnotes-costBasis-footnote").hide();0<=c.indexOf("c")?a(".footnoteIndicatorC-costBasis-footnote").show():
a(".footnoteIndicatorC-costBasis-footnote").hide();0<=c.indexOf("e")?a(".footnoteIndicatorE-costBasis-footnote").show():a(".footnoteIndicatorE-costBasis-footnote").hide();a(".footnoteIndicatorI-costBasis-footnote").show();0<=c.indexOf("t")?a(".footnoteIndicatorT-costBasis-footnote").show():a(".footnoteIndicatorT-costBasis-footnote").hide();0<=c.indexOf("d")?a(".PortfoliofiCostBasisAdjFootnote-costBasis-footnote").show():a(".PortfoliofiCostBasisAdjFootnote-costBasis-footnote").hide()},fvFinsihRefreshedHandler:function(){var a=
this;this.isFVRequestToRefresh=!0;g.unsubscribeEvent({subject:"FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION"});g.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_POSITION",function(b){b.isAllAccSelected&&"true"==b.isPositionTabSelected&&a.refreshFvPositions()})},refreshFvPositions:function(){this.refresh(!0)},tooltipOnElipses:function(b){b=a(b.currentTarget);var c=b.attr("title");c?this.offsetWidth>=this.scrollWidth&&c==b.text()&&b.removeAttr("title"):this.offsetWidth<this.scrollWidth&&b.attr("title",
b.text())},openPositionDrawer:function(a,b){if(0<a.length&&!a.data("drawerView")){var c=new e({el:a});a.data("drawerView",c);var d=a.find("td.magicgrid--drawer");if(0<d.length){var f=d.data("json-shelf"),g=d.data("json-base"),h=d.data("json-views"),j=d.data("json-trade"),h={shelf:f,base:g,view:h,trade:j};g.quoteable=g.quoteable&&!advisor_indicator;h=k.call(this,h);d.html(h);h=a.find(".magicgrid--drawer-close-button");if(0<h.length)h.on("click",function(){b.close()});h=g.quoteable;j=g.lotAble;0<g.notificationCount?
c._openDrawer(a):h||j?(c.showLotsDetail(a,h,j),h?c._openDrawer(a):c.openDrawerForLotsOnly(a)):(f.showGrant||f.showSpp)&&c._openDrawer(a);var f=d.find(".tabs--nav .tabs--tab-link"),g=d.find("#positions-tabs-notifications"),l;0<g.length?(c=f.index(g),0<c&&(l={selected:c+1})):"research"==FID.Applications.Positions.defaultDrawerView?(d=d.find("#positions-tabs-research"),d=f.index(d),0<d&&(l={selected:d+1})):"lots"==FID.Applications.Positions.defaultDrawerView&&(d=d.find("#positions-tabs-lots"),d=f.index(d),
0<d&&(l={selected:d+1},c.openDrawerForLotsOnly(a)));l=FID.Applications.Positions.initializeDrawer(a,l);a.data("drawer-control",l)}}},submitFilterForm:function(b){var c=!1;if(b&&("evt-position-groupby-apply"==b.type||"js-customizeApply"==b.currentTarget.id))c=!0;this.$(".drop_container").hide();c&&(b=a(".positions--radio input[type=radio]:checked").val(),this.$(".txn-sort-order").val(b),this.$(".group-by").val(b),this.setGroupBySelectedDropDown(b),v("TABLE_SORT_ORDER").val(""),v("TABLE_SORT_DIRECTION").val(""));
if(0<this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").length||0<a(".base-popup.base-modal--positions-container").find("input[id='cbSWS']").length)b=this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").attr("checked"),c=a(".base-popup.base-modal--positions-container").find("input[id='cbSWS']").attr("checked"),"checked"==b||"checked"==c?(0==this.$("input[data-chked-id='cbSWS']:checked").length&&(this.displayUCBIPopup=!0),this.$(".positions-filter-form").find("input[name='EXCLUDE_WASH_SALE_IND']").val("Y")):
this.$(".positions-filter-form").find("input[name='EXCLUDE_WASH_SALE_IND']").val("N");b=this.$(".positions--dropdown-show-content").find("input[id='cbSFC']").is(":checked");c=a(".base-popup.base-modal--positions-container").find("input[id='cbSFC']").is(":checked");b||c?this.$(".positions-filter-form").find("input[name='SHOW_FOREIGN_CURRENCY']").val("Y"):this.$(".positions-filter-form").find("input[name='SHOW_FOREIGN_CURRENCY']").val("N");this.$(".positions-filter-form").find("input[name='CSV']").val("N");
(b=a(".positions--dropdown-show-content").find("input[id='cbSFSN']"))&&0<b.length&&(b.prop("checked")?this.$(".positions-filter-form").find("input[name='SHOW_FULL_SECURITY_NAME']").val("Y"):this.$(".positions-filter-form").find("input[name='SHOW_FULL_SECURITY_NAME']").val("N"));this._submit=!0;this.refresh(!0)},togglePositionsType:function(a){var b=this.$(".drop_link_container");b.toggleClass("selected");b.hasClass("selected")?(this.sortPopup&&this.sortPopup.BasePopup("close"),this.chgPopup&&this.chgPopup.BasePopup("close"),
this._showOverlay()):this._hideOverlay();a.preventDefault();return!1},_showOverlay:function(){this.$(".overlay").show()},_hideOverlay:function(){this.$(".overlay").hide()},checkPositionsType:function(b){b=a(b.currentTarget);"All"==b.val()&&(b.attr("checked")?this.$(".drop_container input[type='checkbox'][value!='All']").each(function(){a(this).attr("checked",!0)}):this.$(".drop_container input[type='checkbox'][value!='All']").each(function(){a(this).attr("checked",!1)}));this.setPositionsTypeFlyout()},
setPositionsTypeFlyout:function(){var b=this.$(".drop_container input[type='checkbox'][value!='All']").length,c=[];this.$(".drop_container input[type='checkbox'][value!='All']:checked").each(function(){c.push(a(this).val())});var d=c+"";b==c.length?(d="Open Positions",this.$(".all-pos").val("Y"),this.$(".drop_container input[type='checkbox'][value='All']").attr("checked",!0)):(this.$(".all-pos").val("N"),this.$(".drop_container input[type='checkbox'][value='All']").attr("checked",!1));d=d.replace(/,/g,
", ");0==d.length&&(d=" ");this.$(".drop_link span").text(d)},_buildRequestParams:function(){var b="",c=this.$(".positions-filter-form"),d=a(".positions--dropdown-show-content");c.find(".print-format").val("N");var e=this.accountsInfo;if(void 0!=e&&null!=e){var f=e.portfolio,e=e.accounts;if(void 0!=f&&null!=f)b="ALL_ACCTS=Y";else if(void 0!=e&&null!=e&&0<e.length){for(f=0;f<e.length;f++){var g=e[f];void 0!=g&&null!=g&&(b+="ACCOUNTS="+g.acctNum+"&")}b+="ALL_ACCTS=N"}}else b="ALL_ACCTS=Y";this._submit?
(e=d.find(".checkbox-component--checkbox-element:checked:not(#cbAllPositions):not(.cbSWS,.cbSFSN,.cbSFC)"),f=d.find(".checkbox-component--checkbox-element:not(.cbSWS,.cbSFSN,.cbSFC)"),g=d.find(".checkbox-component--checkbox-element:checked:not(.cbSWS,.cbSFSN,.cbSFC)"),f.length-1==e.length||0==e.length||0==g.length?c.find(".all-pos").val("Y"):c.find(".all-pos").val("N"),b+="&"+c.serialize()+"&"+d.serialize()):b+="&TXN_SORT_ORDER=0&NEXTGEN=Y";return b},refresh:function(){for(var b=c.getSelectedAccountInfo().accounts,
e=!0,f=0;f<b.length;f++)if("FV Bank Account"!=b[f].acctType){e=!1;break}1==b.length&&"FV Bank Account"==b[0].acctType||e?a(".positions-content").html("<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We do not currently display positions information for non-Fidelity bank accounts.</b></div></div>"):(d.checkFVTourIndicator(),this.isFVRequestToRefresh||h.showLoading("Loading Positions...",!0,500),this.renderPositions(),this.buildCostBasisFootnote(),
this.$("style#position-defer-display-style").remove());h.hideLoading(500)},renderPositions:function(){var b=document.querySelector(".positions-content");"Y"==POSITIONS_GRID_IND&&require([envMap.WWW_CDN_URL+envMap.NG_PG_CONTENT_URL+"/js/positions-app.js"],function(){0==a("#positions-grid").length?(a(".positions-content").append('<div id="positions-grid" ng-controller="positionsController" class="ng-scope">'),a("#positions-grid").append("<div dir-positions-controls></div>"),a("#positions-grid").append('<div dpcs-virtual-grid preview="true" no-content-msg="You do not hold any positions in this account." class="clearfix">'),
a("#positions-grid").append('<div id="positionsGridLegend" grid-legend></div>'),angular.bootstrap(angular.element(b),["dashboardPage"]),A=!0):A?window.fang&&fang.EventBus&&fang.EventBus.publish("loadPositions",{}):(angular.bootstrap(angular.element(b),["dashboardPage"]),A=!0)})},updateAccountBalances:function(){var b="Y"==v("ALL_POS").val(),d=this.$(".js-total-item");if(d&&0<d.length&&b){var e=[];d.each(function(b,c){var d=a(c),f=d.data("acct-type");"13"!=f&&("14"!=f&&"23"!=f)&&e.push({acctNum:""+
d.data("acct-num"),todayChange:d.data("today-gain-loss-total-val"),todayChangePct:d.data("today-gain-loss-total-pct"),currentVal:d.data("total-current-val"),recentMarketVal:d.data("total-recent-mkt-val")})});c.updateAccountBalances(e);(b=this.$(".js-positions--as-of-time").text())&&g.publishEvent("ASOFTIME_UPDATED",b)}},noGrayScroll:function(){if(0<this.$(".js-gray-scroll-enabled").length)for(var b=this.$(".magicgrid--wrapper"),c=0,d=b.length;c<d;c++){var e=b.eq(c).find("tbody:first > tr.normal-row");
119>=e.length?(e.removeClass("grayscroll--hidden-row"),e.find("td:first").removeAttr("colspan"),a("body").removeClass("magic-grid--partial-print")):this.shouldGrayScroll=!0}},lazyLoadPositions:function(){var b=this;0<this.$(".positions-snippet").length&&(FID.Applications.Positions.defaultDrawerView=this.$(".positions-snippet").data("default-drawer-view"));var c=this.$(".magicgrid--wrapper");0<this.$(".positions--above-table-section-container").length&&(FID.Applications.Positions.Controls.initialize(),
a(".positions--dropdown-show-button:not(.positions--singleacct-error-apply)").on("evt-position-popup-apply",function(a){v("ACTION").val("FILTERING");b.submitFilterForm(a)}),a(".positions--dropdown-groupby-button").on("evt-position-groupby-apply",function(a){v("ACTION").val("GROUPING");b.submitFilterForm(a)}),a(".base-modal--positions-container").on("click",".positions--popup-apply-button:not(.positions--singleacct-error-apply)",function(a){v("ACTION").val("GROUPING,FILTERING");b.submitFilterForm(a)}),
this.displayUCBIPopup&&("Y"==this.$(".positions-filter-form").find("input[name='UNADJUSTED_COST_BASIS_INFORMATION']").val()&&"checked"==this.$(".positions--dropdown-show-content").find("input[id='cbSWS']").attr("checked"))&&a(".positions-modal-window").ModalPopup().ModalPopup("toggle"));this.displayUCBIPopup=!1;if(0<c.length){var d=this.$(".p-positions-tbody");0<d.length&&d.data("show-fv-positions-footnote")&&(FVPositionDisclosureStatus=!0);FID.Applications.Positions.initialize();a(document).off("redrawPositions");
a(document).on("redrawPositions",function(){b.shouldGrayScroll&&FID.Applications.Positions.redraw()});c.on(FID.MagicGrid.Events.ContentRowVisibilityToggled,function(a){a.isContentRowVisible&&b.openPositionDrawer(a.drawerInstance,a.instance)});c=FID.Applications.Positions.getMagicGridInstance();if((d=a("#cbSFSN"))&&0<d.length)if(d.prop("checked")){a(document).trigger("redrawPositions");for(var d=0,e=c.length;d<e;d++)c.eq(d).MagicGrid("showFullStockNames")}else{d=0;for(e=c.length;d<e;d++)c.eq(d).MagicGrid("hideFullStockNames")}}else this.getAppContext().footNote.setPositionWatchListStatus(!1)},
sortBySymbol:function(a){this.sortTable(this.getGroupName(a),"0")},sortByAccount:function(a){this.sortTable(this.getGroupName(a),"1")},sortByLastPrice:function(a){this.sortTable(this.getGroupName(a),"2")},sortByLastPriceChange:function(a){this.sortTable(this.getGroupName(a),"3")},sortByQuantity:function(a){this.sortTable(this.getGroupName(a),"4")},sortByCurrentValue:function(a){this.sortTable(this.getGroupName(a),"5")},sortByChangeSinceCloseVal:function(a){this.sortTable(this.getGroupName(a),"6")},
sortByChangeSinceClosePct:function(a){this.sortTable(this.getGroupName(a),"7")},sortByChangeSincePurchaseVal:function(a){this.sortTable(this.getGroupName(a),"8")},sortByChangeSincePurchasePct:function(a){this.sortTable(this.getGroupName(a),"9")},sortByCostBasisTotal:function(a){this.sortTable(this.getGroupName(a),"10")},sortByCostBasisPerShare:function(a){this.sortTable(this.getGroupName(a),"11")},getGroupName:function(b){return a(b.currentTarget).closest("input.group-name").val()},popWinCustom:function(a,
b,c,d){var e="no";d&&"yes"==d&&(e="yes");this.wCustom&&this.wCustom.close();setTimeout(function(){this.wCustom=window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+e+",left=10,top=10,height="+b+",width="+c+",fullscreen=no");null==this.wCustom||"undefined"==typeof this.wCustom?-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(window.location.href=a+"&showCloseWindow=N"):this.wCustom.focus()},100)},openRelatedLinksPopup:function(b){var c=
a(b.currentTarget).find(":selected").text(),d=a(b.currentTarget).val();a(b.currentTarget).find("option:first-child").attr("selected","selected");"Margin Calculator"===c?(this.wMarginCalc&&this.wMarginCalc.close(),setTimeout(function(){this.wMarginCalc=window.open(d,"infowindowMarginCalc","width=1024,height=680,left=80,top=80,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no");null==this.wMarginCalc||"undefined"==typeof this.wMarginCalc?-1!=navigator.userAgent.indexOf("Safari")&&
-1==navigator.userAgent.indexOf("Chrome")&&(window.location.href=d+"&showCloseWindow=N"):this.wMarginCalc.focus()},100)):"Loaned Securities"===c?this.popWinCustom(d,618,608):"Hard to Borrow"===c?this.popWinCustom(d,355,840):"Option Summary"===c?window.location.href=d:"529 Performance"===c&&(window.location.href=d)},openLoanedPopup:function(b){b=a(b.currentTarget).data("loaned-url");this.popWinCustom(b,618,608)},sortTable:function(a,b){if(!(0<this.$(".positions--singleacct-error-display").length)){var c=
"sort_"+b+"_"+a;v("ACTION").val("SORTING");v("SORT_COL_IND").val(c);if(b==v("TABLE_SORT_ORDER").val())"A"==v("TABLE_SORT_DIRECTION").val()?v("TABLE_SORT_DIRECTION").val("D"):v("TABLE_SORT_DIRECTION").val("A");else{c="D";if("0"==b||"1"==b)c=this.accountsInfo.accounts,c="0"==b&&null!=c&&1==c.length&&"19"==v("TABLE_SORT_ORDER").val()?"D":"A";v("TABLE_SORT_DIRECTION").val(c);v("TABLE_SORT_ORDER").val(b)}this.submitFilterForm()}},popUpWindow:function(b){var c=a(b.currentTarget).data("url"),d=617,e=380;
window.open(c,"infowindowlargemenubar","width="+(void 0!=d?d:1024)+",height="+(void 0!=e?e:768)+",left=080,top=080,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no").focus();b.preventDefault();return!1},setGroupBySelectedDropDown:function(b){"-1"==b?a(".js-positions--dropdown-groupby").text("No Grouping"):"0"==b?a(".js-positions--dropdown-groupby").text("Account"):"1"==b&&a(".js-positions--dropdown-groupby").text("Symbol")},openFixedIncomePopup:function(b){b.preventDefault();
b=a(b.currentTarget).attr("href");(b=window.open(b,"infowindowlarge","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"))&&b.focus()},positionIndicators:function(a){if(null!=a)this._updatePositionIndicators(a);else return a=w.POSITION_TOUR_IND|w.TRADE_ARMOR_IND,AT_position_tour_indicator&&!isNaN(AT_position_tour_indicator)&&(a=parseInt(AT_position_tour_indicator)),a},_updatePositionIndicators:function(a){a&&!isNaN(a)&&(AT_position_tour_indicator=
a,(new p({data:{tourInd:a}})).run())},showPositionsGrid:function(){(new s({data:{prefName:"POSITIONS_GRID",prefValue:"Y"},onComplete:function(){location.reload()}})).run()}});w.POSITION_TOUR_IND=1;w.TRADE_ARMOR_IND=2;return w});
define("views/pane-positions-pgx-view","jquery views/base-view models/account-context-model util/progressbar components/basepopup tasks/preference-session-task".split(" "),function(a,b,g,c){b=b.extend({events:{},initialize:function(){this.accountsInfo=this.options.data},destroy:function(){a(".info-flyout").show();this.$wrapperClass.empty()},render:function(){a(".info-flyout").hide();return this},refresh:function(){for(var b=g.getSelectedAccountInfo().accounts,d=!0,h=0;h<b.length;h++)if("FV Bank Account"!=
b[h].acctType){d=!1;break}1==b.length&&"FV Bank Account"==b[0].acctType||d?(a(".positions-content").html("<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We do not currently display positions information for non-Fidelity bank accounts.</b></div></div>"),c.hideLoading(500)):(this.renderPositions(),this.displayLoading())},defaults:{appName:"PGXPOSNODE",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"":envMap.DIGITAL_APP_URL.replace("/ftgw/digital/",
""))+"/ftgw/dpcs/pgxpositions",pathToBundles:"/dist/",jsBundle:"bundle.js",cssBundle:"bundle.css",wrapperSelector:".positions-content"},insertMarkup:function(b,c,g,f){var j='<link href="'+f+'" rel="stylesheet">';a('link[href="'+f+'"]').length||a("head").append(j);this.$wrapperClass.append('<div id="'+b+'" class="'+b+' content"><pgx-bootstrapper></pgx-bootstrapper></div>');a(c).attr("data-app-path",g);a(c).attr("data-injected",!0)},bootstrap:function(b,c,g){require([b],function(){a(c).hasClass("ng-scope")||
angular.bootstrap(angular.element(c),[g])})},renderPositions:function(){window.positionLoadingTimestamp&&(window.positionLoadingTimestamp.loadPositionDataTimestamp=(new Date).getTime());var a=this.defaults.basePath,b=this.defaults.pathToBundles,c=this.defaults.appName,f=a+b+this.defaults.jsBundle,b=a+b+this.defaults.cssBundle,g="#"+c;this.$wrapperClass=this.$el.find(this.defaults.wrapperSelector);this.insertMarkup(c,g,a,b);this.bootstrap(f,g,c)},displayLoading:function(){for(var a=1E3;5E3>a;)setTimeout(function(){null!=
document.getElementById("positionsGridLayoutContainer")&&c.hideLoading(500)},a),a+=1E3;setTimeout(function(){c.hideLoading(500)},5E3)}});b.POSITION_TOUR_IND=1;b.TRADE_ARMOR_IND=2;return b});
define("views/pane-positions-pwe-view","jquery views/base-view models/account-context-model util/progressbar components/basepopup tasks/preference-session-task".split(" "),function(a,b,g,c){b=b.extend({events:{},initialize:function(){this.accountsInfo=this.options.data},destroy:function(){a(".info-flyout").show();this.$wrapperClass.empty()},render:function(){a(".info-flyout").hide();return this},refresh:function(){for(var b=g.getSelectedAccountInfo().accounts,d=!0,h=0;h<b.length;h++)if("FV Bank Account"!=
b[h].acctType){d=!1;break}1==b.length&&"FV Bank Account"==b[0].acctType||d?(a(".positions-content").html("<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We do not currently display positions information for non-Fidelity bank accounts.</b></div></div>"),c.hideLoading(500)):(this.renderPositions(),this.displayLoading())},defaults:{appName:"AP126216",basePath:envMap.DIGITAL_APP_URL+"positions/poswebex/",wrapperSelector:".positions-content"},insertMarkup:function(a){this.$wrapperClass.append('<div id="'+
a+'-PWE" class="positions-web-experience"></div>')},renderPositions:function(){window.positionLoadingTimestamp&&(window.positionLoadingTimestamp.loadPositionDataTimestamp=(new Date).getTime());var b=this.defaults.basePath+"?snippet=Y",d=this.defaults.appName,g="#"+d+"-PWE";this.$wrapperClass=this.$el.find(this.defaults.wrapperSelector);this.insertMarkup(d);a.ajax({type:"GET",url:b,xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a(g).append(b)}).fail(function(){a(g).append("<br><p>We're sorry, Positions information is temporarily unavailable. We know how important access to your position data is, so we're working hard to get this page back up and running. In the interim, you can continue to visit other areas of the site.");
c.hideLoading(100)})},displayLoading:function(){for(var a=1E3;5E3>a;)setTimeout(function(){0<document.getElementsByClassName("ag-root-wrapper").length&&c.hideLoading(500)},a),a+=1E3;setTimeout(function(){c.hideLoading(500)},5E3)}});b.POSITION_TOUR_IND=1;b.TRADE_ARMOR_IND=2;return b});
define("views/tab-content-manager-positions","jquery views/tab-content-manager views/pane-positions-view views/pane-positions-pg2-view views/pane-positions-pgx-view views/pane-positions-pwe-view tasks/state-save-task tasks/state-get-task models/account-context-model util/progressbar".split(" "),function(a,b,g,c,e,d,h,f,j,k){function l(){var c=this;a(document).unbind("CHANGE_POSITIONS_VIEW");a(document).bind("CHANGE_POSITIONS_VIEW",function(a,b){if(b&&!("PG1"!==b&&"PGX"!==b&&"PWE"!==b)){var d=function(a){return{state:[{path:"/user/oce/positions/grid",
version:"2.0",entry:[{key:"gridlastused",value:a}]}]}};b&&"PG1"===b?(new h({context:this,data:JSON.stringify(d("PG1")),onComplete:function(){c.loadPG1()}})).run():b&&"PGX"===b?(new h({context:this,data:JSON.stringify(d("PGX")),onComplete:function(){c.loadPGX()}})).run():b&&"PWE"===b&&(new h({context:this,data:JSON.stringify(d("PWE")),onComplete:function(){c.loadPWE()}})).run()}});b.call(this,arguments)}c=b;var p=function(){};p.prototype=c.prototype;l.prototype=new p;l.prototype.constructor=l;l.prototype._super=
c.prototype;a.extend(l.prototype,{loadTabContent:function(a){a=a||this.context;a.accountsInfo&&a.accountsInfo.accounts&&(new f({context:this,data:JSON.stringify({state:[{path:"/user/oce/positions/grid",version:"2.0",entry:[{key:"gridlastused"}]}]}),onSuccess:function(a){a[0]&&a[0].entry[0]&&a[0].entry[0].value&&"PGX"===a[0].entry[0].value?this.loadPGX():a[0]&&a[0].entry[0]&&a[0].entry[0].value&&"PWE"===a[0].entry[0].value?this.loadPWE():this.loadPG1()},onError:function(){this.loadPG1()}})).run()},
dispose:function(){this.view&&this.view.destroy&&this.view.destroy()},loadPG1:function(){this.dispose();window.POSITIONS_GRID_IND&&(window.POSITIONS_GRID_IND="N");var b=this.view=(new g({el:a(".pane.positions-tab-content"),data:this.context.accountsInfo,openCore:!!this.context.routeOptions&&"core"==this.context.routeOptions.section,acctNoneOrHidden:!!this.context.routeOptions&&this.context.routeOptions.acctNoneOrHidden})).render();a(".positions-unavailabel-error-message")?b.refresh(!0):b.refresh()},
loadPGX:function(){k.showLoading("Loading Positions...",!0,10);this.dispose();var b=window.toggleMap.pgxEntitledCustomerFeature,c=window.toggleMap.pgxEntitledFeature,d=0,f=!0,g=!0;j.getAllAccounts().forEach(function(a){10!==a.subAcctTypeCode&&(f=!1);var b=a.acctTypeCode;2!==b&&(3!==b&&4!==b)&&(g=!1);a.positionCount&&(d+=a.positionCount)});b&&!c&&30<d||f||g?a(document).trigger("CHANGE_POSITIONS_VIEW","PG1"):!b&&!c?a(document).trigger("CHANGE_POSITIONS_VIEW","PG1"):(window.Bootstrapper&&window.Bootstrapper._trackAnalytics({measID:"NGPositionsX"}),
window.POSITIONS_GRID_IND&&(window.POSITIONS_GRID_IND="X"),b=this.view=(new e({el:a(".pane.positions-tab-content"),data:this.context.accountsInfo})).render(),a(".positions-unavailabel-error-message")?b.refresh(!0):b.refresh())},loadPWE:function(){k.showLoading("Loading Positions...",!0,10);this.dispose();var b=window.toggleMap.ap126216_EntitledCustomer,c=window.toggleMap.ap126216_Entitled,e=!0,f=!0;j.getAllAccounts().forEach(function(a){10!==a.subAcctTypeCode&&(e=!1);a=a.acctTypeCode;2!==a&&(3!==
a&&4!==a)&&(f=!1)});e||f?a(document).trigger("CHANGE_POSITIONS_VIEW","PG1"):!b&&!c?a(document).trigger("CHANGE_POSITIONS_VIEW","PG1"):(window.Bootstrapper&&window.Bootstrapper._trackAnalytics({measID:"PWEPositions"}),window.POSITIONS_GRID_IND&&(window.POSITIONS_GRID_IND="X"),b=this.view=(new d({el:a(".pane.positions-tab-content"),data:this.context.accountsInfo})).render(),a(".positions-unavailabel-error-message")?b.refresh(!0):b.refresh())}});return l});
(function(a,b,g){function c(a){var b={},c=/^jQuery\d+$/;g.each(a.attributes,function(a,d){d.specified&&!c.test(d.name)&&(b[d.name]=d.value)});return b}function e(a,c){var d=g(this);if(this.value==d.attr("placeholder")&&d.hasClass("placeholder"))if(d.data("placeholder-password")){d=d.hide().next().show().attr("id",d.removeAttr("id").data("placeholder-id"));if(!0===a)return d[0].value=c;d.focus()}else this.value="",d.removeClass("placeholder"),this==b.activeElement&&this.select()}function d(){var a,
b=g(this),d=this.id;if(""==this.value){if("password"==this.type){if(!b.data("placeholder-textinput")){try{a=b.clone().attr({type:"text"})}catch(f){a=g("<input>").attr(g.extend(c(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":d}).bind("focus.placeholder",e);b.data({"placeholder-textinput":a,"placeholder-id":d}).before(a)}b=b.removeAttr("id").hide().prev().attr("id",d).show()}b.addClass("placeholder");b[0].value=b.attr("placeholder")}else b.removeClass("placeholder")}
var h="placeholder"in b.createElement("input"),f="placeholder"in b.createElement("textarea"),j=g.fn,k=g.valHooks;h&&f?(j=j.placeholder=function(){return this},j.input=j.textarea=!0):(j=j.placeholder=function(){this.filter((h?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder");return this},j.input=h,j.textarea=f,j={get:function(a){var b=g(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?
"":a.value},set:function(a,c){var f=g(a);if(!f.data("placeholder-enabled"))return a.value=c;""==c?(a.value=c,a!=b.activeElement&&d.call(a)):f.hasClass("placeholder")?e.call(a,!0,c)||(a.value=c):a.value=c;return f}},h||(k.input=j),f||(k.textarea=j),g(function(){g(b).delegate("form","submit.placeholder",function(){var a=g(".placeholder",this).each(e);setTimeout(function(){a.each(d)},10)})}),g(a).bind("beforeunload.placeholder",function(){g(".placeholder").each(function(){this.value=""})}))})(this,document,
jQuery);define("placeholder",["jquery"],function(a){return function(){return a.$.fn.placeholder}}(this));
(function(a,b){var g=b.document,c={defaults:{LockHeader:!0,LockColumn:!0,LockHeaderOffset:0},init:function(e){var d=a(this),h=a(".flexgrid"),f="ontouchstart"in g.documentElement,j=-1<navigator.userAgent.toLowerCase().indexOf("android");j&&a("body").addClass("android");return this.each(function(){var g=a.extend({},c.defaults,e),l=a.extend({},g,d.data("plugin-options")),p=a(this),m=p.closest(".flexgrid-wrapper"),n=null,g=p.find(".normal-row"),r=a("<div/>").addClass("scroller"),s=a("<div/>").addClass("scrollercontent"),
v=l.LockHeader,A=l.LockColumn,w=l.LockHeaderOffset,z=null,D=0,y=p.closest(".flexgrid-wrapper"),B=p.find(".flexgrid-controls--collapse-all-trigger"),I=p.find(".flexgrid-controls--expand-all-trigger");r.append(s);v&&(n=a(m.html()),D=n.find("th").length,z=a("<div/>").addClass("fh").append(r),n.find("tbody").remove(),f&&z.addClass("touchdevice"),z.append(n),m.prepend(z),y.children(".flexgrid").addClass("original-flexgrid"),y.children(".fh").children(".flexgrid").removeClass("original-flexgrid").addClass("fixed-flexgrid"),
y.each(function(){for(var b=a(this),c=b.find(".fixed-flexgrid"),d=c.find("th"),b=b.find(".original-flexgrid"),e=b.find("th"),f=0;f<D;f++){var g=a(d[f]),h=a(e[f]);g.css("width",h.width())}d=b.children("table");c.children("table").css("width",d.width())}));f&&r.remove();m={_$fh:z,_$flexgridWrapperSelector:m,_$normalRow:g,_$flexGridHeadCol:h.find(".headcol"),_$scroller:r,_lockHeader:v,_lockColumn:A,_lockHeaderOffset:w,_flexGridDrawers:[],_isRowClickBound:!1,_newLeftOffset:0,_curLeftOffset:0,_lastWindowHeight:0,
_lastWindowWidth:0,_$fhHeight:0,_onWindowScrollCallback:null,_onWindowResizeCallback:null,onRowClick:null};m.onRowClick=l.onRowClick;!0===A&&(l=p.find(".content-row"),n=a('<td colspan="100%" />').addClass("content-anchor").append("&nbsp;"),l.addClass("content-row-hidden").append(n),p.addClass("flexgrid-margin"),v&&y.find(".fixed-flexgrid").addClass("flexgrid-margin"));m._lastWindowHeight=a(b).height();m._lastWindowWidth=a(b).width();p.find("table th:visible:last-child").addClass("thlast");c._hasScrollbar(p)?
(m._$flexGridHeadCol.addClass("fixed"),p.addClass("has_scrollbar")):(m._$flexGridHeadCol.removeClass("fixed"),p.removeClass("has_scrollbar"));p.find(".normal-row").each(function(){var b=a(this),c=b.find(".headcol-content a");b.next().is(".content-row")?(b.addClass("expandable"),c.attr("href","#")):c.removeAttr("href")});p.data("flexgrid",m);y=p.find("table:first").width();s.width(y);!0===v&&c._fhState.apply(p);r.on("scroll",function(){p.scrollLeft(r.scrollLeft())});p.on("scroll",function(){r.scrollLeft(p.scrollLeft())});
if(!0===A||!0===v)m._onWindowResizeCallback=function(){c._onWindowResize.apply(p,arguments)},a(b).on("resize",m._onWindowResizeCallback);!0===v&&!j&&(m._onWindowScrollCallback=function(){c._fhState.apply(p)},a(b).on("scroll",m._onWindowScrollCallback));g.on({mouseenter:function(){a(this).hasClass("recent-activity-row")||a(this).addClass("row-hover")},mouseleave:function(){a(this).removeClass("row-hover")}});c._bindRowClick(p);B.on("click",function(a){a.preventDefault();c._collapseAllDrawers.apply(p)});
I.on("click",function(a){a.preventDefault();c._expandAllDrawers.apply(p)})})},_fhState:function(){var c=a(this),d=a(b),g=c.data("flexgrid"),f=c.height(),j=c.offset().top,k=j-d.scrollTop(),l=g._$fh,p=g._$scroller,d=d.scrollTop(),m=g._$flexgridWrapperSelector.find(".sort-popup");g._$fhHeight=a(".fh").height();c.data("flexgrid",g);0>k?(l.removeClass("fh_only"),m.addClass("sort-popup-fixed")):(l.addClass("fh_only"),m.removeClass("sort-popup-fixed"));d>=j&&Math.abs(k)<=f?l.show():l.hide();c.hasClass("has_scrollbar")?
(l.addClass("fh_scrolling"),m.addClass("fh_scrolling-sort-popup"),p.show()):(p.hide(),l.removeClass("fh_scrolling"),m.removeClass("fh_scrolling-sort-popup"))},_onWindowResize:function(){var e=a(b),d=a(this),g=d.data("flexgrid");if(a.browser.msie?e.height()!=this._lastWindowHeight||e.width()!=this._lastWindowWidth:1){g._lastWindowHeight=a(b).height();g._lastWindowWidth=a(b).width();c._hasScrollbar(d)?(g._$flexGridHeadCol.addClass("fixed"),d.addClass("has_scrollbar")):(g._$flexGridHeadCol.removeClass("fixed"),
d.removeClass("has_scrollbar"));for(var e=g._flexGridDrawers.length,f=0;f<e;f++)g._flexGridDrawers[f].width(c._calculateDrawerWidth(this));!0===g._lockHeader&&c._fhState.apply(d)}},_hasScrollbar:function(a){a=a[0];return a.scrollWidth>a.clientWidth},_bindRowClick:function(a){if(a){var b=a.data("flexgrid");if(b||!b._isRowClickBound)b._$normalRow.on("click",function(){c._onRowClick.apply(a,arguments)}),b._isRowClickBound=!0}},_unbindRowClick:function(a){if(a||a._isRowClickBound)a._$normalRow.off("click"),
a._isRowClickBound=!1},_getIndexFromDrawerArray:function(a){if(!a)return-1;for(var b=this._flexGridDrawers.length,c=-1,f=0;f<b&&0>c;f++)a[0]===this._flexGridDrawers[f][0]&&(c=f);return c},_addDrawerToArray:function(a){if(a&&1===a.length){var b=this.data("flexgrid");-1===c._getIndexFromDrawerArray.apply(b,[a])&&b._flexGridDrawers.push(a)}},_removeDrawerFromArray:function(a){a&&1===a.length&&(a=c._getIndexFromDrawerArray.apply(this,[a]),-1!==a&&this._flexGridDrawers.splice(a,1))},_onRowClick:function(e){e.preventDefault();
var d=a(e.target).closest(".normal-row"),g=d.next(),f=g.find(".drawer"),j=this.data("flexgrid"),k=j._$fhHeight,l=j._lockColumn,p=j.onRowClick,m=g.hasClass("content-row");g.hasClass("content-row");var n=g.is(":hidden");m&&n?(d.addClass("row-selected"),g.removeClass("content-row-hidden"),c._addDrawerToArray.apply(this,[f]),m=a(b),m=this.offset().top-m.scrollTop(),d=d.offset().top,m<=k&&a("html, body").animate({scrollTop:d-k},800,function(){})):m&&!n&&(d.removeClass("row-selected"),g.addClass("content-row-hidden"),
c._removeDrawerFromArray.apply(j,[f]));j._newLeftOffset=0;j._curLeftOffset=0;!0==l&&(j=c._calculateDrawerWidth(this),f.width(j),f=f.height(),g.find(".content-anchor").css({height:f+"px"}));p&&p.apply(this,[e])},isRowClickBound:function(){return this._isRowClickBound},unbind:function(){var e=a(this),d=e.data("flexgrid"),g=d._$scroller,f=d._$normalRow,j=a(b),k=d._onWindowScrollCallback,l=d._onWindowResizeCallback;g.off("scroll");e.off("scroll");f.off("mouseenter mouseleave");k&&j.off("scroll",k);l&&
j.off("resize",l);c._unbindRowClick(d);d._$fh=null;d._$flexgridWrapperSelector=null;d._$normalRow=null;d._$flexGridHeadCol=null;d._$scroller=null;d._flexGridDrawers=null;d.onRowClick=null;e.data("flexgrid",null)},_calculateDrawerWidth:function(a){if(1>a.length)return-1;var b=a.width(),c=a.find(".normal-row.row-selected:first").next(),f=a.find("table:first").width(),b=b>f?f:b,c=c.outerWidth()-c.width();a=[parseFloat(a.css("marginLeft"),0),parseFloat(a.css("marginRight")),parseFloat(a.css("paddingLeft")),
parseFloat(a.css("paddingRight"))];for(var f=a.length,g=0,k,l=0;l<f;l++)k=a[l],isNaN(k)&&(k=0),g+=k;return b+g-c},_collapseAllDrawers:function(){var b=a(".normal-row",this),c=a(".drawer",this).parents(".content-row"),g=this.data("flexgrid");b.removeClass("row-selected");c.addClass("content-row-hidden");g._flexGridDrawers=[]},_expandAllDrawers:function(){var b=a(".drawer",this),c=a(".normal-row",this),g=b.parents(".content-row"),f=this.data("flexgrid"),j;c.addClass("row-selected");g.removeClass("content-row-hidden");
f._flexGridDrawers=[];b.each(function(){j=a(this);f._flexGridDrawers.push(j)})}};a.fn.flexgrid=function(){var b=arguments[0],d=arguments;if(c[b])b=c[b],d=Array.prototype.slice.call(arguments,1);else if("object"==typeof b||!b)b=c.init;else return a.error("Method "+b+" does not exist on jQuery.pluginName"),this;return b.apply(this,d)}})(jQuery,window);define("components/flexgrid",["jquery"],function(a){return function(){return a.FlexGrid}}(this));
var ua=navigator.userAgent.toLowerCase(),isAndroid=-1<ua.indexOf("android");isAndroid&&($(".flexgrid").removeClass("flexgrid-margin"),$(".flexgrid table").addClass("flexgrid-margin"),$(".flexgrid-wrapper").find(".fh").remove());define("components/flexgrid-android",function(){});
define("tasks/activity-billpay-edit-init-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofcashmgmt/snippet/activityTabPendingActionInit",type:"GET",buildParams:function(a){return"&ACCOUNT="+a.acctNum+"&transaction_id="+a.transactionId+"&mode=E"}})});define("tasks/activity-billpay-edit-confirm-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofcashmgmt/snippet/activityTabPendingActionEdit",type:"POST"})});
(function(a,b){function g(a){var b=a.currentTarget.value,c=this;setTimeout(function(){var d=a.currentTarget.value;d&&d.length>c._maxlength&&(d=d.substr(0,c._maxlength));c.isTextValid(d)||(a.currentTarget.value=b)},10)}function c(a){var b=a.keyCode||a.which,c=a.currentTarget.value;isNaN(this._maxlength);this.isCharacterValid(b,c)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())}var e=b.FID=b.FID||{};e.InputMasks=e.InputMasks||{};var d=e.InputMasks.CharactersMask=function(b,d){if(b){var e=a(b),
k=this;this._$domElement=e;this._settings=d;this._maxlength=e.length?parseInt(e[0].getAttribute("maxlength")):NaN;this._onKeyPressed=function(a){c.apply(k,arguments)};e.on("keypress",this._onKeyPressed);this._onPaste=function(a){g.apply(k,arguments)};e.on("paste",this._onPaste)}};d.prototype.destroy=function(){this._$domElement.off("keypress",this._onKeyPressed).off("paste",this._onPaste)};d.prototype.isCharacterValid=function(a){var b=this._settings,c=b.length,d=!0,e,g;if(!a)return!0;for(var m=0;m<
c;m++)if(e=b[m],g=parseInt(e.allowedRangeFrom),isNaN(g)||(d=a>=g),g=parseInt(e.allowedRangeTo),isNaN(g)||(d=d&&a<=g),d){if((e=e.notAllowed)&&0<e.length)if(d=0>e.indexOf(String.fromCharCode(a)),!d)break}else if((e=e.allowed)&&0<e.length)if(d=0<=e.indexOf(String.fromCharCode(a)),!d)break;return d};d.prototype.isTextValid=function(a){var b=!0,c;if(!a||1>a.length)return!0;c=a.length;for(var d=0;d<c&&b;d++)b=a[d].charCodeAt(0),b=this.isCharacterValid(b);return b};"function"===typeof define&&define.amd&&
define("CharactersMask",[],function(){return d})})(jQuery,window,void 0);define("charactersmask",["jquery","jqueryui"],function(){});
(function(a,b){var g=b.FID=b.FID||{};g.InputMasks=g.InputMasks||{};var c=g.extend=g.extend||function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.prototype._super=b.prototype},e=g.InputMasks.CharactersMask,d=g.InputMasks.DatesMask=function(b){e.prototype.constructor.apply(this,[b,[{allowedRangeFrom:48,allowedRangeTo:57,allowed:"/"}]]);b&&(this._$domElement=a(b),this._maxlength=9)};c(d,e);d.prototype.isCharacterValid=function(a,b){var c=this._settings,
d=c.length,e=!0,g,m;if(!a)return!0;for(var n=0;n<d;n++)g=c[n],m=parseInt(g.allowedRangeFrom),isNaN(m)||(e=a>=m),m=parseInt(g.allowedRangeTo),isNaN(m)||(e=e&&a<=m),e?(g=g.notAllowed)&&0<g.length&&(e=0>g.indexOf(String.fromCharCode(a))):(g=g.allowed)&&0<g.length&&(e=0<=g.indexOf(String.fromCharCode(a)));c=this.getCaretPosition(this._$domElement[0]);c=0<c?b.substr(0,c)+String.fromCharCode(a)+b.substr(c,b.length-c):b+String.fromCharCode(a);if(e=e&&0>c.indexOf("//")){d=c.split("/");n=d.length;if((e=4>
n)&&0<n)if(c=d[0])g=parseInt(c),e=e&&(1==c.length&&1==n||2==c.length&&0<g&&13>g);if(e&&1<n&&(c=d[1]))g=parseInt(c),e=e&&(1==c.length&&2==n||2==c.length&&0<g&&32>g);if(e&&3===n&&(c=d[2]))d=parseInt(c),e=e&&!isNaN(d)&&5>c.length}return e};d.prototype.isTextValid=function(a){var b=!0,c;if(!a||1>a.length)return!0;c=a.length;for(var d=0;d<c&&b;d++)b=a[d].charCodeAt(0),b=this.isCharacterValid(b);return b};"function"===typeof define&&define.amd&&define("DatesMask",[],function(){return d})})(jQuery,window,
void 0);define("datemask",["charactersmask"],function(){});
(function(a,b){function g(a){if(!a)return null;a=a.split("/");return 3!==a.length?null:new Date(a[2],a[0]-1,a[1])}function c(){e(this)}function e(c){var d=490*b.devicePixelRatio;d=a(b).width()<=d;c=a(c);1===c.length&&(d?c.attr("readonly","true"):c.removeAttr("readonly"))}var d=b.FID=b.FID||{},h={defaults:{beforeShowDay:function(b){var c=a.datepicker.noWeekends(b);if(c[0]){var d=h.options.forbiddendays,c=!1;if(d){var e=d.range,p=e.length,m,n,r;for(m=0;m<p&&!c;m++)n=e[m],r=g(n.start),n=g(n.end),r&&
n?c=b>=r&&b<=n:r?c=b>=r:n&&(c=b<=n);d=d.days;p=d.length;for(m=0;m<p&&!c;m++)(e=g(d[m]))&&(c=b.getTime()===e.getTime())}b=c?[!1,""]:[!0,""];return b}return c},beforeShow:c},data:{_inputMasks:[],_$inputControls:[]},options:null,init:function(b){b=a.extend({},b,h.defaults);var e=h.data,g=d.InputMasks,l;b=a.extend(b,this.data("plugin-options"));h.options=b;a.fn.datepicker.call(this,b);b=a(".ui-datepicker");b.hide();b.addClass("fid-datepicker");this.each(function(){g&&g.DatesMask&&(l=a(this).on("focus",
c),e._$inputControls.push(l),e._inputMasks.push(new g.DatesMask(l)))});return this},show:function(){a.fn.datepicker.apply(this,arguments);e(this)}};a.fn.FidDatePicker=function(){var b=arguments[0];if(h[b])b=h[b];else if("object"==typeof b||!b)b=h.init;else return a.fn.datepicker.apply(this,arguments);return b.apply(this,arguments)}})(jQuery,window);define("fiddatepicker",["datemask"],function(){});
define("views/activity-edit-billpay-view","jquery views/base-view placeholder util/progressbar components/flexgrid components/flexgrid-android tasks/activity-billpay-edit-init-task tasks/activity-billpay-edit-confirm-task fiddatepicker fang".split(" "),function(a,b,g,c,e,d,h,f,j,k){var l=/^\d{2}[\/]\d{2}[\/]\d{4}$/,p=/^((\d+|\d+\.\d{1,2})|\.\d{1,2})?$/,m=/[()<>=]+/;return b.extend({events:{"click .activity--edit-bill":"editBillpayInit","click .activity--edit-transaction-button-save":"editBillpayConfirm",
"click .activity--popup-button-cancel":"closeActionPopUp","click .activity--cancel-button-confirm, #activity--edit-transaction-confirm-close-x":"closeActionPopUpAfterConfirm","click .activity-tab--action-error-close":"closeActionErrorPopup","change #activity--transactionAmount":"validateAndFormatPayment","keypress #activity--transactionAmount":"allowOnlyNumbersAndDot","keypress .activity--edit-transaction-popup-input":"disallowIllegalCharacters","change #activity-billpay-edit-date":"validateDate",
"keyup #activity--edit-transaction-form-memo, #activity--edit-transaction-form-notes":"validateLength","change #activity--edit-transaction-form-memo, #activity--edit-transaction-form-notes":"validateLength","change #activity--edit-transaction-form-memo":"validateMemo","change #activity--edit-transaction-form-notes":"validateNote","click .js-activity-calendar-button":"toggleDatePicker","click .activity--print-edit-confirmation":"printConfirmationEdit"},initialize:function(){this.displayError=this.needRefresh=
!1;this.holidayDateArray=[]},closePopup:function(){this.transferCancelVerifyPopup.BasePopup("toggle")},destroy:function(){this.undelegateEvents()},render:function(){return this},refresh:function(){},setParent:function(a){this.parent=a},editBillpayInit:function(b){var d=this,e=a(b.currentTarget),f=e.offset().top-200;b=e.attr("data-accountnum");e=e.attr("data-transactionid");(new h({context:this,data:{acctNum:b,transactionId:e},onPreExecute:function(){c.showLoading("Loading...",!0,500)},onSuccess:function(b){b?
(d.$(".activity-tab--billpay-action").html(b),d.$(".activity--calendar-button").removeClass("activity--calendar-button").addClass("ui-datepicker-trigger").addClass("js-activity-calendar-button"),d._initFidDatePicker(),a("#activity--billpay-edit-date").placeholder()):d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){c.hideLoading();d.displayError?(d._locatePopup(f,d.$(".activity-tab--billpay-action-error")),d.$(".activity-tab--billpay-action-error").BasePopup("open"),d.displayError=
!1):(d._locatePopup(f,d.$(".activity-tab--billpay-action")),d.$(".activity-tab--billpay-action").BasePopup("open"))}})).run()},editBillpayConfirm:function(b){if(this._validateEditForm()){var d=this.$(".activity--edit-transaction-form"),e=this.$(".activity--edit-transaction-form").clone(),g=e.find("#activity--edit-transaction-form-memo"),h=e.find("#activity--edit-transaction-form-notes");g.val(this._encodeSplChar(d.find("#activity--edit-transaction-form-memo").val()));h.val(this._encodeSplChar(d.find("#activity--edit-transaction-form-notes").val()));
var d=e.serialize(),j=this,k=a(b.currentTarget).offset().top,l=this.$("#activity--deliverByDate-value").text();(new f({context:this,data:d,onPreExecute:function(){j.$(".activity-tab--billpay-action").BasePopup("close");c.showLoading("Loading...",!0,500)},onSuccess:function(b){b?(j.$(".activity-tab--billpay-action").html(b),j._initFidDatePicker(),a("#activity--billpay-edit-date").placeholder(),a("#activity--deliverByDate-confirm-value").text(l),j.needRefresh=!0):j.displayError=!0},onError:function(){j.displayError=
!0},onComplete:function(){c.hideLoading();j.displayError?(j._locatePopup(k,j.$(".activity-tab--billpay-action-error")),j.$(".activity-tab--billpay-action-error").BasePopup("open"),j.displayError=!1):j.$(".activity-tab--billpay-action").BasePopup("open")}})).run()}},closeActionErrorPopup:function(){this.$(".activity-tab--billpay-action-error").BasePopup("close")},closeActionPopUp:function(){self.$(".activity-tab--billpay-action").BasePopup("close");this.destroy()},closeActionPopUpAfterConfirm:function(){self.$(".activity-tab--billpay-action").BasePopup("close");
this._refreshParent();this.destroy()},postProcessing:function(){},validateAndFormatPayment:function(){var a=self.$("#activity--transactionAmount").val();""!=a&&(a=this._formatPaymentAmount(a),self.$("#activity--transactionAmount").val(a));this._payAmountValidation()},validateDate:function(){var b=this._withdrawDateValidation();a("#is529").val()&&(b?(b=this._calcDeliveryDate(),a("#activity--deliverByDate-value").text(b)):a("#activity--deliverByDate-value").text(""))},validateLength:function(b){b=a(b.target);
var c=b.attr("maxlength"),d=b.val();d.length>c&&b.val(d.substring(0,c))},validateMemo:function(){this._memoValidation()},validateNote:function(){this._noteValidation()},toggleDatePicker:function(b){b.preventDefault();b=a("#activity-billpay-edit-date");var c;c=b.FidDatePicker("widget").is(":hidden")?"show":"hide";b.FidDatePicker(c)},allowOnlyNumbersAndDot:function(a){var b=a.which?a.which:a.keyCode;"Netscape"==navigator.appName&&(b=a.which?a.which:a.charCode);return!0==a.ctrlKey&&118==b?!0:46!=b&&
31<b&&(48>b||57<b)?!1:!0},disallowIllegalCharacters:function(a){return!m.test(String.fromCharCode(a.which?a.which:a.keyCode))},_locatePopup:function(a,b){b.css("top",a)},_refreshParent:function(){this.dpcsActivityPaneEnable?k.EventBus.publish("DPCS_ACC_TRANSFER_LOAD_DATA"):this.parent&&this.parent.refresh()},_initFidDatePicker:function(){var b=new Date,c=new Date;c.setFullYear(b.getFullYear()+1);var b=a("#earliestPaymentDt").val()||b,d=self.$("#holidayListId").val(),e=[];d&&(d=d.replace(/'/g,'"'),
e=JSON.parse(d));a("#activity-billpay-edit-date").FidDatePicker({forbiddendays:{range:[{start:"04/9/2013",end:"12/11/2013"},{start:"12/24/2013",end:"12/25/2013"}],days:e},minDate:b,maxDate:c,usedatemask:!0})},_validateEditForm:function(){var a=this._payAmountValidation();return a=(a=(a=a&&this._withdrawDateValidation())&&this._memoValidation())&&this._noteValidation()},_payAmountValidation:function(){var a=self.$("#activity--transactionAmount").val(),b=a.replace(/\,/g,""),c=parseFloat(b);if(""===
a)return self.$("#activity--transactionAmountError .message--title").text("Enter an amount."),self.$("#activity--transactionAmountError").show(),!1;if(!p.test(b)||0.01>c||99999.99<c)return self.$("#activity--transactionAmountError .message--title").text("Enter an amount between $.01 and $99,999.99."),self.$("#activity--transactionAmountError").show(),!1;self.$("#activity--transactionAmountError").hide();return!0},_formatPaymentAmount:function(a){try{var b=a.replace(/\,/g,""),b=b.replace(/^[0]+/g,
""),c=b.split("."),d=c[0]||"0",e=c[1]||"0",e=(e+"00").substr(0,2),f=d.split("").reverse().join("").match(/\d{1,3}/g).join(",").split("").reverse().join("")+"."+e;return/^[0-9.,]+$/.test(f)?f:"0.00"}catch(g){return"0.00"}},_withdrawDateValidation:function(){var b=self.$("#activity-billpay-edit-date").val();if(""===b)return a("#activity--transactionCalendarError > .message--title").text("Enter a date."),a("#activity--transactionCalendarError").show(),!1;if(l.test(b)){var c=b.split("/"),d=parseInt(c[1],
10),e=parseInt(c[0],10),c=parseInt(c[2],10);if(1E3>c||3E3<c||0==e||12<e)return a("#activity--transactionCalendarError > .message--title").text("Enter a valid date."),a("#activity--transactionCalendarError").show(),!1;var f=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==c%400||0!=c%100&&0==c%4)f[1]=29;if(!(0<d&&d<=f[e-1]))return a("#activity--transactionCalendarError > .message--title").text("Enter a valid date."),a("#activity--transactionCalendarError").show(),!1;d=new Date(b);e=a("#activity-billpay-edit-date").FidDatePicker("option",
"minDate");b=null;0===e?(b=new Date,b.setMilliseconds(0),b.setSeconds(0),b.setMinutes(0),b.setHours(0),b.setDate(b.getDate()+e)):b=new Date(e);e=new Date;e.setFullYear((new Date).getFullYear()+1);if(d>e)return a("#activity--transactionCalendarError > .message--title").text("Payments must be scheduled for delivery within the next 12 months."),a("#activity--transactionCalendarError").show(),!1;if(d<b)return d=b.getFullYear().toString(),e=(b.getMonth()+1).toString(),b=b.getDate().toString(),b=(e[1]?
e:"0"+e[0])+"/"+(b[1]?b:"0"+b[0])+"/"+d,"true"===a("#is529").val()?a("#activity--transactionCalendarError > .message--title").text("The earliest withdrawal date is "+b+"."):a("#activity--transactionCalendarError > .message--title").text("The earliest delivery date is "+b+"."),a("#activity--transactionCalendarError").show(),!1;if(!this._noWeekendsOrHolidays(d)[0])return a("#activity--transactionCalendarError > .message--title").text("Payment date cannot be a weekend or holiday."),a("#activity--transactionCalendarError").show(),
!1;a("#activity--transactionCalendarError").hide();return!0}a("#activity--transactionCalendarError > .message--title").text("Date must be MM/DD/YYYY format.");a("#activity--transactionCalendarError").show();return!1},_memoValidation:function(){var b=a("#activity--edit-transaction-form-memo").val(),c=a("#activity--edit-transaction-form-memo").attr("maxlength");if(b){if(b.length>c)return a("#activity--checkMemoError").show(),a("#activity--checkMemoError .message--title").text("Memo length must be less than "+
c+" characters."),!1;if(m.test(b))return a("#activity--checkMemoError").show(),a("#activity--checkMemoError .message--title").text("Characters ()<>= are not allowed."),!1;a("#activity--checkMemoError").hide();return!0}a("#activity--checkMemoError").hide();return!0},_noteValidation:function(){var b=a("#activity--edit-transaction-form-notes").val(),c=a("#activity--edit-transaction-form-notes").attr("maxlength");if(b.length>c)return a("#activity--noteError").show(),a("#activity--noteError .message--title").text("Memo length must be less than "+
c+" characters."),!1;if(m.test(b))return a("#activity--noteError").show(),a("#activity--noteError .message--title").text("Characters ()<>= are not allowed."),!1;a("#activity--noteError").hide();return!0},_encodeSplChar:function(a){a=encodeURIComponent(a);return a.replace(/'/g,"%27")},_calcDeliveryDate:function(){for(var b=a("#activity-billpay-edit-date").val(),b=new Date(b),c=a("#leadDaysId").val(),d=0;d<c;)b.setDate(b.getDate()+1),this._noWeekendsOrHolidays(b)[0]&&(d+=1);c=b.getDate();d=b.getMonth()+
1;b=b.getFullYear();return(10>d?"0":"")+d+"/"+(10>c?"0":"")+c+"/"+b},_noWeekendsOrHolidays:function(b){var c=a.datepicker.noWeekends(b);return c[0]?this._nationalDays(b):c},_nationalDays:function(b){var c=[],d=self.$("#holidayListId").val();d&&(d=d.replace(/'/g,'"'),holidayDateArray=JSON.parse(d));a.each(holidayDateArray,function(){var a=this.substring(0,2),b=this.substring(3,5),d=this.substring(6,10);c.push([a,b,d])});for(d=0;d<c.length;d++)if(b.getMonth()==c[d][0]-1&&b.getDate()==c[d][1]&&b.getFullYear()==
c[d][2])return[!1,""];return[!0,""]},printConfirmationEdit:function(b){var c=a("#BPConfirmationDiv").find(".activity--confirm-edit-transfer-message").html(),d=a("#BPConfirmationDiv").find(".activity--edit-transaction-popup-data")[0].outerHTML,e=window.open("","","height=400,width=800");e.document.write("<html><head><title>Fidelity - Payment Edited</title>");e.document.write("</head><body>");e.document.write(c);e.document.write("<br><br>");e.document.write(d);e.document.write("</body></html>");e.document.close();
e.print();e.close();b.preventDefault();return!1},setDPCSActivityPaneEnable:function(a){if(this.dpcsActivityPaneEnable=a)this.events["click .activity-tab--action-close"]="closeActivityTransferPopup",this.delegateEvents(this.events)},closeActivityTransferPopup:function(){var b=a("#AccountActivityTabTransfer");b.find(".activity-tab--billpay-action").BasePopup("close");b.find(".activity-tab--transfer-action").BasePopup("close");b.find(".activity-tab--billpay-action-error").BasePopup("close");b.find(".activity-tab--transfer-confirm-action").BasePopup("close");
b.find(".activity-tab--transfer-action-error").BasePopup("close")}})});
define("tasks/activity-pending-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/activityTabPendingTxns",type:"POST",buildParams:function(a){var c="Y";"N"===this.options.useACDA&&(c="N");c="Y"==c?b.get("AMC"):"";return{ACCOUNTS:a.accounts,SortBy:a.sortBy||"",SortDir:a.sortDir||"",AMC:c,TimePeriod:a.timePeriod||""}},setURL:function(a){this.url="Y"===a?"/ftgw/fbc/ofacda/snippet/activityTabPendingTxns":"/ftgw/fbc/mm/snippet/activityTabPendingTxns";
return this}})});define("tasks/activity-pending-cancel-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofcashmgmt/snippet/activityTabPendingActionInit",type:"GET",buildParams:function(a){var g=a.formData;return g="&"+g+"&ACCOUNT="+a.acctNum+"&transaction_id="+a.transactionId+"&mode=C"}})});define("tasks/activity-pending-cancel-confirm-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofcashmgmt/snippet/activityTabPendingActionCancel",type:"POST"})});
define("tasks/activity-transfer-cancel-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/mm/Snippet_mmCancelPendingTransactionVerify",type:"POST",buildParams:function(a){return a="&"+a}})});define("tasks/activity-transfer-cancel-confirm-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/mm/Snippet_mmCancelPendingTransactionConfirm",type:"POST",buildParams:function(a){return"&"+a}})});
define("tasks/activity-billpay-detail-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/mm/snippet/activityTabViewBillpayAction",type:"POST",buildParams:function(a){var g=a.formData;return g="&"+g+"&ACCOUNT="+a.acctNum+"&transaction_id="+a.transactionId+"&mode=V"}})});
define("views/activity-pending-transfer-view","jquery views/base-view views/activity-edit-billpay-view util/progressbar components/flexgrid components/flexgrid-android tasks/activity-pending-task tasks/activity-pending-cancel-task tasks/activity-pending-cancel-confirm-task tasks/activity-transfer-cancel-task tasks/activity-transfer-cancel-confirm-task tasks/activity-billpay-detail-task".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p){return b.extend({events:{"click .js-activity-search":"changeTimePeriod",
"click .date-sort":"orderByDate","click .amount-sort":"orderByAmount","click .account-sort":"orderByAccount","click .type-sort":"orderByType","click .description-sort":"orderByDescription","click .status-sort":"orderByStatus","click .activity-tab--transfer-cancel-action-yes":"cancelTransferConfirm","click .activity-tab--billpay-cancel-action-ok":"cancelBillpayConfirm","click .activity-tab--action-close":"closeActionPopUp","click .activity-tab--action-error-close":"closeActionErrorPopup","click .activity-tab--action-get-detail":"getBillpaymentDetail",
"click .activity--print-cancel-confirmation":"printConfirmationCancel","click .js-activity-pending-expand-all":"requestAllBillpayDetails","getDetail .activity-tab--action-get-detail":"getBillpaymentDetail","click .activity-close-button":"closeDrawer"},initialize:function(){this.clickflag=0;this.paramData={};this.displayError=this.needRefresh=!1},closePopup:function(){this.transferCancelVerifyPopup.BasePopup("toggle")},destroy:function(){this.selectedAccounts=[];this.$el.empty();this.undelegateEvents()},
render:function(){return this},setAccounts:function(b){this.selectedAccounts=a(b).map(function(a,b){return b.acctNum}).get().join(",");this.paramData={accounts:this.selectedAccounts,timePeriod:30}},refresh:function(a){var b=this;(new h({data:b.paramData,onPreExecute:function(){a||c.showLoading("Loading...",!0,500)},onSuccess:function(a){b.$el.empty().append(a);b.$(".activity--cancel-billpay").bind("click",function(a){a.stopPropagation();b.cancelBillpayInit(a)});b.$(".activity--cancel-transfer").bind("click",
function(a){a.stopPropagation();b.cancelTransferInit(a)});b.$(".activity--edit-bill").bind("click",function(a){a.stopPropagation();b.editBillPayInit(a)});b._initAllActionPopup();b.postProcessing()},onError:function(){},onComplete:function(){a||c.hideLoading()}})).run()},orderByDate:function(){var a=this.$(".date-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Date",sortDir:a,timePeriod:b};this.refresh()},
orderByAccount:function(){var a=this.$(".account-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Account",sortDir:a,timePeriod:b};this.refresh()},orderByType:function(){var a=this.$(".type-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Type",sortDir:a,timePeriod:b};this.refresh()},orderByAmount:function(){var a=
this.$(".amount-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Amount",sortDir:a,timePeriod:b};this.refresh()},orderByDescription:function(){var a=this.$(".description-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Description",sortDir:a,timePeriod:b};this.refresh()},orderByStatus:function(){var a=
this.$(".status-sort").data("sort-order"),b=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:"Status",sortDir:a,timePeriod:b};this.refresh()},changeTimePeriod:function(){var a=this.$(".activity--pending-transfer-snippet").data("sort-dir"),b=this.$(".activity--pending-transfer-snippet").data("sort-by"),c=this.$("#activity--pending-transfers-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:b,
sortDir:a,timePeriod:c};this.refresh()},cancelBillpayInit:function(b){b.stopPropagation();var d=this,e=a(b.currentTarget),g=e.offset().top-200;b=e.attr("data-accountnum");var e=e.attr("data-transactionid"),h=this.$('.activity--payee-list input[name="at.dat.cashmgmtData"]').serialize();(new f({context:this,data:{formData:h,acctNum:b,transactionId:e},onPreExecute:function(){d._closeAllActionPopup();c.showLoading("Loading...",!0,500)},onSuccess:function(a){a?d.$(".activity-tab--billpay-action").html(a):
d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){c.hideLoading();d.displayError?(d._locatePopup(g,d.$(".activity-tab--billpay-action-error")),d.$(".activity-tab--billpay-action-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(g,d.$(".activity-tab--billpay-action")),d.$(".activity-tab--billpay-action").BasePopup("open"))}})).run()},cancelBillpayConfirm:function(b){var d=this.$(".activity--cancel-pending").serialize(),e=this,f=a(b.currentTarget).offset().top-
300;(new j({context:this,data:d,onPreExecute:function(){e._closeAllActionPopup();c.showLoading("Loading...",!0,500)},onSuccess:function(a){a?(e.$(".activity-tab--billpay-action").html(a),e.needRefresh=!0):e.displayError=!0},onError:function(){e.displayError=!0},onComplete:function(){c.hideLoading();e.displayError?(e._locatePopup(f,e.$(".activity-tab--billpay-action-error")),e.$(".activity-tab--billpay-action-error").BasePopup("open"),e.displayError=!1):(e._locatePopup(f,e.$(".activity-tab--billpay-action")),
e.$(".activity-tab--billpay-action").BasePopup("open"))}})).run()},cancelTransferInit:function(b){b.stopPropagation();var d=this,e=a(b.target).offset().top-200;(new k({context:this,data:b.target.attributes.url.value,onPreExecute:function(){d._closeAllActionPopup();c.showLoading("Loading...",!0,500)},onSuccess:function(a){a?d.$(".activity-tab--transfer-action").html(a):d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){c.hideLoading();d.displayError?(d._locatePopup(e,d.$(".activity-tab--transfer-action-error")),
d.$(".activity-tab--transfer-action-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(e,d.$(d.$(".activity-tab--transfer-action"))),d.$(".activity-tab--transfer-action").BasePopup("open"))}})).run()},cancelTransferConfirm:function(b){var d=this,e=a(b.currentTarget).offset().top-300;b=this.$(".activity--cancel-transfer-form").serialize();(new l({context:this,data:b,onPreExecute:function(){d._closeAllActionPopup();c.showLoading("Loading...",!0,500)},onSuccess:function(a){a?(d.$(".activity-tab--transfer-action").html(a),
d.needRefresh=!0):d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){c.hideLoading();d.displayError?(d._locatePopup(e,d.$(".activity-tab--transfer-action-error")),d.$(".activity-tab--transfer-action-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(e,d.$(".activity-tab--transfer-action")),d.$(".activity-tab--transfer-action").BasePopup("open"))}})).run()},editBillPayInit:function(a){this.editBillPayView=new g({el:this.$el});this.editBillPayView.setParent(this);
this.editBillPayView.editBillpayInit(a)},getBillpaymentDetail:function(b){var c=this,d=a(b.target).closest(".activity-tab--action-get-detail"),e=d.next().find(".activity--content-table-container"),f=d.attr("data-accountnum"),g=d.attr("data-transactionid"),j=this.$('.activity--payee-list input[name="at.dat.mmData"]').serialize();(new h({data:{accounts:this.selectedAccounts},onPreExecute:function(){e.find(".activity-tab--action-get-detail-process").show();e.find(".activity-tab--action-get-detail-error").hide()},
onSuccess:function(b){b&&(b=a(b).find("input[name='at.dat.mmData']"),this.$(".activity--payee-list").append(b));j=this.$('.activity--payee-list input[name="at.dat.mmData"]').serialize();(new p({context:this,data:{formData:j,acctNum:f,transactionId:g},onPreExecute:function(){},onSuccess:function(a){a?e.html(a):c.displayError=!0},onError:function(){c.displayError=!0},onComplete:function(){c.displayError?(e.find(".activity-tab--action-get-detail-error").show(),e.find(".activity-tab--action-get-detail-process").hide(),
c.displayError=!1):0<e.find(".activity--content-table").length&&d.removeClass("activity-tab--action-get-detail")}})).run()},onError:function(){e.find(".activity-tab--action-get-detail-error").show();e.find(".activity-tab--action-get-detail-process").hide()},onComplete:function(){},useACDA:"N"})).setURL().run()},closeActionErrorPopup:function(){this.$(".activity-tab--billpay-action-error").BasePopup("close");this.$(".activity-tab--transfer-action-error").BasePopup("close")},closeActionPopUp:function(b){b=
a(b.currentTarget);this._closeAllActionPopup();this.needRefresh&&!b.hasClass("not-refresh")&&this.refresh();this.needRefresh=!1},postProcessing:function(){$table=a("#transferExpanderContent .fid-datagrid.flexgrid");0<$table.length&&a("#transferExpanderContent .fid-datagrid.flexgrid").flexgrid({LockHeader:!1,LockColumn:!1})},_initAllActionPopup:function(){this.$(".activity-tab--billpay-action").BasePopup();this.$(".activity-tab--transfer-action").BasePopup();this.$(".activity-tab--billpay-action-error").BasePopup();
this.$(".activity-tab--transfer-confirm-action").BasePopup();this.$(".activity-tab--transfer-action-error").BasePopup()},_closeAllActionPopup:function(){this.$(".activity-tab--billpay-action").BasePopup("close");this.$(".activity-tab--transfer-action").BasePopup("close");this.$(".activity-tab--billpay-action-error").BasePopup("close");this.$(".activity-tab--transfer-confirm-action").BasePopup("close");this.$(".activity-tab--transfer-action-error").BasePopup("close")},_locatePopup:function(a,b){b.css("top",
a)},requestAllBillpayDetails:function(){this.$(".activity-tab--action-get-detail").trigger("getDetail")},printConfirmationCancel:function(b){var c=a("#BPConfirmationDiv").find(".activity--cancel-edit-transfer-message").html(),d=a("#BPConfirmationDiv").find(".activity--edit-transaction-popup-data")[0].outerHTML,e=window.open("","","height=400,width=800");e.document.write("<html><head><title>Fidelity - Payment Cancelled</title>");e.document.write("</head><body>");e.document.write(c);e.document.write("<br><br>");
e.document.write(d);e.document.write("</body></html>");e.document.close();e.print();e.close();b.preventDefault();return!1},closeDrawer:function(b){b.preventDefault();a(b.currentTarget).parents(".content-row").prev().trigger("click")}})});
define("views/activity-pending-transfer-ngapp-view","jquery views/base-view util/progressbar fang tasks/activity-pending-cancel-task tasks/activity-pending-cancel-confirm-task tasks/activity-transfer-cancel-task tasks/activity-transfer-cancel-confirm-task views/activity-edit-billpay-view".split(" "),function(a,b,g,c,e,d,h,f,j){return b.extend({events:{"click .activity-tab--transfer-cancel-action-yes":"cancelTransferConfirm","click .activity-tab--billpay-cancel-action-ok":"cancelBillpayConfirm","click .activity-tab--action-close":"closeActionPopUp",
"click .activity-tab--action-error-close":"closeActionErrorPopup","click .activity--print-cancel-confirmation":"printConfirmationCancel"},defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(b){this.deferred=a.Deferred();this.options=b||{};this.options=_.extend({},this.defaults,this.options);
this.$wrapperClass=this.$el;this.acctNums=a(b.accounts).map(function(a,b){return b.acctNum}).get().join(",");this.showLoadingEventId=c.EventBus.subscribe("ACC_HISTORY_NG_SHOW_LOADING",this.showLoading);this.hideLoadingEventId=c.EventBus.subscribe("ACC_HISTORY_NG_HIDE_LOADING",this.hideLoading.bind(this));this.transferLoaded=c.EventBus.subscribe("ACC_HISTORY_TRANSFER_LOADED",this._initAllActionPopup.bind(this));this.cancelTransferInitEvt=c.EventBus.subscribe("ACC_HISTORY_CANCEL_TRANSFER_INIT",this.cancelTransferInit.bind(this));
this.cancelBillpayInitEvt=c.EventBus.subscribe("ACC_HISTORY_CANCEL_BILLPAY_INIT",this.cancelBillpayInit.bind(this));this.editBillpayInitEvt=c.EventBus.subscribe("ACC_HISTORY_EDIT_BILLPAY_INIT",this.editBillPayInit.bind(this));this.showLoading()},destroy:function(){this.$wrapperClass.empty();this.showLoadingEventId&&c.EventBus.unsubscribe(this.showLoadingEventId);this.hideLoadingEventId&&c.EventBus.unsubscribe(this.hideLoadingEventId);this.transferLoaded&&c.EventBus.unsubscribe(this.transferLoaded);
this.cancelTransferInitEvt&&c.EventBus.unsubscribe(this.cancelTransferInitEvt);this.cancelBillpayInitEvt&&c.EventBus.unsubscribe(this.cancelBillpayInitEvt);this.editBillpayInitEvt&&c.EventBus.unsubscribe(this.editBillpayInitEvt)},bootstrap:function(b,c,d){var e=this;require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[d])},function(){e.$el.html('<div class="warning-box center-message ng-scope">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</div>');
e.deferred.resolve()})},insertMarkup:function(){var a=this.options.basePath+this.options.pathToBundles+this.options.cssBundle;this.$wrapperClass.append((toggleMap.DPCSActivityDexResiliencyFeature?"":'<link href="'+a+'" rel="stylesheet">')+'<div id="acat-assets-transfer"></div><div id="AccountActivityTabTransfer" ng-init="accounts=\''+this.acctNums+'\'"><div ng-controller="activityTabTransferCtrl"><activity-tab-transfer-directive transaction="transaction"></activity-tab-transfer-directive></div></div>')},
renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName,d=b+this.options.pathToBundles+this.options.jsBundle;a("#transferExpanderContent").hasClass("ng-scope")?(b=angular.element(a("#transferExpanderContent")).scope(),b.$broadcast("initScopeData"),b.$broadcast("loadActivityTabTransferData")):(this.insertMarkup(),toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets-transfer").html(b)}):
this.bootstrap(d,"#transferExpanderContent",c),a("#transferExpanderContent").attr("data-app-path",b),a("#transferExpanderContent").attr("data-injected",!0))},refresh:function(){try{this.renderMicroApp()}catch(a){this.deferred.resolve()}},showLoading:function(){g.showLoading("Loading...",!0,500)},hideLoading:function(){this.deferred.resolve();g.hideLoading()},_initAllActionPopup:function(){this.$(".activity-tab--billpay-action").BasePopup();this.$(".activity-tab--transfer-action").BasePopup();this.$(".activity-tab--billpay-action-error").BasePopup();
this.$(".activity-tab--transfer-confirm-action").BasePopup();this.$(".activity-tab--transfer-action-error").BasePopup()},_closeAllActionPopup:function(){this.$(".activity-tab--billpay-action").BasePopup("close");this.$(".activity-tab--transfer-action").BasePopup("close");this.$(".activity-tab--billpay-action-error").BasePopup("close");this.$(".activity-tab--transfer-confirm-action").BasePopup("close");this.$(".activity-tab--transfer-action-error").BasePopup("close")},_locatePopup:function(a,b){b.css("top",
a)},cancelBillpayInit:function(b){b.stopPropagation();var c=this,d=a(b.currentTarget),f=d.offset().top-200;b=d.attr("data-accountnum");var d=d.attr("data-transactionid"),h=this.$('.activity--payee-list input[name="at.dat.cashmgmtData"]').serialize();(new e({context:this,data:{formData:h,acctNum:b,transactionId:d},onPreExecute:function(){c._closeAllActionPopup();g.showLoading("Loading...",!0,500)},onSuccess:function(a){a?c.$(".activity-tab--billpay-action").html(a):c.displayError=!0},onError:function(){c.displayError=
!0},onComplete:function(){g.hideLoading();c.displayError?(c._locatePopup(f,c.$(".activity-tab--billpay-action-error")),c.$(".activity-tab--billpay-action-error").BasePopup("open"),c.displayError=!1):(c._locatePopup(f,c.$(".activity-tab--billpay-action")),c.$(".activity-tab--billpay-action").BasePopup("open"))}})).run()},cancelBillpayConfirm:function(b){var c=this.$(".activity--cancel-pending").serialize(),e=this,f=a(b.currentTarget).offset().top-300;(new d({context:this,data:c,onPreExecute:function(){e._closeAllActionPopup();
g.showLoading("Loading...",!0,500)},onSuccess:function(a){a?(e.$(".activity-tab--billpay-action").html(a),e.needRefresh=!0):e.displayError=!0},onError:function(){e.displayError=!0},onComplete:function(){g.hideLoading();e.displayError?(e._locatePopup(f,e.$(".activity-tab--billpay-action-error")),e.$(".activity-tab--billpay-action-error").BasePopup("open"),e.displayError=!1):(e._locatePopup(f,e.$(".activity-tab--billpay-action")),e.$(".activity-tab--billpay-action").BasePopup("open"))}})).run()},cancelTransferInit:function(b){b.stopPropagation();
var c=this,d=a(b.target).offset().top-200;(new h({context:this,data:b.target.attributes.url.value,onPreExecute:function(){c._closeAllActionPopup();g.showLoading("Loading...",!0,500)},onSuccess:function(a){a?c.$(".activity-tab--transfer-action").html(a):c.displayError=!0},onError:function(){c.displayError=!0},onComplete:function(){g.hideLoading();c.displayError?(c._locatePopup(d,c.$(".activity-tab--transfer-action-error")),c.$(".activity-tab--transfer-action-error").BasePopup("open"),c.displayError=
!1):(c._locatePopup(d,c.$(c.$(".activity-tab--transfer-action"))),c.$(".activity-tab--transfer-action").BasePopup("open"))}})).run()},cancelTransferConfirm:function(b){var c=this,d=a(b.currentTarget).offset().top-300;b=this.$(".activity--cancel-transfer-form").serialize();(new f({context:this,data:b,onPreExecute:function(){c._closeAllActionPopup();g.showLoading("Loading...",!0,500)},onSuccess:function(a){a?(c.$(".activity-tab--transfer-action").html(a),c.needRefresh=!0):c.displayError=!0},onError:function(){c.displayError=
!0},onComplete:function(){g.hideLoading();c.displayError?(c._locatePopup(d,c.$(".activity-tab--transfer-action-error")),c.$(".activity-tab--transfer-action-error").BasePopup("open"),c.displayError=!1):(c._locatePopup(d,c.$(".activity-tab--transfer-action")),c.$(".activity-tab--transfer-action").BasePopup("open"))}})).run()},closeActionErrorPopup:function(){this.$(".activity-tab--billpay-action-error").BasePopup("close");this.$(".activity-tab--transfer-action-error").BasePopup("close")},closeActionPopUp:function(b){b=
a(b.currentTarget);this._closeAllActionPopup();this.needRefresh&&!b.hasClass("not-refresh")&&this.refresh();this.needRefresh=!1},editBillPayInit:function(a){this.editBillPayView=new j({el:this.$el});this.editBillPayView.setParent(this);this.editBillPayView.editBillpayInit(a)},printConfirmationCancel:function(b){var c=a("#BPConfirmationDiv").find(".activity--cancel-edit-transfer-message").html(),d=a("#BPConfirmationDiv").find(".activity--edit-transaction-popup-data")[0].outerHTML,e=window.open("",
"","height=400,width=800");e.document.write("<html><head><title>Fidelity - Payment Cancelled</title>");e.document.write("</head><body>");e.document.write(c);e.document.write("<br><br>");e.document.write(d);e.document.write("</body></html>");e.document.close();e.print();e.close();b.preventDefault();return!1}})});
define("tasks/activity-orders-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/orderStatus",type:"POST",buildParams:function(a){var c="Y";"N"===this.options.useACDA&&(c="N");var e="Y"==c?b.get("AMC"):"";return"Y"===c||a.CustData?{ACCOUNTS:a.accounts,SORT_BY:a.sortBy||"",SORT_DIRECTION:a.sortDir||"","at.dat.tradeData":a.CustData||"",AMC:e,sticky_ind:a.sticky_ind||"",VIEW_FILTER:a.viewFilter,ALL_ACCOUNTS_IND:a.isAllAccountsSelected}:
{ACCOUNTS:a.accounts,AMC:e,TimePeriod:a.timePeriod||""}},setURL:function(a){this.url="Y"===a?"/ftgw/fbc/ofacda/snippet/orderStatus":"/ftgw/fbc/oftrade/snippet/orderStatus";return this}})});define("tasks/activity-order-edit-expiration-init-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/oftrade/snippet/editOrderExpiration",type:"POST",buildParams:function(a){return"OMC="+a.omcData+"&ACCOUNT="+a.acctNum+"&ORDER_NUM="+a.orderNum}})});
define("tasks/activity-order-edit-expiration-confirm-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/oftrade/snippet/saveOrderExpiration",type:"POST",buildParams:function(a){var g=a.formData;return g=g+"&"+("GTC_EXP_TIME="+a.gtcExpTime)+"&"+("GTC_EXP_DATE="+a.gtcExpDate)+"&"+("GTC_EXP_ALERT_DATE="+a.gtcExpAlertDate)+"&"+("ORDER_NUM="+a.orderNum)+"&"+("ACT_NUM="+a.acctNum)+"&"+("TIM_IN_FORC="+a.timeInForce)+"&IS_AJAX=Y"}})});
define("tasks/activity-order-edit-conditional-expiration-init-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/oftrade/snippet/editConditionalOrderExpiration",type:"POST",buildParams:function(a){var g=a.editUrl;return g=g+"&IS_AJAX=Y&ACCOUNT="+a.acctNum+"&ORDER_NUM="+a.orderNum+"&IS_EDIT_EXP="+a.isConditional}})});
define("tasks/activity-order-edit-conditional-expiration-confirm-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/oftrade/snippet/saveConditionalOrderExpiration",type:"POST",buildParams:function(a){var g=a.formData;return g=g+"&"+a.savingData+"IS_EDIT_EXP=Y&IS_AJAX=Y"}})});
define("views/activity-edit-order-expiration-view","jquery views/base-view placeholder util/progressbar components/flexgrid components/flexgrid-android fiddatepicker datemask charactersmask tasks/activity-order-edit-expiration-init-task tasks/activity-order-edit-expiration-confirm-task tasks/activity-order-edit-conditional-expiration-init-task tasks/activity-order-edit-conditional-expiration-confirm-task tasks/activity-orders-task util/eventhub-backbone fang".split(" "),function(a,b,g,c,e,d,h,f,j,
k,l,p,m,n,r,s){return b.extend({events:{"click .js-acticity-order-edit-expiration":"saveOrderExpirationData","click .js-activity-order-edit-conditional-expiration":"saveConditionalOrderExpirationData","click .activity--calendar-button":"toggleCalendar","click .js-activity-edit-order-close-button":"closePopup","keydown .js-activity-order-edit-expiration-date-picker":"stopTyping","click .js-activity-edit-order-help-back":"hideMsg","click .js-activity-edit-order-help-icon":"displayMsg","click .activity--popup-button-cancel":"closePopup"},
destroy:function(){this.refreshDrawer=!1;this.closePopup();this.$popup=null;this.undelegateEvents()},render:function(){return this},initialize:function(){this.$popup=this.$(".js-activity-tab-edit-order-popup").DraggablePopup();this.selectedAccounts=this.options.accounts},openPopup:function(){this.$popup.DraggablePopup("close");this.$popup.DraggablePopup("open");this.$popup.css("top",(document.body.scrollTop||document.documentElement.scrollTop)+0.1*document.body.offsetHeight);this.$('div[aria-label="Close Edit Order"]').focus()},
closePopup:function(){this.$popup.DraggablePopup("close");this.refreshDrawer&&(toggleMap.DPCSActivityTabOpenOrderEntitledFeature?s.EventBus.publish("ACTIVITY_ORDER_REFRESH"):r.publishEvent("ORDER_DRAWER_REFRESH"))},refresh:function(a){this.closePopup();this.account=a.attr("data-acct-num");this.orderNum=a.attr("data-order-num");(this.isConditional=(this.isConditional=a.attr("data-conditional-order"))&&"true"==this.isConditional?!0:!1)?this._editConditionalOrderExpirationInit(a.attr("data-edit-url")):
this._editExpirationInit(a)},toggleCalendar:function(b){b=a(b.currentTarget).parent().find(".js-activity-order-edit-expiration-date-picker");var c;c=b.FidDatePicker("widget").is(":hidden")?"show":"hide";b.FidDatePicker(c)},_errorHandler:function(){this.$(".activity--edit-order-section-container").removeClass("activity--edit-order-section-container-active");this.$("#activity--edit-order-info-window-container").addClass("activity--edit-order-section-container-active");this.$(".js-activity-edit-msg-pop").addClass("activity-info-window--visible");
this.$(".js-activity-edit-msg-pop .activity--info-window-body").removeClass("display-none")},stopTyping:function(){return!1},_editConditionalOrderExpirationInit:function(b){var d=this;(new p({context:this,data:{editUrl:b,acctNum:d.account,orderNum:d.orderNum,isConditional:d.isConditional?"Y":"N"},onPreExecute:function(){d.refreshDrawer=!1;d.displayError=!1;d.closePopup();c.showLoading("Loading...",!0,500)},onSuccess:function(b){b?(a(b).hasClass("js-activity-edit-msg-container")&&(d.displayError=!0),
d.$(".js-acitivity-edit-container").html(b),d.refreshGTCTimeDropdown()):d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){d.displayError?d._errorHandler():d._initFidDatePicker();c.hideLoading();d.openPopup()}})).run()},_editExpirationInit:function(b){b=b.attr("data-omc");var d=this;(new k({context:this,data:{omcData:b,acctNum:d.account,orderNum:d.orderNum},onPreExecute:function(){d.refreshDrawer=!1;d.displayError=!1;d.closePopup();c.showLoading("Loading...",!0,500)},onSuccess:function(b){b?
(a(b).hasClass("js-activity-edit-msg-container")&&(d.displayError=!0),d.$(".js-acitivity-edit-container").html(b),d.refreshGTCTimeDropdown()):d.displayError=!0},onError:function(){d.displayError=!0},onComplete:function(){d.displayError?d._errorHandler():d._initFidDatePicker();c.hideLoading();d.openPopup()}})).run()},_initFidDatePicker:function(){var b=this,c=new Date,d=new Date;c.setDate(c.getDate()+1);d.setDate(c.getDate()+179);var e=b.$("#HOLIDAY_LIST").val(),f=[];e&&(f=e.split(","));a(".js-activity-order-edit-expiration-date-picker").FidDatePicker({forbiddendays:{range:[{start:"04/9/2013",
end:"12/11/2013"},{start:"12/24/2013",end:"12/25/2013"}],days:f},minDate:c,maxDate:d,usedatemask:!1,onSelect:function(){b.refreshGTCTimeDropdown()}})},saveOrderExpirationData:function(b){var c=this.$("#GTC_EXP_TIME").val();b=a(b.currentTarget).attr("data-time-in-force");var d="",e="",f=this;b&&(null!=b&&"G"==b)&&(d=this.$("#GTC_EXP_DATE").val(),e=this.$("#GTC_EXP_ALERT_DATE").val());(new l({context:this,data:{acctNum:f.account,orderNum:f.orderNum,gtcExpTime:c,timeInForce:b,gtcExpDate:d,gtcExpAlertDate:e},
onPreExecute:function(){f.refreshDrawer=!1;f.displayError=!1},onSuccess:function(b){if(b){var c=a(b).find(".js-activity-edit-msg-pop").attr("data-msg-type");c&&"success"===c?f.refreshDrawer=!0:f.displayError=!0;f.$(".js-acitivity-edit-container").html(b)}else f.displayError=!0},onError:function(){f.displayError=!0},onComplete:function(){f.$('div[aria-label="Close Edit Order"]').focus();f.displayError&&f._errorHandler()}})).run()},saveConditionalOrderExpirationData:function(){var b="",c=this,d=c.$('.js-activity-edit-expiration-popup-content input[name="at.dat.tradeData"]').serialize();
c.$(".js-activity-edit-expiration-popup-content input").each(function(c,d){var e=a(d),f=e.val()||"",e=e.attr("name");"at.dat.tradeData"!=e&&(b="INPUT_TIMESTAMP"==e?b+(e+"="+(new Date).getTime()+"&"):b+(e+"="+f+"&"))});c.$(".js-activity-edit-expiration-popup-content select").each(function(c,d){var e=a(d),f=e.val()||"",e=e.attr("name");b+=e+"="+f+"&"});(new m({context:this,data:{formData:d,savingData:b},onPreExecute:function(){c.refreshDrawer=!1;c.displayError=!1},onSuccess:function(b){if(b){var d=
a(b).find(".js-activity-edit-msg-pop").attr("data-msg-type");d&&"success"===d?c.refreshDrawer=!0:c.displayError=!0;c.$(".js-acitivity-edit-container").html(b)}else c.displayError=!0},onError:function(){c.displayError=!0},onComplete:function(){c.$('div[aria-label="Close Edit Order"]').focus();c.displayError&&c._errorHandler()}})).run()},hideMsg:function(){this.$(".activity--edit-order-section-container").removeClass("activity--edit-order-section-container-active");this.$(".activity-info-window").removeClass("activity-info-window--visible");
this.$(".activity--info-window-body").addClass("display-none");this.$("#activity--edit-order-main-container").addClass("activity--edit-order-section-container-active")},displayMsg:function(b){var c=a(b.currentTarget);b=c.attr("data-msgtype");c=c.attr("data-infowindow");this.$(".activity--edit-order-section-container").removeClass("activity--edit-order-section-container-active");this.$("#activity--edit-order-info-window-container").addClass("activity--edit-order-section-container-active");this.$("#"+
c).addClass("activity-info-window--visible");this.$("."+b).removeClass("display-none")},refreshGTCTimeDropdown:function(){var b=this.$(".activity--history-custom-date-field"),c=(this.$(".js-activity-edit-expiration-popup-content").data("early-close-dates")||"").split(",");b.each(function(b,d){var e=a(d),f=e.closest(".activity--edit-order-row").find(".activity--cancel-popup-select"),g="";f.data("initial-gtc-time").replace(/^\s*(\d+)\:(\d+)[\s\r\n]*(AM|PM)/g,function(a,b,c,d){a=parseInt(b,10);12!==
a&&"PM"===d&&(b=a+12+"");g=b+c+"00"});var h=g||f.val();f.data("initial-gtc-time","");var j=0<=a.inArray(e.val(),c)?a('<option value="100000">10:00 AM ET</option><option value="103000">10:30 AM ET</option><option value="110000">11:00 AM ET</option><option value="113000">11:30 AM ET</option><option value="120000">12:00 PM ET</option><option value="123000">12:30 PM ET</option><option value="130000">01:00 PM ET</option>'):a('<option value="100000">10:00 AM ET</option><option value="103000">10:30 AM ET</option><option value="110000">11:00 AM ET</option><option value="113000">11:30 AM ET</option><option value="120000">12:00 PM ET</option><option value="123000">12:30 PM ET</option><option value="130000">01:00 PM ET</option><option value="133000">01:30 PM ET</option><option value="140000">02:00 PM ET</option><option value="143000">02:30 PM ET</option><option value="150000">03:00 PM ET</option><option value="153000">03:30 PM ET</option><option value="160000">04:00 PM ET</option>'),
k=f.data("first-expiration-time");e.val()===f.data("current-date")&&(j=j.filter(function(){return this.value>=k}));f.empty().append(j);f.find("[value="+h+"]").length?f.val(h):f.children().last().attr("selected","selected")})}})});
define("views/activity-orders-view","jquery views/base-view util/progressbar components/basepopup components/flexgrid components/flexgrid-android components/expander tasks/activity-orders-task views/activity-edit-order-expiration-view util/eventhub-backbone util/constants models/ajax-object-model tasks/state-save-task".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m){return b.extend({events:{"click .activity-tab--action-cancel-order-confirm":"cancelOrderConfirm","click .activity-tab--action-close":"closeActionPopUp",
"click .activity-tab--action-error-close":"closeActionErrorPopup","click .activity--cancel-button-no":"closeCancelPopup","click .activity--cancel-button-yes":"cancelOrder","click #cancelBtnNo":"closeCancelPopup","click #cancelBtnYes":"cancelOrder","click .date-sort":"orderByDate","click .amount-sort":"orderByAmount","click .status-sort":"orderByStatus","click .account-sort":"orderByAccount","click .activity--cancel-pending-link":"showCancelPopup","change #activity--pending-transfer-range-dropdown":"changeTimePeriod",
"click #specificShareOrder":"locateSpecificOrderDetail","click .js-activity--orders--refresh-button":"refresh","click .js-activity-tab-order-edit-expiration":"showEditExpirationPopup","click .activity--edit-order-popup .modal-popup--button":"closeEditExpirationPopup","click .js-portfolio-review-order-cancel-button":"cancelPortfolioReviewOrder","click .activity-close-button":"closeDrawer","click .drawer--print-action a":"printSingleOrder"},initialize:function(){function b(c){var d=a(".activity--button-cancel-orders button");
c.matches?d.text("Cancel"):d.text("Cancel Portfolio Review Orders")}this.clickflag=0;this.paramData={};this.replaceCancelPopup=null;this.needRefresh=!1;this.activityCancelOnlyContent=this.activityCancelConfirmPopup=this.activityCancelReplaceContent=null;k.subscribeEvent("ORDER_DRAWER_REFRESH",_.bind(this.refresh,this));if(!a("html.lt-ie10").length&&!a("html.lt-ie9").length){var c=window.matchMedia("(max-width: 1080px)");c.addListener(b);b(c)}},destroy:function(){this.selectedAccounts=null;this.activityEditOrderExpiration&&
(this.activityEditOrderExpiration.destroy(),this.activityEditOrderExpiration=null);this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(b){this.selectedAccounts=a(b).map(function(a,b){return b.acctNum}).get().join(",");this.paramData={accounts:this.selectedAccounts}},refresh:function(){var b=this;this.activityEditOrderExpiration&&(this.activityEditOrderExpiration.destroy(),this.activityEditOrderExpiration=null);this._checkAllAccountsSelected();(new f({data:b.paramData,
onPreExecute:function(){g.showLoading("Loading...",!0,500)},onSuccess:function(c){b.$el.html(c);$Content=a(".flexgrid-wrapper");0<$Content.length&&(b.$(".activity--replace-order-button").bind("click",function(a){a.stopPropagation();b.doReplaceOrder(a)}),b.$(".activity--cancel-order-button").bind("click",function(a){a.stopPropagation();b.doCancelOrder(a)}),b._initAllActionPopup(),b.postProcessing())},onError:function(){},onComplete:function(){g.hideLoading()}})).run()},postProcessing:function(){$table=
a("#orderExpanderContent .fid-datagrid.flexgrid");console_log($table.length);if(0<$table.length){this.flexgridtbl=a("#orderExpanderContent .fid-datagrid.flexgrid").flexgrid({LockHeader:!1,LockColumn:!1});for(var b=0;b<a(".activity--orders-execution-expander").length;b++)new FID.Expander(a(".activity--orders-execution-expander")[b],a(".activity--orders-execution-table")[b])}},cancelOrderInit:function(b){var c="/ftgw/fbc/oftrade/"+b.target.attributes.url.value,d=this,e=a(b.currentTarget),f=e.offset().top-
200;e.attr("disabled",!0);b=a.ajax({url:c,dataType:"html",xhrFields:{withCredentials:!0},beforeSend:function(){d._closeAllActionPopup();g.showLoading("Loading...",!0,500)},success:function(a){a?d.$(".activity-tab--order-cancel-verify").html(a):d.displayError=!0},error:function(){d.displayError=!0},complete:function(){g.hideLoading();e.removeAttr("disabled");d.displayError?(d._locatePopup(f,d.$(".activity-tab--order-cancel-error")),d.$(".activity-tab--order-cancel-error").BasePopup("open"),d.displayError=
!1):(d._locatePopup(f,d.$(".activity-tab--order-cancel-verify")),d.$(".activity-tab--order-cancel-verify").BasePopup("open"))}});p.addAjaxObjArray(b)},cancelOrderConfirm:function(b){var c=a(b.target);b=c.attr("data-next-step-url");var d=this,e=c.offset().top-300,c=d.$(".activity-order--persisited-oreder-info").serialize();b=a.ajax({url:b,type:"POST",data:c,xhrFields:{withCredentials:!0},beforeSend:function(){d._closeAllActionPopup();g.showLoading("Loading...",!0,500)},success:function(a){a?(d.$(".activity-tab--order-cancel-confirm").html(a),
d.needRefresh=!0):d.displayError=!0},error:function(){d.displayError=!0},complete:function(){g.hideLoading();d.displayError?(d._locatePopup(e,d.$(".activity-tab--order-cancel-error")),d.$(".activity-tab--order-cancel-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(e,d.$(".activity-tab--order-cancel-confirm")),d.$(".activity-tab--order-cancel-confirm").BasePopup("open"))}});p.addAjaxObjArray(b)},popUp:function(a){window.location.href="/ftgw/fbc/oftrade/"+a.target.attributes.url.value},
closeCancelPopup:function(){},cancelOrder:function(){console_log("yes")},orderByDate:function(){this.sortOrders("DATE")},orderByAmount:function(){this.sortOrders("AMOUNT")},orderByStatus:function(){this.sortOrders("STATUS")},orderByAccount:function(){this.sortOrders("ACCOUNT")},sortOrders:function(b){var c=this,d=this.$("input[name='at.dat.tradeData']").val(),e=this.$("#SORT_BY").val();this.$("#SORT_BY").val(b);this.sortDescription=this.$("#SORT_DIRECTION").val();e!=b&&(this.sortDescription="STATUS"==
b?"D":"A");this.sortDescription="A"==this.sortDescription?"D":"A";this.$("#SORT_DIRECTION").val(this.sortDescription);b={CustData:d,accounts:this.selectedAccounts,sortBy:this.$("#SORT_BY").val(),sortDir:this.$("#SORT_DIRECTION").val(),viewFilter:"AllOrders"};this._checkAllAccountsSelected();(new f({data:b,onPreExecute:function(){g.showLoading("Loading...",!0,500)},onSuccess:function(b){c.$el.html(b);$Content=a(".flexgrid-wrapper");0<$Content.length&&(c.$(".activity--replace-order-button").bind("click",
function(a){a.stopPropagation();c.doReplaceOrder(a)}),c.$(".activity--cancel-order-button").bind("click",function(a){a.stopPropagation();c.doCancelOrder(a)}),c._initAllActionPopup(),c.postProcessing())},onError:function(){},onComplete:function(){g.hideLoading()}})).run()},openEditExpirationModalpoup:function(){},showCancelPopup:function(){this.cancelConfirmWin.BasePopup("open");a(".overlay-background").show()},hideCancelPopup:function(){this.cancelConfirmWin.BasePopup("close");a(".overlay-background").hide()},
changeTimePeriod:function(){var a=this.$(".activity--pending-transfer-snippet").data("sort-dir"),b=this.$(".activity--pending-transfer-snippet").data("sort-by"),c=this.$("#activity--pending-transfer-range-dropdown").attr("value");this.paramData={accounts:this.selectedAccounts,sortBy:b,sortDir:a,timePeriod:c};this.refresh()},locateSpecificOrderDetail:function(b){b=a(b.currentTarget);b=envMap.TRADE_URL+"/ftgw/fbc/oftrade/"+b.attr("url");window.open(b)},showEditExpirationPopup:function(b){b=a(b.currentTarget);
this.activityEditOrderExpiration&&this.activityEditOrderExpiration.destroy();this.activityEditOrderExpiration=new j({el:this.$el,accounts:this.selectedAccounts});this.activityEditOrderExpiration.refresh(b)},closeEditExpirationPopup:function(){this.activityEditOrderExpiration&&this.activityEditOrderExpiration.closePopup()},closeActionPopUp:function(b){b=a(b.currentTarget);this._closeAllActionPopup();this.needRefresh&&!b.hasClass("not-refresh")&&this.refresh();this.needRefresh=!1},closeActionErrorPopup:function(){this.$(".activity-tab--order-cancel-error").BasePopup("close")},
doCancelOrder:function(b){var c=b.target.attributes.url.value,c=c.substring(c.indexOf("?")+1),d={};a(c.split("&")).each(function(a,b){var c=b.split("=");d[c[0]]=c[1]});c={top:a(document).scrollTop()+50};d.CONDITIONAL_ORDER_TYPE?this.cancelOrderInit(b):d.ORDER_TYPE&&("E"===d.ORDER_TYPE||"M"===d.ORDER_TYPE)?a(document).trigger(this.constants.EVENTS.QUICK_TRADE,{cancelOrder:!0,orderInfo:d,location:c}):this.cancelOrderInit(b)},doReplaceOrder:function(b){var c=b.target.attributes.url.value,c=c.substring(c.indexOf("?")+
1),d={};a(c.split("&")).each(function(a,b){var c=b.split("=");d[c[0]]=c[1]});c={top:a(document).scrollTop()+50};d.CONDITIONAL_ORDER_TYPE?this.popUp(b):d.ORDER_TYPE&&("E"===d.ORDER_TYPE||"O"===d.ORDER_TYPE)?a(document).trigger(this.constants.EVENTS.QUICK_TRADE,{replaceOrder:!0,orderInfo:d,location:c}):this.popUp(b)},_initAllActionPopup:function(){this.$(".activity-tab--order-cancel-verify").BasePopup();this.$(".activity-tab--order-cancel-confirm").BasePopup();this.$(".activity-tab--order-cancel-error").BasePopup()},
_closeAllActionPopup:function(){this.$(".activity-tab--order-cancel-verify").BasePopup("close");this.$(".activity-tab--order-cancel-confirm").BasePopup("close");this.$(".activity-tab--order-cancel-error").BasePopup("close")},_locatePopup:function(a,b){b.css("top",a)},saveStickyOrders:function(a){(new m({context:this,data:JSON.stringify({state:[{path:"/user/oce/activityOrders/orderSticky",version:"1.0",entry:[{key:"expanded",value:a}]}]}),onPreExecute:function(){},onSuccess:function(){},onError:function(){}})).run()},
cancelPortfolioReviewOrder:function(){window.location.href=envMap.PORTFOLIO_ANALYZER_URL_VALUE+"/invsoln/landing.jhtml"},closeDrawer:function(b){b.preventDefault();a(b.currentTarget).parents(".content-row").prev().trigger("click")},printSingleOrder:function(b){b.stopPropagation();b.preventDefault();var c=0<a(".drawer--print-content").length,d=a(b.currentTarget).closest("table").find("thead:first").clone(),e=a(b.currentTarget).closest("tr").prev().clone();b=a(b.currentTarget).closest(".drawer").clone();
var f=a("footer").find(".legal-footer").clone();a("body").addClass("activity-drawer-printing");c||a("body").prepend('<div class="drawer--print-content"><table class="drawer--print-content-grid"></table></div>');a(".drawer--print-content").empty().append('<img class="isolated-print-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAaCAMAAACKASIdAAAAUVBMVEX///8AAAAiHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh/q3/2oAAAAGnRSTlMAAIDA0BBQQPDgIKCwMGCQcO9/v9jPuovfTyMLRyIAAAJESURBVHhevVXbsqMwDMPOrQQCdHv2+v8fuhMcKZnDMvt0qicPo0S2KqeTVLg/I7wsVuxCeCPEaYRUkLtbsUgHmeOJYDxAZbYiCZAbIVzUwI1oaPufWjQeUEorhNja1Jez7INFQHGjZmYQDzmsWAUAQy9q4Do2xOJGDWZ4d0LlikebWgwh1OJUW03kAJNf9EYNo2fwnSGIRFf7jgVTV1NXk/Z6SsJ9HCrozLuPp6vYRIJduE7dDA+xaPS5W+wZt2Q+GCEMXDaUOoFDKhLN0Zl3RhkkYrO0EMuVu+JLhyK3r9PJm/zH0DwhcrYvD09n/SX/niFolbYen3maLvlPjDJGc5+3vkBEyA1oCEXAGrP9Q6ra/u/8O8x4QGRvd8+qc+My7fGSf5qmRvpeIwozgJWZLggAGKn1QThwlQ2h0K4WHbZnmmiGGhIz3WbewXhAlVDuIX9rfEn9+dVh/WTjCIaEux0u4NMCI4FMLt86LkJXO/V/BVO7yz9mjLQ2gRnUIAouG1IUfFUwq6k9cKmBUc6IDfYZkyjvJhc+HFagdx0209QKE2tgptvdxEyPHfq9xD4L2S4Mas9QzElFvBqY4EIdGmgFcEzk9rduaG7Y5LgsP2JV8/Dg8oLDwW61jnsZZWLsGV/zFl7CnlfReV2qGt9ww5Dgcsqt419rxGX+CCITucy/lJXhotoz51V/VrV7VHZKQT4hVVgJ5t1x2ehbXJba3pdBoqrN/hLgC9U88pjfoJb7n+Ib1LY2WZR3qMVvFb+DjGp/AYgxi4eZBKA5AAAAAElFTkSuQmCC" alt="Fidelity logo" /><table class="drawer--print-content-grid"></table>');
a(".drawer--print-content-grid").append(d).append(e);a(".drawer--print-content").append(b).append(f);window.print();setTimeout("$('body').removeClass('activity-drawer-printing');$('.drawer--print-content').remove()",5E3)},_checkAllAccountsSelected:function(){this.paramData.isAllAccountsSelected=a(".js-selected").hasClass("js-portfolio")}})});
define("views/activity-history-base-view",["jquery","util/eventhub-backbone","views/base-view","fiddatepicker"],function(a,b,g){return g.extend({initialize:function(){this.clickflag=0;this.paramData={};a(".activity--history-custom-date-field").FidDatePicker({usedatemask:!0});this.closeKeyboardInIphone()},destroy:function(){this.selectedAccounts;this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(b){this.selectedAccounts=a(b).map(function(a,b){return b.acctNum}).get().join(",");
this.paramData={accounts:this.selectedAccounts}},datePickerClicked:function(b){b=a(b.currentTarget).siblings(".activity--history-custom-date-field");var e;e=b.FidDatePicker("widget").is(":hidden")?"show":"hide";b.FidDatePicker(e)},formatDate:function(a){if(10==a.length)return a;var b,d;b=a.split("/");a=b[0];d=b[1];b=b[2];2>a.length&&(a="0"+a);2>d.length&&(d="0"+d);return a+"/"+d+"/"+b},editDates:function(b,e){function d(a,b,c,d){with(Math)jd=367*a-floor(7*(a+floor((b+9)/12))/4)-floor(3*(floor((a+
(b-9)/7)/100)+1)/4)+floor(275*b/9)+c+1721028.5+d/24;return jd}var g=a("#today").val(),f=a(".activity--history-error-icon"),j=a(".activity--history-error-container"),k=a(".activity--range-dropdown"),l=/^[0-9]{1,2}[/][0-9]{1,2}[/][0-9]{4}$/,p,m=g.substring(0,2),n=g.substring(2,4),r=g.substring(4,8);if(0<b.value.length)p=b.value;else return f.html("Please enter a starting date for your Custom Time Period."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;g=0<e.value.length?e.value:m+"/"+n+
"/"+r;if(!l.test(p)||!l.test(g))return f.html("The specific date you entered is invalid.  Please review the date entered in the specific date's box and re-enter your request (mm/dd/yyyy)."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;todayJulian=d(parseFloat(r),parseFloat(m),parseFloat(n),12);l=p.split("/");m=l[0];n=l[1];r=l[2];l=new Date(parseFloat(r),parseFloat(m)-1,parseFloat(n),0,0,0,0);if(parseFloat(n)!=l.getDate()||parseFloat(m)-1!=l.getMonth())return f.html("The specific date you entered is invalid.  Please review the date entered in the specific date's box and re-enter your request (mm/dd/yyyy)."),
j.show(),k.addClass("activity--date-range-margin-fix"),!1;fromJulian=d(parseFloat(r),parseFloat(m),parseFloat(n),12);if(fromJulian>todayJulian)return f.html("The specific date you entered is invalid.  Please review the date entered in the specific date's box and re-enter your request (mm/dd/yyyy)."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;l=g.split("/");m=l[0];n=l[1];r=l[2];l=new Date(parseFloat(r),parseFloat(m)-1,parseFloat(n),0,0,0,0);if(parseFloat(n)!=l.getDate()||parseFloat(m)-
1!=l.getMonth())return f.html("The specific date you entered is invalid.  Please review the date entered in the specific date's box and re-enter your request (mm/dd/yyyy)."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;toJulian=d(parseFloat(r),parseFloat(m),parseFloat(n),12);if(toJulian>todayJulian)return f.html("The specific date you entered is invalid.  Please review the date entered in the specific date's box and re-enter your request (mm/dd/yyyy)."),j.show(),k.addClass("activity--date-range-margin-fix"),
!1;if(toJulian<fromJulian)return f.html('The date you entered in the "from" box cannot be later than the date in the "to" box.'),j.show(),k.addClass("activity--date-range-margin-fix"),!1;m=toJulian-fromJulian;if(1826<todayJulian-toJulian||1826<todayJulian-fromJulian)return f.html(90<m?"You have selected a time period that does not occur within the past 5 years, and that exceeds the 90-day range limit. Please try again. To view account information older than 5 years, refer to your account statements.":
"Please enter a time period within the past 5 years. To view account information older than 5 years, refer to your account statements."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;if(90<m)return f.html("Your request exceeds the 90-day range limit. Please try again."),j.show(),k.addClass("activity--date-range-margin-fix"),!1;e.value=g;return!0},closeKeyboardInIphone:function(){480>=a(window).width()&&this.$(".activity--history-custom-date-field").attr("readonly",!0)}})});
define("tasks/activity-history-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/brokerageAccountHistory",type:"POST",buildParams:function(a){var c=b.get("AMC");return{ACCOUNTS:a.accounts,VIEW_TYPE:a.VIEW_TYPE||"",FROM_DATE:a.FROM_DATE,TO_DATE:a.TO_DATE,PERIOD:a.PERIOD,ACCT_HIST_DAYS:a.ACCT_HIST_DAYS,ACCT_HIST_SORT:a.ACCT_HIST_SORT,SORT_TYPE:a.SORT_TYPE,CSV:a.CSV||"",SECURITY_TYPE:a.SECURITY_TYPE,AMC:c,SECURITY_VAL:a.SECURITY_VAL,
TYPE:a.TYPE||""}}})});define("tasks/activity-history-bank-detail-task",["tasks/base-task","models/account-context-model"],function(a,b){return a.extend({url:"/ftgw/fbc/ofacda/snippet/brokerageAccountHistoryDetail",type:"POST",buildParams:function(a){b.get("AMC");void 0==a.txnAccount&&0<b.get("selectedAccounts").accounts.length&&(a.txnAccount=b.get("selectedAccounts").accounts[0].acctNum);return{txnTyp:a.txnTyp,txnNum:a.txnNum,txnAccount:a.txnAccount}}})});
(function(a,b){var g=/[<>&\r\n"']/gm,c={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};a.extend({fileDownload:function(e,d){function h(){if(-1!=document.cookie.indexOf(l.cookieName+"="+l.cookieValue))A.onSuccess(e),document.cookie=l.cookieName+"=; expires="+(new Date(1E3)).toUTCString()+"; path="+l.cookiePath,j(!1);else{if(z||w)try{var b=z?z.document:f(w);if(b&&null!=b.body&&b.body.innerHTML.length){var c=!0;if(D&&D.length){var d=a(b.body).contents().first();d.length&&
d[0]===D[0]&&(c=!1)}if(c){A.onFail(b.body.innerHTML,e);j(!0);return}}}catch(g){A.onFail("",e);j(!0);return}setTimeout(h,l.checkInterval)}}function f(a){a=a[0].contentWindow||a[0].contentDocument;a.document&&(a=a.document);return a}function j(a){setTimeout(function(){z&&(r&&z.close(),n&&(z.focus(),a&&z.close()))},0)}function k(a){return a.replace(g,function(a){return"&"+c[a]})}var l=a.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",
dialogOptions:{modal:!0},prepareCallback:function(){},successCallback:function(){},failCallback:function(){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},d),p=new a.Deferred,m=(navigator.userAgent||navigator.vendor||b.opera).toLowerCase(),n,r,s;/ip(ad|hone|od)/.test(m)?n=!0:-1!==m.indexOf("android")?r=!0:s=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(m)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(m.substr(0,
4));m=l.httpMethod.toUpperCase();if(r&&"GET"!==m)return a().dialog?a("<div>").html(l.androidPostUnsupportedMessageHtml).dialog(l.dialogOptions):alert(l.androidPostUnsupportedMessageHtml),p.reject();var v=null,A={onPrepare:function(b){l.preparingMessageHtml?v=a("<div>").html(l.preparingMessageHtml).dialog(l.dialogOptions):l.prepareCallback&&l.prepareCallback(b)},onSuccess:function(a){v&&v.dialog("close");l.successCallback(a);p.resolve(a)},onFail:function(b,c){v&&v.dialog("close");l.failMessageHtml&&
a("<div>").html(l.failMessageHtml).dialog(l.dialogOptions);l.failCallback(b,c);p.reject(b,c)}};A.onPrepare(e);null!==l.data&&"string"!==typeof l.data&&(l.data=a.param(l.data));var w,z,D;if("GET"===m)null!==l.data&&(-1!==e.indexOf("?")?"&"!==e.substring(e.length-1)&&(e+="&"):e+="?",e+=l.data),n||r?(z=b.open(e),z.document.title=l.popupWindowTitle,b.focus()):s?b.location(e):w=a("<iframe>").hide().prop("src",e).appendTo("body");else{var y="";null!==l.data&&a.each(l.data.replace(/\+/g," ").split("&"),
function(){var a=this.split("="),b=l.encodeHTMLEntities?k(decodeURIComponent(a[0])):decodeURIComponent(a[0]);b&&(a=l.encodeHTMLEntities?k(decodeURIComponent(a[1])):decodeURIComponent(a[1]),y+='<input type="hidden" name="'+b+'" value="'+a+'" />')});s?(D=a("<form>").appendTo("body"),D.hide().prop("method",l.httpMethod).prop("action",e).html(y)):(n?(z=b.open("about:blank"),z.document.title=l.popupWindowTitle,s=z.document,b.focus()):(w=a("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),
s=f(w)),s.write("<html><head></head><body><form method='"+l.httpMethod+"' action='"+e+"'>"+y+"</form>"+l.popupWindowTitle+"</body></html>"),D=a(s).find("form"));D.submit()}setTimeout(h,l.checkInterval);return p.promise()}})})(jQuery,this);define("lib/jquery-plugins/jquery.fileDownload",function(){});
define("views/activity-history-view","jquery util/eventhub-backbone views/activity-history-base-view util/progressbar components/flexgrid components/flexgrid-android tasks/activity-history-task tasks/activity-history-bank-detail-task lib/jquery-plugins/jquery.fileDownload models/account-context-model".split(" "),function(a,b,g,c,e,d,h,f,j,k){var l=!1,p=!1;return g.extend({events:{"click .date-sort":"orderByDate","click .amount-sort":"orderByAmount","click .type-sort":"orderByType","click .description-sort":"orderByDescription",
"click .acctNum-sort":"orderByAccount","click .activity--history-download-link":"downloadHistory","click #core-settlement-chk":"getCoreSettlement","change #activity--history-range-dropdown":"filterByDateRange","click .js-history-custom-date-display-button":"filterByDateRange","click .js-calendar-button":"datePickerClicked","click .activity--history-search-filter-button":"searchSymbol","click .activity--history-footnote-account-positions":"clickPositionsLink","keyup .activity--history-enter-symbol-field":"goSearchSymbol",
"change .activity--history-filter-type":"filterByType","click .activity-close-button":"closeDrawer","click a[txn-type-number]":"getBankDetails","click .drawer--print-action":"printCheck"},getFilter:function(){var b={},c="NON_CORE",d={},e="",f="RANGE";this.$("#core-settlement-chk").prop("checked")&&(c="CORE");var g=this.$("#activity--history-range-dropdown").val(),h=a(".activity--range-dropdown");if("custom"==g)if(this.$(".activity--header-elements-container").hasClass("activity--state-custom-date"))if(this.editDates(this.$(".activity--history-custom-date-from-field")[0],
this.$(".activity--history-custom-date-to-field")[0]))a(".activity--history-error-container").hide(),h.removeClass("activity--date-range-margin-fix"),d.fromDate=this.formatDate(this.$(".activity--history-custom-date-from-field").val()),d.toDate=this.formatDate(this.$(".activity--history-custom-date-to-field").val());else return;else{this.$(".activity--header-elements-container").addClass("activity--state-custom-date");a(".activity--history-error-container").hide();h.removeClass("activity--date-range-margin-fix");
return}else this.$(".activity--history-custom-date-from-field").val(""),this.$(".activity--history-custom-date-to-field").val(""),this.$(".activity--header-elements-container").removeClass("activity--state-custom-date"),g=g.split(","),d.fromDate=g[0],d.toDate=g[1];g=this.$("#activity--history-range-dropdown option:selected").text();h=this.$("#activity--history-range-dropdown")[0].selectedIndex;h*=1;4>h?f=g:3<h&&14>h&&(e=g.replace("(",""),e=e.replace(")",""));b.filterType=this.$(".activity--history-filter-type").val();
b.core_type=c;b.period=e;b.acct_hist_days=f;b.dateObj=d;b.sortBy=this.$("#SORT_BY").val();b.sortDir=this.$("#SORT_DIRECTION").val();b.securityType=this.$("#activity--history-sort-dropdown").val();b.securityVal=this.$(".activity--history-enter-symbol-field").val();"Enter Symbol"==b.securityVal&&(b.securityVal="");return b},refreshWholeContent:function(){p=!0;this.refresh()},refresh:function(){var b=this;(new h({data:b.paramData,onPreExecute:function(){c.showLoading("Loading...",!0,500)},onSuccess:function(c){p&&
(b.$el.html(c),a(".activity--history-custom-date-field").FidDatePicker({usedatemask:!0}),1<b.selectedAccounts.split(",").length&&a("#activity--history-range-dropdown").val(a("#activity--history-range-dropdown option:eq(0)").val()),p=!1);c=a("<div/>").html(c).find(".refreshedWhenFilter").html();b.$el.find(".refreshedWhenFilter").html(c);$Content=a(".refreshedWhenFilter");0<$Content.length&&b.postProcessing();"There are no transactions for this time period."==b.$(".warning-box").text()?(l&&(b.$(".warning-box").text("There are no transactions that match your selections for this time period."),
l=!1),this.$(".activity--history-download-link").hide()):this.$(".activity--history-download-link").show()},onError:function(){},onComplete:function(){c.hideLoading()}})).run()},postProcessing:function(){$table=a("#historyExpanderContent .fid-datagrid.flexgrid");this.$(".activity--history-footnote-account-positions").attr("href","javascript:void(0);");0<$table.length&&a("#historyExpanderContent .fid-datagrid.flexgrid").flexgrid({LockHeader:!1,LockColumn:!1,onRowClick:this.onHistoryRowClick.bind(this)})},
getCoreSettlement:function(){var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,VIEW_TYPE:a.core_type,FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,SORT_TYPE:a.sortDir,SECURITY_TYPE:a.securityType,SECURITY_VAL:a.securityVal,TYPE:a.filterType},this.refresh())},downloadHistory:function(){var b=this.getFilter();if(null!=b&&void 0!=b){var c=k.get("AMC");a.fileDownload("/ftgw/fbc/ofacda/snippet/brokerageAccountHistory",
{data:{ACCOUNTS:this.selectedAccounts,VIEW_TYPE:b.core_type,FROM_DATE:b.dateObj.fromDate,TO_DATE:b.dateObj.toDate,PERIOD:b.period,ACCT_HIST_DAYS:b.acct_hist_days,ACCT_HIST_SORT:b.sortBy,SORT_TYPE:b.sortDir,SECURITY_TYPE:b.securityType,SECURITY_VAL:b.securityVal,AMC:c,CSV:"Y"},httpMethod:"POST"}).fail(function(){alert("File download failed!")});return!1}},filterByDateRange:function(){l=!0;var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,VIEW_TYPE:a.core_type,
FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,SORT_TYPE:a.sortDir,SECURITY_TYPE:a.securityType,SECURITY_VAL:a.securityVal,TYPE:a.filterType},this.refresh())},orderByDate:function(){this.sortHistory("DATE")},orderByAccount:function(){this.sortHistory("ACCOUNT")},orderByType:function(){this.sortHistory("TYPE")},orderByAmount:function(){this.sortHistory("AMOUNT")},orderByDescription:function(){this.sortHistory("DESC")},sortHistory:function(a){var b=
this.getFilter();if(null!=b&&void 0!=b){var c=b.sortDir,d="D";b.sortBy==a&&(d="A"==c?"D":"A");this.paramData={accounts:this.selectedAccounts,VIEW_TYPE:b.core_type,FROM_DATE:b.dateObj.fromDate,TO_DATE:b.dateObj.toDate,PERIOD:b.period,ACCT_HIST_DAYS:b.acct_hist_days,ACCT_HIST_SORT:a,SORT_TYPE:d,SECURITY_TYPE:b.securityType,SECURITY_VAL:b.securityVal,TYPE:b.filterType};this.refresh()}},searchSymbol:function(){var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,
VIEW_TYPE:a.core_type,FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,SORT_TYPE:a.sortDir,SECURITY_TYPE:a.securityType,SECURITY_VAL:a.securityVal,TYPE:a.filterType},this.refresh())},filterByType:function(){var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,VIEW_TYPE:a.core_type,FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,
SORT_TYPE:a.sortDir,SECURITY_TYPE:a.securityType,SECURITY_VAL:a.securityVal,TYPE:a.filterType},this.refresh())},clickPositionsLink:function(){a(".tabs--tab-link[href=#tabContentPositions]").trigger("click")},goSearchSymbol:function(b){13===b.keyCode&&(a(b.currentTarget).blur(),this.$(".activity--history-search-filter-button").trigger("click"))},toDataURL:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(){if(200==this.status){for(var a=new Uint8Array(this.response),
c=a.length,d=Array(c);c--;)d[c]=String.fromCharCode(a[c]);a=d.join("");a="data:image/png;base64,"+window.btoa(a)}b(a)};c.send()},onHistoryRowClick:function(b){var c=this;b=a(b.target).closest(".normal-row").next().find("img.activity--history-check-image");a.each(b,function(){var b=a(this);if(!b.attr("src")){var d=b.data("image-url");c.toDataURL(d,function(a){b.attr("src",a)})}})},closeDrawer:function(b){b.preventDefault();a(b.currentTarget).parents(".content-row").prev().trigger("click")},getBankDetails:function(b){var d=
a(b.target);if(void 0!=d.attr("txn-type-number")){b=d.attr("txn-type-number");var e=d.parents(".content-row").prev().find(".activity--history-account-number")[0],g;void 0!=e&&(g=e.getAttribute("data-account-number"));this.paramData={txnTyp:b.substr(0,2),txnNum:parseInt(b.substring(2)),txnAccount:g};(new f({data:this.paramData,onPreExecute:function(){c.showLoading("Loading...",!0,500)},onSuccess:function(b){var e;try{var f=JSON.parse(b);"bankDetailDesc"in f&&(e=f.bankDetailDesc)}catch(g){}if(void 0!=
e&&0<e.length){b=a(d.parent().prev()[0]);var f=b.text(),h=f.toUpperCase().indexOf("AS OF");0<=h?b.text(f.substr(0,h)+e+" "+f.substr(h)):b.find(".txn-bank-detail").text(" "+e+" ")}d.removeAttr("txn-type-number");d.hide();c.hideLoading()},onError:function(){},onComplete:function(){c.hideLoading()}})).run()}},printCheck:function(b){b.stopPropagation();b.preventDefault();a("body").addClass("activity-drawer-printing");0<a(".drawer--print-content").length||a("body").prepend('<div class="drawer--print-content"><table class="drawer--print-content-grid"></table></div>');
a(".drawer--print-content").empty().append('<img class="isolated-print-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAaCAMAAACKASIdAAAAUVBMVEX///8AAAAiHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh/q3/2oAAAAGnRSTlMAAIDA0BBQQPDgIKCwMGCQcO9/v9jPuovfTyMLRyIAAAJESURBVHhevVXbsqMwDMPOrQQCdHv2+v8fuhMcKZnDMvt0qicPo0S2KqeTVLg/I7wsVuxCeCPEaYRUkLtbsUgHmeOJYDxAZbYiCZAbIVzUwI1oaPufWjQeUEorhNja1Jez7INFQHGjZmYQDzmsWAUAQy9q4Do2xOJGDWZ4d0LlikebWgwh1OJUW03kAJNf9EYNo2fwnSGIRFf7jgVTV1NXk/Z6SsJ9HCrozLuPp6vYRIJduE7dDA+xaPS5W+wZt2Q+GCEMXDaUOoFDKhLN0Zl3RhkkYrO0EMuVu+JLhyK3r9PJm/zH0DwhcrYvD09n/SX/niFolbYen3maLvlPjDJGc5+3vkBEyA1oCEXAGrP9Q6ra/u/8O8x4QGRvd8+qc+My7fGSf5qmRvpeIwozgJWZLggAGKn1QThwlQ2h0K4WHbZnmmiGGhIz3WbewXhAlVDuIX9rfEn9+dVh/WTjCIaEux0u4NMCI4FMLt86LkJXO/V/BVO7yz9mjLQ2gRnUIAouG1IUfFUwq6k9cKmBUc6IDfYZkyjvJhc+HFagdx0209QKE2tgptvdxEyPHfq9xD4L2S4Mas9QzElFvBqY4EIdGmgFcEzk9rduaG7Y5LgsP2JV8/Dg8oLDwW61jnsZZWLsGV/zFl7CnlfReV2qGt9ww5Dgcsqt419rxGX+CCITucy/lJXhotoz51V/VrV7VHZKQT4hVVgJ5t1x2ehbXJba3pdBoqrN/hLgC9U88pjfoJb7n+Ib1LY2WZR3qMVvFb+DjGp/AYgxi4eZBKA5AAAAAElFTkSuQmCC" alt="Fidelity logo" /><table class="drawer--print-content-grid"></table>');
var c=a(b.currentTarget).closest("table").find("thead:first").clone(),d=a(b.currentTarget).closest("tr").prev().clone();b=a(b.currentTarget).closest(".drawer").clone();a(".drawer--print-content-grid").append(c).append(d);a(".drawer--print-content").append(b);window.print();setTimeout("$('body').removeClass('activity-drawer-printing');$('.drawer--print-content').remove()",5E3)}})});
define("views/activity-history-ngapp-view",["jquery","backbone","views/base-view","fang","util/progressbar"],function(a,b,g,c,e){return g.extend({defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(b){this.deferred=a.Deferred();this.options=b||{};this.options=_.extend({},this.defaults,this.options);
this.$wrapperClass=this.$el;this.acctNums=a(b.accounts).map(function(a,b){return b.acctNum}).get().join(",");this.showLoadingEventId=c.EventBus.subscribe("ACC_HISTORY_NG_SHOW_LOADING",this.showLoading);this.hideLoadingEventId=c.EventBus.subscribe("ACC_HISTORY_NG_HIDE_LOADING",this.hideLoading.bind(this))},destroy:function(){this.$wrapperClass.empty();this.showLoadingEventId&&c.EventBus.unsubscribe(this.showLoadingEventId);this.hideLoadingEventId&&c.EventBus.unsubscribe(this.hideLoadingEventId)},bootstrap:function(b,
c,e){var g=this;require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[e])},function(){g.$el.html('<div class="warning-box center-message ng-scope">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</div>');g.deferred.resolve()})},insertMarkup:function(){var a=this.options.basePath+this.options.pathToBundles+this.options.cssBundle;this.$wrapperClass.append((toggleMap.DPCSActivityDexResiliencyFeature?"":
'<link href="'+a+'" rel="stylesheet">')+'<div id="acat-assets-history"></div><div id="AccountActivityTabHistory" ng-init="accounts=\''+this.acctNums+'\'"><div ng-controller="activityTabHistoryCtrl"><activity-tab-history-directive transaction="transaction"></activity-tab-history-directive></div></div>')},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName,e=b+this.options.pathToBundles+this.options.jsBundle;a("#historyExpanderContent").hasClass("ng-scope")?(b=angular.element(a("#historyExpanderContent")).scope(),
b.$broadcast("initScopeData"),b.$broadcast("loadActivityTabHistoryData")):(this.insertMarkup(),toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets-history").html(b)}):this.bootstrap(e,"#historyExpanderContent",c),a("#historyExpanderContent").attr("data-app-path",b),a("#historyExpanderContent").attr("data-injected",!0))},postProcessing:function(){},refreshWholeContent:function(){this.refresh()},
setAccounts:function(){},refresh:function(){try{this.renderMicroApp()}catch(a){this.deferred.resolve()}},showLoading:function(){e.showLoading("Loading...",!0,500)},hideLoading:function(){this.deferred.resolve();e.hideLoading()}})});
define("tasks/activity-annuity-history-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofaccounts/snippet/annuityHistory",type:"POST",buildParams:function(a){return{ACCOUNT:a.accounts,FROM_DATE:a.FROM_DATE,TO_DATE:a.TO_DATE,ACCT_HIST_DAYS:a.ACCT_HIST_DAYS,ACCT_HIST_SORT:a.ACCT_HIST_SORT,SORT_TYPE:a.SORT_TYPE,CSV:a.CSV||"",SYMBOL:a.SYMBOL,SELECTEDINDEX:a.SELECTEDINDEX}}})});
define("views/activity-annuity-history-view","jquery util/eventhub-backbone views/activity-history-base-view util/progressbar components/flexgrid components/flexgrid-android tasks/activity-annuity-history-task lib/jquery-plugins/jquery.fileDownload".split(" "),function(a,b,g,c,e,d,h){var f=[10,30,60,90],j=!1;return g.extend({events:{"click .date-sort":"orderByDate","click .amount-sort":"orderByAmount","click .type-sort":"orderByType","click .activity--history-download-link":"downloadHistory","click .js-calendar-button":"datePickerClicked",
"change #activity--history-range-dropdown":"filterByDateRange","click .js-history-custom-date-display-button":"filterByDateRange","click .activity--history-filter-container":"searchSymbol","click .symbolLink":"popWin","keyup .activity--history-enter-symbol-field":"goSearchSymbol","click .activity-close-button":"closeDrawer"},getFilter:function(){var b={},c={},d="RANGE",e=this.$("#activity--history-range-dropdown").val();if("custom"==e)if(this.$(".activity--header-elements-container").hasClass("activity--state-custom-date"))if(this.editDates(this.$(".activity--history-custom-date-from-field")[0],
this.$(".activity--history-custom-date-to-field")[0]))a(".activity--history-error-container").hide(),c.fromDate=this.formatDate(this.$(".activity--history-custom-date-from-field").val()),c.toDate=this.formatDate(this.$(".activity--history-custom-date-to-field").val());else return;else{this.$(".activity--header-elements-container").addClass("activity--state-custom-date");a(".activity--history-error-container").hide();return}else this.$(".activity--history-custom-date-from-field").val(""),this.$(".activity--history-custom-date-to-field").val(""),
this.$(".activity--header-elements-container").removeClass("activity--state-custom-date"),e=e.split(","),c.fromDate=e[0],c.toDate=e[1];this.$("#activity--history-range-dropdown option:selected").text();e=this.$("#activity--history-range-dropdown")[0].selectedIndex;e=7<+e&&12>=+e?+e-1:12<+e?+e-2:+e;4>e&&(d=f[e]);b.selectedIndex=e;b.period="";b.acct_hist_days=d;b.dateObj=c;b.sortBy=this.$("#SORT_BY").val();b.sortDir=this.$("#SORT_DIRECTION").val();b.symbol=this.$(".activity--history-enter-symbol-field").val();
"Enter Symbol"==b.securityVal&&(b.securityVal="");return b},refreshWholeContent:function(){j=!0;this.refresh()},refresh:function(){var b=this,d=a.extend({},b.paramData,{accounts:b.paramData&&b.paramData.accounts&&b.paramData.accounts.replace(/,.+$/,"")});(new h({data:d,onPreExecute:function(){c.showLoading("Loading...",!0,500)},onSuccess:function(c){j&&(b.$el.html(c),a(".activity--history-custom-date-field").FidDatePicker({usedatemask:!0}),j=!1);c=a("<div/>").html(c).find(".refreshedWhenFilter").html();
b.$el.find(".refreshedWhenFilter").html(c);$Content=a(".refreshedWhenFilter");0<$Content.length&&b.postProcessing();b.paramData&&(b.paramData.accounts&&1<b.paramData.accounts.split(",").length)&&a(".js-multi-accounts-message").removeClass("display-none")},onError:function(){},onComplete:function(){c.hideLoading()}})).run()},downloadHistory:function(){var b=this.getFilter();if(null!=b&&void 0!=b)return a.fileDownload("/ftgw/fbc/ofaccounts/snippet/annuityHistory",{data:"ACCOUNT="+this.selectedAccounts+
"&FROM_DATE="+b.dateObj.fromDate+"&TO_DATE="+b.dateObj.toDate+"&ACCT_HIST_DAYS="+b.acct_hist_days+"&SYMBOL="+b.symbol+"&CSV=Y",httpMethod:"POST"}).fail(function(){alert("File download failed!")}),!1},filterByDateRange:function(){changeTime=!0;var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,SELECTEDINDEX:a.selectedIndex,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,SORT_TYPE:a.sortDir},
this.refresh())},orderByDate:function(){this.sortHistory("DATE")},orderByType:function(){this.sortHistory("TYPE")},orderByAmount:function(){this.sortHistory("AMOUNT")},searchSymbol:function(){var a=this.getFilter();null!=a&&void 0!=a&&(this.paramData={accounts:this.selectedAccounts,FROM_DATE:a.dateObj.fromDate,TO_DATE:a.dateObj.toDate,PERIOD:a.period,SELECTEDINDEX:a.selectedIndex,ACCT_HIST_DAYS:a.acct_hist_days,ACCT_HIST_SORT:a.sortBy,SORT_TYPE:a.sortDir,SYMBOL:a.symbol},this.refresh())},sortHistory:function(a){var b=
this.getFilter();if(null!=b&&void 0!=b){var c=b.sortDir,d="D";b.sortBy==a&&(d="A"==c?"D":"A");this.paramData={accounts:this.selectedAccounts,FROM_DATE:b.dateObj.fromDate,TO_DATE:b.dateObj.toDate,PERIOD:b.period,SELECTEDINDEX:b.selectedIndex,ACCT_HIST_DAYS:b.acct_hist_days,ACCT_HIST_SORT:a,SORT_TYPE:d};b.symbol&&""!==b.symbol&&(this.paramData.SYMBOL=b.symbol);this.refresh()}},goSearchSymbol:function(b){13===b.keyCode&&(a(b.currentTarget).blur(),this.$(".activity--history-search-filter-button").trigger("click"))},
postProcessing:function(){$table=a("#historyExpanderContent .fid-datagrid.flexgrid");this.$(".activity--history-footnote-account-positions").attr("href","javascript:void(0);");0<$table.length&&a("#historyExpanderContent .fid-datagrid.flexgrid").flexgrid({LockHeader:!1,LockColumn:!1})},popWin:function(a){a.preventDefault();window.open(a.target.href,"infowindow","width=450,height=480,left=240,top=60,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes")},closeDrawer:function(b){b.preventDefault();
a(b.currentTarget).parents(".content-row").prev().trigger("click")}})});define("tasks/activity-annuity-orders-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/oftrade/snippet/ordersAnnuity",type:"POST",buildParams:function(a){return{ACCOUNT:a.accounts}}})});
define("views/activity-annuity-orders-view","jquery views/base-view util/progressbar components/basepopup components/flexgrid components/flexgrid-android components/expander tasks/activity-annuity-orders-task".split(" "),function(a,b,g,c,e,d,h,f){return b.extend({events:{"click .js-activity--orders--refresh-button":"refresh","click .symbolLink":"popWin","click .activity-close-button":"closeDrawer","click .drawer--print-action a":"printSingleOrder"},initialize:function(){this.paramData={}},destroy:function(){this.selectedAccounts=
null;this.$el.empty();this.undelegateEvents()},render:function(){return this},setAccounts:function(b){this.selectedAccounts=a(b).map(function(a,b){return b.acctNum}).get().join(",");this.paramData={accounts:this.selectedAccounts}},refresh:function(){var b=this,c=a.extend({},b.paramData,{accounts:b.paramData&&b.paramData.accounts&&b.paramData.accounts.replace(/,.+$/,"")});(new f({data:c,onPreExecute:function(){g.showLoading("Loading...",!0,500)},onSuccess:function(c){b.$el.html(c);$Content=a(".flexgrid-wrapper");
0<$Content.length&&b.postProcessing();b.paramData&&(b.paramData.accounts&&1<b.paramData.accounts.split(",").length)&&a(".js-multi-accounts-message").removeClass("display-none")},onError:function(){},onComplete:function(){g.hideLoading()}})).run()},postProcessing:function(){$table=a("#orderExpanderContent .fid-datagrid.flexgrid");var b=this;if(0<$table.length){this.flexgridtbl=a("#orderExpanderContent .fid-datagrid.flexgrid").flexgrid({LockHeader:!1,LockColumn:!1});a(".cancelOrReplace").on("click",
function(a){b.cancelOrReplace(a)});for(var c=0;c<a(".activity--orders-execution-expander").length;c++)new FID.Expander(a(".activity--orders-execution-expander")[c],a(".activity--orders-execution-table")[c])}},popWin:function(a){a.preventDefault();window.open(a.target.href,"infowindow","width=450,height=480,left=240,top=60,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes")},cancelOrReplace:function(b){b.stopPropagation();var c=a(b.target);b=c.attr("data-action");var d=c.attr("data-isExchange"),
c=c.attr("data-cancelNumber");this.$(".annuity-orders-form");document.orders.action="C"==b?"/ftgw/fbc/oftrade/annuityCancelVerify?CANCELLED_ORDER_NUMBER="+c:"true"==d?"/ftgw/fbc/oftrade/annuityCancelReplaceExchangeInit?CANCELLED_ORDER_NUMBER="+c:"/ftgw/fbc/oftrade/annuityCancelReplaceReallocationInit?CANCELLED_ORDER_NUMBER="+c;document.orders.submit()},closeDrawer:function(b){b.preventDefault();a(b.currentTarget).parents(".content-row").prev().trigger("click")},printSingleOrder:function(b){b.stopPropagation();
b.preventDefault();a("body").addClass("activity-drawer-printing");0<a(".drawer--print-content").length||a("body").prepend('<div class="drawer--print-content"><table class="drawer--print-content-grid"></table></div>');a(".drawer--print-content").empty().append('<img class="isolated-print-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAaCAMAAACKASIdAAAAUVBMVEX///8AAAAiHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh/q3/2oAAAAGnRSTlMAAIDA0BBQQPDgIKCwMGCQcO9/v9jPuovfTyMLRyIAAAJESURBVHhevVXbsqMwDMPOrQQCdHv2+v8fuhMcKZnDMvt0qicPo0S2KqeTVLg/I7wsVuxCeCPEaYRUkLtbsUgHmeOJYDxAZbYiCZAbIVzUwI1oaPufWjQeUEorhNja1Jez7INFQHGjZmYQDzmsWAUAQy9q4Do2xOJGDWZ4d0LlikebWgwh1OJUW03kAJNf9EYNo2fwnSGIRFf7jgVTV1NXk/Z6SsJ9HCrozLuPp6vYRIJduE7dDA+xaPS5W+wZt2Q+GCEMXDaUOoFDKhLN0Zl3RhkkYrO0EMuVu+JLhyK3r9PJm/zH0DwhcrYvD09n/SX/niFolbYen3maLvlPjDJGc5+3vkBEyA1oCEXAGrP9Q6ra/u/8O8x4QGRvd8+qc+My7fGSf5qmRvpeIwozgJWZLggAGKn1QThwlQ2h0K4WHbZnmmiGGhIz3WbewXhAlVDuIX9rfEn9+dVh/WTjCIaEux0u4NMCI4FMLt86LkJXO/V/BVO7yz9mjLQ2gRnUIAouG1IUfFUwq6k9cKmBUc6IDfYZkyjvJhc+HFagdx0209QKE2tgptvdxEyPHfq9xD4L2S4Mas9QzElFvBqY4EIdGmgFcEzk9rduaG7Y5LgsP2JV8/Dg8oLDwW61jnsZZWLsGV/zFl7CnlfReV2qGt9ww5Dgcsqt419rxGX+CCITucy/lJXhotoz51V/VrV7VHZKQT4hVVgJ5t1x2ehbXJba3pdBoqrN/hLgC9U88pjfoJb7n+Ib1LY2WZR3qMVvFb+DjGp/AYgxi4eZBKA5AAAAAElFTkSuQmCC" alt="Fidelity logo" /><table class="drawer--print-content-grid"></table>');
var c=a(b.currentTarget).closest("table").find("thead:first").clone(),d=a(b.currentTarget).closest("tr").prev().clone();b=a(b.currentTarget).closest(".drawer").clone();a(".drawer--print-content-grid").append(c).append(d);a(".drawer--print-content").append(b);window.print();setTimeout("$('body').removeClass('activity-drawer-printing');$('.drawer--print-content').remove()",5E3)}})});
define("views/activity-orders-ngapp-view","jquery views/base-view util/progressbar components/basepopup components/flexgrid components/flexgrid-android components/expander views/activity-edit-order-expiration-view fang util/constants models/ajax-object-model tasks/state-save-task".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p){return b.extend({events:{"click .activity-tab--action-cancel-order-confirm":"cancelOrderConfirm","click .activity-tab--action-close":"closeActionPopUp","click .activity-tab--action-error-close":"closeActionErrorPopup",
"click .activity--cancel-pending-link":"showCancelPopup","click #specificShareOrder":"locateSpecificOrderDetail","click .js-activity-tab-order-edit-expiration":"showEditExpirationPopup","click .activity--edit-order-popup .modal-popup--button":"closeEditExpirationPopup"},defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},
initialize:function(){this.clickflag=0;this.paramData={};this.needRefresh=!1;this.options=_.extend({},this.defaults,this.options);this.$wrapperClass=this.$el;this.showLoadingEventId=j.EventBus.subscribe("ACC_HISTORY_NG_SHOW_LOADING",this.showLoading);this.hideLoadingEventId=j.EventBus.subscribe("ACC_HISTORY_NG_HIDE_LOADING",this.hideLoading.bind(this));this.orderLoaded=j.EventBus.subscribe("ACC_HISTORY_ORDER_LOADED",this._initAllActionPopup.bind(this));this.orderCancelInit=j.EventBus.subscribe("ACC_ORDER_CANCEL_ORDER_INIT",
this.doCancelOrder.bind(this));this.orderReplacelInit=j.EventBus.subscribe("ACC_ORDER_REPLACE_ORDER_INIT",this.doReplaceOrder.bind(this));this.showLoading()},refresh:function(){this.activityEditOrderExpiration&&(this.activityEditOrderExpiration.destroy(),this.activityEditOrderExpiration=null);this._checkAllAccountsSelected();this.renderMicroApp()},showLoading:function(){g.showLoading("Loading...",!0,500)},hideLoading:function(){g.hideLoading()},destroy:function(){this.selectedAccounts=null;this.activityEditOrderExpiration&&
(this.activityEditOrderExpiration.destroy(),this.activityEditOrderExpiration=null);this.$wrapperClass.empty();this.showLoadingEventId&&j.EventBus.unsubscribe(this.showLoadingEventId);this.hideLoadingEventId&&j.EventBus.unsubscribe(this.hideLoadingEventId);this.orderLoaded&&j.EventBus.unsubscribe(this.orderLoaded);this.orderCancelInit&&j.EventBus.unsubscribe(this.orderCancelInit);this.orderReplacelInit&&j.EventBus.unsubscribe(this.orderReplacelInit)},bootstrap:function(b,c,d){var e=this;require([b],
function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[d])},function(){e.$el.html('<div class="warning-box center-message ng-scope">Your activity information is temporarily unavailable. We apologize for any inconvenience. Please try again later.</div>')})},insertMarkup:function(){var a=this.options.basePath+this.options.pathToBundles+this.options.cssBundle;this.$wrapperClass.append((toggleMap.DPCSActivityDexResiliencyFeature?"":'<link href="'+a+'" rel="stylesheet">')+'<div id="acat-assets-orders"></div><div id="AccountActivityTabOrders" ng-init="accounts=\''+
this.paramData.accounts+"';isAllAccountsSelected="+this._isAllAccountsSelected()+'"><div ng-controller="activityTabOrderCtrl"><activity-tab-order-directive orders="orders"></activity-tab-order-directive></div></div>')},renderMicroApp:function(){var b=this.options.basePath,c=this.options.appName,d=b+this.options.pathToBundles+this.options.jsBundle;a("#orderExpanderContent").hasClass("ng-scope")?angular.element(a("#orderExpanderContent")).scope().$broadcast("loadActivityTabOrderData"):(this.insertMarkup(),
toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets-orders").html(b)}):this.bootstrap(d,"#orderExpanderContent",c),a("#orderExpanderContent").attr("data-app-path",b),a("#orderExpanderContent").attr("data-injected",!0))},render:function(){return this},setAccounts:function(b){this.selectedAccounts=a(b).map(function(a,b){return b.acctNum}).get().join(",");this.paramData=
{accounts:this.selectedAccounts}},cancelOrderInit:function(b){var c="/ftgw/fbc/oftrade/"+b.target.attributes.url.value,d=this,e=a(b.currentTarget),f=e.offset().top-200;e.attr("disabled",!0);b=a.ajax({url:c,dataType:"html",xhrFields:{withCredentials:!0},beforeSend:function(){d._closeAllActionPopup();g.showLoading("Loading...",!0,500)},success:function(a){a?d.$(".activity-tab--order-cancel-verify").html(a):d.displayError=!0},error:function(){d.displayError=!0},complete:function(){g.hideLoading();e.removeAttr("disabled");
d.displayError?(d._locatePopup(f,d.$(".activity-tab--order-cancel-error")),d.$(".activity-tab--order-cancel-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(f,d.$(".activity-tab--order-cancel-verify")),d.$(".activity-tab--order-cancel-verify").BasePopup("open"))}});l.addAjaxObjArray(b)},cancelOrderConfirm:function(b){var c=a(b.target);b=c.attr("data-next-step-url");var d=this,e=c.offset().top-300,c=d.$(".activity-order--persisited-oreder-info").serialize();b=a.ajax({url:b,type:"POST",
data:c,xhrFields:{withCredentials:!0},beforeSend:function(){d._closeAllActionPopup();g.showLoading("Loading...",!0,500)},success:function(a){a?(d.$(".activity-tab--order-cancel-confirm").html(a),d.needRefresh=!0):d.displayError=!0},error:function(){d.displayError=!0},complete:function(){g.hideLoading();d.displayError?(d._locatePopup(e,d.$(".activity-tab--order-cancel-error")),d.$(".activity-tab--order-cancel-error").BasePopup("open"),d.displayError=!1):(d._locatePopup(e,d.$(".activity-tab--order-cancel-confirm")),
d.$(".activity-tab--order-cancel-confirm").BasePopup("open"))}});l.addAjaxObjArray(b)},popUp:function(a){window.location.href="/ftgw/fbc/oftrade/"+a.target.attributes.url.value},showCancelPopup:function(){this.cancelConfirmWin.BasePopup("open");a(".overlay-background").show()},hideCancelPopup:function(){this.cancelConfirmWin.BasePopup("close");a(".overlay-background").hide()},locateSpecificOrderDetail:function(b){b=a(b.currentTarget);b=envMap.TRADE_URL+"/ftgw/fbc/oftrade/"+b.attr("url");window.open(b)},
showEditExpirationPopup:function(b){b=a(b.currentTarget);this.activityEditOrderExpiration&&this.activityEditOrderExpiration.destroy();this.activityEditOrderExpiration=new f({el:this.$el,accounts:this.selectedAccounts});this.activityEditOrderExpiration.refresh(b)},closeEditExpirationPopup:function(){this.activityEditOrderExpiration&&this.activityEditOrderExpiration.closePopup()},closeActionPopUp:function(b){b=a(b.currentTarget);this._closeAllActionPopup();this.needRefresh&&!b.hasClass("not-refresh")&&
this.refresh();this.needRefresh=!1},closeActionErrorPopup:function(){this.$(".activity-tab--order-cancel-error").BasePopup("close")},doCancelOrder:function(b){var c=b.target.attributes.url.value,c=c.substring(c.indexOf("?")+1),d={};a(c.split("&")).each(function(a,b){var c=b.split("=");d[c[0]]=c[1]});c={top:a(document).scrollTop()+50};d.CONDITIONAL_ORDER_TYPE?this.cancelOrderInit(b):d.ORDER_TYPE&&("E"===d.ORDER_TYPE||"M"===d.ORDER_TYPE)?a(document).trigger(this.constants.EVENTS.QUICK_TRADE,{cancelOrder:!0,
orderInfo:d,location:c}):this.cancelOrderInit(b)},doReplaceOrder:function(b){var c=b.target.attributes.url.value,c=c.substring(c.indexOf("?")+1),d={};a(c.split("&")).each(function(a,b){var c=b.split("=");d[c[0]]=c[1]});c={top:a(document).scrollTop()+50};d.CONDITIONAL_ORDER_TYPE?this.popUp(b):d.ORDER_TYPE&&("E"===d.ORDER_TYPE||"O"===d.ORDER_TYPE)?a(document).trigger(this.constants.EVENTS.QUICK_TRADE,{replaceOrder:!0,orderInfo:d,location:c}):this.popUp(b)},_initAllActionPopup:function(){this.$(".activity-tab--order-cancel-verify").BasePopup();
this.$(".activity-tab--order-cancel-confirm").BasePopup();this.$(".activity-tab--order-cancel-error").BasePopup()},_closeAllActionPopup:function(){this.$(".activity-tab--order-cancel-verify").BasePopup("close");this.$(".activity-tab--order-cancel-confirm").BasePopup("close");this.$(".activity-tab--order-cancel-error").BasePopup("close")},_locatePopup:function(a,b){b.css("top",a)},saveStickyOrders:function(a){(new p({context:this,data:JSON.stringify({state:[{path:"/user/oce/activityOrders/orderSticky",
version:"1.0",entry:[{key:"expanded",value:a}]}]}),onPreExecute:function(){},onSuccess:function(){},onError:function(){}})).run()},_checkAllAccountsSelected:function(){this.paramData.isAllAccountsSelected=a(".js-selected").hasClass("js-portfolio")},_isAllAccountsSelected:function(){return a(".js-selected").hasClass("js-portfolio")}})});
define("views/pane-activity-tab-ngapp-view","jquery views/base-view models/account-context-model util/progressbar fang views/activity-edit-order-expiration-view views/activity-edit-billpay-view".split(" "),function(a,b,g,c,e,d,h){return b.extend({initialize:function(){this.tabInfo=this.options.tabInfo;this.unsubscribeEvent();this.showActivityHistoryLoadingEventId=e.EventBus.subscribe("ACC_HISTORY_NG_SHOW_LOADING",this.showLoading);this.hideActivityHistoryLoadingEventId=e.EventBus.subscribe("ACC_HISTORY_NG_HIDE_LOADING",
this.hideLoading.bind(this));this.showEditExpirationPopuplInit=e.EventBus.subscribe("ACC_ORDER_EDIT_EXPIRATION_INIT",this.showEditExpirationPopup.bind(this));this.closeEditExpirationPopupEventId=e.EventBus.subscribe("ACC_ORDER_CLOSE_EDIT_EXPIRATION",this.closeEditExpirationPopup.bind(this));this.editBillpayInitEvt=e.EventBus.subscribe("ACC_HISTORY_EDIT_BILLPAY_INIT",this.editBillPayInit.bind(this))},unsubscribeEvent:function(){var a=["ACC_HISTORY_NG_SHOW_LOADING","ACC_HISTORY_NG_HIDE_LOADING","ACC_ORDER_EDIT_EXPIRATION_INIT",
"ACC_ORDER_CLOSE_EDIT_EXPIRATION","ACC_HISTORY_EDIT_BILLPAY_INIT"],b;for(b in a)e.EventBus.unsubscribeByName(a[b])},destroy:function(){this.showActivityHistoryLoadingEventId&&e.EventBus.unsubscribe(this.showActivityHistoryLoadingEventId);this.hideActivityHistoryLoadingEventId&&e.EventBus.unsubscribe(this.hideActivityHistoryLoadingEventId);this.showEditExpirationPopuplInit&&e.EventBus.unsubscribe(this.showEditExpirationPopuplInit);this.closeEditExpirationPopupEventId&&e.EventBus.unsubscribe(this.closeEditExpirationPopupEventId);
this.editBillpayInitEvt&&e.EventBus.unsubscribe(this.editBillpayInitEvt)},render:function(){return this},refresh:function(){c.showLoading("Loading...",!0,500);this.renderActivity();c.hideLoading(500)},showLoading:function(){c.showLoading("Loading...",!0,500)},hideLoading:function(){c.hideLoading()},defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity/",pathToBundles:"dist/",jsBundle:"bundle.js",
cssBundle:"bundle.css",wrapperSelector:".activity-content-top-space"},insertMarkup:function(b,c,d,e){e=(toggleMap.DPCSActivityDexResiliencyFeature?"":'<link href="'+e+'" rel="stylesheet">')+'<div id="acat-assets-tab-view"></div><div id="'+b+'" ng-init="tabInfo='+JSON.stringify(this.tabInfo).replace(/"/g,"'")+'"><div ng-controller="activityPaneCtrl" /></div>';a(".activity--expander--orders").remove();a(".activity--expander-principal-income").remove();a(".activity--expander-history").remove();0<a("#"+
b).length&&a("#"+b).remove();this.$wrapperClass.append(e);a(c).attr("data-app-path",d);a(c).attr("data-injected",!0)},bootstrap:function(b,c,d){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[d])})},renderActivity:function(){var b=this.defaults.basePath,c=this.defaults.pathToBundles,d=this.defaults.appName,e=b+c+this.defaults.jsBundle,c=b+c+this.defaults.cssBundle,g="#"+d;this.$wrapperClass=this.$el.find(this.defaults.wrapperSelector);this.insertMarkup(d,g,
b,c);toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets-tab-view").html(b)}):this.bootstrap(e,g,d)},showEditExpirationPopup:function(b){b=a(b.currentTarget);this.activityEditOrderExpiration&&this.activityEditOrderExpiration.destroy();this.activityEditOrderExpiration=new d({el:this.$("#orderExpanderContent"),accounts:this.tabInfo.acctNums});this.activityEditOrderExpiration.refresh(b)},
closeEditExpirationPopup:function(){this.activityEditOrderExpiration&&this.activityEditOrderExpiration.closePopup()},editBillPayInit:function(b){this.editBillPayView&&this.editBillPayView.destroy();this.editBillPayView=new h({el:a("#transferExpanderContent")});this.editBillPayView.setParent(this);this.editBillPayView.setDPCSActivityPaneEnable(!0);this.editBillPayView.editBillpayInit(b)}})});
define("views/pane-activity-view","jquery views/base-view util/progressbar components/expander components/basepopup views/activity-pending-transfer-view views/activity-pending-transfer-ngapp-view views/activity-orders-view views/activity-history-view views/activity-history-ngapp-view views/activity-annuity-history-view views/activity-annuity-orders-view models/account-context-model models/ajax-object-model util/account-utils models/account-context-model views/activity-orders-ngapp-view views/pane-activity-tab-ngapp-view".split(" "),function(a,
b,g,c,e,d,h,f,j,k,l,p,m,n,r,s,v,A){var w="",z="",D,y=envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/histories?plan=",B=envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p",I={orders:"order",pending:"pending",history:"history"},S=b.extend({events:{"click #quotelink":"popWin","click #orderExpander":"getOrderStatus","click #transferExpander":"getPendingTrnsfer","click #historyExpander":"getHistory","click .activity--print-activity":"printPage"},initialize:function(){this.accounts=
this.options;this.acctNum=null;this.expanderInstances=[];D=this.options.routeOptions&&(I[this.options.routeOptions.section]||this.options.routeOptions.section);"history"==D&&(D=void 0);delete S.prototype.para;this.DPCSActivityTabBrokerageHistoryEntitledFeature=toggleMap.DPCSActivityTabBrokerageHistoryEntitledFeature;this.DPCSActivityTabPendingTransferEntitledFeature=toggleMap.DPCSActivityTabPendingTransferEntitledFeature;this.DPCSActivityTabOpenOrderEntitledFeature=toggleMap.DPCSActivityTabOpenOrderEntitledFeature;
this.DPCSActivityBrokerageTabEntitledFeature=toggleMap.DPCSActivityBrokerageTabEntitledFeature},isSingleAnnuityAccount:function(){return null!=this.accounts&&1==this.accounts.length&&-1!=this.accounts[0].acctType.indexOf("FILI Account")?!0:!1},allSelectionAreAnnuityAccount:function(){for(var a=!0,b=0;b<this.accounts.length;b++)acctType=this.accounts[b].acctType,acctNum=this.accounts[b].acctNum,a=a&&-1!=acctType.indexOf("FILI Account")&&-1==acctType.indexOf("OCI");return 0<b&&a},getOrderStatus:function(b){var c=
!1;-1==b.target.parentElement.className.indexOf("collapsed")&&($Content=a(b.target.parentElement).find(".flexgrid-wrapper"),0==$Content.length&&(this._destroyOrderView(),this.ordersView=this.allSelectionAreAnnuityAccount()?new p({el:a("#orderExpanderContent")}):this.DPCSActivityTabOpenOrderEntitledFeature?new v({el:a("#orderExpanderContent")}):new f({el:a("#orderExpanderContent")}),this.ordersView.setAccounts(this.accounts),this.ordersView.refresh(),c=!0));!c&&!this.ordersView&&(this.ordersView=this.DPCSActivityTabOpenOrderEntitledFeature?
new v({el:a("#orderExpanderContent")}):new f({el:a("#orderExpanderContent")}),this.ordersView.setAccounts(this.accounts));c="";c=-1==b.target.parentElement.className.indexOf("collapsed")?"expanded":"collapsed";this.ordersView.saveStickyOrders(c)},getPendingTrnsfer:function(b){-1==b.target.parentElement.className.indexOf("collapsed")&&($Content=a(b.target.parentElement).find(".flexgrid-wrapper"),0==$Content.length&&(this.DPCSActivityTabPendingTransferEntitledFeature?(this._destroyTransferView(),this.pendingTransferView=
new h({el:a("#transferExpanderContent"),accounts:this.accounts})):(this._destroyTransferView(),this.pendingTransferView=new d({el:a("#transferExpanderContent")}),this.pendingTransferView.setAccounts(this.accounts)),this.pendingTransferView.refresh()))},getHistory:function(b){-1==b.target.parentElement.className.indexOf("collapsed")&&($Content=a(b.target.parentElement).find(".flexgrid-wrapper"),0==$Content.length&&this.getHistoryData())},getHistoryData:function(){this.DPCSActivityTabBrokerageHistoryEntitledFeature||
(this.historyView&&(this.historyView.destroy(),this.historyView=null),this.historyView=this.allSelectionAreAnnuityAccount()?new l({el:a("#historyExpanderContent")}):new j({el:a("#historyExpanderContent")}));this.historyView.setAccounts(this.accounts);this.historyView.refreshWholeContent()},getActivityContainer:function(){var b=this,c;this.stillLoading=!1;if(this.domLoaded)c=(new a.Deferred).resolve();else{var e=b.acctNums,r,w="",z="",z=this.DPCSActivityTabBrokerageHistoryEntitledFeature?"/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer":
"/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer&SNIPPET=brokerageAccountHistoryACDA",w=this.DPCSActivityTabPendingTransferEntitledFeature?"/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer":"/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer&SNIPPET=activityTabPendingTransferACDA",y=m.get("AMC");"order"==D&&(b.allSelectionAreAnnuityAccount()?(e=e&&e.split(",")[0],c="/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer&SNIPPET=ordersAnnuity",r={ACCOUNT:e,ACCOUNTS:e}):(c="/ftgw/fbc/ofportfolio/activityContainerAndOrders?SNIPPET=activityContainer&SNIPPET=orderStatusACDA",
r={ACCOUNTS:e,AMC:y}));"pending"==D&&(c=w,r={ACCOUNTS:e,AMC:y});void 0==D&&(b.allSelectionAreAnnuityAccount()?(e=e&&e.split(",")[0],c="/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer&SNIPPET=annuityAccountHistory",r={ACCOUNT:e,ACCOUNTS:e}):(c=z,r={ACCOUNTS:e,AMC:y}));e=s.get("selectedAccounts");void 0!=e&&null!=e?(e=e.portfolio,void 0!=e&&null!=e&&(r.ALL_ACCTS="Y")):r.ALL_ACCTS="Y";n.abortPendingAjaxObj();g.showLoading("Loading...",!0,500);c=a.ajax({url:c,type:"POST",data:r,dataType:"html",success:function(c){c=
a("<div/>").html(c);c.find(".activity--history-footnote-account-positions").attr("href","javascript:void(0);");"order"==D&&(b.$(".activity-content").replaceWith(c.find(".activity-content")),b.$("#orderExpanderContent").html(c));"pending"==D&&(b.$(".activity-content").replaceWith(c.find(".activity-content")),b.$("#transferExpanderContent").html(c));void 0==D&&(b.$(".activity-content").replaceWith(c.find(".activity-content")),b.$("#historyExpanderContent").html(c));b.allSelectionAreAnnuityAccount()&&
!b.isSingleAnnuityAccount()&&a(".js-multi-accounts-message").removeClass("display-none")},complete:function(){this.stillLoading||g.hideLoading();this.stillLoading=!1}});n.addAjaxObjArray(c)}c.done(function(){if(0==b.expanderInstances.length)for(var c=a(".activity--expander"),e=c.length,m=0;m<e;m++)b.expanderInstances.push(new FID.Expander(c[m]));b.historyView&&(b.historyView.destroy(),b.historyView=null);if(b.DPCSActivityBrokerageTabEntitledFeature&&b.DPCSActivityTabOpenOrderEntitledFeature&&b.DPCSActivityTabPendingTransferEntitledFeature&&
b.DPCSActivityTabBrokerageHistoryEntitledFeature&&!b.allSelectionAreAnnuityAccount()){for(m=0;m<b.expanderInstances.length;m++)b.expanderInstances[m]._$toggleTitle.off("click");b.events["click #orderExpander"]=void 0;b.events["click #transferExpander"]=void 0;b.events["click #historyExpander"]=void 0;b.delegateEvents(b.events);c={orderEnable:!1,transferEnable:!1};void 0==D&&0>=b.$("#historyExpanderContent").length&&g.hideLoading();0<b.$("#orderExpander").parent().length&&(c.orderEnable=!0);0<b.$("#transferExpander").parent().length&&
(c.transferEnable=!0,c.isIncludeBillpay="Pending Transfers and Bill Payments"===a.trim(b.$("#transferExpander").html()));1<b.accounts.length&&a("#activity--history-range-dropdown").val(a("#activity--history-range-dropdown option:eq(0)").val());0<b.$("#orderExpander").length?b.getAppContext().footNote.isActivityTabOrderAvailable(!0):b.getAppContext().footNote.isActivityTabOrderAvailable(!1);e=a(b.accounts).map(function(a,b){return b.acctNum}).get().join(",");c.initSection=D;c.isGetOrderStatus=!(b.options.routeOptions&&
b.options.routeOptions.section);c.acctNums=e;c.isAllAccountsSelected=a(".js-selected").hasClass("js-portfolio");c.dpcsActivityBrokerageTabEntitledFeature=!0;b.paneActivityTabNGAppView&&b.paneActivityTabNGAppView.destroy();b.paneActivityTabNGAppView=new A({el:a("#tabContentActivity"),tabInfo:c});b.paneActivityTabNGAppView.refresh();setTimeout(function(){b.$(".activity--expander").focus()},10)}else if(b.historyView=b.allSelectionAreAnnuityAccount()?new l({el:a("#historyExpanderContent")}):b.DPCSActivityTabBrokerageHistoryEntitledFeature?
new k({el:a("#historyExpanderContent"),accounts:b.accounts}):new j({el:a("#historyExpanderContent")}),b.historyView.setAccounts(b.accounts),void 0==D&&(0<b.$("#historyExpanderContent").length?(""==b.$("#historyExpanderContent").html().replace(/\s/g,"")||b.DPCSActivityTabBrokerageHistoryEntitledFeature)&&b.historyView.refreshWholeContent():g.hideLoading()),"order"==D&&(b._destroyOrderView(),b.ordersView=b.allSelectionAreAnnuityAccount()?new p({el:a("#orderExpanderContent")}):this.DPCSActivityTabOpenOrderEntitledFeature?
new v({el:a("#orderExpanderContent")}):new f({el:a("#orderExpanderContent")}),b.ordersView.setAccounts(b.accounts),b.ordersView.refresh(),c=b.$("#orderExpander").parent(),0<c.length&&(c.removeClass("collapsed").addClass("expanded"),b.$("#transferExpander").parent().removeClass("expanded").addClass("collapsed"),b.$("#historyExpander").parent().removeClass("expanded").addClass("collapsed"))),"pending"==D&&(b.DPCSActivityTabPendingTransferEntitledFeature?(b._destroyTransferView(),b.pendingTransferView=
new h({el:a("#transferExpanderContent"),accounts:b.accounts}),b.pendingTransferView.refresh()):(b._destroyTransferView(),b.pendingTransferView=new d({el:a("#transferExpanderContent")}),b.pendingTransferView.setAccounts(b.accounts),a("#activity--pending-transfers-range-dropdown").attr("value","30"),b.pendingTransferView.changeTimePeriod()),c=b.$("#transferExpander").parent(),0<c.length&&(b.$("#orderExpander").parent().removeClass("expanded").addClass("collapsed"),c.removeClass("collapsed").addClass("expanded"),
b.$("#historyExpander").parent().removeClass("expanded").addClass("collapsed"))),b.historyView.postProcessing(),1<b.accounts.length&&a("#activity--history-range-dropdown").val(a("#activity--history-range-dropdown option:eq(0)").val()),0<b.$("#orderExpander").length?b.getAppContext().footNote.isActivityTabOrderAvailable(!0):b.getAppContext().footNote.isActivityTabOrderAvailable(!1),!b.options.routeOptions||!b.options.routeOptions.section)c=b.$("#orderExpander").parent(),this.stillLoading=!0,a.ajax({url:"/ftgw/fbc/ofoltxsvc/stateProxy?serviceUrl="+
encodeURIComponent("/state"),data:JSON.stringify({state:[{path:"/user/oce/activityOrders/orderSticky",version:"1.0",entry:[{key:"expanded"}]}]}),contentType:"application/json",dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(a){if(a&&!("ERROR"==a.type||0==a.length)&&"expanded"==a[0].entry[0].value&&b.$("#orderExpander").length)b.$(".activity--expander").removeClass("expanded").addClass("collapsed"),b.$("#orderExpander").click()},error:function(a,b,c){console.log("Error in retrieving order sticky status : "+
c+" "+b+" "+a)},complete:function(){b.historyView.deferred?b.historyView.deferred.done(function(){g.hideLoading()}):g.hideLoading()}});setTimeout(function(){b.$(".activity--expander").focus()},10)})},popWin:function(a){window.open(a.target.attributes.url.value,"infowindow","width=450,height=480,left=240,top=60,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes")},preProcessing:function(){$noContent=a(".activity-content .view-in-classic-msg");if(0<$noContent.length||0==this.expanderInstances.length)for(var b=
a(".activity--expander"),c=b.length,d=0;d<c;d++)this.expanderInstances.push(new FID.Expander(b[d]));else{b=a(".activity--expander");c=b.length;for(d=0;d<c-1;d++)a(b[d]).removeClass("expanded"),a(b[d]).addClass("collapsed");a("#transferExpanderContent").html("");a("#orderExpanderContent").html("");a("#historyExpanderContent").html("")}},refresh:function(){var b=a("a[href$='#tabContentActivity']");b.text("Activity & Orders");this.accounts=this.options.data.accounts;b=a(this.accounts).map(function(a,
b){return b.acctNum}).get();z=w="";this.acctNums=b.join(",");this.getAppContext().footNote.isActivityTabAvailable(!1);null!=this.accounts&&1==this.accounts.length?(b=this.accounts[0].acctType,this.acctNum=this.accounts[0].acctNum,"Stock Plans"==b||"Credit Card Account"==b&&!r.isFullViewCreditCardAccount(this.accounts[0])||-1!=b.indexOf("NetBenefit")||-1!=b.indexOf("No Active")?(this.processUnSupportedAccount(this.acctNum),g.hideLoading()):r.isFullViewAccount(this.accounts[0])?(b=a("a[href$='#tabContentActivity']"),
b.text("Activity"),b="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We are unable to provide current activity information for your non-Fidelity account. You can see this information in</b><a href='"+(envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p")+"'> Full View</a></div></div>",a(".activity-content").html(b),g.hideLoading()):(this.getAppContext().footNote.setActivityTabContent(""),this.getActivityContainer())):this.processMultiAccount(this.accounts)},
_displayGouptFullViewMsg:function(b){for(var c=envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p",d=s.get("selectedAccounts"),e=0;e<b.length;e++)if(!r.isFullViewAccount(b[e]))return!1;if(d.portfolio)return!1;a(".activity-content").html("<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We are unable to provide current activity information for your non-Fidelity accounts. You can see this information in</b><a href='"+c+"'> Full View</a></div></div>");
a("a[href$='#tabContentActivity']").text("Activity");g.hideLoading();return!0},processMultiAccount:function(b){if(!this._displayGouptFullViewMsg(b)){for(var c,d=!1,e=!1,f=!1,h=!1,j=!1,k=0;k<b.length;k++)c=b[k].acctType,"Stock Plans"==c?(d||this.processUnSupportedAccounts(b[k]),d=!0):-1!=c.indexOf("NetBenefit")?(e||this.processUnSupportedAccounts(b[k]),e=!0):"FV Bank Account"==c||"FV Investment Account"==c?(j||this.processUnSupportedAccounts(b[k]),j=!0):f=!0,r.isAnnuityAcct(b[k])&&(h||this.processAnnuityAccount(b[k]),
h=!0),this.getAppContext().footNote.setActivityTabContent(w);!d&&!e||f?this.getActivityContainer():(g.hideLoading(),a(".activity-content").html(z))}},processUnSupportedAccount:function(b){var c="",d="",e=this.accounts[0].acctType,f="/ftgw/fbc/ofaccounts/brokerageAccountHistory?ACCOUNT="+b;-1!=e.indexOf("NetBenefit")?(f=y+b,c="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg'>We're working on getting your NetBenefits account activity on this page. For now, you can find that information in<a href='"+
f+"'> NetBenefits.</a></div></div>",d="<p>Your workplace savings account activity cannot be displayed on this page. You can find that information in <a href='"+f+"'>NetBenefits.</a></p>",this.getAppContext().footNote.isActivityTabAvailable(!0)):"Stock Plans"==e&&(f=this.accounts[0].urlName.replace("&Ref_at=summary_nm",""),-1!=f.indexOf("SPPSummary")?f=f.replace("summary","history").replace("SPPSummary","SPPHistory"):-1!=f.indexOf("spsGrantSummary")?f=f.replace("summary","history").replace("spsGrantSummary",
"spsHistory")+"&DAYS_OF=10":-1!=f.indexOf("rsaPlanSummary")&&(f=f.replace("summary","history").replace("rsaPlanSummary","spsHistory")+"&DAYS_OF=10"),d="<p>Your stock plan activity cannot be displayed on this page. You can find that information on your <a href='"+f+"'>Stock Plan page.</a></p>",c="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg'>We're working on getting your Stock Plan activity on this page. For now, you can find that information on your<a href='"+f+"'> Stock Plan page.</a></div></div>",
this.getAppContext().footNote.isActivityTabAvailable(!0));f+"&Ref_at=ng";-1!=e.indexOf("No Active")&&(this.$(".activity-NoActive-content .link-to").attr("href",f),this.$(".activity-content").hide(),this.$(".activity-NoActive-content").show());a(".activity-content").html(c);this.getAppContext().footNote.setActivityTabContent(d)},processAnnuityAccount:function(a){r.isAnnuityAcct(a)&&(w+="<p>Activity for annuities is not included when viewing by All Accounts. Select a specific annuity for activity related to that account.</p>",
this.getAppContext().footNote.isActivityTabAvailable(!0))},processUnSupportedAccounts:function(a){var b=a.acctType,c=a.acctNum,d="/ftgw/fbc/ofaccounts/brokerageAccountHistory?ACCOUNT="+c;if(-1!=b.indexOf("NetBenefit"))d=y+c,w=w+"<p>Your workplace savings account activity cannot be displayed on this page. You can find that information in <a href='"+d+"'>NetBenefits.</a></p>",z=z+"<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg'>We're working on getting your NetBenefits account activity on this page. For now, you can find that information in<a href='"+
d+"'> NetBenefits.</a></div></div>",this.getAppContext().footNote.isActivityTabAvailable(!0);else if("Stock Plans"==b)d=a.urlName.replace("&Ref_at=summary_nm",""),-1!=d.indexOf("SPPSummary")?d=d.replace("summary","history").replace("SPPSummary","SPPHistory"):-1!=d.indexOf("spsGrantSummary")?d=d.replace("summary","history").replace("spsGrantSummary","spsHistory")+"&DAYS_OF=10":-1!=d.indexOf("rsaPlanSummary")&&(d=d.replace("summary","history").replace("rsaPlanSummary","spsHistory")+"&DAYS_OF=10"),z=
z+"<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg'>We're working on getting your Stock Plan activity on this page. For now, you can find that information on your<a href='"+d+"'> Stock Plan page.</a></div></div>",w=w+"<p>Your stock plan activity cannot be displayed on this page. You can find that information on your <a href='"+d+"'>Stock Plan page.</a></p>",this.getAppContext().footNote.isActivityTabAvailable(!0);else if("FV Bank Account"==b||"FV Investment Account"==b)d=
B,w=toggleMap.DPCSAccountActivityFVEntitledFeature?w+"<p>Your non-Fidelity account activity cannot be displayed on this page. You can find that information by selecting your non-Fidelity account or by visiting <a href='"+d+"'>Full View</a>.</p>":w+"<p>Your non-Fidelity account activity cannot be displayed on this page. You can find that information in <a href='"+d+"'>Full View</a>.</p>",this.getAppContext().footNote.isActivityTabAvailable(!0);d+"&Ref_at=ng"},destroy:function(){this.undelegateEvents();
for(var a=0;a<this.expanderInstances.length;a++)this.expanderInstances[a]._$toggleTitle.off("click");this.expanderInstances=[];this.DPCSActivityTabPendingTransferEntitledFeature&&this._destroyTransferView()},_destroyOrderView:function(){this.ordersView&&(this.ordersView.destroy(),this.ordersView=null)},_destroyTransferView:function(){this.pendingTransferView&&(this.pendingTransferView.destroy(),this.pendingTransferView=null)},_destroyHistoryView:function(){this.historyView&&(this.historyView.destroy(),
this.historyView=null)},printPage:function(){window.print()}});return S});
define("views/pane-activity-ngapp-view","jquery views/base-view models/account-context-model util/progressbar components/basepopup tasks/preference-session-task".split(" "),function(a,b,g,c){return b.extend({events:{},initialize:function(){this.accountsInfo=this.options.data;var b=a("a[href$='#tabContentActivity']"),c=a("#tabContentActivity .tab-content--header");b.text("Activity");c.text("Activity")},destroy:function(){},render:function(){return this},refresh:function(){c.showLoading("Loading Account Activity...",
!0,500);this.renderActivity();c.hideLoading(500)},defaults:{appName:"AccountActivity",basePath:(0<=document.URL.indexOf("oltxwebdev")||0<=document.URL.indexOf("wukong")?"/ftgw/digital/":envMap.DIGITAL_APP_URL)+"acct-activity",pathToBundles:"/dist/",jsBundle:"bundle.js",cssBundle:"bundle.css",wrapperSelector:".activity-content"},insertMarkup:function(b,c,g,f){var j=null,j=null,j=JSON.stringify(this.accountsInfo),j=(toggleMap.DPCSActivityDexResiliencyFeature?"":'<link href="'+f+'" rel="stylesheet">')+
'<div id="acat-assets-view"></div><div id="'+b+'" class="'+b+" content\"><activity-boot accounts='"+j+"'></activity-boot></div>";this.$wrapperClass.empty().append(j);a(c).attr("data-app-path",g);a(c).attr("data-injected",!0)},bootstrap:function(b,c,g){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[g])})},renderActivity:function(){var b=this.defaults.basePath,c=this.defaults.pathToBundles,g=this.defaults.appName,f=b+c+this.defaults.jsBundle,c=b+c+this.defaults.cssBundle,
j="#"+g;this.$wrapperClass=this.$el.find(this.defaults.wrapperSelector);this.insertMarkup(g,j,b,c);toggleMap.DPCSActivityDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DIGITAL_APP_URL+"acct-activity/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#acat-assets-view").html(b)}):this.bootstrap(f,j,g);this.getAppContext().footNote.isActivityTabAvailable(!1)}})});
define("views/dc-history-view",["jquery","views/activity-history-base-view","util/constants","util/progressbar","components/expander"],function(a,b,g,c){return b.extend({events:{"change #activity--history-range-dropdown":"getTransactionByTimeRange","click .js-history-custom-date-display-button":"getTransactionByTimeRange","click .js-calendar-button":"datePickerClicked","click .date-sort":"orderByDate","click .transaction-sort":"orderByTransaction","click .investment-sort":"orderByInvestment","click .amount-sort":"orderByAmount",
"click .unit-sort":"orderByUnit","click .dc-history-download-link":"download"},refresh:function(){this.param={AMOUNT:30};this.accountNumber=this.options.data;this.expanderInstances=[];0<this.$("#historyExpanderContent").length?this.loadDCHistory():this.loadDCHistoryWithContainer()},orderByDate:function(){var a=this.$("#SORT_BY").val(),b=this.$("#SORT_ORDER").val();this.param.SORT_BY="date";this.param.SORT_ORDER="date"===a&&"D"===b?"A":"D";this.getTransactionByTimeRange()},orderByTransaction:function(){var a=
this.$("#SORT_BY").val(),b=this.$("#SORT_ORDER").val();this.param.SORT_BY="transaction";this.param.SORT_ORDER="transaction"===a&&"D"===b?"A":"D";this.getTransactionByTimeRange()},orderByInvestment:function(){var a=this.$("#SORT_BY").val(),b=this.$("#SORT_ORDER").val();this.param.SORT_BY="investment";this.param.SORT_ORDER="investment"===a&&"D"===b?"A":"D";this.getTransactionByTimeRange()},orderByAmount:function(){var a=this.$("#SORT_BY").val(),b=this.$("#SORT_ORDER").val();this.param.SORT_BY="amount";
this.param.SORT_ORDER="amount"===a&&"D"===b?"A":"D";this.getTransactionByTimeRange()},orderByUnit:function(){var a=this.$("#SORT_BY").val(),b=this.$("#SORT_ORDER").val();this.param.SORT_BY="numberOfUnit";this.param.SORT_ORDER="numberOfUnit"===a&&"D"===b?"A":"D";this.getTransactionByTimeRange()},getTransactionByTimeRange:function(){var a=this.$("#activity--history-range-dropdown").val(),b=this.$(".activity--range-dropdown"),c=this.$(".activity--history-error-container"),f=this.$(".activity--header-elements-container");
if("custom"==a)if(f.hasClass("activity--state-custom-date"))if(this.editDates(this.$(".activity--history-custom-date-from-field")[0],this.$(".activity--history-custom-date-to-field")[0]))c.hide(),b.removeClass("activity--date-range-margin-fix"),this.param.FROM_DATE=this.formatDate(this.$(".activity--history-custom-date-from-field").val()),this.param.TO_DATE=this.formatDate(this.$(".activity--history-custom-date-to-field").val()),this.param.CUSTOME=!0;else return;else{f.addClass("activity--state-custom-date");
c.hide();b.removeClass("activity--date-range-margin-fix");return}else a=a.split(","),this.param.FROM_DATE=a[0],this.param.TO_DATE=a[1],this.param.CUSTOME=!1;this.param.AMOUNT=null;this.loadDCHistory()},loadDCHistoryWithContainer:function(){var b=this;a.ajax({method:"GET",url:"/ftgw/fbc/ofportfolio/mget?SNIPPET=activityContainer&ACCOUNTS="+b.accountNumber,success:function(a){b.$el.html(a);b.$(".activity--history-custom-date-field").FidDatePicker({usedatemask:!0});b.loadDCHistory()}})},download:function(){var a=
["/ftgw/fbc/ofaccounts/snippet/dcAccountHistory?CSV=Y&ACCOUNT=",this.accountNumber,"&FROM_DATE=",this.param?this.param.FROM_DATE:"","&TO_DATE=",this.param?this.param.TO_DATE:"","&AMOUNT=",this.param?this.param.AMOUNT:"","&SORT_BY=",this.param?this.param.SORT_BY:"","&SORT_ORDER=",this.param?this.param.SORT_ORDER:""].join("");document.location.href=a},loadDCHistory:function(){var b=this;if(0==b.expanderInstances.length)for(var d=a(".activity--expander"),g=d.length,f=0;f<g;f++)b.expanderInstances.push(new FID.Expander(d[f]));
c.showLoading("Loading histories...");a.ajax({url:"/ftgw/fbc/ofaccounts/snippet/dcAccountHistory",type:"POST",data:{ACCOUNT:b.accountNumber,FROM_DATE:b.param?b.param.FROM_DATE:"",TO_DATE:b.param?b.param.TO_DATE:"",AMOUNT:b.param?b.param.AMOUNT:"",SORT_BY:b.param?b.param.SORT_BY:"",SORT_ORDER:b.param?b.param.SORT_ORDER:""},success:function(a){b.$("#historyExpanderContent").html(a);b.param&&b.param.CUSTOME?(b.$(".activity--history-custom-date-from-field").val(b.param.FROM_DATE),b.$(".activity--history-custom-date-to-field").val(b.param.TO_DATE),
b.$("#activity--history-range-dropdown").val("custom"),b.$(".activity--header-elements-container").addClass("activity--state-custom-date"),b.$(".activity--history-error-container").hide(),b.$(".activity--range-dropdown").removeClass("activity--date-range-margin-fix")):b.param.FROM_DATE&&b.param.TO_DATE&&b.$("#activity--history-range-dropdown").val(b.param.FROM_DATE+","+b.param.TO_DATE);b.$(".activity--history-custom-date-field").FidDatePicker({usedatemask:!0})},fail:function(){},complete:function(){c.hideLoading()}})},
destroy:function(){this.undelegateEvents();for(var a=0;a<this.expanderInstances.length;a++)this.expanderInstances[a]._$toggleTitle.off("click");this.expanderInstances=[];this.DPCSActivityTabPendingTransferEntitledFeature&&this._destroyTransferView()}})});
define("views/tab-content-manager-activity","jquery views/tab-content-manager util/account-utils views/pane-activity-view views/pane-activity-ngapp-view models/account-context-model views/dc-history-view".split(" "),function(a,b,g,c,e,d,h){function f(){b.call(this,arguments)}var j=b,k=function(){};k.prototype=j.prototype;f.prototype=new k;f.prototype.constructor=f;f.prototype._super=j.prototype;a.extend(f.prototype,{loadTabContent:function(b){this.dispose();for(var f=window.toggleMap,j=f.DPCSAccountActivityFVEntitledFeature,
f=f.DC_HISTORY_POC,k=d.getSelectedAccountInfo().accounts,r={},s=!0,v=[],A=[],w=0;w<k.length;w++)if(v.push(k[w].acctNum),A.push({acctNumber:k[w].acctNum,acctName:k[w].acctName,fvDisplayAccNum:k[w].fvDisplayAccNum}),!g.isFullViewAccount(k[w])){s=!1;break}r.accountNumberList=v;r.fvDisplayAccNumList=A;j=f&&1===k.length&&5===k[0].oltxType?this.view=(new h({el:a(".pane.activity-tab-content"),data:k[0].acctNum})).render():j&&s?this.view=(new e({el:a(".pane.activity-tab-content"),data:r})).render():this.view=
(new c({el:a(".pane.activity-tab-content"),data:b.accountsInfo,routeOptions:b.routeOptions})).render();j.domLoaded=e.prototype.para||c.prototype.para||b.routeOptions&&b.routeOptions.section?!1:!!b.domLoaded;j.refresh()},dispose:function(){this.view&&this.view.destroy()}});return f});
(function(a,b){function g(a,b){if(!(1>b.length||1>a.length)){var g=this,k=null;a.on("click",function(a){g.toggle.apply(g,arguments)});if("function"===typeof TabRole){new TabRole(a);a.attr("role","button");var l=c.Accessibility;l&&(k=a.find(l.OFF_SCREEN_SELECTOR),0<k.length?k.empty().append(d):k=null)}b.addClass(e);this._$children=b;this._$expander=a;this._$accessibilitySpan=k}}var c=b.FID=b.FID||{},e="multi-accordion--hidden",d=", shows details.";g.Events={StateChanged:"StateChanged"};g.States={Open:"open",
Close:"close"};g.prototype.toggle=function(){this._$children.hasClass(e)?this.open():this.close()};g.prototype.open=function(){var b=this._$children,c=this._$accessibilitySpan;!(1>b.length)&&b.hasClass(e)&&(b.removeClass(e),this._$expander.addClass("expanded"),c&&c.empty().append(", hides details."),b=a.Event(g.Events.StateChanged,{State:g.States.Open}),this._$expander.trigger(b))};g.prototype.close=function(){var b=this._$children,c=this._$accessibilitySpan;1>b.length||b.hasClass(e)||(b.addClass(e),
this._$expander.removeClass("expanded"),c&&c.empty().append(d),b=a.Event(g.Events.StateChanged,{State:g.States.Close}),this._$expander.trigger(b))};g.prototype.getExpander=function(){return 1>this._$expander.length?null:this._$expander[0]};c.MultiAccordion=g})(jQuery,window);define("components/multiaccordion",["jquery"],function(a){return function(){return a.FID.MultiAccordion}}(this));
(function(a,b){function g(a){a.State===h.States.Open?this._expandersCounter++:a.State==h.States.Close&&this._expandersCounter--;a=this._expandersCounter;0==a||this._isOpened?e.call(this):a===this._expandersNumber&&(this._$accordion.addClass(j),this._$textElement.empty().append(l),this._isOpened=!0)}function c(b,c){var h=a(b),j=c.length,k=this,l=d.MultiAccordion;this._$accordion=h;h.on("click",function(){k.toggle()});"function"===typeof TabRole&&(new TabRole(h),h.removeAttr("role"));this._$textElement=
h.find(f);this._expandersCounter=0;if(!c||1>j)this._expandersNumber=0;else if(this._expandersNumber=j,this._accordions=c,this._isOpened=!1,e.call(this),l)for(h=0;h<j;h++)a(c[h].getExpander()).on(l.Events.StateChanged,function(a){g.call(k,a)})}function e(){this._$accordion.removeClass(j);this._$textElement.empty().append(k);this._isOpened=!1}var d=b.FID=b.FID||{},h=d.MultiAccordion,f=".hide-show-accordions--text",j="expanded",k="Show All",l="Hide All";c.prototype.toggle=function(){this._$accordion.hasClass(j)?
this.close():this.open()};c.prototype.open=function(){if(!this._$accordion.hasClass(j))for(var a=this._accordions,b=a.length,c=0;c<b;c++)a[c].open()};c.prototype.close=function(){if(this._$accordion.hasClass(j))for(var a=this._accordions,b=a.length,c=0;c<b;c++)a[c].close()};d.HideShowAccordions=c})(jQuery,window);define("components/hideshowaccordions",["jquery"],function(a){return function(){return a.FID.HideShowAccordions}}(this));define("text!templates/multi-balances-snippet.html",[],function(){return'<div class="balances--container">\n    <div class="balances--table-container">\n        <div class="balances--above-table-section clearfix">\n            <div class="balances--above-table-section-left">\n            \t<%\n            \tif (!isFullViewGroup){\n            \t%>\n                \t<span class="balances--activity-date attribution"><%= asOfTime %></span>\n                <%\n                }\n                %>\n            </div>\n            <div class="balances--above-table-section-right">\n                \x3c!--<a href="#" class="balances--download-balances">Download</a>--\x3e\n                <a href="#" class="print-link balances--print-balances balances--print-mutiBalances">Print</a>\n            </div>\n        </div>\n        <table class="balances--table balances--group-layout">\n            <tbody>\n                <tr class="balances--table-row-bottom-border-solid balances--desktop-title">\n                    <td class="balances--table-header balances--hide-show-all"></td>\n                    <%\n\t\t\t\t  \t\tif (hasSMAaccount) {\n\t\t\t\t  \t%>\n\t                    <th class="balances--table-header">Total Account Value *</th>\n\t\t\t\t    <%\n\t\t\t\t      \t} else {\n\t\t\t\t    %>\n                    <th class="balances--table-header">Total Account Value</th>\n\t\t\t\t    <%\n\t\t\t\t      \t}\n\t\t\t\t    %>\n                    <th class="balances--table-header">Change</th>\n                </tr>\n                <% \n                    var totalChangeColorClass = \'\';\n                    if (totalTodayChange > 0) {\n                            totalChangeColorClass = \'color-positive\';\n                        } else if (totalTodayChange < 0) {\n                            totalChangeColorClass = \'color-negative\';\n                        }\n                        if (displayTotalTodayChange == \'$0.00\') {\n                            totalChangeColorClass = \'\';\n                        }\n                    for(var i = 0; i < accounts.length; i++){\n                        var account = accounts[i];\n                        var colorClass = \'\';\n                        var displayAccountTodayChangeValue = account.accountTodayChangeValue;\n                        if(account.totalAcctValChg > 0) {\n                            colorClass = \'color-positive\';\n                            displayAccountTodayChangeValue = \'+\' + displayAccountTodayChangeValue;\n                        } else if (account.totalAcctValChg < 0) {\n                            colorClass = \'color-negative\';\n                        }\n                        if (account.accountTodayChangeValue == \'$0.00\') {\n                            colorClass = \'\';\n                        }\n                        if (displayAccountTodayChangeValue == \'\') {\n                        \tif (account.isFullViewAccount){\n                        \t\t// for full view account, the change column should display as "n/a"\n                        \t\tdisplayAccountTodayChangeValue = \'n/a\';\n                        \t} else {\n                        \t\tdisplayAccountTodayChangeValue = \'--\';\n                        \t}\n                        }\n                        \n                        var displayAccountBalance = account.formattedBalance;\n                        var displayViewIncomeValue = account.viewIncomeValueLink;\n                        if (displayAccountBalance == \'\' && !displayViewIncomeValue) {\n                        \tdisplayAccountBalance = \'--\';\n                        }\n                        var displayAccountNumber = account.acctNum;\n                        if (account.acctType == \'Stock Plans\') {\n                        \tdisplayAccountNumber = account.registrationType;\n                        }\n                        \n                        if (account.isFullViewAccount){\n                        \tdisplayAccountNumber = account.fvDisplayAccNum;\n                        }\n                %>\n                <tr class="balances--table-content">\n                    <td class="balances--cell-l1" headers="">\n                        <a href="#" aria-describedby="" data-acct-number="<%= account.acctNum %>" class="balances--cell-hide js-account-link" data-pii="true"><%= account.acctName %></a>\n                        <span class="balances--cell-hide balances--group-mode-cell-subtext" data-pii="true"><%= displayAccountNumber %></span>\n                        <%\n                        if (account.isFullViewAccount){\n                        %>\n                        <span class="balances--fv-timestamp"><%= account.fvAsOfTime %></span>\n                        <%\n                        }\n                        %>\n                    </td>\n                    <td data-label="Total Account Value" class="balances--value clearfix" headers="">\n                        <span class="balances--cell-l2">\n                            <%\n                                if (!displayViewIncomeValue) {\n                            %>\n                              <%= displayAccountBalance %>  \n                            <%\n                                } else {\n                            %>\n                                <a href="<%=displayViewIncomeValue%>">View Income Value</a>\n                            <%\n                                }\n                            %>\n                        </span></td>\n                    </td>\n                    <td data-label="Change" class="balances--value clearfix <%= colorClass %>" headers="">\n                    \t<span class="balances--cell-l2"><%= displayAccountTodayChangeValue %></span>\n                    </td>\n                </tr>\n                <% \n                    } \n                %>\n                <tr class="balances--table-content balances--group-mode-total-border">\n                    <td class="balances--cell-l1 balances--cell-hide">\n                        <span class="balances--group-mode-total balances--text-bold">Total</span>\n                    </td>\n                    <td data-label="Total Account Value" class="balances--value-total balances--group-mode-total balances--text-bold clearfix" headers="balances-total-account-value">\n                        <span class="balances--cell-l2"><%= displayTotalBalance %> </span>\n                    </td>\n                    <td data-label="Change" class="balances--value-total balances--group-mode-total balances--group-mode-total-border clearfix <%= totalChangeColorClass %>" headers="balances-todays-gain-loss">\n                        <span class="balances--cell-l2"><%= displayTotalTodayChange %></span>\n                    </td>\n                </tr>\n                <% \n                    if (displaySubTotal) {\n                        if(hasAuthAccts){\n                        \tvar totalAuthChangeColorClass = \'\';\n                        \tif (authValues.authTodayChange > 0) {\n                                totalAuthChangeColorClass = \'color-positive\';\n                            } else if (authValues.authTodayChange < 0) {\n                                totalAuthChangeColorClass = \'color-negative\';\n                            }\n                            if (authValues.displayAuthTodayChange == \'$0.00\') {\n                                totalChangeColorClass = \'\';\n                            }\n                        }\n                        \n                        var totalOwnedChangeColorClass = \'\';\n                    \tif (ownedValues.ownedTodayChange > 0) {\n                            totalOwnedChangeColorClass = \'color-positive\';\n                        } else if (ownedValues.ownedTodayChange < 0) {\n                            totalOwnedChangeColorClass = \'color-negative\';\n                        }\n                        if (ownedValues.displayOwnedTodayChange == \'$0.00\') {\n                            totalOwnedChangeColorClass = \'\';\n                        }\n                %>\n                <tr class="balances--table-content balances--group-mode-total-border balances--top-divider-dotted">\n                    <td class="balances--cell-l1 clearfix">\n                        <span class="balances--fid-accounts-total">Your Fidelity Accounts</span>\n                    </td>\n                    <td data-label="Total Account Value" class="balances--value balances--fid-accounts-total-number clearfix" headers=""><span class="balances--cell-l2"><%= ownedValues.displayOwnedTotalBalance %></span></td>\n                    <td data-label="Change" class="balances--value balances--fid-accounts-total-number <%= totalOwnedChangeColorClass %> clearfix" headers=""><span class="balances--cell-l2"><%= ownedValues.displayOwnedTodayChange %></span></td>\n                </tr>\n                <%\n                }\n                // if there is non-fidelity account, the other fidelity accounts is not the last row, so remove the bottom border.\n                if (hasAuthAccts){\n                    if (hasFvAccts){\n                %>\n                    <tr class="balances--table-content balances--group-mode-total-border">\n                    <%\n                        } else {\n                    %>\n                    <tr class="balances--table-content">\n                <%\n                    }\n                %>\n                    <td class="balances--cell-l1 clearfix" headers="">\n                        <span class="balances--fid-accounts-total">Other Fidelity Accounts</span>\n                    </td>\n                    <td data-label="Total Account Value" class="balances--value balances--fid-accounts-total-number clearfix" headers=""><span class="balances--cell-l2"><%= authValues.displayAuthTotalBalance %></span></td>\n                    <td data-label="Change" class="balances--value balances--fid-accounts-total-number <%= totalAuthChangeColorClass %> clearfix" headers=""><span class="balances--cell-l2"><%= authValues.displayAuthTodayChange %></span></td>\n                </tr>\n                <% \n                    }\n                %>\n\n                <% \n                if (displaySubTotal) {\n                    if (hasFvAccts) {\n                %>\n                <tr class="balances--table-content">\n                    <td class="balances--cell-l1 clearfix">\n                        <span class="balances--fid-accounts-total">Non-Fidelity Accounts</span>\n                    </td>\n                    <td data-label="Total Account Value" class="balances--value balances--fid-accounts-total-number clearfix" headers=""><span class="balances--cell-l2"><%= fvValues %></span></td>\n                    <td data-label="Change" class="balances--value balances--fid-accounts-total-number clearfix" headers=""><span class="balances--cell-l2">n/a</span></td>\n                </tr>\n                <% \n                    }\n                } \n                %>\n            </tbody>\n        </table>\n    </div>\n    \n    <%\n  \t\tif (hasSMAaccount) {\n  \t%>\n      \t<span class="balances--activity-date" style="color: #666666;">*Excludes accrued interest and unpriced securities</span>\n    <%\n      \t}\n    %>\n    <%\n\tif(piFeatureToggle == "Y" && isBrokerageAccountAvailable == "Y"){\n\t%>\n<div class="clearfix">\n    <div class="balances--footer-item-container">\n        <h2>Trading Profile</h2>\n        <ul class="balances--footer-item-group">\n            <li class="balances--footer-item">\n                <a class="balances--footer-item-popup-anchor" href="javascript:popWinCustom(\' /ftgw/fbc/ofaccounts/TradingProfile?ACCOUNT=&TAB=restrictions\',532,560)">\n                          Trade Restrictions &amp; Violations<span class="off-screen">. Opens in new window.</span>\n                      </a>\n            </li>\n            <li class="balances--footer-item">\n                <a class="balances--footer-item-popup-anchor" href="javascript:popWinCustom(\' /ftgw/fbc/ofaccounts/TradingProfile?ACCOUNT=&TAB=commissions\',532,560)">\n                          Commissions &amp; Price Improvement Summary \n                      </a> <span class="off-screen">. Opens in new window.</span>\n            </li>\n            <li class="balances--footer-item">\n                <a class="balances--footer-item-popup-anchor" href="javascript:popWinCustom(\' /ftgw/fbc/ofaccounts/TradingProfile?ACCOUNT=&TAB=agreements\',532,560)">\n                    Account Agreements\n                    <span class="off-screen">. Opens in new window.</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="balances--footer-item-container last">\n    </div>\n</div>\n<% \n    } \n%> \n</div>'});
define("text!templates/fv-balances-snippet.html",[],function(){return'<div class="balances--container">\n    <div class="balances--table-container">\n        <div class="balances--above-table-section clearfix fv-above-table-section">\n            <div class="balances--above-table-section-left">\n                <span class="balances--activity-date attribution"><%= fvAsOfTime %></span>\n            </div>\n            <div class="balances--above-table-section-right ">\n                <a href="<%= download_url%>" class="balances--download-balances">Download</a>\n                <a href="#" class="print-link balances--print-balances balances--print-mutiBalances">Print</a>\n            </div>\n        </div>\n        <table class="balances--table balances--group-layout">\n            <tbody>\n                <tr class="balances--table-content fv-balance-text">\n                    <td class="balances--cell-l1" headers="">\n                        <span class="balances--group-mode-total balances--text-bold">Total Account Value</span>\n                    </td>\n                    <td data-label="Total Account Value" class="fv-balances--text-bold" headers="">\n                        <span class="balances--cell-l2"><%= totalBalanceValue %></span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'});
define("views/pane-balances-view","jquery backbone views/base-view util/progressbar models/account-context-model util/account-utils util/formats components/multiaccordion components/hideshowaccordions text!../templates/multi-balances-snippet.html models/ajax-object-model util/eventhub-backbone text!../templates/fv-balances-snippet.html".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m){function n(a){return Math.floor(100*a+1E-5)/100}var r=envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/PlanDefault?plan=";
return g.extend({el:a(".balances-content"),events:{"click .balances--view-orders":"clickActivityLink","click .balances--print-balances":"printPage","click .balances--gotoGlossaryPage":"_gotoGlossaryPage","click .js-account-link":"clickSingleAccount","click .js-principal-income-link":"clickPrincipalIncodeLink","click .js-view-mul-margin":"clickViewBalancesForMulMargin","click .js-link-margin-calculator":"clickMarginCalculator"},initialize:function(a){this.accounts=this.options;this.hideShowAccordions=
this.accordions=null;this.renderAsMultipleBalances="multiplemarginbalances"===(a.routeOptions||{}).section;this.currentAccountFromRoute=((a.data||{}).accounts||[])[0]||{};this.fvFinsihRefreshedHandler()},render:function(){g.prototype.render.apply(this,arguments);return this},attachAccordion:function(){$table=a(".balances--table");0<$table.length&&($showHideAccordion=$table.find(".balances--hide-show-all .multi-accordion--expander"),$totalValueExpander=$table.find(".balances--total-value-title .balances--table-title"),
$totalValueChildren=$table.find(".balances--total-value"),$additionalBalancesExpander=$table.find(".balances--additional-balances-title .balances--table-title"),$additionalBalancesChildren=$table.find(".balances--additional-balances"),$marginInterestExpander=$table.find(".balances--margin-interest-title .balances--table-title"),$marginInterestChildren=$table.find(".balances--margin-interest"),this.accordions=0<$totalValueExpander.length&&0<$additionalBalancesExpander.length&&0<$marginInterestExpander.length?
[new f($totalValueExpander,$totalValueChildren),new f($additionalBalancesExpander,$additionalBalancesChildren),new f($marginInterestExpander,$marginInterestChildren)]:0<$totalValueExpander.length&&0<$additionalBalancesExpander.length?[new f($totalValueExpander,$totalValueChildren),new f($additionalBalancesExpander,$additionalBalancesChildren)]:[new f($totalValueExpander,$totalValueChildren)],this.hideShowAccordions=0<$showHideAccordion.length?new j($showHideAccordion,this.accordions):null,FID.Tabs&&
new FID.Tabs(".balances--container"))},popWinCustom:function(a,b,c,d){var e="no";d&&"yes"==d&&(e="yes");window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+e+",left=10,top=10,height="+b+",width="+c+",fullscreen=no").focus()},clickViewBalancesForMulMargin:function(b){b.preventDefault();b=a(b.target).attr("data-account-num");this.showMultiMargin(b)},showMultiMargin:function(a,b){var c=require("app").getInstance().router;b||c.navigate("multiplemarginbalances/"+
a,{trigger:!1});this.processSingleAccount(a,!0)},clickSingleAccount:function(c){c.preventDefault();c=a(c.target).data("acct-number");var d=e.getAccount(c);"NetBenefit Account"==d.acctType?(c=r+c+"&Ref_at=ng",document.location.href=c):d.viewIncomeValueLink?document.location.href="/ftgw/fbc/ofaccounts/annuityBalances?ACCOUNT="+c+"&Ref_at=ng&ignoreRedirect=Y":b.history.navigate("balances/"+c,{trigger:!0})},clickPrincipalIncodeLink:function(b){b.preventDefault();if(b=a(b.target))b=b.data("link-url"),
document.location.href=b;return!1},clickMarginCalculator:function(b){b.preventDefault();if(b=a(b.target))b=b.data("margin-calculator-link"),window.open(b,"infowindowMarginCalc","width=1024,height=680,left=80,top=80,location=no,resizable=yes,menubar=yes,status=no,toolbar=no,scrollbars=yes,fullscreen=no").focus();return!1},buildMultiAccoutsView:function(a){var b=[],b=a?this._getSupportAccounts():this.accounts;this._renderMultiAccoutsView(b)},_renderMultiAccoutsView:function(b){if(b&&0<b.length){var c=
e.getSelectedAccountInfo(),f=this._getAuthandOwnedAccounts(b),g=0,j=d.sumTotalTodayChangeValue(b),l="--",m=h.formatPrice(h.getDefaultPriceFormatOptions(j));c.portfolio?(g=c.portfolio.totalAccVal,l=c.portfolio.formattedBalance):c.groupId||c.groupName?(g=c.totalAccVal,l=c.groupTotal):(g=d.sumTotalBalancesByAccounts(b),l=h.formatPrice(h.getDefaultPriceFormatOptions(n(g))));0<j&&(m="+"+m);var p=f.authAccts,r=f.ownedAccts,f={},S={},J=this._getfullViewAccounts(b),O=d.hasOnlyFVAccounts(e.getSelectedAccountInfo())&&
!d.hasOnlyFVCCAccounts(e.getSelectedAccountInfo()),V=(0<J.length||0<p.length)&&!O;if(V){var N=0,P="",U=0,W="";0<p.length&&(N=d.sumTotalBalancesByAccounts(p),P=h.formatPrice(h.getDefaultPriceFormatOptions(n(N))),U=d.sumTotalTodayChangeValue(p),W=h.formatPrice(h.getDefaultPriceFormatOptions(U)),0<U&&(W="+"+W),f={authTotalBalance:N,displayAuthTotalBalance:P,authTodayChange:U,displayAuthTodayChange:W});N=0;P="";U=0;W="";0<r.length&&(N=d.sumTotalBalancesByAccounts(r),P=h.formatPrice(h.getDefaultPriceFormatOptions(n(N))),
U=d.sumTotalTodayChangeValue(r),W=h.formatPrice(h.getDefaultPriceFormatOptions(U)),0<U&&(W="+"+W),S={ownedTotalBalance:N,displayOwnedTotalBalance:P,ownedTodayChange:U,displayOwnedTodayChange:W})}r=a(".js-portfolio-asOfTime").text();N=envMap.PI_PHASE_2_ENABLED_URL;P="N";for(U=0;U<b.length;U++){var W=b[U],ca=W.registrationType;ca&&(0==W.oltxType&&-1==ca.indexOf("College Savings"))&&(P="Y")}U=h.formatPrice(h.getDefaultPriceFormatOptions(n(d.sumTotalBalancesByAccounts(J))));O&&(m="n/a");W={};c.accounts&&
(W=c.accounts);b={asOfTime:r,totalBalance:g,displayTotalBalance:l,totalTodayChange:j,displayTotalTodayChange:m,displaySubTotal:V,authValues:f,ownedValues:S,accounts:b,piFeatureToggle:N,isBrokerageAccountAvailable:P,hasFvAccts:0<J.length,hasAuthAccts:0<p.length,isFullViewGroup:O,fvValues:U,hasSMAaccount:e.hasSMAaccount(W)};b=_.template(k)(b);a(".balances-content").html(b)}else this._displayOnGoingMsg()},_getfullViewAccounts:function(a){var b=[];if(a&&0<a.length)for(accountKey in a){var c=a[accountKey];
c.isFullViewAccount&&b.push(c)}return b},_getAuthandOwnedAccounts:function(a){var b=[],c=[];if(a&&0<a.length)for(accountKey in a){var d=a[accountKey];d.isFavorAccount?b.push(d):d.isFidelityAccount&&c.push(d)}return{authAccts:b,ownedAccts:c}},_getSupportAccounts:function(){var a=[],b=e.getSelectedAccountInfo().accounts;if(b&&0<b.length)for(var c=0;c<b.length;c++){var d=b[c];"Credit Card Account"!=d.acctType&&a.push(d)}return a},_displayOnGoingMsg:function(){a(".balances-content").html("<div class='view-in-classic-msg balances-page-unsupported'><b>We're still working on a page that will show you combined balances for multiple accounts.</b> For now, you'll need to select one account at a time to view your balances.</div>");
a("#legal-footer--balance").html("");this._hideBalancesFootLink()},_displayIncomeValueMsg:function(b){a(".balances-content").html('<div class="view-in-classic-msg balances-page-unsupported"><b>Balance information is not available for this annuity.</b> You can <a href ="'+b+'" >view the income value of this annuity in the classic experience</a>.</div>');a("#legal-footer--balance").html("");this._hideBalancesFootLink()},processMultiAccount:function(){var b=e.getSelectedAccountInfo();if(b.portfolio)this.buildMultiAccoutsView(!0);
else if(b.groupId||b.groupName)b=b.groupId,"IA"==b||"SC"==b||"PM"==b||"AA"==b||"IP"==b||"EA"==b||"HS"==b||"SP"==b||"RA"==b?this.buildMultiAccoutsView(!1):"CC"==b?this._displayOnGoingMsg():this.buildMultiAccoutsView(!0);0<this.$(".balances--table.balances--group-layout").length&&a(".legal-footer--item.balance-tab:not(.legal-footer--accounts-link)").hide()},processUnSupportedAccount:function(b){var e="",f=this.accounts[0].acctType,g="/ftgw/fbc/ofaccounts/BrokerageBalances?ACCOUNT="+b;if(-1!=f.indexOf("FILI Account"))g=
"/ftgw/fbc/ofaccounts/annuityBalances?ACCOUNT="+b;else if(-1!=f.indexOf("NetBenefit"))g=r+b;else if("Stock Plans"==f||-1!=f.indexOf("No Active"))g=this.accounts[0].urlName.replace("&Ref_at=summary_nm","");g+"&Ref_at=ng&ignoreRedirect=Y";-1!=f.indexOf("No Active")?(this.$(".balances-NoActive-content .link-to").attr("href",g),this.$(".balances-content").hide(),this.$(".balances-NoActive-content").show()):d.isFullViewAccount(this.accounts[0])&&!d.isFullViewCreditCardAccount(this.accounts[0])?(g=envMap.SCS_URL_VALUE+
"/customeronly/fullview.shtml?bar=p",e="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We are unable to provide current balance information for your non-Fidelity account. You can see this information in</b><a href='"+g+"'> Full View.</a></div></div>"):e="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>This account type cannot be viewed in the Accounts  &amp; Trade preview.</b> You can <a href='"+
g+"'>view this account in the classic experience.</a></div></div>";a(".balances-content").html(e);a("#legal-footer--balance").html("");this._hideBalancesFootLink();c.hideLoading()},clickActivityLink:function(){var b=e.getSelectedAccountInfo(),c=require("app").getInstance().router,d="orders";b.accounts&&b.accounts.length&&(d+="/"+a.map(b.accounts,function(a){return a.acctNum}).join(","));c.navigate(d,{trigger:!0})},printPage:function(a){a.preventDefault();window.print();return!1},processSingleAccount:function(b,
d){var e=this,f;this.domLoaded?f=(new a.Deferred).resolve():(a(".balances-content").html(""),l.abortPendingAjaxObj(),c.showLoading("Loading...",!0,500),f="/ftgw/fbc/ofaccounts/snippet/brokerageAccountBalances",d&&(f="/ftgw/fbc/ofaccounts//snippet/multipleMarginBalances"),f=a.ajax({url:f,type:"POST",data:{ACCOUNT:b},dataType:"html",success:function(b){a(".balances-content").html(b)}}),l.addAjaxObjArray(f));f.done(function(){$table=a(".balances--table");if(0<$table.length){a(".balances-NoActive-content").hide();
a(".balances-content").show();var d=a("#balance-footnote").html();a("#legal-footer--balance").html(d);(null==d||""==a.trim(d))&&e._hideBalancesFootLink();e.attachAccordion();(d=$table.attr("data-mul-acct-list"))&&p.publishEvent("VIEW_MULIPLE_MARGIN",{mulAcctNums:d})}else e.processUnSupportedAccount(b);c.hideLoading()})},processFiliAccount:function(b){var d=this,e;e=a(".account-selector--tab.js-selected").find(".account-selector--tab-right .account-selector--account-action a");if(0<e.length){var f=
e.attr("href")+"&ignoreRedirect=Y";if("View Income Value"===e.text()){this._displayIncomeValueMsg(f);c.hideLoading();return}}this.domLoaded?e=(new a.Deferred).resolve():(a(".balances-content").html(""),l.abortPendingAjaxObj(),c.showLoading("Loading...",!0,500),e=a.ajax({url:"/ftgw/fbc/ofaccounts/snippet/annuityBalances?ACCOUNT=",type:"POST",data:{ACCOUNT:b},dataType:"html",success:function(b){a(".balances-content").html(b)}}),l.addAjaxObjArray(e));e.done(function(){c.hideLoading();$table=a(".balances--table");
if(0<$table.length){a(".balances-NoActive-content").hide();a(".balances-content").show();var e=a("#balance-footnote").html();a("#legal-footer--balance").html(e);(null==e||""==a.trim(e))&&d._hideBalancesFootLink();d.attachAccordion()}else d.processUnSupportedAccount(b)})},_gotoGlossaryPage:function(b){b=a(b.currentTarget).data("glossary");window.open(envMap.SCS_URL_VALUE+"/webxpress/help/topics/"+b,"infowindowlarge","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes").focus()},
processFVAccount:function(b){var c=-1==b.fvDisplayAccNum.indexOf("*")?b.fvDisplayAccNum:b.fvDisplayAccNum.replace(/\*/g,"X");b={fvAsOfTime:b.fvAsOfTime,totalBalanceValue:b.formattedBalance,download_url:envMap.ACCOUNT_URL+"/ftgw/fbc/ofaccounts/snippet/fvAccountBalances?ACCOUNT="+c+"&amp;CSV=Y&amp;NG=Y&amp;BALANCE="+b.totalBalance};b=_.template(m)(b);a(".balances-content").html(b)},processAccount:function(a){var b=a.acctType,e=a.acctNum;"Stock Plans"==b||"Credit Card Account"==b||-1!=b.indexOf("NetBenefit")||
-1!=b.indexOf("No Active")?this.processUnSupportedAccount(e):-1!=b.indexOf("FILI Account")?this.processFiliAccount(e):d.isFullViewAccount(a)&&!d.isFullViewCreditCardAccount(a)?(this.processFVAccount(a),c.hideLoading()):this.processSingleAccount(e)},fvFinsihRefreshedHandler:function(){var a=this;p.unsubscribeEvent({subject:"FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE"});p.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_BALANCE",function(b){b.isBalanceTabSelected&&(b.isMulAccSelected&&a._renderMultiAccoutsView(b.accounts),
b.isSingleSelected&&a.processFVAccount(b.accounts[0]))})},refresh:function(){this.accounts=e.get("selectedAccounts").accounts;this.renderAsMultipleBalances?this.showMultiMargin(this.currentAccountFromRoute.acctNum,!0):null!=this.accounts&&1==this.accounts.length?this.processAccount(this.accounts[0]):(this.processMultiAccount(),c.hideLoading())},_hideBalancesFootLink:function(){a(".legal-footer--item.balance-tab:not(.legal-footer--accounts-link)").hide()},destroy:function(){}})});
define("views/pane-balances-ngapp-view","jquery backbone views/base-view util/progressbar fang models/account-context-model".split(" "),function(a,b,g,c,e,d){return g.extend({defaults:{appName:"AP115140-balance",basePath:envMap.DPCS_URL+"balances/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css",wrapperSelector:".balances-content"},initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);this.account=this.options.data.accounts[0];this.accountnumber=
this.account.acctNum;this.systemOfRecord=this.account.systemOfRecord;this.internalProdCode=this.account.internalProdCode;this.accountType="External";if(0==this.account.oltxType||6==this.account.oltxType)this.accountType="Brokerage";else if(2==this.account.oltxType||3==this.account.oltxType)this.accountType="Annuity";this.$wrapperClass=this.$el.find(this.options.wrapperSelector)},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents();this.refreshDPCSBalancesEventId&&e.EventBus.unsubscribe(this.refreshDPCSBalancesEventId);
this.hideLoadingEventId&&e.EventBus.unsubscribe(this.hideLoadingEventId);this.viewActivityOrdersEventId&&e.EventBus.unsubscribe(this.viewActivityOrdersEventId)},insertMarkup:function(b,c,d,e,g){b=toggleMap.DPCSBalancesDexResiliencyFeature?"":'<link href="'+e+'" rel="stylesheet">';b+='<div id="AP115140-balance" ng-init="account={number:\''+this.accountnumber+"'";b=g&&g.isMultiMrgnSummaryView?b+",isMultiMrgnSummaryView:true":b+",isMultiMrgnSummaryView:false";b+=",accountType:'"+this.accountType+"'";
b+=",systemOfRecord:'"+this.systemOfRecord+"'";b+=",internalProdCode:'"+this.internalProdCode+"'";b+=",registrationCode:'"+this.account.registrationCode+"'";this.$wrapperClass.html(b+'}"><div ng-controller="balanceCtrl" /></div>');a(c).attr("data-app-path",d);a(c).attr("data-injected",!0)},bootstrap:function(b,c,d){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[d])})},renderMicroApp:function(b){var c=this.options.basePath,d=this.options.pathToBundles,e=this.options.appName,
g=c+d+this.options.jsBundle,p="#"+e;this.insertMarkup(e,p,c,c+d+this.options.cssBundle,b);toggleMap.DPCSBalancesDexResiliencyFeature?a.ajax({type:"GET",url:envMap.DPCS_URL_VALUE+"/ftgw/dpcs/balances/home/",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){a("#AP115140-balance").append(b)}):this.bootstrap(g,p,e)},refresh:function(a){a=a||{};c.showLoading("Loading...",!0,500);a.isMultiMrgnSummaryView?this.changeRouter("multiplemarginbalances",!1,this.accountnumber):-1<location.hash.split("/").indexOf("multiplemarginbalances")&&
(a.isMultiMrgnSummaryView=!0);this.renderMicroApp(a);this.refreshDPCSBalancesEventId=e.EventBus.subscribe("REFRESH_DPCS_BALANCES",_.bind(this.refresh,this));this.hideLoadingEventId=e.EventBus.subscribe("HIDE_LOADING",this.hideLoading);this.viewActivityOrdersEventId=e.EventBus.subscribe("VIEW_ACTIVITY_ORDERS",_.bind(this.clickActivityLink,this))},hideLoading:function(){c.hideLoading()},clickActivityLink:function(){this.changeRouter("orders",!0)},changeRouter:function(b,c,e){e?b+="/"+e:(e=d.getSelectedAccountInfo(),
e.accounts&&e.accounts.length&&(b+="/"+a.map(e.accounts,function(a){return a.acctNum}).join(",")));require("app").getInstance().router.navigate(b,{trigger:c})}})});
define("views/tab-content-manager-balances",["jquery","views/tab-content-manager","util/account-utils","views/pane-balances-view","views/pane-balances-ngapp-view"],function(a,b,g,c,e){function d(){b.call(this,arguments)}var h=b,f=function(){};f.prototype=h.prototype;d.prototype=new f;d.prototype.constructor=d;d.prototype._super=h.prototype;a.extend(d.prototype,{loadTabContent:function(b){console_log("Balances",b);this.dispose();var d=c,f;a:{if(envMap&&envMap.DPCS_BALANCES_ENABLE&&1===b.accountsInfo.accounts.length&&
(f=b.accountsInfo.accounts[0],6===f.oltxType||0===f.oltxType)){f=!0;break a}f=!1}if(!f)a:{if(envMap&&envMap.DPCS_BALANCES_NON_RETAIL_ENABLE&&1===b.accountsInfo.accounts.length){f=b.accountsInfo.accounts[0];if(g.isFullViewAccount(f)&&!g.isFullViewCreditCardAccount(f)){f=!0;break a}if(g.isAnnuityAcct(f)&&!g.isIncomeAnnuityAcct(f)){f=!0;break a}}f=!1}f&&(d=e);(this.view=(new d({el:a(".pane.balances-tab-content"),data:b.accountsInfo,routeOptions:b.routeOptions})).render()).refresh()},dispose:function(){this.view&&
this.view.destroy&&this.view.destroy()}});return d});
define("views/tab-content-manager-feature",["jquery","views/tab-content-manager","models/account-context-model"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{loadTabContent:function(b){console_log("Feature",b);this.dispose();b=g.get("selectedAccounts");var c=g.get("AMC");"true"===envMap.ACCOUNTS_FEATURE_TAB_ENABLED?(require("util/progressbar").showLoading("Loading Account Features..."),
a.ajax({url:envMap.DPCS_URL+"customerservice/accountfeatures",type:"POST",data:{selectedAccounts:b,AMC:c},contentType:"application/x-www-form-urlencoded; charset=UTF-8",xhrFields:{withCredentials:!0},success:function(b){a("#tabContentFeature").html(b);require("util/progressbar").hideLoading()},error:function(b){a("#tabContentFeature").html(b.responseText);console.log("Unable to show Account Features content")}})):a.ajax({url:envMap.DPCS_URL+"customerservice/accountfeatures",type:"GET",success:function(b){a("#tabContentFeature").html(b)},
error:function(b){a("#tabContentFeature").html(b.responseText);console.log("Unable to show Account Features content")}})},dispose:function(){}});return c});define("tasks/browser-msg-state-save-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/saveBrowserMsgStatus",contentType:"application/json",dataType:"json",type:"POST"})});
define("tpl!templates/browser-messaging-interstitial.html",function(){return function(a){var b=[];with(a)b.push("\x3c!-- Intro Tour --\x3e\n"),"TAX_FORM_RETIRED_BROWSER"===msgType?b.push('\n\t<div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-ieretire-modal browser-messaging-interstitial--container browser-messaging-interstitial--taxforms">\n'):b.push('\n\t<div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-ieretire-modal browser-messaging-interstitial--container">\n'),
b.push("\n\n\t\x3c!-- Hidden for redundancy --\x3e\n\t"),"TAX_FORM_RETIRED_BROWSER"===msgType?b.push('\n\t\t<div class="base-popup--close-button js-browser-messaging-close-portsum" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t'):b.push('\n\t\t<div class="base-popup--close-button browser-messaging-interstitial--close-button js-browser-messaging-close" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t'),b.push('\n\t<div class="browser-messaging-interstitial--message-content">\n\t'),
"XP_RETIRED_BROWSER"===msgType?b.push('\n\t\t<div class="browser-messaging-interstitial--header-container">\n\t\t\t<h2 class="browser-messaging-interstitial--header">Please upgrade your operating system</h2>\n\t\t</div>\n\t\t<p class="browser-messaging-interstitial--message">We noticed you are accessing Fidelity.com using an unsupported Windows<sup>&reg;</sup>&nbsp;operating system. We will be ending access for unsupported versions of Windows to ensure your browsing is secure and you have our best site experience. Please upgrade to a supported operating system to ensure uninterrupted access to your accounts.</p>\n\t'):
"VISTA_RETIRED_BROWSER"===msgType?b.push('\n\t\t<div class="browser-messaging-interstitial--header-container">\n\t\t\t<h2 class="browser-messaging-interstitial--header">Please upgrade your browser</h2>\n\t\t</div>\n\t\t<p class="browser-messaging-interstitial--message">We noticed you are accessing Fidelity.com using an older browser. Our latest site features may not work with versions of Internet Explorer<sup>&reg;</sup>&nbsp;supported by Windows<sup>&reg;</sup>&nbsp;Vista<sup>&reg;</sup>. Because we want to ensure you have our best site experience, we recommend using a version of the Mozilla<sup>&reg;</sup>&nbsp;Firefox<sup>&reg;</sup>&nbsp;browser.</p>\n\t'):
"WIN7_RETIRED_BROWSER"===msgType?b.push('\n\t\t<div class="browser-messaging-interstitial--header-container">\n\t\t\t<h2 class="browser-messaging-interstitial--header">Please upgrade your browser</h2>\n\t\t</div>\n\t\t<p class="browser-messaging-interstitial--message">We noticed you are accessing Fidelity.com using an unsupported version of Internet Explorer<sup>&reg;</sup>. To ensure your browsing is secure and you have our best site experience, please upgrade to Internet Explorer 11.</p>\n\t'):
"TAX_FORM_RETIRED_BROWSER"===msgType&&b.push('\n\t\t<div class="browser-messaging-interstitial__statements">\n\t\t\t<div class="browser-messaging-interstitial--header-container">\n\t\t\t\t<h2 class="browser-messaging-interstitial--header">Upgrade your browser to use the new Tax Forms experience</h2>\n\t\t\t</div>\n\t\t\t<p class="browser-messaging-interstitial--message">Your current version of Internet Explorer<sup>&reg;</sup> does not support the newly enhanced Tax Forms experience, which includes what tax forms you will receive this year and when you can expect them. Upgrade to Internet Explorer 11 now to access these enhancements.</p>\n\t\t</div>\n\t'),
b.push('\n\t</div>\n\t<div class="browser-messaging-interstitial--action-content">\n\t\t'),"TAX_FORM_RETIRED_BROWSER"===msgType?b.push('\n\t\t\t<a class="js-browser-messaging-action-portsum">\n\t\t\t\tGo to Portfolio Summary\n\t\t\t</a>\n\t\t'):b.push('\n\t\t\t<a class="js-browser-messaging-action-skip" href="javascript:void(0);">\n\t\t\t\tSkip for now\n\t\t\t</a>\n\t\t'),b.push("\n\n\t\t"),"XP_RETIRED_BROWSER"===msgType?b.push('\n\t\t\t<span class="glossy-button-sm browser-messaging-interstitial--get-updating">\n\t\t\t\t<button class="js-browser-messaging-action-upgrade-system">\n\t\t\t\t\tUpgrade your version of Windows\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t'):
"VISTA_RETIRED_BROWSER"===msgType?b.push('\n\t\t\t<span class="glossy-button-sm browser-messaging-interstitial--get-updating">\n\t\t\t\t<button class="js-browser-messaging-action-get-firefox">\n\t\t\t\t\tGet Firefox\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t'):"WIN7_RETIRED_BROWSER"===msgType?b.push('\n\t\t\t<span class="glossy-button-sm browser-messaging-interstitial--get-updating">\n\t\t\t\t<button class="js-browser-messaging-action-get-latest-ie">\n\t\t\t\t\t\tGet Internet Explorer 11\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t'):
"TAX_FORM_RETIRED_BROWSER"===msgType&&b.push('\n\t\t\t<button class="js-browser-messaging-action-get-latest-ie button-component button--primary">\n\t\t\t\tGet Internet Explorer 11\n\t\t\t</button>\n\t\t'),b.push("\n\t</div>\n</div>\n");return b.join("")}});
define("views/browser-messaging-interstitial-view",["jquery","views/base-view","IntroTour","tasks/browser-msg-state-save-task","tpl!../templates/browser-messaging-interstitial.html"],function(a,b,g,c,e){return b.extend({events:{"click .js-browser-messaging-action-skip":"skipBrowserMessaging","click .js-browser-messaging-action-portsum":"closeTaxFormModal","click .js-browser-messaging-action-upgrade-system":"redirectUpdatingWinOS","click .js-browser-messaging-action-get-latest-ie":"redirectUpdatingIE",
"click .js-browser-messaging-action-get-firefox":"redirectGettingFirefox","click .js-browser-messaging-close-portsum":"returnToPortsum"},initialize:function(){this.getMsgType();this.$el.empty()},render:function(){a("#moveit-intro-tour-wrapper").empty();a("#ma-intro-tour-wrapper").empty();a("#intro-tour-wrapper").empty();a("#intro-tour-positions-wrapper").empty();a("#fv-gtm-intro-tour-wrapper").empty();this.$el.html(e({msgType:this.msgType}));this.introTour=new FID.Applications.IntroTour(a("#browser-messaging-interstitial-wrapper"),
"")},redirectUpdatingWinOS:function(){this.displayAdditionalDialog();window.open("https://www.microsoft.com/en-us/download/details.aspx?id=20","_blank")},redirectUpdatingIE:function(){this.displayAdditionalDialog();window.open("http://windows.microsoft.com/en-US/internet-explorer/download-ie","_blank")},redirectGettingFirefox:function(){this.displayAdditionalDialog();window.open("https://www.mozilla.org/en-US/firefox/new/","_blank")},displayAdditionalDialog:function(){window.alert("You are now leaving Fidelity.com for a website that is unaffilliated with Fidelity. Fidelity has not been involved in the preparation of the content supplied at the unaffilliated site and does not guarantee or assume any responsibility for its content.")},
getMsgType:function(){var a=this.detectBrowserVersion(navigator.userAgent),b=this.detectBrowserOS(navigator.userAgent),c=navigator.userAgent.replace(/^[\S\s]*Trident\/(\d+.\d+)[\S\s]*$/g,function(a,b){return b}),e=-1<window.location.href.indexOf("statements");if("XP"===b&&"7.0"!==c&&("IE7"===a||"IE8"===a))this.msgType="XP_RETIRED_BROWSER";if("VISTA"===b&&"7.0"!==c&&("IE7"===a||"IE8"===a||"IE9"===a||"IE10"===a))this.msgType="VISTA_RETIRED_BROWSER";if("WIN7"===b&&"7.0"!==c&&("IE8"===a||"IE9"===a||"IE10"===
a))this.msgType="IE10"===a&&e?"TAX_FORM_RETIRED_BROWSER":"WIN7_RETIRED_BROWSER"},detectBrowserVersion:function(a){var b=a.search(/MSIE /g),c;if(-1!==b||-1<b)c=a.substr(b+5,3);switch(c){case "7.0":return"IE7";case "8.0":return"IE8";case "9.0":return"IE9";case "10.":return"IE10";default:return"OTHER"}},detectBrowserOS:function(a){var b=a.search(/Windows NT /g),c;if(-1!==b||-1<b)c=a.substr(b+11,3);switch(c){case "5.1":return"XP";case "6.0":return"VISTA";case "6.1":return"WIN7";default:return"OTHER"}},
saveSkippingStatus:function(){(new c({context:this})).run()},closeInterstitial:function(){this.introTour.close()},openInterstitial:function(){this.isInterstitialOpening=!0;this.introTour.open()},skipBrowserMessaging:function(){this.saveSkippingStatus();this.closeInterstitial()},closeTaxFormModal:function(){a(".js-browser-messaging-close-portsum").click()},returnToPortsum:function(){a('a[href="#tabContentSummary"]').click()},destroy:function(){this.msgType=this.introTour=this.isInterstitialOpening=
null;this.$el.empty();this.undelegateEvents()}})});
define("views/pane-statements-view","jquery backbone views/base-view util/progressbar fang components/expander components/basepopup views/browser-messaging-interstitial-view models/account-context-model".split(" "),function(a,b,g,c,e,d,h,f,j){var k={"tax-forms":"TF","trade-confirmations":"TC","account-records":"AR","proxy-materials":"PM",prospectus:"PP","interested-party":"IPS","quarterly-review":"QIR","annuity-confirmations":"AC","default":"STMT"},l={TF:"tax-forms",TC:"trade-confirmations",AR:"account-records",
PM:"proxy-materials",PP:"prospectus",IPS:"interested-party",QIR:"quarterly-review",AC:"annuity-confirmations",STMT:"default"};return g.extend({defaults:{appName:"statements",statementsPath:envMap.DPCS_URL+"statements",pathToBundles:"/dist/",jsBundle:"bundle.js",cssBundle:"bundle.css",wrapperSelector:".statements-content"},initialize:function(b){var c=null,d=new f({el:"#browser-messaging-interstitial-wrapper"});this.options=b||{};this.options=_.extend({},this.defaults,this.options);toggleMap.statementsUpgrade&&
(this.options.statementsPath=envMap.DIGITAL_APP_URL+"statements");this.$wrapperClass=this.$el.find(this.options.wrapperSelector);c=this.options.routeOptions?this.options.routeOptions.section:null;this.options.section=c&&c in k?c:"default";this.options.isAllAccountsSelected=0<a(".js-portfolio.js-selected").length;this.$content=a(".statements-content");this.showLoadingEventId=e.EventBus.subscribe("STATEMENTS_SHOW_LOADING",angular.bind(this,this.showLoading));this.hideLoadingEventId=e.EventBus.subscribe("STATEMENTS_HIDE_LOADING",
angular.bind(this,this.hideLoading));this.routerEventId=e.EventBus.subscribe("STATEMENTS_ROUTE",angular.bind(this,this.route));this.userOS=d.detectBrowserOS(navigator.userAgent);this.userBrowser=d.detectBrowserVersion(navigator.userAgent)},render:function(){return this},refresh:function(){this.testBrowser()?(this.showLoading(),toggleMap.statementsUpgrade?this.renderStatementsTypescript():this.renderStatementsApp()):(this.$wrapperClass.append('<link href="'+this.options.statementsPath+this.options.pathToBundles+
this.options.cssBundle+'" rel="stylesheet">'),a(document).trigger("POPUP_BROWSER_TAXFORMS_INTERSTITIAL"))},destroy:function(){this.$wrapperClass.empty();this.undelegateEvents();this.showLoadingEventId&&e.EventBus.unsubscribe(this.showLoadingEventId);this.hideLoadingEventId&&e.EventBus.unsubscribe(this.hideLoadingEventId);this.routerEventId&&e.EventBus.unsubscribe(this.routerEventId)},insertMarkup:function(b,c,d,e){var f=this.testAccounts();this.$wrapperClass.append('<link href="'+e+'" rel="stylesheet"><div id="'+
b+'" class="'+b+" content\"><statements-boot ng-init=\"init('TF', "+this.options.isAllAccountsSelected+", "+f.hasWIAccount+", "+f.hasAuthorizedAccount+", "+f.hasFILIAccount+')"></statements-boot></div>');a(c).attr("data-app-path",d);a(c).attr("data-injected",!0)},bootstrap:function(b,c,d){require([this.options.statementsPath+this.options.pathToBundles+"assets/vendor/svg4everybody.min.js",this.options.statementsPath+this.options.pathToBundles+"assets/vendor/ui-grid.js",this.options.statementsPath+
this.options.pathToBundles+"assets/vendor/fsm-sticky-header.js",b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),[d])})},renderStatementsApp:function(){var a=this.options.statementsPath,b=this.options.pathToBundles,c=this.options.appName,d=a+b+this.options.jsBundle,e="#"+c;this.insertMarkup(c,e,a,a+b+this.options.cssBundle);this.bootstrap(d,e,c)},renderStatementsTypescript:function(){var b=this;a.ajax({type:"GET",url:this.options.statementsPath+"/",contentType:"application/x-www-form-urlencoded",
xhrFields:{withCredentials:!0},crossDomain:!0,data:{type:k[this.options.section],allAccountsSelected:this.options.isAllAccountsSelected,acTabEnabled:toggleMap.statementsACTab}}).done(function(a){b.$wrapperClass.empty().html(a)}).fail(function(a){console.log(a.responseText)})},showLoading:function(){this.$content.css("opacity",0);setTimeout(function(){c.showLoading("Loading...",!0)},0)},hideLoading:function(a){var b=this;a?setTimeout(function(){c.hideLoading();b.$content.css("opacity",1)},1400):(c.hideLoading(),
this.$content.css("opacity",1))},route:function(c){c=l[c];c="statements"+(c?"/"+c:"");var d=this.options.data&&this.options.data.accounts,e="";this.options.isAllAccountsSelected||(a.each(d,function(a,b){e+=(0==a?"":",")+b.acctNum}),e&&(c+="/"+e));b.history.navigate(c,{trigger:!1})},testBrowser:function(){var a=!0;"XP"===this.userOS&&"IE8"===this.userBrowser&&(a=!1);"VISTA"===this.userOS&&"IE8"===this.userBrowser&&(a=!1);if("WIN7"===this.userOS&&("IE8"===this.userBrowser||"IE10"===this.userBrowser))a=
!1;return a},testAccounts:function(){var b=!1,c=!1,d=!1;a.each(j.getAllAccounts(),function(a,e){5===e.oltxType&&(b=!0);e.isFavorAccount&&(c=!0);-1!=[2,3,4].indexOf(e.oltxType)&&(d=!0)});return{hasWIAccount:b,hasAuthorizedAccount:c,hasFILIAccount:d}}})});
define("views/tab-content-manager-statements",["jquery","views/tab-content-manager","views/pane-statements-view"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{loadTabContent:function(b){this.dispose();b.routeOptions||(b.routeOptions={section:this.detectSection()});this.view=(new g({el:a(".pane.statements-tab-content"),data:b.accountsInfo,routeOptions:b.routeOptions})).render();
this.view.refresh()},dispose:function(){this.view&&this.view.destroy()},detectSection:function(){var a=/statements\/?([^\/]*)\/?([^\/]*)/g.exec(window.location.hash);return a&&2<a.length?a[1]:null}});return c});
define("views/pane-promote-view","jquery backbone views/base-view util/progressbar fang components/expander components/basepopup models/account-context-model".split(" "),function(a,b,g,c){function e(){var a=window.event?window.event:null;return a.cancelBubble=!0,a.returnValue=!1,a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),!1}return g.extend({el:a(".pane.cma-upgrade-tab-content"),events:{"click .dismiss-cma-upgrade-tab":"dismissPromoteTab","click .cma-upgrade-view-currnt-link":"onPopupLinkClicked",
"click .cma-open-account-button":"onOpenAccountClicked"},initialize:function(a){this.options=a||{}},render:function(){return this},refresh:function(){return this},dismissPromoteTab:function(){c.showLoading("Loading...",!0,500);a.ajax({type:"GET",url:"../ofportfolio/rest/dismissCMAUpgrade",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(b){if("success"===b.status){try{Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:"Dismiss this tab"})}catch(e){}a('a[href="#tabContentSummary"]').click();
a('a[href="#cmaPromotion"]').parent().hide()}c.hideLoading()}).fail(function(a){console.log(a.responseText);c.hideLoading()})},onPopupLinkClicked:function(a){a=a.target.href;var b,c;try{var g=["590","637"];c=g[0]+"px";b=g[1]+"px";window.open(a,"WithinFidelity","height="+b+",width="+c+",toolbar=yes,menubar=yes,scrollbars=yes,resizable=yes,location=no,directories=no,status=no");e()}catch(k){alert("Error occured while executing opeartion :"+k.description),e()}},onOpenAccountClicked:function(){try{Bootstrapper._trackAnalytics({pt:"ss",
action:"interaction",intname:"Open Account"})}catch(a){}}})});
define("views/tab-content-manager-cmaupgrade",["jquery","views/tab-content-manager","views/pane-promote-view"],function(a,b,g){function c(){b.call(this,arguments)}var e=b,d=function(){};d.prototype=e.prototype;c.prototype=new d;c.prototype.constructor=c;c.prototype._super=e.prototype;a.extend(c.prototype,{loadTabContent:function(b){try{Bootstrapper._trackAnalytics({pt:"ss",action:"pageview",channel:"Fid.com web",pname:"CMA Upgrade",sec:"portfolio",sec1:"upgrade"})}catch(c){}this.view=(new g({el:a(".pane.cma-upgrade-tab-content"),
data:b.accountsInfo,routeOptions:b.routeOptions})).render();this.view.refresh()},dispose:function(){this.view&&this.view.destroy&&this.view.destroy()}});return c});
define("views/acct-notification-ngapp-view",["jquery","backbone","views/base-view","util/progressbar","models/account-context-model"],function(a,b,g,c){return g.extend({defaults:{appName:"ap120405AccountNotification",basePath:envMap.DIGITAL_URL+"acct-notification/",pathToBundles:"dist/",jsBundle:"bundle.js",cssBundle:"bundle.css"},initialize:function(a){this.options=a||{};this.options=_.extend({},this.defaults,this.options);window.isShowSPSAlerts=this.options.isShowSPSAlerts;window.isShowFVComingSoon=
this.options.isShowFVComingSoon;window.isShoweMoneyMigrationMsg=this.options.isShoweMoneyMigrationMsg;window.isShowDigitalResMsg=this.options.isShowDigitalResMsg;window.isASRFeatureOn=this.options.isASRFeatureOn},destroy:function(){this.undelegateEvents()},insertMarkup:function(a,b,c,f){this.$el.append('<link href="'+f+'" rel="stylesheet"><div  id="'+a+'"><div account-notification-container></div></div>')},bootstrap:function(b,c,g){require([b],function(){a(c).hasClass("ng-scope")||angular.bootstrap(angular.element(c),
[g])})},renderMicroApp:function(){var a=this.options.basePath,b=this.options.pathToBundles,c=this.options.appName,f=a+b+this.options.jsBundle,g="#"+c;this.insertMarkup(c,g,a,a+b+this.options.cssBundle);this.bootstrap(f,g,c)},refresh:function(){var b=this;toggleMap.acctNotificationCrosFeature?a.ajax({url:envMap.DIGITAL_APP_URL+"acct-notification/home",type:"GET",xhrFields:{withCredentials:!0},success:function(a){b.$el.html(a)}}):this.renderMicroApp();c.hideLoading()}})});
define("text!templates/fv-creditcard-snippet.html",[],function(){return"<div class=\"fv-message--container\">\n\t<div class='fv-credit-card-message'>\n\t\tWe are unable to provide current information for your non-Fidelity credit card accounts. You can see this information in\n\t\t<a href='<%= url %>'> Full View</a>\n\t</div>\n</div>"});define("text!templates/fv-emoney-snippet.html",[],function(){return"<div class=\"fv-message--container\">\n\t<div class='fv-credit-card-message'>\n\t\tWe are unable to provide current information for your non-Fidelity <%= accountTypeName%> accounts. You can see this information in\n\t\t<a href='<%= url %>'> Full View</a>\n\t</div>\n</div>"});
define("text!templates/coinbase-tab-snippet.html",[],function(){return"<div class=\"fv-message--container\">\n    <div class='fv-coinbase-card-message'>\n        If you want to fully interact with your account, you\u2019ll need to visit <a href='javascript:void(0)'>Coinbase</a>\n    </div>\n</div>"});define("text!templates/leave-fidelity-declaration.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-medium leave-fid-declaration__popup">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="leave-fid-declaration__header">You are now leaving Fidelity.com</div>\n\t<div class="leave-fid-declaration__body">You are now leaving Fidelity.com for a website that is unaffiliated with Fidelity. Fidelity has not been involved in the preparation of the content supplied at the unaffiliated site and does not guarantee or assume any responsibility for its content.</div>\n\t<div class="leave-fid-declaration__ctrls">\n\t\t<a href="javascript:void(0)" class="base-popup--close-button-modal leave-fid-declaration__cancel">Cancel</a>\n\t\t<button class="button-component button--secondary leave-fid-declaration__continue">Continue</button>\n\t</div>\n</div>'});
define("text!templates/fv-group-tab-snippet.html",[],function(){return'<div class="fv-message--container">\n\t<%if (creditCard.selected) {%>\n\t<div class="fv-group-tab-message">\n\t\tFor more information about your Fidelity credit card please visit <a href="<%=creditCard.url%>">Manage Money and Payments</a>\n\t</div>\n\t<%}%>\n\t<%if (fullview.selected) {%>\n    <div class=\'fv-group-tab-message\'>\n        For more information about your Non-Fidelity accounts please visit <a href="<%=fullview.url%>">Full View</a>\n    </div>\n    <%}%>\n</div>'});
define("views/portfolio-content-view","jquery backbone util/eventhub-backbone models/account-context-model views/composite-view util/constants util/account-utils tools components/fidtab components/moretab util/progressbar models/account-context-model tasks/customer-spoke-info-task views/moretab-content-adapter views/tab-content-manager-summary views/tab-content-manager-feed views/tab-content-manager-performance views/tab-content-manager-positions views/tab-content-manager-activity views/tab-content-manager-balances views/tab-content-manager-feature views/tab-content-manager-statements views/tab-content-manager-cmaupgrade views/acct-notification-ngapp-view models/ajax-object-model ngtimer components/modalpopup text!../templates/fv-creditcard-snippet.html text!../templates/fv-emoney-snippet.html text!../templates/coinbase-tab-snippet.html text!../templates/leave-fidelity-declaration.html text!../templates/fv-group-tab-snippet.html".split(" "),
function(a,b,g,c,e,d,h,f,j,k,l,p,m,n,r,s,v,A,w,z,D,y,B,I,S,J,O,V,N,P,U,W){var ca=envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/PlanDefault?plan=",R=envMap.PORTFOLIO_ANALYSIS_URL_VALUE+"/ftgw/analysis/landing.gps",Z=envMap.MM_URL_VALUE+"/ftgw/fbc/mm/mmPendingTxns?ACCOUNT=",ea=envMap.NBRETAIL_URL_VALUE+"/nbretail/navstation/navigation/dc/histories?plan=",la="Summary",va=!1,H;return e.extend({events:{"click .classic-balances":"gotoClassic","click .classic-analysis":"gotoClassic","click .classic-orders":"gotoClassic",
"click .classic-pending-transfers":"gotoClassic","click .classic-history":"gotoClassic","click .activity-card--view-all-activity-link":"clickActivityLink","click .activity-card--view-all-recent-activity-link":"clickActivityLink","click .activity-narrative-card--view-all-activity-link":"clickActivityLink","click .pending-transfer-card--view-all-activity-link":"clickPendingTransferLink","click .pending-transfer-card--description-link":"clickDescriptionTransferLink","click .js-recent-transaction-card--view-all-recent-transaction-link":"clickRecentTransactionsViewAllLink",
"click .js-recent-transaction-card--description-link":"clickRecentTransactionsDescriptionLink","click .top-movers--view-positions-link":"clickPositionsLink","click .top-positions--view-positions-link":"clickPositionsLink","click .activity-card--grid-link":"clickActivityLinkToTab","click .Message-link":"submitMessageLink","click .js-card-toggle-current, .js-card-toggle-simplified":"handleCardToggle","click .js-link-eMoney-clinet":"goToEmoneyClient","click .fv-coinbase-card-message a":"clickCoinbaseLink",
"click .leave-fid-declaration__popup .leave-fid-declaration__cancel":"closeLeaveFidPopup","click .leave-fid-declaration__popup .leave-fid-declaration__continue":"openCoinbasePage"},initialize:function(){e.prototype.initialize.apply(this,arguments);this.firstLoad=!0;var b=this.moretabAdapter=new n;b.regisiterTabContentBuilder("Performance",v);b.regisiterTabContentBuilder("Feed",s);b.regisiterTabContentBuilder("Summary",r);b.regisiterTabContentBuilder("Positions",A);b.regisiterTabContentBuilder("Balances",
z);b.regisiterTabContentBuilder("Activity",w);b.regisiterTabContentBuilder("Feature",D);b.regisiterTabContentBuilder("Statements",y);toggleMap.showCMAUpgradeTabToggle&&b.regisiterTabContentBuilder("Upgrade",B);a(document).bind(d.EVENTS.SELECTED_ACCT_CHANGE,_.bind(this.onSelectedAccountChange,this));this.$(".activity-content .view-in-classic-msg").html('<b>This section is not included in the Accounts &amp; Trade preview.</b> You can view your orders, pending transfers, and <a class="classic-history classic-link" href="javascript:void(0)">history</a> in the classic experience.')},
buildTabContext:function(b,c){return a.extend(c||{},{accountsInfo:b})},buildPortfolioBodyParams:function(b,c){var d=b.accounts,e="",f=a(d).filter(function(a,b){return!!b}).map(function(a,b){return b.acctNum}).get().join(","),e=e+("TAB="+c);this.currentTab=c;if("Positions"==this.currentTab){e+="&POSITIONS_GRID_IND="+("X"===POSITIONS_GRID_IND||"Y"===POSITIONS_GRID_IND?"Y":"N");e+="&ACCTS="+f;if(void 0!=b&&null!=b){var g=b.portfolio,d=b.accounts;void 0!=g&&null!=g?e+="&ALL_ACCTS=Y&position.ALL_ACCTS=Y":
void 0!=d&&(null!=d&&0<d.length)&&(e+="&ALL_ACCTS=N&position.ALL_ACCTS=N",e=1===d.length?e+("&ACCOUNT="+f)+("&ACCOUNTS="+f):e+"&ACCOUNT=")}else e+="&ALL_ACCTS=Y&position.ALL_ACCTS=Y";e+="&TXN_SORT_ORDER=0&NEXTGEN=Y"}else{e+="&ACCOUNTS="+f;e+="&ACCTS="+f;"Summary"===c&&p.isPerformanceHidden()&&(e+="&isBalanceHidden=Y");if(null!=b&&null!=b.portfolio&&(e+="&ALL_ACCTS=Y",e+="&positions-mini-context="+a(".positions-mini-context").val(),a(".positions-mini-context").remove(),toggleMap.experienceConfigratorFeature&&
cardListGlobal&&(g=this.processCardList(cardListGlobal))&&g.cardList))e+="&experience-mini-context="+experienceMiniContext,e+="&cardList="+encodeURIComponent(JSON.stringify(g.cardList));g=a(".js-portfolio").data("employerMessagingEnabled")?"WIMessagingEnabled":"";1<d.length?g&&(e+="&SERVICE_INDICATORS="+g):1===d.length&&(e+="&ACCOUNT="+f,5==d[0].oltxType&&(e+="&SERVICE_INDICATORS="+(g?g+",":"")+d[0].serviceIndicators))}return e},processCardList:function(a){if(a){var b={},c=[];for(i=0;i<a.length;i++){var d=
a[i];if(d.cardId){d=d.cardId.replace("tcm:","").split("-");if(3==d.length)var e={componentId:d[1],templateId:d[2],publicationId:d[0]};c.push(e)}}if(0<c.length)return b.cardList={componentPresentation:{components:{component:c}}},b}},isNarrativeCard:function(){var b=a(".js-footer-entitlement-info").data("is-ceentitlement");return c.get("selectedAccounts").portfolio&&b&&"simplified"==this.$(".card-layout-toggle--selected").data("card-toggle-value")},isManagedAccountsOnly:function(b){a("#spoke-rep-info").data("allAcct",
!1);if(void 0!=b&&null!=b){var c=b.portfolio;if(void 0!=c&&null!=c)return a("#spoke-rep-info").data("allAcct",!0),!1}var d=c="",e="",f=!1;if(null!=b.groupId)if(1==b.accounts.length){if(c=b.accounts[0].acctType,d=b.accounts[0].isPWM,e=b.accounts[0].isDMA,d||e)c=""}else for(var g=b.accounts.length,h=0;h<g;h++){if(c=b.accounts[h].acctType,d=b.accounts[h].isPWM,e=b.accounts[h].isDMA,"Advisor Managed Brokerage"==c&&!d&&!e){f=!0;break}}else if(1===b.accounts.length&&(c=b.accounts[0].acctType,d=b.accounts[0].isPWM,
e=b.accounts[0].isDMA,d||e))c="";"Advisor Managed Brokerage"==c&&(f=!0);return f},hasMA:function(){var b=a(".account-selector--accounts-wrapper").find(".account-selector--tab.js-account");return 0<b.filter(function(c){return"15"==a(b[c]).data("sub-acct-type-code")}).length},onSelectedAccountChange:function(e,f,j){J.startTimer();e=/^[a-zA-Z]+$/.test(f.groupId)?f.groupId:null;window.CURRENT_GROUP_ID=e||null;if(f.accounts&&1===f.accounts.length){var k=f.accounts[0];e=k.registrationCode||null;var n=k.registrationType||
null,q=null,r;n&&(r=n.indexOf(":"),-1!=r&&(n=n.substring(0,r)));if(e||n)q=e+"|"+n;window.CURRENT_ACCOUNT_REG_CODE=q}else window.CURRENT_ACCOUNT_REG_CODE=null;0<a(".account-selector--main-wrapper").find(".js-fullview-error-action").length&&1>a(".account-selector--close-control").find(".account-selector--error-icon").length&&0<a(".port-nav.account-selector--hide").length?a(".account-selector-close-control--link").after('<div class="account-selector--error-icon" title="Action Required"><span class="off-screen">Error: </span></div>'):
1>a(".account-selector--main-wrapper").find(".js-fullview-error-action").length&&a(".account-selector--close-control").find(".account-selector--error-icon").remove();(e=this.isManagedAccountsOnly(f))&&setTimeout(function(){a("#hasHubInfoTxt")&&"nosHubInfo"==a("#noHubInfoTxt").text()||a("#hasMAHub")&&"no"==a("#hasMAHub").text()?(task=new m({onSuccess:function(b){if(b&&b.customerSpokeRepInfo&&b.customerSpokeRepInfo.phoneNumber){var c=b.customerSpokeRepInfo.phoneNumber,d=c.replace(/x.*/,""),e="tel:"+
a.trim(d),f=b.customerSpokeRepInfo.firstName+" "+b.customerSpokeRepInfo.lastName,d=b.customerSpokeRepInfo.preferredName;null!=d&&(void 0!=d&&""!=d)&&(f=d+" "+b.customerSpokeRepInfo.lastName);var g=!1;a("#rep01")&&""!=a("#rep01").text()&&(d=a("#rep01").text(),d=a.trim(d),null!=d&&null!=f&&f.toLowerCase()==d.toLowerCase()&&(g=!0));var h=function(){if(g)a("#ma-hub-rep-info").css("display","block"),a("#hub-rep-info").css("display","none"),a("#hubFAQ").css("display","block"),a("#spokeFAQ").css("display",
"none");else{a("#spokeRepNumber").text(c);a("#spokeRepNumber").attr("href",e);var d=b.customerSpokeRepInfo.title;a("#spokeRepName").text(f);a("#spokeOnlyRepName").text(f);a("#spokeRepTitle").text(d);a("hubOnlyTitle")?a("#hubOnlyTitle").css("display","none"):a("#hubOnlyTitle").css("display","block");a("#spokeOnlyTitle")&&a("#spokeOnlyTitle").removeAttr("style");a("#spoke-rep-info").removeAttr("style");a("#ma-hub-rep-info").css("display","block");a("#hub-rep-info").css("display","none");a("#hubFAQ").css("display",
"none");a("#spokeFAQ").css("display","block")}};if(!window.toggleMap.VAPModeEnabled&&window.toggleMap.relbklSallyFeature&&0==a("#hasMAHub").length){var j=function(){var b=a("#hubOnlyTitle").data("cp-hub-rep-name");b&&(g=f.toLowerCase()==b.toLowerCase());a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts")&&(h(),""===a("#spokeRepNumber").text()&&s.$("#hubOnlyTitle").css("display","block"))},d=a(".relationship-sally-ngapp--container");0<d.length&&a(".js-ma-hub-rep-info--existing--pcgprem").before(d.detach());
a("#hubOnlyTitle").data("rb-api-returned")?j():(a(document).off("RELATIONSHIP_HUB_SPOKE"),a(document).on("RELATIONSHIP_HUB_SPOKE",function(){j()}))}else h()}else a("#hasMAHub")&&"no"==a("#hasMAHub").text()?a(".relationship-wrapper").hide():!window.toggleMap.VAPModeEnabled&&(window.toggleMap.relbklSallyFeature&&0==a("#hasMAHub").length)&&(a("#hubOnlyTitle").data("rb-api-returned")?a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts")&&""===a("#spokeRepNumber").text()&&a("#hubOnlyTitle").css("display",
"block"):(a(document).off("RELATIONSHIP_HUB_SPOKE"),a(document).on("RELATIONSHIP_HUB_SPOKE",function(){a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts")&&""===a("#spokeRepNumber").text()&&s.$("#hubOnlyTitle").css("display","block")})))},onError:function(){!window.toggleMap.VAPModeEnabled&&(window.toggleMap.relbklSallyFeature&&0==a("#hasMAHub").length)&&(a("#hubOnlyTitle").data("rb-api-returned")?a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts")&&""===
a("#spokeRepNumber").text()&&a("#hubOnlyTitle").css("display","block"):(a(document).off("RELATIONSHIP_HUB_SPOKE"),a(document).on("RELATIONSHIP_HUB_SPOKE",function(){a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts")&&""===a("#spokeRepNumber").text()&&s.$("#hubOnlyTitle").css("display","block")})))}}),task.run()):""!==a("#spokeRepNumber").text()?(a("#spokeOnlyTitle").css("display","block"),a("#spoke-rep-info").css("display","block"),a("#ma-hub-rep-info").css("display","block"),
a("#hub-rep-info").css("display","none")):a("#hasMAHub")&&"no"==a("#hasMAHub").text()&&a(".relationship-wrapper").hide()},1E3);a("#hubOnlyTitleForOnlyDC").css("display","none");a("#hub-rep-info-for-only-dc").css("display","none");a("#hubOnlyTitleForOnlyHSA").css("display","none");a("#hub-rep-info-for-only-hsa").css("display","none");f.portfolio||e?(e&&""!==a("#spokeRepNumber").text()?(a("#hubOnlyTitle").css("display","none"),a("#hub-rep-info").css("display","none"),a("#spokeOnlyTitle").css("display",
"block"),a("#spoke-rep-info").css("display","block")):(a("#spokeOnlyTitle").css("display","none"),a("#spoke-rep-info").css("display","none"),a("#hubOnlyTitle").css("display","block"),a("#ma-hub-rep-info").css("display","none"),a("#hub-rep-info").css("display","block")),!window.toggleMap.VAPModeEnabled&&(window.toggleMap.relbklSallyFeature&&0==a("#hasMAHub").length)&&(a(".account-selector-wrapper .js-selected").data("isonlymanagedaccounts",e),!a("#hubOnlyTitle").data("rb-api-returned")&&!(e&&""!==
a("#spokeRepNumber").text())&&(a("#hubOnlyTitle").css("display","none"),a(".account-selector-wrapper .js-selected").data("istriggerhubspoke",!0)),e=a(".relationship-sally-ngapp--container"),0<e.length&&a(".js-hub-rep-info--existing--pcgprem").before(e.detach())),a(".relationship-wrapper").show()):1===f.accounts.length&&h.isDCAccount(f.accounts[0])?(a(".relationship-wrapper").hide(),a("#spokeOnlyTitle").css("display","none"),a("#spoke-rep-info").css("display","none"),a("#hubOnlyTitle").css("display",
"none"),a("#ma-hub-rep-info").css("display","none"),a("#hub-rep-info").css("display","none"),a("#hubOnlyTitleForOnlyDC").css("display","block"),a("#hub-rep-info-for-only-dc").css("display","block"),a(".relationship-wrapper").show()):1===f.accounts.length&&h.isHSAAccount(f.accounts[0])?(a(".relationship-wrapper").hide(),a("#spokeOnlyTitle").css("display","none"),a("#spoke-rep-info").css("display","none"),a("#hubOnlyTitle").css("display","none"),a("#ma-hub-rep-info").css("display","none"),a("#hub-rep-info").css("display",
"none"),a("#hubOnlyTitleForOnlyHSA").css("display","block"),a("#hub-rep-info-for-only-hsa").css("display","block"),a(".relationship-wrapper").show()):window.toggleMap.NBRelationshipLinkFeature&&1===f.accounts.length&&window.hasNBRelationship&&!h.isDMAAccount(f.accounts[0])&&!h.isFullViewAccount(f.accounts[0])&&!h.isCreditCardAccount(f.accounts[0])?(a(".relationship-wrapper").hide(),a("#spokeOnlyTitle").css("display","none"),a("#spoke-rep-info").css("display","none"),a("#hubOnlyTitle").css("display",
"none"),a("#ma-hub-rep-info").css("display","none"),a("#hub-rep-info").css("display","none"),a("#hubOnlyTitleForOnlyDC").css("display","block"),a("#hub-rep-info-for-only-dc").css("display","block"),a(".relationship-wrapper").show()):a(".relationship-wrapper").hide();a(window).scrollTop(0);var s=this;this.updatePortfolioTotalTitle(f);n=toggleMap.DIGITAL_RES_MSG;q=c.isFullViewEntitled()&&toggleMap.showFVComingSoonBannerFeature&&!0;r=!a(".js-external-enrollment-detail").data("is-consent-given")&&toggleMap.eMoneyMigrationBanner;
var v=toggleMap.enableASRNotificationToggle&&this.hasMA();if(!s.acctNotificationView&&toggleMap.acctNotificationFeature&&f.portfolio&&!advisor_indicator||q||r||n||v){var w=!1;if(!s.acctNotificationView&&toggleMap.acctNotificationFeature&&f.portfolio&&!advisor_indicator)for(e=0;e<f.accounts.length;e++)if(h.isSPSAccount(f.accounts[e])||h.isNotActiveSPSAccount(f.accounts[e])){w=!0;break}if(w||q||r||n||n||v)e=a("<div>").addClass("acct-notification-container").insertBefore(a(".content-title-left")),s.acctNotificationView=
new I({el:e,isShowSPSAlerts:w,isShowFVComingSoon:q,isShoweMoneyMigrationMsg:r,isShowDigitalResMsg:n,isASRFeatureOn:v}),s.acctNotificationView.refresh()}f.portfolio?a(".acct-notification-container").show():a(".acct-notification-container").hide();this.eventData=f;this.moretabAdapter.setAccountsInfo(f);la="Summary"!=la?la:"Summary";var z=j&&j.tabName||this._getCurrentTabName()||la;la=z;0<=z.indexOf("More ...")&&(z=this.tabs._$currentOpenedTab.data("tab-name"));if(h.hasOneNBAccount(f)&&"Balances"==z)document.location.href=
ca+f.accounts[0].acctNum;else{"Summary"!=z&&a(".positions-mini-context").remove();var y={};if(va&&H===f.accounts[0].acctNum&&!f.portfolio)H=f.accounts[0].acctNum;else{H=f.accounts[0].acctNum;va&&fang.EventBus.publish("CLOSE_DMA");va=!0===envMap.DMA_ENABLED&&h.isSingleDMAAccount(f)&&!f.portfolio;if(this.firstLoad&&f.portfolio)y={domLoaded:!1,routeOptions:j},y.progressObject=(new a.Deferred).resolve();else{if(toggleMap.emoneyFeature&&1===f.accounts.length&&(h.isFullViewLoanAccount(f.accounts[0])||h.isFullViewBankAccount(f.accounts[0])||
h.isFullViewCreditCardAccount(f.accounts[0]))){a("body").addClass("fv-emoney").removeClass("summary activity balance balances positions");var y={domLoaded:!0,routeOptions:j},A="";h.isFullViewLoanAccount(f.accounts[0])?A=24===f.accounts[0].oltxType?"loan":"real estate":h.isFullViewBankAccount(f.accounts[0])?A="bank":h.isFullViewCreditCardAccount(f.accounts[0])&&(A="credit card");A={url:envMap.DIGITAL_APP_URL+"emoney/home",accountTypeName:A};k=_.template(N);A=k(A);s.$("#display-layout").find(".fv-message--container").remove();
s.$("#display-layout").find(".tabs.more-tab--tabs").hide();s.$("#display-layout").append(A);a(".page-content-title.content-title-left").show();A=f.accounts[0].acctNum;b.history.navigate(z.toLowerCase()+"/"+A,{trigger:!1});return}if(!dpcsCreditCardTabFeatureEnabled&&1===f.accounts.length&&h.hasOnlyFVCCAccounts(f)){a("body").addClass("dma-dashboard fv-credit").removeClass("summary activity balance balances positions");y={domLoaded:!0,routeOptions:j};A={url:envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p"};
k=_.template(V);A=k(A);s.$("#display-layout").find(".fv-message--container").remove();s.$("#display-layout").find(".tabs.more-tab--tabs").hide();s.$("#display-layout").append(A);a(".page-content-title.content-title-left").show();A=a.map(f.accounts,function(a){return a.acctNum}).join(",");b.history.navigate(z.toLowerCase()+"/"+A,{trigger:!1});return}if(h.hasOnlyDigitalCurrencyAccounts(f)){k=_.template(P);A=k();s.$("#display-layout").find(".fv-message--container").remove();s.$("#display-layout").find(".tabs.more-tab--tabs").hide();
s.$("#display-layout").append(A);a(".page-content-title.content-title-left").show();A=a.map(f.accounts,function(a){return a.acctNum}).join(",");b.history.navigate(z.toLowerCase()+"/"+A,{trigger:!1});return}if(1<f.accounts.length&&("CC"===f.groupId||"FV"===f.groupId||"LO"===f.groupId||"RE"===f.groupId||"DC"===f.groupId)){k=_.template(W);for(e=n=j=0;e<f.accounts.length;e++)20===f.accounts[e].oltxType&&(j++,A=f.accounts[e].acctNum),h.isFullViewAccount(f.accounts[e])&&n++;A={creditCard:{selected:0<j,
url:"/ftgw/fbc/ofcashmgmt/cashMgmtApp?GOTO=CCT"+(1===j?"&ACCOUNT="+A:"")},fullview:{selected:0<n,url:envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p"}};toggleMap.emoneyFeature&&(A.fullview.url=envMap.DIGITAL_APP_URL+"emoney/home");A=k(A);s.$("#display-layout").find(".fv-message--container").remove();s.$("#display-layout").find(".tabs.more-tab--tabs").hide();s.$("#display-layout").append(A);return}va?(console.log("load DMA dashboard",f.accounts[0].acctNum),this.firstLoad=!1,require("app").getInstance().footNote.switchTab("DMA"),
a("body").addClass("dma-dashboard").removeClass("summary activity balance balances positions"),y={domLoaded:!0,routeOptions:j},S.abortPendingAjaxObj(),l.hideLoading(),toggleMap.newFGoDashboardFeature||toggleMap.PPADashboardFeature&&k.isPPA?(window.Highcharts&&(window.oceHighcharts=window.Highcharts,delete window.Highcharts),A=envMap.FGO_URL+"dashboard?replaceStaticFilePath=true",k.isPPA&&toggleMap.PPADashboardFeature&&(A=envMap.DPCS_URL+"digitaladvisor/dashboard?replaceStaticFilePath=true"),y.progressObject=
a.ajax({url:A,type:"GET",xhrFields:{withCredentials:!0},dataType:"html",success:function(a){a=a.replace(/<base href=".*"/,'<base href="/ftgw/fbc/oftop/portfolio"');s.$("#display-layout").html(a);window.fang&&fang.EventBus&&fang.EventBus.publish("dma:route",{account:f.accounts[0].acctNum,page:"dashboard"})},error:function(){s.$("#display-layout").html("Sorry, DMA dashboard temporary unavailable.")},complete:function(){g.publishEvent("LOADED_DMA",{acctNum:f.accounts[0].acctNum})}}),window.HYB_ACCT_DATA=
{AMC:p.get("AMC"),account:f.accounts[0].acctNum}):(window.oceHighcharts&&(window.Highcharts=window.oceHighcharts),y.progressObject=a.ajax({url:envMap.DMA_URL+"dashboard",data:{envMap:JSON.stringify({DMA_URL:envMap.DMA_URL,DMA_STATIC_URL:envMap.DMA_STATIC_URL,DMA_PROTECTED_URL:envMap.DMA_PROTECTED_URL}),account:f.accounts[0].acctNum,AMC:p.get("AMC")},type:"POST",xhrFields:{withCredentials:!0},dataType:"html",success:function(a){s.$("#display-layout").html(a);window.fang&&fang.EventBus&&fang.EventBus.publish("dma:route",
{account:f.accounts[0].acctNum,page:"dashboard"})},error:function(){s.$("#display-layout").html("Sorry, DMA dashboard temporary unavailable.")},complete:function(){g.publishEvent("LOADED_DMA",{acctNum:f.accounts[0].acctNum})}}))):(a("body").removeClass("dma-dashboard"),y={domLoaded:!0,routeOptions:j},S.abortPendingAjaxObj(),l.showLoading("Loading...",!0,500),"Positions"==z&&window.positionLoadingTimestamp&&(window.positionLoadingTimestamp.loadPositionDataTimestamp=(new Date).getTime()),h.hasOnlyFVAccounts(f)&&
("Positions"!==z&&"Activity"!==z&&"Activity & Orders"!==z)&&(z="Positions"),y.progressObject=a.ajax({url:"/ftgw/fbc/oftop/portfolioBody",type:"POST",xhrFields:{withCredentials:!0},data:this.buildPortfolioBodyParams(f,z),dataType:"html",success:function(b){var c=a("<div>"+b+"</div>"),d=c.find(".tabs--selected").data("tab-name")||z;if("Summary"==d){F7.EventBus.trigger("allCards:destroy");b=c.filter("script");var e=c.find(".js-style-region").remove(),f=c.find(".js-dc-deminimis-alerts-info-banner-layout").remove(),
g=c.find(".js-welcome-card-layout").remove(),h=c.find(".js-narrative-summary-layout").remove(),j=c.find(".js-card-layout").remove(),k=c.find(".js-disclosures").remove();s.$("#display-layout").replaceWith(c.html());0<e.length&&(0<a(".js-pzn-style").length&&a(".js-pzn-style").remove(),e=e.find("style").addClass("js-pzn-style"),a("head").append(e));s.$el.find(".js-dc-deminimis-alerts-info-banner-layout").remove();s.$el.find(".narrative-card--layout").before(f);s.$el.find(".js-welcome-card-layout").remove();
s.$el.find(".narrative-card--layout").before(g);s.$el.find(".js-narrative-summary-layout").remove();s.$el.find(".narrative-card--layout").append(h);s.$el.find(".js-centerWellCard-card-layout").remove();s.$el.find(".card-layout").append(j.html());s.$el.find(".js-mobile-email-region").remove();e=c.find(".js-mobile-email-region").remove();s.$el.find(".card-layout").append(e);s.$el.find(".js-ledger-region-totalCashAvailableToWithdraw").remove();c=c.find(".js-ledger-region-totalCashAvailableToWithdraw").remove();
s.$el.find(".card-layout").append(c);0<k.length&&(a("#legal-footer--accounts").find("p.js-pzn-discloser").remove(),k.find("p").addClass("js-pzn-discloser"),a("#legal-footer--accounts").append(k.html()));s.$el.append(b);if("function"===typeof window.onContentMeasurementLoaded)window.onContentMeasurementLoaded()}else s.$("#display-layout").replaceWith(b);"Positions"==d&&(a(".positions-content").empty(),window.positionLoadingTimestamp&&(window.positionLoadingTimestamp.renderPositionTimestamp=(new Date).getTime()))}}))}y.progressObject&&
y.progressObject.done(function(){a(".info-flyout--trigger").show();if(!va){var b=s._getCurrentTabName();if("Performance"==z&&s.$(".more-tab--tab[data-tab-name='Performance'] .tabs--tab-link").attr("href")&&"#tabContentPerformance"!=s.$(".more-tab--tab[data-tab-name='Performance'] .tabs--tab-link").attr("href"))if(a(".performance-container").data("is-perf-redesign")&&y.routeOptions&&"overview"===y.routeOptions.section)s.$(".more-tab--tab[data-tab-name='Performance'] .tabs--tab-link").attr("href","#tabContentPerformance");
else{document.location.href=s.$(".more-tab--tab[data-tab-name='Performance'] .tabs--tab-link").attr("href");return}"Balances"==b&&h.hasOneNBAccount(f)?document.location.href=s.$(".tabs--selected .tabs--tab-link").attr("href"):(s.buildTab(),s.firstLoad&&(g.publishEvent(d.EVENTS.PAGE_LOADED,y.routeOptions),s.firstLoad=!1),dpcsCreditCardTabFeatureEnabled&&h.hasOnlyFVCCAccounts(f)&&(z="Activity"),h.hasOnlyFVBankAccounts(f)&&(z="Activity"),h.hasOnlyLoansAccounts(f)&&(z="Activity"),s.moretabAdapter.openTab(z,
s.buildTabContext(f,y)))}}).always(function(){"Positions"!=s._getCurrentTabName()&&("Activity"!=s._getCurrentTabName()&&"Balances"!=s._getCurrentTabName())&&l.hideLoading()});a("body").data("firstLoad",s.firstLoad)}}},clickCoinbaseLink:function(){this.openLeaveFidPopup()},openLeaveFidPopup:function(){this.$leaveFidPopup||(this.$leaveFidPopup=a(_.template(U)()),this.$leaveFidPopup.appendTo(this.$el),this.$leaveFidPopup.ModalPopup());this.$leaveFidPopup.ModalPopup("open")},closeLeaveFidPopup:function(){this.$leaveFidPopup.ModalPopup("close")},
openCoinbasePage:function(){window.open("https://www.coinbase.com/buy","_blank");this.$leaveFidPopup.ModalPopup("close")},buildTab:function(){this.destoryTabs();this.initTabs()},_displayNonFidelityAccountFullViewMsg:function(b){var c="";if(!toggleMap.DPCSAccountActivityFVEntitledFeature){var d=envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p";1<b.accounts.length?c="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We are unable to provide current activity information for your non-Fidelity accounts. You can see this information in</b><a href='"+
d+"'> Full View</a></div></div>":1==b.accounts.length&&(c="<div class='tabs--container-paddedWrapper'><div class='view-in-classic-msg balances-page-unsupported'><b>We are unable to provide current activity information for your non-Fidelity account. You can see this information in</b><a href='"+d+"'> Full View</a></div></div>")}a(".activity-content").html(c)},fullViewRouteToClassic:function(a,b){var c=b?b:this.$(".more-tab--tab.tabs--selected").data("tab-name");return a.portfolio&&1==a.accounts.length&&
("FV Investment Account"==a.accounts[0].acctType||"FV Bank Account"==a.accounts[0].acctType)||a&&0<a.accounts.length&&!this.disableRoute&&"Activity"==c&&h.hasOnlyFVAccounts(a)&&!h.hasOnlyLoansAccounts(a)&&!h.hasOnlyFVCCAccounts(a)&&!h.hasOnlyDigitalCurrencyAccounts(a)?(this._displayNonFidelityAccountFullViewMsg(a),!0):!1},render:function(){e.prototype.render.apply(this,arguments);return this},initTabs:function(){var b=a("#moretab-area");this.tabs&&this.destoryTabs();var c=a(".more-tab--tab.tabs--selected").index()+
1,c=1<c?c:1;b.removeClass("hidden");this.tabs=new k(b,{ignoreHiddenTabs:!1,tabClassSelector:".more-tab--tab",containerClassSelector:".more-tab--tab-container",selected:c});this.moretabAdapter.setMoreTabInstance(this.tabs);var d=b.find(".tabs--tab-link");this.tabs.updateTabLinkTarget=function(){b.find("."+this._moreListAClass).each(function(a,b){if(d[a+1]){var c=d[a+1].href||"";-1!=c.indexOf("#")&&(c=c.substr(c.lastIndexOf("#")));b.href=c}})};this.tabs.updateTabLinkTarget();this.tabs._createDynamicTabs=
function(){k.prototype._createDynamicTabs.apply(this,arguments);this.updateTabLinkTarget()}},gotoClassic:function(b){var c=a(b.currentTarget),d=this.getAppContext().getCurrentAccounts();b=null;null!=d&&0<d.length&&(b=d[0]);b||(b=a(".port-summary-container .account_selector .account_category .acct .account-number").html());if(b||c.hasClass("classic-analysis"))c.hasClass("classic-balances")?(c="/ftgw/fbc/ofaccounts/BrokerageBalances?ACCOUNT="+b,-1!=this.eventData.accounts[0].acctType.indexOf("FILI Account")?
c="/ftgw/fbc/ofaccounts/annuityBalances?ACCOUNT="+b:"NetBenefit Account"==this.eventData.accounts[0].acctType?c=ca+b:"Stock Plans"==this.eventData.accounts[0].acctType&&(c=this.eventData.accounts[0].urlName.replace("&Ref_at=summary_nm","")),document.location.href=c+"&Ref_at=ng"):c.hasClass("classic-analysis")?(c=R,document.location.href=c):c.hasClass("classic-orders")?document.location.href="/ftgw/fbc/oftrade/orderStatus?ACCOUNT="+b+"&Ref_at=ng":c.hasClass("classic-pending-transfers")?(c=Z+b,document.location.href=
c+"&Ref_at=ng"):c.hasClass("classic-history")&&(c="/ftgw/fbc/ofaccounts/brokerageAccountHistory?ACCOUNT="+b,-1!=this.eventData.accounts[0].acctType.indexOf("FILI Account")&&-1==this.eventData.accounts[0].acctType.indexOf("OCI")?c="/ftgw/fbc/ofaccounts/annuityHistory?ACCOUNT="+b:"NetBenefit Account"==this.eventData.accounts[0].acctType?c=ea+b:"Stock Plans"==this.eventData.accounts[0].acctType&&(c=this.eventData.accounts[0].urlName.replace("&Ref_at=summary_nm",""),-1!=this.eventData.accounts[0].urlName.indexOf("SPPSummary")&&
(c=c.replace("summary","history").replace("SPPSummary","SPPHistory")),-1!=this.eventData.accounts[0].urlName.indexOf("spsGrantSummary")&&(c=c.replace("summary","history").replace("spsGrantSummary","spsHistory")+"&DAYS_OF=10"),-1!=this.eventData.accounts[0].urlName.indexOf("rsaPlanSummary")&&(c=c.replace("summary","history").replace("rsaPlanSummary","spsHistory")+"&DAYS_OF=10")),document.location.href=c+"&Ref_at=ng")},fvRefreshedHandler:function(){var a=this;g.subscribeEvent("FV_ACCOUNTS_REFRESH_FINISHED_REFRESH_ACCOUNT_SELECTOR",
function(b){a.$(".SID-quad-allAccValue").html(b.portfolioTotalNewVlueDisplay)})},destoryTabs:function(){this.tabs&&(this.tabs.$el.off().find(".tabs--tab-link,.tabs--link,.tabs--tab,.tabs--nav,.tabs--container").off(),this.tabs=null)},_goToFullviewClassicPage:function(){document.location.href=envMap.SCS_URL_VALUE+"/customeronly/fullview.shtml?bar=p"},updatePortfolioTotalTitle:function(b){a(".account-registration-type").hide();a(".account-registration-type").text("");if(b.accounts){var c;a("#spoke-rep-info").data("allAcct",
!1);b.portfolio?(c="All Accounts",a("#spoke-rep-info").data("allAcct",!0)):null!=b.groupId?1==b.accounts.length?(c=b.accounts[0].acctName,a(".account-registration-type").text(b.accounts[0].registrationType),a(".account-registration-type").show()):c=b.acctName:1===b.accounts.length?(c=b.accounts[0].acctName,a(".account-registration-type").text(b.accounts[0].registrationType),a(".account-registration-type").show()):c=2===b.accounts.length?a(b.accounts).map(function(a,b){return b.acctName}).get().join(" & "):
"Multiple Accounts";a(".account-title").text(c);a(".account-title").html(a(".account-title").html().replace("\u00ae","<sup>&reg;</sup>"))}},clickActivityLink:function(){this.$("[href='#tabContentActivity']:first").trigger("click")},clickPendingTransferLink:function(b){b.preventDefault();b=a.map(p.get("selectedAccounts").accounts,function(a){return a.acctNum}).join(",");this.routeToActivityTab(b,"pending")},clickDescriptionTransferLink:function(b){b.preventDefault();b=a(b.currentTarget).parent().attr("data-account-number");
this.routeToActivityTab(b,"pending")},clickRecentTransactionsViewAllLink:function(b){b.preventDefault();b=a.map(p.get("selectedAccounts").accounts,function(a){return a.acctNum}).join(",");this.routeToActivityTab(b,"history")},clickRecentTransactionsDescriptionLink:function(b){b.preventDefault();b=a(b.currentTarget).parent().attr("data-account-number");this.routeToActivityTab(b,"history")},clickPositionsLink:function(){this.$("[href='#tabContentPositions']:first").trigger("click");fang.EventBus.publish("positionsTabClicked")},
clickActivityLinkToTab:function(c){c.preventDefault();c=a(c.currentTarget);var d=a.trim(c.parent().prev().text());"Order"==c.parent().next().find(".activity-card--grid-value-type").text()?b.history.navigate("orders/"+d,{trigger:!0}):b.history.navigate("pending/"+d,{trigger:!0})},submitMessageLink:function(b){var c=a(b.currentTarget).attr("href");window.open(c,"newwindow","height=410,width=740");b.stopPropagation();return!1},handleCardToggle:function(b){b=a(b.currentTarget);"simplified"==b.data("card-toggle-value")?
b.data("card-toggle-value","current"):b.data("card-toggle-value","simplified");this.moretabAdapter.openTab("Summary",this.buildTabContext(this.moretabAdapter.accountsInfo,{}),!0);g.publishEvent("STACKEDCARDS_STATE_UPDATE")},_getCurrentTab:function(){return this.$(".tabs .tab.active")},_getCurrentTabName:function(){return this.$(".tabs--selected").data("tab-name")},_getTabContent:function(a){return this.$(".pane."+a+"-tab-content")},routeToActivityTab:function(a,b){g.publishEvent("SELECT_ACCOUNTS",
{accounts:a,groups:null,routeOptions:{tabName:"Activity",section:b}})},goToEmoneyClient:function(b){b.preventDefault();b=a(b.currentTarget).attr("href");confirm("You are now leaving Fidelity.com for a website owned and operated by eMoney Advisor, LLC, a Fidelity affiliate, in order for you to access and use the eMoney Advisor Service. This Service is made available to you as a Fidelity customer at no additional charge and is subject to certain limitations and restrictions. Please review the Terms of Service carefully. Fidelity may terminate your access to the Service at any time.\n\nPlease note that the Terms of Service, Privacy Policy and Security description applicable to your use of the eMoney Advisor Service may differ from those applicable to your experience on Fidelity.com. Note that your Fidelity log-in credentials provide access to the eMoney Advisor Service via Fidelity.com. Notwithstanding anything you may read in the eMoney Advisor Service, you will not be issued a second set of log-in credentials to access the Service, and the eMoney Advisor Service presented to you via Fidelity.com will be limited to the experience supported specifically for Fidelity customers.\n\nIMPORTANT: If you are accessing the eMoney Advisor Service via your mobile device, your experience will be limited and certain features of the Service may not be available. To access all capabilities and review all disclosures, please log onto Fidelity.com and access the eMoney Advisor Service desktop site via your personal computer.")&&
window.open(b)}})});define("views/session-timeout-view",["jquery","views/base-view"],function(a,b){return b.extend({events:{"click .login-button":"redirectToLogin","click .session-timeout-close":"sessionTimeoutClose"},render:function(){location.reload();return this},redirectToLogin:function(){location.reload()},sessionTimeoutClose:function(){a("#session-timeout-skin").hide();a(".overlay-background").hide()}})});
define("views/exit-feedback-view",["jquery","views/base-view","util/constants","components/basepopup"],function(a,b,g){var c=envMap.TEST_VPN_URL+"/favicon.ico";return b.extend({events:{"OpenDialog .base-popup":"onOpenDialog","CloseDialog .base-popup":"onCloseDialog"},initialize:function(){this.exitPopup=this.$("#exit-preview").ActionBarPopup();this.feedackPopup=this.$("#feedback").BasePopup();this._resetVPNData();a(document).bind(g.EVENTS.EXIT_PREVIEW_POPUP_OPEN,_.bind(this._existPopupOpen,this));
a(document).bind(g.EVENTS.FEEDBACK_POPUP_OPEN,_.bind(this._feedbackPopupOpen,this));a(document).bind(g.EVENTS.POPUP_CLOSE,_.bind(this._popupClose,this));a(document).bind(g.EVENTS.TEST_VPN,_.bind(this._testOnVPN,this));var b=this.$(".popup-exit-preview--close-btn");b.attr({role:"button",tabindex:"0"});new FID.Accessibility.ButtonRole(b[0])},onOpenDialog:function(b){b.failed||a(".overlay-background").show()},onCloseDialog:function(b){a(b.target).hasClass("popup-exit-preview")&&a(".action-bar--item-exitpreview>a").focus();
a(".overlay-background").hide()},render:function(){return this},_existPopupOpen:function(){this.exitPopup.BasePopup("open");this.$(".popup-exit-preview--close-btn").focus()},_feedbackPopupOpen:function(){this.feedackPopup.BasePopup("open")},_popupClose:function(){this.exitPopup.ModalPopup("close");this.feedackPopup.ModalPopup("close")},_testOnVPN:function(){var b=this;this._resetVPNData();a("<img/>").load(function(){b.testVPNData.isOnVPN="ON_VPN";b.testVPNData.ApproachStatus="COMPLETE"}).error(function(){b.testVPNData.isOnVPN=
"NOT_ON_VPN";b.testVPNData.ApproachStatus="COMPLETE"}).attr("src",c)},_resetVPNData:function(){this.testVPNData={isOnVPN:"NOT_ON_VPN",ApproachStatus:"APPROACHING"}},getVPNResault:function(){return this.testVPNData}})});
define("views/forsee-survey-view",["jquery","views/base-view","models/account-context-model","util/constants","views/exit-feedback-view"],function(a,b,g,c){return b.extend({events:{"click .discussion-board-link":"discussionBoardRedirect","click .no-thanks-button":"returnToSummary","click .feedback-win-trigger":"feedBackWinPopup","click .survey-close":"surveyClose"},initialize:function(){a(".base-popup--employee-content").hide();g.isFidEmployee()?a(".popup-feedback--discussion-board-btn").show():a(".popup-feedback--discussion-board-btn").hide()},
returnToSummary:function(b){b.originalEvent||(window.location.href=a(b.currentTarget).attr("href"))},feedBackWinPopup:function(){g.isFidEmployee()?(this.resault={},a(window).scrollTop(0),a(document).trigger(c.EVENTS.POPUP_CLOSE),a("#feedback .take-survey-link").trigger("click"),a(document).trigger(c.EVENTS.TEST_VPN)):a("#feedback .take-survey-link").trigger("click")},surveyClose:function(){a(document).trigger(c.EVENTS.POPUP_CLOSE)},discussionBoardRedirect:function(){var a=this,b=a.getAppContext().exitFeedback.getVPNResault();
g.isFidEmployee()?"APPROACHING"==b.ApproachStatus?setTimeout(function(){"NOT_ON_VPN"==a.getAppContext().exitFeedback.getVPNResault().isOnVPN?alert("You must be connected to the Fidelity VPN to access the discussion board."):window.open(envMap.SPACE_DISCUSSION_BOARD_URL)},5E3):"APPROACHING"!=b.ApproachStatus&&"ON_VPN"==b.isOnVPN?window.open(envMap.SPACE_DISCUSSION_BOARD_URL):alert("You must be connected to the Fidelity VPN to access the discussion board."):window.open(envMap.FIDLABS_DISCUSSION_BOARD_URL)},
getSelectedTabName:function(){return this.getAppContext().portfolioContent.getSelectedTab()}})});
(function(a){var b=window.FID=window.FID||{},g=b.LegalFooterItem=function(b,e,d,g){e=a(e);var f=a(b);b=e.find(".legal-footer--link");e=e.find(".off-screen");var f=f.find(b.attr("href")),j=this;j.isOpen=f.hasClass("is-open");j.$anchor=b;j.$offscreen=e;j.$content=f;this._openCallBack=d;this._closeCallBack=g;b.on("click",function(a){a.preventDefault();j.toggle.apply(j)})};b.LegalFooterItem.prototype.toggle=function(){this.$content.toggleClass("is-open").toggle();this.$anchor.toggleClass("active");(this.isOpen=
this.$content.hasClass("is-open"))?this._openCallBack&&this._openCallBack(this):this._closeCallBack&&this._closeCallBack(this);0<a(".legal-footer--item-content .is-open").length?a(".legal-footer--item-content").addClass("is-open"):a(".legal-footer--item-content").removeClass("is-open")};b.LegalFooter=function(b){function e(){l._onOpen.apply(l,arguments)}function d(){l._onClose.apply(l,arguments)}var h=a(b);if(!(1>h.length)){this._$domElement=h;for(var f=[],j=a(".legal-footer--item"),k=j.length,l=
this,p=0;p<k;p++)f.push(new g(b,j[p],e,d));this._itemsArray=f;this._$legalFooterContent=h.find(".legal-footer--content")}};b.LegalFooter.prototype._onOpen=function(a){a.$offscreen.html(", hides details. Click to close.");this._previousItem&&this._previousItem.toggle();this._previousItem=a};b.LegalFooter.prototype._onClose=function(a){a.$offscreen.html(", shows details. Click to open.");this._previousItem=null}})(jQuery);define("components/legal-footer",["jquery"],function(a){return function(){return a.FID.LegalFooter}}(this));
define("views/foot-note-view","jquery views/base-view util/constants util/account-utils components/legal-footer models/account-context-model".split(" "),function(a,b,g,c,e,d){var h={"link-glossary":{name:"infowindow",size:"width=700,height=500,left=150,top=150,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"},"link-fdic-pdf":{name:"infowindow",size:"width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"},"link-sca_dics-pdf":{name:"infowindow",
size:"width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"},"web-site-fdic":{name:"infowindow",size:"width=700,height=500,left=150,top=150,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes"}};toggleMap.showCMAUpgradeTabToggle&&(h["popup cma-upgrade-footer-eligible-link"]={name:"infowindow",size:"width=590,height=637,toolbar=yes,menubar=yes,scrollbars=yes,resizable=yes,location=no,directories=no,status=no"});var f={"link-glossary":envMap.ANALYSIS_URL_VALUE+
"/ftgw/analysis/glossary.gps","link-fdic-pdf":envMap.PERSONAL_URL_VALUE+"/accounts/pdf/FDIC.pdf","link-sca_dics-pdf":envMap.PERSONAL_URL_VALUE+"/accounts/pdf/sca_disc.pdf","web-site-fdic":"http://www.FDIC.gov"};toggleMap.showCMAUpgradeTabToggle&&(f["popup cma-upgrade-footer-eligible-link"]="https://accountsetup.fidelity.com/ftgw/aong/aongapp/fdicBankList?type=fcma");g={events:{"click .link-fdic-pdf":"popWin","click .link-sca_dics-pdf":"popWin","click .web-site-fdic":"popWin","click .link-glossary":"popWin"},
initialize:function(){this.activitOrderStatus=this.summaryStatus=this.performanceStatus=!1;this._entitlementLinkHandler();this._doesCreditCardFootNoteDisplay();this._controlWorkplaceFootNote()},render:function(){this.legalFooter=new e(a(this.el));this._hideUnusedFootLink();return this},destory:function(){this.legalFooter&&(this.legalFooter._$domElement.off().find(".legal-footer--link").off(),this.legalFooter=null);this.undelegateEvents()},switchTab:function(b){this._hideUnusedFootLink();(func=this["_show"+
b+"FootLink"])&&func.call(this);this.$(".legal-footer--item-content").removeClass("is-open");this._isLegalFooterLinkShow();"Summary"==b?(a("#legal-footer--accounts").find("p.js-pzn-discloser").show(),0<a(".js-cash-available-to-withdraw:visible").length?this.$(".legal-footer--cash-available-to-withdraw").show():this.$(".legal-footer--cash-available-to-withdraw").hide()):(a("#legal-footer--accounts").find("p.js-pzn-discloser").hide(),this.$(".legal-footer--cash-available-to-withdraw").hide());"Y"==
envMap.PI_PHASE_4_ENABLED_URL&&"Summary"==b?a("#legal-footer--price-improvement").find("p.js-pzn-discloser").show():a("#legal-footer--price-improvement").find("p.js-pzn-discloser").hide()},isPerformanceAvailable:function(a){this.performanceStatus=this.performanceStatus||a;this._controlPerformanceFootNote()},isActivityTabOrderAvailable:function(a){this.activityOrderStatus=a;this._controlActivityOrderFootNote()},isActivityTabAvailable:function(a){a?(this.$(".legal-footer--item.activity-tab:eq(0)").show(),
this.$("#legal-footer--activity---link").addClass("legal-footer--linkShow")):(this.$(".legal-footer--item.activity-tab:eq(0)").hide(),this.$("#legal-footer--activity---link").removeClass("legal-footer--linkShow"));this.$(".legal-footer--item.legal-footer--accounts-link").show()},setActivityTabContent:function(a){this.$("#legal-footer--activity---link").html(a)},_controlPerformanceFootNote:function(){if(this.performanceStatus){var a=d.get("selectedAccounts").accounts&&1===d.get("selectedAccounts").accounts.length&&
c.isDCAccount(d.get("selectedAccounts").accounts[0]),b=this.$(".performance-footer.single-dc"),e=this.$("#legal-footer--performance-single-dc"),f=this.$(".performance-footer.default"),g=this.$("#legal-footer--performance-default");b[a?"show":"hide"]();e[a?"addClass":"removeClass"]("legal-footer--linkShow show-in-print");f[a?"hide":"show"]();g[a?"removeClass":"addClass"]("legal-footer--linkShow show-in-print")}else this.$(".performance-footer").hide(),this.$("#legal-footer--performance-single-dc").removeClass("legal-footer--linkShow").removeClass("show-in-print"),
this.$("#legal-footer--performance-default").removeClass("legal-footer--linkShow").removeClass("show-in-print")},_controlBalanceOvertimeFootNote:function(){var b=a(".js-footer-entitlement-info").data("is-ceentitlement");d.get("selectedAccounts").portfolio&&b?(this.$(".legal-footer--item.summary-tab.balance-overtime-footer").show(),this.$("#legal-footer--balance-overtime").addClass("legal-footer--linkShow").addClass("show-in-print")):(this.$(".legal-footer--item.summary-tab.balance-overtime-footer").hide(),
this.$("#legal-footer--balance-overtime").removeClass("legal-footer--linkShow").removeClass("show-in-print"))},_controlActivityOrderFootNote:function(){this.activityOrderStatus?(this.$(".order-footer").show(),this.$("#legal-footer--activity").addClass("legal-footer--linkShow").addClass("show-in-print")):(this.$(".order-footer").hide(),this.$("#legal-footer--activity").removeClass("legal-footer--linkShow").removeClass("show-in-print"))},setPositionWatchListStatus:function(a){a&&(this.positionWatchListStatus=
a,this._doesPositionsWatchListContentDisplay())},displayFVPositionDisclosure:function(a){a?this.$(".p-fv-disclosure").show():this.$(".p-fv-disclosure").hide()},setChartType:function(a){a&&(this.chartType=a,this._doesAdditionBarChartFootNoteDisplay())},popWin:function(b){b=a(b.currentTarget).attr("class");window.open(f[b],h[b].name,h[b].size);return!1},_hideUnusedFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".summary-accessible").hide();this.$(".watchlist-positions-accessible").hide();
this.$(".legal-footer--link").removeClass("active");this.legalFooter&&(this.legalFooter._previousItem=null);this.$(".legal-footer--item").hide();this.$(".legal-footer--item-content-detail").removeClass("is-open").hide()},_showSummaryFootLink:function(){this.$(".legal-footer--item").each(function(b,c){a(c).hasClass("summary-tab")?a(c).css("display","inline"):a(c).hide()});a.each(a(".js-account"),function(b,c){"Friag Trust Account"==a(c).data("sub-acct-type")&&a(".friag-trust-account-footnote").removeClass("display-none")});
var b=d.get("selectedAccounts").accounts;this.$(".js-other-provider-disclosure").addClass("display-none");for(var c=0;c<b.length;c++){var e=b[c];if(5==e.oltxType){var f=0<e.otherProviderBalance.length;if(e.dcMasterAdministratorInd&&f){this.$(".js-other-provider-disclosure").removeClass("display-none");break}}}0<a(".js-cash-available-to-withdraw:visible").length?this.$(".legal-footer--cash-available-to-withdraw").show():this.$(".legal-footer--cash-available-to-withdraw").hide();this.$(".legal-footer--below-content .summary-tab").show();
this.$(".summary-accessible").show();a(".legal-footer--item.summary-tab").children().map(function(b,c){var d=a(c).attr("href");a(d).addClass("show-in-print")});this._controlPerformanceFootNote();this._controlBalanceOvertimeFootNote();a(".legal-footer--rpm-link").hide();a(".legal-footer--retiree-card-link").hide()},_showDMAFootLink:function(){this.$(".legal-footer--item").each(function(b,c){a(c).hasClass("dma-tab")?a(c).css("display","inline"):a(c).hide()})},_showPositionsFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");
this.$(".legal-footer--item").each(function(b,c){a(c).hasClass("positions-tab")?(a(c).show(),a(a(c).children().attr("href")).addClass("show-in-print")):(a(c).hide(),a(a(c).children().attr("href")).removeClass("show-in-print"))});this.$(".legal-footer--below-content .summary-tab").hide()},_showBalancesFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".legal-footer--item").each(function(b,c){a(c).hasClass("balance-tab")?(a(c).show(),a(a(c).children().attr("href")).addClass("show-in-print")):
(a(c).hide(),a(a(c).children().attr("href")).removeClass("show-in-print"))});this.$(".legal-footer--below-content .summary-tab").hide();(0<a(".balances--table.balances--group-layout").length||0<a(".balances-content .balances-page-unsupported").length)&&this.$(".legal-footer--item.balance-tab:not(.legal-footer--accounts-link)").hide()},_showActivityFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".legal-footer--item").each(function(b,c){a(c).hasClass("activity-tab")?
(a(c).show(),a(a(c).children().attr("href")).addClass("show-in-print")):(a(c).hide(),a(a(c).children().attr("href")).removeClass("show-in-print"))});this.$(".legal-footer--below-content .summary-tab").hide();this.$(".legal-footer--item.legal-footer--accounts-link").show();a(a(".legal-footer--item.legal-footer--accounts-link").children().attr("href")).addClass("show-in-print");this._controlActivityOrderFootNote();""==a.trim(this.$("#legal-footer--activity---link").html())&&this.isActivityTabAvailable(!1)},
_showFeatureFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".legal-footer--below-content .summary-tab").hide();this.$(".legal-footer--item.legal-footer--accounts-link").show();a(a(".legal-footer--item.legal-footer--accounts-link").children().attr("href")).addClass("show-in-print")},_showStatementsFootLink:function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".legal-footer--item").each(function(b,c){var d=a(c),e=d.hasClass("statements-tab"),
f=a(d.children().attr("href"));d[e?"show":"hide"]();f[e?"addClass":"removeClass"]("show-in-print")});this.$(".legal-footer--below-content .summary-tab").hide()},_doesAdditionBarChartFootNoteDisplay:function(){"custombar"==this.chartType?this.$(".addition-bar-chart-footnote").show():this.$(".addition-bar-chart-footnote").hide()},_doesPositionsWatchListContentDisplay:function(){this.positionWatchListStatus?this.$(".watchlist-positions-accessible").show():this.$(".watchlist-positions-accessible").hide()},
_isLegalFooterLinkShow:function(){this.$(".legal-footer--item").each(function(b,c){var d=a(c).find(".legal-footer--link").attr("href");a(c).is(":visible")?a(d).addClass("legal-footer--linkShow"):a(d).removeClass("legal-footer--linkShow")})},_entitlementLinkHandler:function(){var b=a(".js-footer-entitlement-info").attr("data-atp-entitlement"),c=a(".js-footer-entitlement-info").attr("data-nb-entitlement"),d=a(".js-footer-entitlement-info").attr("data-ic-entitlement");"true"===b&&a(".js-footer-atp-link").removeClass("display-none");
"true"===c&&a(".js-footer-nb-link").removeClass("display-none");"true"===d&&a(".js-footer-ic-link").removeClass("display-none");("true"===c||"true"===d)&&"true"===b&&a(".js-footer-atp-stash").removeClass("display-none");"true"===c&&"true"===d&&a(".js-footer-nb-stash").removeClass("display-none")},_doesCreditCardFootNoteDisplay:function(){0<d.getCreditCardAccounts().length?this.$(".credit-card-discloure").show():this.$(".credit-card-discloure").hide()},controlNQSDBFootNote:function(){d.getPortfolio().hasNQSDBAndNQDCAccount?
this.$(".legal-footer--nqsdb-nqdcaccount-footnote").removeClass("display-none"):this.$(".legal-footer--nqsdb-nqdcaccount-footnote").addClass("display-none")},_controlWorkplaceFootNote:function(){var a=d.getDCPlanId();0<a.length?(a=a[0].split("AS OF"),this.$(".workplace-discloure").append(" ["),this.$(".workplace-discloure").append(a[1].trim()),this.$(".workplace-discloure").append("]"),this.$(".workplace-discloure").show()):this.$(".workplace-discloure").hide()}};toggleMap.showCMAUpgradeTabToggle&&
(g.events["click .cma-upgrade-footer-eligible-link"]="popWin",g._showUpgradeFootLink=function(){a(".legal-footer--item-content-detail").removeClass("show-in-print");this.$(".legal-footer--item.legal-footer--cma-link").show();a(a(".legal-footer--item.legal-footer--cma-link").children().attr("href")).addClass("show-in-print")});return b.extend(g)});
define("views/relationship-view",["jquery","views/base-view","components/basepopup","tasks/customer-spoke-info-task"],function(a,b,g,c){var e;return b.extend({events:{"click .relationships--representative-name":"toggleRelationshipPopup","click .relationships--card-representative":"toggleRelationshipPopup","click .base-popup--close-button":"closePopup","click .relationship_rep-bio-link":"repBioPopup"},initialize:function(){var b=this;"function"===typeof ButtonRole&&(b.relationshipCard=new ButtonRole(b.$(".relationships--card-representative")),
b.relationshipCloseButton=new ButtonRole(b.$(".base-popup--close-button")));b.relationshipPopup=this.$(".popup-relationship").BasePopup();b.setRepBioLink();b.relationshipPopup.on(g.Events.CloseDialog,function(){b.$(".relationships--card-representative").focus()});a(document).on("touchstart click keyup",function(a){b._closeRelationshipPopup(a)});if(!window.toggleMap.VAPModeEnabled&&window.toggleMap.relbklSallyFeature&&0<b.$(".js-consultant-attention").length){b.$("#hubOnlyTitle").css("display","none");
a(document).off("RELATIONSHIP_WRAPPER");a(document).on("RELATIONSHIP_WRAPPER",function(c,e){b.$("#hubOnlyTitle").data("rb-api-returned",!0);var g=b.$(".js-consultant-attention"),h=b.$(".js-attention-heading"),p=b.$(".relationships--single-line-group-container");e&&"Y"===e.inScope?(e.generalPhoto&&(h="url("+e.generalPhoto+")",e.photoEndpoint&&(h="url("+e.photoEndpoint+"), "+h),a("<span style='background-image:"+h+"'></span>").addClass("relationships--advisor-image-border").insertAfter(g.parent())),
$rsNewAdvisorNameChild=g.children(".relationships--representative-name"),$rsNewAdvisorNameChild.text($rsNewAdvisorNameChild.text()+" "+e.advisorFullName),b.$("#hubOnlyTitle").data("cp-hub-rep-name",e.advisorFullName),0<p.length?(p.removeClass("relationships--single-line-group-container").addClass("relationships--representative-group-container"),p.append(g.remove())):b.$(".js-consultant-attention + a.relationships--representative-name").hide(),b.$(".js-attention-heading + span.relationships--popup-heading").hide()):
(g.css("display","none"),h.css("display","none"),b.$(".relationship-sally-ngapp--container").css("display","none"),b.$(".js-hub-rep-info--existing--pcgprem").css("display","block"),b.$(".js-hub-rep-info--existing--secondary-info").css("display","block"),b.$(".js-ma-hub-rep-info--existing--pcgprem").css("display","block"));g=a(".account-selector-wrapper .js-selected");g.hasClass("js-portfolio")?b.$("#hubOnlyTitle").css("display","block"):g.data("isonlymanagedaccounts")&&g.data("istriggerhubspoke")&&
a(document).triggerHandler("RELATIONSHIP_HUB_SPOKE")});var c=b.$(".relationship-sally-ngapp--container");c.length||(c=a("<span class='relationships--multi-line clearfix'></span>").addClass("relationship-sally-ngapp--container"),c.insertBefore(b.$(".js-hub-rep-info--existing--pcgprem")),a.ajax({url:window.envMap.DIGITAL_CONTENT_URL+"client-relationship/home",type:"GET",xhrFields:{withCredentials:!0},success:function(a){b.$(".relationship-sally-ngapp--container").html(a)},error:function(){a(document).triggerHandler("RELATIONSHIP_WRAPPER")}}))}},
_closeRelationshipPopup:function(b){0===a(b.target).closest(this.relationshipPopup).length&&this.relationshipPopup.BasePopup("close")},toggleRelationshipPopup:function(b){var g=a(b.currentTarget).data("iswi"),f=a(b.currentTarget).data("ishsa")||!1;b.target;b.preventDefault();if(f)a(b.currentTarget).hasClass("relationships--popup-benefits-hsa")?(this.relationshipPopup.BasePopup("toggle"),this.$(".base-popup--close-button").focus()):window.location.href=envMap.HSA_OVERVIEW_NETBENEFITS_URL;else if(void 0!=
g&&null!=g&&g){if(a(b.currentTarget).hasClass("relationships--card-representative"))return this;window.location.href=envMap.NETBENEFITS_URL}else{var j=this;"block"==a("#hubOnlyTitleForOnlyDC").css("display")?(j.relationshipPopup.BasePopup("toggle"),j.$(".base-popup--close-button").focus()):!a("#spoke-rep-info").data("allAcct")&&""===a("#spokeRepNumber").text()?(e=new c({onSuccess:function(b){if(b&&b.customerSpokeRepInfo&&b.customerSpokeRepInfo.phoneNumber){var c=b.customerSpokeRepInfo.phoneNumber,
d=c.replace(/x.*/,""),e="tel:"+a.trim(d),d=b.customerSpokeRepInfo.firstName+" "+b.customerSpokeRepInfo.lastName,f=b.customerSpokeRepInfo.preferredName;null!=f&&(void 0!=f&&""!=f)&&(d=f+" "+b.customerSpokeRepInfo.lastName);f=!1;if(a("#rep01")&&""!=a("#rep01").text()){var g=a("#rep01").text(),g=a.trim(g);null!=g&&null!=d&&d.toLowerCase()==g.toLowerCase()&&(f=!0)}!window.toggleMap.VAPModeEnabled&&(window.toggleMap.relbklSallyFeature&&0==a("#hasMAHub").length)&&(g=a(".relationship-sally-ngapp--container"),
0<g.length&&a(".js-ma-hub-rep-info--existing--pcgprem").before(g.detach()),(g=a("#hubOnlyTitle").data("cp-hub-rep-name"))&&(f=d.toLowerCase()==g.toLowerCase()));f?(a("#ma-hub-rep-info").css("display","block"),a("#hub-rep-info").css("display","none"),a("#hubFAQ").css("display","block"),a("#spokeFAQ").css("display","none")):(a("#spokeRepNumber").text(c),a("#spokeRepNumber").attr("href",e),b=b.customerSpokeRepInfo.title,a("#spokeRepName").text(d),a("#spokeOnlyRepName").text(d),a("#spokeRepTitle").text(b),
a("#spokeOnlyTitle")&&a("#spokeOnlyTitle").removeAttr("style"),a("#spoke-rep-info")&&a("#spoke-rep-info").removeAttr("style"),a("#ma-hub-rep-info").css("display","block"),a("#hub-rep-info").css("display","none"),a("#hubFAQ").css("display","none"),a("#spokeFAQ").css("display","block"))}else a("#hasMAHub")&&"no"==a("#hasMAHub").text()&&a(".relationship-wrapper").hide();j.relationshipPopup.BasePopup("toggle");j.$(".base-popup--close-button").focus()},onError:function(){j.relationshipPopup.BasePopup("toggle");
j.$(".base-popup--close-button").focus()}}),e.run()):(!a("#spoke-rep-info").data("allAcct")&&""!==a("#spokeRepNumber").text()&&(a("#spokeOnlyTitle").css("display","block"),a("#spoke-rep-info").css("display","block"),a("#ma-hub-rep-info").css("display","block"),a("#hub-rep-info").css("display","none")),j.relationshipPopup.BasePopup("toggle"),j.$(".base-popup--close-button").focus())}b.stopPropagation()},closePopup:function(a){a.preventDefault();this.relationshipPopup.BasePopup("close");this.$(".base-popup--close-button").focus();
a.stopPropagation()},setRepBioLink:function(){var a=this.$(".relationship_rep-bio-link").data("biolink");this.repBioLink="";a&&(this.repBioLink=a)},repBioPopup:function(){window.open(this.repBioLink,"","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,left=100,top=100,width=700,height=500","true")}})});define("text!templates/contextual-signup-term-of-use-8x.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-large account-selector--show-add-outside-accounts-legal-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Add Outside Accounts</h3>\n\t\t\t<p>Before you can add outside accounts to your Fidelity portfolio page, you need to review and accept the Terms of Use below. Accepting the terms will sign you up for our Full View&reg; service, which we use to access your outside account information.</p>\n\t\t\t<a href="#" class="base-modal--vscroll-area-print">Print</a>\n\t\t\t<div class="account-selector-modal--overflow-container base-modal--vscroll-area">\n\t\t\t\t<p>\n\t\t\t\t\t<strong>\n\t\t\t\t\t\tPlease note that the Full View&reg; Terms of Use have changed efective 6/22/2013. In particular, please review section 2.E. below (captioned "Privacy") which was updated for consistency with the Fidelity Investments <a href="https://www.fidelity.com/privacy-policy">Privacy Policy</a>\n\t\t\t\t\t</strong>\n\t\t\t\t</p>\n\t\t\t\t<p>These Terms of Use ("Terms") govern your use of certain personal information management services made available to you by Fidelity Brokerage Services LLC, Fidelity Workplace Services LLC and/or their affiliates ("Fidelity") which are referred to as "Full View<sup>&reg;</sup>" (hereafter, "Full View" or the "Service").</p>\n\t\t\t\t<h3>Acceptance of Terms</h3>\n\t\t\t\t<p>By using the Service, you acknowledge that you consent to receive this agreement in electronic form and that you have read and agree to be bound by these Terms. If you do not accept these Terms, you will not be entitled to use the Service. These Terms may be updated from time to time without prior notice to you. If you continue to use the Service thereafter, your continued use of the Service constitutes acceptance of the changes and an agreement to be bound by this agreement, as amended. If you do not agree to the changes, you agree to discontinue your use of the Service. You can review the most current version of these Terms at any time by selecting the "Full View Terms of Use" link located at the top of all Full View screens.</p>\n\t\t\t\t<h3>The Service</h3>\n\t\t\t\t<ol>\n\t\t\t\t\t<li>Description of the Service. The Service is an information management service that allows users to consolidate and manage their account information record kept at Fidelity ("Fidelity Account Information") and their account information accessible via third-party account providers\' web sites ("Account Information from Third-Party Sites").Yodlee Inc. ("Yodlee"), an unaffiliated service provider, provides Fidelity services to access users\' data from such third-party account providers\' web sites ("Third-Party Sites"). With the Service, at your direction, Fidelity or Yodlee obtains your Account Information from Third-Party Sites and makes it available to view along with your Fidelity Account Information on the Fidelity web sites and through a variety of web-based guidance tools that Fidelity may make available on its web sites.<br /><br />The Service is provided as a convenience and should not be considered a substitute or replacement for account statements or other documentation provided by Fidelity or third-party account providers. Please consult your official account statements for information regarding your account balances, positions and transactions.</li>\n\t\t\t\t\t<li>Third-Party Information, Content, Products and Services. Other than the Fidelity Account Information, all other information available through the Service is provided by third parties. Fidelity makes no effort to review the content or terms of use of any Third-Party Sites, including, but not limited to, the accuracy, validity, legality, copyright compliance, or decency of the content contained in these sites. You acknowledge that Fidelity does not pre-screen content, but that Fidelity and our designees will have the right (but not the obligation) in our or their sole discretion to refuse, edit, move or remove any content that is available via the Service. Fidelity is not responsible for, nor does it recommend, endorse or validate in any way, the information, products and services on or available through Third-Party Sites or any issues you may have related to your access to or use of Third-Party Sites. Reliance on any information contained on Third-Party Sites that you may access through the Service is solely at your own risk. Your use of the Third-Party Sites is governed by the terms of use posted on such Third-Party Sites, including the privacy policies of such sites, and may differ from those described on Fidelity.com, NetBenefits<sup>&reg;</sup>, or your employer\'s site.<br /><br />The information and content provided via the Service is for informational purposes only and should not be construed as an offer to sell, a solicitation to buy or a recommendation of any security or other investment by Fidelity. You acknowledge that you must perform your own evaluation of any investment based on your investment objectives, financial resources and risk tolerance.</li>\n\t\t\t\t\t<li>Service Limitations. Fidelity will try to make your experience a productive one. However, Fidelity cannot always foresee or anticipate technical or other difficulties. These difficulties may result in loss of data, personalization settings, or other service interruptions. Fidelity is not responsible for the timeliness, accuracy, deletion, mis-delivery, or failure to store any user data, communications, or personalization settings. For example, when displayed through the Service, Fidelity Account Information and Account Information from Third-Party Sites are only as fresh as the time shown, which reflects when the information is obtained from such sites. Such information may be more up-to-date when obtained directly from the relevant sites. You can refresh your account information on the Service any time you are logged in by selecting refresh.</li>\n\t\t\t\t\t<li>Right to Change. Fidelity reserves the right to modify, change, or cease providing access to the Service or any of the content or Third-Party Sites available through the Service at any time and without prior notice.</li>\n\t\t\t\t\t<li>Privacy. Fidelity is committed to maintaining the privacy and security of its customers\' personal information. Fidelity\'s commitment to privacy is reflected in the Fidelity Investments Privacy Policy available at Fidelity.com or Netbenefits.com as appropriate.</li>\n\t\t\t\t\t<li>Cancellation. You may cancel your enrollment in this Service at any time via Fidelity.com or NetBenefits or by contacting Fidelity.<br /><br />Fidelity may cancel your enrollment in the Service at any time without prior notice, for any reason, including, for those accessing the Service through NetBenefits, at the direction of your employer or plan sponsor.</li>\n\t\t\t\t</ol>\n\t\t\t\t<h3>Your use of the Service</h3>\n\t\t\t\t<ol>\n\t\t\t\t\t<li>Provide Accurate Information. Accurate records enable Fidelity to provide the Service to you. You must provide true, accurate, current, and complete information about yourself and your accounts maintained at Third-Party Sites, as requested in our registration and account setup forms, and you may not misrepresent your identity or your account information. In order for the Service to function effectively, you must also keep your registration and account information up to date and accurate.</li>\n\t\t\t\t\t<li>Obey the Law. You may not use the Service for illegal purposes or for the transmission of material that is unlawful, harassing, libelous (untrue and damaging to others), invasive of another\'s privacy, abusive, threatening, or obscene, or that infringes the rights of others.</li>\n\t\t\t\t\t<li>Restrictions on Commercial Use or Resale. Your right to use the Service is personal to you; therefore, you may not resell or make any commercial use of the Service.</li>\n\t\t\t\t\t<li>Proprietary Rights. You acknowledge and agree that Fidelity owns all rights to Fidelity.com and NetBenefits<sup>&reg;</sup>. Full View<sup>&reg;</sup> is a registered trademark of FMR LLC, all trademarks and service marks belong to FMR LLC or an affiliate, except third-party trademarks and service marks, which are the property of their respective owners. You are only permitted to use the content as displayed on this site as expressly authorized by the Service. You may not copy, reproduce, distribute, or create derivative works from this content. Further, you may not reverse engineer or reverse compile any of Fidelity\'s technology, including but not limited to, any Java applets associated with the Service.</li>\n\t\t\t\t</ol>\n\t\t\t</div>\n\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="submit" role="button" class="action-button--generic">I Agree</button>\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal">Not now, thanks</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\n\t\t</form>\n\t</div>\n</div>'});
define("text!templates/contextual-signup-term-of-use-11x.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-large account-selector--show-add-outside-accounts-legal-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Add Outside Accounts</h3>\n\t\t\t<p>Before you can add outside accounts to your Fidelity portfolio page, you need to review and accept the Terms of Use below. Accepting the terms will sign you up for our Full View&reg; service, which we use to access your outside account information.</p>\n\t\t\t<a href="#" class="base-modal--vscroll-area-print">Print</a>\n\t\t\t<div class="account-selector-modal--overflow-container base-modal--vscroll-area">\n\t\t\t\t<p>\n\t\t\t\t\t<strong>\n\t\t\t\t\t\tPlease note that the Full View&reg; Terms of Use have changed efective 6/22/2013. In particular, please review section 2.E. below (captioned "Privacy") which was updated for consistency with the Fidelity Investments <a href="https://www.fidelity.com/privacy-policy">Privacy Policy</a>\n\t\t\t\t\t</strong>\n\t\t\t\t</p>\n\t\t\t\t<p>These Terms of Use ("Terms") govern your use of certain personal information management services made available to you by Fidelity Brokerage Services LLC, Fidelity Workplace Services LLC and/or their affiliates ("Fidelity") which are referred to as "Full View<sup>&reg;</sup>" (hereafter, "Full View" or the "Service").</p>\n\t\t\t\t<h3>Acceptance of Terms</h3>\n\t\t\t\t<p>By using the Service, you acknowledge that you consent to receive this agreement in electronic form and that you have read and agree to be bound by these Terms. If you do not accept these Terms, you will not be entitled to use the Service. These Terms may be updated from time to time without prior notice to you. If you continue to use the Service thereafter, your continued use of the Service constitutes acceptance of the changes and an agreement to be bound by this agreement, as amended. If you do not agree to the changes, you agree to discontinue your use of the Service. You can review the most current version of these Terms at any time by selecting the "Full View Terms of Use" link located at the top of all Full View screens.</p>\n\t\t\t\t<h3>The Service</h3>\n\t\t\t\t<ol>\n\t\t\t\t\t<li>Description of the Service. The Service is an information management service that allows users to consolidate and manage their account information record kept at Fidelity ("Fidelity Account Information") and their account information accessible via third-party account providers\' web sites ("Account Information from Third-Party Sites").Yodlee Inc. ("Yodlee"), an unaffiliated service provider, provides Fidelity services to access users\' data from such third-party account providers\' web sites ("Third-Party Sites"). With the Service, at your direction, Fidelity or Yodlee obtains your Account Information from Third-Party Sites and makes it available to view along with your Fidelity Account Information on the Fidelity web sites and through a variety of web-based guidance tools that Fidelity may make available on its web sites.<br /><br />The Service is provided as a convenience and should not be considered a substitute or replacement for account statements or other documentation provided by Fidelity or third-party account providers. Please consult your official account statements for information regarding your account balances, positions and transactions.</li>\n\t\t\t\t\t<li>Third-Party Information, Content, Products and Services. Other than the Fidelity Account Information, all other information available through the Service is provided by third parties. Fidelity makes no effort to review the content or terms of use of any Third-Party Sites, including, but not limited to, the accuracy, validity, legality, copyright compliance, or decency of the content contained in these sites. You acknowledge that Fidelity does not pre-screen content, but that Fidelity and our designees will have the right (but not the obligation) in our or their sole discretion to refuse, edit, move or remove any content that is available via the Service. Fidelity is not responsible for, nor does it recommend, endorse or validate in any way, the information, products and services on or available through Third-Party Sites or any issues you may have related to your access to or use of Third-Party Sites. Reliance on any information contained on Third-Party Sites that you may access through the Service is solely at your own risk. Your use of the Third-Party Sites is governed by the terms of use posted on such Third-Party Sites, including the privacy policies of such sites, and may differ from those described on Fidelity.com, NetBenefits<sup>&reg;</sup>, or your employer\'s site.<br /><br />The information and content provided via the Service is for informational purposes only and should not be construed as an offer to sell, a solicitation to buy or a recommendation of any security or other investment by Fidelity. You acknowledge that you must perform your own evaluation of any investment based on your investment objectives, financial resources and risk tolerance.</li>\n\t\t\t\t\t<li>Service Limitations. Fidelity will try to make your experience a productive one. However, Fidelity cannot always foresee or anticipate technical or other difficulties. These difficulties may result in loss of data, personalization settings, or other service interruptions. Fidelity is not responsible for the timeliness, accuracy, deletion, mis-delivery, or failure to store any user data, communications, or personalization settings. For example, when displayed through the Service, Fidelity Account Information and Account Information from Third-Party Sites are only as fresh as the time shown, which reflects when the information is obtained from such sites. Such information may be more up-to-date when obtained directly from the relevant sites. You can refresh your account information on the Service any time you are logged in by selecting refresh.</li>\n\t\t\t\t\t<li>Right to Change. Fidelity reserves the right to modify, change, or cease providing access to the Service or any of the content or Third-Party Sites available through the Service at any time and without prior notice.</li>\n\t\t\t\t\t<li>Privacy. Fidelity is committed to maintaining the privacy and security of its customers\' personal information. Fidelity\'s commitment to privacy is reflected in the Fidelity Investments Privacy Policy available at Fidelity.com or Netbenefits.com as appropriate.</li>\n\t\t\t\t\t<li>Cancellation. You may cancel your enrollment in this Service at any time via Fidelity.com or NetBenefits or by contacting Fidelity.<br /><br />Fidelity may cancel your enrollment in the Service at any time without prior notice, for any reason, including, for those accessing the Service through NetBenefits, at the direction of your employer or plan sponsor.</li>\n\t\t\t\t</ol>\n\t\t\t\t<h3>Your use of the Service</h3>\n\t\t\t\t<ol>\n\t\t\t\t\t<li>Provide Accurate Information. Accurate records enable Fidelity to provide the Service to you. You must provide true, accurate, current, and complete information about yourself and your accounts maintained at Third-Party Sites, as requested in our registration and account setup forms, and you may not misrepresent your identity or your account information. In order for the Service to function effectively, you must also keep your registration and account information up to date and accurate.</li>\n\t\t\t\t\t<li>Obey the Law. You may not use the Service for illegal purposes or for the transmission of material that is unlawful, harassing, libelous (untrue and damaging to others), invasive of another\'s privacy, abusive, threatening, or obscene, or that infringes the rights of others.</li>\n\t\t\t\t\t<li>Restrictions on Commercial Use or Resale. Your right to use the Service is personal to you; therefore, you may not resell or make any commercial use of the Service.</li>\n\t\t\t\t\t<li>Proprietary Rights. You acknowledge and agree that Fidelity owns all rights to Fidelity.com and NetBenefits<sup>&reg;</sup>. Full View<sup>&reg;</sup> is a registered trademark of FMR LLC, all trademarks and service marks belong to FMR LLC or an affiliate, except third-party trademarks and service marks, which are the property of their respective owners. You are only permitted to use the content as displayed on this site as expressly authorized by the Service. You may not copy, reproduce, distribute, or create derivative works from this content. Further, you may not reverse engineer or reverse compile any of Fidelity\'s technology, including but not limited to, any Java applets associated with the Service.</li>\n\t\t\t\t</ol>\n\t\t\t</div>\n\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="submit" role="button" class="action-button--generic">I Agree</button>\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal">Not now, thanks</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\n\t\t</form>\n\t</div>\n</div>'});
define("text!templates/contextual-signup-intermediary.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-medium account-selector--show-add-outside-accounts-intro-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts-legal-modal">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Add Outside Accounts</h3>\n\t\t\t<p>Your Fidelity portfolio page can display your outside investement, retirement, banking, and credit card accounts. If you want to see other types of accounts, you can do so on the Full View&reg; page.</p>\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="button" role="button" class="action-button--generic">Great! Let\'s add them now</button>\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal">Not now, I\'ll add them later.</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>'});
define("text!templates/contextual-signup-fastlink.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-large account-selector--show-add-outside-accounts-content-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Add Accounts</h3>\n\t\t\t<p style="height:200px;font-style:italic;color:#CC0000">REMOVE THIS LINE - TEMPORARY PLACEHOLDER FOR OUTSIDE AJAX CONTENT</p>\n\t\t</form>\n\t</div>\n</div>'});
define("text!templates/contextual-signup-error.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-medium account-selector--show-add-outside-accounts-content-modal"tabindex="-1">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Add Non-Fidelity Accounts</h3>\n\t\t\t<p>The system we use to add your non-Fidelity accounts isn\'t available right now. Please come back later and try again.</p>\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<a href="#" class="base-popup--close-button-modal">OK, I\'ll try again later.</a>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>'});
define("text!templates/contextual-signup-notice.html",[],function(){return'<div class="base-popup base-modal--container base-modal--container-medium account-selector--show-add-outside-accounts-notice-modal">\n\t<div class="base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\t<div class="account-selector-modal base-modal" role="dialog" aria-labelledby="account-selector-modal--add-outside-accounts-legal-modal">\n\t\t<form role="form" class="base-modal--form">\n\t\t\t<h3 class="textblock--h3-headline" tabindex="-1">Full View: Your Non-Fidelity Accounts</h3>\n\t\t\t<p>If you were successful in adding your non-Fidelity account to Full View, it will take us a few minutes to gather information about your account before it appears in the account selector.</p>\n\t\t\t<fieldset class="base-modal--actions">\n\t\t\t\t<p class="base-modal--actions-wrapper">\n\t\t\t\t\t<button type="button" role="button" class="action-button--secondary">Close</button>\n\t\t\t\t</p>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>\n'});
define("text!templates/add-coinbase-account.html",[],function(){return'<div class="add-cb-account--container">\n\t<div class="add-cb-account--link">\n\t\t<a href="javascript:void(0)">Have a Coinbase Account? Add it now</a>\n\t</div>\n\t<div class="add-cb-account-desc--panel">\n\t\t<div class="add-cb-account--icon">\n\t\t\t<img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/icons/icon-coinbase-c.png" alt="Coinbase Logo">\n\t\t</div>\n\t\t<div class="add-cb-account--description">View your digital currency along with your traditional accounts all in one location. Available only for Coinbase accounts.</div>\n\t</div>\n</div>'});
define("text!templates/coinbase-signin-popup.html",[],function(){return'<div class="coinbase-signin__popup">\n\t<iframe class="coinbase-signin__frame" src="https://www.coinbase.com/oauth/authorize?client_id=63d48e4b34e7c37f99662ca21646c2e84d626f9f01f7160e0877372ca46133dd&redirect_uri=https%3A%2F%2Frelay.wukong.fmr.com%2Fftgw%2Fdpcs%2Fdigitalcurrency%2Fcoinbase%2Fauthorize&response_type=code&scope=wallet%3Aaccounts%3Aread&account=all" frameborder="0"></iframe>\n</div>'});
define("text!templates/coinbase-info-indicator.html",[],function(){return'<div class="coinbase-info-indicator--container">\n\t<div class="coinbase-info-indicator__body">\n\t\t<div class="coinbase-info-indicator-message">\n\t\t\tYour Coinbase account was already linked successfully.\n\t\t</div>\n\t</div>\n\t<div class="coinbase-info-indicator__ctrls">\n\t\t<button class="button-component button--secondary base-popup--close-button-modal coinbase-info-indicator__ok">OK</button>\n\t</div>\n</div>\n'});
define("text!templates/add-coinbase-account-emoney.html",[],function(){return'<div class="add-cb-account--container">\n\t<div class="add-cb-account">\n\t\t<a id="add-cb-account-emoney--link" href="javascript:void(0)">Have a Coinbase Account? Add it now</a>\n\t</div>\n\t<div class="add-cb-account-desc--panel">\n\t\t<div class="add-cb-account--icon">\n\t\t\t<img src="<%=envMap.WWW_CDN_URL%><%=envMap.NG_CONTENT_URL%>/images/icons/icon-coinbase-c.png" alt="Coinbase Logo">\n\t\t</div>\n\t\t<div class="add-cb-account--description">View your digital currency along with your traditional accounts all in one location. Available only for Coinbase accounts.</div>\n\t</div>\n</div>'});
define("views/contextual-signup-view","jquery views/base-view util/constants util/progressbar components/modalpopup util/eventhub-backbone text!../templates/contextual-signup-term-of-use-8x.html text!../templates/contextual-signup-term-of-use-11x.html text!../templates/contextual-signup-intermediary.html text!../templates/contextual-signup-fastlink.html text!../templates/contextual-signup-error.html text!../templates/contextual-signup-notice.html text!../templates/add-coinbase-account.html text!../templates/coinbase-signin-popup.html text!../templates/coinbase-info-indicator.html text!../templates/leave-fidelity-declaration.html views/advisor-noaccess-view util/eventhub-backbone text!../templates/add-coinbase-account-emoney.html".split(" "),
function(a,b,g,c,e,d,h,f,j,k,l,p,m,n,r,s,v,A,w){return b.extend({UserType:{TYPE_NEW:"NEW",TYPE_11X:"11X",TYPE_8X:"8X"},events:{"click .account-selector--show-add-outside-accounts-legal-modal .action-button--generic":"saveAndOpenIntermediaryPopup","click .account-selector--show-add-outside-accounts-intro-modal .action-button--generic":"openFastLinkPopup","click .account-selector--show-add-outside-accounts-notice-modal .action-button--secondary":"closeCurrentPopup","click .account-selector--show-add-outside-accounts-intro-modal .add-cb-account--container .add-cb-account--link a":"clickAddCoinbaseAccount",
"click .account-selector--show-add-outside-accounts-legal-modal .add-cb-account--container .add-cb-account--link a":"clickAddCoinbaseAccount","click #add-cb-account-emoney--link":"clickAddCoinbaseAccount","click .leave-fid-declaration__popup .leave-fid-declaration__continue":"openCoinbasePopup","click .base-popup--close-button-modal":"closeCurrentPopup","CloseDialog .base-modal--container":"hidePopupOverlay","OpenDialog .base-modal--container":"showPopupOverlay","click .base-modal--vscroll-area-print":"printPage"},
initialize:function(){this.$el.empty();var a=this;d.subscribeEvent("FULL_VIEW_ADD_ACCOUNT",function(){a.addOutSideAccount()});d.subscribeEvent("FV_ACCOUNT_REQUIRE_UPDATE",function(b){a.openFVAccountUpdate(b[0],b[1])})},printPage:function(){var b=a(".SID-terms-text").html(),c=window.open("","TermsOfUse","titlebar=no,location=no,scrollbars=yes,resizable=no,width=0,height=300");c.document.write("<title>Terms Of Use</title>"+b);c.document.close();c.focus();c.print();c.close()},showPopupOverlay:function(b){b.failed||
a(".nextgen-modal-container").addClass("base-popup--visible")},hidePopupOverlay:function(){a(".nextgen-modal-container").removeClass("base-popup--visible");if("account-selector-modal--add-outside-accounts"==this.modalPopup.find(".account-selector-modal").attr("aria-labelledby")&&!(0<this.modalPopup.find(".base-popup--close-button-modal").length)){fullview_refresh_completed_indicator=!1;d.publishEvent("FV_ACCOUNTS_REFRESH_STARTED","FV_ACCOUNTS_REFRESH_STARTED");var b=this;setTimeout(function(){b.openNoticePopUp()},
10)}},closeCurrentPopup:function(){this.modalPopup&&(this.modalPopup.ModalPopup("close"),delete this.modalPopup)},addOutSideAccount:function(){if(advisor_indicator)(new v({el:a("#advisor-no-access-skin")})).render();else return this.openPopupWithoutFv()},saveAndOpenIntermediaryPopup:function(a){a.preventDefault();return this.openPopupByURL("/fvweb/signup")},openFastLinkPopup:function(b){b.preventDefault();a(window).width();return this.openPopupByURL("/fvweb/signupConfirm?flv2=true")},openFVAccountUpdate:function(b,
c){b.preventDefault();a(window).width();return this.openPopupByURL("/fvweb/editAccount?itemid="+c+"&flv2=true&oauth_callback=")},clickAddCoinbaseAccount:function(){var b=a(_.template(s)());this.openPopup(b)},openCoinbasePopup:function(){this.closeCurrentPopup();var a=envMap.DIGITAL_APP_URL+"digitalcurrency/coinbase/signin";toggleMap.emoneyFeature&&(a=envMap.DIGITAL_APP_URL+"emoney/coinbase");var b=window.open(a,"_blank"),c=setInterval(function(){b.closed&&(A.publishEvent("DIGITAL_ACCOUNT_LOAD_EVENT",
!0),clearInterval(c))},500)},openPopupByURL:function(b){var d=this;c.showLoading();var e=a.ajax({cache:!1,dataType:"html",type:"GET",xhrFields:{withCredentials:!0},url:b}),f=[];if("/fvweb/addAccounts"===b||"/fvweb/signup"===b)f=a.Deferred(),a.ajax({cache:!1,dataType:"json",type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,url:envMap.DIGITAL_APP_URL+"digitalcurrency/coinbase/checkEnrolled"}).done(function(a){f.resolve(a)}).fail(function(){f.resolve({error:!0})});return a.when(e,f).done(function(c,
e){var f=a(c[0]);if(f&&f.length&&("/fvweb/addAccounts"===b||"/fvweb/signup"===b)&&f.hasClass("account-selector--show-add-outside-accounts-intro-modal"))a(".js-footer-entitlement-info").data("fv-entitlement")||(f.find(".account-selector-modal form").find("p, ul, fieldset").remove(),!e.error&&e.enrolled&&a(_.template(r)()).appendTo(f)),!e.error&&!e.enrolled&&a(_.template(m)()).appendTo(f);d.openPopup(f)}).fail(function(b){console_error(b);b=_.template(l)({generalModel:this.generalModel});d.modalPopup&&
(d.modalPopup.remove(),delete d.modalPopup);if((b=a(b))&&b.length)b.appendTo(d.$el),b.ModalPopup(),d._openModal(b)}).always(function(){c.hideLoading()})},openPopupWithoutFv:function(){var b=this;c.showLoading();var d=a.Deferred(),e=[],e=a.Deferred();a.ajax({cache:!1,dataType:"json",type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,url:envMap.DIGITAL_APP_URL+"digitalcurrency/coinbase/checkEnrolled"}).done(function(a){e.resolve(a)}).fail(function(){e.resolve({error:!0})});a.ajax({cache:!1,dataType:"html",
type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,url:envMap.DIGITAL_APP_URL+"emoney/addAccounts"}).done(function(a){d.resolve(a)}).fail(function(){d.reject({error:!0})});a.when(d,e).done(function(c,d){var e=a(c);toggleMap.emoneyFeature||(e.find(".account-selector-modal form").find("p, ul, fieldset").remove(),!d.error&&d.enrolled&&a(_.template(r)()).appendTo(e));!d.error&&!d.enrolled&&a(_.template(w)()).appendTo(e);b.openPopup(e)}).fail(function(c){console_error(c);c=_.template(l)({generalModel:this.generalModel});
b.modalPopup&&(b.modalPopup.remove(),delete b.modalPopup);if((c=a(c))&&c.length)c.appendTo(b.$el),c.ModalPopup(),b._openModal(c)}).always(function(){c.hideLoading()})},openPopup:function(b){this.modalPopup&&(this.modalPopup.remove(),delete this.modalPopup);a(b).appendTo(this.$el);b=a(b).ModalPopup();this._openModal(b);b=a(window).height();var c=this.modalPopup.height(),d=this.modalPopup.css("top").slice(0,-2);b<c+d&&(this.modalPopup.css("position","absolute"),window.scrollTo(0,0))},openNoticePopUp:function(){this.modalPopup&&
(this.modalPopup.remove(),delete this.modalPopup);var b=_.template(p)({generalModel:this.generalModel});if((b=a(b))&&b.length)b.appendTo(this.$el),b.ModalPopup(),this._openModal(b);var b=a(window).height(),c=this.modalPopup.height(),d=this.modalPopup.css("top").slice(0,-2);b<c+d&&(this.modalPopup.css("position","absolute"),window.scrollTo(0,0))},_openModal:function(a){this.modalPopup=a;a.ModalPopup("open")},render:function(){this.refresh();return this},refresh:function(){},destroy:function(){this.$el.empty();
this.undelegateEvents();this.unbind()}})});
define("app-views","jquery backbone views/actionbar-view views/nextgen-welcome-view views/portfolio-nav-view views/watchlist-nav-view views/portfolio-content-view views/session-timeout-view views/forsee-survey-view views/foot-note-view views/exit-feedback-view views/relationship-view views/contextual-signup-view views/advisor-noaccess-view".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m,n){var r=function(b){this.context=b;a.BasePopup.setDisplayMode(a.BasePopup.DisplayMode[b.options.popupDisplayMode||"NonBlocking"]);
this.context.footNote=(new k({el:a(".legal-footer")})).render();this.context.portfolioContent=(new h({el:a(".port-content")})).render();this.context.exitFeedback=(new l({el:a(".popup-group")})).render();(new e({el:a(".port-nav .account-selector")})).render();(new d({el:a(".port-nav .account-selector")})).render();(new g({el:a(".action-bar")})).render();(new j({el:a("body")})).render();(new p({el:a(".relationship-wrapper")})).render();this.contextualSignupView=(new m({el:a(".account-selector--contextual-signup-popups-wrapper")})).render()};
r.prototype={subscribeEvents:function(){this.context.subscribeEvent(this.context.constants.EVENTS.PAGE_LOADED,function(a){c.showIfPossible(".welcome-onion-wrapper",a)});var d=this;this.context.subscribeEvent(this.context.constants.EVENTS.APPLICATION_START,function(){if(d.context.options.routeOnStart){var c=a.trim(b.history.getFragment());if(null==c||0==c.length)d.context.showWelcome=!0;var e=function(){if(null==c||0==c.length||"startNow"===c)isFeedEnabled?d.context.router.navigate("feed",{trigger:!0}):
d.context.router.navigate("summary",{trigger:!0})},f=window.matchMedia&&matchMedia("screen and (max-width: 480px)");if(f&&f.matches){a(".positions-mini-context").remove();a(".account-selector-wrapper").addClass("account-selector--reveal");var g=function(){f.matches||(e(),f.removeListener(g))};f.addListener(g);a(document).bind("REVEAL_ACCOUNT_SELECTOR",function(){f.removeListener(g);a(document).unbind("REVEAL_ACCOUNT_SELECTOR",arguments.callee)})}else e()}});this.context.subscribeEvent(this.context.constants.EVENTS.APPLICATION_START,
function(){var b=!1;0<a(document.body).length&&!0==a(document.body).data("is-atp-user")&&(b=!0);if(b){var c;if(null==c||c.closed)b=Math.min(1206,screen.width-74),c=Math.min(912,screen.height-112),c=window.open(envMap.SCS_URL_VALUE+"/customeronly/atbt/Atbt.shtml","","location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes,left=32,top=32,height="+c+",width="+b);c.focus()}});this.context.subscribeEvent(this.context.constants.EVENTS.APPLICATION_SESSION_TIMEOUT,function(){(new f({el:a("#session-timeout-skin")})).render()});
this.context.subscribeEvent(this.context.constants.EVENTS.ADVISOR_NOACCESS,function(){try{a(".base-popup--visible").BasePopup("close")}catch(b){}(new n({el:a("#advisor-no-access-skin")})).render()})}};return r});define("app-events",["jquery","util/constants"],function(a,b){return{initialize:function(){a(window).resize(function(b){a(document).trigger("MAIN_WINDOW_RESIZE",[b])});a(document).click(function(g){a(document).trigger(b.EVENTS.DOCUMENT_ON_CLICK,[g])})}}});
define("app-router","jquery backbone underscore views/pane-balances-view util/eventhub-backbone models/account-context-model views/tab-redirect-manager models/stacked-summary-state-model oceContainer util/pg2".split(" "),function(a,b,g,c,e,d,h,f){var j={summary:"Summary",feed:"Feed",positions:"Positions",balances:"Balances",multiplemarginbalances:"Balances/multiplemarginbalances",activity:"Activity","(?:statements/?[^/]*)":"Statements",orders:"Activity/orders",history:"Activity/history",pending:"Activity/pending",
Feature:"Feature",positionscore:"Positions/core",narrative:"Summary/narrative",performance:"Performance",perfOverview:"Performance/overview",upgrade:"Upgrade"},k={Statements:function(){var c=b.history.getHash(),d=null,e=null;c&&(d=c.split("/"),d[0]||d.shift(),1<d.length&&d[1]&&(e=d[1]));return-1==a.inArray(e,"default tax-forms trade-confirmations account-records proxy-materials prospectus interested-party quarterly-review annuity-confirmations".split(" "))?toggleMap.statementsUpgrade?"statements/default":
"statements/tax-forms":"statements/"+e}},l={};a.each(j,function(a,b){b&&-1===b.indexOf("/")&&(l[b]=a)});d.get("portfolio")||d.buildAccountInfo(a(".account-selector"));var p;e.subscribeEvent("LOADED_DMA",function(a){null==p&&(p="dashboard/"+a.acctNum);b.history.navigate(p,{trigger:!1});p=null});fang.EventBus.subscribe("CLOSE_DMA",function(){p=null;window.oceHighcharts&&(window.Highcharts=window.oceHighcharts)});var m=[];return b.Router.extend({routes:{"trade/:parameters":"routeTrade","transfer(/:parameters)":"routeTransfer",
startNow:"routeStartNow","dma/:parameters":"routeDmaDashboard","dashboard/*path":"routeDmaDashboard",customize:"routeAccountCustomize"},buildTabRegexp:function(){var b=[];a.each(j,function(a){b.push(a)});return RegExp("^("+b.join("|")+")(?:/(.*))?$")},buildNonTabRegexp:function(){var b=[];a.each(j,function(a){b.push(a)});var c=b.join("|");return RegExp("^((?!"+c+")|(?=("+c+")[^/]))(.*)$")},initialize:function(){var a=!0,c=this,e=this.buildTabRegexp(),f=this.buildNonTabRegexp(),g=b.history.navigate;
b.history.navigate=function(a){m.push(a);g.apply(this,arguments)};this.route(e,"routeTab",function(){c.routeTab.apply(c,arguments);a=!1});this.route(f,"routeNonTab",function(){var e=b.history.fragment;if(a&&!e)(e=d.get("accounts"))&&(1===e.length&&!h.getRedirectUrl(e[0],"Summary",!1))&&b.history.navigate("summary/"+e[0].acctNum,{trigger:!0});else{var g=this.getMatchedRouteHandlersExcept(e,[f]);g.length?(this.executeRouteHandlers(e,g),a&&e!=b.history.fragment&&c.routeNonTab.apply(c,arguments)):0!==
e.indexOf("dma")&&1!==e.indexOf("dma")&&(!a&&!e?history.go(-1):(m.pop(),b.history.navigate(m[m.length-1]||"",{trigger:!1})));a=!1}})},getMatchedRouteHandlers:function(a){return g.filter(b.history.handlers,function(b){return b.route.test(a)})},executeRouteHandlers:function(a,b){g.each(b,function(b){b.callback(a)})},getMatchedRouteHandlersExcept:function(a,b){var c=this.getMatchedRouteHandlers(a);return g.filter(c,function(a){return-1==g.indexOf(b,a.route)})},convertRouteNameToTabName:function(a){return j[a]||
a},convertTabNameToRouteName:function(a){return a in k?k[a]():a in l?l[a]:a},routeTab:function(b,c){""===a.trim(c)&&(c=null);var d=this.convertRouteNameToTabName(b);if(0==d.indexOf("statements")){var g=d.split("/"),d=g[0],d=d.charAt(0).toUpperCase()+d.slice(1);1<g.length&&g[1]&&(d+="/"+g.splice(1).join("-"))}d=d.split("/");CURRENT_TAB=d[0];a(".js-footer-entitlement-info").data("is-ceentitlement")&&("Summary"===d[0]&&"narrative"===d[1])&&(new f).saveStackedSummaryState("simplified");e.publishEvent("SELECT_ACCOUNTS",
{accounts:c,groups:null,routeOptions:{tabName:d[0],section:d[1]}})},routeNonTab:function(){e.publishEvent("SELECT_ACCOUNTS",{accounts:null,groups:null,routeOptions:{tabName:"Summary",section:null}})},routeTrade:function(c){var d={};c&&a(c.split("&")).each(function(a,b){a=b.indexOf("=");0<=a?d[b.substring(0,a)]=decodeURIComponent(b.substring(a+1)):d[b]=""});c={securityId:d.securityId,accountNumber:d.account,orderType:d.orderType||"E"};for(var f=1;4>f;f++)d["securityId_"+f]&&(c["securityId_"+f]=d["securityId_"+
f]),d["action_"+f]&&(c["action_"+f]=d["action_"+f]);d.orderAction&&(c.orderAction=d.orderAction);d.limitStopPrice&&(c.limitStopPrice=d.limitStopPrice);d.qty&&(c.qty=d.qty);d.accountType&&(c.accountType=d.accountType);d.isSpecificShare&&(c.isSpecificShare=d.isSpecificShare);e.publishEvent("routeTrade",{security:c});c="positions";d.account&&(c=c+"/"+d.account);b.history.navigate(c,{trigger:!0})},routeTransfer:function(c){var d={};c&&a(c.split("&")).each(function(a,b){a=b.indexOf("=");0<=a?d[b.substring(0,
a)]=decodeURIComponent(b.substring(a+1)):d[b]=""});c={};c.addBank=d.addBank||"N";c.fromAccount=d.fromAccount||"";c.toAccount=d.toAccount||"";c.pageSource=d.pageSource||"";e.publishEvent("routeTransfer",c);a("body").hasClass("summary")?(c=m[m.length-1]||"summary",b.history.navigate(c,{trigger:!1})):a("body").hasClass("balances")?(c=m[m.length-1]||"balances",b.history.navigate(c,{trigger:!1})):b.history.navigate("summary",{trigger:!0})},routeStartNow:function(){console_log("routing to routeStartNow");
e.publishEvent("routeStartNow")},routeDmaDashboard:function(b){var c;switch(typeof window.envMap.DMA_USE_NEW_DASHBOARD_ROUTE_FORMAT){case "string":c="true"===window.envMap.DMA_USE_NEW_DASHBOARD_ROUTE_FORMAT.toLowerCase();break;case "boolean":c=window.envMap.DMA_USE_NEW_DASHBOARD_ROUTE_FORMAT;break;default:c=!1}if(c){c=b.indexOf("/");var d;0<c?d=b.substr(0,c):-1==c&&(d=b);d?e.publishEvent("SELECT_DMA_ACCOUNT",{account:d}):console.warn("no DMA account number?");p="dashboard/"+b}else c=b.indexOf("route"),
-1===c||0==a(".dma-container").length?(-1===c?(d=b,p="dashboard/"+d):0==a(".dma-container").length&&(d=fang.EventBus.getCache("dma:route").account),e.publishEvent("SELECT_DMA_ACCOUNT",{account:d})):p="dashboard/"+b},routeAccountCustomize:function(){e.publishEvent("CUSTOMIZE_ACCOUNTS",{init:!CURRENT_TAB})}})});
define("listeners/session-timeout-listener",["jquery"],function(a){var b=function(a){this.context=a};b.prototype={start:function(){var b=this.context;a(document).ajaxError(function(c,e){if(500==e.status){var d=a(e.responseXML);0<d.find("Reason").length&&0<d.find("Location").length&&(b.isLoggedIn(!1),b.publishEvent(b.constants.EVENTS.APPLICATION_SESSION_TIMEOUT))}})},stop:function(){this.context=null}};return b});
define("listeners/page-unload-listener",[],function(){return{start:function(){setTimeout(function(){window.addEventListener&&window.addEventListener("unload",function(){},!1)},0)}}});
define("listeners/advisor-noaccess-listener",["jquery"],function(a){var b=function(a){this.context=a};b.prototype={start:function(){var b=this.context;a(document).ajaxComplete(function(a,e){advisor_indicator&&/<Reason>\s*NoAdvisor\s*<\/Reason>/.test(e.responseText)&&b.publishEvent(b.constants.EVENTS.ADVISOR_NOACCESS)})},stop:function(){this.context=null}};return b});
define("tpl!templates/atp-popup.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large introtour-modal introtour-atp-modal" role="dialog" aria-label="ATP tour">\n    \x3c!-- Hidden for redundancy --\x3e\n    <div class="base-popup--close-button introtour-atp-base-popup--close-button" tabindex="0" role="button" aria-label="Close Popup"></div>\n\n    <ul class="introtour-modal--slide-content-container introtour-atp-modal--slide-content-container">\n        \x3c!-- ATP Intro Tour Content --\x3e\n        <li class="introtour-modal--slide-content introtour-modal--slide-content-active clearfix" aria-live="polite">\n            <div class="introtour-atp-container clearfix">\n                <h2 class="introtour-atp-modal--container-header">Who Moved My ActiveTraderPro Link?</h2>\n\n                <div class="introtour-atp-modal--container-lede">We did&#8212;and now it\u2019s easier than ever for you to find. Look for it under our main navigation under Accounts & Trade.</div>\n\n                <div class="introtour-atp-modal--container-image">\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZcAAAFlCAMAAAAQ4lUtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMGYyMGExZC03ODU2LTQ3YTItOGVkMy0zZTMyOGIyN2JhZGQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDI1NEVGNzAwNENDMTFFNkFBMDJCMEFBRUExRjU0RjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDI1NEVGNkYwNENDMTFFNkFBMDJCMEFBRUExRjU0RjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5YjFhMWNjZS00OThhLTQ4YTAtYTZmMC00MmY1YzIwMjc3ZTQiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmY2E2ODcyMC00YmNlLTExNzktYmNmYy1mN2I1MDBiNzNkMGQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6BrIFmAAADAFBMVEVulVDE2rD0+/E8hQAsPAi4uLiDtR7r6+pzqEY0cADS7tKK05Ow0G5ooTaRwS1CigKj0aOlpaXe397s+ezX5srT09NYnALr9+qFtyHNzMxnZ2eZmZni4uFlxnHb8tvd7L7y9+3CwsKLuixTlRs0NDRTU1P9//x5eXnJ6clbmieNuWKMvSL19fXt7e2Hh4dFRUXx8fHR59HBzMGGtFvn9+ft9OQWqCpXdBq047mkx4mSvjfm6eXUytzm8Nmz6o3f4+DU5q+dw335+flHjRiOvDFGulXx7fJ9shMkrTZ1rQXd2uW91qaszJDE3JVFjAk1ggA0s0WFth4regA+iQCaw0f5/Pbi9eJPkxIAAADN681Jjg2Xv3Slylrf69Pe3dzZ2dng4d/u6vJ5zYQCnA/l5ePh39+20p1hhz/p5+nO287M4aPj5eL9/fq61oLj5eXn6eib2qLQ49D3//e62bqIuSSCtRrX2dcLoh3i7sr9+v7p6efg3+FGgwzL37rE6Ma/5sEWGg/n5+m/wcAhKQ3v8fHl4+VFkAGwzpba79nq6u3p5+fq7erj4+OHsSw7hhTt6+rl4+Pg8uCRu2yMqIVUv2E+hwHP7c86hQd2rhvb3t7l9eWHtyXd2OO8vLzH6sitt5ft6u3X19fe29zr7e2AsxjY19b18/XP68/L68vv7+9ioRVwqgB5sA3z8/OJuSg8fAbFzcUfcwDb3duk3nro8d+Junfy8/H7+/3t7euo366HuSeKvxjZ2de0qrjZ19nX2dnAv8Hb29vo+ujR0dHz9fPL7c37/fqky5yusa/R4sHp9+f39ffLycvFxcUxfg17sh9BiQyFuxXn5+fl5+TN68vn5+Xl5+fn5eU6Tw3l5efn5ed7oydnih/AwL+IuR/j9eXHx8fJycnPz8/W79Zubm7HyciPvS6Bsxb1+fGtra339/e1sbmzs7NcXFzNz85hYWG/+JjP0c98r1RGjAbm5ub8/Pz9/f3l5eXo6Oj7+/v6+vr+/v6TwTHp6elAiAD////WUSGOAACjpUlEQVR42uy9C1Db17kvCmgCKqBRY0iRXcAKmhCLW2e7G8TwuNQ8AxywBDKCQTxCseBS3k1C8YGNGWdCwTbHjdjIbMPEkwet7RrTa4emxXNPTx4tLd4pmxExjD2TJ2m3kts0Z8sCC3Thf79vrf9jCUSSdp+Hu8MCpP+31re+tf7fb32PtfQH/C5fPnT5EJTLh559Fq+AxO9nn4VvrIEqfH38ELl4lVCPHyI9oECnZ18F8vKzj5Oe8PPss49TkZcfv3ro6sGNUy8E/Sio4dQLZ4KCTp36UVDQxo+6Nl4OCgo6cyoo6IWNIFI2TgHbyy+fOUOoF07hq7thI+jMmVMvHwx6ARheaMCqjaANEAKCgn70MnQFAvr9CAW/fOZHG1D7I6hrQKFngk5BzcaZXxKJDRsvoHhgJLMgQ26g+KCDP3oBxWGfBneQKP6XpzaCYIQNmPEv4fXgyy8HoXhk2ECOM6dQPBkH72LjBeD4JXaEyfPioe3My4x4d9ezr7767OPPgm5BiaA5oj+iedApao/XPKrwsh/Mj0ylIQjGbgApL3R1odAgN0yxLQjFd200bJzqamgI2kDFnSK6hPltuMmNBP0Sh93ATl0NG/AO/ZAAwS8TlaP4hlNBMG8Uj23QCdjayOWZMyB5owFeGtrOQDWKh+quLre7DTlPBW24u+C7YaPL3dDVBpWncKyujTZQzsZGQ8OpUxtt7lOgoIaGHwWdcrvdG0QJG9ibDATi3SB9A8RvEPFd0ATjtbUFteFgong3iEeOtjZyN6cIF46PQIAYhM6NQkEfG6gbQLYLRbthDYniNzaIeDc/vhtkdaH4hi6cG0y+rQ3v+2UQjJMPQsXi5IPEyTfA5P2g+ZQbEGgg2m4g+kTN43RhCJCD72SKbrwPrArqosptC8L7BrV0BREd4rqHplMoxd3VBRifIaZwaoOsYbgtWDpuhBraf4nL5Oohprx66NVXyRshyCW8PvvqZXINvD8hb1cpy6uvXsXLQ89eReoqspI2eMEatOxXr6IYeDl0+erjKP4QL5OKf5Xn4yuukvafCPTVn1wlF1dF6eSSjooUP/ur/E2gAKgSZ3+VjsHfz1X+Tq/y1a/SWfK3cpWZ/Kso/lk/wPmMW1QxLEBcBg24JoPa3GgjoMczqG90L7C8cVG7T3ehos8QW21rO9OFuECHF8AgzrQB7mBfbjQfQKrtDHYilg0rsQE6Y33XxuWu11986MVfvfjiiz/4Ab498atf/Te4/AGSP37ox/D24xd//AOs+DHw4OWvfvUrbMR67AWvP0A2cvkEqXnxxz/Gnx//ADvwPy/+4L+B+B888SIdibT/+EUy0hNP8MORAZ741YtAE0YcB5iwkcyJiH9REI9SfkxpMi/S+cUX+dm/yEv/AZFGxCPzEyAeCWAk90kniZMH6T/gpdM7IvV+DbDYQaeg41NgVg0ABV7hskdNoo1uBFGTfAFdBl4DXsAG9hjURYABKwwihnoK/RKxNdR8G3iiBrQawAaAAXs/hdKpGzi45/fPv/baO++8gz9YHn7ntWfeEctr7xDiGSiEhXC+hhXvPCP1IRz057XXnnnttdde4zuL/HzNO888jAySeCqHDsCwv8OIf01kf4ZQrzGjYqX37F9jZv8amZEwfVY8lSVMkpX+jLf4Z/xA8+DLYUlvEG0DCe71FLpNolzQfxC6erCHoIaT4B8b2sB/AloIDpoXIAjtqGp310n0d0HYYYM4ccIECKN4DCBEOiIbdKru+Q8igx7fLTuUg34nUXOgLlC1G5FBDNwbbScxmEFoREWj0Zxsa2g4eRK039BG0ACdn8Rg6nafJl0AyNNuGlcAy9MYuKEbYu3GEItmR2ABVgQ2aO/eq9zqwPd3yw7Frw0TBWIemGBRS9gAy+iCBe9GnwUokKSBFMxV0Je1nQI/BraEDMgFWDacpAZEja4LRWJnwIbYCiQNgBAwg9iTG+737Zzj+9/79m7ZofgRVaaCBiFLBP+zcRoRQksBXBooVDRrBd2eBoeECSHAADUYP1DLiIsdbQ15gGw4eYqknAQUlE4wQjNsowlrw8mN1A8Oeb7//Ygnd4vvYvI7jaq0u0+epCHDjY4Jl3eq/SRkXV1Q3dBGGk6fdpNoAaUNi91tR2eHPQED0PlJ8HMNJ+0nXaB5e6rbbkczJAYFnKL4BiI+9YOrEU8lPBm2W3yXCD876BrX+MmT9lttoD9wYafv3D4NJuQ6DeXkHTAT+x2XHRFw22+5TyN0qW12e6rd5UJFn7bbASBE9yRwupaAtcF9ctHlAk77LReSIPPkyVup8ALyT98BV7e495C1JyIggpQw+KazCYvYLbT4gamcxmgMyHR1geogTJw89M+XF9FITgNYGNbdrsWTYC5oRe7TJ2FnDKv/9El30MsbJ9vaThMLAM1jZHGfdmFwQTgQ44OwuzqIpmI/dQpMzX6SIATpQ+ren6Q+FRb2Bg9MQABc48suILTc9HOdpLi0nUS7QcNpOHTqiaDLLjAegCMVK9EH3bkD+u8C74apV8NJaD11LzIoyHUakTwNBmLHowcILGBRp2/Z7Yuuxasrry51tx5auepePHMIcMGsAk0JeizuvWp9KiHgJplDWMDA/w2Z/t9/742AiJu+55mQIF55sRDqZsJ/KEgoLrdv2+0u+2kXQLMIHsZ9a+Nb1x/97JvdL7jsrtu3oRqcmct+EpyVHa7st8Hdue6chiQ5qPrh5/ee7rp12uW6c/KWfXGReDp0ffZFYG0N+kXrnx579KNHH/t48J8vr338+zaMWggYCGroe+sn1qciwhKwvBH2veff3/v+B3uffyY6jFYJZZR8JSSEmcT6sACWJSIg7GZCgCki4T4pwoS3VPItX0oA5fNzuVJhbd9y2UG1t12LLverex595JFH/vTPd066XK5bGCTuLWCUAJUDgov2W0tLrtsnXafcHzzz++c/dP8IfJbrZGoqcLtPQzZwZwkgcp22XP7kAZSD5aPn137/dx+/fPI2yEuFwONasrsQl9GwUQLL9x94//mP//S7j2GzbZWUPjoaNsNxsRzHBUS8V/p5N7JT62jEk6bR0f9VkAQ8CT8cmXFs2GhYrEkAIoALGMWWWC5WXF7QHiBczjwp3QsK4IBp1G/RZV9wWW4ttLoWFxdu3779as2jj+z76JHffev26aUl+8LSUupCa+ttC0Bza+m0C1S7gN93XF2n937wg73Pf9jV1QdWZV+wn1xygQgX4NLqutMX9MmDnz7y6aeffgY/j3z6zX1/98DLdgvY361WsMJ79sW3IL6MRoxCecP6zDsP/O7vv/e9P338/PPfeyNhlC8JN5eTpqfbp9vbL4S1F4UAiKOj70Wo26N6w0SegOWokIiw2qLpsISAALFWKDejk3oTbo5+uRJhCvuSnKMBAdvrEiKWk6IjLuGE4Ts4LBiGphOK+M30b8JGT5CWcwEB79HK6KQLo7T9Zm9SKb16L8IU3F5bOx0B8v0Wl5ZaXRbQF2BisdgPWRCWzx6rebn11tId14KltXWh7/aSpbVvaalvCXXaurBgASxvBe15688PffD8h6kNfbdu3bnlWgJBi4uLd1ytfbfv3Fn5GDDZ99iDv3vwsX37Pn3ks0ceOOW2WIDpdqt9sdXVCvnYU6UJpaWlCW98/4EHfvf9N8IAn48f+HvrG6V8SQhIKupMzEtM7KyNCEmsTYjAyghTVGJ7QELpKOUxXcgbTgggVe3tywmlXmU0oLcoKiFMoPguo9IlT5LBEi6EJCUkbKkt3caHrNHT7dEJW1hGI4KjhgPeqyUTTiya5qbzin5jAiZAICoxJHY0KhFb8qKiw8gMAnrzakdvkp5hOTnBN6lkdTv27sw5EVDq12e5dxssxm5ZunOnr+nZ248BLJ8++vrBpr7W1r7BQctC64JlybV0e+nOUl/rQutt122o6AO3t9D2+gd7H3rr+X/rgvTrtn1xYckFkLX29d1uXWz95MV9n3720cdPwHY18oFH94HIB164M2hBH7Z0qxUWAtqLFfUw+sb3fve7561vWEvf+P7vHng+Gi74WzW1JxaFQKmdtkaXD5SWWkcDTCbERZ1gLVU/GRBRagVccqw3l38zEGAaLgrmRmGlYdcw8jYakJSXU6oOU5eGmUzQJSIgwUoa4W00YIZSgHRzAIiOnc4L4QKsYeCBngwYtWI7tsLFk6abpBuIeRLFhN0cLhr1lII8E+WhqIcktnPLUcei2nHKFwLaO4+FNCMC6qTEY7XNpTmdte0htTnHoqxkoQQkHYsapcsgIC+vnL9q78yrnZ6O6iy6lOB3a2EBosvSbYsLcLm8iLDs++az6OZiPfj6bKvFsrBw+07fnUXgvN3X8MLly4+/cPDy5YMHfzK498OH/vDAm10NtxcXYedy6x7sXlx9txdv3/7FNz/bt+9PQZeDFi5zD38EBXEBxPpgCfS5Wm+37oX4Yh21WhGO//pfn4mALeaTh//fB54BgPgy6mhPjAoLKMXpW6OhIkwdnBTtqc1rDwMVL/eeGA2wBoC9WG9GR1vfu5STNz0QHXwOeEtLB8oH3gPJasAFFvJyRHTviQR1afBvYMDS0ujfLI+GgZ85EKEujR4NKO1NClZHWK0hnVHB0dbl5YiB3uAwdVh50rJ6NNqaELCchAOVWoOXw1BMQLS1Nyexdzk6QT0KPQMioslkEy7kFMGkojqTZkrfA1cVAbjkWNVW683RqGMEl8TemdGw4JzOJAfyO5I6o0rx9gHnorxycjUanJfYi9lYyLHhUT8LrH5Q/dI9S19fkAth+WjfY98UymMPPnHZ0rfU2rp0G82gz7Jw8vUP3oevP7z//vtvvfX+n9986P0HHnKd7HMtPQf6ttyytwJGlsvdj+779Jt1B5ee6zr48SMQZz77u9+90GC51wojgcPs62vF/Us0wSX6t//4j//426//9rdfT4aLAwkCLrh8wA1ZyULKaR8NiK7NS8xrj8prTwgbDSlKTMxJijCdAHsJCMk50VvU2ZmYc6K9aDogOmE5avhiGAIJuKhLo6LacxITh8+Z2nNCAsAL1eb0xgaDqMSoC2EJN6dzEjvzQhLAz3TCe2ltVEgODGKF9qJ28CylIcA4nBSRMABiYMzhYBAKnDnl4GXBYdUmJCAwpaPtnbUzo4gLF03spx0FzERbw3qBrXbGCriYwPhqO0PCSqFDAOAyStCwAi4XyRXgEfIGXN2MjoqK9gM4+voGmyy3La0Nlm8iLB999Nmnj4jlsdYgUGMfKJ3g0nb9necffueZh5/BDxQefuvDN9986PfPP3S7z7IEYtCywBYWmjLf/+izz97ZuOVqevyhxz56DMqjDzfcWrIsNFmWEJfWJrSXgdLo6FJrwW+/U0C+po9Mf6f/txffi6bFCrjUmrgAUwDcTmJtQERtZ1FtbU5nXnuAurYzJ6Q2sShp5gTYS1hU4vQA6C+qPXq6MyrCGpGUmDOaABIiAJcI6/CxotqQnM7hhN7EnNKwhN68ImvYcOdwSFRnTnBsUlEeNB6rHU0a7iwKORE9jGMUJeYM19Ym5iUFJPADXVAP5HTmRIUMHxtOKAfMatuXe2nPqAArjFS6XNvZ3mwNjko8ARM2waJozxvOybkJDjEkMaooygS4nIgtVc9EHQsJw5sLA1xgSWKJKMo7QK5gVkmj5M6Xz0X7weK9BQbzHISTjf8HYgIp+yAi7MOXjz797MNDTRBpLGBV4IL63A+9tvfPf/7zhx/uhZ8//9ubH3745kPPv9W02AcJApgelHtNTYfXnv/o030ftkF8P9n9RHX3+erq6tbFe4BL6+A9gK510YL2MoBziP7tK/+dKRm9pTwu0WqIL7UhtbUhJ0wQ92OTOot6IyLaEzvbuaS84WDTk+DmHBBfotUQcuDG83rfe+9cUdGFsNHaxJAAFJAAuNy0otYjDsB6jRhOTJoBPdU2Q8+I1Qhgc9R21nIzvbUh0eA0a0fV0cPHat9TT3cmTkeM1h4LcSQlDltNAcCujs45FmIdvZSTeEAdnJP3m4hoWNyrYSdqQ6gmg0F2AOByLAomXNtuTQjJA2STAkrLc4ra86JM0TA+zAkCyIWIAbJkABcruc2bgAu5Gi3Ku0CrrNYBv1ZQ+nOg077WQdcTH30mwCKUTz968ZfPNbU+Nxg5iErva3joYYLLXooOlDfffPhNiDxNYHgWyBMgV2iqyXzto8/2/dk9CIjaD+JDLwcPugeh9A32PWfpew5EvfWTAcBlAL4Rl+98R/jO6LVCLZbosPa8Y+C5OoumY0GFJvi5aY0YzYH4Ctos7w1OyiuKBlwGEJcAxOVmNKzv9oDgnKLym8sgYRTjC6xU0Bj4qXYPQhI9nNjrgAxp4MTF9sQcCAN509EBAdEDN0H5CeplYI4Iu5SXsxwRMd1Zqw7pDAnuLU/Ky7OCYk9AFKrtnAamvOCbA+3HiqaXoScONGAtH04sj4gGXBLz0ENGw/qp7YV1k0DfAwBwaClC50huD6RHRVvJbb5XlHcCr6Kji/Iu0XsHmX6DTYOtoM+mwci+wbbn9xFgHv1IKPs++l3q6T4CymATci51v/kWlr1vfQAvaDRv/uHDmqZB12CkpQn0PhjZ2jrY/a0PHt33yANdliYLdO1eunq5KRLEtw4C+AAdDPUc7iuXo5eXAZfk74jlv78CuCzTMgD3loPbl/ZyB2IynNh+cyD6JuZjtZ15RfB1rOjAAcAlAqoc0Tl5SaPLo9N5ww6wppvRKAConFHQ4gn1QDRI4JKKckovFOWMlg4fo/1zlkshruTlTGOASKy1RgSjlAQIWsHWUcAFbIYy5l0E+eVWEAO4lONl9IUoCDPD06NkpGhIO8pHo89FddYmwYSTBqyY2efkLcOsLyUBPsvD4AaHOzunSwfIzd0EXAaiyW2CmZyIHiAXiSdI1bK1dMAPMGlFxT8HSl089QACs+/BvofefAi+4evFQddzltbBpoW+SNBoU1OTBVQMZbCvpvtO9963Pvzw93trUpsGbw8Ogln19TUBLn3dQU2PffTIo5aDUBnZffDQ3j1BFsQEAxkMhpa1F+wlODoYoEl+RcLlO69kPEWnthw8EBGCOQsalRq0GgEBv3SZgBAW1RkF6XNISHt0LyxthCpsADRaGjywnFMUDBkrJGFQEJdSwKU3YmAZLW45Ki9pOrHWBE6H9p8O1kVP10JWAJBAHLBGLKOUURBabsVIDubBD7QMiOGqBlwSAJdL1mCrlfYcJco9MJx4YXTgNxAhTMvRoGXEpbk2sf1A3rB6GnAJzkmc1kFaUDsaHSzgsjywHAxf1qK8XnL1XtSxaViUwcHR53qD/WDH0dQHq9mC25WGjT99hpHlgf98Oejll8+8fPDll9u6n4NV3/Tcc32geLSrhUUM3C5766nFPzy8983391YvtjahHTwHBgHtYHmDfZ88uG/fI9/c+OcgV8PaT7756b73gxZbB4k5IQtAg3H/HMxhefm3Fa985xW+fOeVn/dGQy2W5ZugqgEr3kYExn1wXjcHbkLC2W6CrAbWKaTDowIu6Fx6R4OXS2vzQoaLLpYSAVbAxYoNN5eXwXU5rCFFUbVFSY7gqM729eUB63L5uXPRCdHL03l5vRjCRiMuAi7WUoKLFXBJgCCiXob0pDz6HOACPgtxOZCTd84afG4gYeAc9DyAYw1cgviiW74U1TkdQPQ+AOJMYJ+wmEh4AlyS1NbePDBHcnNgjRBf0GcFWzG+EGfYDvmxFdqWc3KW/TAugLoiUbF9rW0NCMynn/7p0GA3xoPD4JUiByMPg50AeKDySLAbMJ/DkTVLre8/D7C8Vb3QCi2RNdA6iIY0GFn3XOTlukf3ffbIow8HzVx967FHPv27B9tcz0VCaoEiCNtbV1MpLsHJIa+8wuDyVHQwjwus2Kjl6HPB5wgusD/LSzJBLgkg9OKlY7ooCnEJxthxczkHIsvAOSskWLCTphIILuiadMtoLxHW3mHccVsHIKEI5hJCikKstUUhJg7EnXC0d+ZEm4B52mpFXKIRl1FsManbYaByERcI/p1Jzcuwj2o2HchLPGc9B3MtJ4Ht0nDndFg5zh1xCRgAVzd8LgKzDMRlNNhaC/tKuKPg4FLRjwVHox9DKJeXIUUJjgg7N3wsCuILev7Bw5FNhwcjwSbaUn+HwHz2+4ODkVSJJK5A9AAv1PdcZM3hwwDgcxBwTu99/g8PffD+Sy4XohGJbPAW2YpqtzS9+oeP9n326acQqj59ZB/YS1sTEd9EoB1sjUR7KQ8+B9AkV7zCFMTlHCnBupBjOQPRsKaDI+B+RktrOzuL8nLyOkOspSGwdSiCjFmd1JlTfnP4WMgouJxjOUlwf1HHYMlTAdbpziLruSII5cFQXasGb3ass/1m8ABoEfofK0qKgNSiCL1R9Ghv0bG8ENj3Qazp7Sw6ALiAdqz8QNOll4o6TwwEg4D20mCQknMiKbETe4ZYcbrBy+Bzbw5cGD7W7rhE6WNREdHTicdCbkaDGajPFR2bjiiPPpF3jHYonT52LA9KYlTwaCKmBJDgnIhOyjmWmAPhbPjAsl83LnHABKCpw4Xc1vAxAPPIg4fgGgyhri7yMEDxHHI9Byrv7kblw7dr8PcP/9sHb720AH7pMKkb7MPAcxh9FUSZy+8/+qlQHv29q/UwCUvICXyDhzEfKw8uL1/+dkjcK69UCt8VP39q+dxFUs5Ft0eFXFwuh6uB9qj24IG324eLhqdDoqZhkbVHFeUMT1+M7o2qvRgdEpW0vHygNmc4aeASLPOcYOwEZTkpqnb5Ym3UieiLwdANDPGpKCDKLwYfAGeXg72+PT2cUzTcfjE4+CJctZcTUSeiai8tLycNhwQvX2xHxung5Uu1UReWz537+nDScnBvbU7UieVpaBluDw4up0MV5S1bQWySlY49HdVuDT5QG9U7cDEpKsRajlfl55a/DkKD6dSGc/Cr9uJA7TC5HD4BtbU5RUU5ISeCL/p1H26KrEOVgcbJj/v0x589su/hg5Hd6JIAlxpQZh1FaJCE/EjUcdPCmw8//IeXXJAGAC6Rh7vRP9XUdAN0kXjRGvTig49+hnv9j775UJcFJUd2g7DIPurHwF4OnCsHk8n4ube9BEMtXw4coO8XL12Aq3PnTvSeuHjxwNsXy88FH+jtPbB8EVgulZdfQr5zF/HVCrla7agg4e23D1wkHLwsIN6+iI3BIKr3IvQ/d7G8N+nARRAEgnsPQIGL8guX4PUSVgeTgXBKB0AUDvU2DHXpRO8B5O89AbCQcg5MMER36RJhwnLpxAWofRsayt8+cOlc+YELlE24pbcPnDhx4MIJIM+RqwsnTsAcgst7p5N6cQp+4JhqukFb3ZF8GXT3PfDgMy60AECsqQkBAYC6QaUADlgPwbEu0lLz4ot7ELpuEIFKP3y4uw7ZkAegu22PfPOBBx988E9vDtr7Bqn4GvSLgGNTJNrLgXOXQDFfd7Ll573B5Zf4Aup7W7yC14sXg8GWSDu8weT5BlL1NtScO4CHficGDvAC3g6+CD/nsMM55KYEfgEzrS//NlxdvIRV3w4up6LKL54jY16kr4QRdPY2EUCHOlf+9kUyHXGkJMgEl7F7OT9jylh+6e23kYtO+xI/KmmCAi/l9CqYHxkvYKrlfrjGYTHDV11NZDcSNS73gsuCSgRbwAoApptYE654BAGVX0cNB0CpASQisV83QgjmheYCDZGDLjxVu71oiSQCQBRy1WC3QYwvJ2D1XCrv/e1vQ8Tv5K9fKj8glktbruB+mMtLYoNQFXwAYJle3t5N6Hvgkpco7yuB4QArmmn2IVEaqfxS0vQBsE1xzgw7+yL24AEldcIlIxT8WA2uZdBkTXcdxaUGthpQUUN8Vg22AQxgCYBNDQEBwUAHBx4usg7bUOVoD4ja4Rr0ftRwIGFoHaSGAvDWkCVQg1EG7KXqqQMUgl6+PAU/Jw78e8qlC9PtSeWXDvxvKf9jx/WrQ1xAwxQVork6gs8eeNtDwKnZA41oN4jZHmRC54cXkYhPt4BLDfbDFsTlMHaoqauh4hEXXjpF/62rEU/1lv+P186l8gP/IYof+JY93d3V8Fa3h+iaehygquvq9uzZQ1QJcCAXwWAPqHoPkNV11JSgGUiCTR0KwD57CIn83TVEOlygBF56TffhDw55nnrqRPBu2aH4oVUQrYEGKTDob1CFe/aQd2iro0udqB99GDLXVaP/It4JFI8msgdwAh60IMCgBqGqo5JxBEE6Gtue7sg/HOI+6f36btmp+OH6Rjsgb6Dkuj3ESmrowq/ZQxvQQmr4Woz0RPt1ImJ11TQG1ewhXwRSfEdO4tXqKFxYuQflDu69vsJ9krr73P6Oz/MTxeFaRu3XETTQMvC9Gtc9AEPcUQ2Bji9EucQYmDoQU00wqaup7qYA1PBtdWQQOgzKrDl8/vc/Xud2y05l1a+7ulpSHmqt+jxqDuNHdTUovrqa6BuxE4GpJp3q4A2u99D+6NboBTgtQWT1eUm8UFVNpEdWf/jBW3t3Kju3fFHhe7711pdg+utH/+vn92XF+oFeUcd7zlMdV+P7nvNkrQMkaCTVROvQ0i24IwAPDYOoHDpUi3ZRw4shTdXVRDZKrztfXUevseE8ER9J8j/i5dAJknyAukwStOrqcIw66hJr+LBHzI24STQ/sG+Sb5B0o5u34xoa/TBDRBdLxdMME99pXQ2Gxz1EOpHfzUdV6rr3kBZsp+kM9b/Eee+hG4kaknqSnFUQz+ebNSQFiqxBX1NXw0eEbnoH3TQYoHjUOMQBkix105uro6OTydd1+1W/VE00+BK/rkGx56+D6kCT1f/pJVju5/Eay57zwAM3RAziejVd/Od5RIARELpOocJynr6/9BIFp1oSfx3FXwfMq7t5EwMlEbBppoB+lDpE6jpJri0MQ70uCWN7KNZ0Hnuo9vZ0i171pW7eguuqiXhMIOuIBqsxywTN8ZogyaZY6uoEdHAtUjcCA5HQKXmMujq6Zunkcc7oV4jDx7Fw0fLNBETeVRDAyXojUlEpdbyL795DJn9ekO5HVzboHFY+XeL4ev08XezXASNer+T1PFFtXTWw4wUyQr/riMN5bL9OxZEKoQdeCzDSb0AG37vPQy9ROpGxhxocsSqsuU4NshvNmF8dVPz183wXHOL869Aq2iedPIi/TmZXvWcPI56Q54nR8uIR05fO0/nS1XSdit3Dj4aTJ9zEoYBQcfIonhe+R5w9nRrpcJ7qvvp8NcNGxFPqOtENmTyvGzploPzIHV2HW8MhX+KZr0NfMtfr1/GS9IG2l67zxnP9dTJDCuBLwLMHuYHl9Zew+0uvX69+/Tod/zxR1OvXUa1gPNep+D0gCi2HSge+l0AKmuYeXnx19esC7CDsP9E7een8SzgwvOAIL1G3C9Lw1q6TGaI4MgSqAqRTZePIwE8VB9JB0UT86zh7lHSe9H4J5IDjQNbXaT/sD/cMkye6uS7ohiwTWLN09igdec+jG6CT53VzHicPs79OZ08nf51ojCygPWTy54XJi7oBXBYXFxZaF6Dg+1JTq8t+KzV1MXVxaRCfd021WJYWWlsXbuFDRgsLfci3eKu1aWGhacHSeu9enyV1IfVe62LrgsXS6upbSCVsFnvqQh9U3FpoXbQvNLUCzyJ5FLPJZbcvdNkXU0/2gYh7drvFgg/agniLHeh7qSD+Foh3LeBTM633lhboxUKTxeK63bdAZ4GPqfdZYFKL/OThAmazBDNwLaSC+EV7E4h3uW9ZLHTytyzAeBukti7eAlkuEIjSby3APFtboTPw3b63sETEL9lTXTj5VDp5qhvX7aWm265bt1LtqJsm1E2bRRTvAhFLIGwxFXXjaiKTv5cKt4Pimyx9MHvLAj4PlLrgSk218LpZJLpZAO1R3dxa6FoE3QyCeL//c7fcj8Xv/9ot92PxM9t2y31XRsx++l0t3Hdlc1Pvp9/cLfdf2cVlF5fdsovLLi67ZReXXVx2yy4uu2UXl11cdsv/PFxkBp/Fq162cxfb54j2kmD7kp12ccFi2yxTyOXbv7Wbd7XCtVxrVnp1Miskvrs76tim1EoSNaw8hX4XmC/ARTYfN6WLiNj6rS60aXsEUleg3WQUKbsrDxf5+jWyHSQflZkLpyJ4EeHxSm2BTs3L61HsWswX4WJOXvXxaJNuSC+vEqnkMplXl6E0oUWdUbaThm0yTYFH4OtR2JzhAjFTrzGIx6pHd3Hx6ca0Bc0+njjrkZdVTIkgxelZXAxl/WqhKdxp3gkXmVI+KwoszFJm6ASiashskEllFxcfyrvrnPVsx8VUWKYtMPGEp0euZJVv0PbMCIz1CuWOuJQNiRbnyBgpE+VxIE/rjIuLp19f3WDzebiYpWXMFHWFTRHOxTZDmeEchV7hxQYeSYTyc92YaFaecCeEK46j8rj6LGVFmpqUX6urKswy2y4u2xZ1/YoPXNLkI4qC2dkeLOH+xFfZbMTpwFvZkOTh4ulit5EWG+ERcDEoRDfWXKDYVPTz8mZnh8B4miVPqJft2svWRQ3LOFZ0NmlVaaRMpdUrRiAXFopGuUmUrjcrQfMGrWgHq7Pyedum7ehRm8xm1mi1Ws1dm4x8RIqi5WJ2kJlRJivTSvIMih4xktVreUj5D1dJVy/yb7B8uZl/Di56Z5WQjs30gLenJV5u1iiccixOp1yr35TJ9ApnRXJyRoVTC3YghBdTvQJtxKaRx1ck99fDV/JQvLyM2IzNPKSTzGrEjJKIQNjybDK5WfK80SATvmhPgTT8zeYEBtm/DxeZJllSXsW8WEZscv+qcFKqeuLKZDZtfH+aA0tVskJyY+qKMptsU+PM8J9yOEyOTPhxTPlXKMxHbUdt2n6HEF5m5QaFfxovL3zIXJYxJbk4stPki6JMCdseqUK7Y1ZhE82SWaC+TGxb3eev5Z2tVKi3bQrRdidW2FCXeTf5lrojLjaZlFrFzjoN4rI1yCocHlq4tDizTFuYlsmzOfx7fi0odUqulCkVyVVqNkbNqP3lerAiebgQQxz1Wlv8FMfLUw/JtAVrArfHMSUWna7HqTcY5AVTOkKrZ+N3iD02mXA6JDPwJ0NCpU068LEp6YkRyStk/BqWMUdCwomSmHgIIsSTJuEsSYY2YKP9lVSUTWg4KttyWGUoC69gLUaaLd9HRgcY2REXm0JMZU2gPH56cDtlhWJWGy6XaZOZpG3d0Swm0AqZ3umv3pZlQ/Yss8UxllhWliFypTkN0qhbSlW82aAU/R+kCzvYi0GPR0Dzhk1lGVmZ8Ab3PK+QK7Qyw10tX/SgQzz8MaNONFrE2GYr05bJ9DyDEijCKBw/oFyFFtjNlEGzqdSQd5tBr8GTDdtmmcam15hl4No1wKsB3rsaYThhdllpGSwudLYjsB7o1JSwq8YBFDvioo/XCSmvqaeCbiji4pzauwp/MR3w1xji0jy+tKgu1NjkPQ4f6RxsHMuSJSTkMoW/YJcr/gpZvG4HXMLj5w2K+hkxVVP6NBebQeuvDnCo6zVGZTJMD7L9Qn+NUVugdpjS4o3aWbUuLU3n6FFcyypUOxzqHoXBmNU/NTRiUBrgvcKoCNfppnTqcMVcIRgpmKmctwWNP7pqp0EmJ/W6Hk1WOHDq0gq1WT3+sA5kWv8CmWK2wgjrbgq8dlq8AcZFVvVUvICFoayKsZejkOXAjkCXbJbBgkS5PU6ZoSINfMIOuEA2JimvWT01UJUKX9Ypf7k5rsojnrRkaepNPrUIHk5bL8CSmVYlYrzaX2ZQSPvIWa3BKeZmumSNBJlHXQXZ8+yUR8TFNhKXJp3x+N7ZGLSzsQVyZw9shAz1OoVxc8Tsn6qdq+cK5ENTaqe+or5e9+v6wqH5rHquxymvXw8HhPy5Ho0RkvcpLtkod1QVFvbXF2rP+nMFhYX+jio5cV5ZBc39zoqpNLkxnptN7u/vT87SqtWFhfWz0LnfpDDC3i223ihX91+bj3NMDckzptSwDqrU/YXA7JT5xMWgSJvph9muFpiNztiewsKCTJhzIVfQ378jLooeRuNCQOF6tOZk9qQlLk08QjN9MsOsboWyQlj5ptkKZ4EYeAo0Mmf4imhWZbIKxo1tKvxNUg4IzkAuQgi4aOp/wUeyAoXvuCqTJXMZcwZDVgHnNNZPAS4Gc0GVRpPmf/banFPdb5ib0/SEZ83NjQyZCs4aDXP4BgjoIIDODcXOZBiduoy5ubmzZw1ZPVNauIrnkklcUqj954xzTkAu3uG8dnbu7MiINqIHGLL6M+UKqAbDXJdfc04lX4OVr7hmmJOrZ89qqvzPGpFZii8MLrIRfy4eZnu2YCXe6Fx1zp2di+MqjIXqsrmzO+Gy6ZzyZQf1ek2BqH5/rbYgU/RcPfVVEpIFWq3onqqGNHelEzX/LJkUUKqG9BoxNwMwGeNRJ2ttSoM+2SEtAjGFTovbIegbNOFVWiMEU3m93NA/pUV7IbiEa4xGfVy8zWDU9Hxbc82g6YlQXJPZjFn+asXZAsev++evafw9jgyjPKLCaMQIjLhcMxrlXCHqUabVzWYZjPNDTpkTcCExWqHrMRqNIxkeeVZa+AjYRvi8Ua5LvhYHKBlsBnNFIeIyZ/SO+wwuBq0aHKDNZtSqe0bkM06j4ZqC4mLcKe7bzBUmn4cwSsWsGF4KNdJmAxyFIkM0HkeGpiJN4AuvkCv6xbBRb9ZLvm9WDlm3gN9MgcYgGU9V/LwM4rWIYbhcW+gQg9cO5zPgiwpGMA0bOTuiRHtRor1o55K5qfp4LaZhBs1suNZoACVmGZVKw0iyw3m2AFJ07TVnVVVVskGuC8/ISE52Gs726JwKxVD4FO/HCrm0/jjNyJzN2ewPDBlyo2IqXKtwJgNgI4UmMJXmQqMB7MWYYXJeU4IKR84atOFTyRnJhXFmg09cnKYhvBGZLbzqrHxmSKuRz644jcmmwuTkneK+tr/ZV/CVZzEH+UPMFictbsQ2JOYAVU7mbFM329OTJijfkWxmzhHAqYkxg5vKMJdJxjOrgPlDBiYY2my8kz+8ie2R77SRAFzqaY5sNAAuWh6Xa/NDVY5MXb8GljHgojFClPWnuGTonGf9e5LThozJacnhhbDgVyFQq5PnzhZwEJJnPP0jMppIVVSZPtElzxucnAND+ZBRO+V5Va1ehTAyEv+LDENhpvyaTY64OORGxMUA8M9yOl2EGhIQpQ9c5uI9TiRsI/5V83IHinVkzBuSY3UROt+42JTyHjHl9TTzBT8d0YjR3BMul1Ip8PiGLLGJ81copLPo2Jn19VgpHyuLF43MkTyvLPxEClfMqLEFWlinhvm4KuHjhQrB5nDXtDMuBQbQge2uxmyrT9POKWXmAnjbHMlSxM1y/fMG1l5+CB4e7cXf3xleoJ31d1b1Ay71CpIQZ/WoK+TODMcsXevKeYNGERe+UgiLPEMrJydGU1VOZ3z9OngtbXi4ticcfJKcsZcyzQjUA6ucyZO97WVmCBICJdrLvNzUHx8fr5iXGQodToXcNy6yu9JBfGYVPVTs6ZntiZ/Xim6suV7rFFMzR4XZoO0Rc4BkbdwO+5BweZlkZFVx82y40tji2NxMBl5HGc/LWe8p4I+F1uu1O54yY3zRGGUyY/xUnLH+WQg1Rs1sVZa23gmhQottvL1oetQQX2QQX15VnO3p0SRP+VfFKdIAF3UFsBohe4b4YjSe9dfh+pDJ5P6Ka3NGbVq4zflriC/AMaLF+DIHVRCMkk39EPFtI4ALjS8yyD3Cs7Kq/I3A/LnxBWahdfTMyZudxjmMRIZCtdk4twMu5kIxoFdlyPlDRdgryeQMFFrp2GXKaWM+dTQNSQeYnGe1ecYklJkCrUY0Mo+/Qilt/WML5+eZLavTjOHW5uTXQXNaVYAQk+7ueMQE65/LMCAEJrkxmfs5aFiu9h+ROyAfM2p4XKo0c4aRimbIx4yQlvmPnJ2dNcunZqo0iql+o1PNxP05w9lCNX6wLQPvVQByNWfCZU6TEPcjZg1of1WbYCceRxpkfzK5rhDyMR3kYyPxXM8IxP2RneM+5GOeuBGD8Ww9R/IxPHnfRFw0xvkd/JhW2jzOKkZkI1hkIzID+1GlU8OkzHIDc7JVJVeIhzimguSMjAqhZMjNCulgstBsrpAspGIEUiIp1yMREdYpD5VpJlbcunzOqaAifKY+fiicyxiBGKJOdkJUiIdUi/N3/rynOXkE9BhuhTTNoCngeuLi+01VsH8Jr8o6O8vVzylMsAFZr8JInaw5OwuIyCDbcmLch25cffzPZ2cqAKGeiuTk5AqN1hQuM9g0/jqwUAgk/iMGGyRrsH+p4NJ+Hl8IQF3TVjlAWnKy3OZ7/6KtyuyPi/P3FOiNTi6e1hv6uf4d4r5N7wxfFR09bOHED3YV9UxWqyhwMCcyCv9PxAN6jfQEwJR8fl6jkE4fzXEifI4Kg7Qv9cw6mU+XmwvLRkimIm1oBJgVts/BBTYaPQ61I60iC3QqD89UO6riRwwyyEIgrBZmGUDBhfUQ8SH+F+ocv1b7K0bmsgr7s+YqepxGrf8QOOOqqvCqtHD5WTwugHUxG48LxDaiwP3+FIRl+WwVlh5Flj+k0DbzUA9sKueHwuONmzZQQpxRllUx5VCre+RzBk1/WjgyV9j4wO+NC8zWX63+dURhFuz3Z/lsxhA3C3184iJjzEKdLO0VYJri2b+pXiufFXM2XQZscIXFnllhk3CZ1Rrn42anqtLwK61AoS1kj8O0s9ITF1ozM2rGvBH0AbgUmLYckyk/96DcZsiSxzm1mCyPGDTyIad2Dg8jsxRD8YqzeIKpPJulJHxnFRBmAb5NqNm0nc2at81nzW/OZ2HRZOnhCvEAWpQ7FK89K0MODfLMIzuUs1l68koIrLPJRrTx8XIULUjL8unHqNR4kAomyUvbxOlkZWl948Is4/D4uwwucWrpsZi7Tim2m6bCp8STY7XTwOACliTlZgVahZgdmPwVzAdkpgybpj9AytQ0Nr0STwALvc4+1ZAOyL4AGCwjm+yxLh7bjpAjYPr5qfQE4gg5T5YJZ8n4MzIyB18jUMOeNUvCQNQc8ev8Ryky4UxaKb7JhCcUbYQZpUm4eJ1b2sRDaxsTdkZGfO73bYwmm/2lJytsNrO4/YYYYtjpjBGaJH3r6jMKRNVGxM/L2QeZyqRHCKbiwYeI+K2G9ydXKJQyGXPaTB9quqvXf8FHfjYpXZOJlz7QtMn+sqcHbIwI2xfyChzKTaVXwuh9nrzDB0O+P3/BjyoFDa0XSk/neXmVHq0hzjcuDth6SPbicThMHsn3bQ5JFueUacXosdojN0gZAdCZpnCnbSsuVRXkU1Lz3+zHyJDoOr/Mg4u+cWFSK/XQCINLfLiQpjn6NcZ432f8UxUag7ZgZnvDjL9iU/qokqtSGOTSFrNfa2RxoYeTMpm+IoJ9RsqZ7O9fkKH9G35M5uz8X/s5sg2yPnETXuVkvIJ0ishNDZUZ5JLf4UzS55JpTthlb99XetT1kC5KDzLF+oPFPSt6uCG9QdvjZXaYEMtYo2zuqXBWQL70+SnZ/W4xsr8eF4XwSbFnvUDB4IKbc/7Ef1auNLDRoadqRvgwoAe6yDQVVbHeR549FVqlzDakEyToILwAzsJH0nLYWmQInyhjzVS8DXGJl861p4bkzriC8PB6xX/4x8p2sJf+Qr4kx2skFdg0cUJ9f5xGhp+dhesgq1dX+VfEVwhNhfGwzm3AWz9bFUEeyHCo02brM+RZGOHkyYIECOua+OR+gdLKZEpFRr04MtTYyEZbxGWmQKt3JhfU+/d/NXGBHCLLLHyV6b0SAkitacM8KA2U7wQ19ycPKcwajdiHOlDZvFYeJ4AwJNfOK4ky9ZJoyFT0ZkGeXkk+IS/LYtplmG9KfqzKCfsw2GgnD2ltX01cbNJjW7Ytz5p4NUBYLtNAMW/iw5biIzPCc5Z6s4YvZr2Qk8okETZ8XMRLno1phXa92axX1H/CnGQi2HKF5u5X+TnYL5nS80j4WMHk9EZ4KO/LLXCWC7LyjIwMf/HJAH+M9jKZueyr8NDyv/v3Kz/3odR/11OrBn3GlFonHWvH04eJ/pafgf1fiMv/vOd4ZVr2WZsI8QmYr8QT/vcvLjKb9OElfqSv/Ur9ysX9i4uBOV2GmK/Y/Er9Jsx9i4vNoPEXd/6wJbV9tX4T5j62l7KhgoJ6/IItadlXItj/TeCyqTx7Nuss+Zkf+cr9Ot99jAv+CgJu+MWd6i4u95HRKJWbX8Wy+3d7dnHZLbu47OKyW3Zx2cVlt+zislt2cdnFZbfs4vIfERezcrfcf8Xsp5fZdr/wwRHZ/TQdvd/PvrZb7r/yM79/+Nlu+dnP/uFrP/uH+6lk+Wl/ult++tOyr/3sp2X3UdH4af+pI/ArX/6l7Gf/8A39fRX3Nf/0rirwq/xVXFz8bkfZ1/6hbFN23/yjRJke7KX4K28uxWgvZT+U3U/7F80/qb7ysAAuYC9K2/2Ey6697NrL/Wwvyl17uR/t5Wu79nIf4jKu+VuNLz6ZVKovwVX85YRJdcVeYoESCnE5vtyQ6ksNuvN9qsBe9F72omRevf4wgi+CvApPuvHvPgQoffdXej8jR4kvbS8+mFQdExPjX8jls6cPWKXr3IkJieoASigdPlYC9hyfyP0yg+54nyrVuJiPKRnl/CWEzWjg8SD/MM0XID4JpYz/+ygCvDJC8vbCz1nF3oAvgl/BPDE+NjYe+AXMPgn61kHUuXW08fzcG4H5UosqZpKWmLEt0qSeYyqRULEz3HFu3nLQXvh8jNWaaAA2ltj0SdhsWeTv+gGhz5rfkW07YTDKsuBHatFn4XhmYi+8BtgbUKmKWSJwK1GsGssvaUwvGd9266q/gOjY2qLKza1sPL4/NDCX1k3EHDl+/Pj+9P3Hj6c1luQGstxj/NC5oftDO7bjLni3MR9Ied0Ik4/dVbK6w7ejd31plQGEEDabwr9fa4RrW9ZQgdOwuUMfm5c0IGTzcQWz/XKZjW9XyuQF8TI8hwF7EaZJ38bYW/elT55tfKJlhjsSOE7rANwxqoGxMSkc8HUqIqeYECrSjr6jpLFFhVpTYRUvejy3Mm1GZ3K0BI6T/hPZjbqp42rOkZamSy/JJVJVN6gAOsCNwNwj3JGODiqHnSFzO8Ve8LN3pUIGfl/Jw6InH+Eq7xI70VNF0t+A1hPlKXk2ShBmmzKeMxUaDHfx75KvZhgJ111kUOrv8oRQpxQJ5aZNluFwVHFVChkdQak3xHmSbcq7aC9PjzGz5efME4xWBcD4VTqmys8+znHHU3IJ0ZF/JZ8EG8Ar/8qVCeJaxnPz8/MhKoypSGwYCwTHNT7RkQu8udC/0pQ+PjHWMXEln7gtFF08oWpcbUxpCUgroVWBN1IqS1KOcPsrSypTxnMnUHLgxBUQQNUKsq7kAy7j48XjEzDaePHW6fq4K6/1N0b2L5iP3VWysFBA7jKEkn/zRSidsZzOaSR/E4SrMOIfhDAajbDwyd/Jkl6VMiPWb/KIG8rSno1X1HOF9NN8kGaI4wAXw4if9l+eJpq+sR2JzyU68kNn9qeZQnOBUE3kp1RWloD2x8YmxksqK7MBI1VufgxUqvJBkzGT2Gd8cqxjMiUXGEoCc8fHoX/K+Hj+05WVlYET/0oX+8Tkfk/lN2KmHCW5HdTcEIxQrrEjP7djLHeyMmUydyIbxI5NQHPuBIyQMtGCuExMwBRScifG6ES/+EaocRNDfprEF/qfOPV0MdNlrmeVT1vu+iKUNqfJ4QjXGJWAyyrgYjBo5XItGJA+yyaDmKPBV6XGbDBq5U6ol9EBDNpfT41cc3L+5F/k4WiGeLAXm1kLfoz4g0kyzxs3yMwnyQ1M8jdI3iaZFhWy5Y6nc5UtXOMkcOSPtRw3xU4dyR4fmyhp1JlMx1vAWCZC96tn1PsrA3NT0o/EqMZyS9JDx0P3tzSqY3WN2RMtU54AXct4ZbpjVZ1emasionPHGrnG7JbmtBSwMJhUMYSgwIlQLl010RHaeGS/ujG3I/R4QDP2gBgUut/RrDuS7jkynj/ZkjbTPNUyOU6nO1YsTZdHip87f1fMXY/FBJZ97W7ZXUE3+O+fCCxm8lc49GY9S9AWAovIZrM5Z2Zh2c8ZNjX+KxVGQ1lFeOYvqjI0hjh/uWFTP+TvlMmUTn+nbagqcz0tWSMjiNuUZWm/cGb5cxn4a4p6XBhz4MdGZBX+eM4vTnByUppt8Q1CjBECkGAJuKni/BL1VEyKTl0JWHQciVU3Nqq5xpT8lOPc8cZ0zhRanB+qbt5/ZD+nqwTW4ymBqnxY9uMtphVHeuMU1xhYeTwWtFuSFrv/yHEurYRsOcZu5KakBRwP0IWOj/PzgFfomD45EXhkhePSKgNbHCDgOLc/JTc31OGBzs0mTwtMgcMpNB9R5YoYjAkCvIhAhuAX29PCfl9pNrOwmKny9UcZwqtFQE9mgzWvrXKAJ9MWeCqM8xmrjv7+NK7wbBzXbzOU9eC//jD7c/Hx6tH6wiquvsxGBRjiHVWz3Cz+YRUCi80Qt5osk/mvkjx5jIWFJ7xgmZwM3HKf4xBtG3Nz07mWjvH8UNNU6Nh4pZoLnWjk9peMqVo4R3bJFAdWEgMVHSXqtJRxWPaextwW00xLdnGlrrkkN7Q5fXIcpPyX/Oz9gBgGqpjA/JI0jpuqhGAxHjPJL+b80NX07AkY0HGkBDA2tYxN3NhvCgXW5iMxgSnpHq4FppBWCblcmqkSDG3Se+47YiS0qHLJfl8mIeEFyxbCthUj8pfZOH9DPBeuNRI/5lRXOedGFOGfOLVTVVqjIo2bUhi1aVUKf49zbk5u4vCPwyn1ZQbDkIfz1GshGimpTNtQbPKIrWAV7KVYFUNhiSHTJETxjgRlU8G61pVcuVLp2J+dHwjogNuaODIFy99ROR6YP5aeltISux8WeW72VHMK2Es24hLbONHSnJ49jniG5lbOQNxv5NJjrlxJORIKiR3MI7fyeLOOA8kxlSWwmDtAd5BIgL1k5wMu6Sm5kJy3BOZfyW2ENRDK7c/OVU2kpHEtk+meUMgf8sGx5gKg0nQF5QPRwRJeLcVkv6/cNBNNg/KVtqMSEkoWFkjSvFruEsKmR1zOFnDJxizAxVbIVVwzGozO5n59wbrzWty6yRFvjP9FvybcM2S4ZnQWKmQyGG1eljHlSMO/zKyQkz96oyyTob3oC9Beno4h5szeTWAMg4SKITpUPNtEqEnXEhra4jBVXklJU5fkQl6bXfmvoab9KRgmSirHQXMdsNgnAALEBcJBS/MRjNGq8XFobJkAXCZzKx3g91ogD+jAASbADaaXpHP7xyqnjnTk4iKAyE/8GODiaRkf74Dw3tKYvt9hCp04wrXAas9FYSnHV/cfaUxv3A9dA73mPrmF6Ai8sa2F7vfv8vouY22izMxYC2nRb2dT6s3xHn+DQT6llhsKVofM/p6e5Pr6wh5uVjPEZRgKY3t0hSOFXJwtmXP4JzvxXykBLEqD02EakqetZhj60xQ2Ihrjvh5x0fxL9qSExA10Hh0qhghU+WiZVKkaOW4m1jTDQS5UooN0WRWTPXHlGy2xjWAZgWO5V640cpWoAbCIFsAlZnxyPNTUSHMnxCU0HzGE/Uq6CRzXkcncsZiYcYAurSQ/Bdxao+kIJNExqDXYKHHpY/m5jTOhueO5qpY0bsaRFmCqzG9EXFToUQGXWDX+azl12pFskmpNsnP3Wl+TsAxxEfAEtjytQj9WBk4KUiGqb0JsMsQmIWy2u2VmTBCAAEUilEiY9RBf8G8pe2a1hZ4hfQ+nw3+NqqvqL1Oo/RX+VfHhPYoencIwHxe+ypl64kdkIEA20sP1K8HpmeKqPFqZDRaB0hC/WnhXWbACeTLxSzHZ9AYm2RvYibiRPVEyBWG2sbGl0TGVkpI2VTIeExM4WQmZVHrMOGQ7JZWBoHo0xHy0F93x7LFsMDGILxwu+jGozK8M2J89PpmdEtqC8XpyLEaV29EIsE1MlKSZHDrIwGOo98kluKgaTS25kI05HEcgT073IC5H0KN2EHtRt1SGQsYdWhmDOdxkNjt3SmTHoLXAjRTzsHQU0wHGshEXDTiyo6BvM7GJMgqLmTissrsEFtJSVqbcQigRIyfXAxvRrAKuoN40pJ9dz8A/kOqMc5qzZnUZVQVl/lPJOn/9SJZGEZ/h75hyohc0mNNmwKEZhhw6R3iZDGGBfGy10CYj9jImwZKNtl0ck42brbFsaiDZJAvAlg7Chjc9NtESm14yCbkv7DdCA/c3hwaOjV9pAc+m06XkF493pDtKUJm5HVcm07gStBdohxgfCPbyr+Nj2enEXtI7xo8ch23PeKVDV4InKohL/kRufqUOQscEzgMVmQuJXAxk0LBZyo2BWJY7kT/RuFp5BUYYz++4Ar6vRQV5wJWJiSuVx0lCJsIyxsPSIc2dxYjc4lj2HzG+aH5oQ2sxg00oy9AaNs0ahOUuIZQ8RmVlNgG9TaJIIDSYJ3M9etlRg2LKNOUYMtR74q5dM15T9CTPzxV60tQVxgyTzjQESUGB2Wg7W8gV4oZFZtZlKowATMaqJ8MAuxvcacb9AvLkApqPBRIkcJpoOtnZzCJjWjqghRIxuP1rwTiRC04ekl/IoPIhzHChY+CCsnPBY6mzS9TNLblXwGyOq2LUjkrQmY7g0jIOmQMJ26vp+bDm90Pch2CFG/yO8ZZmiPn5kAtz6tAOkjXB8sD4AvnckbVQINO5I7n5qhZHZigkHY6W8SuTjc0QrFog1b5ypQQggi2tqHwRFgGJGEKM0WUYk008Wnb203w+RpCwbc6Xkb9SCISSYkQJ/LPGvLVsJWBvAn7MoJSZM/BP6BqHuG8rjEbFLJcMwV/NTcmvwWuV4pomjaswXJuDnc48RJh5yJwLsowGTT0HgYjkycr5imaKC+Zjor4DqfI7CFFMMPJuIXcT0wF5j7oSNwox4yUBXAnkubpG2JSkp+BKh/2LiWuJ6WgxNafD1kRXiemXDvc3XDrAeARgGcf8GtTaWIn8Rxod4JFyMR9LQc4j+03q483qlsBxXNLZONr+lAlIwY6MqSZCHSbYvkBMSguFdDyWXkOMI1PQYcqGM6T6HuORQJvAu1LxsNBbJAS0xIzRz/dBqwQJNBB0YmgthLDZBNPRlM0LdmQDQjQqmX6ICzcYIAvAv2qTbND6czrcv8xqjDZIkqs01xRqrmDeMJ/hcRQk+3P4T5jANu9CW09yfzhXFY5nZCCtTJnB9cvuzqK9+FI+ISgsHd4E3LRqHLbyLWOotRTVWEt6ZWDJkTRTs64xJRD2evvVzbDfT4EVCbtxDraOoIiSI7pm0/7GdEiO00NBKeMt6eD5jjiaj2TDft9jSmuJyUVPM5abckTHcWvHK0uOwAi5gWMpMFp+5f6WmInx0PTQscBcVWhabKzuSAsElNzAluMzHFynh8bgFJqhHmDZOl1idCJGBBZqLSJRPE7Ok/UEFn2ZhofFi8CQr6GBRsCIxBaN+SgGGnlBhUEGzDJFf0G8zaYtrPKsphUqDGBUQwVx5nlNRr3ToDdrhsJNHh3s+2VHzZqyTYPc38FxugKFvMAfcFGWaWzy+nh9WUUB5mMCEirJQFIoRikqkRBujbaklFBiUjWuSknJDlSVhELEHSfcEHtT0PHl5qZgJaxfQK8ktLIEVmbHWEoK+piYkmzVeExlaIlqHPhDS8A0VDEp4FZyYypboD/oC/g6YGgcJ7sEV3Z2CYa68exK7DZWWQn7oI4S7NuRApPKVZW0hJaMUWuRpivCggaSItgRhpsUyXSeJueWUIiBABJHCSybBBbbpoSRkm8BAkwHMzUgjm4Coc8ybwKB/1Ndq1HKZHp5XLwCDERTZpvPAjMym7MAd/y3xZAMaGD3okdcZTJtfFy8PAu6wkBKHFqZBWLMGj/Nf0khbjyFpC4iLLwT6+BhASJljMEopmOc3idQGF1zIU9WdRAxcJ2ryp4sJluiDsigUAPjuNvryB3nE1OauI7jG+zzY27gqQtVFKTWsO0chwCQOw6wZFMTJh6N7J9gaDrAGOmDBIiB6Afck0DwC2eMWV+BPMHCIhEkbk4CLj9FFduUoCBqBggLIXiM7iJhUwpOTCSOor71NrQWMzlOQWsiuxODjLTI0D/aZAaKhAHaBVgwA8f/5rsJgBlkNjKazQZha2Qe82R6A6K1dAg2Id7NFmIshQTMGG87AjMYv4FsHQSJwA4gVKCB7BTewWPcpcRkCiWIJ8GhOzok3FUAeTYJCjE4KWy5wbMFjhO2DtKCoSEFVEzZGH0Xe01XCjQUoxRpumSGZFJjZSRPtlF9H4XlW0b8lga3KmU06uCKxv+1i39zi8YWtBbq0XgCmAFKpQ0FoOMDV3XXRoyKEnobtQl0jCQr1wgtgNEmgUWG7m3TZqbnyWRhbrWJFOnWqDqEW2MIb/c2xqJ3g7SoRA0Qh0RbUiSMAil6KuK2AilgvogYgbghtoyJRKBIsJNSSfMQDeQGgVLFA5ZCk4GUGHJueVfGmwEqX8AIrQUx4k2njGhNJHgkeOXbjkLQ0Nzd5AnoSYxKgEUkUKZGyRAIy11C8BjpNZiP8dYyxsAiYBQjECrJWrxgYZcfJVQxkvPgYUENCCrmkQjkiUkBlhu8HZEWSd/8ihAx4ocWLIwAtmVSgRDxWGtJkWILLg8GlhQYrRgtjM/H9BphMVMkaGAvsxEk7m5SmyAtd4/yBDEQmUCgvonplAmEjWETTOeoaDq0T5kXRvMYyfDzl2LBieHdEMLrbljTUTFIiO5tC0bZ20yHwhIYSFe+b1gm6fr1Nh2GiGFNJ2YLRuwq8vJb5EZUUou0cHhr4QlyPrapJK7KhtZylPot/GeHvEejTgyPXaiBUFeFhODRJCS0AkabPmA5SjzaURt1YogE2pFGNB0bEmVgL9Q/qzBoiAbCalUiir1g6fDGyAuWpwkSHZKBBHYUU+LprbB429E2JzbGwnKDjy1esHj53C2m440Rlck6MTopFf38RXRimzYZbyCsE1NSWGjUUTIYMYRyc5NxVVsA25QI1kDuesNCloce4v52vzWWvcURsCH/y8QWylYcw8ASyCARyBOMgfCmE/glAo03LFvmsQ2JLeEEl4dEULbimBuar+EiNduYkK+3bfKEFFtEWDapVqXYQhJoASPWo1G/JSIh+i2NFE5kXrGFtOj9NGPZKm9YvJafEOWzt2qgw0v5HWwEkVpixORLxWZiDCGGk5gtsYXPt1jihreB+F4eUgvv0UgEoWL4KM8HmnGcB225QfJkve2oUkKC6Bt/WYmGEzHFEiLIJp98fY6BMBjxgd2rhSChF0I+78TIThaf68PnLigSKjZskngotBTHiFGH6ruYsKm8DYT3ddSNkw1JsRBbVJKBBPp0YtusxZvoGBPZivlVxOPOTHebpQvzoDEuhcqUQn6gSARinkzPW0QDAULLhwaM8sKW32cs3xLlbbRlnhJU3xhOSI7GRxBqYbyB6L0J8HgQ9999dxI2zO+q3v1jyh/HipGYLH73aSCgSmqhxOS7fAvcbcrTIkFb3oWdP7CRFhUQf3y6mBLFT6dIfVRPo0zaAuNQIjsl5V2R+CPpQ2RSolhF5lGs+iPKVImTyn6anxQ/QxWd+xgQKjIACIAZZr8rzgPZeIKMRtj+v/+Dz8eYcCJuOyTlK72zqq2wYJ4tuap5GdMyT5CgJwc8IbSISIiAETat3w+/AeWn32CKD+KnO7Z84wuqfNZ9wWhfOI9v/BXT/fwBbF8z/vDoUeUP4eXo0R/+UEnf8FVJiE2xRSa20Fd4k4ktSpZNuYWNlfk5LURamd9QnFCkq88lfDQMbSf+epk7sw2x7zv3/8sKL8xPHhcXjyUuPs7rTSK+qMWrPU5k+NyWHbv6HSL/aEotvYpvDrYF3gIIERCAREAA0xJA2QJYYou0v4BgpAlEQAA7gDQPBzsPh9DHa9K+RgvY1hJw5s9PvNplWWiKXEhNhdem1IVbhFggROoteF1YSOUJSxO8wptAQEtqE0MsWA43QRUSIEAiiABLKiFSiWgLHY201PBEKr7V+K3jv8qj/zCPf2NevQjPjsSX7PPXtHzRAD6Jv/xG/vmhvv/8+He/+93HoXz3BfpGKKGOqdpKbGd7ga/6Ltv+3e3Mn0P4XV1ZWV9bhfmtr6/AFFcyeQL/Wy4QHiQykVgjxCptWctc90hs64RtLRP/V+LaOmXLBGketo+HZ6PEOk+Q0dYymaEFYl0iVjPXpRmu8n3odHkxggCPdCNeLaTKI8ydn6FEcJfff/FbpwYt9q4Nt8ticW9s2C2DLiDuQR0SpOXeoMstEq5BC0+4N9wWnsD2DcrmsriwBQS429pcFqwD0bQFBLS577GExQKjEYLIdNn9vrW+xih/lVexl75ZjHy10Jtm2VbX6E1TRa4hhnzLCq8bQcUeKoC0E6jX1lY4EUoAmSMCKEZkhnS6a2vSPFbXd5qu0EJWzCrfh7kRDz937uDDD31rIxKUArq5R5R7Dwi36x7qzm3hiXsiwbO5CRsgwRP4CuhsCMQG34eyUWl2XrSFJwgb4sEThNnt961MqlVy0x56n6wiYZF5RHXw97m6vspaC7MWV7GPZ1UAjMpcZxCn8K8wsHhW1mg7gWVF0OoqVb5kBivs8ljxWhGsvld4Yt0LI24LG71F3sRXV7jLDz901X1P1J2bKApescruouqy0BZe+bzaKUZ8i9TH7XK5t7cwBC+NhcXNDu33rTUJFu+Vvy618OtqNZMSa1TfbB8kPJ5V1lUJsPAr2wvKVQ+PoTDaqmAtrFZ3IriVNXaGa8wq8iIEc2QJL8/KY7SGuHwryC64ItCal00QdQ1SrbH6trsYrQotdsq2wRI8hm5J+YMSgdKItUiwbYAfI0Ehc2XbuvJyyay/WCNuR4Al08sMGBfBr0VqbtRVSQ6HEw1RYKNhLZNFItPHyl/fZiDeoXB7XBQxYt1bJnNXCCXictC9YeeRoLAIfouuYuKdeDPh2Vz2bVrliXvuIMK2Ibmqe3wL7xKZFj7Q3NsQPZ7dgrh41nitsTewPWh4E+uZbCxnYFkVbY9jQxAnAcaA7D00H04y2diSycQWYR47rgjv5ZG5UyjcDiXBxW4XMLBvCw0WKTSIsFA2Elvs93jH59pg+uwQWyTRblY0y3wPcBECqpdWedPxsRbXpRVHVezxjd6KGLF5QmrxSH6Lsgk2wUQdmkjx6K0L9rx9rfgAbEv851gkOMnNspkBwcViYT0J0SofW7zX9z2+ZStgApuLVb6LgcW9JZuQQpTgLPlAcw/82NrKlkXm8UbC402sr7AZ0AqTyvnwJJnbE2QhUq1Lo1GPxhOC6fBaW5Nc4hcaiJffWvOVbbCWnik6MSgH34H4MnhvKyxe1uK1vt1bEikay+1uxhUxBmL3NjcWFgszmjQ05mM0MRXCJkNQpbAB1cOGWoHgcyN6h6h8D69VHok1Lwe/zgMmxRY+IouBhteqNAOSUwi2tybkvJK5rawJ+xbfTmzV29K9MmyaDBB7cVs2RN24WVjsrCLtLCx2ixQ0NmhmwBuVm/dbVO24lRGJe6IADGh2JluWVgTislME4ZXPEmtMaiPo28tzr7A7t7U1BhavDQdtofF/dUUAmZPGoQ5nhSFW15gBKMFnICtrKz6cmASYgMTaynaM+CXFHcL9iytIXLLUfVloBHFJmxghDmzbcEgEj4SLaXExRkWl2fktkYtfBPat/pPmY762k/Ru1rz25eyKW8v0hZGHcW9rHnaP4dmySgVXJfRkNul0HNFLki0Rm+qt+trE+NhbrknJvZgRMunKqri35OO+qBtmJyHkWxbvIC2xubyChhhONhjCzmZaDMG3CIvAzaBLcBE2ePy+m0lchUi5xsaWNa+wuRUWzwrrkFbWVthN44qEBK8b5uzEI0ijxBrTsuYdotg9yBrrc9d2SL68Yxyd7sqatL5onsznU8IG0MLoWzATfnvjYnbsQh+KnksKJxbBC26wUIrtYh8eUK+hERcpYnvEnCVT8PmeLT5f9OyitXj4UywSvsXYkpnJxIlM3lokQowg63wolpRPWiT/6RXjfITvFTZrX9m2SRZ3SeyZGHtXhMBzmIMulxAnNgSHhGdiUrp0z2uxD95jUywmKolGxaBnoVDec7FRnkfPvW1jhPnYyip/VLm2suXwRbAWNqX1CKdp7GkG62PWt+9OBC+4tsJJSKwzhsgn3Znb95beG012+77ia8MrrS9++8PDIh2QecTMIZPZ/RJcIB9jory4IXGL6qKbdHGTc485OqMYWbz2li6v/ahdhIUn7m0nxLTN5RbPLb3yyjUvf7G2usW9cWtrfDRY3XogSfusrPGrlFZ5bex5FUo5Mbf+OQejK4yr8nJI3icxq1vyEG/PKuRwrJtdY06lqR9zR0qexn3PO3G1b1nf0lElMli2+DovmxAtDJUvbnz4AzLh7I0PQbyhuqRzS7KJAQe/wtwasxXnhDixxh6QMVFHPH7adiApru8VyQuurDM7Hv7c0juWS4TgJVfWGFhWvA4lvDwre+a6ss4mdOxeaN0rzya4bNwTfT7oxvtURXJi3meQLjbKuxgzcLE2QVuEzIBnY07LBP/I9IR9JbflSMvD3gCv4tV1r335quSQBIJPqle8IggT/4UNCa/VLeeWHtZViXFiXYLaO7as8ZNa9fK5W48qReNnPlPgP93xallbEc7HRLdjkQKAiz3KFPJf5qgS+rgZYtDNrHw+ODE5s+DrBn25TCZ4kXzMI2zZ1jg28/WK/xz7WRXHpDZMvuVNrHvtV1kv6bV59Tqbo58pZK54nVdTH8RsSCghjMZ+1LOeKeXmK5lexwjrXt5Yyg9W2XyM9yeD7H6ChcXikjIDSlBmb/Qw9gQJsNjZ2OKyCE6MGuIG24cJRPy55fa1uJbp7SK4LYciq16wCHa0xm2NLZmsv8hkRPs6Llljj5u9iB3PW8QTe2ZSXsSaeJLtEXYCq+wt0k2MkI8xu5N7/DJnzuXFo3gmE/P6TMxlYbM3r1SOwuKLsHgdoPEJND23ZD5PXPN2yezh4hprBpk+TGfN67CLtaNthK/j+3Vfp2nbjrTECLFN+R6fR9SrTLaR6XVmtiZCTc7HDlruMSe7duFUZYNd7OwmhiFcXq6KVb706Q0TqQbZzMAibXKE0x14g/iytr712NGXij3rmSzBa2CV/SDF6zBghXWJ24hVdhPj5XCko2HPDh+k8B+qsR/o8HExk3FV/AdomdKHbjgoXVLMdGkL/Rx50OuT3Xvs6buU+W6wpy4bgiIt27c3TLjwTpDZj3K2npIKJ3Dk3JIuIuq3VjmxiA9FrLLEivR8Ca+HFfpkyTpzErPljIY5nVxhMfL+hHmdncf202BfxBrTh18Rq8x5tRScPOyH19J+VEhKSHyxW5gla3FfPuimyj8Y9P+z9/YukizZnmAP3MCVpSESQsjwhCEv7u3C84/QClZanGaE/QtKWCprwIVhhbfaMM1lIWeTJzRE6bvwknn5hIYQYoQS8g4M01SRSkJXCOtSLVUFlUnUQGZnVCj+bdexNXO3j3PMPW73MMN9wqvovllh4R4eEXbc7JzzO+f8DkJilkAsGdAtIjopfPkUOJqtDGWKQQquVsJLi4/ucUts9HS6Nc8hhKgHzATqxOIHsYHscvhRAZLKoc7BxtcjjdLczqFbASUhfE94REiihmkENbTRarh0arCj5dD0yPH2BhVNj1tamSXnm5ldwfWiWnZOumWlleHEgDtbRidRVIUbZ2CvyyDimYGYWS+wFA4EPtDjltyxJ93vXE5t/pjOCjo0scRiOgu3X2plDpGTh1kRTz/FSkZKnVDo01GohAeKXRlsVCM+QOWLWSVo3+onv4CKpgAxbmX3wTybuDHFwn1cFUeWKS3t6ov9FFRMLMHJdJoFEEfWp7GbvdLYSdYdUehlNYyqwMjXAJXOEh2Bq3o7We32hFw6kcsejjvlP6BQ5hAfkOb+js3+tefMv9Rig49j+jmaxovIWyh0csQWHdMtsWktEyPVA6h8uTHy9xB4AWBvaf0PJY4lgez5Wu+swk5WuiXwp+fRsc+WweLtzj1ZpH1SWSldfp4NVnYzze9v9kiT1MQgsct/cJAm5RAY7eLIQOUzudin7GE7zjsiFQ1PGOkf4dyndBltj/K8U57sTQXdRPZjbT89kqbXPf3mACdf4pZgIBfImOmMkvRwqFI7hQWOnw5iRVjRyPxAFAvt94Bu0MklUxkSKZfLuRes0zJ467ovV2USrNfXzJK2VgG/v4MFN7GCBdvlVuv1wiohBimhSpjeVA7Foo2vIV7N9zFofpI30VU3uZdOyDabfJUGNceB2aHroH7culmcn7n2mt/SvpVe81O/uNPHTkQ5LbrzB76lWEf1Qa8TRRrhAGt5nN2Rq8hYAXNFVI4bQCdzBFeACLLAXAVuKb38tlotbHfnTJmNtjqauycWW0Dl1VV5HVQBE19lLVZs2pmMMis4uXptsfVUVcM1USknpgcQkOlcApAnlQEGmTlg4pbkMtoUtCjoY+TFNLM9z7NfUuJPJsdeWD5EkTf5Gkaud9fQ05AdnDCJfGZyyR9O2YbYn3+ifMt8JFWpBmLJY7XBA0cTuX5gR0P2/EiejfJHuYGoBlq35DXM7qgBEiPzLVVQpApWtjvZR8fr7Ppoz+QStA/edusdPyYPU6u1mBYuW6u8tdPllL0cnl5blc7Lg2tiWbaG15lJozobZMaUvSjLzMi3JIStl/tuvRw7YZ5unXk4d+Zv6WrruE54ZEeOa1/unWg3oRMmI89ltxTdMF3ExBjQ7vy9Mz+jNUjsKyBuSXCATKdYEsP/zyFuCdAbY1HlYPIhqFbgOAS8I4BuKeSgxy0znU9kLexo9snZWgsulyPfsp3Im0fu8WIbJYvgOHKO4+Bmt1tMHdebO+4mrlTcvoS+ZQkwgxKiZUJ6+kgFj6QCtxRqsyafogn7biebnXPXhBf2mX9kO16z2J67kzIvt7vP2WLjesfBVRRNgsWxG32id0wuPtf7IRPd9Yl9ES7IwO82Ml9zgjcxvLkgDFIiQsj7rSFin5vzrWKhaIHkQHnJOHIO8i0hbmmt7ehzHbLbzn+9d5N44uzeBcnUmTNBTOr29tyZUuvJsQM3ulqwKZrnrZrVCiD2FQCN+3yMMdxSWOAVWFoCt5S57XTj7D1vO4+iafNDtO90hRe98LfO517vs30rcG3CZPDEX/jshPUxk8vaDR+Xzpa7NXTvzugAkKyHA6RbYh1wF/5/oY706GRuJK9RidpBxY6QL2V86TtCuvxY+xU4jsx2n8C3o0ty5UYz+nbvWsE2OuM/zXY2M9ejyzDae00bOi9fRu6CudS2t6gAYMMNaEthnSJmUJqZGhXELXGkJisBbtl9540zZzrCC78U9DR6YHc2pRNn4m/na8o8Gm9nUfrWDdfxdl9yNz/ezddfu/US1k/RU2eQTZ1TM+2oiQc7SQ7DBAUEC6TNO0h2JSOwjJFnC0CgAW4JIH8gln5nXUncUkzUisll4tcTZ+uf7N3gyHUvJ7dPl7YzXW/dxdl+O3XLF7t5s/QuttM3L67bEoYdh4rdzJmBumWZDfIxO9yyAGAtOY1O16sF9/uYBrkj3Bp+F0397danDc29PZPLC7Y2gjnbt5ik6Ha/YHKJYzcsbJcJk+1gG2dSSGBqFLeEiX1SEnBwSMvXw8zBogHpoUWfaJYjzBUmRiuYdeBbynzL/v7OqtU1Wy8L3/ec22DuWmdutJ2zx35327AN7iaafnE2x5FNg6ttFEXzKbPSdDBA7luZmVqjLIMSJgOUojijktm0EreEqOCb6KavoiKUqZqCH/kU3Wq5tL1c/Pk2YD+Q5vtuvfix6+UP3JRjC+wpuiwKGRkgZoQNehIiVlU0g4EBCmNfB4lFb4nMx4WDZnCZfCRW1C9hhFtynzFgev/T2vKZQI63bnvm7ia3D9OHyemZfxrZT9HsxrWn0dc4W/3rNzYzf0LuypRg8tsSOfY4OA1SZ7u4ZZWZvqXGLXuTtbeT+xtzFnmd7xg6N51cCNvH9itKj9zQZ0rnmP+eK2ZOv2PrxXfDeObY/HZlh76S5gBuiQejgKTeaZTAwF5XQLUlxWL4LWQ0UGdEBpCZAPIte23QycVPU//J2e531cvdroNqz+yv/tncDd3r11vX28fBfcimoZ7Nnas6lfMtcEuYiSk2sQQOQBpshqppSoFbgtsvZ+vltBAg5mrufHqkzWk0X6y4fmFfgOkXQl+74TXzO7cnTF16zhP50tvJfryLLn1avHO2LSnGcUt1/2oTiiAMshD2AcItG4Rb5tqgE0lMsMIshwCZSIiTiWYFVGtw6QjcMtU7jcX3setsuViEjrPL1jYzvXz/ahd98Sv7IgrjMrxg21i1idyWNJXnXDU4eiMyX3v9PsQt01HcEqQyS9xSBKbYfJ8SMSnkOGJL1o6iDW33ey4XwizhTfGayYA+hs724dZzPIvjML2dvBHn3xXkEG4pYyMaxKz7gVoTAE427GwKKiRHItkSR1MXUJjCoHJgqGiknSxVseXbzmSRZe3jmft8lzzOXMeb2ju2X/1+8WfnYtKs/nzuXPnVD1zvT7fMewtwcdGw0ijR6CSCKqXLX8pBK/MttUNN6NftjNRyhj7v3b27Y9ZVEIYxZbN9t49sv/SmzB5ehe5uH4UlpVfem8b3mINJP/Xn51TvNHBPxwMcgoa1kw025YhZUwDVlsqmFZLQ25tMf5YVId3aVG4tgJMhbil8kDJYP8w3Ad/Q/Cc3LBeLzTzauW7YrtLV2+3uj34w23r/ELTBWy9yd653dc2tqkqLpQIG8iDKD/0WmZDcnywjB0kfR9auuP/Cl+YS+yf9NPl0wr96WRZcbM1sMovjk4ANaDF7MznmDktcLpqcv1bQbDO5TLqdmPwlBBkBZGIikYcIYDCVOQiw5UL6o4O4pczYA3niBgIH9X9u4padFWtZL2cvLT5Ig6szK6387M3t0/Himh2qzv74e8uq/vjWqtrfL/79m4enL5aPEmgFiCnNsqodhfzLJRgkP49bdne6EW8h3R4kK6ppTdVGoMrfNRwiYpmmlQqqwTBuCfaYOh5abw1O0st1ifpIMpUCmmEYDFU8Nai0Rg/6+P5Sph3zv6s46K3YgMZZkrQxk2rMreE0/VNjVZX16DMVkmYLWhTFNajYw/mtovhiBNjP8HtATkzW5VvG4r4CaC8uq4MbvJGzCDKa+RGib/PBAkGl4Uhg1Kh8zQ0LG4sFZZ0ZUZWaHJCEAZmq3aEQlAAat5TAVVeez6fLYn84NJxWwrso+T+8Lj8TqyFol0vonRg2sc7YN1x+sNepAIM0Fjrc0gz3GaENBNIDO0e/RyfHQ3SyULkoMLoOBuL+xomUDUKQc4ho6pxYVEBDEDSMADJ0eyjsbZDpo/MtVTV4BlPtBKSFoOHSTMtUkz/Mt8iA/u+rZStUaCYHIF9d1IkL7YqtRySjAurQgoK5gVmsyDZqBvmtpMGZr8WwFgriLSBDQh3JgfJCiRQAiTEwBQPeNIsScpBvWeIEsF4j93ObZBXMBq/AFPdHUuHY69NKNEClNeUAt0xFFWDv8kPcMh866cTQlIWZ5dfIGGShUrJkrSqcqKbRydrFSIJXDne0PMYxGmqkkyNUpRi1lkeOwGuivY5/moFbQkYKWHwsJ3I5QOxToRogVCkBsgReIIGSKGEaLAQx+/oXMWtxbpaa6qx3MwVep/vAsmMd9ChQXb5RpI8mSuuWIq9xRrOpTgoUW26G4U8jIxThLQW0NsxkQGmPZa2u+c4kVqXvYgg7VhgGw4lmMNkVbImagwTmWwLcMpH+P8ctUZpCPYrCUsiXQ2WJhVoTIIdeaNcGgMaFAUzVw7L65kBO7GiBIVhHObZQEKkMVCdjXj50YgKAWyZo7pIUlI5JY9aCYJYF9i04gL4lBjEHqHOVwjuCi7LLt4QZZM1w3xqRUQxWiwHC54VZO4kgLZnTDZEvGHxBWX6IQCNHNZzxMPKFYqHNISeGjKwjgVumIKtSqpPUoEZQU5woSKuSu1MyrH8tR1KVtKKx9KUh108fR9bBF6VdYUmLqvkaCAybzoA7iUBCHZUZiOWqJ5+MLpChTYxLa1F2J8iqRFn+Zr6lmWAgBdbjlqVGg9MEZb6OMI0kuoo1S6BV1VdVlskAt1SlYToh2SqRJaYFJuvEC8QG0+csiqTeYeIKNtjEdNQ6OV4mChlQ5UhONxlUYtQjZRnDsuMCxPLV7ZED3FIWJINrFmIwtjVr3DIbiEWkhlUJDKQkAoocWRP9e8qBR6MXYjvgtxoYbBK3xKUNY+D4kBusLiAVD9KuAHCvR9UzCBo3zUASmC4JU5nkOltWJN02OXJiKIiwFaZeLOrxlH8V3wd0CRU0aZFrqE5LzdNQSUuKUiykua1Lw/QFYC5/BnFLkQ9P4B038GiM/BboxPTZNDgNZqScDMGOmOQEEmjUhA7KyfobJwfebw0r2WqYOVg3g9NqcOdp/F99KVWXpJnd0iwbOOlogBYVSvlXla+tWRODPMgUlI6LNFixzjo7GatvaDOrHzBMvG5GclGwgwcBG+h15iC/hcCyY0UJUJvUB8gooYdhsBz6T3k98MZyyQJUmNZyZ4+VuHA1QeUpA1oSXH2fpIdQfmggl8OCTbnCSlzL1/H2gKBHDlNJ8Kw2+XhomGIXAfrqTTMIqBNUgxQPy47GyIKGhHvCpoD+KjlcQYb9lmHla59veTKWmILEkiF0ckhLkg1dUFidXEJR4gEuFkgVbqlYb/JDWazNmNsM94uGjHAWDKTX1MMqv4NIDB4MTDmDWgOTboBsGYw6xwPfssctuzpxlauapePcSlUCnEY5GGr5KhkJ7CfpeLYMoo6rRnDLwyo/F9mOgEhR5v7WhYkMCNwSKRqEghpbP5hVlHxpDAZ4NMItcREz5AfCScwQxGwGuKXEIA/pcqn/JSKPcMt2UL5Xjmiq7KCvg3FLCkk9oIlVDHBLwZcbk3HcUmQnoSo/lbkNOEjzemCb/+XVUg8INFGKRW5gYuRAOg6IXah1BOrEMUtbpo0zXKsyBF8kfSXY0ZSTk7Vwe2tNtSVVUApO63FLuI2j/ZmM4FvdaaSAXmfv/+N6oRH0pr/0qGNvMOnRgSU2JAuExFUEH4kbMr5QZRpsY1QOSHtsmRlKuIK6vBqrbxEb0hIuKoSjJYdoMIxBppYb+9Aet6xNc4giGaEAmTQ1UfpJbeLRxRicPMQt1U2gsRFDLM0IM3ZdQAsFLpAG1k52N0ED1lEhoTV4BMSRsxJyVQraHb0mFGNFAsv3E3CakJ5UTtkBWAaZZQmw3tIE5lsaN2ZvntaHLN8aUCzA3amfNYK2iNGAeoM49nCdODHrxPGaGFkgOIIMLey6gCgpZC9tzBB0b48lYG5EhUQGA1eyDqI7Auh7qo63pzLLyctDlphYiFDiBm5ZKtxSMY31Qfoxd7IpIH013+2x0oAZJ0IsqrQZ5MRAh6RPCMgRqQZmDctNPmbk0ehkF3PfwhyPMTQph2kEok78hN/mChNbXKt9S+OWbFRavtXXTlY98rVi70x0Lr+sIE+G9H4JNsuUxadqNERoQdS/8LsUetdFZhGxXxBVJ14DEioCb3ZZgwyJq/sNidSL5dsz9mghkZJOg6WFX607c4HQ68rPC10O0Qw5nBUogRQNplggagDXc46KxozwZp9fovItVUlr8vLESrtCCWlILblY2JHlSV/5KmOZydFS+pbBOijL/rTMjE5WEDOo0BEV/lSpSqJOHNMUXc292gAwjJJtrfLJ0LesV77YqujTdj/f73fbpwWtB7hlUdDZdpKT9XVOya13TM3MAUx9KLG5AdlFDoA6Ugx5n5Q9D6P8NUqt7fnGM3B/r85Cm930qeYbFfd32k73VwvJN55WVvq0PX6sRM1sWUIu69TgVhwwzOLkS1icqevE1Y3Z2M+dr9IizXP9A3AGpNy5tfFFaLd0MnsTi40x7Ks2HMf2u3VW1MDtYH+Po2lR304rWtjuZ0ig0f2To1T8eoCSGg7vICMETz7ctyDS10VWdZ24CIDFs2heBWxDSdOqu/+TpAqCdplYlu3MFgl71epix1ZpO29oh9hb1ia8vGZX6d50ABkYYy8dwAg631JtEYSWPIGwKPpEd8F80ajiZJqL590UC043GmuaDPrSuZXWXbibra/X/nHkzDSNRi7rlnO6uMkoO+mI1kf3C8UP0M+aSGZravEugjNfiZFG0EDaBlxnWxhsMEbIdFgnzubm8crdMkE8LtjXj3026+Uijn1/VVnW7JQrokW8XvjXwWNwYjufqX+9XlTW4ySa0lUa+Os1f0+JzeCD+RYwj0xaal2dOGS9IeTJmYVRS7sk49Xx6eYq7igWrHeXm7cF+520Ptuc3lmc9+Jkxd+zfnldXCdN+eXTcUBJMHHsr0E/N+G+7Gb1ybll5x19Pv28ZDIs6MvN6ecTLtXAL15s3aej+HEV04KuZ6dsgtiTVesvN6dMVmzNrL5+Op3FKF5NBySnDQzhNcTIE6eo9kyIBSYLdHIpk0TSJbT+bLe1FsmL4MXkdpNdZ0mwOn56Ok2Zzu8W1SI4vn36er04O8mm0buT29t3gd8e2Y59tVwE97dP3XugJTaSfCGNAe3kaBe0wy3hvUj8uUu+ONPunl567t517Wt2/PWWP31gy8uf8szk7RWhN9sJn6/N9jM99myPveqd0M3OidzTpiudCXevO2tsw65XTHbsCvtPbLrueB7z/i6nM+9THToO+4RPHltRy9Dd7dwwofTUC73dLgqZ8DL2outOF0qxKzeLgNXSWyhDSqsYxopilBgNtjeBWwIl7M/cbRCfzsOtu4u2syAo7Yg981771XQ+WwcvQjbchQ/bd49Th53kuqEVTB0n2m6ubTfauduvfgonH4YqIbacQPbSBOGWNQxV0ivHJpW75xNuzZ3w8mF3Yfv05Z49nUbOtKltZ/fwJnR2b+mnyOaV+w/REz11zncPp95FyAtl5+Gs333CfcX/ufacDTvDtd/YkfOFbZQRe+ZEV3TD1v3EjbxJPI1O6WLrbJ8mc8cL6MQ5396+2TphHIeOd3nrsg8mIOW/EPUWmHaspqMEcAaVOU6D1bhlm4DYyTWXS/1n52I3ffLYN1o/OPvpA/uCwSp0bpplyA48eJETfS6mF872Ybp37Ph068yn95PIZYec3Uu/MkHMAQqKiJRGcEtlixI27Sc0tx22HNgn2itKf3Cjf1OEzsMjrx7f+2cRkwivorQLNq28XOk2mvBZZzd8sdu/pW+jhy73nKmL0H04Pb3sfpjv8kom+s7Zxp8uHrg0nSd67E5pHc6vKJm6d+wVj+2OgccOTJz9C0rT3a4q3XlA6X20XVHgJdXAxNK4JeySUg9BIHikhtCD6P/C+cZlrOqa7WNBPHGiWdyU2+j1wuMq0vKcs4Ud3cSfnN0PtZ/a59F9Pr2Y/13h3+/cdTyJHtiidyaUtp5zSbNhvmUFWRVlIK53JyG/pbDHANIYuB574SQKC3b/Rn/gk/HOXmfuvFPtT9N82lci+7v9gk1rXOT0yeXl/Lddwe7uhh5FUwHzUtvhZDNRFGb0zpl2dkTo/D/vHI8pETo5o1/dKSHh/DWXy02+dbui3xn77Fu3u1y4exG40ROT1myzpjrzdSRQNxIeUuYMqvWvtTWhT8NxZDZrnX6JbyO7WAT+NNr4nmMfxfTt9GjF7DHfZpMQBOsX++imsZkcgnUVuif0ia3/KnTC1z5NHr4uEgh8juOWcJCq1FoTt2S22enF/GH6wDbTgC7dsCn6PJ67yG64yqfcxnrb+emeW37lTBcFkwu7waPLnOTUdu/pVcTrYzq9HLr209PTJbMcmOo/Zns6Ozm687eOG05v2IW5XOpwf0aJ7c78/Tbj1kay3z5yURd8H7yibPPc2m8WvVEWH+I1GYtbdhVPytEEMhom3Wjcsmo7s8xn9lgbP0UPfyrTYBpdxpeRswunV83CsqNZEEY//ClZtpkdbWI7ekcz60XovigemFyCjXvBzpwV65O/FrdEjH2pwi0hpvsn74Ld3+zhXJIj146L3mT9HD00tPvRuTdf9je++/LY7fRLv14mnLbM3gm59NhIuD/pzV1eDXtDeQXZJVvfq+mW7cy2xfexQsllvfdSfm42964nTNRcLrsZJRvPZaLhYjTaU4zET5sh1XOcG6VMRmFUA3DLvkSI62X/iq2XnN3/i4zp82ji+8feLnLch0XA1guTSxUkpfW3TC6P7D9Stq+ZXPJOLn+ahewLu9PWGjIx/0yYYFAnjtoHnjne38/Y4zLaFulu2xkrycNqFtk117tnk1XozpgDScl2Z/GK107vc7k8cY9erJdGGKZsH5K37BsmD651ps59YJH1S6Yj7fpGyoVO3St/P++k+ML1Gr4ESSeXx6wuqlnobF/i+lbDtxxBv4E/miPdEsM06z4bq8+3BFmsnT2WM39k1QYrJpfFW2t9djp1nTsmB76P3ccn2aryoi9svbwpltbL0D1quFzKs+XiH+/YmQ+xNZ7EJGMGAILOwF7H3dpU1olLlN92jnt/LnTaR8856guSZ4udyy2rfBuVzD3hv+Qs2j5+jqb8PVzFcbkQrl++Mrk8CeCT73ly9zlyPC7Dx52bPs25HvHd+fVNt4/Nj9h62d2QkDnOnbNj01v3iXTvP3q9nXZXYvZaXmuVXzRm3QcZDeyjVHgoFlQsKO1kXax9fcP0Pl8v11ZgMWPR8jzOLDFxplwuzYMT0rXfHEfRcWNHp80yOAndt/ED07IvwznHAy8jrw5S3ULMSOWoUpRhi6L8sE68hwhpFbl179K/YbPDrKKbNnly9gs6vfD+aJ1MHc+3ds7TMpjNnQkp3d0Xa/ngnL9hpz7xHx26x8wes190sEtBvd2Z3MYpV5xsF2ZSvbzwrqxk4oT+MRNsHrqXq2LqfqLvIndTVacRs+ymXLaUeLu3zKh+SoPZjr1IKGRVBKzKiBgd046OlO9D0zlGdeIg1L7o7ORbZ+pbQWBHl753bi+rs9B5Ymvlpp7tnIes+jI/d++YAfsmL1cnYXRWP0R2dRKehz9Y7Ew7DzKpLjp7a5mAmEGiMzHFamlBPyZVJ97PHZuyadHffpXrXvuh43pMSbON6197TFfPmdNC6L3rbD3XsX1COZvQ1nX4enGeGiGXxT7aHxcdISmXi3D9mNpw5t7e2bb0D+yy4TZybyjbCAt+kenj1N0wo4xzNDnRbc62tU4ubM9kVrjjdR9HAWkMzCmA+p/K7CQdr1bdYmodh6AIOquVnVypdiBsH5sH8ROXi8U0yoQcu+zr7xxvyfWLb50ylbdl/uNuxuyxU5KuTrzoLXMcnPDzD3tnz3/o2WPZhc5SFb1JQWOrbiDILpdJC+vEWxO3rPO78N+I+7t5sgMaP2y32/A177y5nvKny57f0tt6TAw5rZ+87fzp8/SsmNlnPCJzOs0ofbPd3uddrP/ywZJ8izkNbG+7nTKHiP7B5tdim1k2nRGyDOf249WUIzYbdgZnKiA307fcNLucZoT5/tut1wELRIWgD6S1m/0YzRZN2okxOt2pPomyhHhxYk+r1bG9YdZAu7FvFqtjb77d2m8D65P9gq2nY28/9y6Zcbz+ZF+t0+Dk1s78E3vnfaWzcDff2md+uiyrnyeNSTRSzfa1tpeeiVvyL1ioiH0uuHjXseTgba79TvOwcx65NLsVFi98+TtJ/6PZcU563RumVPRj6LeVx0Xcncwu60ukk93FJBbRKR6R8XknkEKnFvIYaPwoKnBB2RExxTLIBs8PVVWMVCeLPomZ7khpLYIytXjxRVoF11aSLa7Ll+mCCS9YpOld+IVaFrNYdwurWlgpm/xgbaUWO92yVsHJUbte9GJJM2BNpKhXldjkltmwoq8U+ZawRCgHxKyFIFImmuyyn2/a4//iZZw2RzWlJW1AxZ66QP+sIJIMk/2ji/ipINQXcm1yg9AZ52gYNd9j6wjVNVEtVxi3lHVJrY6a8IcVVLz4wgp4AexqEQRWx9ubBRum8F+efGE2ZZO0gcUNqSBg68xaLCy2wILr6wDnxCxhlH9ZpnCAmDFFOFnlW4qIk/zOuS6e7wcmyJSbqeEyj7YuQMM9uPXXsA9yd4SguI9iSICTX8MO4EJPwFr+GuryOh8ERofNx4sa9eDtA0civo+THnXnN1VwJ5r0WNnUiXZzpk3SINW9lXoSnhLU8qcQt0xltYyuia3k0kFFZRnALWHRWC5tFoCHS0b1HEGydAg/jWUGoFgUbIpU9zEcUFsG85ZM+h5ihJOLkboPMuZ1otKaLs0KlagJe2xpFumhOogWlqdY1qfQ88JbK0hBLL9/TwbyW2A6eXqw86t8pz5Z1b9gr6Axo5OqF3uNCu4LiHMQDSvGDbgx+wybAphDojRcbJbIaqpr3AGciNuDt4HLCcYtxc2uGjp2gxyjk4M6cdTyUlZWK75x1SdRA1dVP0il29HPXbXwg2DB6UaN+pYMRJCVdZcCRh80yEARv4RMO2NA9kmMiVbSiO3gIEubyf0B8i1lNhho5mLUIIE2BijYpZp+w14/NZz8esDshpEviImBMKweaEog3SvdyLeUXSwSnaPcYrbDJGNuDdMrkBRRl0volFY9aGUOkkYnJRm2TEGrQCGa6JMINg+4b3W6BbRKy81KY4rrLVHZESJzA2kwopKugI1/UJZUjvsD5fQAr0l9cNBA2iaRLAj5gWJE6KhxS8jshnknswRG3xPQ+a0nF00h0UJv86Yw7Vh1De8HJeitKDGxVFcvi3xLVJDcQNJP2M4OUeSJnMV8jIqnge0pxgqBh/SUmgfR0C01PDJCimgSwJmF/QUiw8TM2MC9kfZYajCAq17tidk7BPRJNLkTst6dhIWUKjMQ9RuFV4ONLZh0Nb8lhvuGMwANGJXAKLWODln1RwpFIQIMU7StIL9coli5kYFL84NfKq/zQ6yLYBNDaTBFjWWkmdck3/gguTgDnoby+cYaW5ewnrhsjfcguSpXRTcfxx3mmIwszjfemNQdBcxiLcY62AneaVwNBmu+cY/yAxVNavIbaLbVdJAljZAvYPfliGlkSK1VKNySgi8FCQZgX54TnQfRQuqDVk1+dUAskuwd5okl6aBXFez1p+otdKUmyImxBG5JctV9h2hNyQnVdcUe1KGg6BfRJRK5qGrQv60BqlYQGOESC5nFQkwMErbqNZq5FEPOjPoAgRawXcjYJiZwyzYBGXkJ4p2SeGKnIST1YaV0tciJ7d0btkB6A6I6hPIDplEjJqZsc0vw9tTIyweOPxkiUrSAlci47DiuYZ/vgpp9kJrGbHCA0iURnqgGwCvNEUFsk5ulzBRWSSujO0cAGSrbFByPom+1ZgBFXXG7WV9KEkrVT6zNBIulblLZQnof1bcngyxWI0dk/YsmH616OxkXUtTIVclHNCVwJ2MNuKPGbATWBuvoem42OKrrfIgnIkd04CdSo/9FAVxh6LzmkBkD9XeX5f3qiMItATHruAZJB0ShJch8VeoE2gxIOcnIF7KjVYc5qf8zUCcuCXeaAzYLVhp5bKbvE0VpCZxG6a+ChM4c8SCPVQ7GxTgjdQH7yBiWGOqz3aBSD1AFIH4oTDevdZ34WK4q1C2pwUip9VEKm70hX94ku4b8PyMqX57c45aF2uCBF0aMbkfNUJejuhLsdWJ3Ei4d0AFc6Za40y3DhtK6VFkrjXyEsLRRpgdRtfydOgG3B8EuaA65Z1eiTrytYPS91yBaaQhXRZTBKF0NOr+UoNkbKJc0DDaj+55YdBWAk7m/bxTcjUzxoJK+QHoC3cxNbXZdRLWTmlx8yHaM7nywIekGMR0s05jlZiok0AyVUz3QLQQbm30uNOe3tJblgYrUDFQNGfMNHU3RYiRJUOgYah3cq8pcLYCjpLPH8M6tGkqqQY0adAivgJhKAwBkEqSHBfeo+w6FWcPUyNgnw2qwAVCnKjVzwKkJ+yDnoCUgJiw3vDGNW7bLAa2eJHPV/FeYSFwNMuRbVqDyNavge6rxC+CmiZxoSeOWqLKbwtbegwFidsnhmhABsg4BKXKJywN0UkKVABpGA9j4l9Qa1iZqd0IMMz2IWVPQY6f/gKHfolrxFLDRMsQtUwsUc8M1kYKJzBAgmY2Icgy3bCFUqS0HOUC4ZffPr3ypKQlo8QwpiQ51Li7GdIvALTVnpjTYcsgW2w/0vkU08V9NCMYgZfkzTN8nRl4ehcgX5DWXGA6RuoWLhRAlsAbillYK3A6InaS6x07HDQYL7jsbTi6DCrLvVNjeMov0kW7p97pKYMuqLgk1rVPYiZjITv9j3UIQVwUxe4Nh3TLoO6nA64PE7LHZYuwAPSUGvM12CXncDKGeeKAxUf1LArxB3FBaigUMJHRWqb2O6ZY+4pmoZQDWHmgaX5papzX4AXSdONpJUM6CqSm1mVAcyiuVSkO4Fc3Qx8hHkvRgu3nF0g47JDWwszvgTtADiFvK1HACdQv5edyy0uAhyPxqR3BL7d5UgNlNIgOWhQjgKknvN4Aq1QB+dI9b1gCYQo9RR4DQQfM86NHkipefqIQO5NHk8VBTjUGVyL2JR5JdcsOZAuiNxi7y2NRHY7CfzLfUuKUVZAK3DAIrsEZxy1aJBXIr9+vICirsW5rNR0QXq1Ql9uE0Wchvyb7s0ZvTzefju9PT01lh+AtS/5dnPs6UI00OO41DVTva8xWVecOJBAPtLEH83wyMmk7MkAQKB7wP9b+WdUmpDKQE1t3kbWBxPKbcvFtuvrS6SwtcLa0QSwJKw7k7aVlHp+8CS3nxZWmtLESGrQv7KzOXX+GWvRLmX/PRdqLIcfgfLyb9EcwaUlB7d4xbTfeZmhC3VH0QgTtJVIiQSCY9kaNhADYyYw90dq1hATgqXJWRVWI6PjG+I6g4jSgAFsJDZr5ltQp4Kz62sWXr48ib7eaLQJbvZzIMZg56Suvuzq+sxWnkkUBVg2fp7GtiJcCOFj3IEaNZgnBLiUXx3/F4NZl8mkbep8vLG9IXthaga0jXU2Eafcr7dK5Cd99RICX06foSOYgx4gEEX6jyTohm3wMNDgHq3CNsRIKpSlPlA7p5iH6jXD61JYpbStpjyphd8N6VQVkG17Zjn3jhIki70HGHaPK245llSXiz4jlKVtvDm1XasiNW8GVr1wGzfNl7rDIJqnA+W/O3siukEMtEtKOVUjSWiO8LBK+7rxbuVJBUMIOmS+LrS194rrfPM+9Pu1/j+9SsICdGC1GqXKK+J0ahVoP2W2DyhUJN8ABsb4qJCR4ZGwzZyUS6Ym02gOl8LtRPnN2/i2weHa+y9HrJ/l2seGpYG7RJaVV8pqtSyog951JIS/Zfyp9ZJ0t2iG1IbN9KK2sVMHFa6SrYujcxe2t1ctKlBWQ4GQD25ekGaY9bSvu1b+Pu2mwOsk27sWdFUU5se/qlk0F5a9tPJ0wu7PDfsecPR0x0QuuA5pB9S2sFVRKIW/YKoFGSIsqTgOFkkTsBB6DRkg46aDMCn9aIxijFsGgM+zpK0Sg7WQTuVz5bJwvLWm+i7aLdfK4yK31jh+FTslienrallZxO0qxKN5fl3ZuTBzu0N9aKiWg2ZU8/ZVZ79H8dB0efNjfTMLw9WleTXWRvstWGXWJ6FogUywwyNZZ4wOWiaF76GNFRJ5cHx3OcCXkxd9w5L3el9C17uov2e/dzTs/2zs51djdFPohFwU1Mg5gDjl2p5eHuhG52VPNtMMzBcBxoZWaA0wWI5/0FKvOV5rfsdhLL30TzahEsbGfKbtR9EKRM9e4iJwyWc5etiHdRdOUHM3dfeVHouK4TPfiB9XnuRHs2W8Ej0y90Nnd2/XtOtkxpe8tNxGdtfm+lECZIK2MT44uT9+WBngTbYrhccjo5d8Krx0fvYrqgs12U0D9sL+yAfnbP3WMS7JzpmkycrhxMGz1Fj1sipnHEsUcMhmS548XFQDWoL0WGA4RbkmHZcWFoqmKkGyzicOxxy5NExa/SxXIbvfPXJ/toVpwxvX89dXZfq5nnTOvQOY7bp3PnllpPke175+6D9WIaOcfFjE1RZV3unAe6cT12I5/v7nhFykN9v3Uv26Odc7nI7AuvDUwGORiC5gCCwi1l7i/7e9LL5YLXv5bzkHYVYTf01Omevoiid3TqdCrowbltxhL7FG7ZDHFLpPJrYBkY2BtEE2TUZODEYKhyBN5EHf2GfeQl0KxxS6mK28XUsX2f3fZBzOQSv9xFGfXpYu6mm8imJ6GzC0kZRkeBd/Ff6LVfs/2luHU8mi/yr9Hu8b6TS3RP1/RdFBa+tzuhs2ju80pJ7+8Wo8R+oBMZxi1JZ7/y9ULon53ToqbN71fJi9lmHp1RO/pcFDFvT3lMPPfTi9dnJxN2uxzIt1RaXuGWIEAmtK/YY4RyGjiaRPZjagRuWYB8S20MCNxSE1dS07dETeUwbinrxBeK37L3u7NsfRPNLb6NPfLS5OZL5L04Pr65CaPjbLdvruZbe7c42u+bv/Oi9nrZLs7mu4UdvSEvk8DyojPeRvlsPq+u0/VX12sCz71vjrZOuJkty2WlGmRkoHwPwpsKt4w78LCbh16/PEVn/Kdb0+127jruFQ3djPLfabt3uedsPW/rzblcRrrvqB67Ki+f5HKgjxzGLWEm2zhuqe8i/QEAtzTzLTuoMtcDFMQsxnDL9JrN7r01d8+C1RWTy2kUeVv2cN3TOIzO7qLppcP+2vSF565WrbU683ZWGP2jf1KtKjs6PWNyYcKrrtvrL66XB97u3g/e7ZmOCj8tggqCaqlM2BjilipYS5Q9dsuZFWi2Zev14Xjqzpg8jjqeGNv9wtaMPbWn0+nT6yYvyIEee43Zd9ocDJrnEIV8IZSfGAQwOg1moLwQcBTDWJEKVRID6+yODHDLKlizzZo5lYs0ONttY2YG2N1j8sKfRNMHd3YcTafRffHWixbXaRtcbfcBr4hl9jSTy2cul9l8266r1anrFWy9fPVbppa8nePYqQXLBDJYgjnELeWGQ1/39ljE5XLr2F0palfyOOE/w2f6kHpdaSclV8vYFAtimBvLjTDtrcJs+mE4F4CXz4z/D/vIDVtaNSjTZyQmpnFLEbgSQeHrr+6WNxdNF0wuzDwLec1P8XqzXNzv5qHrn8333r5ZMLmc1VkbvHPnsc1tAev6jCmhmZRLGXzp5LK7yc9uOavUvevcrVPAIItbXsB8S9DGMK87uRCm08/Ygp9GX9kxZpW8psfRNmPHJ050zMQVrjhRmdMxKKBMjBqENzGBVg6dmBruJKNZrCMI8iHc0kg9RNzKDeKez6Fj9HO4ZZUErRdF+7NVtWZ633+5j75cW6t71327OOH1ofUP4YVr039/xjlxVgF7zaaTaB88LoKps62Pe7lUi2Tx2fXq1nM5G8689P06jD75qsuPiVumBm6p+4nRlxG3x26ZXGp+qdP7N8yTmWZrz/E2N0+78+gdCfaOfXczdfYviNm/ZaTpd4+JoRRh0XEN5lvkMUy+aOKCjOOWQ9LtokFH4kEmpuK3gsQ/AOOWuKXuJ8aRL39ycR4yV98/c+fX/q3jPn2ebB17nQUP584kTqfnzIXJXjA7OTw+DZ191hyFjnd3bEfMMtp0+mWersr1u8iLgzCavuV6/93xNNpdrWFzsQrilhXALXXmS4cGl/spm7SJ+5o0NO68qb3tRhNOqMOeh/b2OKcvttyXmh+ZPMgF7DdWqGQXjVs2ItymHRKpvhuDkZKoIFCMiSsPtdYYDigqscg73DKX8dNC1Slg3FJ0AMmq9d/vost10F6fbb0FWwXMKYwcO7Cy1c3OvVr/w2d3GwS/Pwrdzq+c38TLgAkm2jnuJ3L9eR+St56XBe36fhf6/kPE/Moz7pk77unCaktEpDSGW6JwH/8B8axkvya4X3cVkTdMu/v06vYH9trx1H5D69mKTWp+Op1OYtD0q+80ArtLG/mWcAB5J2vhiMo2MP0y6SnEYL6aoaII7OhDYNINMWSk2OL1TzS5lSQ+hrLvrerr5ypo0/TkeBZUgX/DTJ13vsWr+N595gSKdzdWG7zw5mTDzIG2TjJrfX1q27fLwipfHl8tyvuv/DInm3srKCf2U5K3T7b9UDZWqhj7QIwGNvFV+ZYiaVx01iWyIa+odyU4XgZ4DnPJtVKYbYxzA28hBpmrOALbgSpavbGmiQUxGhyOBFPHOiQqxx8Y1U2DeDaNfEuZy5890oATW7Z1nGbLik9OzEn4qzau2YYT1H5pBT94u45LMODdYjOLn/SYLRMr99lO6LPTsjb2q3QVF49Wuea+UkdLVsIgZtntXkkLisphviXS/zCulMOSlhzVfA2DTDryZQYkjXxLyBqiSvEgazhgdsdRfjAozFz+EV5+M8qvqcxVXqeoExf1q7IqmHt9XAGkaZc0norGlWnSNQ9PTpLWCpjfwt7JBp1TeLKsrCrjyy1lry0zxWyRdTXITO5Zmuq8jgpG+XVbMsHbo1NJCAReiXIAG1k1DFRxUxO8iek+yTjfUgXdxECiaTHM7owp7CNrFgsO5pvAZBfs2BOgTnj6vi5EI/j2qLuwn8AUVoK3Z0CXLFMs+8yXBGS+9N6gdRZ6MjOgK1zpS1oqFXWWA7BJQRK/VjYsA/mW7EOtzh4rRn0tLAkCaSMJDmnFQxJqUPNt8rejhtLFcCDTU4mxQBQteQEbhWCWawL4RCGPTDzITuZ/iQwwiHzLDLX2Ts1iLjMvrwccr2aBSOyTLa9BMmCV4MxAeCSpYD9RkMORyHxLqEPzoSTk2ieGDkVJD30IkeIYushi7XNi4kL17SMwoVN2OxSDHDShzgGVuaq7hx2SZd4nsJZrmNZWD9zasfoA0Zdn2Q5JKCs4q91A1CD1U7gsLb/peRJE+Z54TyWRr17WggY2q1StMwqD9TIq9cAS/JY5zE5GzSGVWBArDhk0/RSRcpjmjXKQYaSxqFGLnLwwYEdRYy+DiyOtzFALxjo3iZZUTAGqfHiaWvb9j+9xS1gnXg7Rd9g8FzRz433gBflipXL5BKWlSBpToDE/O9N5y6KapkoSQOiQ4HxLnb7X5/LpGhGIkIySfsNdEECV3TW1q00JMBMogTsaAZEvekCdKJtiuPHl8AgYyCyATutIGniU8K5cJlGXBCpSK1ir2jP6VHqgqvwrkCDbqkB0lpX6CCJSSBXTSKWLXbouAGJtZkn30SLfsjYbeEsW4t50RvzEvZtXwIQ71L4akjMUao/RfZLJoJs3HlCpJxpTy5M6Rh+dw8kfDhr4DVHfngYwntSA37I8xKSvKo1kNriuiel2p0oau7LeopK6RdjEqRqIyFelFREqwRR1Nr/yC1r8+GO3L/3YzWf3l/z4Y9G/1O0kcqCPiMkXgx9/BINGnEbM9+TdaeTHfhfM4WlCet2g6D60/1Lio4vfiYH4UNK9E37d/o6Qg1xdRh8h8nuwy/xI9A/pBjLfsgJZQwkqigBdRWHSWCU4YUrwnkS1eak00CIWiOYbl7il1C0oK435lYTt47/5DfkNyYvfEPIbNuj+EjH4jRyI44S/xAb9aQV6J+En/67gL4lBQfQRAgf4SN5dJxcDogfitBxeQA66D5UfXejvIY4UpP/uhTh5OCDiJfZPh1suYV5+v4kZLV2gjBIhkP5mLytIKlMpg01y8KKAJKbOgCR+sgug9avHf/cvvz3+5f95eSXqxGX3HcWtBKrB+kF/fydAy/M1USkaDLl0+GsZ5P+BWediIWaiHg3WnnFJWb/63f/0N7/+iT/g38ODkQN/5Tv/uwd/5ck//frX/+2X/p//w9//odIoVWvwTsttqQL0lNoF5RtSJfYlZRkDS0zwW4oUy0w49ilMTu8HAJv71e/+t//3b/7ZP/7z9//h70W+JWA7UIyUVQVoyfrVJDxIcCTL0BR3p/WDLFNiE0eE2Cq8mlKtdVK2Xv7rT//sH3y9/CmoFFwCFQAsHVfYSVnB+tYKluIJ3WKBpolmjaZsECeNPA3bSGqNjO9j3+TSyyVFJBTQEmtLnEIsamI0UXgLoeEKGtWgl582t9GgVzRGLdQ3uWi5JGU25AbpKXQ7dSIpW3sGGRVcrKpxg01erYJ+iSbIUoFRXJUuys1+1XyTi5CLtYRQZW/MJthjr5BVBY4kWiwtLNJH9H1tAvyjFoI8mfJoZAHNt/Ui5dLjloKXR/kluqoSaRCULim4w1NJO1YBbjmB0aQV5IkD6fsITdCJfda39aLkMuC3VFBlilisWkjwJqRndXyj2qPpAUlpaQkeGQBVSkrLLIX81jrf8tt6gXofl+9LNCzpAUkZIOvVSY/Y91qn1E1600xZBhrEhPmtfeZLqyyxsXoL3pbx23rBdjJGqSqtsbG9BQAyEcRMQN9ps1d1C7l8gTU8oB3TZEFj6+X98/eDb/79h1fdkfHf9f65erw/9NvHj4h3nT979U8vF81vqYlAS9k8T+sWUFWpBlkGKS3LLIU2b3qAvk/kW/afgz+6Glkvr9g8DWbpw/NnPyOXj8/Y4/lz/vfjf6tc+JueXTw///6f3h4D93eFwyXlkDU0E4qmn1Ux362651O4qFJDLDC0hhl7BcXimH559vxjJ4QRufzs4/nznz/8/ufe9P75x39qufwfJ0APZGNclWkPYop1hDakHp2pWtRPvGpL2EJUOZoglJNBlF/glmU2ao+df/fTxYWSx4cPPyuXDx++H8ql2/NeffggV90rfhEhl1figuI8+aYPUmzd9T6Ak34puQjcUvAc9qjJslTxREV9nKRwE4PFxUJ6icYte7H0xoBoGp9KGw64RHJV6rDNyHr5wO7cZ8+FNC66vV+ogWd8H/v++YW4wX/LltY5f/l7KJfn79mbnv30oVM5F/wyr953z7qJ//BevirOg3Jhsv94zj65+9SLD7+wXDrcMlNU/NWoO5kq3LKSuKWskExhSmsm10yPTkJ1konmIvBIpi8jThuul/dMuYi798Pz848fPnzHBfXs+ftnHzr90svst3z9PHv+7MOHZ/JOl3K5uHj24fvz8+4Qk+H3F/ys9+f8tFfnFx8/fLx4/kGep+TyjMvy+bPn3z179fF5f9LHX1rvV5qfZcBvWSInRqUVQbrkCpFdWSpvySBSSg3ech17A2ptiI+96qb54nlvfnERfH9+AfV+r3w+smkTe5tcXEIu3fs/9rP6XSfHj8rIe3/+N90F38vz2D8f+OPZ8+5u4Kf+9vz8P3Yn/YKWgMQtwYYkehpIc0mmS1So7UgnsGRAl5xhdQI0VQYuIHXLMqsGpnU2WC/9NHbz+r1YCXyzB/ZYp3zen/NTf9uZ0EL1SLn8ttMifFLZUullIzaq34oznz3/Xpwn7eRu2/rw/DugyaS4fzm5lIjTGPVBgGJJsaJB+xaEKktQDYbyxA1qGBScFvmW7WC9XPSG6/MLrOuBXPiEdbJ4j30WIZfvxBuevefHtR3WKRD5+CDPE+vlg/4Mpdv+sgX4P9pORvmWySDfMitxr4rK4HyTkQGE8g+5ZVFzsQwXJKeK39JYL3DqDsjlFXv6kU/e+16E0meR+oX//e13TFM8+/DelMt78Y5XPyFhws/4p5KLXwkUHwXAIE9ciej7NTqZQgNZ4Zao51sGe75l5mpJYVync5YG9piclY+9HhZeI/Yrv7v46f13P6l9DNvJ/XwrpcIW4Lnax74HU31QLkI1qX9/Mbm02QjtaO9BmgiyiVumFhyAFuJJhpIvzatlWVoNuGXLLr6P14u0gpnaZZN+0aveiwssF7ZYujkTcnuF9cv7n9SJ//Fc2W8/dWbbd/0FO/1ySC6vxFe4eP7ql5VLzwOPqXgrQ53IUCWIeSmDDe6CB3n5VMWehnpEXocElfvtzVgv+ibld/zH59+94u7Hx+52Z15gP92/fS7mjFnQ3//E7OhXI+uFr7HvnjMBvDo///jT9x87LcQ0+wf+/NnPrBcuwe5Tf7ltbBy3zCBDIkyQGbiTUP+nQ/Jw3LhyKDAAJ6uUKGO96Jv0A79tnwl/sls/vV+p7n3+Yqf5zz8O97EP590b3/PX/u/+eW8/d8/ZvP+MXMCn/sK4ZVaOUFpjpLEFlJaQJ77EuCU6MiQxxQkECLcUWKixXiBI0vnqH599fCXHr+ThVwph+cCU/n9F7xWnfM/eyJZGZxKw58/ke/vn+jwIuHwvLws+9ZeTy+N/WkLu7xQbUhnckDKzZbtBxQ/fk5QHxYL4/zPUfOFbvFLK5X/12xM4N9J2GlkgMH9FBJKzQQCsTEZ2tEGCTCXaJeFuMdm3+D7ELf9Wd0hKkViAylcxMckXCrgqDYcE9IkZ7miVfM+guZjALb+tF4hbVurO70KRQstX4wNLqvwUBF9kMUALk2orIIkStirNNO1oLxZxzW/rBeOWMrA/7Ms37EiJPXYmCQsskNaSXP6H6fvVIK2MvM40+7ZeAG6JdHlaIlUMTYIM6H/tYVoQVLPkHqWLZtoB9gYMDNUgU/YT/7ZeTNyyBLaRtpAOJV+UY7glRJChTZyV6cBGG2uXVH7LtwT6ZZlV4+z7mu2oAt0OtW5JR6DKv4xblukw61zXiX9bL1IuadICcwkEHBEdeAUXVaVKlSuAQeoSCqRb0jFFg3FL8dHpN3sM4pZlC/ItARqcZaqYGzsxGqqsjFx+kUiZoTTYQwN1aZ2q9G29QL0PLDETtwR9eYBvOcRbfq718UHcsqwA+Xi/jvh6+fVP/8z/92sDt4RtDNOkHA9VVrrkb9DZdQS3TFCUXwusQrhlqnDLb3V8oo6PrRecb5HANi8j+P8Q3kxHAEnT+DoQ3kR14hy3/NO/+9//l2+PfzG58jFuCT2WMaTROJKlZgQZy+ivwy1VuY3FeRV66jfEAAcHh4+MnkbA8WJ4gb84oODS5ODnkIOD0UsPrmwc6fhhlulQLKgvH7JvYUwM45YpzBMfJI1jGclSToxbMr3/p46MgxYd1QTtKCBo3g2IGPyuGxTwSNH9lUfAoOujoC8ABvR34GoUXrroX+qImMWA/O5HMPgRDtBpYvCjGFAwyPWR4kd45MffgUH/pUgnl6q01E6SilZTGhMTMeHeY6lSiFuq1vAVrNFIq0HMgPNftIZugQOQGdjzW1KT9YaOD0TT+r6JD2wUTsGAoNZHmt8SnFYXRLdLkjyyiH6qMBtX9510JXWW7AJUGH1kx3pVQJI+3BpeUQ+CvjxAElLRZBCD7Ir0U9h+QiL22SDfUm5iWWXW0XZXq4wBLDSH/cRz3JMr1z2i8E+Lh81zmho1jMqHVFKwNWwD+l/Uh9h3JWlM3Az7AzYDarixVmb9ZdAAdbEATLZj/cSxAji4iakyGMC+B0kRjV5+CexBnqCmsYN+4iMdkrGMMGu47uyuf1pu3Iu6k24OKdnyAQF8jRqFA853ROwHyQCJpIYf4zU3OchJjgagvwWBrPQ9z5VMGuNTWAkOMsSq9HPZYAiQHGBeWQJbLCea0rotS92QXHqyiegnnsM2BcWwO/pQLN0Ui3mgjW4eSky5mmTXpACTTwDhPinMPogmB5nqXo7Ysophz/cGigXeK0ASiP5U8I0n2suX2fcJprSC2cnQQE5QXf7YCpMsf1Jglax1BkXjkte054GvZU9jtV9Ijv0GKxqwIcUN7OymmcYJvn8hg5yYjgJvYkAFqT1o0DUUdN8lmMXaIOktTJ7tvBm0m8UD2Zen4xuXMd2+xMLELStcfSfcmxSIBRQXV9BArlDSeCqJfTJZ5V+lgOyqUvyWnRKWercnXssLoFty1GMHDHp1Ajmiab8v5bDnu7iAUjSA+TIeDlArvgFjnxQL4pZDLYEN5uCcDvvyDAY9L1y1rAzcUk2+JDjUXRX6qspKHFmmJm6JHHsxOOjyK78F4JY+IOg0mqiifuK1bpErBooWmiBSb93AWB2BjatqQnHjX91jx2w1pRQ7GJjNxSDZZTFkvoQU9Yj/F7yH/ZzeHiutAS6fmXWQKAZZZYIvrDLoEqsU9KqoUJvXDLZ5zzLETgZxSx9ZQMD9ku1AYG8QZImJ5ni9o9ARheo27wXfsGSTPqL78sWQ0XTMEkPdjhsyTnZJxu583Ow6ByS9YvJz2NkdiSWX9lhlePkZICTBGeRmvWUFZ7WCG1+V4kHaDvPRTGit78tDFB1yseYxbt50OQ1kv4eh+m5Ul0FC16eTikixgNZdBG7wBO7pxgD7GINNTNFgNwRrHfIzusUY5IhOfuDEKL7xcdyyzEBFaqLj/xXMqqjM1sfIYBvsaNi3xChp7wt1cpEdbIlvO30XXsfZPoLWR/GB1ke09hz3uMgh632B6JIF8zXo7EJg02+l8mvYJrsemljmHUEP232qcWU+OE2anANae9GXZ0S39B2pk6EPkiUD7iSpJ/AAwMlZkrXDQU8dA5kDRF8e1bMgv59Ob21n+zSdnubKUYghhbhyITr46y7a3j+iRje11Dq5orQ+bKMh31KbwXoTMxotjvnyw94z2LNCXOi6Mxaylns7eQnqIMZxy+zQnT8kje3NYGmWJZjRLFW0TCZuWSncsqlB6y5um2TutCAC+epur7yQ+BhX+HzQv1g09NJ9qnnPS95UNxdYE3tX0QxEadLmok46qIVYbW5iZq8K1CgcDg6tMEQjnHe3WQHlKvskamDfwC1Hgl1wVssEx4lbAEiWB6oqDVqmtDVwSx82OCT8edL1F/Oz5mjyktD46unh1MoJWaSPi8uH0wXpWsTcPtz5bH+bRvbRdd6Nj312JKiao8sT2eUn7nsaitYwQin0loHQLaq3MiHYnZRH5ICome6t5Rhoshy3BMwVPzpeYUb7Hm3Pi748bY9bAkZKyW8JKcblkaTSrQ0TlIME8lthe+peBVUtMMuEQusvXbVlqXWYxi0VJvaik8skYrrmKV/wJklO9Kmm73bbXeQ67qyg16HDnu1f004dTUi7ddzI8VJC7W3IXhDM7s2gLw+FfXlIA9q8FCODHKmTsfeMIV8ErhbgldY1MbukYNwS9OUpEZkbJPGBRzQ6mY7ilhXELVGOsk5/rkBzMXCa7suj1aaQy4WzPV3EoRMeWW8iN6PHzoX3R2vqzFdMHOEJe7a9XtuRd+c/zh37rLUvwt/TqXOxnVi1buY66nc3QP83MW5LSgxrOW9Qt1jUqwKq/PoQbolBt3ignAqEW8JAyrIc8reXKNqLtHxr4JYyES2BRcyJjOK3mjpbah2dLFiVCLfsbkz6tpfL+TygtHR561g6jWb0XTT/B/Y0dN/Srbtkz7zdjOmX25p35eUnhdEpe+r9f2ybEl4BaGkFO/Y0I933hnAy6rEr3Q7YB8nwQQCTfY368gG/BXZIJPCI7MuTGfhWlaLukjirIhnkW6TAvakykGJZQU2FB5A6M1UcjhC3rHU/cUJvnT8XpPDPgqZ5zLzo39JNxJuKU9s9pmwRZU29WPr0MnqI6Xy3bNjjJpoyuVz2cTLRy1L6ltpVIQVuigg65UmVr8XC5rsZIDHYOzmI/9dwtUAvSfUU0B24DNwS5VsAJybBBclpOyD2hS3bMQGsglikbtFB47YDMbV9wHNmeV+eftak9Sj6iT85Z3yQn3rbfXTuntFTlzer7OSynF9E8/CIaZFL96Gh82jubbfe/Nym9u6+Dxf2V4tN2FF7EmNOTK4wHKRB6Jhj3wz6MY6ZzmY3LdjqAQgM9ElsM0xwmIFSPYiWKegsBVtVCjtSIeIqZCCLyVd5S0JGMsCQZBq3lC4Zm5STbr3w/sgNWYeO6003NtuyPkm5vCvo4k3I+8ku+HphcnHDadej9h/Z0Xui0Buqmn4j31IjmnWjUZWxfWtUyw/xFtxNS0TTYJuXGpt6sHtZo/uJVwlI88bqBBDui6qKJEEDlG9ZHcItYWlNor0kyUSuNFnXlwdZj1wpiL7Vzox5L6dO2D7G9Mm96eTCnBjb/UpPLPIn/2TuTOgnvo+525MmjuOmWov1Ust2Sf1fsEByMJAmVi0/mshG4WLHIzlEYmoQfCnyMd1iKhqk40iO0TLYM1PglhnQE/BmL9Pq0ACUjkGWnypFLRhw4p8WC+e31GYEHIg4cg6brB+JvtW8n3jfhzcPoyu6YXJpuFxu4jmzybglPaVv+CIKo0s+C9PoiR8lfbtEgiJfwp/AzsWYnhi5v+NcByyHp5GfG0BjAVgbBJoe3RFpj5WDvhOt0dgKRiIzlPh/KKPPiF5m46fpYoFu1Xb2GOxTT0Q/8b5v9cQJ1/UiPI+OC65fCr6P3dPwwmav9uuFyeUqik7j+s5hSihk66XA7auF06g7KJODekL1Ys9hy8t8gM3BNpmw3ziBHbhw90ejH2NteJjSHhtp7Q0QEs3fAgdlCxbIiCTKzDStIVOTMjBK2Ce5k0sRg15rBX0dcblMu31s4V1wX9JznMuv0ZRDmbZzR3/fverYa6aFuNK5jC5c9v9NzqzoY9JvHhBC1BpEYWJ8URUwwkyGKCk1rKrD3eJHYpByoeoAGhHt5pRYQE/4Ti5lAvhElDYY0MCpEkswKEGjEFzyWkLkS+VwasugStCnSeuOySWHuRNshvy7l6TJs1OfDegf3tj2ww/x5iFdfOHteenbTUDov2KvTmePhLbvqoLm9G//PLX/y5LN7fI+AKkNuAN4bW4eBpRZIzQNhnpkv9Ea+pY1avaOUgLMI2rQ6M7vCvjPKe4nbqRL4pRX6PKnlVF8nKFK5CRDYknhajGLXQcV/R1uaW4RHezIWzzzX1N0kWGmaEV/N55KR0gvRZ4A1sNTXd4L0OINwELRjVnAWH6O0MkY9djF6mToqqCm8g0M4WHUGfRKrweWmNzrRBwZgos4sqtj/VWJ6l/KysQtYbIr6E5iWgblEK8GNpzskygaHPZ9p2kXXJS7fd7F7Ukz5pdrpUD7KSZCnfTRyd6P7OdGoJNyALwTNMhBU2Q4MPMttCT4Eb079QMdo9G6RQRTIbaszATdJxGWPlaoiD9DICaskMQdEsp0eJo2yypYsFRBrp+qgownvT0mu0vLrrgjOXYaQhxNMpExGoFOEiVd6Vs2BPaJJTBcMhgg3dIHRmU/ZqG2YOYAzplpzAHOa1I+LgVLWOOWKsTSgqAI5oTRR1BZkkhLzhJEWK6dytZkmGlx93JdGVMp3FJPMUT4RK4q6GlsGFIwvgXt11glrhohxAIHF3HfXphnA/YtmSYDviExGv+SwUDG84wUNS0jE+uXcWTcfh3xXxzQLap6qdT87lWJKzVQRLMydQvuayJ2NIFbmm1ekblPkV1ZIyMTd3atx7U8Hqg8m2JUaeBQfA6DXTJnBpjOZgQuh0hMbtxF2G+BA5FviQvAxtiQqqF7M9jEUObLCM17O2ZH4xKMFPQTRz2iUb6lbBQOvAKZNVSj/KxenagfTQqwrRC1SR3MkER5n4ezwcHiRRmhxV9W+VAsMbiLJG6psyoyiFtmJaQdHWVVOIxbjnhBmU6xSOVABzlTiVuiFEvTwsfmPlw6MoM8hnt6DLfxUdxSZ6WP3RFFcyhxpYB+S9EM2s3i1Bo4+Ui3mAEGA7esMEFMMoy+J1AsMPgC/RY8MC4AcMsMsMXIfEyMW6L0fTmRSreoCF8OM/ZAuqRMvoQmawzcSQqDXaTJAVSpdAsxM/aEw9EM8ltV3cewwzxuN4+70hOC48gyXg3zLTFuWf11uGU6glsOOEgSXLGP8pYP4JZGC3E8+dRsv44GULcodxIk3DcwOmlUDoz1Bj+QSIny8iQ6Wf81uKXQ/3k9wNGUjBRuqWAunAcJUP4MplhkGrdER0DHXjPlrwS+ZZVB3FK278kgbglVbV1Df6I2zX2tWwgwbepenYgtUaUEGlmVGKSHocwGAmTNIF99JAxWGHUf6AI5dIwO4Za1iVtW4wV3I7oFdVWCAUujx46BlrVCt2SDahlFCdTL6P8XYAC901f5iD/HaQAAAABJRU5ErkJggg==" width="407" height="357" alt="">\n                </div>\n            </div>\n        </li>\n        \x3c!-- End ATP Intro Tour Content --\x3e\n    </ul>\n</div>\n');return b.join("")}});
define("views/atp-popup-view",["jquery","views/base-view","tpl!../templates/atp-popup.html","components/modalpopup"],function(a,b,g){return b.extend({events:{"click .introtour-modal--close":"launchATP"},initialize:function(){this.$el.html(g);this.popup=new FID.Applications.IntroTour(this.$el,".info-flyout","introtour-atp-overlay")},open:function(){this.popup.open()},close:function(){this.popup.close()},launchATP:function(){var a;if(null==a||a.closed){a=Math.min(1206,screen.width-74);var b=Math.min(912,
screen.height-112);a=window.open(envMap.SCS_URL_VALUE+"/customeronly/atbt/Atbt.shtml?Ref_at=summary","","location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes,left=32,top=32,height="+b+",width="+a)}a.focus()}})});
define("listeners/atp-popup-listener",["views/atp-popup-view"],function(a){function b(){}b.prototype.start=function(){if(window.fang&&!this.uid){var b=this;this.uid=fang.EventBus.subscribe("LAUNCH_ATP",function(){var c=$(".js-atp-popup-container").empty();c.length||(c=$("<div>").addClass("js-atp-popup-container").appendTo(document.body));b.atpPopupView&&b.atpPopupView.undelegateEvents();b.atpPopupView=new a({el:c});b.atpPopupView.open()})}};b.prototype.stop=function(){window.fang&&(fang.EventBus.unsubscribe(this.uid),
self.atpPopupView&&self.atpPopupView.close(),self.atpPopupView&&self.atpPopupView.undelegateEvents(),delete this.uid,self.atpPopupView=null,$(".js-atp-popup-container").remove())};return b});
define("tpl!templates/mobile-collect-initial.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large mobile-collect-modal mobile-collect-modal--initial" role="dialog" aria-label="Collect mobile number and/or email">\n\n    <h2 class="base-popup--header"><span>Let\'s take care of your security first</span></h2>\n\n    <div class="base-popup--body">\n\t\t<p>To better protect your account, it\'s important that we have your <b>mobile number</b>. We\'ll use this mobile number to contact you or send text alerts regarding your account as you request, and for security reasons.</p>\n        \n        <form action="" method="post" novalidate>\n            '),mobile&&
(b.push('\n            <div class="input-multiple-field">\n                <img class="input-multiple-field--mobile-icon" id="mobile-interstitial-phone-icon" src="'),b.push(envMap.WWW_CDN_URL),b.push(""),b.push(envMap.NG_CONTENT_URL),b.push('/images/MobileIcon.svg" alt="" />\n                <label class="input-multiple-field--form-label" for="tel">Mobile Number</label>\n    \n                <div class="input-multiple-field--container">\n                    <input type="tel" name="tel" class="input-multiple-field--tel" size="3" maxlength="3" autocomplete="off" aria-required="true" aria-invalid="false" />\n                    <span class="input-multiple-field--separator"> </span> \n                    <input type="tel" name="tel" class="input-multiple-field--tel" size="3" maxlength="3" autocomplete="off" aria-required="true" aria-invalid="false" />\n                    <span class="input-multiple-field--separator"> </span> \n                    <input type="tel" name="tel" class="input-multiple-field--tel" size="4" maxlength="4" autocomplete="off" aria-required="true" aria-invalid="false" />\n    \n                    <div id="multiple-input-error" class="message-field message-field--error message-field--mobile-error" role="alert" aria-hidden="true">Mobile Number must contain 10 numbers.</div>\n    \n                    <div class="input-multiple-field--supplemental-text">Message and data rates may apply.</div>\n                </div>\n            </div>\n            ')),
b.push("\n\n            \x3c!-- Hide email input field based on business requirement --\x3e\n\n            \x3c!-- "),email&&b.push('\n            <div class="input-single-field">\n                <label class="input-single-field--form-label" for="email">Email Address</label>\n                \n                <div class="input-single-field--container">\n                    <input id="single-input" name="email" value="" type="email" class="input-single-field--email" maxlength="254" autocomplete="off" aria-required="false" aria-invalid="false" />\n\n                    <div id="single-input-error" class="message-field message-field--error message-field--email-error" role="alert" aria-hidden="true">Enter a valid Email Address.</div>\n                    <div id="single-input-error1" class="message-field message-field--error message-field--all-empty-error" role="alert" aria-hidden="true">Please enter a valid Mobile Number or Email Address or select Not Now.</div>\n                </div>\n            </div>\n            '),
b.push(' --\x3e\n\n            <div class="expander">\n                <div class="expander--content">\n                    <p>We will update your profile with information you provide and will use it in accordance with our <a href="https://www.fidelity.com/privacy-policy">privacy policy</a>.</p>\n                </div>\n\n                <div class="mobile-button--container">\n                    <button type="submit" class="expander--button button-component button--primary expander--button-submit">Submit</button>\n                    <div class="expander--link">\n                        <a class="expander--link-deny" href="#">I\'ll do this later</a>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n\x3c!-- eReview 857666.2.0  --\x3e');
return b.join("")}});
define("tpl!templates/mobile-collect-warn.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large mobile-collect-modal mobile-collect-modal--warning" role="dialog" aria-label="Collect mobile number and/or email">\n\n    <h2 class="base-popup--header"><span>This is important, help us protect your account.</span></h2>\n\n    <div class="base-popup--body">\n\t\t<p>Please provide your mobile number in order to quickly and securely do things like: </p>\n\n        <ul class="mobile-collect-warn--list">\n            <li class="mobile-collect-warn--list-item">Log into your account</li>\n            <li class="mobile-collect-warn--list-item">Update your username/password</li>\n            <li class="mobile-collect-warn--list-item">Update your contact information</li>\n            <li class="mobile-collect-warn--list-item">Receive security alerts</li>\n        </ul>\n        \n        <div class="expander">\n            <div class="mobile-button--container">\n                <button class="button-component button--primary mobile-collect-warn--add-now">Yes, add now</button>\n                <div class="expander--link">\n                    <a class="expander--link-deny mobile-collect-warn--later" href="#">Remind me to do this later</a>\n                </div>\n            </div>\n        </div>\n\t</div>\n</div>\n');return b.join("")}});
define("tpl!templates/mobile-collect-confirmation.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large mobile-collect-modal mobile-collect-modal--confirmation" role="dialog" aria-label="Collect mobile number and/or email">\n    \n    <h2 class="base-popup--header popup-icon--confirmation">\n        <span>Thank you for making time for this</span>\n    </h2>\n\n    <div class="base-popup--body">\n\t\t<p>We\'ve updated our records to include this information. You can make other changes to your contact info by going to your <a href="#" class="mobile-collect-modal--profile-link">Personal Information</a> page.</p>\n\n        <div class="expander">\n            <div class="mobile-button--container">\n                <button class="button-component button--secondary button--secondary-action mobile-collect-modal--button-close">Close</button>\n            </div>\n        </div>\n\t</div>\n</div>\n');
return b.join("")}});
define("tpl!templates/mobile-collect-fail.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large mobile-collect-modal mobile-collect-modal--fail" role="dialog" aria-label="Collect mobile number and/or email">\n\n    <h2 class="base-popup--header popup-icon--alert-outline">\n        <span>Before you go</span>\n    </h2>\n\n    <div class="base-popup--body">\n\t\t<p>You\'ve opted to not provide your mobile numbers at this time.\n            '),0===
remainTime?b.push("\n                We may remind you periodically for this information.\n            "):1===remainTime?b.push("\n                We will remind you 1 more time for this information.\n            "):(b.push("\n                We will remind you "),b.push(remainTime),b.push(" more times for this information.\n            ")),b.push('\n        </p>\n        <p>Remember, you can always update this information by going to your <a href="#" class="mobile-collect-modal--profile-link">Personal Information</a> page.</p>\n        \n        <div class="expander">\n            <div class="mobile-button--container">\n                <button class="button-component button--secondary button--secondary-action mobile-collect-modal--button-close">Close</button>\n            </div>\n        </div>\n\t</div>\n</div>\n');
return b.join("")}});
define("tpl!templates/mobile-collect-error.html",function(){return function(a){var b=[];with(a)b.push('<div class="base-popup base-modal--container base-modal--container-large mobile-collect-modal mobile-collect-modal--error" role="dialog" aria-label="Collect mobile number and/or email">\n\n    <h2 class="base-popup--header popup-icon--error"><span>We were unable to save your information</span></h2>\n\n    <div class="base-popup--body">\n    \t<p>We encountered an error while attempting to save your mobile number.</p>\n\t\t<p>For your security, please update your information at a later time in your <a href="#" class="mobile-collect-modal--profile-link">Personal Information</a> page.</p>\n\n\t\t<div class="expander">\n\t\t\t<div class="mobile-button--container">\n\t\t\t\t<button class="button-component button--secondary button--secondary-action mobile-collect-modal--button-close">\n\t\t\t\t\tClose\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>');return b.join("")}});
define("views/mobile-collect-view","jquery views/base-view tpl!../templates/mobile-collect-initial.html tpl!../templates/mobile-collect-warn.html tpl!../templates/mobile-collect-confirmation.html tpl!../templates/mobile-collect-fail.html tpl!../templates/mobile-collect-error.html components/modalpopup components/expander".split(" "),function(a,b,g,c,e,d,h){function f(a){try{Bootstrapper&&"function"===typeof Bootstrapper._trackAnalytics&&(a===l?Bootstrapper._trackAnalytics({pt:"ss",action:"pageview",
pname:"Mobile Interstitial"}):Bootstrapper._trackAnalytics({pt:"ss",action:"interaction",intname:a}))}catch(b){}}var j=envMap.CUSTOMER_SERVICE_URL+"/ftgw/Profile/action/profile?hint=coainq",k=envMap.DPCS_URL_VALUE+"/ftgw/dpcs/ste/view/personal-information",l="mobile_only";return b.extend({events:function(){},initialize:function(a){this.data=a.data||{}},destroy:function(){this.$el.empty();this.undelegateEvents()},render:function(){var a=this;a.$el.html(g(a.data));a.popup=a.$(".mobile-collect-modal--initial");
var b=a.popup,c=function(){a.adjustModalHeight()},d;window.addEventListener("resize",function(){var a=this,b=arguments;clearTimeout(d);d=setTimeout(function(){d=null;c.apply(a,b)},250)});b.ModalPopup();var e=b.data("basepopup-instance");e&&(e._group="actionBarGroup");var h=b.find("form"),e=b.find(".expander--link-deny");b.find(".expander--button-submit");h.find(".input-multiple-field--tel").not(":last").on("keyup",function(b){b.target.value.length>=b.target.maxLength&&a.jumpToNextField(b.target)});
h.find("input").on("keypress",function(b){13==b.which&&(b.preventDefault(),a.submitModalForm(h))});e.on("click",function(b){b.preventDefault();a.openWarnPopup()});h.on("submit",function(b){b.preventDefault();a.submitModalForm(h)});a.adjustModalHeight();f(l)},open:function(){if(a(".quick-trade-popup-wrapper").hasClass("animation--visible"))return!1;this.popup.ModalPopup("open");return!0},close:function(){this.popup.ModalPopup("close")},adjustModalHeight:function(){var b=this.popup,c=b.outerHeight(!0),
d=a(window).height();b.toggleClass("is-out-of-viewport",c>d)},jumpToNextField:function(b){a(b).nextAll(".input-multiple-field--tel:first").focus()},submitModalForm:function(a){a=this.getFormValues(a);if(a=this.validateForm(a))f("mobile_provided"),this.saveData(a)},dismissCurrentModal:function(){var a;this.popup&&(a=this.popup.detach(),delete this.popup);return a},removeCurrentModal:function(){this.popup&&(previousPopup=this.popup.remove(),delete this.popup)},showInitialPopupAgain:function(a){this.popup&&
(this.popup.remove(),delete this.popup);this.$el.append(a);this.popup=this.$(".mobile-collect-modal--initial");this.popup.ModalPopup();this.adjustModalHeight();this.open()},openWarnPopup:function(){var a=this,b;b=a.dismissCurrentModal();a.$el.html(c(a.data));a.popup=a.$(".mobile-collect-modal--warning");a.popup.ModalPopup();a.adjustModalHeight();a.open();var d=a.$(".mobile-collect-warn--add-now"),e=a.$(".mobile-collect-warn--later");d.on("click",function(c){c.preventDefault();a.showInitialPopupAgain(b)});
e.on("click",function(b){b.preventDefault();a.openFinalPopup()})},openFinalPopup:function(){var a=this;a.removeCurrentModal();a.$el.html(d(a.data));a.popup=a.$(".mobile-collect-modal--fail");a.popup.ModalPopup();a.adjustModalHeight();a.open();var b=a.$(".mobile-collect-modal--button-close"),c=a.$(".mobile-collect-modal--profile-link");b.on("click",function(){0<a.data.remainTime?f("mobile_skipped"):f("mobile_abandoned");a.popup.ModalPopup("close")});c.on("click",function(b){b.preventDefault();a.popup.ModalPopup("close");
a.openProfile(window)})},openConfirmationPopup:function(){var a=this;a.removeCurrentModal();a.$el.html(e(a.data));a.popup=a.$(".mobile-collect-modal--confirmation");a.popup.ModalPopup();a.adjustModalHeight();a.open();var b=a.$(".mobile-collect-modal--button-close"),c=a.$(".mobile-collect-modal--profile-link");b.on("click",function(){a.popup.ModalPopup("close")});c.on("click",function(b){b.preventDefault();a.popup.ModalPopup("close");a.openProfile(window)})},openErrorPopup:function(){var a=this;a.removeCurrentModal();
a.$el.html(h(a.data));a.popup=a.$(".mobile-collect-modal--error");a.popup.ModalPopup();a.adjustModalHeight();a.open();var b=a.$(".mobile-collect-modal--button-close"),c=a.$(".mobile-collect-modal--profile-link");b.on("click",function(){a.popup.ModalPopup("close")});c.on("click",function(b){b.preventDefault();a.popup.ModalPopup("close");a.openProfile(window)})},getFormValues:function(a){var b={},c=a.find(".input-multiple-field--container .input-multiple-field--tel");a=a.find(".input-single-field--container .input-single-field--email");
c.length&&(b.mobileNumber="",c.each(function(){b.mobileNumber+=this.value}));a.length&&(b.emailAddress=a.val());return b},validateForm:function(a){var b=this.popup.find("form"),c=b.find(".input-multiple-field--container"),d=c.find(".input-multiple-field--tel"),e=!0,f={},g,h=b.find(".input-single-field--container"),j=h.find(".input-single-field--email"),c=c.find(".message-field--error.message-field--mobile-error"),h=h.find(".message-field--error.message-field--email-error"),k=b.find(".message-field--error.message-field--all-empty-error"),
b=a.mobileNumber.toString();g=a.emailAddress;c.attr("aria-hidden",!0);h.attr("aria-hidden",!0);k.attr("aria-hidden",!0);j.attr("aria-invalid",!1).removeAttr("aria-describedby").removeClass("input-single-field--field-error input-multiple-field--field-error");d.attr("aria-invalid",!1).removeAttr("aria-describedby").removeClass("input-single-field--field-error input-multiple-field--field-error");k.attr("aria-invalid",!1).removeAttr("aria-describedby").removeClass("input-single-field--field-error input-multiple-field--field-error");
if(a.hasOwnProperty("mobileNumber")&&(""!==b||!j.length))b.match(/^[0-9]{10}$/)?(d.attr("aria-invalid",!1).removeAttr("aria-describedby").removeClass("input-multiple-field--field-error"),c.attr("aria-hidden",!0),f.mobileNumber=parseInt([b],10)):(e=!1,d.attr("aria-invalid",!0).attr("aria-describedby","multiple-input-error").addClass("input-multiple-field--field-error"),c.attr("aria-hidden",!1));a.hasOwnProperty("emailAddress")&&(""!==g?g.match(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)$/)?
(j.attr("aria-invalid",!1).removeAttr("aria-describedby").removeClass("input-single-field--field-error"),h.attr("aria-hidden",!0),f.emailAddress=g):(e=!1,j.attr("aria-invalid",!0).attr("aria-describedby","single-input-error").addClass("input-single-field--field-error"),h.attr("aria-hidden",!1)):d.length||(e=!1,this.openFinalPopup()));j.length&&(!b&&!g)&&(e=!1,j.attr("aria-invalid",!0).attr("aria-describedby","single-input-error1").addClass("input-multiple-field--field-error"),k.attr("aria-hidden",
!1),d.attr("aria-invalid",!0).attr("aria-describedby","multiple-input-error1").addClass("input-multiple-field--field-error"),k.attr("aria-hidden",!1));return e?f:!1},saveData:function(b){var c=this;a.ajax({url:"/ftgw/fbc/ofportfolio/rest/saveCustomerProfile?csrfToken="+(window.csrfToken||"")+"&phoneNumber="+(b.mobileNumber||"")+"&emailAddress="+(b.emailAddress||""||""),type:"GET",xhrFields:{withCredentials:!0},success:function(a){a&&("error"===a.status||"error"===a.emailStatus)?c.openErrorPopup("error"===
a.status?!0:!1,"error"===a.emailStatus?!0:!1):c.openConfirmationPopup()},error:function(){c.openErrorPopup(!0,!0)}})},openProfile:function(a){this.popup.find(".base-popup--close-button").trigger("click");a.location=window.dpcsPersonalInforationEnabled?k:j}})});
define("listeners/mobile-email-collect-listener",["views/mobile-collect-view","models/introtour-queue-model"],function(a,b){function g(){}g.prototype.start=function(){$(document).on("OPEN_COLLECT_MOBILE_POPUP",function(c,e){var d=$(".js-mobile-email-collect-container");d.length||(d=$("<div>").addClass("js-mobile-email-collect-container").appendTo(document.body));e=e||{};var g=new a({el:d,data:{mobile:e.mobile,remainTime:e.remainTime,email:e.email}});b.addIntroTourObjQueue(function(){g.render();g.open()},
".js-mobile-email-collect-container");$.get("/ftgw/fbc/ofoltxsvc/mobileCollectionVisitedInSession")})};g.prototype.stop=function(){};return g});define("tasks/browser-msg-state-get-task",["tasks/base-task"],function(a){return a.extend({url:"/ftgw/fbc/ofoltxsvc/getBrowserMsgStatus",contentType:"application/json",dataType:"json",type:"POST"})});
define("listeners/browser-messaging-interstitial-listener",["views/browser-messaging-interstitial-view","tasks/browser-msg-state-get-task","models/introtour-queue-model"],function(a,b,g){function c(){}c.prototype.start=function(){var c=this;$(document).on("POPUP_BROWSER_MEGING_INTERSTITIAL",function(){c.browserMessagingInterstitialView?c.browserMessagingInterstitialView.getMsgType():(c.browserMessagingInterstitialView=new a({el:"#browser-messaging-interstitial-wrapper"}),c.browserMessagingInterstitialView.render());
c.browserMessagingInterstitialView.msgType&&!c.browserMessagingInterstitialView.isInterstitialOpening&&(new b({context:this,onSuccess:function(a){(!a[0]||!(a[0].entry[0]&&"true"===a[0].entry[0].value))&&g.addIntroTourObjQueue(function(){c.browserMessagingInterstitialView.openInterstitial()},"#browser-messaging-interstitial-wrapper")}})).run()});$(document).on("POPUP_BROWSER_TAXFORMS_INTERSTITIAL",function(){c.browserMessagingInterstitialView?c.browserMessagingInterstitialView.getMsgType():(c.browserMessagingInterstitialView=
new a({el:"#browser-messaging-interstitial-wrapper"}),c.browserMessagingInterstitialView.render());c.browserMessagingInterstitialView.msgType&&(new b({context:this,onSuccess:function(){console.log("yep");g.addIntroTourObjQueue(function(){c.browserMessagingInterstitialView.openInterstitial()},"#browser-messaging-interstitial-wrapper")}})).run()})};c.prototype.stop=function(){this.browserMessagingInterstitialView&&(this.browserMessagingInterstitialView.destory(),this.browserMessagingInterstitialView=
null)};return c});
define("listeners/adobe-target-listener",["util/global-deferred"],function(a){function b(){}b.prototype.start=function(){var b=window.location.hash||"",c=a.adobeTargetDeferred;if(toggleMap&&!toggleMap.VAPModeEnabled&&toggleMap.experienceConfigratorFeature&&2>b.indexOf("/")){var e=[{cardId:"tcm:1463-240603-99319",cardName:"Other Marketing Card",measurementName:"other-marketing-card-qa",category:"marketing",offerName:"QA Other Marketing Card",offerId:"331017",cardOrder:"0",campaignName:"QA Port Sum Marketing",campaignId:"101947",
campaignRecipeName:"branch 1",campaignRecipeId:"1",sessionId:"80c9b168e19d4c0885d604cd2c68ced0",tntId:"5802095d31d24bfba31e8529f05582ee.17_60",selector:"head",found:!0},{cardId:"tcm:1463-156757-99322",cardName:"Your Top and Bottom Performers",measurementName:"your-top-and-bottom-performers-qa-card",category:"account-data",offerName:"Your Top and Bottom Performers QA",offerId:"331010",cardState:"h",cardOrder:"1700",campaignName:"QA Port Sum Account Data",campaignId:"101943",campaignRecipeName:"branch 4",
campaignRecipeId:"4",sessionId:"80c9b168e19d4c0885d604cd2c68ced0",tntId:"5802095d31d24bfba31e8529f05582ee.17_60",selector:"head",found:!0}];window.cardListGlobal&&0<window.cardListGlobal.length?c.resolve(window.cardListGlobal):null===window.cardListGlobal?c.reject():(window.onAdobeTargetSuccess=function(a){window.cardListGlobal=a;window.cardListGlobal&&0<window.cardListGlobal.length&&c.resolve(a)},window.onAdobeTargetFailure=function(){c.reject()},setTimeout(function(){window.onAdobeTargetSuccess(e)},
5))}else c.reject()};return b});
define("app","backbone util/eventhub-backbone util/constants app-views app-events app-router listeners/session-timeout-listener listeners/page-unload-listener listeners/advisor-noaccess-listener models/preference-model listeners/atp-popup-listener listeners/mobile-email-collect-listener listeners/browser-messaging-interstitial-listener listeners/adobe-target-listener".split(" "),function(a,b,g,c,e,d,h,f,j,k,l,p,m,n){var r=null,s=function(a){if(null!=r)throw Error("Cannot instantiate more than one App!");this.options=
a};s.prototype={initialize:function(a){this.options=a;this.isLoggedIn(!0);this.constants=g;this.messageBus=b;this.sessionListener=new h(this);this.atpPopupListener=new l(this);this.mobileCollectListener=new p(this);this.advisorNoAccessListner=new j(this);this.browserMsgingInterstitialListener=new m(this);this.adobeTargetListener=new n;this.router=new d;e.initialize(this);window.PreferenceModel=k;this.appViews=new c(this);this.appViews.subscribeEvents()},start:function(){this.sessionListener.start();
this.advisorNoAccessListner.start();f.start();a.history.start();this.atpPopupListener.start();this.mobileCollectListener.start();this.browserMsgingInterstitialListener.start();this.adobeTargetListener.start();this.publishEvent(this.constants.EVENTS.APPLICATION_START)},publishEvent:function(a,b){this.messageBus.publishEvent(a,b)},subscribeEvent:function(a,b,c){return this.messageBus.subscribeEvent(a,b,c)},unsubscribeEvent:function(a){this.messageBus.unsubscribeEvent(a)},isLoggedIn:function(a){void 0!==
a&&(this._loggedIn=!!a);return this._loggedIn},login:function(){},logout:function(){},setCurrentAccounts:function(a){this.currentAccounts=a},getCurrentAccounts:function(){return this.currentAccounts}};s.create=function(a){null==r&&(r=new s(a),r.initialize(a));return r};s.getInstance=function(){if(null==r)throw Error("App instance can't be null!");return r};return s});
(function(){function a(){for(;l.length;)l[0](),l.shift()}function b(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){e(b,a)},function(a){d(b,a)})}catch(c){d(b,c)}}function g(a){return new b(function(b,c){c(a)})}function c(a){return new b(function(b){b(a)})}function e(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var f=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof f){f.call(b,function(b){c||e(a,b);c=!0},function(b){c||d(a,b);c=!0});return}}catch(g){c||d(a,
g);return}a.a=0;a.b=b;h(a)}}function d(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;h(a)}}function h(a){l.push(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(f){b(f)}}});1==l.length&&k()}function f(a){return new b(function(b,d){function e(c){return function(d){g[c]=d;f+=1;f==a.length&&b(g)}}var f=0,g=[];0==a.length&&b(g);for(var h=
0;h<a.length;h+=1)c(a[h]).c(e(h),d)})}function j(a){return new b(function(b,d){for(var e=0;e<a.length;e+=1)c(a[e]).c(b,d)})}var k,l=[];k=function(){setTimeout(a)};var p=2;b.prototype.g=function(a){return this.c(void 0,a)};b.prototype.c=function(a,c){var d=this;return new b(function(b,e){d.f.push([a,c,b,e]);h(d)})};window.Promise||(window.Promise=b,window.Promise.resolve=c,window.Promise.reject=g,window.Promise.race=j,window.Promise.all=f,window.Promise.prototype.then=b.prototype.c,window.Promise.prototype["catch"]=
b.prototype.g)})();
(function(){var a,b,g={supportsAddEventListener:function(){return!!document.addEventListener},createElement:function(a){return document.createElement(a)},createText:function(a){return document.createTextNode(a)},style:function(a,b){a.style.cssText=b},append:function(a,b){a.appendChild(b)},remove:function(a,b){a.removeChild(b)},hasClass:function(a,b){return-1!==a.className.split(/\s+/).indexOf(b)},addClass:function(a,b){g.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(g.hasClass(a,
b)){var d=a.className.split(/\s+/),h=d.indexOf(b);d.splice(h,1);a.className=d.join(" ")}},replaceClass:function(a,b,d){if(g.hasClass(a,b)){var h=a.className.split(/\s+/);b=h.indexOf(b);h[b]=d;a.className=h.join(" ")}},addListener:function(a,b,d){g.supportsAddEventListener()?a.addEventListener(b,d,!1):a.attachEvent(b,d)},waitForBody:function(a){document.body?a():g.supportsAddEventListener()?document.addEventListener("DOMContentLoaded",function d(){document.removeEventListener("DOMContentLoaded",d);
a()}):document.attachEvent("onreadystatechange",function h(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",h),a()})}};b=a=void 0;a=function(a){this.element=g.createElement("div");this.element.setAttribute("aria-hidden","true");g.append(this.element,g.createText(a));this.collapsible=g.createElement("span");this.expandable=g.createElement("span");this.collapsibleInner=g.createElement("span");this.expandableInner=g.createElement("span");
this.lastOffsetWidth=-1;g.style(this.collapsible,"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;");g.style(this.expandable,"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;");g.style(this.expandableInner,"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;");g.style(this.collapsibleInner,"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;");
g.append(this.collapsible,this.collapsibleInner);g.append(this.expandable,this.expandableInner);g.append(this.element,this.collapsible);g.append(this.element,this.expandable)};a.prototype.getElement=function(){return this.element};a.prototype.setFont=function(a){g.style(this.element,"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-synthesis:none;font:"+a+";")};a.prototype.getWidth=
function(){return this.element.offsetWidth};a.prototype.setWidth=function(a){this.element.style.width=a+"px"};a.prototype.reset=function(){var a=this.getWidth(),b=a+100;this.expandableInner.style.width=b+"px";this.expandable.scrollLeft=b;this.collapsible.scrollLeft=this.collapsible.scrollWidth+100;return this.lastOffsetWidth!==a?(this.lastOffsetWidth=a,!0):!1};a.prototype.onScroll=function(a){this.reset()&&null!==this.element.parentNode&&a(this.lastOffsetWidth)};a.prototype.onResize=function(a){function b(){d.onScroll(a)}
var d=this;g.addListener(this.collapsible,"scroll",b);g.addListener(this.expandable,"scroll",b);this.reset()};b=function(a,b){var d=b||{};this.family=a;this.style=d.style||"normal";this.weight=d.weight||"normal";this.stretch=d.stretch||"normal"};b.HAS_WEBKIT_FALLBACK_BUG=null;b.HAS_SAFARI_10_BUG=null;b.SUPPORTS_STRETCH=null;b.SUPPORTS_NATIVE_FONT_LOADING=null;b.DEFAULT_TIMEOUT=3E3;b.getUserAgent=function(){return window.navigator.userAgent};b.getNavigatorVendor=function(){return window.navigator.vendor};
b.hasWebKitFallbackBug=function(){if(null===b.HAS_WEBKIT_FALLBACK_BUG){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(b.getUserAgent());b.HAS_WEBKIT_FALLBACK_BUG=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return b.HAS_WEBKIT_FALLBACK_BUG};b.hasSafari10Bug=function(){if(null===b.HAS_SAFARI_10_BUG)if(b.supportsNativeFontLoading()&&/Apple/.test(b.getNavigatorVendor())){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(b.getUserAgent());b.HAS_SAFARI_10_BUG=
!!a&&603>parseInt(a[1],10)}else b.HAS_SAFARI_10_BUG=!1;return b.HAS_SAFARI_10_BUG};b.supportsNativeFontLoading=function(){null===b.SUPPORTS_NATIVE_FONT_LOADING&&(b.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts);return b.SUPPORTS_NATIVE_FONT_LOADING};b.supportStretch=function(){if(null===b.SUPPORTS_STRETCH){var a=g.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(e){}b.SUPPORTS_STRETCH=""!==a.style.font}return b.SUPPORTS_STRETCH};b.prototype.getStyle=function(a){return[this.style,
this.weight,b.supportStretch()?this.stretch:"","100px",a].join(" ")};b.prototype.getTime=function(){return(new Date).getTime()};b.prototype.load=function(c,e){var d=this,h=c||"BESbswy",f=0,j=e||b.DEFAULT_TIMEOUT,k=d.getTime();return new Promise(function(c,e){if(b.supportsNativeFontLoading()&&!b.hasSafari10Bug()){var m=new Promise(function(a,b){var c=function(){d.getTime()-k>=j?b():document.fonts.load(d.getStyle('"'+d.family+'"'),h).then(function(b){1<=b.length?a():setTimeout(c,25)},function(){b()})};
c()}),n=new Promise(function(a,b){f=setTimeout(b,j)});Promise.race([n,m]).then(function(){clearTimeout(f);c(d)},function(){e(d)})}else g.waitForBody(function(){function m(){null!==O.parentNode&&g.remove(O.parentNode,O)}function n(){!(-1!=D&&-1!=y||-1!=D&&-1!=B||-1!=y&&-1!=B)||D!=y&&D!=B&&y!=B||b.hasWebKitFallbackBug()&&(D==I&&y==I&&B==I||D==S&&y==S&&B==S||D==J&&y==J&&B==J)||(m(),clearTimeout(f),c(d))}function v(){if(d.getTime()-k>=j)m(),e(d);else{var a=document.hidden;if(!0===a||void 0===a)D=A.getWidth(),
y=w.getWidth(),B=z.getWidth(),n();f=setTimeout(v,50)}}var A=new a(h),w=new a(h),z=new a(h),D=-1,y=-1,B=-1,I=-1,S=-1,J=-1,O=g.createElement("div");O.dir="ltr";A.setFont(d.getStyle("sans-serif"));w.setFont(d.getStyle("serif"));z.setFont(d.getStyle("monospace"));g.append(O,A.getElement());g.append(O,w.getElement());g.append(O,z.getElement());g.append(document.body,O);I=A.getWidth();S=w.getWidth();J=z.getWidth();v();A.onResize(function(a){D=a;n()});A.setFont(d.getStyle('"'+d.family+'",sans-serif'));w.onResize(function(a){y=
a;n()});w.setFont(d.getStyle('"'+d.family+'",serif'));z.onResize(function(a){B=a;n()});z.setFont(d.getStyle('"'+d.family+'",monospace'))})})};"undefined"!==typeof module?module.exports=b:(window.FontFaceObserver=b,window.FontFaceObserver.prototype.load=b.prototype.load)})();define("fontFaceObserver",function(){});(function(){toggleMap.enableFidelityFont&&(console.info("Font loading Started"),console.info("Web fonts loaded."),document.documentElement.classList.add("webfont-loaded"))})();
define("fontLoader",["fontFaceObserver"],function(){});
(function(a){var b=-1,g=-1,c=function(a){return parseFloat(a)||0},e=function(b){var c={byRow:!0,property:"height",target:null,remove:!1};if("object"===typeof b)return a.extend(c,b);"boolean"===typeof b?c.byRow=b:"remove"===b&&(c.remove=!0);return c},d=a.fn.matchHeight=function(b){b=e(b);if(b.remove){var c=this;this.css(b.property,"");a.each(d._groups,function(a,b){b.elements=b.elements.not(c)});return this}if(1>=this.length&&!b.target)return this;d._groups.push({elements:this,options:b});d._apply(this,
b);return this};d._groups=[];d._throttle=80;d._maintainScroll=!1;d._beforeUpdate=null;d._afterUpdate=null;d._apply=function(b,g){var h=e(g),l=a(b),p=[l],m=a(window).scrollTop(),n=a("html").outerHeight(!0),r=l.parents().filter(":hidden");r.each(function(){var b=a(this);b.data("style-cache",b.attr("style"))});r.css("display","block");if(h.byRow&&!h.target){l.each(function(){var b=a(this),c=b.css("display");"inline-block"!==c&&"inline-flex"!==c&&(c="block");b.data("style-cache",b.attr("style"));b.css({display:c,
"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})});var s=null,v=[];a(l).each(function(){var b=a(this),d=b.offset().top-c(b.css("margin-top")),e=0<v.length?v[v.length-1]:null;null===e?v.push(b):1>=Math.floor(Math.abs(s-d))?v[v.length-1]=e.add(b):v.push(b);s=d});p=v;l.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||"")})}a.each(p,function(b,d){var e=a(d),f=0;if(h.target)f=h.target.outerHeight(!1);
else{if(h.byRow&&1>=e.length){e.css(h.property,"");return}e.each(function(){var b=a(this),c=b.css("display");"inline-block"!==c&&"inline-flex"!==c&&(c="block");c={display:c};c[h.property]="";b.css(c);b.outerHeight(!1)>f&&(f=b.outerHeight(!1));b.css("display","")})}e.each(function(){var b=a(this),d=0;h.target&&b.is(h.target)||("border-box"!==b.css("box-sizing")&&(d+=c(b.css("border-top-width"))+c(b.css("border-bottom-width")),d+=c(b.css("padding-top"))+c(b.css("padding-bottom"))),b.css(h.property,
f-d+"px"))})});r.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||null)});d._maintainScroll&&a(window).scrollTop(m/n*a("html").outerHeight(!0));return this};d._applyDataApi=function(){var b={};a("[data-match-height], [data-mh]").each(function(){var c=a(this),d=c.attr("data-mh")||c.attr("data-match-height");b[d]=d in b?b[d].add(c):c});a.each(b,function(){this.matchHeight(!0)})};var h=function(b){d._beforeUpdate&&d._beforeUpdate(b,d._groups);a.each(d._groups,function(){d._apply(this.elements,
this.options)});d._afterUpdate&&d._afterUpdate(b,d._groups)};d._update=function(c,e){if(e&&"resize"===e.type){var k=a(window).width();if(k===b)return;b=k}c?-1===g&&(g=setTimeout(function(){h(e);g=-1},d._throttle)):h(e)};a(d._applyDataApi);a(window).bind("load",function(a){d._update(!1,a)});a(window).bind("resize orientationchange",function(a){d._update(!0,a)})})(jQuery);define("jqueryMatchHeight",["jquery"],function(){});
(function(a){"function"===typeof define&&define.amd?define("slick",["jquery"],a):"undefined"!==typeof exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){var b=window.Slick||{},g=0,b=function(b,e){var d;this.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',
autoplay:!1,autoplaySpeed:3E3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:0.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,
slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!1,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1E3};this.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,
touchObject:{},transformsEnabled:!1,unslicked:!1};a.extend(this,this.initials);this.animProp=this.animType=this.activeBreakpoint=null;this.breakpoints=[];this.breakpointSettings=[];this.cssTransitions=!1;this.hidden="hidden";this.paused=!1;this.respondTo=this.positionProp=null;this.rowCount=1;this.shouldClick=!0;this.$slider=a(b);this.transitionType=this.transformType=this.$slidesCache=null;this.visibilityChange="visibilitychange";this.windowWidth=0;this.windowTimer=null;d=a(b).data("slick")||{};
this.options=a.extend({},this.defaults,d,e);this.currentSlide=this.options.initialSlide;this.originalSettings=this.options;"undefined"!==typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange");this.autoPlay=a.proxy(this.autoPlay,this);this.autoPlayClear=a.proxy(this.autoPlayClear,this);this.changeSlide=a.proxy(this.changeSlide,this);this.clickHandler=
a.proxy(this.clickHandler,this);this.selectHandler=a.proxy(this.selectHandler,this);this.setPosition=a.proxy(this.setPosition,this);this.swipeHandler=a.proxy(this.swipeHandler,this);this.dragHandler=a.proxy(this.dragHandler,this);this.keyHandler=a.proxy(this.keyHandler,this);this.autoPlayIterator=a.proxy(this.autoPlayIterator,this);this.instanceUid=g++;this.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;this.registerBreakpoints();this.init(!0);this.checkResponsive(!0)};b.prototype.addSlide=b.prototype.slickAdd=
function(b,e,d){if("boolean"===typeof e)d=e,e=null;else if(0>e||e>=this.slideCount)return!1;this.unload();"number"===typeof e?0===e&&0===this.$slides.length?a(b).appendTo(this.$slideTrack):d?a(b).insertBefore(this.$slides.eq(e)):a(b).insertAfter(this.$slides.eq(e)):!0===d?a(b).prependTo(this.$slideTrack):a(b).appendTo(this.$slideTrack);this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slides.each(function(b,
c){a(c).attr("data-slick-index",b)});this.$slidesCache=this.$slides;this.reinit()};b.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var a=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:a},this.options.speed)}};b.prototype.animateSlide=function(b,e){var d={},g=this;g.animateHeight();!0===g.options.rtl&&!1===g.options.vertical&&(b=-b);!1===g.transformsEnabled?!1===g.options.vertical?g.$slideTrack.animate({left:b},
g.options.speed,g.options.easing,e):g.$slideTrack.animate({top:b},g.options.speed,g.options.easing,e):!1===g.cssTransitions?(!0===g.options.rtl&&(g.currentLeft=-g.currentLeft),a({animStart:g.currentLeft}).animate({animStart:b},{duration:g.options.speed,easing:g.options.easing,step:function(a){a=Math.ceil(a);d[g.animType]=!1===g.options.vertical?"translate("+a+"px, 0px)":"translate(0px,"+a+"px)";g.$slideTrack.css(d)},complete:function(){e&&e.call()}})):(g.applyTransition(),b=Math.ceil(b),d[g.animType]=
!1===g.options.vertical?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",g.$slideTrack.css(d),e&&setTimeout(function(){g.disableTransition();e.call()},g.options.speed))};b.prototype.asNavFor=function(b){var e=this.options.asNavFor;e&&null!==e&&(e=a(e).not(this.$slider));null!==e&&"object"===typeof e&&e.each(function(){var d=a(this).slick("getSlick");d.unslicked||d.slideHandler(b,!0)})};b.prototype.applyTransition=function(a){var b={};b[this.transitionType]=!1===this.options.fade?this.transformType+
" "+this.options.speed+"ms "+this.options.cssEase:"opacity "+this.options.speed+"ms "+this.options.cssEase;!1===this.options.fade?this.$slideTrack.css(b):this.$slides.eq(a).css(b)};b.prototype.autoPlay=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer);this.slideCount>this.options.slidesToShow&&!0!==this.paused&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))};b.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)};
b.prototype.autoPlayIterator=function(){!1===this.options.infinite?1===this.direction?(this.currentSlide+1===this.slideCount-1&&(this.direction=0),this.slideHandler(this.currentSlide+this.options.slidesToScroll)):(0===this.currentSlide-1&&(this.direction=1),this.slideHandler(this.currentSlide-this.options.slidesToScroll)):this.slideHandler(this.currentSlide+this.options.slidesToScroll)};b.prototype.buildArrows=function(){!0===this.options.arrows&&(this.$prevArrow=a(this.options.prevArrow).addClass("slick-arrow"),
this.$nextArrow=a(this.options.nextArrow).addClass("slick-arrow"),this.slideCount>this.options.slidesToShow?(this.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.prependTo(this.options.appendArrows),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.appendTo(this.options.appendArrows),!0!==this.options.infinite&&this.$prevArrow.addClass("slick-disabled").attr("aria-disabled",
"true")):this.$prevArrow.add(this.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))};b.prototype.buildDots=function(){var b,e;if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow){e='<ul class="'+this.options.dotsClass+'">';for(b=0;b<=this.getDotCount();b+=1)e+="<li>"+this.options.customPaging.call(this,this,b)+"</li>";this.$dots=a(e+"</ul>").appendTo(this.options.appendDots);this.$dots.find("li").first().addClass("slick-active").attr("aria-hidden",
"false")}};b.prototype.buildOut=function(){this.$slides=this.$slider.children(this.options.slide+":not(.slick-cloned)").addClass("slick-slide");this.slideCount=this.$slides.length;this.$slides.each(function(b,e){a(e).attr("data-slick-index",b).data("originalStyling",a(e).attr("style")||"")});this.$slidesCache=this.$slides;this.$slider.addClass("slick-slider");this.$slideTrack=0===this.slideCount?a('<div class="slick-track"/>').appendTo(this.$slider):this.$slides.wrapAll('<div class="slick-track"/>').parent();
this.$list=this.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();this.$slideTrack.css("opacity",0);if(!0===this.options.centerMode||!0===this.options.swipeToSlide)this.options.slidesToScroll=1;a("img[data-lazy]",this.$slider).not("[src]").addClass("slick-loading");this.setupInfinite();this.buildArrows();this.buildDots();this.updateDots();this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);!0===this.options.draggable&&this.$list.addClass("draggable")};
b.prototype.buildRows=function(){var a,b,d,g,f,j,k;g=document.createDocumentFragment();j=this.$slider.children();if(1<this.options.rows){k=this.options.slidesPerRow*this.options.rows;f=Math.ceil(j.length/k);for(a=0;a<f;a++){var l=document.createElement("div");for(b=0;b<this.options.rows;b++){var p=document.createElement("div");for(d=0;d<this.options.slidesPerRow;d++){var m=a*k+(b*this.options.slidesPerRow+d);j.get(m)&&p.appendChild(j.get(m))}l.appendChild(p)}g.appendChild(l)}this.$slider.html(g);
this.$slider.children().children().children().css({width:100/this.options.slidesPerRow+"%",display:"inline-block"})}};b.prototype.checkResponsive=function(b,e){var d,g,f,j=!1;g=this.$slider.width();var k=window.innerWidth||a(window).width();"window"===this.respondTo?f=k:"slider"===this.respondTo?f=g:"min"===this.respondTo&&(f=Math.min(k,g));if(this.options.responsive&&this.options.responsive.length&&null!==this.options.responsive){g=null;for(d in this.breakpoints)this.breakpoints.hasOwnProperty(d)&&
(!1===this.originalSettings.mobileFirst?f<this.breakpoints[d]&&(g=this.breakpoints[d]):f>this.breakpoints[d]&&(g=this.breakpoints[d]));if(null!==g)if(null!==this.activeBreakpoint){if(g!==this.activeBreakpoint||e)this.activeBreakpoint=g,"unslick"===this.breakpointSettings[g]?this.unslick(g):(this.options=a.extend({},this.originalSettings,this.breakpointSettings[g]),!0===b&&(this.currentSlide=this.options.initialSlide),this.refresh(b)),j=g}else this.activeBreakpoint=g,"unslick"===this.breakpointSettings[g]?
this.unslick(g):(this.options=a.extend({},this.originalSettings,this.breakpointSettings[g]),!0===b&&(this.currentSlide=this.options.initialSlide),this.refresh(b)),j=g;else null!==this.activeBreakpoint&&(this.activeBreakpoint=null,this.options=this.originalSettings,!0===b&&(this.currentSlide=this.options.initialSlide),this.refresh(b),j=g);!b&&!1!==j&&this.$slider.trigger("breakpoint",[this,j])}};b.prototype.changeSlide=function(b,e){var d=a(b.target),g;d.is("a")&&b.preventDefault();d.is("li")||(d=
d.closest("li"));g=0!==this.slideCount%this.options.slidesToScroll?0:(this.slideCount-this.currentSlide)%this.options.slidesToScroll;switch(b.data.message){case "previous":d=0===g?this.options.slidesToScroll:this.options.slidesToShow-g;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide-d,!1,e);break;case "next":d=0===g?this.options.slidesToScroll:g;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide+d,!1,e);break;case "index":g=0===b.data.index?
0:b.data.index||d.index()*this.options.slidesToScroll,this.slideHandler(this.checkNavigable(g),!1,e),d.children().trigger("focus")}};b.prototype.checkNavigable=function(a){var b,d;b=this.getNavigableIndexes();d=0;if(a>b[b.length-1])a=b[b.length-1];else for(var g in b){if(a<b[g]){a=d;break}d=b[g]}return a};b.prototype.cleanUpEvents=function(){this.options.dots&&null!==this.$dots&&(a("li",this.$dots).off("click.slick",this.changeSlide),!0===this.options.pauseOnDotsHover&&!0===this.options.autoplay&&
a("li",this.$dots).off("mouseenter.slick",a.proxy(this.setPaused,this,!0)).off("mouseleave.slick",a.proxy(this.setPaused,this,!1)));!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow&&this.$prevArrow.off("click.slick",this.changeSlide),this.$nextArrow&&this.$nextArrow.off("click.slick",this.changeSlide));this.$list.off("touchstart.slick mousedown.slick",this.swipeHandler);this.$list.off("touchmove.slick mousemove.slick",this.swipeHandler);this.$list.off("touchend.slick mouseup.slick",
this.swipeHandler);this.$list.off("touchcancel.slick mouseleave.slick",this.swipeHandler);this.$list.off("click.slick",this.clickHandler);a(document).off(this.visibilityChange,this.visibility);this.$list.off("mouseenter.slick",a.proxy(this.setPaused,this,!0));this.$list.off("mouseleave.slick",a.proxy(this.setPaused,this,!1));!0===this.options.accessibility&&this.$list.off("keydown.slick",this.keyHandler);!0===this.options.focusOnSelect&&a(this.$slideTrack).children().off("click.slick",this.selectHandler);
a(window).off("orientationchange.slick.slick-"+this.instanceUid,this.orientationChange);a(window).off("resize.slick.slick-"+this.instanceUid,this.resize);a("[draggable!=true]",this.$slideTrack).off("dragstart",this.preventDefault);a(window).off("load.slick.slick-"+this.instanceUid,this.setPosition);a(document).off("ready.slick.slick-"+this.instanceUid,this.setPosition)};b.prototype.cleanUpRows=function(){var a;1<this.options.rows&&(a=this.$slides.children().children(),a.removeAttr("style"),this.$slider.html(a))};
b.prototype.clickHandler=function(a){!1===this.shouldClick&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())};b.prototype.destroy=function(b){this.autoPlayClear();this.touchObject={};this.cleanUpEvents();a(".slick-cloned",this.$slider).detach();this.$dots&&this.$dots.remove();this.$prevArrow&&this.$prevArrow.length&&(this.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.prevArrow)&&
this.$prevArrow.remove());this.$nextArrow&&this.$nextArrow.length&&(this.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove());this.$slides&&(this.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),
this.$slideTrack.children(this.options.slide).detach(),this.$slideTrack.detach(),this.$list.detach(),this.$slider.append(this.$slides));this.cleanUpRows();this.$slider.removeClass("slick-slider");this.$slider.removeClass("slick-initialized");this.unslicked=!0;b||this.$slider.trigger("destroy",[this])};b.prototype.disableTransition=function(a){var b={};b[this.transitionType]="";!1===this.options.fade?this.$slideTrack.css(b):this.$slides.eq(a).css(b)};b.prototype.fadeSlide=function(a,b){var d=this;
!1===d.cssTransitions?(d.$slides.eq(a).css({zIndex:d.options.zIndex}),d.$slides.eq(a).animate({opacity:1},d.options.speed,d.options.easing,b)):(d.applyTransition(a),d.$slides.eq(a).css({opacity:1,zIndex:d.options.zIndex}),b&&setTimeout(function(){d.disableTransition(a);b.call()},d.options.speed))};b.prototype.fadeSlideOut=function(a){!1===this.cssTransitions?this.$slides.eq(a).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(a),this.$slides.eq(a).css({opacity:0,
zIndex:this.options.zIndex-2}))};b.prototype.filterSlides=b.prototype.slickFilter=function(a){null!==a&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(a).appendTo(this.$slideTrack),this.reinit())};b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){return this.currentSlide};b.prototype.getDotCount=function(){var a=0,b=0,d=0,g=this.options.slidesToShow;if(!0===this.options.infinite)for(!0===this.options.showAllDots&&(g=1);a<this.slideCount;)++d,
a=b+g,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;else if(!0===this.options.centerMode)d=this.slideCount;else for(;a<this.slideCount;)++d,a=b+this.options.slidesToShow,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return d-1};b.prototype.getLeft=function(a){var b,d=0;this.slideOffset=0;b=this.$slides.first().outerHeight(!0);!0===this.options.infinite?(this.slideCount>
this.options.slidesToShow&&(this.slideOffset=-1*this.slideWidth*this.options.slidesToShow,d=-1*b*this.options.slidesToShow),0!==this.slideCount%this.options.slidesToScroll&&(a+this.options.slidesToScroll>this.slideCount&&this.slideCount>this.options.slidesToShow)&&(a>this.slideCount?(this.slideOffset=-1*(this.options.slidesToShow-(a-this.slideCount))*this.slideWidth,d=-1*(this.options.slidesToShow-(a-this.slideCount))*b):(this.slideOffset=-1*this.slideCount%this.options.slidesToScroll*this.slideWidth,
d=-1*this.slideCount%this.options.slidesToScroll*b))):a+this.options.slidesToShow>this.slideCount&&(this.slideOffset=(a+this.options.slidesToShow-this.slideCount)*this.slideWidth,d=(a+this.options.slidesToShow-this.slideCount)*b);this.slideCount<=this.options.slidesToShow&&(d=this.slideOffset=0);!0===this.options.centerMode&&!0===this.options.infinite?this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2)-this.slideWidth:!0===this.options.centerMode&&(this.slideOffset=0,this.slideOffset+=
this.slideWidth*Math.floor(this.options.slidesToShow/2));b=!1===this.options.vertical?-1*a*this.slideWidth+this.slideOffset:-1*a*b+d;!0===this.options.variableWidth&&(d=this.slideCount<=this.options.slidesToShow||!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(a):this.$slideTrack.children(".slick-slide").eq(a+this.options.slidesToShow),b=d[0]?-1*d[0].offsetLeft:0,!0===this.options.centerMode&&(d=!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(a):this.$slideTrack.children(".slick-slide").eq(a+
this.options.slidesToShow+1),b=d[0]?-1*d[0].offsetLeft:0,b+=(this.$list.width()-d.outerWidth())/2));return b};b.prototype.getOption=b.prototype.slickGetOption=function(a){return this.options[a]};b.prototype.getNavigableIndexes=function(){var a=0,b=0,d=[],g;!1===this.options.infinite?g=this.slideCount:(a=-1*this.options.slidesToScroll,b=-1*this.options.slidesToScroll,g=2*this.slideCount);for(;a<g;)d.push(a),a=b+this.options.slidesToScroll,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:
this.options.slidesToShow;return d};b.prototype.getSlick=function(){return this};b.prototype.getSlideCount=function(){var b=this,e,d,g;g=!0===b.options.centerMode?b.slideWidth*Math.floor(b.options.slidesToShow/2):0;return!0===b.options.swipeToSlide?(b.$slideTrack.find(".slick-slide").each(function(e,j){if(j.offsetLeft-g+a(j).outerWidth()/2>-1*b.swipeLeft)return d=j,!1}),e=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll};b.prototype.goTo=b.prototype.slickGoTo=function(a,
b){this.changeSlide({data:{message:"index",index:parseInt(a)}},b)};b.prototype.init=function(b){a(this.$slider).hasClass("slick-initialized")||(a(this.$slider).addClass("slick-initialized"),this.buildRows(),this.buildOut(),this.setProps(),this.startLoad(),this.loadSlider(),this.initializeEvents(),this.updateArrows(),this.updateDots());b&&this.$slider.trigger("init",[this]);!0===this.options.accessibility&&this.initADA()};b.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>
this.options.slidesToShow&&(this.$prevArrow.on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.on("click.slick",{message:"next"},this.changeSlide))};b.prototype.initDotEvents=function(){if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow)a("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide);if(!0===this.options.dots&&!0===this.options.pauseOnDotsHover&&!0===this.options.autoplay)a("li",this.$dots).on("mouseenter.slick",a.proxy(this.setPaused,
this,!0)).on("mouseleave.slick",a.proxy(this.setPaused,this,!1))};b.prototype.initializeEvents=function(){this.initArrowEvents();this.initDotEvents();this.$list.on("touchstart.slick mousedown.slick",{action:"start"},this.swipeHandler);this.$list.on("touchmove.slick mousemove.slick",{action:"move"},this.swipeHandler);this.$list.on("touchend.slick mouseup.slick",{action:"end"},this.swipeHandler);this.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},this.swipeHandler);this.$list.on("click.slick",
this.clickHandler);a(document).on(this.visibilityChange,a.proxy(this.visibility,this));this.$list.on("mouseenter.slick",a.proxy(this.setPaused,this,!0));this.$list.on("mouseleave.slick",a.proxy(this.setPaused,this,!1));if(!0===this.options.accessibility)this.$list.on("keydown.slick",this.keyHandler);if(!0===this.options.focusOnSelect)a(this.$slideTrack).children().on("click.slick",this.selectHandler);a(window).on("orientationchange.slick.slick-"+this.instanceUid,a.proxy(this.orientationChange,this));
a(window).on("resize.slick.slick-"+this.instanceUid,a.proxy(this.resize,this));a("[draggable!=true]",this.$slideTrack).on("dragstart",this.preventDefault);a(window).on("load.slick.slick-"+this.instanceUid,this.setPosition);a(document).on("ready.slick.slick-"+this.instanceUid,this.setPosition)};b.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&
this.$dots.show();!0===this.options.autoplay&&this.autoPlay()};b.prototype.keyHandler=function(a){a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:"previous"}}):39===a.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:"next"}}))};b.prototype.lazyLoad=function(){function b(c){a("img[data-lazy]",c).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=
function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")})})};d.src=c})}var e,d;!0===this.options.centerMode?!0===this.options.infinite?(e=this.currentSlide+(this.options.slidesToShow/2+1),d=e+this.options.slidesToShow+2):(e=Math.max(0,this.currentSlide-(this.options.slidesToShow/2+1)),d=2+(this.options.slidesToShow/2+1)+this.currentSlide):(e=this.options.infinite?this.options.slidesToShow+this.currentSlide:
this.currentSlide,d=e+this.options.slidesToShow,!0===this.options.fade&&(0<e&&e--,d<=this.slideCount&&d++));e=this.$slider.find(".slick-slide").slice(e,d);b(e);this.slideCount<=this.options.slidesToShow?(e=this.$slider.find(".slick-slide"),b(e)):this.currentSlide>=this.slideCount-this.options.slidesToShow?(e=this.$slider.find(".slick-cloned").slice(0,this.options.slidesToShow),b(e)):0===this.currentSlide&&(e=this.$slider.find(".slick-cloned").slice(-1*this.options.slidesToShow),b(e))};b.prototype.loadSlider=
function(){this.setPosition();this.$slideTrack.css({opacity:1});this.$slider.removeClass("slick-loading");this.initUI();"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()};b.prototype.next=b.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})};b.prototype.orientationChange=function(){this.checkResponsive();this.setPosition()};b.prototype.pause=b.prototype.slickPause=function(){this.autoPlayClear();this.paused=!0};b.prototype.play=b.prototype.slickPlay=function(){this.paused=
!1;this.autoPlay()};b.prototype.postSlide=function(a){this.$slider.trigger("afterChange",[this,a]);this.animating=!1;this.setPosition();this.swipeLeft=null;!0===this.options.autoplay&&!1===this.paused&&this.autoPlay();!0===this.options.accessibility&&this.initADA()};b.prototype.prev=b.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})};b.prototype.preventDefault=function(a){a.preventDefault()};b.prototype.progressiveLazyLoad=function(){var b=this,e;0<a("img[data-lazy]",b.$slider).length&&
(e=a("img[data-lazy]",b.$slider).first(),e.attr("src",null),e.attr("src",e.attr("data-lazy")).removeClass("slick-loading").load(function(){e.removeAttr("data-lazy");b.progressiveLazyLoad();!0===b.options.adaptiveHeight&&b.setPosition()}).error(function(){e.removeAttr("data-lazy");b.progressiveLazyLoad()}))};b.prototype.refresh=function(b){var e;e=this.slideCount-this.options.slidesToShow;this.options.infinite||(this.slideCount<=this.options.slidesToShow?this.currentSlide=0:this.currentSlide>e&&(this.currentSlide=
e));e=this.currentSlide;this.destroy(!0);a.extend(this,this.initials,{currentSlide:e});this.init();b||this.changeSlide({data:{message:"index",index:e}},!1)};b.prototype.registerBreakpoints=function(){var b=this,e,d,g,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(e in f)if(g=b.breakpoints.length-1,d=f[e].breakpoint,f.hasOwnProperty(e)){for(;0<=g;)b.breakpoints[g]&&b.breakpoints[g]===d&&b.breakpoints.splice(g,1),g--;b.breakpoints.push(d);
b.breakpointSettings[d]=f[e].settings}b.breakpoints.sort(function(a,d){return b.options.mobileFirst?a-d:d-a})}};b.prototype.reinit=function(){this.$slides=this.$slideTrack.children(this.options.slide).addClass("slick-slide");this.slideCount=this.$slides.length;this.currentSlide>=this.slideCount&&0!==this.currentSlide&&(this.currentSlide-=this.options.slidesToScroll);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);this.registerBreakpoints();this.setProps();this.setupInfinite();this.buildArrows();
this.updateArrows();this.initArrowEvents();this.buildDots();this.updateDots();this.initDotEvents();this.checkResponsive(!1,!0);if(!0===this.options.focusOnSelect)a(this.$slideTrack).children().on("click.slick",this.selectHandler);this.setSlideClasses(0);this.setPosition();this.$slider.trigger("reInit",[this]);!0===this.options.autoplay&&this.focusHandler()};b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=
a(window).width();b.checkResponsive();b.unslicked||b.setPosition()},50))};b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,d){a="boolean"===typeof a?!0===a?0:this.slideCount-1:!0===b?--a:a;if(1>this.slideCount||0>a||a>this.slideCount-1)return!1;this.unload();!0===d?this.$slideTrack.children().remove():this.$slideTrack.children(this.options.slide).eq(a).remove();this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);
this.$slidesCache=this.$slides;this.reinit()};b.prototype.setCSS=function(a){var b={},d,g;!0===this.options.rtl&&(a=-a);d="left"==this.positionProp?Math.ceil(a)+"px":"0px";g="top"==this.positionProp?Math.ceil(a)+"px":"0px";b[this.positionProp]=a;!1!==this.transformsEnabled&&(b={},b[this.animType]=!1===this.cssTransitions?"translate("+d+", "+g+")":"translate3d("+d+", "+g+", 0px)");this.$slideTrack.css(b)};b.prototype.setDimensions=function(){!1===this.options.vertical?!0===this.options.centerMode&&
this.$list.css({padding:"0px "+this.options.centerPadding}):(this.$list.height(this.$slides.first().outerHeight(!0)*this.options.slidesToShow),!0===this.options.centerMode&&this.$list.css({padding:this.options.centerPadding+" 0px"}));this.listWidth=this.$list.width();this.listHeight=this.$list.height();!1===this.options.vertical&&!1===this.options.variableWidth?(this.slideWidth=Math.ceil(this.listWidth/this.options.slidesToShow),this.$slideTrack.width(Math.ceil(this.slideWidth*this.$slideTrack.children(".slick-slide").length))):
!0===this.options.variableWidth?this.$slideTrack.width(5E3*this.slideCount):(this.slideWidth=Math.ceil(this.listWidth),this.$slideTrack.height(Math.ceil(this.$slides.first().outerHeight(!0)*this.$slideTrack.children(".slick-slide").length)));var a=this.$slides.first().outerWidth(!0)-this.$slides.first().width();!1===this.options.variableWidth&&this.$slideTrack.children(".slick-slide").width(this.slideWidth-a)};b.prototype.setFade=function(){var b=this,e;b.$slides.each(function(d,g){e=-1*b.slideWidth*
d;!0===b.options.rtl?a(g).css({position:"relative",right:e,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(g).css({position:"relative",left:e,top:0,zIndex:b.options.zIndex-2,opacity:0})});b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})};b.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var a=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",a)}};b.prototype.setOption=b.prototype.slickSetOption=
function(b,e,d){var g;if("responsive"===b&&"array"===a.type(e))for(g in e)if("array"!==a.type(this.options.responsive))this.options.responsive=[e[g]];else{for(b=this.options.responsive.length-1;0<=b;)this.options.responsive[b].breakpoint===e[g].breakpoint&&this.options.responsive.splice(b,1),b--;this.options.responsive.push(e[g])}else this.options[b]=e;!0===d&&(this.unload(),this.reinit())};b.prototype.setPosition=function(){this.setDimensions();this.setHeight();!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):
this.setFade();this.$slider.trigger("setPosition",[this])};b.prototype.setProps=function(){var a=document.body.style;this.positionProp=!0===this.options.vertical?"top":"left";"top"===this.positionProp?this.$slider.addClass("slick-vertical"):this.$slider.removeClass("slick-vertical");if((void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.msTransition)&&!0===this.options.useCSS)this.cssTransitions=!0;this.options.fade&&("number"===typeof this.options.zIndex?3>this.options.zIndex&&(this.options.zIndex=
3):this.options.zIndex=this.defaults.zIndex);void 0!==a.OTransform&&(this.animType="OTransform",this.transformType="-o-transform",this.transitionType="OTransition",void 0===a.perspectiveProperty&&void 0===a.webkitPerspective&&(this.animType=!1));void 0!==a.MozTransform&&(this.animType="MozTransform",this.transformType="-moz-transform",this.transitionType="MozTransition",void 0===a.perspectiveProperty&&void 0===a.MozPerspective&&(this.animType=!1));void 0!==a.webkitTransform&&(this.animType="webkitTransform",
this.transformType="-webkit-transform",this.transitionType="webkitTransition",void 0===a.perspectiveProperty&&void 0===a.webkitPerspective&&(this.animType=!1));void 0!==a.msTransform&&(this.animType="msTransform",this.transformType="-ms-transform",this.transitionType="msTransition",void 0===a.msTransform&&(this.animType=!1));void 0!==a.transform&&!1!==this.animType&&(this.transformType=this.animType="transform",this.transitionType="transition");this.transformsEnabled=this.options.useTransform&&null!==
this.animType&&!1!==this.animType};b.prototype.setSlideClasses=function(a){var b,d,g;d=this.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");this.$slides.eq(a).addClass("slick-current");!0===this.options.centerMode?(b=Math.floor(this.options.slidesToShow/2),!0===this.options.infinite&&(a>=b&&a<=this.slideCount-1-b?this.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(g=this.options.slidesToShow+a,d.slice(g-
b+1,g+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-this.options.slidesToShow).addClass("slick-center"):a===this.slideCount-1&&d.eq(this.options.slidesToShow).addClass("slick-center")),this.$slides.eq(a).addClass("slick-center")):0<=a&&a<=this.slideCount-this.options.slidesToShow?this.$slides.slice(a,a+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=this.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden",
"false"):(b=this.slideCount%this.options.slidesToShow,g=!0===this.options.infinite?this.options.slidesToShow+a:a,this.options.slidesToShow==this.options.slidesToScroll&&this.slideCount-a<this.options.slidesToShow?d.slice(g-(this.options.slidesToShow-b),g+b).addClass("slick-active").attr("aria-hidden","false"):d.slice(g,g+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"===this.options.lazyLoad&&this.lazyLoad()};b.prototype.setupInfinite=function(){var b,e,
d;!0===this.options.fade&&(this.options.centerMode=!1);if(!0===this.options.infinite&&!1===this.options.fade&&(e=null,this.slideCount>this.options.slidesToShow)){d=!0===this.options.centerMode?this.options.slidesToShow+1:this.options.slidesToShow;for(b=this.slideCount;b>this.slideCount-d;b-=1)e=b-1,a(this.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-this.slideCount).prependTo(this.$slideTrack).addClass("slick-cloned");for(b=0;b<d;b+=1)e=b,a(this.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",
e+this.slideCount).appendTo(this.$slideTrack).addClass("slick-cloned");this.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}};b.prototype.setPaused=function(a){!0===this.options.autoplay&&!0===this.options.pauseOnHover&&((this.paused=a)?this.autoPlayClear():this.autoPlay())};b.prototype.selectHandler=function(b){b=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide");(b=parseInt(b.attr("data-slick-index")))||(b=0);this.slideCount<=this.options.slidesToShow?
(this.setSlideClasses(b),this.asNavFor(b)):this.slideHandler(b)};b.prototype.slideHandler=function(a,b,d){var g,f,j=null,k=this;!(!0===k.animating&&!0===k.options.waitForAnimate)&&(!(!0===k.options.fade&&k.currentSlide===a)&&!(k.slideCount<=k.options.slidesToShow))&&(!1===(b||!1)&&k.asNavFor(a),g=a,j=k.getLeft(g),b=k.getLeft(k.currentSlide),k.currentLeft=null===k.swipeLeft?b:k.swipeLeft,!1===k.options.infinite&&!1===k.options.centerMode&&(0>a||a>k.getDotCount()*k.options.slidesToScroll)?!1===k.options.fade&&
(g=k.currentSlide,!0!==d?k.animateSlide(b,function(){k.postSlide(g)}):k.postSlide(g)):!1===k.options.infinite&&!0===k.options.centerMode&&(0>a||a>k.slideCount-k.options.slidesToScroll)?!1===k.options.fade&&(g=k.currentSlide,!0!==d?k.animateSlide(b,function(){k.postSlide(g)}):k.postSlide(g)):(!0===k.options.autoplay&&clearInterval(k.autoPlayTimer),f=0>g?0!==k.slideCount%k.options.slidesToScroll?k.slideCount-k.slideCount%k.options.slidesToScroll:k.slideCount+g:g>=k.slideCount?0!==k.slideCount%k.options.slidesToScroll?
0:g-k.slideCount:g,k.animating=!0,k.$slider.trigger("beforeChange",[k,k.currentSlide,f]),a=k.currentSlide,k.currentSlide=f,k.setSlideClasses(k.currentSlide),k.updateDots(),k.updateArrows(),!0===k.options.fade?(!0!==d?(k.fadeSlideOut(a),k.fadeSlide(f,function(){k.postSlide(f)})):k.postSlide(f),k.animateHeight()):!0!==d?k.animateSlide(j,function(){k.postSlide(f)}):k.postSlide(f)))};b.prototype.startLoad=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.hide(),
this.$nextArrow.hide());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.hide();this.$slider.addClass("slick-loading")};b.prototype.swipeDirection=function(){var a;a=Math.atan2(this.touchObject.startY-this.touchObject.curY,this.touchObject.startX-this.touchObject.curX);a=Math.round(180*a/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a||360>=a&&315<=a?!1===this.options.rtl?"left":"right":135<=a&&225>=a?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?
35<=a&&135>=a?"left":"right":"vertical"};b.prototype.swipeEnd=function(){var a;this.dragging=!1;this.shouldClick=10<this.touchObject.swipeLength?!1:!0;if(void 0===this.touchObject.curX)return!1;!0===this.touchObject.edgeHit&&this.$slider.trigger("edge",[this,this.swipeDirection()]);if(this.touchObject.swipeLength>=this.touchObject.minSwipe)switch(this.swipeDirection()){case "left":a=this.options.swipeToSlide?this.checkNavigable(this.currentSlide+this.getSlideCount()):this.currentSlide+this.getSlideCount();
this.slideHandler(a);this.currentDirection=0;this.touchObject={};this.$slider.trigger("swipe",[this,"left"]);break;case "right":a=this.options.swipeToSlide?this.checkNavigable(this.currentSlide-this.getSlideCount()):this.currentSlide-this.getSlideCount(),this.slideHandler(a),this.currentDirection=1,this.touchObject={},this.$slider.trigger("swipe",[this,"right"])}else this.touchObject.startX!==this.touchObject.curX&&(this.slideHandler(this.currentSlide),this.touchObject={})};b.prototype.swipeHandler=
function(a){if(!(!1===this.options.swipe||"ontouchend"in document&&!1===this.options.swipe)&&!(!1===this.options.draggable&&-1!==a.type.indexOf("mouse")))switch(this.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,this.touchObject.minSwipe=this.listWidth/this.options.touchThreshold,!0===this.options.verticalSwiping&&(this.touchObject.minSwipe=this.listHeight/this.options.touchThreshold),a.data.action){case "start":this.swipeStart(a);break;
case "move":this.swipeMove(a);break;case "end":this.swipeEnd(a)}};b.prototype.swipeMove=function(a){var b,d,g;d=void 0!==a.originalEvent?a.originalEvent.touches:null;if(!this.dragging||d&&1!==d.length)return!1;b=this.getLeft(this.currentSlide);this.touchObject.curX=void 0!==d?d[0].pageX:a.clientX;this.touchObject.curY=void 0!==d?d[0].pageY:a.clientY;this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-this.touchObject.startX,2)));!0===this.options.verticalSwiping&&(this.touchObject.swipeLength=
Math.round(Math.sqrt(Math.pow(this.touchObject.curY-this.touchObject.startY,2))));d=this.swipeDirection();if("vertical"!==d){void 0!==a.originalEvent&&4<this.touchObject.swipeLength&&a.preventDefault();g=(!1===this.options.rtl?1:-1)*(this.touchObject.curX>this.touchObject.startX?1:-1);!0===this.options.verticalSwiping&&(g=this.touchObject.curY>this.touchObject.startY?1:-1);a=this.touchObject.swipeLength;this.touchObject.edgeHit=!1;if(!1===this.options.infinite&&(0===this.currentSlide&&"right"===d||
this.currentSlide>=this.getDotCount()&&"left"===d))a=this.touchObject.swipeLength*this.options.edgeFriction,this.touchObject.edgeHit=!0;this.swipeLeft=!1===this.options.vertical?b+a*g:b+a*(this.$list.height()/this.listWidth)*g;!0===this.options.verticalSwiping&&(this.swipeLeft=b+a*g);if(!0===this.options.fade||!1===this.options.touchMove)return!1;if(!0===this.animating)return this.swipeLeft=null,!1;this.setCSS(this.swipeLeft)}};b.prototype.swipeStart=function(a){var b;if(1!==this.touchObject.fingerCount||
this.slideCount<=this.options.slidesToShow)return this.touchObject={},!1;void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]);this.touchObject.startX=this.touchObject.curX=void 0!==b?b.pageX:a.clientX;this.touchObject.startY=this.touchObject.curY=void 0!==b?b.pageY:a.clientY;this.dragging=!0};b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),
this.reinit())};b.prototype.unload=function(){a(".slick-cloned",this.$slider).remove();this.$dots&&this.$dots.remove();this.$prevArrow&&this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove();this.$nextArrow&&this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove();this.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")};b.prototype.unslick=function(a){this.$slider.trigger("unslick",[this,a]);this.destroy()};
b.prototype.updateArrows=function(){!0===this.options.arrows&&(this.slideCount>this.options.slidesToShow&&!this.options.infinite)&&(this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===this.currentSlide?(this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):this.currentSlide>=this.slideCount-this.options.slidesToShow&&
!1===this.options.centerMode?(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):this.currentSlide>=this.slideCount-1&&!0===this.options.centerMode&&(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))};b.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden",
"true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))};b.prototype.visibility=function(){document[this.hidden]?(this.paused=!0,this.autoPlayClear()):!0===this.options.autoplay&&(this.paused=!1,this.autoPlay())};b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});b.$slideTrack.attr("role",
"listbox");b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(e){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+e+""})});null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(e){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+e+"",id:"slick-slide"+b.instanceUid+e+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar");
b.activateADA()};b.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};b.prototype.focusHandler=function(){var b=this;b.$slider.on("focus.slick blur.slick","*",function(e){e.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.isPlay&&(d.is(":focus")?(b.autoPlayClear(),b.paused=!0):(b.paused=!1,b.autoPlay()))},0)})};a.fn.slick=function(){var a=arguments[0],e=Array.prototype.slice.call(arguments,
1),d=this.length,g,f;for(g=0;g<d;g++)if("object"==typeof a||"undefined"==typeof a?this[g].slick=new b(this[g],a):f=this[g].slick[a].apply(this[g].slick,e),"undefined"!=typeof f)return f;return this}});
(function(a,b){a.GlobalNav=function(){this.$navbarRegion=b("#layout-region-navbar");this.deboumceTime=50;this.globalNavHeight=this.$navbarRegion.height();this.attachEvents()};a.GlobalNav.prototype.attachEvents=function(){var g=b.proxy(this.onresize,this),g=a.Utils.debounce(g,this.debounceTime);b(window).resize(g)};a.GlobalNav.prototype.onresize=function(){this.globalNavHeight=this.$navbarRegion.height()};a.GlobalNav.prototype.getNavHeight=function(){return this.globalNavHeight}})(window.FID=window.FID||
{},jQuery);
(function(a,b){a.Utils=a.Utils||{};a.Utils.debounce=function(a,b,e){var d=Date.now||function(){return(new Date).getTime()},h,f,j,k,l;return function(){j=this;f=arguments;k=d();var p=function(){var m=d()-k;m<b?h=setTimeout(p,b-m):(h=null,e||(l=a.apply(j,f),j=f=null))},m=e&&!h;h||(h=setTimeout(p,b));m&&(l=a.apply(j,f),j=f=null);return l}};a.Utils.moveDomStructure=function(a,c,e){"TOP"===e?b(c).prepend(b(a)):"SIBLING"===e?b(a).insertAfter(b(c)):b(c).append(b(a))}})(window.FID=window.FID||{},$);
(function(a,b){a.ParsePageUrl=function(){this.init()};a.ParsePageUrl.prototype.init=function(){this.url=window.location.pathname;this.params=window.location.search.substr(1);this.urlParams={};this.getQueryParameters()};a.ParsePageUrl.prototype.getQueryParameters=function(){var a=this;b.each(a.params.split("&"),function(){var b=this.split("=");try{2===b.length&&(a.urlParams[decodeURIComponent(b[0])]=decodeURIComponent(b[1].replace(/\+/g," ")))}catch(e){}});return this.urlParams};a.ParsePageUrl.prototype.getValueByParam=
function(a){return this.hasParamAvail(a)?this.urlParams[a]:""};a.ParsePageUrl.prototype.hasParamAvail=function(a){return this.urlParams[a]?!0:!1};a.ParsePageUrl.prototype.getPathname=function(){return this.url};a.createDisplayPopInObj=function(){a.hiddenDivObj=new a.DisplayPopInType;a.toolTipObj=new a.DisplayPopInType};a.DisplayPopInType=function(a){this.sourceId;this.popInWidth;this.popInHeight;this.RESPONSIVEVIEW=this.DESKTOPVIEW=!1;this.settings=b.extend({},{viewPortArr:[340,441,455,600,745],closeIconClass:"tooltip-bubble--close-button",
leftClass:"tooltip-bubble--left",rightClass:"tooltip-bubble--right",centerClass:"tooltip-bubble--center",upArrowClass:"tooltip-bubble--pointer-up",downArrowClass:"tooltip-bubble--pointer-down",wrapperClass:"tooltip-bubble--wrapper"},a)};a.DisplayPopInType.prototype.changeFocusToPopin=function(a){try{b(a).find("a:first-child").first().focus().css("overflow","auto"),b(a).find("a:first-child:focus").css("overflow","auto")}catch(c){}};a.DisplayPopInType.prototype.changeFocusToPage=function(){try{b("#"+
this.sourceId).focus()}catch(a){}};a.DisplayPopInType.prototype.hidePopIn=function(a){b(a).hide();null!=this.config.$overlay&&this.config.$overlay.hide();this.changeFocusToPage();this.setOverflow(a)};a.DisplayPopInType.prototype.showPopin=function(a){a.show();null!=this.config.$overlay&&this.config.$overlay.show()};a.DisplayPopInType.prototype.lazyResize=function(){var g=b.proxy(this.onresize,this),g=a.Utils.debounce(g,this.config.debounceTime);b(window).resize(g)};a.DisplayPopInType.prototype.onresize=
function(){this.setViewportVariables();this.resizeModal()};a.DisplayPopInType.prototype.resizeModal=function(){var a=this;b("."+this.config.modalClassName+":visible").each(function(){a.config.isPopIn?(a.setPopInPosition(this,a.popInHeight),a.addScroll(this),a.addViewPortClass(this)):a.config.isToolTip&&(a.RESPONSIVEVIEW?(a.config.$overlay.show(),a.setPopInPosition(this),b(this).find("."+a.settings.wrapperClass).removeClass("tooltip-bubble--up-visible").removeClass("tooltip-bubble--down-visible")):
a.DESKTOPVIEW&&(a.config.$overlay.hide(),a.showToolTip(this,a.popInWidth,a.sourceId)));a.setOverflow(this)})};a.DisplayPopInType.prototype.setPopInPosition=function(a,b){this.popInHeight=b;this.setVerticalPosition(a,this.popInHeight);this.setOverflow(a);this.setHorizontalPosition(a)};a.DisplayPopInType.prototype.setOverflow=function(a){(!this.RESPONSIVEVIEW||!b(a).is(":visible"))&&this.DESKTOPVIEW&&b(a).is(":visible")};a.DisplayPopInType.prototype.setHorizontalPosition=function(a){b(a).css("left",
(b(window).width()-b(a).outerWidth(!0))/2+b(window).scrollLeft()+"px")};a.DisplayPopInType.prototype.setVerticalPosition=function(g,c){var e;this.popInHeight=c;b(g).css("top","5%");b(g).css("height",this.popInHeight);b(g).find("."+this.config.modalWrapperBody).css("height","auto");var d=parseInt(b(g).css("top").split("px")[0]),h=b(window).scrollTop(),f=(new a.GlobalNav).getNavHeight(),j=f-h,k=(b(window).height()-b(g).outerHeight(!0))/2;e=k+h;this.DESKTOPVIEW?k<=f&&0<j?e=f+5:0>k&&(e=h+5):0>k&&(this.setPopInHeightInPer(g,
"90%"),e=d+h);b(g).css("top",e+"px")};a.DisplayPopInType.prototype.setPopInWidthInPx=function(a,c){b(a).css("width",c+"px")};a.DisplayPopInType.prototype.setPopInHeightInPer=function(a,c){b(a).css("height",c)};a.DisplayPopInType.prototype.setPopInHeightInPx=function(a,c){("auto"!==c||""!==c)&&b(window).height()>c&&b(a).css("height",c+"px")};a.DisplayPopInType.prototype.closeIconOption=function(a,c){"false"===c&&b(a).find("."+this.settings.closeIconClass).css("display","none")};a.DisplayPopInType.prototype.addScroll=
function(a){if(this.RESPONSIVEVIEW&&"auto"==this.popInHeight){var c=b(a).outerHeight(!0);if(c<b(a).find("."+this.config.modalWrapper).outerHeight(!0)){var e=c,e=b(a).hasClass(this.config.optionalButton)?c-b(a).find("."+this.config.modalWrapperHearder).outerHeight(!0)-90:c-b(a).find("."+this.config.modalWrapperHearder).outerHeight(!0)-52;b(a).find("."+this.config.modalWrapperBody).css("height",e+"px");b(a).addClass(this.config.scrollClassName)}else b(a).removeClass(this.config.scrollClassName)}};a.DisplayPopInType.prototype.setViewportVariables=
function(){b("."+this.config.respVisibleClass).is(":visible")?(this.RESPONSIVEVIEW=!0,this.DESKTOPVIEW=!1):(this.RESPONSIVEVIEW=!1,this.DESKTOPVIEW=!0)};a.DisplayPopInType.prototype.initPopin=function(a,c,e,d,h,f){this.popInWidth=a;this.popInHeight=c;this.closeIcon=e;this.sourceId=h;this.config=f;a=b("."+this.config.modalClassName);this.hidePopIn(a);this.setViewportVariables();this.showPopin(d);this.setPopInWidthInPx(d,this.popInWidth);this.setPopInPosition(d,this.popInHeight);this.setPopInHeightInPx(d,
this.popInHeight);this.closeIconOption(d,this.closeIcon);this.setOverflow(d);this.addScroll(d);this.changeFocusToPopin(d);this.addViewPortClass(d);this.attachPopInEvents(d)};a.DisplayPopInType.prototype.attachPopInEvents=function(a){var c=this;Modernizr.mq("only all")&&this.lazyResize();b(a).find("."+this.config.closeButtonClassName).on("click",function(b){b.preventDefault();c.hidePopIn(a)});a.find("a").last().focusout(function(){try{b(this).parents("."+c.config.modalClassName).find("."+c.config.closeButtonClassName).focus()}catch(a){}})};
a.DisplayPopInType.prototype.addViewPortClass=function(a){b(this.settings.viewPortArr).each(function(c,e){b(a).removeClass("below-"+e)});b(this.settings.viewPortArr).each(function(c,e){if(b(a).outerWidth(!0)<e)return b(a).addClass("below-"+e),!1})};a.DisplayPopInUtil=function(a){this.config=a;this.init()};a.DisplayPopInUtil.prototype.init=function(){this.setPreventDefault();this.addClassByModalType(this.config.modalType,this.config.popInLinkClass)};a.DisplayPopInUtil.prototype.setPreventDefault=function(){this.config.$container.find("a[onclick*=DisplayPopIn]").each(function(){"#"===
b(this).attr("href")&&b(this).attr("href","javascript:void(0);")})};a.DisplayPopInUtil.prototype.addClassByModalType=function(a,c){var e=this;b("."+a).each(function(){var a=b(this).attr("popintcmid").substring(4);e.config.$container.find("a[onclick*="+a+"]").addClass(c)})};a.initDisplayPopIn=function(){var g=(new a.ParsePageUrl).getValueByParam("show");0<g.length&&g&&(g=g.split(","),2==g.length&&DisplayPopIn("tcm:"+g[0],"",g[1],""));g={$container:b("#layout-region-center-well, #layout-region-right-rail")};
a.displayPopInUtil=new a.DisplayPopInUtil(g)};a.DisplayPopInType.prototype.initToolTip=function(a,c,e,d){this.config=d;this.setViewportVariables();d=b("."+this.config.modalClassName);this.hidePopIn(d);this.popInWidth=a;this.sourceId=e;this.RESPONSIVEVIEW?(this.showPopin(c),this.setPopInPosition(c)):this.DESKTOPVIEW&&(c.show(),this.showToolTip(c,this.popInWidth,this.sourceId));this.setOverflow(c);this.changeFocusToPopin(c);this.attachToolTipEvents(c)};a.DisplayPopInType.prototype.inlineOffset=function(a){var c=
b(a[0]).html();b(a[0]).html(b(a[0]).html().replace(/^(\w+)/,"<span>$1</span>"));var e=b(a[0]).children("span"),d=e.offset();d.height=e.outerHeight();d.width=e.outerWidth();b(a[0]).html(c);return d};a.DisplayPopInType.prototype.showToolTip=function(g,c,e){var d=b("#"+e);c=d.offset().top;e=d.offset().left;var h=this.inlineOffset(d).left,f=d.outerWidth(),j=this.inlineOffset(d).width,k=d.outerHeight(),d=this.inlineOffset(d).height,l=b(g).outerWidth(!0),p=b(g).outerHeight(!0),m=(new a.GlobalNav).getNavHeight();
b(g).removeClass(this.settings.leftClass+" "+this.settings.centerClass+" "+this.settings.rightClass);184>=h?(e!=h?b(g).css("left",h+"px"):b(g).css("left",e+"px"),b(g).addClass(this.settings.leftClass)):184<h&&742>h?(e!=h?b(g).css("left",h+j/2-l/2+"px"):b(g).css("left",e+f/2-l/2+"px"),b(g).addClass(this.settings.centerClass)):(e!=h?b(g).css("left",h+j-l+"px"):b(g).css("left",e+f-l+"px"),b(g).addClass(this.settings.rightClass));c-b(window).scrollTop()>p+m?(b(g).find("."+this.settings.wrapperClass).addClass("tooltip-bubble--down-visible").removeClass("tooltip-bubble--up-visible"),
b(g).css("top",c-p-10+"px")):(b(g).find("."+this.settings.wrapperClass).addClass("tooltip-bubble--up-visible").removeClass("tooltip-bubble--down-visible"),b(g).css("top",c+k+15+"px"),e!=h&&b(g).css("top",c+d+15+"px"))};a.DisplayPopInType.prototype.attachToolTipEvents=function(a){var c=this;Modernizr.mq("only all")&&this.lazyResize(a);b(a).find("."+this.config.closeButtonClassName).on("click",function(b){b.preventDefault();c.hidePopIn(a)});b(a).find("a").last().focusout(function(){try{c.changeFocusToPopin(a)}catch(b){}});
b(document).mouseup(function(b){0===a.has(b.target).length&&!a.is(":hidden")&&c.hidePopIn(a)});b(document).keydown(function(b){27===b.keyCode&&!a.is(":hidden")&&c.hidePopIn(a)})};b(document).ready(function(){a.initDisplayPopIn();a.createDisplayPopInObj()})})(window.FID=window.FID||{},jQuery);define("page",["jquery"],function(){});
function linkToTarget(a,b,g,c,e,d,h){a="";""!=g?(a=b+"?"+g,""!=c&&(a=a+"#"+c)):a=""!=c?b+"#"+c:b;"NB"==e&&(a="<c:out value='${goToNBLink}'/>&redirectURL="+encodeURIComponent(a));if("POPUP"==d){b="";switch(h){case "WINDOW_TYPE_AUX_APPLICATION":b=window.open(a,"popupWinInternalLink","width=617,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=yes,toolbar=no,scrollbars=yes");break;case "WINDOW_TYPE_AUX_CONTENT":b=window.open(a,"popupWinInternalLink","width=245,height=420,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes");
break;case "WINDOW_TYPE_AUX_CONTENT_MED":b=window.open(a,"popupWinInternalLink","width=422,height=380,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes");break;case "WINDOW_TYPE_AUX_INFO":b=window.open(a,"popupWinInternalLink","width=640,height=480,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes");break;case "WINDOW_TYPE_FUND_INFO":b=window.open(a,"popupWinInternalLink","width=800,height=480,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes");
break;default:b=window.open(a,"popupWinInternalLink","width=617,height=551,left=80,top=80,location=no,resizable=yes,menubar=no,status=no,toolbar=no,scrollbars=yes")}b.focus()}else"TOP"==d?parent.location.href=a:location.href=a}
function openWinExternalSite(a,b,g,c){if("TLLegalDis"!=a||confirm("You are about to leave the Fidelity web site for a web site that is unaffiliated with Fidelity. Fidelity has not been involved in the preparation of the content supplied at the unaffiliated site and does not guarantee or assume any responsibility for its content. Fidelity is not liable for any direct or indirect technical or system issues or consequences arising out of your access to or use of third party technologies or programs available through this site."))"Y"==c?
(a=window.open(g,"newwindow","height=480,width=784,left=80,top=80,toolbar=yes,menubar=no,scrollbars=yes,resizable=yes,location=no,directories=no,status=no"),a.opener=self,a.focus()):location.href=g}function popWinCustom(a,b,g,c){var e="no";c&&"yes"==c&&(e="yes");window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+e+",left=10,top=10,height="+b+",width="+g+",fullscreen=no").focus()}
function popWinCustomAtPosition(a,b,g,c,e){var d="no",h="10",f="10";c&&"yes"===c&&(d="yes");e&&"yes"===e&&(h=screen.width/2-g/2,f=screen.height/2-b/2);window.open(a,"subWindowCustom","toolbar=no,location=no,scrollbars=yes,status=no,menubar=no,resizable="+d+",left="+h+",top="+f+",height="+b+",width="+g+",fullscreen=no").focus()}
function DisplayToolTip(a,b,g){var c={$overlay:$("layer-tooltip--overlay-background"),modalClassName:"tooltip-bubble",modalWrapper:"tooltip-bubble--wrapper",modalWrapperHearder:"tooltip-wrapper--header",modalWrapperBody:"tooltip-wrapper--body",scrollContainer:"tooltip-bubble--content",isToolTip:!0,isPopIn:!1,closeButtonClassName:"tooltip-bubble--close-button",respVisibleClass:"below-980-visible",debounceTime:50};a=$(".tooltip-bubble[data-tooltip='"+a+"']");0<a.length&&FID.hiddenDivObj.initToolTip(g,
a,b,c)}
function DisplayToolTipFixedPosition(a,b,g){var c={$overlay:$("layer-tooltip--overlay-background"),modalClassName:"tooltip-bubble",modalWrapper:"tooltip-bubble--wrapper",modalWrapperHearder:"tooltip-wrapper--header",modalWrapperBody:"tooltip-wrapper--body",scrollContainer:"tooltip-bubble--content",isToolTip:!0,isPopIn:!1,closeButtonClassName:"tooltip-bubble--close-button",respVisibleClass:"below-980-visible",debounceTime:50};a=$(".tooltip-bubble[data-tooltip='"+a+"']");$("#"+b).closest(".balances--table-container").addClass("balances--tooltip-displayed");0<
a.length&&FID.hiddenDivObj.initToolTip(g,a,b,c)}if("undefined"===typeof console||"undefined"===typeof console.log)console={log:function(){},warn:function(){}};var DEBUG=!1,console_log=function(a){DEBUG&&console.log.apply(console,arguments)},console_warn=function(a){DEBUG&&console.warn.apply(console,arguments)},console_error=function(a){DEBUG&&console.warn.apply(console,arguments)},domain=envMap.PERSONAL_URL_VALUE,secureDomain=envMap.SCS_URL_VALUE;
"undefined"===typeof AT_beta_opt_indicator&&(AT_beta_opt_indicator=null);
define("global",["jquery"],function(a){var b=a("#pnmm .nb-trade-link");0>=b.length&&(b=a('#pnmm a[href*="trade.shtml"]'));var g=a("#dockedEntitlementValue"),c="";g&&(c=g.html());if("true"!=a.trim(c))b.on("click",function(b){b.preventDefault();b={top:a(document).scrollTop()+50};a(document).trigger("QUICK_TRADE",{security:{securityId:"",orderType:"E",accountNumber:"",brkAccountType:""},location:b})});a(document).on("click",function(b){var c=a(b.target);b=a(".balances--table-container");if(!c.parents(".balances--tooltip-container").length&&
(c=a(".balances--tooltip-bubble"))&&0<c.length)for(var g=0;g<c.length;g++)"block"===a(c[g]).css("display")&&(a(c[g]).hide(),b.removeClass("balances--tooltip-displayed"));a(".balances--tooltip-bubble .tooltip-bubble--close-button").on("click",function(){a(".balances--table-container").removeClass("balances--tooltip-displayed")})})});
$.fn.toggles=function(a){a=a||{};var b=$.extend({drag:!0,click:!0,text:{on:"Show",off:"Hide"},on:!1,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},a),g="select"==b.type;b.checkbox=$(b.checkbox);b.clicker&&(b.clicker=$(b.clicker));a="margin-left "+b.animate+"ms "+b.transition;var c={"-webkit-transition":a,"-moz-transition":a,transition:a},e={"-webkit-transition":"","-moz-transition":"",transition:""},d=function(a,d,j){var k=a.toggleClass("active").hasClass("active"),
l=a.find(".toggle-inner").css(c);a.find(".toggle-off").toggleClass("active");a.find(".toggle-on").toggleClass("active");b.checkbox.prop("checked",k);if(!g){var p=k?0:-d+j;l.css("margin-left",p);setTimeout(function(){l.css(e);l.css("margin-left",p)},b.animate)}};return this.each(function(){var a=$(this),c=a.height(),e=a.width();if(!c||!e)a.height(c=b.height),a.width(e=b.width);var k=$('<div class="toggle-slide">'),l=$('<div class="toggle-inner">'),p=$('<div class="toggle-on">'),m=$('<div class="toggle-off">'),
n=$('<div class="toggle-blob">'),r=c/2,s=e-r;p.css({height:c,width:s,textAlign:"center",textIndent:g?"":-r,lineHeight:c+"px"}).html(b.text.on);m.css({height:c,width:s,marginLeft:g?"":-r,textAlign:"center",textIndent:g?"":r,lineHeight:c+"px"}).html(b.text.off).addClass("active");n.css({height:c,width:c,marginLeft:-r});l.css({width:2*e-c,marginLeft:g?0:-e+c});g&&(k.addClass("toggle-select"),a.css("width",2*s),n.hide());a.html(k.html(l.append(p,n,m)));k.on("toggle",function(b,g){b&&b.stopPropagation();
a.trigger("toggle",!g);d(k,e,c)});b.on&&d(k,e,c);if(b.click&&(!b.clicker||!b.clicker.has(a).length))a.on("click",function(a){(a.target!=n[0]||!b.drag)&&k.trigger("toggle",k.hasClass("active"))});if(b.clicker)b.clicker.on("click",function(a){(a.target!=n[0]||!b.drag)&&k.trigger("toggle",k.hasClass("active"))});if(b.drag&&!g){var v,A=(e-c)/4,w=function(d){a.off("mousemove");k.off("mouseleave");n.off("mouseup");var g=k.hasClass("active");!v&&b.click&&"mouseleave"!==d.type?k.trigger("toggle",g):g?v<-A?
k.trigger("toggle",g):l.animate({marginLeft:0},b.animate/2):v>A?k.trigger("toggle",g):l.animate({marginLeft:-e+c},b.animate/2)},z=-e+c;n.on("mousedown",function(b){v=0;n.off("mouseup");k.off("mouseleave");var c=b.pageX;a.on("mousemove",n,function(a){v=a.pageX-c;k.hasClass("active")?(a=v,0<v&&(a=0),v<z&&(a=z)):(a=v+z,0>v&&(a=z),v>-z&&(a=0));l.css("margin-left",a)});n.on("mouseup",w);k.on("mouseleave",w)})}})};define("toggles",["jquery"],function(){});
(function(a,b,g){function c(a){var b=[],b="HSA IRA IRRL ROTH RTH RTHM ADM BK BUS CH COMP CP EXEC FIDU I IC J JTIC JTIE JTWROS LLC PA PC PR PT SP TIC TIE TODE TODI TODJ TRUA TRUI TRUW UA UF UGMA UTMA".split(" ");return 0<=b.indexOf(a)?!0:!1}var e=b.FID=b.FID||{};e.Applications=e.Applications||{};var d=a,h=!1;a=function(a){function h(a){return null==a.match(/[^a-zA-Z0-9!@#$\u00cb\u2020*\-{}\[\]:\/.\'|,\u00cb\u0153&()%+_\\\s]/ig)}function k(a){a.preventDefault();a=d(this).attr("data-customgroupnumber");
d("#custom-group-"+a).remove()}function l(){var a=d.Event(e.Applications.AccountSelector.events.accountSelectorHidden);J.removeClass(w).addClass(z);X.removeClass(y).addClass(D);0<d(".account-selector--main-wrapper").find(".js-fullview-error-action").length&&1>d(".account-selector--close-control").find(".account-selector--error-icon").length&&d(".account-selector-close-control--link").after('<div class="account-selector--error-icon" title="Action Required"><span class="off-screen">Error: </span></div>');
S.trigger(a)}function p(){0<ta.length&&(d(".routing-number--button-exit").click(),ta.hasClass(B)&&(ta.removeClass(B),q.removeClass(I)))}function m(){var a=d.Event(e.Applications.AccountSelector.events.accountSelectorRevealed);J.removeClass(z).addClass(w);X.removeClass(D).addClass(y);d(".account-selector--close-control").find(".account-selector--error-icon").remove();S.trigger(a)}function n(a){b.matchMedia&&b.matchMedia("(max-width: 848px)").matches&&J.hasClass(w)&&l();0<ta.length&&d(".routing-number--button-exit").click();
V.removeClass("account-selector--target-group");if(S.hasClass("account-selector--normal-mode")){O.removeClass("account-selector--target-tab");d(this).addClass("account-selector--target-tab");if(d(this).hasClass("account-selector--tab-all"))p(),a=d.Event(e.Applications.AccountSelector.events.allAccountsSelected,{elementClicked:a.currentTarget});else{var f=d(".account-selector--target-tab").data("regisition-code"),h=d(".account-selector--target-tab").data("regisition-type");if(0<ta.length&&!ta.hasClass(B)&&
f!==g&&h!==g&&"Mutual Fund"!==h.substr(0,h.indexOf(":"))&&"401(k)"!==h.substr(0,h.indexOf(":"))&&c(f))ta.addClass(B),q.addClass(I);else if(f===g||h===g||"Mutual Fund"===h.substr(0,h.indexOf(":"))||"401(k)"===h.substr(0,h.indexOf(":"))||!c(f))ta.removeClass(B),q.removeClass(I);a=d.Event(e.Applications.AccountSelector.events.singleAccountSelected,{elementClicked:a.currentTarget})}S.trigger(a)}}function r(a){var b=a.currentTarget;clearTimeout(Va);var c=this;Va=setTimeout(function(){s.apply(c,[b]);Va=
null},10)}function s(a){p();d("#balances-component-container").removeClass("balances--individual-mode").addClass("balances--group-mode");d(this).parent().hasClass("account-selector--group-container-inactive")||(b.matchMedia&&b.matchMedia("(max-width: 848px)").matches&&J.hasClass(w)&&l(),O.removeClass("account-selector--target-tab"),N.removeClass("account-selector--target-group"),d(this).parent().addClass("account-selector--target-group"),0<d(this).parent().children(".account-selector--tab").length&&
(a=d.Event(e.Applications.AccountSelector.events.accountGroupSelected,{elementClicked:a}),S.trigger(a)))}function v(a){var b=a.css("top");a.css("top","0").ModalPopup("open");a.css("top",b)}var A=d(".base-modal--form");this._$transitionTarget=d(d(a)[0]);jQuery.validator.addMethod("nicknameInvalid",function(a){return h(a)},"Your nickname contains an invalid character. Please use only numbers and letters.");jQuery.validator.addMethod("groupInvalid",function(a){return h(a)},"Your group name contains an invalid character. Please use only numbers and letters.");
A.validate({onkeyup:!1,showErrors:function(){var a,b,c,d;b=this.successList.length;for(a=0;a<b;a++)c=this.successList[a],d=A.find("#"+c.id+"Error"),d.addClass("hidden");b=this.errorList.length;for(a=0;a<b;a++)c=this.errorList[a],d=A.find("#"+c.element.id+"Error"),d.removeClass("hidden"),d=d.find(".message--title"),d.empty().append(c.message)}});d(".asri-last-refreshed").hide();setTimeout(function(){d(".asri-total").hide().fadeIn();d(".asri-last-refreshed").fadeIn();d(".asri-numbers").hide().fadeIn()},
2E3);d(".error-toggle--checkbox").on("click",function(){var a=d(this);!d(".modal-popup--overlay").is(":visible")&&"checked"===a.attr("checked")&&d("#account-selector--edit-accounts").click();a.is("#error-toggle--toggle-all")&&"checked"===a.attr("checked")&&d(".error-display--single-error-list").find(".error-toggle--checkbox").each(function(){var a=d(this);"checked"!==a.attr("checked")&&a.click()});a.is("#error-toggle--toggle-1")&&("checked"===d(this).attr("checked")?d("#account-selector-modal--error-message-1").show():
d("#account-selector-modal--error-message-1").hide());a.is("#error-toggle--toggle-2")&&("checked"===d(this).attr("checked")?d("#account-selector-modal--error-message-2").show():d("#account-selector-modal--error-message-2").hide())});d(".toggle").toggles({on:!0});var w="account-selector--reveal",z="account-selector--hide",D="action-bar--animation-slide-in",y="action-bar--animation-slide-out",B="js-find-routing-number__shown",I="routing-number-link",S=d(".account-selector"),J=d(".account-selector-wrapper"),
O=d(".account-selector--tab"),V=d(".account-selector--group-container");a=d(".account-selector--group-header");var N=a.parent(),P=d(".account-selector--standard-actions"),U=d(".account-selector--edit-actions");d("#balances-component-container");var W=d(".account-selector--show-edit-modal").ModalPopup(),ca=d(".account-selector--show-add-outside-accounts-legal-modal").ModalPopup(),R=d(".account-selector--show-add-outside-accounts-intro-modal").ModalPopup(),Z=d(".account-selector--show-add-outside-accounts-content-modal").ModalPopup(),
ea=d(".account-selector--account-edit-options"),la=d(".account-selector--account-text"),va=d(".account-selector--group-account-text"),H=d(".account-selector--select-multiple-checkbox"),M=d("#account-selector--save-edit"),F=d(".account-selector--group-container"),Ba=d(".account-selector--tab-top-row .account-selector--left-info"),X=d(".action-bar--mobile.action-bar--accounts"),ta=d(".js-find-routing-number"),q=d(".page-content-title"),Y=d("#customgroupname"),sa=4;d(".modal-popup--overlay")&&d("body>.base-modal--container").each(function(){d("body>.base-modal--container").insertAfter(".modal-popup--overlay")});
S.swipe({swipeLeft:function(){J.hasClass(w)?l():m()}});if(!0===oceShipitToggle){var Ca=require("util/eventhub-backbone");d(".account-selector--group-container > .icon--plus-minus").off("click keypress touchstart").on("click keypress touchstart",function(){d(this).closest(".account-selector--group-container").toggleClass("collapsed");1===d(this).closest(".account-selector--group-container").find(".account-selector--tab").length&&d(this).closest(".account-selector--group-container").toggleClass("singleaccount");
var a=d(".account-selector--group-container").length,b=d(".account-selector--group-container.collapsed").length;a===b?d(".account-selector--expand-collapse").addClass("allcollapsed").find("span").text("Expand"):0===b&&d(".account-selector--expand-collapse").removeClass("allcollapsed").find("span").text("Collapse");Ca.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")});d(".account-selector--expand-collapse").off("click keypress").on("click keypress",function(){d(this).toggleClass("allcollapsed");d(this).hasClass("allcollapsed")?
(d(".account-selector--group-container").addClass("collapsed"),d(this).find("span").text("Expand"),d(".account-selector--group-container").each(function(){1===d(this).find(".account-selector--tab").length&&d(this).removeClass("singleaccount")})):(d(".account-selector--group-container").each(function(){1===d(this).find(".account-selector--tab").length&&d(this).addClass("singleaccount")}),d(".account-selector--group-container").removeClass("collapsed"),d(this).find("span").text("Collapse"),d('.account-selector--tab:not(".account-selector--error-tab, .account-selector--tab-all")').slideDown());
Ca.publishEvent("ACCOUNT_SELECTOR_HEIGHT_CHANGED")})}!0!==oceShipitToggle&&(d(".account-selector--group-container .icon--plus-minus").remove(),d(".account-selector--header-total").css("margin-right","0"));var Aa=null;O.on("keydown",function(a){var b=a.keyCode;if(32===b||13===b)d(a.currentTarget).closest(".account-selector--tab").trigger("click"),a.preventDefault()});O.on("click",function(a){clearTimeout(Aa);var b=d.extend({},a),c=this;Aa=setTimeout(function(){n.apply(c,[b]);Aa=null},100)});O.swipe({click:function(a,
b){d(b).closest(".account-selector--tab").click()}});d(".account-selector-close-control--link").click(function(a){J.hasClass(w)?l():m();var b=d(".js-invitation");b&&(0<b.length&&b.is(":visible"))&&b.trigger("INVITATION_RESIZE");a.preventDefault()});d(".account-selector--close-control").swipe({click:function(){J.hasClass(w)?l():m()}});Ba.on("keydown",function(a){var b=a.keyCode;if(32===b||13===b)b=d(a.currentTarget).closest(".account-selector--tab"),n.call(b,null),a.preventDefault()});var Va=null;
toggleMap.groupViewDisabled||(a.addClass("account-select-group-color"),a.on("click",r),a.swipe({click:r}));d("#account-selector--edit-accounts").on("click",function(a){a.preventDefault();v(W)});d(".account-selector--add-outside-accounts").on("click",function(a){a.preventDefault();v(ca)});d(".account-selector--show-add-outside-accounts-legal-modal").on("click",".action-button--generic",function(a){a.preventDefault();v(R)});d(".account-selector--show-add-outside-accounts-intro-modal").on("click",".action-button--generic",
function(a){a.preventDefault();v(Z)});d(".base-popup--close-button-modal").on("click",function(a){a.preventDefault();d(".base-popup--close-button").trigger("click")});d(".base-popup--cancel-link").on("click",function(a){a.preventDefault();d(".base-popup--close-button").trigger("click")});d("#account-selector--cancel-edit").on("click",function(){S.removeClass("account-selector--edit-mode").removeClass("account-selector--select-mode").addClass("account-selector--normal-mode");P.removeClass("hidden");
U.addClass("hidden");ea.addClass("hidden");H.addClass("hidden");la.attr("readonly","readonly");va.attr("readonly","readonly")});d("#account-selector--save-edit").on("click",function(){S.removeClass("account-selector--edit-mode").removeClass("account-selector--select-mode").addClass("account-selector--normal-mode");P.removeClass("hidden");U.addClass("hidden");ea.addClass("hidden");H.addClass("hidden")});d("#account-selector--select-multiple").on("click",function(){S.removeClass("account-selector--normal-mode").removeClass("account-selector--edit-mode").addClass("account-selector--select-mode");
M.html('<a href="javascript:void(0)">Apply</a>');P.addClass("hidden");U.removeClass("hidden");H.removeClass("hidden")});d(".create-group-button").on("click",function(a){if(""!==Y.val()){a.preventDefault();var b=Y.val();a=d("<li/>",{"class":"clearfix",id:"custom-group-"+sa});d("<label/>",{"class":"off-screen","for":"customgroup"+sa}).html(b).appendTo(a);d("<input/>",{type:"text",id:"customgroup"+sa,name:"customgroup"+sa,value:b}).appendTo(a);b=d("<a/>",{href:"#","class":"account-selector-modal--remove",
role:"button","aria-label":"Remove Group "+sa,"data-customgroupnumber":sa}).appendTo(a);d("<img/>",{src:"images/icon-remove.png",alt:"Remove Group "+sa}).appendTo(b);d("<span/>",{"class":"off-screen"}).html("Remove Group "+sa).appendTo(b);b.on("click",k);d("ul.account-selector-modal--custom-group-list").append(a);Y.val("");sa++}});d(".account-selector-modal--remove").on("click",k);F.each(function(){1<d(this).children(".account-selector--tab").length&&d(this).addClass("account-selector--group-container-multiple")})};
a.prototype._showAnimatedHelpBubble=function(a,c){function e(){g.hide();h.off("resize",e)}var g=d(".account-selector--help-instruction-bubble-container"),h=d(b),m=0,n=this._$transitionTarget;h.on("resize",e);h.on("accountSelectorRevealed openInfoFlyout",e);if(d.browser.msie&&("8.0"===d.browser.version||"9.0"===d.browser.version))m=3E3;g.css({left:a+n.width()+5,top:c+5}).fadeIn().transit({x:25},800,"easeInOutCubic").transit({x:0},800,"easeInOutCubic").transit({x:25},800,"easeInOutCubic").transit({x:-0},
800,"easeInOutCubic").transit({x:25},800,"easeInOutCubic").transit({x:0},800,"easeInOutCubic").delay(m).fadeOut(300,function(){h.off("resize",e);h.off("openInfoFlyout",e)})};a.prototype._animatedClose=function(){function a(b){0<c.length&&c.is(":visible")&&(p=c.offset().left,m=c.offset().top);g.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",a);e.ModalPopup.prototype.close.apply(l,arguments);l._showAnimatedHelpBubble(p,m);h=!1}if(!h){var c=this._$transitionTarget,
g=d(".account-content"),l=this,p=0,m=0;h=!0;if(d("html.lt-ie10").length)e.ModalPopup.prototype.close.apply(this,arguments),this._showAnimatedHelpBubble(p,m),h=!1;else g.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",a);(b.matchMedia&&!b.matchMedia("(max-width: 848px)").matches||d("html.lt-ie9").length)&&b.PreferenceModel&&"Y"!==PreferenceModel.get("ACCOUNT_SELECTOR_TOOLTIP_BUBBLE_HIDDEN")&&PreferenceModel.set({ACCOUNT_SELECTOR_TOOLTIP_BUBBLE_HIDDEN:"Y"},{sessionOnly:!0})}};
e.Applications.AccountSelector=a;a.events={accountSelectorHidden:"accountSelectorHidden",accountSelectorRevealed:"accountSelectorRevealed",singleAccountSelected:"singleAccountSelected",allAccountsSelected:"allAccountsSelected",accountGroupSelected:"accountGroupSelected"};d.fn.AccountSelector=function(){var a=arguments[0],b=arguments;if(methods[a])a=methods[a],b=Array.prototype.slice.call(arguments,1);else if("object"==typeof a||!a)a=methods.init;else return d.error("Method "+a+" does not exist on jQuery.pluginName"),
this;return a.apply(this,b)}})(jQuery,window);define("components/accountselector",["jquery","toggles"],function(){});define("lib/eventBus",["backbone","underscore"],function(a,b){var g={},c=(window.F7=window.F7||{}).EventBus=b.extend({},a.Events);c.push=function(a,b){g[a]?g[a].push(b):g[a]=[b]};c.pull=function(a){var b;if(g[a])return b=g[a].shift(),0===g[a].length&&delete g[a],b};c.getCollection=function(a){return g[a]};return c});
define("lib/component",["backbone","underscore","lib/eventBus"],function(a,b,g){var c=(window.F7=window.F7||{}).Component=a.View.extend({componentName:"component",linkedComponent:null,link:function(a){this.linkedComponent=a},asyncInitialize:function(){var a=g.pull(this.componentName);a&&g.trigger(this.componentName+":open",a)}}),e=["initialize","render","destroy","remove"],d=c.extend;c.extend=function(){var a=d.apply(c,arguments);b.each(e,function(b){var c=a.prototype[b];null!=c&&(a.prototype[b]=
function(){var a=c.apply(this,arguments);g.trigger(this.componentName,{lifecycle:b,caller:this});return a})});return a};return c});define("f7",["jquery","backbone","underscore","lib/eventBus","lib/component"],function(){return window.F7=window.F7||{}});
requirejs.config({waitSeconds:0,config:{text:{useXhr:function(){return!0}}},paths:{fang:"Fang/js/fang",mustache:"Fang/js/lib/mustache.min",angular:"lib/angular",eventBus:"Fang/js/eventbus",component:"Fang/js/component",oceContainer:"oceContainer",positions:"positions-app",jquery:"lib/jquery-1.8.3",oo:"lib/oo-1.1",modernizr:"lib/modernizr-2.6.1.min",underscore:"lib/underscore-1.5.2",text:"lib/text-2.0.10",backbone:"lib/backbone-1.1.0",upbase:"up-base",uscript:"script",placeholder:"lib/jquery-plugins/jquery.placeholder.min",
tools:"lib/jquery-plugins/jquery.tools.min",simplemodal:"lib/jquery-plugins/jquery.simplemodal.1.4.2.min",carousel:"lib/jquery-plugins/wilto-carousel",autollipsis:"lib/jquery-plugins/jquery.autoellipsis-1.0.10",lazyload:"lib/jquery-plugins/jquery.lazyload.min",cookie:"lib/jquery-plugins/jquery.cookie",jqueryui:"lib/jquery-plugins/jquery-ui.min",wookmark:"lib/jquery-plugins/jquery.wookmark",timer:"lib/jquery-plugins/jquery.timer",highcharts:"lib/highstock-2.0.4",highchartsMore:"lib/highcharts-more-4.0.4",
pagebus:"lib/pagebus",carouFredSel:"lib/jquery-plugins/jquery.carouFredSel-6.2.1_fid",mousewheel:"lib/jquery-plugins/jquery.mousewheel.min",validate:"lib/jquery-plugins/jquery.validate",fiddatepicker:"lib/jquery-plugins/fiddatepicker",datemask:"lib/jquery-plugins/datemask",charactersmask:"lib/jquery-plugins/characters-mask",HelpBubble:"lib/jquery-plugins/help-bubble",FIDBaseRole:"components/accessibility-roles/base-role",FIDButtonRole:"components/accessibility-roles/button-role",FIDDialogRole:"components/accessibility-roles/dialog-role",
FIDTabRole:"components/accessibility-roles/tab-role",jqueryTouchSwipe:"lib/jquery.touchSwipe.min",jqueryTransmit:"lib/jquery-plugins/jquery.transit.min",IntroTour:"components/introtour",global:"global",page:"components/page",tpl:"lib/tpl",ngtimer:"util/ngtimer",f7:"util/f7",irachartjs:"lib/jquery-plugins/chart",toggles:"lib/jquery-plugins/toggles",jqueryExpander:"lib/jquery-plugins/jquery.expander",jqueryMatchHeight:"lib/jquery-plugins/jquery.matchHeight-min",slick:"lib/slick",canvasResize:"lib/jquery.canvasResize",
exif:"lib/jquery.exif",fontFaceObserver:"lib/fontfaceobserver",fontLoader:"font-loader"},shim:{app:{deps:["oceContainer"]},jqueryMatchHeight:{deps:["jquery"]},slick:{deps:["jquery"],exports:"$.fn.slick"},canvasResize:{deps:["jquery","exif"]},jqueryExpander:{deps:["jquery","jqueryui","jqueryTouchSwipe"]},ocLazyLoad:{exports:"ocLazyLoad",deps:["angular"]},carouFredSel:{deps:["jquery","jqueryui","jqueryTouchSwipe","mousewheel"]},underscore:{deps:[],exports:"_"},modernizr:{deps:[],exports:"Modernizr"},
backbone:{deps:["jquery","underscore","text"],exports:"Backbone"},tools:{deps:["jquery"],exports:"$.fn.tools"},placeholder:{deps:["jquery"],exports:"$.fn.placeholder"},simplemodal:{deps:["jquery"],exports:"$.fn.simplemodal"},carousel:{deps:["jquery"],exports:"$.fn.carousel"},autollipsis:{deps:["jquery"],exports:"$.fn.ellipsis"},highcharts:{deps:["jquery"],exports:"Highcharts"},highchartsMore:{deps:["highcharts"],exports:"HighchartsMore"},lazyload:{deps:["jquery"],exports:"lazyload"},cookie:{deps:["jquery"]},
jqueryui:{deps:["jquery"]},pagebus:{exports:"PageBus"},"components/moretab":{deps:["jquery","components/fidtab"],exports:"FID.MoreTabs"},"components/fidtab":{deps:["jquery"],exports:"FID.Tabs"},"components/legal-footer":{deps:["jquery"],exports:"FID.LegalFooter"},"components/basepopup":{deps:["jquery","components/accessibility"],exports:"FID.BasePopup"},"components/draggablepopup":{deps:["jquery","jqueryui","components/basepopup"],exports:"FID.DraggablePopup"},"components/primarynav":{deps:["jquery",
"util/nav.autocomplete"],exports:"NavBar"},"components/messagingpopup":{deps:["jquery","components/draggablepopup","components/actionbarpopup","components/fidtab"],exports:"FID.MessagingPopup"},"components/multiaccordion":{deps:["jquery"],exports:"FID.MultiAccordion"},"components/hideshowaccordions":{deps:["jquery"],exports:"FID.HideShowAccordions"},"components/flexgrid":{deps:["jquery"],exports:"FlexGrid"},"components/fixed-table-header":{deps:["jquery"],exports:"FID.FixedTableHeader"},"components/accessibility":{deps:["FIDBaseRole",
"FIDTabRole","FIDDialogRole","FIDButtonRole"]},wookmark:{deps:["jquery"]},"components/modalpopup":{deps:["jquery","components/basepopup"],exports:"ModalPopup"},validate:{deps:["jquery"]},charactersmask:{deps:["jquery","jqueryui"]},HelpBubble:{deps:["jquery"],exports:"HelpBubble"},datemask:{deps:["charactersmask"]},fiddatepicker:{deps:["datemask"]},"components/actionbar":{deps:["jquery"]},"components/actionbarpopup":{deps:["jquery","components/draggablepopup"]},"components/magicgrid":{deps:["jquery"],
exports:"MagicGrid"},"components/positions":{deps:["jquery","components/magicgrid"]},"components/positions-controls":{deps:["jquery","components/accessibility"]},"components/accountselector":{deps:["jquery","toggles"]},"components/billpay":{deps:["components/draggablepopup","components/actionbarpopup"]},IntroTour:{deps:["jquery","jqueryTransmit","components/basepopup","components/modalpopup"]},"components/transfer":{deps:["components/draggablepopup","components/actionbarpopup"]},global:{deps:["page"]},
page:{deps:["jquery"]},f7:{deps:["backbone","underscore","lib/eventBus"]},irachartjs:{deps:["jquery"]},toggles:{deps:["jquery"]},"components/card-collapser":{deps:["jquery","components/expander"]},"components/change-core":{deps:["components/changecorepopup"]},"components/changecorepopup":{deps:["components/draggablepopup"]},"components/corepositiontooltip":{deps:["components/basepopup"]},"lib/masonry-layout-shipit":{deps:["lib/jquery-ui-touch"]},"lib/jquery-ui-touch":{deps:["jqueryui"]},fontLoader:{deps:["fontFaceObserver"]}}});
window.name="mainwindow";requirejs("jquery app fontLoader jqueryMatchHeight slick global components/accountselector f7 fang oceContainer".split(" "),function(a,b){a.ajaxPrefilter("+script",function(a,b){a.cache=b&&void 0!==b.cache?b.cache:!0});a(function(){try{console.log("start next gen"),b.create({routeOnStart:!0,popupDisplayMode:"NonBlocking"}).start()}catch(a){console.log("NG start err"),console.log(a.stack)}})});define("main.dma",function(){});

/*
//@ sourceMappingURL=main-dma-min.map.js
*/